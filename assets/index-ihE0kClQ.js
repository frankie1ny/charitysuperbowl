(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function s_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sd={exports:{}},ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function KS(){if(Cy)return ul;Cy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:t,type:o,key:c,ref:l!==void 0?l:null,props:a}}return ul.Fragment=e,ul.jsx=n,ul.jsxs=n,ul}var Sy;function QS(){return Sy||(Sy=1,Sd.exports=KS()),Sd.exports}var _=QS(),Td={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function $S(){if(Ty)return _e;Ty=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function T(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function H(b,w,G){this.props=b,this.context=w,this.refs=I,this.updater=G||N}H.prototype.isReactComponent={},H.prototype.setState=function(b,w){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,w,"setState")},H.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function z(){}z.prototype=H.prototype;function q(b,w,G){this.props=b,this.context=w,this.refs=I,this.updater=G||N}var V=q.prototype=new z;V.constructor=q,M(V,H.prototype),V.isPureReactComponent=!0;var Y=Array.isArray;function te(){}var W={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function oe(b,w,G){var Z=G.ref;return{$$typeof:t,type:b,key:w,ref:Z!==void 0?Z:null,props:G}}function de(b,w){return oe(b.type,w,b.props)}function X(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function ae(b){var w={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(G){return w[G]})}var $=/\/+/g;function ne(b,w){return typeof b=="object"&&b!==null&&b.key!=null?ae(""+b.key):w.toString(36)}function ye(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(te,te):(b.status="pending",b.then(function(w){b.status==="pending"&&(b.status="fulfilled",b.value=w)},function(w){b.status==="pending"&&(b.status="rejected",b.reason=w)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function U(b,w,G,Z,ce){var he=typeof b;(he==="undefined"||he==="boolean")&&(b=null);var Ce=!1;if(b===null)Ce=!0;else switch(he){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(b.$$typeof){case t:case e:Ce=!0;break;case v:return Ce=b._init,U(Ce(b._payload),w,G,Z,ce)}}if(Ce)return ce=ce(b),Ce=Z===""?"."+ne(b,0):Z,Y(ce)?(G="",Ce!=null&&(G=Ce.replace($,"$&/")+"/"),U(ce,w,G,"",function(gs){return gs})):ce!=null&&(X(ce)&&(ce=de(ce,G+(ce.key==null||b&&b.key===ce.key?"":(""+ce.key).replace($,"$&/")+"/")+Ce)),w.push(ce)),1;Ce=0;var Je=Z===""?".":Z+":";if(Y(b))for(var Xe=0;Xe<b.length;Xe++)Z=b[Xe],he=Je+ne(Z,Xe),Ce+=U(Z,w,G,he,ce);else if(Xe=T(b),typeof Xe=="function")for(b=Xe.call(b),Xe=0;!(Z=b.next()).done;)Z=Z.value,he=Je+ne(Z,Xe++),Ce+=U(Z,w,G,he,ce);else if(he==="object"){if(typeof b.then=="function")return U(ye(b),w,G,Z,ce);throw w=String(b),Error("Objects are not valid as a React child (found: "+(w==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":w)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function J(b,w,G){if(b==null)return b;var Z=[],ce=0;return U(b,Z,"","",function(he){return w.call(G,he,ce++)}),Z}function O(b){if(b._status===-1){var w=b._result;w=w(),w.then(function(G){(b._status===0||b._status===-1)&&(b._status=1,b._result=G)},function(G){(b._status===0||b._status===-1)&&(b._status=2,b._result=G)}),b._status===-1&&(b._status=0,b._result=w)}if(b._status===1)return b._result.default;throw b._result}var ie=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var w=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(w))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},ee={map:J,forEach:function(b,w,G){J(b,function(){w.apply(this,arguments)},G)},count:function(b){var w=0;return J(b,function(){w++}),w},toArray:function(b){return J(b,function(w){return w})||[]},only:function(b){if(!X(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return _e.Activity=x,_e.Children=ee,_e.Component=H,_e.Fragment=n,_e.Profiler=l,_e.PureComponent=q,_e.StrictMode=o,_e.Suspense=g,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,_e.__COMPILER_RUNTIME={__proto__:null,c:function(b){return W.H.useMemoCache(b)}},_e.cache=function(b){return function(){return b.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(b,w,G){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var Z=M({},b.props),ce=b.key;if(w!=null)for(he in w.key!==void 0&&(ce=""+w.key),w)!me.call(w,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&w.ref===void 0||(Z[he]=w[he]);var he=arguments.length-2;if(he===1)Z.children=G;else if(1<he){for(var Ce=Array(he),Je=0;Je<he;Je++)Ce[Je]=arguments[Je+2];Z.children=Ce}return oe(b.type,ce,Z)},_e.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:a,_context:b},b},_e.createElement=function(b,w,G){var Z,ce={},he=null;if(w!=null)for(Z in w.key!==void 0&&(he=""+w.key),w)me.call(w,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(ce[Z]=w[Z]);var Ce=arguments.length-2;if(Ce===1)ce.children=G;else if(1<Ce){for(var Je=Array(Ce),Xe=0;Xe<Ce;Xe++)Je[Xe]=arguments[Xe+2];ce.children=Je}if(b&&b.defaultProps)for(Z in Ce=b.defaultProps,Ce)ce[Z]===void 0&&(ce[Z]=Ce[Z]);return oe(b,he,ce)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(b){return{$$typeof:h,render:b}},_e.isValidElement=X,_e.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:O}},_e.memo=function(b,w){return{$$typeof:p,type:b,compare:w===void 0?null:w}},_e.startTransition=function(b){var w=W.T,G={};W.T=G;try{var Z=b(),ce=W.S;ce!==null&&ce(G,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(te,ie)}catch(he){ie(he)}finally{w!==null&&G.types!==null&&(w.types=G.types),W.T=w}},_e.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},_e.use=function(b){return W.H.use(b)},_e.useActionState=function(b,w,G){return W.H.useActionState(b,w,G)},_e.useCallback=function(b,w){return W.H.useCallback(b,w)},_e.useContext=function(b){return W.H.useContext(b)},_e.useDebugValue=function(){},_e.useDeferredValue=function(b,w){return W.H.useDeferredValue(b,w)},_e.useEffect=function(b,w){return W.H.useEffect(b,w)},_e.useEffectEvent=function(b){return W.H.useEffectEvent(b)},_e.useId=function(){return W.H.useId()},_e.useImperativeHandle=function(b,w,G){return W.H.useImperativeHandle(b,w,G)},_e.useInsertionEffect=function(b,w){return W.H.useInsertionEffect(b,w)},_e.useLayoutEffect=function(b,w){return W.H.useLayoutEffect(b,w)},_e.useMemo=function(b,w){return W.H.useMemo(b,w)},_e.useOptimistic=function(b,w){return W.H.useOptimistic(b,w)},_e.useReducer=function(b,w,G){return W.H.useReducer(b,w,G)},_e.useRef=function(b){return W.H.useRef(b)},_e.useState=function(b){return W.H.useState(b)},_e.useSyncExternalStore=function(b,w,G){return W.H.useSyncExternalStore(b,w,G)},_e.useTransition=function(){return W.H.useTransition()},_e.version="19.2.4",_e}var by;function Af(){return by||(by=1,Td.exports=$S()),Td.exports}var le=Af();const l_=s_(le);var bd={exports:{}},cl={},Ad={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function XS(){return Ay||(Ay=1,(function(t){function e(U,J){var O=U.length;U.push(J);e:for(;0<O;){var ie=O-1>>>1,ee=U[ie];if(0<l(ee,J))U[ie]=J,U[O]=ee,O=ie;else break e}}function n(U){return U.length===0?null:U[0]}function o(U){if(U.length===0)return null;var J=U[0],O=U.pop();if(O!==J){U[0]=O;e:for(var ie=0,ee=U.length,b=ee>>>1;ie<b;){var w=2*(ie+1)-1,G=U[w],Z=w+1,ce=U[Z];if(0>l(G,O))Z<ee&&0>l(ce,G)?(U[ie]=ce,U[Z]=O,ie=Z):(U[ie]=G,U[w]=O,ie=w);else if(Z<ee&&0>l(ce,O))U[ie]=ce,U[Z]=O,ie=Z;else break e}}return J}function l(U,J){var O=U.sortIndex-J.sortIndex;return O!==0?O:U.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,x=null,E=3,T=!1,N=!1,M=!1,I=!1,H=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function V(U){for(var J=n(p);J!==null;){if(J.callback===null)o(p);else if(J.startTime<=U)o(p),J.sortIndex=J.expirationTime,e(g,J);else break;J=n(p)}}function Y(U){if(M=!1,V(U),!N)if(n(g)!==null)N=!0,te||(te=!0,ae());else{var J=n(p);J!==null&&ye(Y,J.startTime-U)}}var te=!1,W=-1,me=5,oe=-1;function de(){return I?!0:!(t.unstable_now()-oe<me)}function X(){if(I=!1,te){var U=t.unstable_now();oe=U;var J=!0;try{e:{N=!1,M&&(M=!1,z(W),W=-1),T=!0;var O=E;try{t:{for(V(U),x=n(g);x!==null&&!(x.expirationTime>U&&de());){var ie=x.callback;if(typeof ie=="function"){x.callback=null,E=x.priorityLevel;var ee=ie(x.expirationTime<=U);if(U=t.unstable_now(),typeof ee=="function"){x.callback=ee,V(U),J=!0;break t}x===n(g)&&o(g),V(U)}else o(g);x=n(g)}if(x!==null)J=!0;else{var b=n(p);b!==null&&ye(Y,b.startTime-U),J=!1}}break e}finally{x=null,E=O,T=!1}J=void 0}}finally{J?ae():te=!1}}}var ae;if(typeof q=="function")ae=function(){q(X)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ne=$.port2;$.port1.onmessage=X,ae=function(){ne.postMessage(null)}}else ae=function(){H(X,0)};function ye(U,J){W=H(function(){U(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(U){switch(E){case 1:case 2:case 3:var J=3;break;default:J=E}var O=E;E=J;try{return U()}finally{E=O}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(U,J){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var O=E;E=U;try{return J()}finally{E=O}},t.unstable_scheduleCallback=function(U,J,O){var ie=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ie+O:ie):O=ie,U){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=O+ee,U={id:v++,callback:J,priorityLevel:U,startTime:O,expirationTime:ee,sortIndex:-1},O>ie?(U.sortIndex=O,e(p,U),n(g)===null&&U===n(p)&&(M?(z(W),W=-1):M=!0,ye(Y,O-ie))):(U.sortIndex=ee,e(g,U),N||T||(N=!0,te||(te=!0,ae()))),U},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(U){var J=E;return function(){var O=E;E=J;try{return U.apply(this,arguments)}finally{E=O}}}})(Nd)),Nd}var Ny;function WS(){return Ny||(Ny=1,Ad.exports=XS()),Ad.exports}var wd={exports:{}},Tt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function ZS(){if(wy)return Tt;wy=1;var t=Af();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Tt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Tt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,v)},Tt.flushSync=function(g){var p=c.T,v=o.p;try{if(c.T=null,o.p=2,g)return g()}finally{c.T=p,o.p=v,o.d.f()}},Tt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(g,p))},Tt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},Tt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:T}):v==="script"&&o.d.X(g,{crossOrigin:x,integrity:E,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Tt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(g)},Tt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin);o.d.L(g,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Tt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);o.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(g)},Tt.requestFormReset=function(g){o.d.r(g)},Tt.unstable_batchedUpdates=function(g,p){return g(p)},Tt.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Tt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Tt.version="19.2.4",Tt}var Ry;function jS(){if(Ry)return wd.exports;Ry=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wd.exports=ZS(),wd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function eT(){if(Iy)return cl;Iy=1;var t=WS(),e=Af(),n=jS();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function g(i){if(a(i)!==i)throw Error(o(188))}function p(i){var s=i.alternate;if(!s){if(s=a(i),s===null)throw Error(o(188));return s!==i?null:i}for(var r=i,u=s;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return g(m),i;if(y===u)return g(m),s;y=y.sibling}throw Error(o(188))}if(r.return!==u.return)r=m,u=y;else{for(var C=!1,S=m.child;S;){if(S===r){C=!0,r=m,u=y;break}if(S===u){C=!0,u=m,r=y;break}S=S.sibling}if(!C){for(S=y.child;S;){if(S===r){C=!0,r=y,u=m;break}if(S===u){C=!0,u=y,r=m;break}S=S.sibling}if(!C)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function ae(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var $=Symbol.for("react.client.reference");function ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===$?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case H:return"Profiler";case I:return"StrictMode";case Y:return"Suspense";case te:return"SuspenseList";case oe:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case q:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case V:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case W:return s=i.displayName||null,s!==null?s:ne(i.type)||"Memo";case me:s=i._payload,i=i._init;try{return ne(i(s))}catch{}}return null}var ye=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},ie=[],ee=-1;function b(i){return{current:i}}function w(i){0>ee||(i.current=ie[ee],ie[ee]=null,ee--)}function G(i,s){ee++,ie[ee]=i.current,i.current=s}var Z=b(null),ce=b(null),he=b(null),Ce=b(null);function Je(i,s){switch(G(he,s),G(ce,i),G(Z,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Yg(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Yg(s),i=Jg(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}w(Z),G(Z,i)}function Xe(){w(Z),w(ce),w(he)}function gs(i){i.memoizedState!==null&&G(Ce,i);var s=Z.current,r=Jg(s,i.type);s!==r&&(G(ce,i),G(Z,r))}function Vl(i){ce.current===i&&(w(Z),w(ce)),Ce.current===i&&(w(Ce),sl._currentValue=O)}var su,Eh;function Ii(i){if(su===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);su=s&&s[1]||"",Eh=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+su+i+Eh}var lu=!1;function ru(i,s){if(!i||lu)return"";lu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(B){var L=B}Reflect.construct(i,[],Q)}else{try{Q.call()}catch(B){L=B}i.call(Q.prototype)}}else{try{throw Error()}catch(B){L=B}(Q=i())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(B){if(B&&L&&typeof B.stack=="string")return[B.stack,L.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),C=y[0],S=y[1];if(C&&S){var A=C.split(`
`),P=S.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<P.length&&!P[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===P.length)for(u=A.length-1,m=P.length-1;1<=u&&0<=m&&A[u]!==P[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==P[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==P[m]){var F=`
`+A[u].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=u&&0<=m);break}}}finally{lu=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?Ii(r):""}function TE(i,s){switch(i.tag){case 26:case 27:case 5:return Ii(i.type);case 16:return Ii("Lazy");case 13:return i.child!==s&&s!==null?Ii("Suspense Fallback"):Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return ru(i.type,!1);case 11:return ru(i.type.render,!1);case 1:return ru(i.type,!0);case 31:return Ii("Activity");default:return""}}function Ch(i){try{var s="",r=null;do s+=TE(i,r),r=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var au=Object.prototype.hasOwnProperty,uu=t.unstable_scheduleCallback,cu=t.unstable_cancelCallback,bE=t.unstable_shouldYield,AE=t.unstable_requestPaint,Bt=t.unstable_now,NE=t.unstable_getCurrentPriorityLevel,Sh=t.unstable_ImmediatePriority,Th=t.unstable_UserBlockingPriority,Fl=t.unstable_NormalPriority,wE=t.unstable_LowPriority,bh=t.unstable_IdlePriority,RE=t.log,IE=t.unstable_setDisableYieldValue,ys=null,Gt=null;function Xn(i){if(typeof RE=="function"&&IE(i),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ys,i)}catch{}}var qt=Math.clz32?Math.clz32:kE,ME=Math.log,DE=Math.LN2;function kE(i){return i>>>=0,i===0?32:31-(ME(i)/DE|0)|0}var zl=256,Yl=262144,Jl=4194304;function Mi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Kl(i,s,r){var u=i.pendingLanes;if(u===0)return 0;var m=0,y=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~y,u!==0?m=Mi(u):(C&=S,C!==0?m=Mi(C):r||(r=S&~i,r!==0&&(m=Mi(r))))):(S=u&~y,S!==0?m=Mi(S):C!==0?m=Mi(C):r||(r=u&~i,r!==0&&(m=Mi(r)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:m}function vs(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function UE(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ah(){var i=Jl;return Jl<<=1,(Jl&62914560)===0&&(Jl=4194304),i}function du(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function _s(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function PE(i,s,r,u,m,y){var C=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var S=i.entanglements,A=i.expirationTimes,P=i.hiddenUpdates;for(r=C&~r;0<r;){var F=31-qt(r),Q=1<<F;S[F]=0,A[F]=-1;var L=P[F];if(L!==null)for(P[F]=null,F=0;F<L.length;F++){var B=L[F];B!==null&&(B.lane&=-536870913)}r&=~Q}u!==0&&Nh(i,u,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(C&~s))}function Nh(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-qt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function wh(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var u=31-qt(r),m=1<<u;m&s|i[u]&s&&(i[u]|=s),r&=~m}}function Rh(i,s){var r=s&-s;return r=(r&42)!==0?1:fu(r),(r&(i.suspendedLanes|s))!==0?0:r}function fu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ih(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:my(i.type))}function Mh(i,s){var r=J.p;try{return J.p=i,s()}finally{J.p=r}}var Wn=Math.random().toString(36).slice(2),yt="__reactFiber$"+Wn,It="__reactProps$"+Wn,ro="__reactContainer$"+Wn,pu="__reactEvents$"+Wn,LE="__reactListeners$"+Wn,OE="__reactHandles$"+Wn,Dh="__reactResources$"+Wn,xs="__reactMarker$"+Wn;function mu(i){delete i[yt],delete i[It],delete i[pu],delete i[LE],delete i[OE]}function ao(i){var s=i[yt];if(s)return s;for(var r=i.parentNode;r;){if(s=r[ro]||r[yt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=jg(i);i!==null;){if(r=i[yt])return r;i=jg(i)}return s}i=r,r=i.parentNode}return null}function uo(i){if(i=i[yt]||i[ro]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function Es(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function co(i){var s=i[Dh];return s||(s=i[Dh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ct(i){i[xs]=!0}var kh=new Set,Uh={};function Di(i,s){fo(i,s),fo(i+"Capture",s)}function fo(i,s){for(Uh[i]=s,i=0;i<s.length;i++)kh.add(s[i])}var HE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ph={},Lh={};function BE(i){return au.call(Lh,i)?!0:au.call(Ph,i)?!1:HE.test(i)?Lh[i]=!0:(Ph[i]=!0,!1)}function Ql(i,s,r){if(BE(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function $l(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function bn(i,s,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+u)}}function $t(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Oh(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function GE(i,s,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(C){r=""+C,y.call(this,C)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(C){r=""+C},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function gu(i){if(!i._valueTracker){var s=Oh(i)?"checked":"value";i._valueTracker=GE(i,s,""+i[s])}}function Hh(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return i&&(u=Oh(i)?i.checked?"true":"false":i.value),i=u,i!==r?(s.setValue(i),!0):!1}function Xl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var qE=/[\n"\\]/g;function Xt(i){return i.replace(qE,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function yu(i,s,r,u,m,y,C,S){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),s!=null?C==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+$t(s)):i.value!==""+$t(s)&&(i.value=""+$t(s)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),s!=null?vu(i,C,$t(s)):r!=null?vu(i,C,$t(r)):u!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+$t(S):i.removeAttribute("name")}function Bh(i,s,r,u,m,y,C,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){gu(i);return}r=r!=null?""+$t(r):"",s=s!=null?""+$t(s):r,S||s===i.value||(i.value=s),i.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),gu(i)}function vu(i,s,r){s==="number"&&Xl(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function ho(i,s,r,u){if(i=i.options,s){s={};for(var m=0;m<r.length;m++)s["$"+r[m]]=!0;for(r=0;r<i.length;r++)m=s.hasOwnProperty("$"+i[r].value),i[r].selected!==m&&(i[r].selected=m),m&&u&&(i[r].defaultSelected=!0)}else{for(r=""+$t(r),s=null,m=0;m<i.length;m++){if(i[m].value===r){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function Gh(i,s,r){if(s!=null&&(s=""+$t(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+$t(r):""}function qh(i,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(o(92));if(ye(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=$t(s),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),gu(i)}function po(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var VE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vh(i,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,r):typeof r!="number"||r===0||VE.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function Fh(i,s,r){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&r[m]!==u&&Vh(i,m,u)}else for(var y in s)s.hasOwnProperty(y)&&Vh(i,y,s[y])}function _u(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wl(i){return zE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function An(){}var xu=null;function Eu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mo=null,go=null;function zh(i){var s=uo(i);if(s&&(i=s.stateNode)){var r=i[It]||null;e:switch(i=s.stateNode,s.type){case"input":if(yu(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Xt(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==i&&u.form===i.form){var m=u[It]||null;if(!m)throw Error(o(90));yu(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===i.form&&Hh(u)}break e;case"textarea":Gh(i,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&ho(i,!!r.multiple,s,!1)}}}var Cu=!1;function Yh(i,s,r){if(Cu)return i(s,r);Cu=!0;try{var u=i(s);return u}finally{if(Cu=!1,(mo!==null||go!==null)&&(Hr(),mo&&(s=mo,i=go,go=mo=null,zh(s),i)))for(s=0;s<i.length;s++)zh(i[s])}}function Cs(i,s){var r=i.stateNode;if(r===null)return null;var u=r[It]||null;if(u===null)return null;r=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(o(231,s,typeof r));return r}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Su=!1;if(Nn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Su=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Su=!1}var Zn=null,Tu=null,Zl=null;function Jh(){if(Zl)return Zl;var i,s=Tu,r=s.length,u,m="value"in Zn?Zn.value:Zn.textContent,y=m.length;for(i=0;i<r&&s[i]===m[i];i++);var C=r-i;for(u=1;u<=C&&s[r-u]===m[y-u];u++);return Zl=m.slice(i,1<u?1-u:void 0)}function jl(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function er(){return!0}function Kh(){return!1}function Mt(i){function s(r,u,m,y,C){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(r=i[S],this[S]=r?r(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?er:Kh,this.isPropagationStopped=Kh,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),s}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tr=Mt(ki),Ts=x({},ki,{view:0,detail:0}),YE=Mt(Ts),bu,Au,bs,nr=x({},Ts,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bs&&(bs&&i.type==="mousemove"?(bu=i.screenX-bs.screenX,Au=i.screenY-bs.screenY):Au=bu=0,bs=i),bu)},movementY:function(i){return"movementY"in i?i.movementY:Au}}),Qh=Mt(nr),JE=x({},nr,{dataTransfer:0}),KE=Mt(JE),QE=x({},Ts,{relatedTarget:0}),Nu=Mt(QE),$E=x({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),XE=Mt($E),WE=x({},ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ZE=Mt(WE),jE=x({},ki,{data:0}),$h=Mt(jE),eC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iC(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=nC[i])?!!s[i]:!1}function wu(){return iC}var oC=x({},Ts,{key:function(i){if(i.key){var s=eC[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=jl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tC[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wu,charCode:function(i){return i.type==="keypress"?jl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?jl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),sC=Mt(oC),lC=x({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xh=Mt(lC),rC=x({},Ts,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wu}),aC=Mt(rC),uC=x({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),cC=Mt(uC),dC=x({},nr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),fC=Mt(dC),hC=x({},ki,{newState:0,oldState:0}),pC=Mt(hC),mC=[9,13,27,32],Ru=Nn&&"CompositionEvent"in window,As=null;Nn&&"documentMode"in document&&(As=document.documentMode);var gC=Nn&&"TextEvent"in window&&!As,Wh=Nn&&(!Ru||As&&8<As&&11>=As),Zh=" ",jh=!1;function ep(i,s){switch(i){case"keyup":return mC.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yo=!1;function yC(i,s){switch(i){case"compositionend":return tp(s);case"keypress":return s.which!==32?null:(jh=!0,Zh);case"textInput":return i=s.data,i===Zh&&jh?null:i;default:return null}}function vC(i,s){if(yo)return i==="compositionend"||!Ru&&ep(i,s)?(i=Jh(),Zl=Tu=Zn=null,yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Wh&&s.locale!=="ko"?null:s.data;default:return null}}var _C={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function np(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_C[i.type]:s==="textarea"}function ip(i,s,r,u){mo?go?go.push(u):go=[u]:mo=u,s=Yr(s,"onChange"),0<s.length&&(r=new tr("onChange","change",null,r,u),i.push({event:r,listeners:s}))}var Ns=null,ws=null;function xC(i){Bg(i,0)}function ir(i){var s=Es(i);if(Hh(s))return i}function op(i,s){if(i==="change")return s}var sp=!1;if(Nn){var Iu;if(Nn){var Mu="oninput"in document;if(!Mu){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),Mu=typeof lp.oninput=="function"}Iu=Mu}else Iu=!1;sp=Iu&&(!document.documentMode||9<document.documentMode)}function rp(){Ns&&(Ns.detachEvent("onpropertychange",ap),ws=Ns=null)}function ap(i){if(i.propertyName==="value"&&ir(ws)){var s=[];ip(s,ws,i,Eu(i)),Yh(xC,s)}}function EC(i,s,r){i==="focusin"?(rp(),Ns=s,ws=r,Ns.attachEvent("onpropertychange",ap)):i==="focusout"&&rp()}function CC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ir(ws)}function SC(i,s){if(i==="click")return ir(s)}function TC(i,s){if(i==="input"||i==="change")return ir(s)}function bC(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Vt=typeof Object.is=="function"?Object.is:bC;function Rs(i,s){if(Vt(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!au.call(s,m)||!Vt(i[m],s[m]))return!1}return!0}function up(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cp(i,s){var r=up(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=s&&u>=s)return{node:r,offset:s-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=up(r)}}function dp(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?dp(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function fp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Xl(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=Xl(i.document)}return s}function Du(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var AC=Nn&&"documentMode"in document&&11>=document.documentMode,vo=null,ku=null,Is=null,Uu=!1;function hp(i,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uu||vo==null||vo!==Xl(u)||(u=vo,"selectionStart"in u&&Du(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Is&&Rs(Is,u)||(Is=u,u=Yr(ku,"onSelect"),0<u.length&&(s=new tr("onSelect","select",null,s,r),i.push({event:s,listeners:u}),s.target=vo)))}function Ui(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var _o={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Pu={},pp={};Nn&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Pi(i){if(Pu[i])return Pu[i];if(!_o[i])return i;var s=_o[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in pp)return Pu[i]=s[r];return i}var mp=Pi("animationend"),gp=Pi("animationiteration"),yp=Pi("animationstart"),NC=Pi("transitionrun"),wC=Pi("transitionstart"),RC=Pi("transitioncancel"),vp=Pi("transitionend"),_p=new Map,Lu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lu.push("scrollEnd");function un(i,s){_p.set(i,s),Di(s,[i])}var or=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Wt=[],xo=0,Ou=0;function sr(){for(var i=xo,s=Ou=xo=0;s<i;){var r=Wt[s];Wt[s++]=null;var u=Wt[s];Wt[s++]=null;var m=Wt[s];Wt[s++]=null;var y=Wt[s];if(Wt[s++]=null,u!==null&&m!==null){var C=u.pending;C===null?m.next=m:(m.next=C.next,C.next=m),u.pending=m}y!==0&&xp(r,m,y)}}function lr(i,s,r,u){Wt[xo++]=i,Wt[xo++]=s,Wt[xo++]=r,Wt[xo++]=u,Ou|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Hu(i,s,r,u){return lr(i,s,r,u),rr(i)}function Li(i,s){return lr(i,null,null,s),rr(i)}function xp(i,s,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var m=!1,y=i.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&s!==null&&(m=31-qt(r),i=y.hiddenUpdates,u=i[m],u===null?i[m]=[s]:u.push(s),s.lane=r|536870912),y):null}function rr(i){if(50<Zs)throw Zs=0,Kc=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Eo={};function IC(i,s,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(i,s,r,u){return new IC(i,s,r,u)}function Bu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function wn(i,s){var r=i.alternate;return r===null?(r=Ft(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function Ep(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ar(i,s,r,u,m,y){var C=0;if(u=i,typeof i=="function")Bu(i)&&(C=1);else if(typeof i=="string")C=PS(i,r,Z.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case oe:return i=Ft(31,r,s,m),i.elementType=oe,i.lanes=y,i;case M:return Oi(r.children,m,y,s);case I:C=8,m|=24;break;case H:return i=Ft(12,r,s,m|2),i.elementType=H,i.lanes=y,i;case Y:return i=Ft(13,r,s,m),i.elementType=Y,i.lanes=y,i;case te:return i=Ft(19,r,s,m),i.elementType=te,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:C=10;break e;case z:C=9;break e;case V:C=11;break e;case W:C=14;break e;case me:C=16,u=null;break e}C=29,r=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=Ft(C,r,s,m),s.elementType=i,s.type=u,s.lanes=y,s}function Oi(i,s,r,u){return i=Ft(7,i,u,s),i.lanes=r,i}function Gu(i,s,r){return i=Ft(6,i,null,s),i.lanes=r,i}function Cp(i){var s=Ft(18,null,null,0);return s.stateNode=i,s}function qu(i,s,r){return s=Ft(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Sp=new WeakMap;function Zt(i,s){if(typeof i=="object"&&i!==null){var r=Sp.get(i);return r!==void 0?r:(s={value:i,source:s,stack:Ch(s)},Sp.set(i,s),s)}return{value:i,source:s,stack:Ch(s)}}var Co=[],So=0,ur=null,Ms=0,jt=[],en=0,jn=null,xn=1,En="";function Rn(i,s){Co[So++]=Ms,Co[So++]=ur,ur=i,Ms=s}function Tp(i,s,r){jt[en++]=xn,jt[en++]=En,jt[en++]=jn,jn=i;var u=xn;i=En;var m=32-qt(u)-1;u&=~(1<<m),r+=1;var y=32-qt(s)+m;if(30<y){var C=m-m%5;y=(u&(1<<C)-1).toString(32),u>>=C,m-=C,xn=1<<32-qt(s)+m|r<<m|u,En=y+i}else xn=1<<y|r<<m|u,En=i}function Vu(i){i.return!==null&&(Rn(i,1),Tp(i,1,0))}function Fu(i){for(;i===ur;)ur=Co[--So],Co[So]=null,Ms=Co[--So],Co[So]=null;for(;i===jn;)jn=jt[--en],jt[en]=null,En=jt[--en],jt[en]=null,xn=jt[--en],jt[en]=null}function bp(i,s){jt[en++]=xn,jt[en++]=En,jt[en++]=jn,xn=s.id,En=s.overflow,jn=i}var vt=null,Ke=null,Ie=!1,ei=null,tn=!1,zu=Error(o(519));function ti(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ds(Zt(s,i)),zu}function Ap(i){var s=i.stateNode,r=i.type,u=i.memoizedProps;switch(s[yt]=i,s[It]=u,r){case"dialog":Ae("cancel",s),Ae("close",s);break;case"iframe":case"object":case"embed":Ae("load",s);break;case"video":case"audio":for(r=0;r<el.length;r++)Ae(el[r],s);break;case"source":Ae("error",s);break;case"img":case"image":case"link":Ae("error",s),Ae("load",s);break;case"details":Ae("toggle",s);break;case"input":Ae("invalid",s),Bh(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ae("invalid",s);break;case"textarea":Ae("invalid",s),qh(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||Fg(s.textContent,r)?(u.popover!=null&&(Ae("beforetoggle",s),Ae("toggle",s)),u.onScroll!=null&&Ae("scroll",s),u.onScrollEnd!=null&&Ae("scrollend",s),u.onClick!=null&&(s.onclick=An),s=!0):s=!1,s||ti(i,!0)}function Np(i){for(vt=i.return;vt;)switch(vt.tag){case 5:case 31:case 13:tn=!1;return;case 27:case 3:tn=!0;return;default:vt=vt.return}}function To(i){if(i!==vt)return!1;if(!Ie)return Np(i),Ie=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||ad(i.type,i.memoizedProps)),r=!r),r&&Ke&&ti(i),Np(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Ke=Zg(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));Ke=Zg(i)}else s===27?(s=Ke,mi(i.type)?(i=hd,hd=null,Ke=i):Ke=s):Ke=vt?on(i.stateNode.nextSibling):null;return!0}function Hi(){Ke=vt=null,Ie=!1}function Yu(){var i=ei;return i!==null&&(Pt===null?Pt=i:Pt.push.apply(Pt,i),ei=null),i}function Ds(i){ei===null?ei=[i]:ei.push(i)}var Ju=b(null),Bi=null,In=null;function ni(i,s,r){G(Ju,s._currentValue),s._currentValue=r}function Mn(i){i._currentValue=Ju.current,w(Ju)}function Ku(i,s,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===r)break;i=i.return}}function Qu(i,s,r,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var C=m.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=m;for(var A=0;A<s.length;A++)if(S.context===s[A]){y.lanes|=r,S=y.alternate,S!==null&&(S.lanes|=r),Ku(y.return,r,i),u||(C=null);break e}y=S.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(o(341));C.lanes|=r,y=C.alternate,y!==null&&(y.lanes|=r),Ku(C,r,i),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===i){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function bo(i,s,r,u){i=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(o(387));if(C=C.memoizedProps,C!==null){var S=m.type;Vt(m.pendingProps.value,C.value)||(i!==null?i.push(S):i=[S])}}else if(m===Ce.current){if(C=m.alternate,C===null)throw Error(o(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(sl):i=[sl])}m=m.return}i!==null&&Qu(s,i,r,u),s.flags|=262144}function cr(i){for(i=i.firstContext;i!==null;){if(!Vt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Gi(i){Bi=i,In=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function _t(i){return wp(Bi,i)}function dr(i,s){return Bi===null&&Gi(i),wp(i,s)}function wp(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},In===null){if(i===null)throw Error(o(308));In=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else In=In.next=s;return r}var MC=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},DC=t.unstable_scheduleCallback,kC=t.unstable_NormalPriority,it={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $u(){return{controller:new MC,data:new Map,refCount:0}}function ks(i){i.refCount--,i.refCount===0&&DC(kC,function(){i.controller.abort()})}var Us=null,Xu=0,Ao=0,No=null;function UC(i,s){if(Us===null){var r=Us=[];Xu=0,Ao=jc(),No={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Xu++,s.then(Rp,Rp),s}function Rp(){if(--Xu===0&&Us!==null){No!==null&&(No.status="fulfilled");var i=Us;Us=null,Ao=0,No=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function PC(i,s){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<r.length;m++)(0,r[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var Ip=U.S;U.S=function(i,s){hg=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&UC(i,s),Ip!==null&&Ip(i,s)};var qi=b(null);function Wu(){var i=qi.current;return i!==null?i:Ve.pooledCache}function fr(i,s){s===null?G(qi,qi.current):G(qi,s.pool)}function Mp(){var i=Wu();return i===null?null:{parent:it._currentValue,pool:i}}var wo=Error(o(460)),Zu=Error(o(474)),hr=Error(o(542)),pr={then:function(){}};function Dp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kp(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(An,An),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Pp(i),i;default:if(typeof s.status=="string")s.then(An,An);else{if(i=Ve,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Pp(i),i}throw Fi=s,wo}}function Vi(i){try{var s=i._init;return s(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Fi=r,wo):r}}var Fi=null;function Up(){if(Fi===null)throw Error(o(459));var i=Fi;return Fi=null,i}function Pp(i){if(i===wo||i===hr)throw Error(o(483))}var Ro=null,Ps=0;function mr(i){var s=Ps;return Ps+=1,Ro===null&&(Ro=[]),kp(Ro,i,s)}function Ls(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function gr(i,s){throw s.$$typeof===E?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Lp(i){function s(D,R){if(i){var k=D.deletions;k===null?(D.deletions=[R],D.flags|=16):k.push(R)}}function r(D,R){if(!i)return null;for(;R!==null;)s(D,R),R=R.sibling;return null}function u(D){for(var R=new Map;D!==null;)D.key!==null?R.set(D.key,D):R.set(D.index,D),D=D.sibling;return R}function m(D,R){return D=wn(D,R),D.index=0,D.sibling=null,D}function y(D,R,k){return D.index=k,i?(k=D.alternate,k!==null?(k=k.index,k<R?(D.flags|=67108866,R):k):(D.flags|=67108866,R)):(D.flags|=1048576,R)}function C(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function S(D,R,k,K){return R===null||R.tag!==6?(R=Gu(k,D.mode,K),R.return=D,R):(R=m(R,k),R.return=D,R)}function A(D,R,k,K){var fe=k.type;return fe===M?F(D,R,k.props.children,K,k.key):R!==null&&(R.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===me&&Vi(fe)===R.type)?(R=m(R,k.props),Ls(R,k),R.return=D,R):(R=ar(k.type,k.key,k.props,null,D.mode,K),Ls(R,k),R.return=D,R)}function P(D,R,k,K){return R===null||R.tag!==4||R.stateNode.containerInfo!==k.containerInfo||R.stateNode.implementation!==k.implementation?(R=qu(k,D.mode,K),R.return=D,R):(R=m(R,k.children||[]),R.return=D,R)}function F(D,R,k,K,fe){return R===null||R.tag!==7?(R=Oi(k,D.mode,K,fe),R.return=D,R):(R=m(R,k),R.return=D,R)}function Q(D,R,k){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Gu(""+R,D.mode,k),R.return=D,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return k=ar(R.type,R.key,R.props,null,D.mode,k),Ls(k,R),k.return=D,k;case N:return R=qu(R,D.mode,k),R.return=D,R;case me:return R=Vi(R),Q(D,R,k)}if(ye(R)||ae(R))return R=Oi(R,D.mode,k,null),R.return=D,R;if(typeof R.then=="function")return Q(D,mr(R),k);if(R.$$typeof===q)return Q(D,dr(D,R),k);gr(D,R)}return null}function L(D,R,k,K){var fe=R!==null?R.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return fe!==null?null:S(D,R,""+k,K);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return k.key===fe?A(D,R,k,K):null;case N:return k.key===fe?P(D,R,k,K):null;case me:return k=Vi(k),L(D,R,k,K)}if(ye(k)||ae(k))return fe!==null?null:F(D,R,k,K,null);if(typeof k.then=="function")return L(D,R,mr(k),K);if(k.$$typeof===q)return L(D,R,dr(D,k),K);gr(D,k)}return null}function B(D,R,k,K,fe){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return D=D.get(k)||null,S(R,D,""+K,fe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return D=D.get(K.key===null?k:K.key)||null,A(R,D,K,fe);case N:return D=D.get(K.key===null?k:K.key)||null,P(R,D,K,fe);case me:return K=Vi(K),B(D,R,k,K,fe)}if(ye(K)||ae(K))return D=D.get(k)||null,F(R,D,K,fe,null);if(typeof K.then=="function")return B(D,R,k,mr(K),fe);if(K.$$typeof===q)return B(D,R,k,dr(R,K),fe);gr(R,K)}return null}function re(D,R,k,K){for(var fe=null,Me=null,ue=R,Ee=R=0,Re=null;ue!==null&&Ee<k.length;Ee++){ue.index>Ee?(Re=ue,ue=null):Re=ue.sibling;var De=L(D,ue,k[Ee],K);if(De===null){ue===null&&(ue=Re);break}i&&ue&&De.alternate===null&&s(D,ue),R=y(De,R,Ee),Me===null?fe=De:Me.sibling=De,Me=De,ue=Re}if(Ee===k.length)return r(D,ue),Ie&&Rn(D,Ee),fe;if(ue===null){for(;Ee<k.length;Ee++)ue=Q(D,k[Ee],K),ue!==null&&(R=y(ue,R,Ee),Me===null?fe=ue:Me.sibling=ue,Me=ue);return Ie&&Rn(D,Ee),fe}for(ue=u(ue);Ee<k.length;Ee++)Re=B(ue,D,Ee,k[Ee],K),Re!==null&&(i&&Re.alternate!==null&&ue.delete(Re.key===null?Ee:Re.key),R=y(Re,R,Ee),Me===null?fe=Re:Me.sibling=Re,Me=Re);return i&&ue.forEach(function(xi){return s(D,xi)}),Ie&&Rn(D,Ee),fe}function pe(D,R,k,K){if(k==null)throw Error(o(151));for(var fe=null,Me=null,ue=R,Ee=R=0,Re=null,De=k.next();ue!==null&&!De.done;Ee++,De=k.next()){ue.index>Ee?(Re=ue,ue=null):Re=ue.sibling;var xi=L(D,ue,De.value,K);if(xi===null){ue===null&&(ue=Re);break}i&&ue&&xi.alternate===null&&s(D,ue),R=y(xi,R,Ee),Me===null?fe=xi:Me.sibling=xi,Me=xi,ue=Re}if(De.done)return r(D,ue),Ie&&Rn(D,Ee),fe;if(ue===null){for(;!De.done;Ee++,De=k.next())De=Q(D,De.value,K),De!==null&&(R=y(De,R,Ee),Me===null?fe=De:Me.sibling=De,Me=De);return Ie&&Rn(D,Ee),fe}for(ue=u(ue);!De.done;Ee++,De=k.next())De=B(ue,D,Ee,De.value,K),De!==null&&(i&&De.alternate!==null&&ue.delete(De.key===null?Ee:De.key),R=y(De,R,Ee),Me===null?fe=De:Me.sibling=De,Me=De);return i&&ue.forEach(function(JS){return s(D,JS)}),Ie&&Rn(D,Ee),fe}function Ge(D,R,k,K){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case T:e:{for(var fe=k.key;R!==null;){if(R.key===fe){if(fe=k.type,fe===M){if(R.tag===7){r(D,R.sibling),K=m(R,k.props.children),K.return=D,D=K;break e}}else if(R.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===me&&Vi(fe)===R.type){r(D,R.sibling),K=m(R,k.props),Ls(K,k),K.return=D,D=K;break e}r(D,R);break}else s(D,R);R=R.sibling}k.type===M?(K=Oi(k.props.children,D.mode,K,k.key),K.return=D,D=K):(K=ar(k.type,k.key,k.props,null,D.mode,K),Ls(K,k),K.return=D,D=K)}return C(D);case N:e:{for(fe=k.key;R!==null;){if(R.key===fe)if(R.tag===4&&R.stateNode.containerInfo===k.containerInfo&&R.stateNode.implementation===k.implementation){r(D,R.sibling),K=m(R,k.children||[]),K.return=D,D=K;break e}else{r(D,R);break}else s(D,R);R=R.sibling}K=qu(k,D.mode,K),K.return=D,D=K}return C(D);case me:return k=Vi(k),Ge(D,R,k,K)}if(ye(k))return re(D,R,k,K);if(ae(k)){if(fe=ae(k),typeof fe!="function")throw Error(o(150));return k=fe.call(k),pe(D,R,k,K)}if(typeof k.then=="function")return Ge(D,R,mr(k),K);if(k.$$typeof===q)return Ge(D,R,dr(D,k),K);gr(D,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,R!==null&&R.tag===6?(r(D,R.sibling),K=m(R,k),K.return=D,D=K):(r(D,R),K=Gu(k,D.mode,K),K.return=D,D=K),C(D)):r(D,R)}return function(D,R,k,K){try{Ps=0;var fe=Ge(D,R,k,K);return Ro=null,fe}catch(ue){if(ue===wo||ue===hr)throw ue;var Me=Ft(29,ue,null,D.mode);return Me.lanes=K,Me.return=D,Me}finally{}}}var zi=Lp(!0),Op=Lp(!1),ii=!1;function ju(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ec(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function oi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function si(i,s,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ue&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=rr(i),xp(i,null,r),s}return lr(i,u,s,r),rr(i)}function Os(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,wh(i,r)}}function tc(i,s){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var C={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=C:y=y.next=C,r=r.next}while(r!==null);y===null?m=y=s:y=y.next=s}else m=y=s;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var nc=!1;function Hs(){if(nc){var i=No;if(i!==null)throw i}}function Bs(i,s,r,u){nc=!1;var m=i.updateQueue;ii=!1;var y=m.firstBaseUpdate,C=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var A=S,P=A.next;A.next=null,C===null?y=P:C.next=P,C=A;var F=i.alternate;F!==null&&(F=F.updateQueue,S=F.lastBaseUpdate,S!==C&&(S===null?F.firstBaseUpdate=P:S.next=P,F.lastBaseUpdate=A))}if(y!==null){var Q=m.baseState;C=0,F=P=A=null,S=y;do{var L=S.lane&-536870913,B=L!==S.lane;if(B?(we&L)===L:(u&L)===L){L!==0&&L===Ao&&(nc=!0),F!==null&&(F=F.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var re=i,pe=S;L=s;var Ge=r;switch(pe.tag){case 1:if(re=pe.payload,typeof re=="function"){Q=re.call(Ge,Q,L);break e}Q=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=pe.payload,L=typeof re=="function"?re.call(Ge,Q,L):re,L==null)break e;Q=x({},Q,L);break e;case 2:ii=!0}}L=S.callback,L!==null&&(i.flags|=64,B&&(i.flags|=8192),B=m.callbacks,B===null?m.callbacks=[L]:B.push(L))}else B={lane:L,tag:S.tag,payload:S.payload,callback:S.callback,next:null},F===null?(P=F=B,A=Q):F=F.next=B,C|=L;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;B=S,S=B.next,B.next=null,m.lastBaseUpdate=B,m.shared.pending=null}}while(!0);F===null&&(A=Q),m.baseState=A,m.firstBaseUpdate=P,m.lastBaseUpdate=F,y===null&&(m.shared.lanes=0),ci|=C,i.lanes=C,i.memoizedState=Q}}function Hp(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Bp(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Hp(r[i],s)}var Io=b(null),yr=b(0);function Gp(i,s){i=Gn,G(yr,i),G(Io,s),Gn=i|s.baseLanes}function ic(){G(yr,Gn),G(Io,Io.current)}function oc(){Gn=yr.current,w(Io),w(yr)}var zt=b(null),nn=null;function li(i){var s=i.alternate;G(tt,tt.current&1),G(zt,i),nn===null&&(s===null||Io.current!==null||s.memoizedState!==null)&&(nn=i)}function sc(i){G(tt,tt.current),G(zt,i),nn===null&&(nn=i)}function qp(i){i.tag===22?(G(tt,tt.current),G(zt,i),nn===null&&(nn=i)):ri()}function ri(){G(tt,tt.current),G(zt,zt.current)}function Yt(i){w(zt),nn===i&&(nn=null),w(tt)}var tt=b(0);function vr(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||dd(r)||fd(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dn=0,xe=null,He=null,ot=null,_r=!1,Mo=!1,Yi=!1,xr=0,Gs=0,Do=null,LC=0;function We(){throw Error(o(321))}function lc(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!Vt(i[r],s[r]))return!1;return!0}function rc(i,s,r,u,m,y){return Dn=y,xe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,U.H=i===null||i.memoizedState===null?Tm:Cc,Yi=!1,y=r(u,m),Yi=!1,Mo&&(y=Fp(s,r,u,m)),Vp(i),y}function Vp(i){U.H=Fs;var s=He!==null&&He.next!==null;if(Dn=0,ot=He=xe=null,_r=!1,Gs=0,Do=null,s)throw Error(o(300));i===null||st||(i=i.dependencies,i!==null&&cr(i)&&(st=!0))}function Fp(i,s,r,u){xe=i;var m=0;do{if(Mo&&(Do=null),Gs=0,Mo=!1,25<=m)throw Error(o(301));if(m+=1,ot=He=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}U.H=bm,y=s(r,u)}while(Mo);return y}function OC(){var i=U.H,s=i.useState()[0];return s=typeof s.then=="function"?qs(s):s,i=i.useState()[0],(He!==null?He.memoizedState:null)!==i&&(xe.flags|=1024),s}function ac(){var i=xr!==0;return xr=0,i}function uc(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function cc(i){if(_r){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}_r=!1}Dn=0,ot=He=xe=null,Mo=!1,Gs=xr=0,Do=null}function At(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?xe.memoizedState=ot=i:ot=ot.next=i,ot}function nt(){if(He===null){var i=xe.alternate;i=i!==null?i.memoizedState:null}else i=He.next;var s=ot===null?xe.memoizedState:ot.next;if(s!==null)ot=s,He=i;else{if(i===null)throw xe.alternate===null?Error(o(467)):Error(o(310));He=i,i={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},ot===null?xe.memoizedState=ot=i:ot=ot.next=i}return ot}function Er(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qs(i){var s=Gs;return Gs+=1,Do===null&&(Do=[]),i=kp(Do,i,s),s=xe,(ot===null?s.memoizedState:ot.next)===null&&(s=s.alternate,U.H=s===null||s.memoizedState===null?Tm:Cc),i}function Cr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return qs(i);if(i.$$typeof===q)return _t(i)}throw Error(o(438,String(i)))}function dc(i){var s=null,r=xe.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=xe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Er(),xe.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),u=0;u<i;u++)r[u]=de;return s.index++,r}function kn(i,s){return typeof s=="function"?s(i):s}function Sr(i){var s=nt();return fc(s,He,i)}function fc(i,s,r){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var m=i.baseQueue,y=u.pending;if(y!==null){if(m!==null){var C=m.next;m.next=y.next,y.next=C}s.baseQueue=m=y,u.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{s=m.next;var S=C=null,A=null,P=s,F=!1;do{var Q=P.lane&-536870913;if(Q!==P.lane?(we&Q)===Q:(Dn&Q)===Q){var L=P.revertLane;if(L===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),Q===Ao&&(F=!0);else if((Dn&L)===L){P=P.next,L===Ao&&(F=!0);continue}else Q={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(S=A=Q,C=y):A=A.next=Q,xe.lanes|=L,ci|=L;Q=P.action,Yi&&r(y,Q),y=P.hasEagerState?P.eagerState:r(y,Q)}else L={lane:Q,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},A===null?(S=A=L,C=y):A=A.next=L,xe.lanes|=Q,ci|=Q;P=P.next}while(P!==null&&P!==s);if(A===null?C=y:A.next=S,!Vt(y,i.memoizedState)&&(st=!0,F&&(r=No,r!==null)))throw r;i.memoizedState=y,i.baseState=C,i.baseQueue=A,u.lastRenderedState=y}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function hc(i){var s=nt(),r=s.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=i;var u=r.dispatch,m=r.pending,y=s.memoizedState;if(m!==null){r.pending=null;var C=m=m.next;do y=i(y,C.action),C=C.next;while(C!==m);Vt(y,s.memoizedState)||(st=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function zp(i,s,r){var u=xe,m=nt(),y=Ie;if(y){if(r===void 0)throw Error(o(407));r=r()}else r=s();var C=!Vt((He||m).memoizedState,r);if(C&&(m.memoizedState=r,st=!0),m=m.queue,gc(Kp.bind(null,u,m,i),[i]),m.getSnapshot!==s||C||ot!==null&&ot.memoizedState.tag&1){if(u.flags|=2048,ko(9,{destroy:void 0},Jp.bind(null,u,m,r,s),null),Ve===null)throw Error(o(349));y||(Dn&127)!==0||Yp(u,s,r)}return r}function Yp(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=xe.updateQueue,s===null?(s=Er(),xe.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function Jp(i,s,r,u){s.value=r,s.getSnapshot=u,Qp(s)&&$p(i)}function Kp(i,s,r){return r(function(){Qp(s)&&$p(i)})}function Qp(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!Vt(i,r)}catch{return!0}}function $p(i){var s=Li(i,2);s!==null&&Lt(s,i,2)}function pc(i){var s=At();if(typeof i=="function"){var r=i;if(i=r(),Yi){Xn(!0);try{r()}finally{Xn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:i},s}function Xp(i,s,r,u){return i.baseState=r,fc(i,He,typeof u=="function"?u:kn)}function HC(i,s,r,u,m){if(Ar(i))throw Error(o(485));if(i=s.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};U.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,Wp(s,y)):(y.next=r.next,s.pending=r.next=y)}}function Wp(i,s){var r=s.action,u=s.payload,m=i.state;if(s.isTransition){var y=U.T,C={};U.T=C;try{var S=r(m,u),A=U.S;A!==null&&A(C,S),Zp(i,s,S)}catch(P){mc(i,s,P)}finally{y!==null&&C.types!==null&&(y.types=C.types),U.T=y}}else try{y=r(m,u),Zp(i,s,y)}catch(P){mc(i,s,P)}}function Zp(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){jp(i,s,u)},function(u){return mc(i,s,u)}):jp(i,s,r)}function jp(i,s,r){s.status="fulfilled",s.value=r,em(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,Wp(i,r)))}function mc(i,s,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,em(s),s=s.next;while(s!==u)}i.action=null}function em(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function tm(i,s){return s}function nm(i,s){if(Ie){var r=Ve.formState;if(r!==null){e:{var u=xe;if(Ie){if(Ke){t:{for(var m=Ke,y=tn;m.nodeType!==8;){if(!y){m=null;break t}if(m=on(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Ke=on(m.nextSibling),u=m.data==="F!";break e}}ti(u)}u=!1}u&&(s=r[0])}}return r=At(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tm,lastRenderedState:s},r.queue=u,r=Em.bind(null,xe,u),u.dispatch=r,u=pc(!1),y=Ec.bind(null,xe,!1,u.queue),u=At(),m={state:s,dispatch:null,action:i,pending:null},u.queue=m,r=HC.bind(null,xe,m,y,r),m.dispatch=r,u.memoizedState=i,[s,r,!1]}function im(i){var s=nt();return om(s,He,i)}function om(i,s,r){if(s=fc(i,s,tm)[0],i=Sr(kn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=qs(s)}catch(C){throw C===wo?hr:C}else u=s;s=nt();var m=s.queue,y=m.dispatch;return r!==s.memoizedState&&(xe.flags|=2048,ko(9,{destroy:void 0},BC.bind(null,m,r),null)),[u,y,i]}function BC(i,s){i.action=s}function sm(i){var s=nt(),r=He;if(r!==null)return om(s,r,i);nt(),s=s.memoizedState,r=nt();var u=r.queue.dispatch;return r.memoizedState=i,[s,u,!1]}function ko(i,s,r,u){return i={tag:i,create:r,deps:u,inst:s,next:null},s=xe.updateQueue,s===null&&(s=Er(),xe.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,s.lastEffect=i),i}function lm(){return nt().memoizedState}function Tr(i,s,r,u){var m=At();xe.flags|=i,m.memoizedState=ko(1|s,{destroy:void 0},r,u===void 0?null:u)}function br(i,s,r,u){var m=nt();u=u===void 0?null:u;var y=m.memoizedState.inst;He!==null&&u!==null&&lc(u,He.memoizedState.deps)?m.memoizedState=ko(s,y,r,u):(xe.flags|=i,m.memoizedState=ko(1|s,y,r,u))}function rm(i,s){Tr(8390656,8,i,s)}function gc(i,s){br(2048,8,i,s)}function GC(i){xe.flags|=4;var s=xe.updateQueue;if(s===null)s=Er(),xe.updateQueue=s,s.events=[i];else{var r=s.events;r===null?s.events=[i]:r.push(i)}}function am(i){var s=nt().memoizedState;return GC({ref:s,nextImpl:i}),function(){if((Ue&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function um(i,s){return br(4,2,i,s)}function cm(i,s){return br(4,4,i,s)}function dm(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function fm(i,s,r){r=r!=null?r.concat([i]):null,br(4,4,dm.bind(null,s,i),r)}function yc(){}function hm(i,s){var r=nt();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&lc(s,u[1])?u[0]:(r.memoizedState=[i,s],i)}function pm(i,s){var r=nt();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&lc(s,u[1]))return u[0];if(u=i(),Yi){Xn(!0);try{i()}finally{Xn(!1)}}return r.memoizedState=[u,s],u}function vc(i,s,r){return r===void 0||(Dn&1073741824)!==0&&(we&261930)===0?i.memoizedState=s:(i.memoizedState=r,i=mg(),xe.lanes|=i,ci|=i,r)}function mm(i,s,r,u){return Vt(r,s)?r:Io.current!==null?(i=vc(i,r,u),Vt(i,s)||(st=!0),i):(Dn&42)===0||(Dn&1073741824)!==0&&(we&261930)===0?(st=!0,i.memoizedState=r):(i=mg(),xe.lanes|=i,ci|=i,s)}function gm(i,s,r,u,m){var y=J.p;J.p=y!==0&&8>y?y:8;var C=U.T,S={};U.T=S,Ec(i,!1,s,r);try{var A=m(),P=U.S;if(P!==null&&P(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var F=PC(A,u);Vs(i,s,F,Qt(i))}else Vs(i,s,u,Qt(i))}catch(Q){Vs(i,s,{then:function(){},status:"rejected",reason:Q},Qt())}finally{J.p=y,C!==null&&S.types!==null&&(C.types=S.types),U.T=C}}function qC(){}function _c(i,s,r,u){if(i.tag!==5)throw Error(o(476));var m=ym(i).queue;gm(i,m,s,O,r===null?qC:function(){return vm(i),r(u)})}function ym(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:O},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:kn,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function vm(i){var s=ym(i);s.next===null&&(s=i.alternate.memoizedState),Vs(i,s.next.queue,{},Qt())}function xc(){return _t(sl)}function _m(){return nt().memoizedState}function xm(){return nt().memoizedState}function VC(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=Qt();i=oi(r);var u=si(s,i,r);u!==null&&(Lt(u,s,r),Os(u,s,r)),s={cache:$u()},i.payload=s;return}s=s.return}}function FC(i,s,r){var u=Qt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ar(i)?Cm(s,r):(r=Hu(i,s,r,u),r!==null&&(Lt(r,i,u),Sm(r,s,u)))}function Em(i,s,r){var u=Qt();Vs(i,s,r,u)}function Vs(i,s,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ar(i))Cm(s,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var C=s.lastRenderedState,S=y(C,r);if(m.hasEagerState=!0,m.eagerState=S,Vt(S,C))return lr(i,s,m,0),Ve===null&&sr(),!1}catch{}finally{}if(r=Hu(i,s,m,u),r!==null)return Lt(r,i,u),Sm(r,s,u),!0}return!1}function Ec(i,s,r,u){if(u={lane:2,revertLane:jc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ar(i)){if(s)throw Error(o(479))}else s=Hu(i,r,u,2),s!==null&&Lt(s,i,2)}function Ar(i){var s=i.alternate;return i===xe||s!==null&&s===xe}function Cm(i,s){Mo=_r=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function Sm(i,s,r){if((r&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,wh(i,r)}}var Fs={readContext:_t,use:Cr,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We};Fs.useEffectEvent=We;var Tm={readContext:_t,use:Cr,useCallback:function(i,s){return At().memoizedState=[i,s===void 0?null:s],i},useContext:_t,useEffect:rm,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,Tr(4194308,4,dm.bind(null,s,i),r)},useLayoutEffect:function(i,s){return Tr(4194308,4,i,s)},useInsertionEffect:function(i,s){Tr(4,2,i,s)},useMemo:function(i,s){var r=At();s=s===void 0?null:s;var u=i();if(Yi){Xn(!0);try{i()}finally{Xn(!1)}}return r.memoizedState=[u,s],u},useReducer:function(i,s,r){var u=At();if(r!==void 0){var m=r(s);if(Yi){Xn(!0);try{r(s)}finally{Xn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=FC.bind(null,xe,i),[u.memoizedState,i]},useRef:function(i){var s=At();return i={current:i},s.memoizedState=i},useState:function(i){i=pc(i);var s=i.queue,r=Em.bind(null,xe,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:yc,useDeferredValue:function(i,s){var r=At();return vc(r,i,s)},useTransition:function(){var i=pc(!1);return i=gm.bind(null,xe,i.queue,!0,!1),At().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var u=xe,m=At();if(Ie){if(r===void 0)throw Error(o(407));r=r()}else{if(r=s(),Ve===null)throw Error(o(349));(we&127)!==0||Yp(u,s,r)}m.memoizedState=r;var y={value:r,getSnapshot:s};return m.queue=y,rm(Kp.bind(null,u,y,i),[i]),u.flags|=2048,ko(9,{destroy:void 0},Jp.bind(null,u,y,r,s),null),r},useId:function(){var i=At(),s=Ve.identifierPrefix;if(Ie){var r=En,u=xn;r=(u&~(1<<32-qt(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=xr++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=LC++,s="_"+s+"r_"+r.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:xc,useFormState:nm,useActionState:nm,useOptimistic:function(i){var s=At();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Ec.bind(null,xe,!0,r),r.dispatch=s,[i,s]},useMemoCache:dc,useCacheRefresh:function(){return At().memoizedState=VC.bind(null,xe)},useEffectEvent:function(i){var s=At(),r={impl:i};return s.memoizedState=r,function(){if((Ue&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}},Cc={readContext:_t,use:Cr,useCallback:hm,useContext:_t,useEffect:gc,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:Sr,useRef:lm,useState:function(){return Sr(kn)},useDebugValue:yc,useDeferredValue:function(i,s){var r=nt();return mm(r,He.memoizedState,i,s)},useTransition:function(){var i=Sr(kn)[0],s=nt().memoizedState;return[typeof i=="boolean"?i:qs(i),s]},useSyncExternalStore:zp,useId:_m,useHostTransitionStatus:xc,useFormState:im,useActionState:im,useOptimistic:function(i,s){var r=nt();return Xp(r,He,i,s)},useMemoCache:dc,useCacheRefresh:xm};Cc.useEffectEvent=am;var bm={readContext:_t,use:Cr,useCallback:hm,useContext:_t,useEffect:gc,useImperativeHandle:fm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:hc,useRef:lm,useState:function(){return hc(kn)},useDebugValue:yc,useDeferredValue:function(i,s){var r=nt();return He===null?vc(r,i,s):mm(r,He.memoizedState,i,s)},useTransition:function(){var i=hc(kn)[0],s=nt().memoizedState;return[typeof i=="boolean"?i:qs(i),s]},useSyncExternalStore:zp,useId:_m,useHostTransitionStatus:xc,useFormState:sm,useActionState:sm,useOptimistic:function(i,s){var r=nt();return He!==null?Xp(r,He,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:dc,useCacheRefresh:xm};bm.useEffectEvent=am;function Sc(i,s,r,u){s=i.memoizedState,r=r(u,s),r=r==null?s:x({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var Tc={enqueueSetState:function(i,s,r){i=i._reactInternals;var u=Qt(),m=oi(u);m.payload=s,r!=null&&(m.callback=r),s=si(i,m,u),s!==null&&(Lt(s,i,u),Os(s,i,u))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var u=Qt(),m=oi(u);m.tag=1,m.payload=s,r!=null&&(m.callback=r),s=si(i,m,u),s!==null&&(Lt(s,i,u),Os(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=Qt(),u=oi(r);u.tag=2,s!=null&&(u.callback=s),s=si(i,u,r),s!==null&&(Lt(s,i,r),Os(s,i,r))}};function Am(i,s,r,u,m,y,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,C):s.prototype&&s.prototype.isPureReactComponent?!Rs(r,u)||!Rs(m,y):!0}function Nm(i,s,r,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==i&&Tc.enqueueReplaceState(s,s.state,null)}function Ji(i,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(i=i.defaultProps){r===s&&(r=x({},r));for(var m in i)r[m]===void 0&&(r[m]=i[m])}return r}function wm(i){or(i)}function Rm(i){console.error(i)}function Im(i){or(i)}function Nr(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Mm(i,s,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function bc(i,s,r){return r=oi(r),r.tag=3,r.payload={element:null},r.callback=function(){Nr(i,s)},r}function Dm(i){return i=oi(i),i.tag=3,i}function km(i,s,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;i.payload=function(){return m(y)},i.callback=function(){Mm(s,r,u)}}var C=r.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Mm(s,r,u),typeof m!="function"&&(di===null?di=new Set([this]):di.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function zC(i,s,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&bo(s,r,m,!0),r=zt.current,r!==null){switch(r.tag){case 31:case 13:return nn===null?Br():r.alternate===null&&Ze===0&&(Ze=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===pr?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Xc(i,u,m)),!1;case 22:return r.flags|=65536,u===pr?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Xc(i,u,m)),!1}throw Error(o(435,r.tag))}return Xc(i,u,m),Br(),!1}if(Ie)return s=zt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==zu&&(i=Error(o(422),{cause:u}),Ds(Zt(i,r)))):(u!==zu&&(s=Error(o(423),{cause:u}),Ds(Zt(s,r))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Zt(u,r),m=bc(i.stateNode,u,m),tc(i,m),Ze!==4&&(Ze=2)),!1;var y=Error(o(520),{cause:u});if(y=Zt(y,r),Ws===null?Ws=[y]:Ws.push(y),Ze!==4&&(Ze=2),s===null)return!0;u=Zt(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=m&-m,r.lanes|=i,i=bc(r.stateNode,u,i),tc(r,i),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(di===null||!di.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Dm(m),km(m,i,r,u),tc(r,m),!1}r=r.return}while(r!==null);return!1}var Ac=Error(o(461)),st=!1;function xt(i,s,r,u){s.child=i===null?Op(s,null,r,u):zi(s,i.child,r,u)}function Um(i,s,r,u,m){r=r.render;var y=s.ref;if("ref"in u){var C={};for(var S in u)S!=="ref"&&(C[S]=u[S])}else C=u;return Gi(s),u=rc(i,s,r,C,y,m),S=ac(),i!==null&&!st?(uc(i,s,m),Un(i,s,m)):(Ie&&S&&Vu(s),s.flags|=1,xt(i,s,u,m),s.child)}function Pm(i,s,r,u,m){if(i===null){var y=r.type;return typeof y=="function"&&!Bu(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,Lm(i,s,y,u,m)):(i=ar(r.type,null,u,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!Uc(i,m)){var C=y.memoizedProps;if(r=r.compare,r=r!==null?r:Rs,r(C,u)&&i.ref===s.ref)return Un(i,s,m)}return s.flags|=1,i=wn(y,u),i.ref=s.ref,i.return=s,s.child=i}function Lm(i,s,r,u,m){if(i!==null){var y=i.memoizedProps;if(Rs(y,u)&&i.ref===s.ref)if(st=!1,s.pendingProps=u=y,Uc(i,m))(i.flags&131072)!==0&&(st=!0);else return s.lanes=i.lanes,Un(i,s,m)}return Nc(i,s,r,u,m)}function Om(i,s,r,u){var m=u.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,i!==null){for(u=s.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,s.child=null;return Hm(i,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&fr(s,y!==null?y.cachePool:null),y!==null?Gp(s,y):ic(),qp(s);else return u=s.lanes=536870912,Hm(i,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(fr(s,y.cachePool),Gp(s,y),ri(),s.memoizedState=null):(i!==null&&fr(s,null),ic(),ri());return xt(i,s,m,r),s.child}function zs(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Hm(i,s,r,u,m){var y=Wu();return y=y===null?null:{parent:it._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},i!==null&&fr(s,null),ic(),qp(s),i!==null&&bo(i,s,u,!0),s.childLanes=m,null}function wr(i,s){return s=Ir({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Bm(i,s,r){return zi(s,i.child,null,r),i=wr(s,s.pendingProps),i.flags|=2,Yt(s),s.memoizedState=null,i}function YC(i,s,r){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Ie){if(u.mode==="hidden")return i=wr(s,u),s.lanes=536870912,zs(null,i);if(sc(s),(i=Ke)?(i=Wg(i,tn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:jn!==null?{id:xn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=Cp(i),r.return=s,s.child=r,vt=s,Ke=null)):i=null,i===null)throw ti(s);return s.lanes=536870912,null}return wr(s,u)}var y=i.memoizedState;if(y!==null){var C=y.dehydrated;if(sc(s),m)if(s.flags&256)s.flags&=-257,s=Bm(i,s,r);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(st||bo(i,s,r,!1),m=(r&i.childLanes)!==0,st||m){if(u=Ve,u!==null&&(C=Rh(u,r),C!==0&&C!==y.retryLane))throw y.retryLane=C,Li(i,C),Lt(u,i,C),Ac;Br(),s=Bm(i,s,r)}else i=y.treeContext,Ke=on(C.nextSibling),vt=s,Ie=!0,ei=null,tn=!1,i!==null&&bp(s,i),s=wr(s,u),s.flags|=4096;return s}return i=wn(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Rr(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function Nc(i,s,r,u,m){return Gi(s),r=rc(i,s,r,u,void 0,m),u=ac(),i!==null&&!st?(uc(i,s,m),Un(i,s,m)):(Ie&&u&&Vu(s),s.flags|=1,xt(i,s,r,m),s.child)}function Gm(i,s,r,u,m,y){return Gi(s),s.updateQueue=null,r=Fp(s,u,r,m),Vp(i),u=ac(),i!==null&&!st?(uc(i,s,y),Un(i,s,y)):(Ie&&u&&Vu(s),s.flags|=1,xt(i,s,r,y),s.child)}function qm(i,s,r,u,m){if(Gi(s),s.stateNode===null){var y=Eo,C=r.contextType;typeof C=="object"&&C!==null&&(y=_t(C)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Tc,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},ju(s),C=r.contextType,y.context=typeof C=="object"&&C!==null?_t(C):Eo,y.state=s.memoizedState,C=r.getDerivedStateFromProps,typeof C=="function"&&(Sc(s,r,C,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&Tc.enqueueReplaceState(y,y.state,null),Bs(s,u,y,m),Hs(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){y=s.stateNode;var S=s.memoizedProps,A=Ji(r,S);y.props=A;var P=y.context,F=r.contextType;C=Eo,typeof F=="object"&&F!==null&&(C=_t(F));var Q=r.getDerivedStateFromProps;F=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,F||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||P!==C)&&Nm(s,y,u,C),ii=!1;var L=s.memoizedState;y.state=L,Bs(s,u,y,m),Hs(),P=s.memoizedState,S||L!==P||ii?(typeof Q=="function"&&(Sc(s,r,Q,u),P=s.memoizedState),(A=ii||Am(s,r,A,u,L,P,C))?(F||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=P),y.props=u,y.state=P,y.context=C,u=A):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,ec(i,s),C=s.memoizedProps,F=Ji(r,C),y.props=F,Q=s.pendingProps,L=y.context,P=r.contextType,A=Eo,typeof P=="object"&&P!==null&&(A=_t(P)),S=r.getDerivedStateFromProps,(P=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==Q||L!==A)&&Nm(s,y,u,A),ii=!1,L=s.memoizedState,y.state=L,Bs(s,u,y,m),Hs();var B=s.memoizedState;C!==Q||L!==B||ii||i!==null&&i.dependencies!==null&&cr(i.dependencies)?(typeof S=="function"&&(Sc(s,r,S,u),B=s.memoizedState),(F=ii||Am(s,r,F,u,L,B,A)||i!==null&&i.dependencies!==null&&cr(i.dependencies))?(P||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,B,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,B,A)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=B),y.props=u,y.state=B,y.context=A,u=F):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&L===i.memoizedState||(s.flags|=1024),u=!1)}return y=u,Rr(i,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&u?(s.child=zi(s,i.child,null,m),s.child=zi(s,null,r,m)):xt(i,s,r,m),s.memoizedState=y.state,i=s.child):i=Un(i,s,m),i}function Vm(i,s,r,u){return Hi(),s.flags|=256,xt(i,s,r,u),s.child}var wc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rc(i){return{baseLanes:i,cachePool:Mp()}}function Ic(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=Kt),i}function Fm(i,s,r){var u=s.pendingProps,m=!1,y=(s.flags&128)!==0,C;if((C=y)||(C=i!==null&&i.memoizedState===null?!1:(tt.current&2)!==0),C&&(m=!0,s.flags&=-129),C=(s.flags&32)!==0,s.flags&=-33,i===null){if(Ie){if(m?li(s):ri(),(i=Ke)?(i=Wg(i,tn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:jn!==null?{id:xn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},r=Cp(i),r.return=s,s.child=r,vt=s,Ke=null)):i=null,i===null)throw ti(s);return fd(i)?s.lanes=32:s.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(ri(),m=s.mode,S=Ir({mode:"hidden",children:S},m),u=Oi(u,m,r,null),S.return=s,u.return=s,S.sibling=u,s.child=S,u=s.child,u.memoizedState=Rc(r),u.childLanes=Ic(i,C,r),s.memoizedState=wc,zs(null,u)):(li(s),Mc(s,S))}var A=i.memoizedState;if(A!==null&&(S=A.dehydrated,S!==null)){if(y)s.flags&256?(li(s),s.flags&=-257,s=Dc(i,s,r)):s.memoizedState!==null?(ri(),s.child=i.child,s.flags|=128,s=null):(ri(),S=u.fallback,m=s.mode,u=Ir({mode:"visible",children:u.children},m),S=Oi(S,m,r,null),S.flags|=2,u.return=s,S.return=s,u.sibling=S,s.child=u,zi(s,i.child,null,r),u=s.child,u.memoizedState=Rc(r),u.childLanes=Ic(i,C,r),s.memoizedState=wc,s=zs(null,u));else if(li(s),fd(S)){if(C=S.nextSibling&&S.nextSibling.dataset,C)var P=C.dgst;C=P,u=Error(o(419)),u.stack="",u.digest=C,Ds({value:u,source:null,stack:null}),s=Dc(i,s,r)}else if(st||bo(i,s,r,!1),C=(r&i.childLanes)!==0,st||C){if(C=Ve,C!==null&&(u=Rh(C,r),u!==0&&u!==A.retryLane))throw A.retryLane=u,Li(i,u),Lt(C,i,u),Ac;dd(S)||Br(),s=Dc(i,s,r)}else dd(S)?(s.flags|=192,s.child=i.child,s=null):(i=A.treeContext,Ke=on(S.nextSibling),vt=s,Ie=!0,ei=null,tn=!1,i!==null&&bp(s,i),s=Mc(s,u.children),s.flags|=4096);return s}return m?(ri(),S=u.fallback,m=s.mode,A=i.child,P=A.sibling,u=wn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,P!==null?S=wn(P,S):(S=Oi(S,m,r,null),S.flags|=2),S.return=s,u.return=s,u.sibling=S,s.child=u,zs(null,u),u=s.child,S=i.child.memoizedState,S===null?S=Rc(r):(m=S.cachePool,m!==null?(A=it._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Mp(),S={baseLanes:S.baseLanes|r,cachePool:m}),u.memoizedState=S,u.childLanes=Ic(i,C,r),s.memoizedState=wc,zs(i.child,u)):(li(s),r=i.child,i=r.sibling,r=wn(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,i!==null&&(C=s.deletions,C===null?(s.deletions=[i],s.flags|=16):C.push(i)),s.child=r,s.memoizedState=null,r)}function Mc(i,s){return s=Ir({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Ir(i,s){return i=Ft(22,i,null,s),i.lanes=0,i}function Dc(i,s,r){return zi(s,i.child,null,r),i=Mc(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function zm(i,s,r){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Ku(i.return,s,r)}function kc(i,s,r,u,m,y){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:y}:(C.isBackwards=s,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=r,C.tailMode=m,C.treeForkCount=y)}function Ym(i,s,r){var u=s.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var C=tt.current,S=(C&2)!==0;if(S?(C=C&1|2,s.flags|=128):C&=1,G(tt,C),xt(i,s,u,r),u=Ie?Ms:0,!S&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&zm(i,r,s);else if(i.tag===19)zm(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(r=s.child,m=null;r!==null;)i=r.alternate,i!==null&&vr(i)===null&&(m=r),r=r.sibling;r=m,r===null?(m=s.child,s.child=null):(m=r.sibling,r.sibling=null),kc(s,!1,m,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&vr(i)===null){s.child=m;break}i=m.sibling,m.sibling=r,r=m,m=i}kc(s,!0,r,null,y,u);break;case"together":kc(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Un(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),ci|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(bo(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,r=wn(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=wn(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function Uc(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&cr(i)))}function JC(i,s,r){switch(s.tag){case 3:Je(s,s.stateNode.containerInfo),ni(s,it,i.memoizedState.cache),Hi();break;case 27:case 5:gs(s);break;case 4:Je(s,s.stateNode.containerInfo);break;case 10:ni(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,sc(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(li(s),s.flags|=128,null):(r&s.child.childLanes)!==0?Fm(i,s,r):(li(s),i=Un(i,s,r),i!==null?i.sibling:null);li(s);break;case 19:var m=(i.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(bo(i,s,r,!1),u=(r&s.childLanes)!==0),m){if(u)return Ym(i,s,r);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),G(tt,tt.current),u)break;return null;case 22:return s.lanes=0,Om(i,s,r,s.pendingProps);case 24:ni(s,it,i.memoizedState.cache)}return Un(i,s,r)}function Jm(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)st=!0;else{if(!Uc(i,r)&&(s.flags&128)===0)return st=!1,JC(i,s,r);st=(i.flags&131072)!==0}else st=!1,Ie&&(s.flags&1048576)!==0&&Tp(s,Ms,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=Vi(s.elementType),s.type=i,typeof i=="function")Bu(i)?(u=Ji(i,u),s.tag=1,s=qm(null,s,i,u,r)):(s.tag=0,s=Nc(null,s,i,u,r));else{if(i!=null){var m=i.$$typeof;if(m===V){s.tag=11,s=Um(null,s,i,u,r);break e}else if(m===W){s.tag=14,s=Pm(null,s,i,u,r);break e}}throw s=ne(i)||i,Error(o(306,s,""))}}return s;case 0:return Nc(i,s,s.type,s.pendingProps,r);case 1:return u=s.type,m=Ji(u,s.pendingProps),qm(i,s,u,m,r);case 3:e:{if(Je(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var y=s.memoizedState;m=y.element,ec(i,s),Bs(s,u,null,r);var C=s.memoizedState;if(u=C.cache,ni(s,it,u),u!==y.cache&&Qu(s,[it],r,!0),Hs(),u=C.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:C.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Vm(i,s,u,r);break e}else if(u!==m){m=Zt(Error(o(424)),s),Ds(m),s=Vm(i,s,u,r);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Ke=on(i.firstChild),vt=s,Ie=!0,ei=null,tn=!0,r=Op(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Hi(),u===m){s=Un(i,s,r);break e}xt(i,s,u,r)}s=s.child}return s;case 26:return Rr(i,s),i===null?(r=iy(s.type,null,s.pendingProps,null))?s.memoizedState=r:Ie||(r=s.type,i=s.pendingProps,u=Jr(he.current).createElement(r),u[yt]=s,u[It]=i,Et(u,r,i),ct(u),s.stateNode=u):s.memoizedState=iy(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return gs(s),i===null&&Ie&&(u=s.stateNode=ey(s.type,s.pendingProps,he.current),vt=s,tn=!0,m=Ke,mi(s.type)?(hd=m,Ke=on(u.firstChild)):Ke=m),xt(i,s,s.pendingProps.children,r),Rr(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Ie&&((m=u=Ke)&&(u=CS(u,s.type,s.pendingProps,tn),u!==null?(s.stateNode=u,vt=s,Ke=on(u.firstChild),tn=!1,m=!0):m=!1),m||ti(s)),gs(s),m=s.type,y=s.pendingProps,C=i!==null?i.memoizedProps:null,u=y.children,ad(m,y)?u=null:C!==null&&ad(m,C)&&(s.flags|=32),s.memoizedState!==null&&(m=rc(i,s,OC,null,null,r),sl._currentValue=m),Rr(i,s),xt(i,s,u,r),s.child;case 6:return i===null&&Ie&&((i=r=Ke)&&(r=SS(r,s.pendingProps,tn),r!==null?(s.stateNode=r,vt=s,Ke=null,i=!0):i=!1),i||ti(s)),null;case 13:return Fm(i,s,r);case 4:return Je(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=zi(s,null,u,r):xt(i,s,u,r),s.child;case 11:return Um(i,s,s.type,s.pendingProps,r);case 7:return xt(i,s,s.pendingProps,r),s.child;case 8:return xt(i,s,s.pendingProps.children,r),s.child;case 12:return xt(i,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,ni(s,s.type,u.value),xt(i,s,u.children,r),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,Gi(s),m=_t(m),u=u(m),s.flags|=1,xt(i,s,u,r),s.child;case 14:return Pm(i,s,s.type,s.pendingProps,r);case 15:return Lm(i,s,s.type,s.pendingProps,r);case 19:return Ym(i,s,r);case 31:return YC(i,s,r);case 22:return Om(i,s,r,s.pendingProps);case 24:return Gi(s),u=_t(it),i===null?(m=Wu(),m===null&&(m=Ve,y=$u(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),s.memoizedState={parent:u,cache:m},ju(s),ni(s,it,m)):((i.lanes&r)!==0&&(ec(i,s),Bs(s,null,null,r),Hs()),m=i.memoizedState,y=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),ni(s,it,u)):(u=y.cache,ni(s,it,u),u!==m.cache&&Qu(s,[it],r,!0))),xt(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Pn(i){i.flags|=4}function Pc(i,s,r,u,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(_g())i.flags|=8192;else throw Fi=pr,Zu}else i.flags&=-16777217}function Km(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ay(s))if(_g())i.flags|=8192;else throw Fi=pr,Zu}function Mr(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ah():536870912,i.lanes|=s,Oo|=s)}function Ys(i,s){if(!Ie)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Qe(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(s)for(var m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=r,s}function KC(i,s,r){var u=s.pendingProps;switch(Fu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(s),null;case 1:return Qe(s),null;case 3:return r=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Mn(it),Xe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(To(s)?Pn(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yu())),Qe(s),null;case 26:var m=s.type,y=s.memoizedState;return i===null?(Pn(s),y!==null?(Qe(s),Km(s,y)):(Qe(s),Pc(s,m,null,u,r))):y?y!==i.memoizedState?(Pn(s),Qe(s),Km(s,y)):(Qe(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Pn(s),Qe(s),Pc(s,m,i,u,r)),null;case 27:if(Vl(s),r=he.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Pn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Qe(s),null}i=Z.current,To(s)?Ap(s):(i=ey(m,u,r),s.stateNode=i,Pn(s))}return Qe(s),null;case 5:if(Vl(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Pn(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return Qe(s),null}if(y=Z.current,To(s))Ap(s);else{var C=Jr(he.current);switch(y){case 1:y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=C.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?C.createElement(m,{is:u.is}):C.createElement(m)}}y[yt]=s,y[It]=u;e:for(C=s.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===s)break e;for(;C.sibling===null;){if(C.return===null||C.return===s)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}s.stateNode=y;e:switch(Et(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Pn(s)}}return Qe(s),Pc(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,r),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Pn(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=he.current,To(s)){if(i=s.stateNode,r=s.memoizedProps,u=null,m=vt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[yt]=s,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||Fg(i.nodeValue,r)),i||ti(s,!0)}else i=Jr(i).createTextNode(u),i[yt]=s,s.stateNode=i}return Qe(s),null;case 31:if(r=s.memoizedState,i===null||i.memoizedState!==null){if(u=To(s),r!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[yt]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),i=!1}else r=Yu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return s.flags&256?(Yt(s),s):(Yt(s),null);if((s.flags&128)!==0)throw Error(o(558))}return Qe(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=To(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(o(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[yt]=s}else Hi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Qe(s),m=!1}else m=Yu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Yt(s),s):(Yt(s),null)}return Yt(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),r!==i&&r&&(s.child.flags|=8192),Mr(s,s.updateQueue),Qe(s),null);case 4:return Xe(),i===null&&id(s.stateNode.containerInfo),Qe(s),null;case 10:return Mn(s.type),Qe(s),null;case 19:if(w(tt),u=s.memoizedState,u===null)return Qe(s),null;if(m=(s.flags&128)!==0,y=u.rendering,y===null)if(m)Ys(u,!1);else{if(Ze!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=vr(i),y!==null){for(s.flags|=128,Ys(u,!1),i=y.updateQueue,s.updateQueue=i,Mr(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)Ep(r,i),r=r.sibling;return G(tt,tt.current&1|2),Ie&&Rn(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Bt()>Lr&&(s.flags|=128,m=!0,Ys(u,!1),s.lanes=4194304)}else{if(!m)if(i=vr(y),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,Mr(s,i),Ys(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ie)return Qe(s),null}else 2*Bt()-u.renderingStartTime>Lr&&r!==536870912&&(s.flags|=128,m=!0,Ys(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(i=u.last,i!==null?i.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Bt(),i.sibling=null,r=tt.current,G(tt,m?r&1|2:r&1),Ie&&Rn(s,u.treeForkCount),i):(Qe(s),null);case 22:case 23:return Yt(s),oc(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(Qe(s),s.subtreeFlags&6&&(s.flags|=8192)):Qe(s),r=s.updateQueue,r!==null&&Mr(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),i!==null&&w(qi),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),Mn(it),Qe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function QC(i,s){switch(Fu(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Mn(it),Xe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Vl(s),null;case 31:if(s.memoizedState!==null){if(Yt(s),s.alternate===null)throw Error(o(340));Hi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Yt(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Hi()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return w(tt),null;case 4:return Xe(),null;case 10:return Mn(s.type),null;case 22:case 23:return Yt(s),oc(),i!==null&&w(qi),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Mn(it),null;case 25:return null;default:return null}}function Qm(i,s){switch(Fu(s),s.tag){case 3:Mn(it),Xe();break;case 26:case 27:case 5:Vl(s);break;case 4:Xe();break;case 31:s.memoizedState!==null&&Yt(s);break;case 13:Yt(s);break;case 19:w(tt);break;case 10:Mn(s.type);break;case 22:case 23:Yt(s),oc(),i!==null&&w(qi);break;case 24:Mn(it)}}function Js(i,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&i)===i){u=void 0;var y=r.create,C=r.inst;u=y(),C.destroy=u}r=r.next}while(r!==m)}}catch(S){Oe(s,s.return,S)}}function ai(i,s,r){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&i)===i){var C=u.inst,S=C.destroy;if(S!==void 0){C.destroy=void 0,m=s;var A=r,P=S;try{P()}catch(F){Oe(m,A,F)}}}u=u.next}while(u!==y)}}catch(F){Oe(s,s.return,F)}}function $m(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{Bp(s,r)}catch(u){Oe(i,i.return,u)}}}function Xm(i,s,r){r.props=Ji(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Oe(i,s,u)}}function Ks(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(m){Oe(i,s,m)}}function Cn(i,s){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){Oe(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Oe(i,s,m)}else r.current=null}function Wm(i){var s=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){Oe(i,i.return,m)}}function Lc(i,s,r){try{var u=i.stateNode;gS(u,i.type,r,s),u[It]=s}catch(m){Oe(i,i.return,m)}}function Zm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&mi(i.type)||i.tag===4}function Oc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&mi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hc(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=An));else if(u!==4&&(u===27&&mi(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(Hc(i,s,r),i=i.sibling;i!==null;)Hc(i,s,r),i=i.sibling}function Dr(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(u!==4&&(u===27&&mi(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Dr(i,s,r),i=i.sibling;i!==null;)Dr(i,s,r),i=i.sibling}function jm(i){var s=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Et(s,u,r),s[yt]=i,s[It]=r}catch(y){Oe(i,i.return,y)}}var Ln=!1,lt=!1,Bc=!1,eg=typeof WeakSet=="function"?WeakSet:Set,dt=null;function $C(i,s){if(i=i.containerInfo,ld=jr,i=fp(i),Du(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var C=0,S=-1,A=-1,P=0,F=0,Q=i,L=null;t:for(;;){for(var B;Q!==r||m!==0&&Q.nodeType!==3||(S=C+m),Q!==y||u!==0&&Q.nodeType!==3||(A=C+u),Q.nodeType===3&&(C+=Q.nodeValue.length),(B=Q.firstChild)!==null;)L=Q,Q=B;for(;;){if(Q===i)break t;if(L===r&&++P===m&&(S=C),L===y&&++F===u&&(A=C),(B=Q.nextSibling)!==null)break;Q=L,L=Q.parentNode}Q=B}r=S===-1||A===-1?null:{start:S,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(rd={focusedElem:i,selectionRange:r},jr=!1,dt=s;dt!==null;)if(s=dt,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,dt=i;else for(;dt!==null;){switch(s=dt,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)m=i[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=s,m=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var re=Ji(r.type,m);i=u.getSnapshotBeforeUpdate(re,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(pe){Oe(r,r.return,pe)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)cd(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":cd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,dt=i;break}dt=s.return}}function tg(i,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Hn(i,r),u&4&&Js(5,r);break;case 1:if(Hn(i,r),u&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(C){Oe(r,r.return,C)}else{var m=Ji(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(C){Oe(r,r.return,C)}}u&64&&$m(r),u&512&&Ks(r,r.return);break;case 3:if(Hn(i,r),u&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{Bp(i,s)}catch(C){Oe(r,r.return,C)}}break;case 27:s===null&&u&4&&jm(r);case 26:case 5:Hn(i,r),s===null&&u&4&&Wm(r),u&512&&Ks(r,r.return);break;case 12:Hn(i,r);break;case 31:Hn(i,r),u&4&&og(i,r);break;case 13:Hn(i,r),u&4&&sg(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=oS.bind(null,r),TS(i,r))));break;case 22:if(u=r.memoizedState!==null||Ln,!u){s=s!==null&&s.memoizedState!==null||lt,m=Ln;var y=lt;Ln=u,(lt=s)&&!y?Bn(i,r,(r.subtreeFlags&8772)!==0):Hn(i,r),Ln=m,lt=y}break;case 30:break;default:Hn(i,r)}}function ng(i){var s=i.alternate;s!==null&&(i.alternate=null,ng(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&mu(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $e=null,Dt=!1;function On(i,s,r){for(r=r.child;r!==null;)ig(i,s,r),r=r.sibling}function ig(i,s,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ys,r)}catch{}switch(r.tag){case 26:lt||Cn(r,s),On(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:lt||Cn(r,s);var u=$e,m=Dt;mi(r.type)&&($e=r.stateNode,Dt=!1),On(i,s,r),nl(r.stateNode),$e=u,Dt=m;break;case 5:lt||Cn(r,s);case 6:if(u=$e,m=Dt,$e=null,On(i,s,r),$e=u,Dt=m,$e!==null)if(Dt)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(r.stateNode)}catch(y){Oe(r,s,y)}else try{$e.removeChild(r.stateNode)}catch(y){Oe(r,s,y)}break;case 18:$e!==null&&(Dt?(i=$e,$g(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),Yo(i)):$g($e,r.stateNode));break;case 4:u=$e,m=Dt,$e=r.stateNode.containerInfo,Dt=!0,On(i,s,r),$e=u,Dt=m;break;case 0:case 11:case 14:case 15:ai(2,r,s),lt||ai(4,r,s),On(i,s,r);break;case 1:lt||(Cn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&Xm(r,s,u)),On(i,s,r);break;case 21:On(i,s,r);break;case 22:lt=(u=lt)||r.memoizedState!==null,On(i,s,r),lt=u;break;default:On(i,s,r)}}function og(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Yo(i)}catch(r){Oe(s,s.return,r)}}}function sg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Yo(i)}catch(r){Oe(s,s.return,r)}}function XC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new eg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new eg),s;default:throw Error(o(435,i.tag))}}function kr(i,s){var r=XC(i);s.forEach(function(u){if(!r.has(u)){r.add(u);var m=sS.bind(null,i,u);u.then(m,m)}})}function kt(i,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],y=i,C=s,S=C;e:for(;S!==null;){switch(S.tag){case 27:if(mi(S.type)){$e=S.stateNode,Dt=!1;break e}break;case 5:$e=S.stateNode,Dt=!1;break e;case 3:case 4:$e=S.stateNode.containerInfo,Dt=!0;break e}S=S.return}if($e===null)throw Error(o(160));ig(y,C,m),$e=null,Dt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)lg(s,i),s=s.sibling}var cn=null;function lg(i,s){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:kt(s,i),Ut(i),u&4&&(ai(3,i,i.return),Js(3,i),ai(5,i,i.return));break;case 1:kt(s,i),Ut(i),u&512&&(lt||r===null||Cn(r,r.return)),u&64&&Ln&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=cn;if(kt(s,i),Ut(i),u&512&&(lt||r===null||Cn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[xs]||y[yt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Et(y,u,r),y[yt]=i,ct(y),u=y;break e;case"link":var C=ly("link","href",m).get(u+(r.href||""));if(C){for(var S=0;S<C.length;S++)if(y=C[S],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){C.splice(S,1);break t}}y=m.createElement(u),Et(y,u,r),m.head.appendChild(y);break;case"meta":if(C=ly("meta","content",m).get(u+(r.content||""))){for(S=0;S<C.length;S++)if(y=C[S],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){C.splice(S,1);break t}}y=m.createElement(u),Et(y,u,r),m.head.appendChild(y);break;default:throw Error(o(468,u))}y[yt]=i,ct(y),u=y}i.stateNode=u}else ry(m,i.type,i.stateNode);else i.stateNode=sy(m,u,i.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?ry(m,i.type,i.stateNode):sy(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Lc(i,i.memoizedProps,r.memoizedProps)}break;case 27:kt(s,i),Ut(i),u&512&&(lt||r===null||Cn(r,r.return)),r!==null&&u&4&&Lc(i,i.memoizedProps,r.memoizedProps);break;case 5:if(kt(s,i),Ut(i),u&512&&(lt||r===null||Cn(r,r.return)),i.flags&32){m=i.stateNode;try{po(m,"")}catch(re){Oe(i,i.return,re)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Lc(i,m,r!==null?r.memoizedProps:m)),u&1024&&(Bc=!0);break;case 6:if(kt(s,i),Ut(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(re){Oe(i,i.return,re)}}break;case 3:if($r=null,m=cn,cn=Kr(s.containerInfo),kt(s,i),cn=m,Ut(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{Yo(s.containerInfo)}catch(re){Oe(i,i.return,re)}Bc&&(Bc=!1,rg(i));break;case 4:u=cn,cn=Kr(i.stateNode.containerInfo),kt(s,i),Ut(i),cn=u;break;case 12:kt(s,i),Ut(i);break;case 31:kt(s,i),Ut(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kr(i,u)));break;case 13:kt(s,i),Ut(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Pr=Bt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kr(i,u)));break;case 22:m=i.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,P=Ln,F=lt;if(Ln=P||m,lt=F||A,kt(s,i),lt=F,Ln=P,Ut(i),u&8192)e:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(r===null||A||Ln||lt||Ki(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){A=r=s;try{if(y=A.stateNode,m)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{S=A.stateNode;var Q=A.memoizedProps.style,L=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;S.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(re){Oe(A,A.return,re)}}}else if(s.tag===6){if(r===null){A=s;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(re){Oe(A,A.return,re)}}}else if(s.tag===18){if(r===null){A=s;try{var B=A.stateNode;m?Xg(B,!0):Xg(A.stateNode,!1)}catch(re){Oe(A,A.return,re)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,kr(i,r))));break;case 19:kt(s,i),Ut(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,kr(i,u)));break;case 30:break;case 21:break;default:kt(s,i),Ut(i)}}function Ut(i){var s=i.flags;if(s&2){try{for(var r,u=i.return;u!==null;){if(Zm(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var m=r.stateNode,y=Oc(i);Dr(i,y,m);break;case 5:var C=r.stateNode;r.flags&32&&(po(C,""),r.flags&=-33);var S=Oc(i);Dr(i,S,C);break;case 3:case 4:var A=r.stateNode.containerInfo,P=Oc(i);Hc(i,P,A);break;default:throw Error(o(161))}}catch(F){Oe(i,i.return,F)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function rg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;rg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Hn(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)tg(i,s.alternate,s),s=s.sibling}function Ki(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ai(4,s,s.return),Ki(s);break;case 1:Cn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Xm(s,s.return,r),Ki(s);break;case 27:nl(s.stateNode);case 26:case 5:Cn(s,s.return),Ki(s);break;case 22:s.memoizedState===null&&Ki(s);break;case 30:Ki(s);break;default:Ki(s)}i=i.sibling}}function Bn(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=i,y=s,C=y.flags;switch(y.tag){case 0:case 11:case 15:Bn(m,y,r),Js(4,y);break;case 1:if(Bn(m,y,r),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(P){Oe(u,u.return,P)}if(u=y,m=u.updateQueue,m!==null){var S=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)Hp(A[m],S)}catch(P){Oe(u,u.return,P)}}r&&C&64&&$m(y),Ks(y,y.return);break;case 27:jm(y);case 26:case 5:Bn(m,y,r),r&&u===null&&C&4&&Wm(y),Ks(y,y.return);break;case 12:Bn(m,y,r);break;case 31:Bn(m,y,r),r&&C&4&&og(m,y);break;case 13:Bn(m,y,r),r&&C&4&&sg(m,y);break;case 22:y.memoizedState===null&&Bn(m,y,r),Ks(y,y.return);break;case 30:break;default:Bn(m,y,r)}s=s.sibling}}function Gc(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&ks(r))}function qc(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ks(i))}function dn(i,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ag(i,s,r,u),s=s.sibling}function ag(i,s,r,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:dn(i,s,r,u),m&2048&&Js(9,s);break;case 1:dn(i,s,r,u);break;case 3:dn(i,s,r,u),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ks(i)));break;case 12:if(m&2048){dn(i,s,r,u),i=s.stateNode;try{var y=s.memoizedProps,C=y.id,S=y.onPostCommit;typeof S=="function"&&S(C,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){Oe(s,s.return,A)}}else dn(i,s,r,u);break;case 31:dn(i,s,r,u);break;case 13:dn(i,s,r,u);break;case 23:break;case 22:y=s.stateNode,C=s.alternate,s.memoizedState!==null?y._visibility&2?dn(i,s,r,u):Qs(i,s):y._visibility&2?dn(i,s,r,u):(y._visibility|=2,Uo(i,s,r,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Gc(C,s);break;case 24:dn(i,s,r,u),m&2048&&qc(s.alternate,s);break;default:dn(i,s,r,u)}}function Uo(i,s,r,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,C=s,S=r,A=u,P=C.flags;switch(C.tag){case 0:case 11:case 15:Uo(y,C,S,A,m),Js(8,C);break;case 23:break;case 22:var F=C.stateNode;C.memoizedState!==null?F._visibility&2?Uo(y,C,S,A,m):Qs(y,C):(F._visibility|=2,Uo(y,C,S,A,m)),m&&P&2048&&Gc(C.alternate,C);break;case 24:Uo(y,C,S,A,m),m&&P&2048&&qc(C.alternate,C);break;default:Uo(y,C,S,A,m)}s=s.sibling}}function Qs(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,u=s,m=u.flags;switch(u.tag){case 22:Qs(r,u),m&2048&&Gc(u.alternate,u);break;case 24:Qs(r,u),m&2048&&qc(u.alternate,u);break;default:Qs(r,u)}s=s.sibling}}var $s=8192;function Po(i,s,r){if(i.subtreeFlags&$s)for(i=i.child;i!==null;)ug(i,s,r),i=i.sibling}function ug(i,s,r){switch(i.tag){case 26:Po(i,s,r),i.flags&$s&&i.memoizedState!==null&&LS(r,cn,i.memoizedState,i.memoizedProps);break;case 5:Po(i,s,r);break;case 3:case 4:var u=cn;cn=Kr(i.stateNode.containerInfo),Po(i,s,r),cn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=$s,$s=16777216,Po(i,s,r),$s=u):Po(i,s,r));break;default:Po(i,s,r)}}function cg(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Xs(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];dt=u,fg(u,i)}cg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)dg(i),i=i.sibling}function dg(i){switch(i.tag){case 0:case 11:case 15:Xs(i),i.flags&2048&&ai(9,i,i.return);break;case 3:Xs(i);break;case 12:Xs(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,Ur(i)):Xs(i);break;default:Xs(i)}}function Ur(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];dt=u,fg(u,i)}cg(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ai(8,s,s.return),Ur(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Ur(s));break;default:Ur(s)}i=i.sibling}}function fg(i,s){for(;dt!==null;){var r=dt;switch(r.tag){case 0:case 11:case 15:ai(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ks(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,dt=u;else e:for(r=i;dt!==null;){u=dt;var m=u.sibling,y=u.return;if(ng(u),u===r){dt=null;break e}if(m!==null){m.return=y,dt=m;break e}dt=y}}}var WC={getCacheForType:function(i){var s=_t(it),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r},cacheSignal:function(){return _t(it).controller.signal}},ZC=typeof WeakMap=="function"?WeakMap:Map,Ue=0,Ve=null,be=null,we=0,Le=0,Jt=null,ui=!1,Lo=!1,Vc=!1,Gn=0,Ze=0,ci=0,Qi=0,Fc=0,Kt=0,Oo=0,Ws=null,Pt=null,zc=!1,Pr=0,hg=0,Lr=1/0,Or=null,di=null,rt=0,fi=null,Ho=null,qn=0,Yc=0,Jc=null,pg=null,Zs=0,Kc=null;function Qt(){return(Ue&2)!==0&&we!==0?we&-we:U.T!==null?jc():Ih()}function mg(){if(Kt===0)if((we&536870912)===0||Ie){var i=Yl;Yl<<=1,(Yl&3932160)===0&&(Yl=262144),Kt=i}else Kt=536870912;return i=zt.current,i!==null&&(i.flags|=32),Kt}function Lt(i,s,r){(i===Ve&&(Le===2||Le===9)||i.cancelPendingCommit!==null)&&(Bo(i,0),hi(i,we,Kt,!1)),_s(i,r),((Ue&2)===0||i!==Ve)&&(i===Ve&&((Ue&2)===0&&(Qi|=r),Ze===4&&hi(i,we,Kt,!1)),Sn(i))}function gg(i,s,r){if((Ue&6)!==0)throw Error(o(327));var u=!r&&(s&127)===0&&(s&i.expiredLanes)===0||vs(i,s),m=u?tS(i,s):$c(i,s,!0),y=u;do{if(m===0){Lo&&!u&&hi(i,s,0,!1);break}else{if(r=i.current.alternate,y&&!jC(r)){m=$c(i,s,!1),y=!1;continue}if(m===2){if(y=s,i.errorRecoveryDisabledLanes&y)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){s=C;e:{var S=i;m=Ws;var A=S.current.memoizedState.isDehydrated;if(A&&(Bo(S,C).flags|=256),C=$c(S,C,!1),C!==2){if(Vc&&!A){S.errorRecoveryDisabledLanes|=y,Qi|=y,m=4;break e}y=Pt,Pt=m,y!==null&&(Pt===null?Pt=y:Pt.push.apply(Pt,y))}m=C}if(y=!1,m!==2)continue}}if(m===1){Bo(i,0),hi(i,s,0,!0);break}e:{switch(u=i,y=m,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:hi(u,s,Kt,!ui);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(m=Pr+300-Bt(),10<m)){if(hi(u,s,Kt,!ui),Kl(u,0,!0)!==0)break e;qn=s,u.timeoutHandle=Kg(yg.bind(null,u,r,Pt,Or,zc,s,Kt,Qi,Oo,ui,y,"Throttled",-0,0),m);break e}yg(u,r,Pt,Or,zc,s,Kt,Qi,Oo,ui,y,null,-0,0)}}break}while(!0);Sn(i)}function yg(i,s,r,u,m,y,C,S,A,P,F,Q,L,B){if(i.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},ug(s,y,Q);var re=(y&62914560)===y?Pr-Bt():(y&4194048)===y?hg-Bt():0;if(re=OS(Q,re),re!==null){qn=y,i.cancelPendingCommit=re(bg.bind(null,i,s,y,r,u,m,C,S,A,F,Q,null,L,B)),hi(i,y,C,!P);return}}bg(i,s,y,r,u,m,C,S,A)}function jC(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],y=m.getSnapshot;m=m.value;try{if(!Vt(y(),m))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hi(i,s,r,u){s&=~Fc,s&=~Qi,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var m=s;0<m;){var y=31-qt(m),C=1<<y;u[y]=-1,m&=~C}r!==0&&Nh(i,r,s)}function Hr(){return(Ue&6)===0?(js(0),!1):!0}function Qc(){if(be!==null){if(Le===0)var i=be.return;else i=be,In=Bi=null,cc(i),Ro=null,Ps=0,i=be;for(;i!==null;)Qm(i.alternate,i),i=i.return;be=null}}function Bo(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,_S(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),qn=0,Qc(),Ve=i,be=r=wn(i.current,null),we=s,Le=0,Jt=null,ui=!1,Lo=vs(i,s),Vc=!1,Oo=Kt=Fc=Qi=ci=Ze=0,Pt=Ws=null,zc=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var m=31-qt(u),y=1<<m;s|=i[m],u&=~y}return Gn=s,sr(),r}function vg(i,s){xe=null,U.H=Fs,s===wo||s===hr?(s=Up(),Le=3):s===Zu?(s=Up(),Le=4):Le=s===Ac?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Jt=s,be===null&&(Ze=1,Nr(i,Zt(s,i.current)))}function _g(){var i=zt.current;return i===null?!0:(we&4194048)===we?nn===null:(we&62914560)===we||(we&536870912)!==0?i===nn:!1}function xg(){var i=U.H;return U.H=Fs,i===null?Fs:i}function Eg(){var i=U.A;return U.A=WC,i}function Br(){Ze=4,ui||(we&4194048)!==we&&zt.current!==null||(Lo=!0),(ci&134217727)===0&&(Qi&134217727)===0||Ve===null||hi(Ve,we,Kt,!1)}function $c(i,s,r){var u=Ue;Ue|=2;var m=xg(),y=Eg();(Ve!==i||we!==s)&&(Or=null,Bo(i,s)),s=!1;var C=Ze;e:do try{if(Le!==0&&be!==null){var S=be,A=Jt;switch(Le){case 8:Qc(),C=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(s=!0);var P=Le;if(Le=0,Jt=null,Go(i,S,A,P),r&&Lo){C=0;break e}break;default:P=Le,Le=0,Jt=null,Go(i,S,A,P)}}eS(),C=Ze;break}catch(F){vg(i,F)}while(!0);return s&&i.shellSuspendCounter++,In=Bi=null,Ue=u,U.H=m,U.A=y,be===null&&(Ve=null,we=0,sr()),C}function eS(){for(;be!==null;)Cg(be)}function tS(i,s){var r=Ue;Ue|=2;var u=xg(),m=Eg();Ve!==i||we!==s?(Or=null,Lr=Bt()+500,Bo(i,s)):Lo=vs(i,s);e:do try{if(Le!==0&&be!==null){s=be;var y=Jt;t:switch(Le){case 1:Le=0,Jt=null,Go(i,s,y,1);break;case 2:case 9:if(Dp(y)){Le=0,Jt=null,Sg(s);break}s=function(){Le!==2&&Le!==9||Ve!==i||(Le=7),Sn(i)},y.then(s,s);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Dp(y)?(Le=0,Jt=null,Sg(s)):(Le=0,Jt=null,Go(i,s,y,7));break;case 5:var C=null;switch(be.tag){case 26:C=be.memoizedState;case 5:case 27:var S=be;if(C?ay(C):S.stateNode.complete){Le=0,Jt=null;var A=S.sibling;if(A!==null)be=A;else{var P=S.return;P!==null?(be=P,Gr(P)):be=null}break t}}Le=0,Jt=null,Go(i,s,y,5);break;case 6:Le=0,Jt=null,Go(i,s,y,6);break;case 8:Qc(),Ze=6;break e;default:throw Error(o(462))}}nS();break}catch(F){vg(i,F)}while(!0);return In=Bi=null,U.H=u,U.A=m,Ue=r,be!==null?0:(Ve=null,we=0,sr(),Ze)}function nS(){for(;be!==null&&!bE();)Cg(be)}function Cg(i){var s=Jm(i.alternate,i,Gn);i.memoizedProps=i.pendingProps,s===null?Gr(i):be=s}function Sg(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=Gm(r,s,s.pendingProps,s.type,void 0,we);break;case 11:s=Gm(r,s,s.pendingProps,s.type.render,s.ref,we);break;case 5:cc(s);default:Qm(r,s),s=be=Ep(s,Gn),s=Jm(r,s,Gn)}i.memoizedProps=i.pendingProps,s===null?Gr(i):be=s}function Go(i,s,r,u){In=Bi=null,cc(s),Ro=null,Ps=0;var m=s.return;try{if(zC(i,m,s,r,we)){Ze=1,Nr(i,Zt(r,i.current)),be=null;return}}catch(y){if(m!==null)throw be=m,y;Ze=1,Nr(i,Zt(r,i.current)),be=null;return}s.flags&32768?(Ie||u===1?i=!0:Lo||(we&536870912)!==0?i=!1:(ui=i=!0,(u===2||u===9||u===3||u===6)&&(u=zt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Tg(s,i)):Gr(s)}function Gr(i){var s=i;do{if((s.flags&32768)!==0){Tg(s,ui);return}i=s.return;var r=KC(s.alternate,s,Gn);if(r!==null){be=r;return}if(s=s.sibling,s!==null){be=s;return}be=s=i}while(s!==null);Ze===0&&(Ze=5)}function Tg(i,s){do{var r=QC(i.alternate,i);if(r!==null){r.flags&=32767,be=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){be=i;return}be=i=r}while(i!==null);Ze=6,be=null}function bg(i,s,r,u,m,y,C,S,A){i.cancelPendingCommit=null;do qr();while(rt!==0);if((Ue&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=Ou,PE(i,r,y,C,S,A),i===Ve&&(be=Ve=null,we=0),Ho=s,fi=i,qn=r,Yc=y,Jc=m,pg=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,lS(Fl,function(){return Ig(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,m=J.p,J.p=2,C=Ue,Ue|=4;try{$C(i,s,r)}finally{Ue=C,J.p=m,U.T=u}}rt=1,Ag(),Ng(),wg()}}function Ag(){if(rt===1){rt=0;var i=fi,s=Ho,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var u=J.p;J.p=2;var m=Ue;Ue|=4;try{lg(s,i);var y=rd,C=fp(i.containerInfo),S=y.focusedElem,A=y.selectionRange;if(C!==S&&S&&S.ownerDocument&&dp(S.ownerDocument.documentElement,S)){if(A!==null&&Du(S)){var P=A.start,F=A.end;if(F===void 0&&(F=P),"selectionStart"in S)S.selectionStart=P,S.selectionEnd=Math.min(F,S.value.length);else{var Q=S.ownerDocument||document,L=Q&&Q.defaultView||window;if(L.getSelection){var B=L.getSelection(),re=S.textContent.length,pe=Math.min(A.start,re),Ge=A.end===void 0?pe:Math.min(A.end,re);!B.extend&&pe>Ge&&(C=Ge,Ge=pe,pe=C);var D=cp(S,pe),R=cp(S,Ge);if(D&&R&&(B.rangeCount!==1||B.anchorNode!==D.node||B.anchorOffset!==D.offset||B.focusNode!==R.node||B.focusOffset!==R.offset)){var k=Q.createRange();k.setStart(D.node,D.offset),B.removeAllRanges(),pe>Ge?(B.addRange(k),B.extend(R.node,R.offset)):(k.setEnd(R.node,R.offset),B.addRange(k))}}}}for(Q=[],B=S;B=B.parentNode;)B.nodeType===1&&Q.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Q.length;S++){var K=Q[S];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}jr=!!ld,rd=ld=null}finally{Ue=m,J.p=u,U.T=r}}i.current=s,rt=2}}function Ng(){if(rt===2){rt=0;var i=fi,s=Ho,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var u=J.p;J.p=2;var m=Ue;Ue|=4;try{tg(i,s.alternate,s)}finally{Ue=m,J.p=u,U.T=r}}rt=3}}function wg(){if(rt===4||rt===3){rt=0,AE();var i=fi,s=Ho,r=qn,u=pg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rt=5:(rt=0,Ho=fi=null,Rg(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(di=null),hu(r),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ys,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=U.T,m=J.p,J.p=2,U.T=null;try{for(var y=i.onRecoverableError,C=0;C<u.length;C++){var S=u[C];y(S.value,{componentStack:S.stack})}}finally{U.T=s,J.p=m}}(qn&3)!==0&&qr(),Sn(i),m=i.pendingLanes,(r&261930)!==0&&(m&42)!==0?i===Kc?Zs++:(Zs=0,Kc=i):Zs=0,js(0)}}function Rg(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ks(s)))}function qr(){return Ag(),Ng(),wg(),Ig()}function Ig(){if(rt!==5)return!1;var i=fi,s=Yc;Yc=0;var r=hu(qn),u=U.T,m=J.p;try{J.p=32>r?32:r,U.T=null,r=Jc,Jc=null;var y=fi,C=qn;if(rt=0,Ho=fi=null,qn=0,(Ue&6)!==0)throw Error(o(331));var S=Ue;if(Ue|=4,dg(y.current),ag(y,y.current,C,r),Ue=S,js(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ys,y)}catch{}return!0}finally{J.p=m,U.T=u,Rg(i,s)}}function Mg(i,s,r){s=Zt(r,s),s=bc(i.stateNode,s,2),i=si(i,s,2),i!==null&&(_s(i,2),Sn(i))}function Oe(i,s,r){if(i.tag===3)Mg(i,i,r);else for(;s!==null;){if(s.tag===3){Mg(s,i,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(di===null||!di.has(u))){i=Zt(r,i),r=Dm(2),u=si(s,r,2),u!==null&&(km(r,u,s,i),_s(u,2),Sn(u));break}}s=s.return}}function Xc(i,s,r){var u=i.pingCache;if(u===null){u=i.pingCache=new ZC;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(r)||(Vc=!0,m.add(r),i=iS.bind(null,i,s,r),s.then(i,i))}function iS(i,s,r){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Ve===i&&(we&r)===r&&(Ze===4||Ze===3&&(we&62914560)===we&&300>Bt()-Pr?(Ue&2)===0&&Bo(i,0):Fc|=r,Oo===we&&(Oo=0)),Sn(i)}function Dg(i,s){s===0&&(s=Ah()),i=Li(i,s),i!==null&&(_s(i,s),Sn(i))}function oS(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),Dg(i,r)}function sS(i,s){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Dg(i,r)}function lS(i,s){return uu(i,s)}var Vr=null,qo=null,Wc=!1,Fr=!1,Zc=!1,pi=0;function Sn(i){i!==qo&&i.next===null&&(qo===null?Vr=qo=i:qo=qo.next=i),Fr=!0,Wc||(Wc=!0,aS())}function js(i,s){if(!Zc&&Fr){Zc=!0;do for(var r=!1,u=Vr;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var C=u.suspendedLanes,S=u.pingedLanes;y=(1<<31-qt(42|i)+1)-1,y&=m&~(C&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Lg(u,y))}else y=we,y=Kl(u,u===Ve?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||vs(u,y)||(r=!0,Lg(u,y));u=u.next}while(r);Zc=!1}}function rS(){kg()}function kg(){Fr=Wc=!1;var i=0;pi!==0&&vS()&&(i=pi);for(var s=Bt(),r=null,u=Vr;u!==null;){var m=u.next,y=Ug(u,s);y===0?(u.next=null,r===null?Vr=m:r.next=m,m===null&&(qo=r)):(r=u,(i!==0||(y&3)!==0)&&(Fr=!0)),u=m}rt!==0&&rt!==5||js(i),pi!==0&&(pi=0)}function Ug(i,s){for(var r=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var C=31-qt(y),S=1<<C,A=m[C];A===-1?((S&r)===0||(S&u)!==0)&&(m[C]=UE(S,s)):A<=s&&(i.expiredLanes|=S),y&=~S}if(s=Ve,r=we,r=Kl(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===s&&(Le===2||Le===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&cu(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||vs(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(u!==null&&cu(u),hu(r)){case 2:case 8:r=Th;break;case 32:r=Fl;break;case 268435456:r=bh;break;default:r=Fl}return u=Pg.bind(null,i),r=uu(r,u),i.callbackPriority=s,i.callbackNode=r,s}return u!==null&&u!==null&&cu(u),i.callbackPriority=2,i.callbackNode=null,2}function Pg(i,s){if(rt!==0&&rt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(qr()&&i.callbackNode!==r)return null;var u=we;return u=Kl(i,i===Ve?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(gg(i,u,s),Ug(i,Bt()),i.callbackNode!=null&&i.callbackNode===r?Pg.bind(null,i):null)}function Lg(i,s){if(qr())return null;gg(i,s,!0)}function aS(){xS(function(){(Ue&6)!==0?uu(Sh,rS):kg()})}function jc(){if(pi===0){var i=Ao;i===0&&(i=zl,zl<<=1,(zl&261888)===0&&(zl=256)),pi=i}return pi}function Og(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Wl(""+i)}function Hg(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function uS(i,s,r,u,m){if(s==="submit"&&r&&r.stateNode===m){var y=Og((m[It]||null).action),C=u.submitter;C&&(s=(s=C[It]||null)?Og(s.formAction):C.getAttribute("formAction"),s!==null&&(y=s,C=null));var S=new tr("action","action",null,u,m);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(pi!==0){var A=C?Hg(m,C):new FormData(m);_c(r,{pending:!0,data:A,method:m.method,action:y},null,A)}}else typeof y=="function"&&(S.preventDefault(),A=C?Hg(m,C):new FormData(m),_c(r,{pending:!0,data:A,method:m.method,action:y},y,A))},currentTarget:m}]})}}for(var ed=0;ed<Lu.length;ed++){var td=Lu[ed],cS=td.toLowerCase(),dS=td[0].toUpperCase()+td.slice(1);un(cS,"on"+dS)}un(mp,"onAnimationEnd"),un(gp,"onAnimationIteration"),un(yp,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(NC,"onTransitionRun"),un(wC,"onTransitionStart"),un(RC,"onTransitionCancel"),un(vp,"onTransitionEnd"),fo("onMouseEnter",["mouseout","mouseover"]),fo("onMouseLeave",["mouseout","mouseover"]),fo("onPointerEnter",["pointerout","pointerover"]),fo("onPointerLeave",["pointerout","pointerover"]),Di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Di("onBeforeInput",["compositionend","keypress","textInput","paste"]),Di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function Bg(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],m=u.event;u=u.listeners;e:{var y=void 0;if(s)for(var C=u.length-1;0<=C;C--){var S=u[C],A=S.instance,P=S.currentTarget;if(S=S.listener,A!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=P;try{y(m)}catch(F){or(F)}m.currentTarget=null,y=A}else for(C=0;C<u.length;C++){if(S=u[C],A=S.instance,P=S.currentTarget,S=S.listener,A!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=P;try{y(m)}catch(F){or(F)}m.currentTarget=null,y=A}}}}function Ae(i,s){var r=s[pu];r===void 0&&(r=s[pu]=new Set);var u=i+"__bubble";r.has(u)||(Gg(s,i,2,!1),r.add(u))}function nd(i,s,r){var u=0;s&&(u|=4),Gg(r,i,u,s)}var zr="_reactListening"+Math.random().toString(36).slice(2);function id(i){if(!i[zr]){i[zr]=!0,kh.forEach(function(r){r!=="selectionchange"&&(fS.has(r)||nd(r,!1,i),nd(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[zr]||(s[zr]=!0,nd("selectionchange",!1,s))}}function Gg(i,s,r,u){switch(my(s)){case 2:var m=GS;break;case 8:m=qS;break;default:m=vd}r=m.bind(null,s,r,i),m=void 0,!Su||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(s,r,{capture:!0,passive:m}):i.addEventListener(s,r,!0):m!==void 0?i.addEventListener(s,r,{passive:m}):i.addEventListener(s,r,!1)}function od(i,s,r,u,m){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var S=u.stateNode.containerInfo;if(S===m)break;if(C===4)for(C=u.return;C!==null;){var A=C.tag;if((A===3||A===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;S!==null;){if(C=ao(S),C===null)return;if(A=C.tag,A===5||A===6||A===26||A===27){u=y=C;continue e}S=S.parentNode}}u=u.return}Yh(function(){var P=y,F=Eu(r),Q=[];e:{var L=_p.get(i);if(L!==void 0){var B=tr,re=i;switch(i){case"keypress":if(jl(r)===0)break e;case"keydown":case"keyup":B=sC;break;case"focusin":re="focus",B=Nu;break;case"focusout":re="blur",B=Nu;break;case"beforeblur":case"afterblur":B=Nu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Qh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=KE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=aC;break;case mp:case gp:case yp:B=XE;break;case vp:B=cC;break;case"scroll":case"scrollend":B=YE;break;case"wheel":B=fC;break;case"copy":case"cut":case"paste":B=ZE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Xh;break;case"toggle":case"beforetoggle":B=pC}var pe=(s&4)!==0,Ge=!pe&&(i==="scroll"||i==="scrollend"),D=pe?L!==null?L+"Capture":null:L;pe=[];for(var R=P,k;R!==null;){var K=R;if(k=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||k===null||D===null||(K=Cs(R,D),K!=null&&pe.push(tl(R,K,k))),Ge)break;R=R.return}0<pe.length&&(L=new B(L,re,null,r,F),Q.push({event:L,listeners:pe}))}}if((s&7)===0){e:{if(L=i==="mouseover"||i==="pointerover",B=i==="mouseout"||i==="pointerout",L&&r!==xu&&(re=r.relatedTarget||r.fromElement)&&(ao(re)||re[ro]))break e;if((B||L)&&(L=F.window===F?F:(L=F.ownerDocument)?L.defaultView||L.parentWindow:window,B?(re=r.relatedTarget||r.toElement,B=P,re=re?ao(re):null,re!==null&&(Ge=a(re),pe=re.tag,re!==Ge||pe!==5&&pe!==27&&pe!==6)&&(re=null)):(B=null,re=P),B!==re)){if(pe=Qh,K="onMouseLeave",D="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(pe=Xh,K="onPointerLeave",D="onPointerEnter",R="pointer"),Ge=B==null?L:Es(B),k=re==null?L:Es(re),L=new pe(K,R+"leave",B,r,F),L.target=Ge,L.relatedTarget=k,K=null,ao(F)===P&&(pe=new pe(D,R+"enter",re,r,F),pe.target=k,pe.relatedTarget=Ge,K=pe),Ge=K,B&&re)t:{for(pe=hS,D=B,R=re,k=0,K=D;K;K=pe(K))k++;K=0;for(var fe=R;fe;fe=pe(fe))K++;for(;0<k-K;)D=pe(D),k--;for(;0<K-k;)R=pe(R),K--;for(;k--;){if(D===R||R!==null&&D===R.alternate){pe=D;break t}D=pe(D),R=pe(R)}pe=null}else pe=null;B!==null&&qg(Q,L,B,pe,!1),re!==null&&Ge!==null&&qg(Q,Ge,re,pe,!0)}}e:{if(L=P?Es(P):window,B=L.nodeName&&L.nodeName.toLowerCase(),B==="select"||B==="input"&&L.type==="file")var Me=op;else if(np(L))if(sp)Me=TC;else{Me=CC;var ue=EC}else B=L.nodeName,!B||B.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?P&&_u(P.elementType)&&(Me=op):Me=SC;if(Me&&(Me=Me(i,P))){ip(Q,Me,r,F);break e}ue&&ue(i,L,P),i==="focusout"&&P&&L.type==="number"&&P.memoizedProps.value!=null&&vu(L,"number",L.value)}switch(ue=P?Es(P):window,i){case"focusin":(np(ue)||ue.contentEditable==="true")&&(vo=ue,ku=P,Is=null);break;case"focusout":Is=ku=vo=null;break;case"mousedown":Uu=!0;break;case"contextmenu":case"mouseup":case"dragend":Uu=!1,hp(Q,r,F);break;case"selectionchange":if(AC)break;case"keydown":case"keyup":hp(Q,r,F)}var Ee;if(Ru)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else yo?ep(i,r)&&(Re="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Re="onCompositionStart");Re&&(Wh&&r.locale!=="ko"&&(yo||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&yo&&(Ee=Jh()):(Zn=F,Tu="value"in Zn?Zn.value:Zn.textContent,yo=!0)),ue=Yr(P,Re),0<ue.length&&(Re=new $h(Re,i,null,r,F),Q.push({event:Re,listeners:ue}),Ee?Re.data=Ee:(Ee=tp(r),Ee!==null&&(Re.data=Ee)))),(Ee=gC?yC(i,r):vC(i,r))&&(Re=Yr(P,"onBeforeInput"),0<Re.length&&(ue=new $h("onBeforeInput","beforeinput",null,r,F),Q.push({event:ue,listeners:Re}),ue.data=Ee)),uS(Q,i,P,r,F)}Bg(Q,s)})}function tl(i,s,r){return{instance:i,listener:s,currentTarget:r}}function Yr(i,s){for(var r=s+"Capture",u=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Cs(i,r),m!=null&&u.unshift(tl(i,m,y)),m=Cs(i,s),m!=null&&u.push(tl(i,m,y))),i.tag===3)return u;i=i.return}return[]}function hS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function qg(i,s,r,u,m){for(var y=s._reactName,C=[];r!==null&&r!==u;){var S=r,A=S.alternate,P=S.stateNode;if(S=S.tag,A!==null&&A===u)break;S!==5&&S!==26&&S!==27||P===null||(A=P,m?(P=Cs(r,y),P!=null&&C.unshift(tl(r,P,A))):m||(P=Cs(r,y),P!=null&&C.push(tl(r,P,A)))),r=r.return}C.length!==0&&i.push({event:s,listeners:C})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function Vg(i){return(typeof i=="string"?i:""+i).replace(pS,`
`).replace(mS,"")}function Fg(i,s){return s=Vg(s),Vg(i)===s}function Be(i,s,r,u,m,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||po(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&po(i,""+u);break;case"className":$l(i,"class",u);break;case"tabIndex":$l(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":$l(i,r,u);break;case"style":Fh(i,u,y);break;case"data":if(s!=="object"){$l(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Wl(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&Be(i,s,"name",m.name,m,null),Be(i,s,"formEncType",m.formEncType,m,null),Be(i,s,"formMethod",m.formMethod,m,null),Be(i,s,"formTarget",m.formTarget,m,null)):(Be(i,s,"encType",m.encType,m,null),Be(i,s,"method",m.method,m,null),Be(i,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Wl(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=An);break;case"onScroll":u!=null&&Ae("scroll",i);break;case"onScrollEnd":u!=null&&Ae("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(o(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=Wl(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":Ae("beforetoggle",i),Ae("toggle",i),Ql(i,"popover",u);break;case"xlinkActuate":bn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ql(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=FE.get(r)||r,Ql(i,r,u))}}function sd(i,s,r,u,m,y){switch(r){case"style":Fh(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(o(60));i.innerHTML=r}}break;case"children":typeof u=="string"?po(i,u):(typeof u=="number"||typeof u=="bigint")&&po(i,""+u);break;case"onScroll":u!=null&&Ae("scroll",i);break;case"onScrollEnd":u!=null&&Ae("scrollend",i);break;case"onClick":u!=null&&(i.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),s=r.slice(2,m?r.length-7:void 0),y=i[It]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(s,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,u,m);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Ql(i,r,u)}}}function Et(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",i),Ae("load",i);var u=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var C=r[y];if(C!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(i,s,y,C,r,null)}}m&&Be(i,s,"srcSet",r.srcSet,r,null),u&&Be(i,s,"src",r.src,r,null);return;case"input":Ae("invalid",i);var S=y=C=m=null,A=null,P=null;for(u in r)if(r.hasOwnProperty(u)){var F=r[u];if(F!=null)switch(u){case"name":m=F;break;case"type":C=F;break;case"checked":A=F;break;case"defaultChecked":P=F;break;case"value":y=F;break;case"defaultValue":S=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(137,s));break;default:Be(i,s,u,F,r,null)}}Bh(i,y,S,A,P,C,m,!1);return;case"select":Ae("invalid",i),u=C=y=null;for(m in r)if(r.hasOwnProperty(m)&&(S=r[m],S!=null))switch(m){case"value":y=S;break;case"defaultValue":C=S;break;case"multiple":u=S;default:Be(i,s,m,S,r,null)}s=y,r=C,i.multiple=!!u,s!=null?ho(i,!!u,s,!1):r!=null&&ho(i,!!u,r,!0);return;case"textarea":Ae("invalid",i),y=m=u=null;for(C in r)if(r.hasOwnProperty(C)&&(S=r[C],S!=null))switch(C){case"value":u=S;break;case"defaultValue":m=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(o(91));break;default:Be(i,s,C,S,r,null)}qh(i,u,m,y);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(u=r[A],u!=null))switch(A){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Be(i,s,A,u,r,null)}return;case"dialog":Ae("beforetoggle",i),Ae("toggle",i),Ae("cancel",i),Ae("close",i);break;case"iframe":case"object":Ae("load",i);break;case"video":case"audio":for(u=0;u<el.length;u++)Ae(el[u],i);break;case"image":Ae("error",i),Ae("load",i);break;case"details":Ae("toggle",i);break;case"embed":case"source":case"link":Ae("error",i),Ae("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in r)if(r.hasOwnProperty(P)&&(u=r[P],u!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Be(i,s,P,u,r,null)}return;default:if(_u(s)){for(F in r)r.hasOwnProperty(F)&&(u=r[F],u!==void 0&&sd(i,s,F,u,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(u=r[S],u!=null&&Be(i,s,S,u,r,null))}function gS(i,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,C=null,S=null,A=null,P=null,F=null;for(B in r){var Q=r[B];if(r.hasOwnProperty(B)&&Q!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":A=Q;default:u.hasOwnProperty(B)||Be(i,s,B,null,u,Q)}}for(var L in u){var B=u[L];if(Q=r[L],u.hasOwnProperty(L)&&(B!=null||Q!=null))switch(L){case"type":y=B;break;case"name":m=B;break;case"checked":P=B;break;case"defaultChecked":F=B;break;case"value":C=B;break;case"defaultValue":S=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,s));break;default:B!==Q&&Be(i,s,L,B,u,Q)}}yu(i,C,S,A,P,F,y,m);return;case"select":B=C=S=L=null;for(y in r)if(A=r[y],r.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":B=A;default:u.hasOwnProperty(y)||Be(i,s,y,null,u,A)}for(m in u)if(y=u[m],A=r[m],u.hasOwnProperty(m)&&(y!=null||A!=null))switch(m){case"value":L=y;break;case"defaultValue":S=y;break;case"multiple":C=y;default:y!==A&&Be(i,s,m,y,u,A)}s=S,r=C,u=B,L!=null?ho(i,!!r,L,!1):!!u!=!!r&&(s!=null?ho(i,!!r,s,!0):ho(i,!!r,r?[]:"",!1));return;case"textarea":B=L=null;for(S in r)if(m=r[S],r.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Be(i,s,S,null,u,m)}for(C in u)if(m=u[C],y=r[C],u.hasOwnProperty(C)&&(m!=null||y!=null))switch(C){case"value":L=m;break;case"defaultValue":B=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==y&&Be(i,s,C,m,u,y)}Gh(i,L,B);return;case"option":for(var re in r)if(L=r[re],r.hasOwnProperty(re)&&L!=null&&!u.hasOwnProperty(re))switch(re){case"selected":i.selected=!1;break;default:Be(i,s,re,null,u,L)}for(A in u)if(L=u[A],B=r[A],u.hasOwnProperty(A)&&L!==B&&(L!=null||B!=null))switch(A){case"selected":i.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:Be(i,s,A,L,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in r)L=r[pe],r.hasOwnProperty(pe)&&L!=null&&!u.hasOwnProperty(pe)&&Be(i,s,pe,null,u,L);for(P in u)if(L=u[P],B=r[P],u.hasOwnProperty(P)&&L!==B&&(L!=null||B!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:Be(i,s,P,L,u,B)}return;default:if(_u(s)){for(var Ge in r)L=r[Ge],r.hasOwnProperty(Ge)&&L!==void 0&&!u.hasOwnProperty(Ge)&&sd(i,s,Ge,void 0,u,L);for(F in u)L=u[F],B=r[F],!u.hasOwnProperty(F)||L===B||L===void 0&&B===void 0||sd(i,s,F,L,u,B);return}}for(var D in r)L=r[D],r.hasOwnProperty(D)&&L!=null&&!u.hasOwnProperty(D)&&Be(i,s,D,null,u,L);for(Q in u)L=u[Q],B=r[Q],!u.hasOwnProperty(Q)||L===B||L==null&&B==null||Be(i,s,Q,L,u,B)}function zg(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yS(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],y=m.transferSize,C=m.initiatorType,S=m.duration;if(y&&S&&zg(C)){for(C=0,S=m.responseEnd,u+=1;u<r.length;u++){var A=r[u],P=A.startTime;if(P>S)break;var F=A.transferSize,Q=A.initiatorType;F&&zg(Q)&&(A=A.responseEnd,C+=F*(A<S?1:(S-P)/(A-P)))}if(--u,s+=8*(y+C)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ld=null,rd=null;function Jr(i){return i.nodeType===9?i:i.ownerDocument}function Yg(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jg(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function ad(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ud=null;function vS(){var i=window.event;return i&&i.type==="popstate"?i===ud?!1:(ud=i,!0):(ud=null,!1)}var Kg=typeof setTimeout=="function"?setTimeout:void 0,_S=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,xS=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(i){return Qg.resolve(null).then(i).catch(ES)}:Kg;function ES(i){setTimeout(function(){throw i})}function mi(i){return i==="head"}function $g(i,s){var r=s,u=0;do{var m=r.nextSibling;if(i.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(m),Yo(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")nl(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,nl(r);for(var y=r.firstChild;y;){var C=y.nextSibling,S=y.nodeName;y[xs]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=C}}else r==="body"&&nl(i.ownerDocument.body);r=m}while(r);Yo(s)}function Xg(i,s){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function cd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":cd(r),mu(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function CS(i,s,r,u){for(;i.nodeType===1;){var m=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[xs])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=on(i.nextSibling),i===null)break}return null}function SS(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=on(i.nextSibling),i===null))return null;return i}function Wg(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=on(i.nextSibling),i===null))return null;return i}function dd(i){return i.data==="$?"||i.data==="$~"}function fd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function TS(i,s){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function on(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var hd=null;function Zg(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(s===0)return on(i.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}i=i.nextSibling}return null}function jg(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return i;s--}else r!=="/$"&&r!=="/&"||s++}i=i.previousSibling}return null}function ey(i,s,r){switch(s=Jr(r),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function nl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);mu(i)}var sn=new Map,ty=new Set;function Kr(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Vn=J.d;J.d={f:bS,r:AS,D:NS,C:wS,L:RS,m:IS,X:DS,S:MS,M:kS};function bS(){var i=Vn.f(),s=Hr();return i||s}function AS(i){var s=uo(i);s!==null&&s.tag===5&&s.type==="form"?vm(s):Vn.r(i)}var Vo=typeof document>"u"?null:document;function ny(i,s,r){var u=Vo;if(u&&typeof s=="string"&&s){var m=Xt(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),ty.has(m)||(ty.add(m),i={rel:i,crossOrigin:r,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),Et(s,"link",i),ct(s),u.head.appendChild(s)))}}function NS(i){Vn.D(i),ny("dns-prefetch",i,null)}function wS(i,s){Vn.C(i,s),ny("preconnect",i,s)}function RS(i,s,r){Vn.L(i,s,r);var u=Vo;if(u&&i&&s){var m='link[rel="preload"][as="'+Xt(s)+'"]';s==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Xt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Xt(r.imageSizes)+'"]')):m+='[href="'+Xt(i)+'"]';var y=m;switch(s){case"style":y=Fo(i);break;case"script":y=zo(i)}sn.has(y)||(i=x({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),sn.set(y,i),u.querySelector(m)!==null||s==="style"&&u.querySelector(il(y))||s==="script"&&u.querySelector(ol(y))||(s=u.createElement("link"),Et(s,"link",i),ct(s),u.head.appendChild(s)))}}function IS(i,s){Vn.m(i,s);var r=Vo;if(r&&i){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Xt(u)+'"][href="'+Xt(i)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=zo(i)}if(!sn.has(y)&&(i=x({rel:"modulepreload",href:i},s),sn.set(y,i),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ol(y)))return}u=r.createElement("link"),Et(u,"link",i),ct(u),r.head.appendChild(u)}}}function MS(i,s,r){Vn.S(i,s,r);var u=Vo;if(u&&i){var m=co(u).hoistableStyles,y=Fo(i);s=s||"default";var C=m.get(y);if(!C){var S={loading:0,preload:null};if(C=u.querySelector(il(y)))S.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":s},r),(r=sn.get(y))&&pd(i,r);var A=C=u.createElement("link");ct(A),Et(A,"link",i),A._p=new Promise(function(P,F){A.onload=P,A.onerror=F}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Qr(C,s,u)}C={type:"stylesheet",instance:C,count:1,state:S},m.set(y,C)}}}function DS(i,s){Vn.X(i,s);var r=Vo;if(r&&i){var u=co(r).hoistableScripts,m=zo(i),y=u.get(m);y||(y=r.querySelector(ol(m)),y||(i=x({src:i,async:!0},s),(s=sn.get(m))&&md(i,s),y=r.createElement("script"),ct(y),Et(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function kS(i,s){Vn.M(i,s);var r=Vo;if(r&&i){var u=co(r).hoistableScripts,m=zo(i),y=u.get(m);y||(y=r.querySelector(ol(m)),y||(i=x({src:i,async:!0,type:"module"},s),(s=sn.get(m))&&md(i,s),y=r.createElement("script"),ct(y),Et(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function iy(i,s,r,u){var m=(m=he.current)?Kr(m):null;if(!m)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Fo(r.href),r=co(m).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Fo(r.href);var y=co(m).hoistableStyles,C=y.get(i);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,C),(y=m.querySelector(il(i)))&&!y._p&&(C.instance=y,C.state.loading=5),sn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},sn.set(i,r),y||US(m,i,r,C.state))),s&&u===null)throw Error(o(528,""));return C}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zo(r),r=co(m).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Fo(i){return'href="'+Xt(i)+'"'}function il(i){return'link[rel="stylesheet"]['+i+"]"}function oy(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function US(i,s,r,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Et(s,"link",r),ct(s),i.head.appendChild(s))}function zo(i){return'[src="'+Xt(i)+'"]'}function ol(i){return"script[async]"+i}function sy(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Xt(r.href)+'"]');if(u)return s.instance=u,ct(u),u;var m=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),ct(u),Et(u,"style",m),Qr(u,r.precedence,i),s.instance=u;case"stylesheet":m=Fo(r.href);var y=i.querySelector(il(m));if(y)return s.state.loading|=4,s.instance=y,ct(y),y;u=oy(r),(m=sn.get(m))&&pd(u,m),y=(i.ownerDocument||i).createElement("link"),ct(y);var C=y;return C._p=new Promise(function(S,A){C.onload=S,C.onerror=A}),Et(y,"link",u),s.state.loading|=4,Qr(y,r.precedence,i),s.instance=y;case"script":return y=zo(r.src),(m=i.querySelector(ol(y)))?(s.instance=m,ct(m),m):(u=r,(m=sn.get(y))&&(u=x({},r),md(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),ct(m),Et(m,"link",u),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Qr(u,r.precedence,i));return s.instance}function Qr(i,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,C=0;C<u.length;C++){var S=u[C];if(S.dataset.precedence===s)y=S;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function pd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function md(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var $r=null;function ly(i,s,r){if($r===null){var u=new Map,m=$r=new Map;m.set(r,u)}else m=$r,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),m=0;m<r.length;m++){var y=r[m];if(!(y[xs]||y[yt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(s)||"";C=i+C;var S=u.get(C);S?S.push(y):u.set(C,[y])}}return u}function ry(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function PS(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ay(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function LS(i,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Fo(u.href),y=s.querySelector(il(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Xr.bind(i),s.then(i,i)),r.state.loading|=4,r.instance=y,ct(y);return}y=s.ownerDocument||s,u=oy(u),(m=sn.get(m))&&pd(u,m),y=y.createElement("link"),ct(y);var C=y;C._p=new Promise(function(S,A){C.onload=S,C.onerror=A}),Et(y,"link",u),r.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Xr.bind(i),s.addEventListener("load",r),s.addEventListener("error",r))}}var gd=0;function OS(i,s){return i.stylesheets&&i.count===0&&Zr(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&Zr(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&gd===0&&(gd=62500*yS());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Zr(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>gd?50:800)+s);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Xr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zr(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Wr=null;function Zr(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Wr=new Map,s.forEach(HS,i),Wr=null,Xr.call(i))}function HS(i,s){if(!(s.state.loading&4)){var r=Wr.get(i);if(r)var u=r.get(null);else{r=new Map,Wr.set(i,r);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var C=m[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(r.set(C.dataset.precedence,C),u=C)}u&&r.set(null,u)}m=s.instance,C=m.getAttribute("data-precedence"),y=r.get(C)||u,y===u&&r.set(null,m),r.set(C,m),this.count++,u=Xr.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var sl={$$typeof:q,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function BS(i,s,r,u,m,y,C,S,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=du(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=du(0),this.hiddenUpdates=du(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function uy(i,s,r,u,m,y,C,S,A,P,F,Q){return i=new BS(i,s,r,C,A,P,F,Q,S),s=1,y===!0&&(s|=24),y=Ft(3,null,null,s),i.current=y,y.stateNode=i,s=$u(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},ju(y),i}function cy(i){return i?(i=Eo,i):Eo}function dy(i,s,r,u,m,y){m=cy(m),u.context===null?u.context=m:u.pendingContext=m,u=oi(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=si(i,u,s),r!==null&&(Lt(r,i,s),Os(r,i,s))}function fy(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function yd(i,s){fy(i,s),(i=i.alternate)&&fy(i,s)}function hy(i){if(i.tag===13||i.tag===31){var s=Li(i,67108864);s!==null&&Lt(s,i,67108864),yd(i,67108864)}}function py(i){if(i.tag===13||i.tag===31){var s=Qt();s=fu(s);var r=Li(i,s);r!==null&&Lt(r,i,s),yd(i,s)}}var jr=!0;function GS(i,s,r,u){var m=U.T;U.T=null;var y=J.p;try{J.p=2,vd(i,s,r,u)}finally{J.p=y,U.T=m}}function qS(i,s,r,u){var m=U.T;U.T=null;var y=J.p;try{J.p=8,vd(i,s,r,u)}finally{J.p=y,U.T=m}}function vd(i,s,r,u){if(jr){var m=_d(u);if(m===null)od(i,s,u,ea,r),gy(i,u);else if(FS(m,i,s,r,u))u.stopPropagation();else if(gy(i,u),s&4&&-1<VS.indexOf(i)){for(;m!==null;){var y=uo(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=Mi(y.pendingLanes);if(C!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;C;){var A=1<<31-qt(C);S.entanglements[1]|=A,C&=~A}Sn(y),(Ue&6)===0&&(Lr=Bt()+500,js(0))}}break;case 31:case 13:S=Li(y,2),S!==null&&Lt(S,y,2),Hr(),yd(y,2)}if(y=_d(u),y===null&&od(i,s,u,ea,r),y===m)break;m=y}m!==null&&u.stopPropagation()}else od(i,s,u,null,r)}}function _d(i){return i=Eu(i),xd(i)}var ea=null;function xd(i){if(ea=null,i=ao(i),i!==null){var s=a(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=c(s),i!==null)return i;i=null}else if(r===31){if(i=h(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return ea=i,null}function my(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(NE()){case Sh:return 2;case Th:return 8;case Fl:case wE:return 32;case bh:return 268435456;default:return 32}default:return 32}}var Ed=!1,gi=null,yi=null,vi=null,ll=new Map,rl=new Map,_i=[],VS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gy(i,s){switch(i){case"focusin":case"focusout":gi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":ll.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(s.pointerId)}}function al(i,s,r,u,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},s!==null&&(s=uo(s),s!==null&&hy(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function FS(i,s,r,u,m){switch(s){case"focusin":return gi=al(gi,i,s,r,u,m),!0;case"dragenter":return yi=al(yi,i,s,r,u,m),!0;case"mouseover":return vi=al(vi,i,s,r,u,m),!0;case"pointerover":var y=m.pointerId;return ll.set(y,al(ll.get(y)||null,i,s,r,u,m)),!0;case"gotpointercapture":return y=m.pointerId,rl.set(y,al(rl.get(y)||null,i,s,r,u,m)),!0}return!1}function yy(i){var s=ao(i.target);if(s!==null){var r=a(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){i.blockedOn=s,Mh(i.priority,function(){py(r)});return}}else if(s===31){if(s=h(r),s!==null){i.blockedOn=s,Mh(i.priority,function(){py(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ta(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=_d(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);xu=u,r.target.dispatchEvent(u),xu=null}else return s=uo(r),s!==null&&hy(s),i.blockedOn=r,!1;s.shift()}return!0}function vy(i,s,r){ta(i)&&r.delete(s)}function zS(){Ed=!1,gi!==null&&ta(gi)&&(gi=null),yi!==null&&ta(yi)&&(yi=null),vi!==null&&ta(vi)&&(vi=null),ll.forEach(vy),rl.forEach(vy)}function na(i,s){i.blockedOn===s&&(i.blockedOn=null,Ed||(Ed=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zS)))}var ia=null;function _y(i){ia!==i&&(ia=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ia===i&&(ia=null);for(var s=0;s<i.length;s+=3){var r=i[s],u=i[s+1],m=i[s+2];if(typeof u!="function"){if(xd(u||r)===null)continue;break}var y=uo(r);y!==null&&(i.splice(s,3),s-=3,_c(y,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function Yo(i){function s(A){return na(A,i)}gi!==null&&na(gi,i),yi!==null&&na(yi,i),vi!==null&&na(vi,i),ll.forEach(s),rl.forEach(s);for(var r=0;r<_i.length;r++){var u=_i[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<_i.length&&(r=_i[0],r.blockedOn===null);)yy(r),r.blockedOn===null&&_i.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],y=r[u+1],C=m[It]||null;if(typeof y=="function")C||_y(r);else if(C){var S=null;if(y&&y.hasAttribute("formAction")){if(m=y,C=y[It]||null)S=C.formAction;else if(xd(m)!==null)continue}else S=C.action;typeof S=="function"?r[u+1]=S:(r.splice(u,3),u-=3),_y(r)}}}function xy(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(C){return m=C})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Cd(i){this._internalRoot=i}oa.prototype.render=Cd.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var r=s.current,u=Qt();dy(r,u,i,s,null,null)},oa.prototype.unmount=Cd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;dy(i.current,2,null,i,null,null),Hr(),s[ro]=null}};function oa(i){this._internalRoot=i}oa.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ih();i={blockedOn:null,target:i,priority:s};for(var r=0;r<_i.length&&s!==0&&s<_i[r].priority;r++);_i.splice(r,0,i),r===0&&yy(i)}};var Ey=e.version;if(Ey!=="19.2.4")throw Error(o(527,Ey,"19.2.4"));J.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=p(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var YS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{ys=sa.inject(YS),Gt=sa}catch{}}return cl.createRoot=function(i,s){if(!l(i))throw Error(o(299));var r=!1,u="",m=wm,y=Rm,C=Im;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(C=s.onRecoverableError)),s=uy(i,1,!1,null,null,r,u,null,m,y,C,xy),i[ro]=s.current,id(i),new Cd(s)},cl.hydrateRoot=function(i,s,r){if(!l(i))throw Error(o(299));var u=!1,m="",y=wm,C=Rm,S=Im,A=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(C=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),s=uy(i,1,!0,s,r??null,u,m,A,y,C,S,xy),s.context=cy(null),r=s.current,u=Qt(),u=fu(u),m=oi(u),m.callback=null,si(r,m,u),r=u,s.current.lanes=r,_s(s,r),Sn(s),i[ro]=s.current,id(i),new oa(s)},cl.version="19.2.4",cl}var My;function tT(){if(My)return bd.exports;My=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bd.exports=eT(),bd.exports}var nT=tT();const iT=s_(nT),oT=({squares:t,pendingSelection:e,settings:n,onSquareClick:o})=>{const l=(c,h)=>{const g=c==="row"?n.rowNumbers:n.colNumbers;return g&&g.length>0?g[h]:"?"},a=Array.from({length:10},(c,h)=>(t||[]).filter(g=>g.row===h));return _.jsxs("div",{className:"flex flex-col items-center w-full",children:[_.jsx("div",{className:"w-full text-center mb-8 px-2",children:_.jsxs("div",{className:"inline-flex flex-col items-center gap-3 w-full max-w-lg",children:[_.jsxs("div",{className:"w-full",children:[_.jsx("p",{className:"text-indigo-400 text-[8px] md:text-[10px] font-black uppercase tracking-widest mb-1",children:"Team A"}),_.jsx("div",{className:"px-4 md:px-10 py-3 md:py-4 bg-indigo-900 text-white rounded-2xl md:rounded-3xl shadow-lg border-b-4 md:border-b-8 border-indigo-950",children:_.jsx("span",{className:"text-xl md:text-4xl font-black uppercase italic tracking-tighter truncate block",children:(n==null?void 0:n.teamA)||"Team A"})})]}),_.jsx("span",{className:"text-indigo-300 font-black italic text-sm md:text-xl uppercase tracking-[0.2em] md:tracking-[0.4em]",children:"VS"}),_.jsxs("div",{className:"w-full",children:[_.jsx("p",{className:"text-indigo-400 text-[8px] md:text-[10px] font-black uppercase tracking-widest mb-1",children:"Team B"}),_.jsx("div",{className:"px-4 md:px-10 py-3 md:py-4 bg-white border-2 md:border-4 border-indigo-900 text-indigo-900 rounded-2xl md:rounded-3xl shadow-lg",children:_.jsx("span",{className:"text-xl md:text-4xl font-black uppercase italic tracking-tighter truncate block",children:(n==null?void 0:n.teamB)||"Team B"})})]})]})}),_.jsx("div",{className:"w-full overflow-x-auto overflow-y-hidden pb-4 mb-8 touch-pan-x scrollbar-hide",children:_.jsx("div",{className:"inline-block p-2",children:_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("div",{className:"flex items-center",children:[_.jsx("div",{className:"w-[60px] md:w-[88px] flex-shrink-0"}),_.jsx("div",{className:"flex gap-[1px] md:gap-[2px]",children:Array.from({length:10}).map((c,h)=>_.jsx("div",{className:"w-8 md:w-14 h-8 md:h-12 flex items-center justify-center font-black text-sm md:text-2xl text-indigo-600 bg-indigo-50 rounded-t-lg md:rounded-t-xl border-b border-indigo-200",children:l("col",h)},h))})]}),_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"w-6 md:w-8 flex items-center justify-center mr-1 md:mr-2",children:_.jsx("p",{className:"text-[7px] md:text-[10px] font-black text-indigo-300 uppercase tracking-[0.3em] md:tracking-[0.5em] [writing-mode:vertical-lr] rotate-180",children:(n==null?void 0:n.teamA)||"Team A"})}),_.jsx("div",{className:"flex flex-col gap-[1px] md:gap-[2px] bg-indigo-900 border-2 md:border-4 border-indigo-900 rounded-lg md:rounded-2xl overflow-hidden shadow-xl",children:a.map((c,h)=>_.jsxs("div",{className:"flex gap-[1px] md:gap-[2px]",children:[_.jsx("div",{className:"h-8 md:h-14 w-8 md:w-12 flex items-center justify-center font-black text-sm md:text-2xl text-indigo-100 bg-indigo-800/50 border-r border-indigo-900/50",children:l("row",h)}),c.map(g=>{const p=(n==null?void 0:n.costPerBox)||0,v=g.paidAmount||0,x=v>=p&&p>0,E=v>0&&!x,T=g.assigned&&v===0,N=e.includes(g.id);return _.jsxs("button",{onClick:()=>o(g.id),disabled:(n==null?void 0:n.isLocked)&&!g.assigned,className:`w-8 md:w-14 h-8 md:h-14 flex flex-col items-center justify-center p-0.5 transition-all duration-200 relative
                            ${g.assigned?x?"bg-green-50":E?"bg-orange-50":"bg-indigo-50":N?"bg-indigo-600 ring-2 md:ring-4 ring-indigo-400/50 scale-95 z-10":n!=null&&n.isLocked?"bg-gray-100 grayscale":"bg-white active:bg-indigo-100"}
                          `,children:[_.jsx("span",{className:`absolute top-0.5 left-0.5 text-[5px] md:text-[7px] font-bold pointer-events-none ${N?"text-white/40":"text-indigo-200"}`,children:g.id+1}),g.assigned?_.jsxs("div",{className:"flex flex-col items-center justify-center w-full px-0.5",children:[_.jsx("span",{className:"text-[6px] md:text-[8px] font-black text-indigo-900 uppercase leading-none truncate w-full text-center",children:g.alias.toUpperCase()}),_.jsxs("div",{className:"mt-0.5",children:[x&&_.jsx("i",{className:"fas fa-check-circle text-green-600 text-[6px] md:text-[10px]"}),E&&_.jsx("i",{className:"fas fa-dot-circle text-orange-500 text-[6px] md:text-[10px]"}),T&&_.jsx("i",{className:"fas fa-clock text-indigo-400 text-[6px] md:text-[10px] opacity-60"})]})]}):N?_.jsx("div",{className:"animate-pulse",children:_.jsx("i",{className:"fas fa-shopping-cart text-white text-[8px] md:text-[12px]"})}):_.jsx("span",{className:"text-[6px] md:text-[10px] font-bold text-gray-300",children:n!=null&&n.isLocked?"X":""})]},g.id)})]},h))})]})]})})}),_.jsxs("div",{className:"w-full max-w-2xl bg-indigo-50/50 p-4 md:p-8 rounded-2xl md:rounded-[2.5rem] border border-indigo-100 backdrop-blur-sm",children:[_.jsx("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-4",children:"Legend"}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-xl border border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-600"}),_.jsx("span",{className:"font-black text-green-900 uppercase text-[9px]",children:"Fully Paid"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-xl border border-orange-100",children:[_.jsx("i",{className:"fas fa-dot-circle text-orange-500"}),_.jsx("span",{className:"font-black text-orange-900 uppercase text-[9px]",children:"Partial"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-50 rounded-xl border border-indigo-100",children:[_.jsx("i",{className:"fas fa-clock text-indigo-400"}),_.jsx("span",{className:"font-black text-indigo-900 uppercase text-[9px]",children:"Unpaid"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-600 rounded-xl border border-indigo-700",children:[_.jsx("i",{className:"fas fa-shopping-cart text-white"}),_.jsx("span",{className:"font-black text-white uppercase text-[9px]",children:"In Cart"})]})]})]})]})};var sT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lT,rT;function aT(){return{geminiUrl:lT,vertexUrl:rT}}function uT(t,e,n,o){var l,a;if(!(t!=null&&t.baseUrl)){const c=aT();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:n:(a=c.geminiUrl)!==null&&a!==void 0?a:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qn{}function se(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(a+1),n[p])}else for(const p of g)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const o=e[e.length-1],l=t[o];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const l=e[o];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>d(h,e.slice(o+1),n)):n}else return n}else t=t[l]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function cT(t,e){for(const[n,o]of Object.entries(e)){const l=n.split("."),a=o.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Fd(t,l,a,0,c)}}function Fd(t,e,n,o,l){if(o>=e.length||typeof t!="object"||t===null)return;const a=e[o];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Fd(g,e,n,o+1,l)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!l.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const x=[];for(const E of n.slice(o))E==="*"?x.push(p):x.push(E);f(c,x,v)}for(const p of h)delete c[p]}}else{const c=t;a in c&&Fd(c[a],e,n,o+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const o=d(t,["resourceName"]);return o!=null&&f(e,["_url","resourceName"],o),e}function fT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],pT(c)),e}function hT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],mT(c)),e}function pT(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>gT(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function mT(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>yT(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function gT(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],ST(n)),e}function yT(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],TT(n)),e}function vT(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function _T(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function xT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],ET(c)),e}function ET(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function r_(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],CT(c)),e}function CT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function ST(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],Nf(o));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function TT(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],Nf(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Dy||(Dy={}));var ky;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(ky||(ky={}));var Uy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Uy||(Uy={}));var Ei;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ei||(Ei={}));var Py;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Py||(Py={}));var Ly;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Ly||(Ly={}));var Oy;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Oy||(Oy={}));var Hy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Hy||(Hy={}));var By;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(By||(By={}));var Gy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gy||(Gy={}));var qy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(qy||(qy={}));var Vy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Vy||(Vy={}));var Fy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Fy||(Fy={}));var zy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(zy||(zy={}));var Yy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Yy||(Yy={}));var Jy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Jy||(Jy={}));var Ky;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Ky||(Ky={}));var Qy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Qy||(Qy={}));var $y;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($y||($y={}));var Xy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Xy||(Xy={}));var Wy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Wy||(Wy={}));var ga;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ga||(ga={}));var Zy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zy||(Zy={}));var jy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(jy||(jy={}));var ev;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ev||(ev={}));var zd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zd||(zd={}));var tv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(tv||(tv={}));var nv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(nv||(nv={}));var Yd;(function(t){t.COLLECTION="COLLECTION"})(Yd||(Yd={}));var iv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(iv||(iv={}));var ov;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ov||(ov={}));var sv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sv||(sv={}));var lv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(lv||(lv={}));var rv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rv||(rv={}));var av;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(av||(av={}));var uv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(uv||(uv={}));var cv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(cv||(cv={}));var dv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(dv||(dv={}));var fv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(fv||(fv={}));var hv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(hv||(hv={}));var pv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(pv||(pv={}));var mv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(mv||(mv={}));var gv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(gv||(gv={}));var yv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(yv||(yv={}));var vv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(vv||(vv={}));var _v;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(_v||(_v={}));var xv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xv||(xv={}));var Ev;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ev||(Ev={}));var Cv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Cv||(Cv={}));var Sv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Sv||(Sv={}));var Tv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Tv||(Tv={}));var bv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(bv||(bv={}));var Av;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Av||(Av={}));var Nv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Nv||(Nv={}));var wv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(wv||(wv={}));var Rv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Rv||(Rv={}));var Qo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Qo||(Qo={}));class Jd{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class dl{get text(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const x=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,N]of Object.entries(E))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(N!==null||N!==void 0)&&x.push(T);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,p+=E.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const x of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,T]of Object.entries(x))E!=="inlineData"&&(T!==null||T!==void 0)&&v.push(E);x.inlineData&&typeof x.inlineData.data=="string"&&(p+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,o,l,a,c,h,g;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,o,l,a,c,h,g,p;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,o,l,a,c,h,g,p;if(((l=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Iv{}class Mv{}class bT{}class AT{}class NT{}class wT{}class Dv{}class kv{}class Uv{}class RT{}class ya{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new ya;let l;const a=e;return n?l=hT(a):l=fT(a),Object.assign(o,l),o}}class Pv{}class Lv{}class Ov{}class Hv{}class IT{}class MT{}class DT{}class wf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new wf,a=xT(e);return Object.assign(o,a),o}}class kT{}class UT{}class PT{}class Bv{}class LT{get text(){var e,n,o;let l="",a=!1;const c=[];for(const h of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,n,o;let l="";const a=[];for(const c of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class OT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const o=new Rf,a=r_(e);return Object.assign(o,a),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ke(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function a_(t,e){const n=ke(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function u_(t){return Array.isArray(t)?t.map(e=>va(e)):[va(t)]}function va(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function c_(t){const e=va(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function d_(t){const e=va(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function f_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gv(e)):[Gv(t)]}function Kd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bt(t){if(t==null)throw new Error("ContentUnion is required");return Kd(t)?t:{role:"user",parts:f_(t)}}function If(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=bt(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=bt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>bt(n)):[bt(e)]}function rn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qv(t)||Vv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bt(t)]}const e=[],n=[],o=Kd(t[0]);for(const l of t){const a=Kd(l);if(a!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(qv(l)||Vv(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return o||e.push({role:"user",parts:f_(n)}),e}function HT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ei).includes(n[0].toUpperCase())?n[0].toUpperCase():Ei.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(Ei).includes(o.toUpperCase())?o.toUpperCase():Ei.TYPE_UNSPECIFIED})}}function Wo(t){const e={},n=["items"],o=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&HT(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Ei).includes(h.toUpperCase())?h.toUpperCase():Ei.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=Wo(h);else if(o.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(Wo(p))}e[c]=g}else if(l.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=Wo(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Mf(t){return Wo(t)}function Df(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function us(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Wo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Wo(e.response));return t}function cs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function BT(t,e,n,o=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function $n(t,e){if(typeof e!="string")throw new Error("name must be a string");return BT(t,e,"cachedContents")}function h_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function wi(t){return Nf(t)}function GT(t){return t!=null&&typeof t=="object"&&"name"in t}function qT(t){return t!=null&&typeof t=="object"&&"video"in t}function VT(t){return t!=null&&typeof t=="object"&&"uri"in t}function p_(t){var e;let n;if(GT(t)&&(n=t.name),!(VT(t)&&(n=t.uri,n===void 0))&&!(qT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function m_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function g_(t){for(const e of["models","tunedModels","publisherModels"])if(FT(t,e))return t[e];return[]}function FT(t,e){return t!==null&&typeof t=="object"&&e in t}function zT(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function YT(t,e={}){const n=[],o=new Set;for(const l of t){const a=l.name;if(o.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);o.add(a);const c=zT(l,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function y_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function JT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function v_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ds(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function __(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KT(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const o=d(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>Nb(c))),f(e,["inlinedResponses"],a)}const l=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["inlinedEmbedContentResponses"],a)}return e}function QT(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const o=d(t,["gcsDestination","outputUriPrefix"]);o!=null&&f(e,["gcsUri"],o);const l=d(t,["bigqueryDestination","outputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function $T(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsDestination","outputUriPrefix"],o);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigqueryDestination","outputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ha(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata","displayName"]);o!=null&&f(e,["displayName"],o);const l=d(t,["metadata","state"]);l!=null&&f(e,["state"],__(l));const a=d(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],KT(v_(p))),e}function Qd(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(t,["state"]);l!=null&&f(e,["state"],__(l));const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const x=d(t,["inputConfig"]);x!=null&&f(e,["src"],XT(x));const E=d(t,["outputConfig"]);E!=null&&f(e,["dest"],QT(v_(E)));const T=d(t,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function XT(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const o=d(t,["gcsSource","uris"]);o!=null&&f(e,["gcsUri"],o);const l=d(t,["bigquerySource","inputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function WT(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=d(e,["fileName"]);o!=null&&f(n,["fileName"],o);const l=d(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Ab(t,c))),f(n,["requests","requests"],a)}return n}function ZT(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const o=d(t,["gcsUri"]);o!=null&&f(e,["gcsSource","uris"],o);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigquerySource","inputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function jT(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function eb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function tb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function nb(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],ib(o));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function ib(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["citations"],o)}return e}function x_(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ub(a))),f(e,["parts"],l)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function ob(t,e){const n={},o=d(t,["displayName"]);if(e!==void 0&&o!=null&&f(e,["batch","displayName"],o),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function sb(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(t,["dest"]);return e!==void 0&&l!=null&&f(e,["outputConfig"],$T(JT(l))),n}function Fv(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],WT(t,y_(t,l)));const a=d(e,["config"]);return a!=null&&ob(a,n),n}function lb(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],ke(t,o));const l=d(e,["src"]);l!=null&&f(n,["inputConfig"],ZT(y_(t,l)));const a=d(e,["config"]);return a!=null&&sb(a,n),n}function rb(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["batch","displayName"],o),n}function ab(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],mb(t,l));const a=d(e,["config"]);return a!=null&&rb(a,n),n}function ub(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function cb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function db(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function fb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function hb(t,e){const n={},o=d(e,["contents"]);if(o!=null){let a=If(t,o);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","request","content"],a)}const l=d(e,["config"]);return l!=null&&(f(n,["_self"],pb(l,n)),cT(n,{"requests[].*":"requests[].request.*"})),n}function pb(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function mb(t,e){const n={},o=d(e,["fileName"]);o!=null&&f(n,["file_name"],o);const l=d(e,["inlinedRequests"]);return l!=null&&f(n,["requests"],hb(t,l)),n}function gb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function yb(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vb(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function _b(t,e,n){const o={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],x_(bt(l)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(o,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(o,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(o,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(o,["responseSchema"],Mf(H));const z=d(e,["responseJsonSchema"]);if(z!=null&&f(o,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=d(e,["safetySettings"]);if(n!==void 0&&q!=null){let $=q;Array.isArray($)&&($=$.map(ne=>Pb(ne))),f(n,["safetySettings"],$)}const V=d(e,["tools"]);if(n!==void 0&&V!=null){let $=cs(V);Array.isArray($)&&($=$.map(ne=>Ob(us(ne)))),f(n,["tools"],$)}const Y=d(e,["toolConfig"]);if(n!==void 0&&Y!=null&&f(n,["toolConfig"],Lb(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=d(e,["cachedContent"]);n!==void 0&&te!=null&&f(n,["cachedContent"],$n(t,te));const W=d(e,["responseModalities"]);W!=null&&f(o,["responseModalities"],W);const me=d(e,["mediaResolution"]);me!=null&&f(o,["mediaResolution"],me);const oe=d(e,["speechConfig"]);if(oe!=null&&f(o,["speechConfig"],Df(oe)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=d(e,["thinkingConfig"]);de!=null&&f(o,["thinkingConfig"],de);const X=d(e,["imageConfig"]);X!=null&&f(o,["imageConfig"],bb(X));const ae=d(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&f(o,["enableEnhancedCivicAnswers"],ae),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function xb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>nb(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Eb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function Cb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],ds(t,o)),n}function Sb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Tb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function bb(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ab(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["request","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let h=rn(l);Array.isArray(h)&&(h=h.map(g=>x_(g))),f(n,["request","contents"],h)}const a=d(e,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(e,["config"]);return c!=null&&f(n,["request","generationConfig"],_b(t,c,d(n,["request"],{}))),n}function Nb(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],xb(n));const o=d(t,["error"]);return o!=null&&f(e,["error"],o),e}function wb(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);if(e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Rb(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const a=d(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function Ib(t){const e={},n=d(t,["config"]);return n!=null&&wb(n,e),e}function Mb(t){const e={},n=d(t,["config"]);return n!=null&&Rb(n,e),e}function Db(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>ha(c))),f(e,["batchJobs"],a)}return e}function kb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Qd(c))),f(e,["batchJobs"],a)}return e}function Ub(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],gb(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],yb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],jT(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function Pb(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function Lb(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],vb(o)),e}function Ob(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],Sb(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],Tb(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Yn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Yn||(Yn={}));class oo{constructor(e,n,o,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,l)}init(e,n,o){var l,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hb extends Qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oo(Yn.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Fv(this.apiClient,e),o=n._url,l=se("{model}:batchGenerateContent",o),h=n.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const x=Object.assign({},v);if(x.systemInstruction){const E=x.systemInstruction;delete x.systemInstruction;const T=x.request;T.systemInstruction=E,x.request=T}p.push(x)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},l=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${l}`),o.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?o.dest=`${a.slice(0,-6)}/dest`:o.dest=`${a}_dest_${l}`;else if(c)o.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=lb(this.apiClient,e);return h=se("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Qd(v))}else{const p=Fv(this.apiClient,e);return h=se("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>ha(v))}}async createEmbeddingsInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=ab(this.apiClient,e);return a=se("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>ha(g))}}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Cb(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Qd(v))}else{const p=Eb(this.apiClient,e);return h=se("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>ha(v))}}async cancel(e){var n,o,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=tb(this.apiClient,e);c=se("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const g=eb(this.apiClient,e);c=se("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Mb(e);return h=se("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=kb(v),E=new Bv;return Object.assign(E,x),E})}else{const p=Ib(e);return h=se("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Db(v),E=new Bv;return Object.assign(E,x),E})}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=cb(this.apiClient,e);return h=se("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>fb(v))}else{const p=ub(this.apiClient,e);return h=se("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>db(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bb(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function zv(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>aA(a))),f(e,["parts"],l)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function Gb(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=rn(c);Array.isArray(v)&&(v=v.map(x=>zv(x))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],zv(bt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(x=>cA(x))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],uA(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function qb(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let x=rn(c);Array.isArray(x)&&(x=x.map(E=>E)),f(e,["contents"],x)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],bt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(E=>dA(E))),f(e,["tools"],x)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function Vb(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],a_(t,o));const l=d(e,["config"]);return l!=null&&Gb(l,n),n}function Fb(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["model"],a_(t,o));const l=d(e,["config"]);return l!=null&&qb(l,n),n}function zb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],$n(t,o)),n}function Yb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],$n(t,o)),n}function Jb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Kb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Qb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function $b(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xb(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Wb(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Zb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],$n(t,o)),n}function jb(t,e){const n={},o=d(e,["name"]);return o!=null&&f(n,["_url","name"],$n(t,o)),n}function eA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function tA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function nA(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function iA(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function oA(t){const e={},n=d(t,["config"]);return n!=null&&nA(n,e),e}function sA(t){const e={},n=d(t,["config"]);return n!=null&&iA(n,e),e}function lA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function rA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function aA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],Qb(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],$b(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Bb(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function uA(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],Xb(o)),e}function cA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],eA(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],tA(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function dA(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>Wb(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function fA(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function hA(t,e){const n={},o=d(t,["ttl"]);e!==void 0&&o!=null&&f(e,["ttl"],o);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function pA(t,e){const n={},o=d(e,["name"]);o!=null&&f(n,["_url","name"],$n(t,o));const l=d(e,["config"]);return l!=null&&fA(l,n),n}function mA(t,e){const n={},o=d(e,["name"]);o!=null&&f(n,["_url","name"],$n(t,o));const l=d(e,["config"]);return l!=null&&hA(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gA extends Qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oo(Yn.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Fb(this.apiClient,e);return h=se("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Vb(this.apiClient,e);return h=se("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jb(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Zb(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Yb(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Kb(v),E=new Ov;return Object.assign(E,x),E})}else{const p=zb(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Jb(v),E=new Ov;return Object.assign(E,x),E})}}async update(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=mA(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=pA(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=sA(e);return h=se("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=rA(v),E=new Hv;return Object.assign(E,x),E})}else{const p=oA(e);return h=se("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=lA(v),E=new Hv;return Object.assign(E,x),E})}}}function _a(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(t);l<o.length;l++)e.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(t,o[l])&&(n[o[l]]=t[o[l]]);return n}function Yv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t){return this instanceof ve?(this.v=t,this):new ve(t)}function mn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(T){return function(N){return Promise.resolve(N).then(T,x)}}function h(T,N){o[T]&&(l[T]=function(M){return new Promise(function(I,H){a.push([T,M,I,H])>1||g(T,M)})},N&&(l[T]=N(l[T])))}function g(T,N){try{p(o[T](N))}catch(M){E(a[0][3],M)}}function p(T){T.value instanceof ve?Promise.resolve(T.value.v).then(v,x):E(a[0][2],T)}function v(T){g("next",T)}function x(T){g("throw",T)}function E(T,N){T(N),a.shift(),a.length&&g(a[0][0],a[0][1])}}function gn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Yv=="function"?Yv(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:E_(n)}function E_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vA(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const l=[];let a=!0;for(;o<n&&t[o].role==="model";)l.push(t[o]),a&&!E_(t[o])&&(a=!1),o++;a?e.push(...l):e.pop()}return e}class _A{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new xA(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class xA{constructor(e,n,o,l={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),vA(a)}async sendMessage(e){var n;await this.sendPromise;const o=bt(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,p=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(x))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(o,T,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const o=bt(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,o)}getHistory(e=!1){const n=e?Jv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return mn(this,arguments,function*(){var l,a,c,h,g,p;const v=[];try{for(var x=!0,E=gn(e),T;T=yield ve(E.next()),l=T.done,!l;x=!0){h=T.value,x=!1;const N=h;if(yA(N)){const M=(p=(g=N.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;M!==void 0&&v.push(M)}yield yield ve(N)}}catch(N){a={error:N}}finally{try{!x&&!l&&(c=E.return)&&(yield ve(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,v)})}recordHistory(e,n,o){let l=[];n.length>0&&n.every(a=>a.role!==void 0)?l=n:l.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Jv(o)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,bl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EA(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function CA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function SA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],p_(n)),e}function TA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function bA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],p_(n)),e}function AA(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function NA(t){const e={},n=d(t,["config"]);return n!=null&&AA(n,e),e}function wA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RA extends Qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oo(Yn.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NA(e);return a=se("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=wA(g),v=new kT;return Object.assign(v,p),v})}}async createInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=EA(e);return a=se("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=CA(g),v=new UT;return Object.assign(v,p),v})}}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bA(e);return a=se("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=SA(e);return a=se("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=TA(g),v=new PT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pa(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function IA(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>JA(a))),f(e,["parts"],l)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function MA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function DA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kA(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function UA(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const H=d(t,["seed"]);H!=null&&f(e,["seed"],H);const z=d(t,["speechConfig"]);z!=null&&f(e,["speechConfig"],z);const q=d(t,["stopSequences"]);q!=null&&f(e,["stopSequences"],q);const V=d(t,["temperature"]);V!=null&&f(e,["temperature"],V);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const te=d(t,["topK"]);te!=null&&f(e,["topK"],te);const W=d(t,["topP"]);if(W!=null&&f(e,["topP"],W),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function PA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function LA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function OA(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],IA(bt(N)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let te=cs(M);Array.isArray(te)&&(te=te.map(W=>QA(us(W)))),f(e,["setup","tools"],te)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],KA(I));const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const V=d(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function HA(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],UA(o));const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],bt(N));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let W=cs(M);Array.isArray(W)&&(W=W.map(me=>$A(us(me)))),f(e,["setup","tools"],W)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],I);const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const V=d(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const Y=d(t,["proactivity"]);e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y);const te=d(t,["explicitVadSignal"]);return e!==void 0&&te!=null&&f(e,["setup","explicitVadSignal"],te),n}function BA(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],ke(t,o));const l=d(e,["config"]);return l!=null&&f(n,["config"],OA(l,n)),n}function GA(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],ke(t,o));const l=d(e,["config"]);return l!=null&&f(n,["config"],HA(l,n)),n}function qA(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function VA(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["weightedPrompts"],o)}return e}function FA(t){const e={},n=d(t,["media"]);if(n!=null){let p=u_(n);Array.isArray(p)&&(p=p.map(v=>pa(v))),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],pa(d_(o)));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],pa(c_(a)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function zA(t){const e={},n=d(t,["media"]);if(n!=null){let p=u_(n);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const o=d(t,["audio"]);o!=null&&f(e,["audio"],d_(o));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],c_(a));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function YA(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const o=d(t,["serverContent"]);o!=null&&f(e,["serverContent"],o);const l=d(t,["toolCall"]);l!=null&&f(e,["toolCall"],l);const a=d(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],XA(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],WA(v)),e}function JA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],MA(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],DA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],pa(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function KA(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],PA(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],LA(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function $A(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>kA(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function XA(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const o=d(t,["cachedContentTokenCount"]);o!=null&&f(e,["cachedContentTokenCount"],o);const l=d(t,["candidatesTokenCount"]);l!=null&&f(e,["responseTokenCount"],l);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["promptTokensDetails"],T)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["cacheTokensDetails"],T)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["responseTokensDetails"],T)}const x=d(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["toolUsePromptTokensDetails"],T)}const E=d(t,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}function WA(t){const e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function jA(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const o=d(t,["citationMetadata"]);o!=null&&f(e,["citationMetadata"],eN(o));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function eN(t){const e={},n=d(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>l)),f(e,["citations"],o)}return e}function tN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let a=rn(l);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["contents"],a)}return n}function nN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["tokensInfo"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["tokensInfo"],l)}return e}function iN(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const o=d(t,["statistics"]);return o!=null&&f(e,["statistics"],oN(o)),e}function oN(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const o=d(t,["token_count"]);return o!=null&&f(e,["tokenCount"],o),e}function Ga(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>hw(a))),f(e,["parts"],l)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function sN(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const o=d(t,["enableControlImageComputation"]);return o!=null&&f(e,["computeControl"],o),e}function lN(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rN(t,e){const n={},o=d(t,["systemInstruction"]);e!==void 0&&o!=null&&f(e,["systemInstruction"],bt(o));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>b_(h))),f(e,["tools"],c)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],ZN(a)),n}function aN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let c=rn(l);Array.isArray(c)&&(c=c.map(h=>Ga(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&lN(a),n}function uN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let c=rn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&rN(a,n),n}function cN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["totalTokens"]);o!=null&&f(e,["totalTokens"],o);const l=d(t,["cachedContentTokenCount"]);return l!=null&&f(e,["cachedContentTokenCount"],l),e}function dN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["totalTokens"]);return o!=null&&f(e,["totalTokens"],o),e}function fN(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],ke(t,o)),n}function hN(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],ke(t,o)),n}function pN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function mN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function gN(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const H=d(t,["labels"]);e!==void 0&&H!=null&&f(e,["labels"],H);const z=d(t,["editMode"]);e!==void 0&&z!=null&&f(e,["parameters","editMode"],z);const q=d(t,["baseSteps"]);return e!==void 0&&q!=null&&f(e,["parameters","editConfig","baseSteps"],q),n}function yN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>_w(g))),f(n,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&gN(c,n),n}function vN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>qa(a))),f(e,["generatedImages"],l)}return e}function _N(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["requests[]","taskType"],o);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xN(t,e){const n={},o=d(t,["taskType"]);e!==void 0&&o!=null&&f(e,["instances[]","task_type"],o);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function EN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let h=If(t,l);Array.isArray(h)&&(h=h.map(g=>g)),f(n,["requests[]","content"],h)}const a=d(e,["config"]);a!=null&&_N(a,n);const c=d(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],ke(t,c)),n}function CN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let c=If(t,l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["instances[]","content"],c)}const a=d(e,["config"]);return a!=null&&xN(a,n),n}function SN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function TN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions[]","embeddings"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>iN(c))),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function bN(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const o=d(t,["deployedModelId"]);return o!=null&&f(e,["deployedModelId"],o),e}function AN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function NN(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wN(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const o=d(t,["mode"]);if(o!=null&&f(e,["mode"],o),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function RN(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const o=d(t,["name"]);o!=null&&f(e,["name"],o);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function IN(t,e,n){const o={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],Ga(bt(l)));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(o,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(o,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(o,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(o,["responseSchema"],Mf(H));const z=d(e,["responseJsonSchema"]);if(z!=null&&f(o,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=d(e,["safetySettings"]);if(n!==void 0&&q!=null){let $=q;Array.isArray($)&&($=$.map(ne=>xw(ne))),f(n,["safetySettings"],$)}const V=d(e,["tools"]);if(n!==void 0&&V!=null){let $=cs(V);Array.isArray($)&&($=$.map(ne=>Nw(us(ne)))),f(n,["tools"],$)}const Y=d(e,["toolConfig"]);if(n!==void 0&&Y!=null&&f(n,["toolConfig"],Aw(Y)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const te=d(e,["cachedContent"]);n!==void 0&&te!=null&&f(n,["cachedContent"],$n(t,te));const W=d(e,["responseModalities"]);W!=null&&f(o,["responseModalities"],W);const me=d(e,["mediaResolution"]);me!=null&&f(o,["mediaResolution"],me);const oe=d(e,["speechConfig"]);if(oe!=null&&f(o,["speechConfig"],Df(oe)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=d(e,["thinkingConfig"]);de!=null&&f(o,["thinkingConfig"],de);const X=d(e,["imageConfig"]);X!=null&&f(o,["imageConfig"],iw(X));const ae=d(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&f(o,["enableEnhancedCivicAnswers"],ae),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function MN(t,e,n){const o={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],bt(l));const a=d(e,["temperature"]);a!=null&&f(o,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(o,["topP"],c);const h=d(e,["topK"]);h!=null&&f(o,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(o,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(o,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(o,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(o,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(o,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(o,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(o,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(o,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(o,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(o,["responseSchema"],Mf(H));const z=d(e,["responseJsonSchema"]);z!=null&&f(o,["responseJsonSchema"],z);const q=d(e,["routingConfig"]);q!=null&&f(o,["routingConfig"],q);const V=d(e,["modelSelectionConfig"]);V!=null&&f(o,["modelConfig"],V);const Y=d(e,["safetySettings"]);if(n!==void 0&&Y!=null){let J=Y;Array.isArray(J)&&(J=J.map(O=>O)),f(n,["safetySettings"],J)}const te=d(e,["tools"]);if(n!==void 0&&te!=null){let J=cs(te);Array.isArray(J)&&(J=J.map(O=>b_(us(O)))),f(n,["tools"],J)}const W=d(e,["toolConfig"]);n!==void 0&&W!=null&&f(n,["toolConfig"],W);const me=d(e,["labels"]);n!==void 0&&me!=null&&f(n,["labels"],me);const oe=d(e,["cachedContent"]);n!==void 0&&oe!=null&&f(n,["cachedContent"],$n(t,oe));const de=d(e,["responseModalities"]);de!=null&&f(o,["responseModalities"],de);const X=d(e,["mediaResolution"]);X!=null&&f(o,["mediaResolution"],X);const ae=d(e,["speechConfig"]);ae!=null&&f(o,["speechConfig"],Df(ae));const $=d(e,["audioTimestamp"]);$!=null&&f(o,["audioTimestamp"],$);const ne=d(e,["thinkingConfig"]);ne!=null&&f(o,["thinkingConfig"],ne);const ye=d(e,["imageConfig"]);if(ye!=null&&f(o,["imageConfig"],ow(ye)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const U=d(e,["modelArmorConfig"]);return n!==void 0&&U!=null&&f(n,["modelArmorConfig"],U),o}function Kv(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let c=rn(l);Array.isArray(c)&&(c=c.map(h=>Ga(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],IN(t,a,n)),n}function Qv(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["contents"]);if(l!=null){let c=rn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],MN(t,a,n)),n}function $v(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let g=o;Array.isArray(g)&&(g=g.map(p=>jA(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Xv(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["candidates"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const l=d(t,["createTime"]);l!=null&&f(e,["createTime"],l);const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function DN(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function kN(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const H=d(t,["labels"]);e!==void 0&&H!=null&&f(e,["labels"],H);const z=d(t,["imageSize"]);e!==void 0&&z!=null&&f(e,["parameters","sampleImageSize"],z);const q=d(t,["enhancePrompt"]);return e!==void 0&&q!=null&&f(e,["parameters","enhancePrompt"],q),n}function UN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&DN(a,n),n}function PN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&kN(a,n),n}function LN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>QN(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],S_(l)),e}function ON(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>qa(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],T_(l)),e}function HN(t,e){const n={},o=d(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Va(v));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let E=x;Array.isArray(E)&&(E=E.map(T=>Gw(T))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function BN(t,e){const n={},o=d(t,["numberOfVideos"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const a=d(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["pubsubTopic"]);e!==void 0&&x!=null&&f(e,["parameters","pubsubTopic"],x);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const N=d(t,["generateAudio"]);e!==void 0&&N!=null&&f(e,["parameters","generateAudio"],N);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&f(e,["instances[0]","lastFrame"],_n(M));const I=d(t,["referenceImages"]);if(e!==void 0&&I!=null){let q=I;Array.isArray(q)&&(q=q.map(V=>qw(V))),f(e,["instances[0]","referenceImages"],q)}const H=d(t,["mask"]);e!==void 0&&H!=null&&f(e,["instances[0]","mask"],Bw(H));const z=d(t,["compressionQuality"]);return e!==void 0&&z!=null&&f(e,["parameters","compressionQuality"],z),n}function GN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],zN(c)),e}function qN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],YN(c)),e}function VN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],Va(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],A_(c));const h=d(e,["source"]);h!=null&&JN(h,n);const g=d(e,["config"]);return g!=null&&HN(g,n),n}function FN(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],_n(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],N_(c));const h=d(e,["source"]);h!=null&&KN(h,n);const g=d(e,["config"]);return g!=null&&BN(g,n),n}function zN(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>XN(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function YN(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>WN(c))),f(e,["generatedVideos"],a)}const o=d(t,["raiMediaFilteredCount"]);o!=null&&f(e,["raiMediaFilteredCount"],o);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function JN(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Va(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],A_(a)),n}function KN(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],_n(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],N_(a)),n}function QN(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],sw(n));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const l=d(t,["_self"]);return l!=null&&f(e,["safetyAttributes"],S_(l)),e}function qa(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],C_(n));const o=d(t,["raiFilteredReason"]);o!=null&&f(e,["raiFilteredReason"],o);const l=d(t,["_self"]);l!=null&&f(e,["safetyAttributes"],T_(l));const a=d(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function $N(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],C_(n));const o=d(t,["labels"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["labels"],l)}return e}function XN(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],Ow(n)),e}function WN(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],Hw(n)),e}function ZN(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const o=d(t,["responseJsonSchema"]);o!=null&&f(e,["responseJsonSchema"],o);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const H=d(t,["seed"]);H!=null&&f(e,["seed"],H);const z=d(t,["speechConfig"]);z!=null&&f(e,["speechConfig"],z);const q=d(t,["stopSequences"]);q!=null&&f(e,["stopSequences"],q);const V=d(t,["temperature"]);V!=null&&f(e,["temperature"],V);const Y=d(t,["thinkingConfig"]);Y!=null&&f(e,["thinkingConfig"],Y);const te=d(t,["topK"]);te!=null&&f(e,["topK"],te);const W=d(t,["topP"]);if(W!=null&&f(e,["topP"],W),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function jN(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],ke(t,o)),n}function ew(t,e){const n={},o=d(e,["model"]);return o!=null&&f(n,["_url","name"],ke(t,o)),n}function tw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function nw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function iw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);if(o!=null&&f(e,["imageSize"],o),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ow(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const o=d(t,["imageSize"]);o!=null&&f(e,["imageSize"],o);const l=d(t,["personGeneration"]);l!=null&&f(e,["personGeneration"],l);const a=d(t,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const c=d(t,["outputCompressionQuality"]);return c!=null&&f(e,["imageOutputOptions","compressionQuality"],c),e}function sw(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],wi(n));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function C_(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["imageBytes"],wi(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Va(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],wi(n));const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function _n(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["imageBytes"]);o!=null&&f(e,["bytesBase64Encoded"],wi(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function lw(t,e,n){const o={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],m_(t,h)),o}function rw(t,e,n){const o={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],m_(t,h)),o}function aw(t,e){const n={},o=d(e,["config"]);return o!=null&&lw(t,o,n),n}function uw(t,e){const n={},o=d(e,["config"]);return o!=null&&rw(t,o,n),n}function cw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["_self"]);if(l!=null){let a=g_(l);Array.isArray(a)&&(a=a.map(c=>$d(c))),f(e,["models"],a)}return e}function dw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["_self"]);if(l!=null){let a=g_(l);Array.isArray(a)&&(a=a.map(c=>Xd(c))),f(e,["models"],a)}return e}function fw(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const o=d(t,["segmentationClasses"]);o!=null&&f(e,["maskClasses"],o);const l=d(t,["maskDilation"]);return l!=null&&f(e,["dilation"],l),e}function $d(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["version"]);a!=null&&f(e,["version"],a);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],ww(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const x=d(t,["maxTemperature"]);x!=null&&f(e,["maxTemperature"],x);const E=d(t,["topP"]);E!=null&&f(e,["topP"],E);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const N=d(t,["thinking"]);return N!=null&&f(e,["thinking"],N),e}function Xd(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["displayName"]);o!=null&&f(e,["displayName"],o);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["versionId"]);a!=null&&f(e,["version"],a);const c=d(t,["deployedModels"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>bN(E))),f(e,["endpoints"],x)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],Rw(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(E=>E)),f(e,["checkpoints"],x)}return e}function hw(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],AN(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],NN(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],ZA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function pw(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],_n(n)),e}function mw(t,e){const n={},o=d(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const T=d(t,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),n}function gw(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["source"]);l!=null&&vw(l,n);const a=d(e,["config"]);return a!=null&&mw(a,n),n}function yw(t){const e={},n=d(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>qa(l))),f(e,["generatedImages"],o)}return e}function vw(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(t,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],_n(l));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>pw(h))),f(e,["instances[0]","productImages"],c)}return n}function _w(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],_n(n));const o=d(t,["referenceId"]);o!=null&&f(e,["referenceId"],o);const l=d(t,["referenceType"]);l!=null&&f(e,["referenceType"],l);const a=d(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],fw(a));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],sN(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function S_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function T_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const o=d(t,["safetyAttributes","scores"]);o!=null&&f(e,["scores"],o);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function xw(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=d(t,["threshold"]);return o!=null&&f(e,["threshold"],o),e}function Ew(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],_n(n)),e}function Cw(t,e){const n={},o=d(t,["mode"]);e!==void 0&&o!=null&&f(e,["parameters","mode"],o);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","confidenceThreshold"],a);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),n}function Sw(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["source"]);l!=null&&bw(l,n);const a=d(e,["config"]);return a!=null&&Cw(a,n),n}function Tw(t){const e={},n=d(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>$N(l))),f(e,["generatedMasks"],o)}return e}function bw(t,e){const n={},o=d(t,["prompt"]);e!==void 0&&o!=null&&f(e,["instances[0]","prompt"],o);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],_n(l));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&f(e,["instances[0]","scribble"],Ew(a)),n}function Aw(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const o=d(t,["functionCallingConfig"]);return o!=null&&f(e,["functionCallingConfig"],wN(o)),e}function Nw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],tw(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],nw(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function b_(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const o=d(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>RN(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function ww(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Rw(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const o=d(t,["createTime"]);o!=null&&f(e,["createTime"],o);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Iw(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Mw(t,e){const n={},o=d(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Dw(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","name"],ke(t,o));const l=d(e,["config"]);return l!=null&&Iw(l,n),n}function kw(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["config"]);return l!=null&&Mw(l,n),n}function Uw(t,e){const n={},o=d(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const T=d(t,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),n}function Pw(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["_url","model"],ke(t,o));const l=d(e,["image"]);l!=null&&f(n,["instances[0]","image"],_n(l));const a=d(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=d(e,["config"]);return c!=null&&Uw(c,n),n}function Lw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>qa(a))),f(e,["generatedImages"],l)}return e}function Ow(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["encodedVideo"]);o!=null&&f(e,["videoBytes"],wi(o));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function Hw(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const o=d(t,["bytesBase64Encoded"]);o!=null&&f(e,["videoBytes"],wi(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Bw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],_n(n));const o=d(t,["maskMode"]);return o!=null&&f(e,["maskMode"],o),e}function Gw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Va(n));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function qw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],_n(n));const o=d(t,["referenceType"]);return o!=null&&f(e,["referenceType"],o),e}function A_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const o=d(t,["videoBytes"]);o!=null&&f(e,["encodedVideo"],wi(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["encoding"],l),e}function N_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const o=d(t,["videoBytes"]);o!=null&&f(e,["bytesBase64Encoded"],wi(o));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vw(t,e){const n={},o=d(t,["displayName"]);return e!==void 0&&o!=null&&f(e,["displayName"],o),n}function Fw(t){const e={},n=d(t,["config"]);return n!=null&&Vw(n,e),e}function zw(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),n}function Yw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&zw(o,e),e}function Jw(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Kw(t,e){const n={},o=d(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["customMetadata"],a)}const l=d(t,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),n}function Qw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const o=d(t,["metadata"]);o!=null&&f(e,["metadata"],o);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],Xw(c)),e}function $w(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const o=d(t,["fileName"]);o!=null&&f(e,["fileName"],o);const l=d(t,["config"]);return l!=null&&Kw(l,e),e}function Xw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["parent"]);o!=null&&f(e,["parent"],o);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function Ww(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function Zw(t){const e={},n=d(t,["config"]);return n!=null&&Ww(n,e),e}function jw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["fileSearchStores"],a)}return e}function w_(t,e){const n={},o=d(t,["mimeType"]);e!==void 0&&o!=null&&f(e,["mimeType"],o);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),n}function eR(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const o=d(t,["config"]);return o!=null&&w_(o,e),e}function tR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nR="Content-Type",iR="X-Server-Timeout",oR="User-Agent",Wd="x-goog-api-client",sR="1.38.0",lR=`google-genai-sdk/${sR}`,rR="v1beta1",aR="v1beta";class uR{constructor(e){var n,o,l;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:rR}else{if(!this.clientOptions.apiKey)throw new bl({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:aR,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const l=[this.getRequestUrlInternal(n)];return o&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Yd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(n))typeof a=="object"?o[l]=Object.assign(Object.assign({},o[l]),a):a!==void 0&&(o[l]=a);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,o);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,l){if(n&&n.timeout||l){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&cR(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await Wv(l),new Jd(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async l=>(await Wv(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return mn(this,arguments,function*(){var o;const l=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield ve(l.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=a.decode(v,{stream:!0});try{const N=JSON.parse(x);if("error"in N){const M=JSON.parse(JSON.stringify(N.error)),I=M.status,H=M.code,z=`got status: ${I}. ${JSON.stringify(N)}`;if(H>=400&&H<600)throw new bl({message:z,status:H})}}catch(N){if(N.name==="ApiError")throw N}c+=x;let E=-1,T=0;for(;;){E=-1,T=0;for(const I of g){const H=c.indexOf(I);H!==-1&&(E===-1||H<E)&&(E=H,T=I.length)}if(E===-1)break;const N=c.substring(0,E);c=c.substring(E+T);const M=N.trim();if(M.startsWith(h)){const I=M.substring(h.length).trim();try{const H=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ve(new Jd(H))}catch(H){throw new Error(`exception parsing stream chunk ${I}. ${H}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=lR+" "+this.clientOptions.userAgentExtra;return e[oR]=n,e[Wd]=n,e[nR]="application/json",e}async getHeadersInternal(e,n){const o=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))o.append(l,a);e.timeout&&e.timeout>0&&o.append(iR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},p=this.getFileName(e),v=se("upload/v1beta/files",g._url),x=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,p,g,n==null?void 0:n.httpOptions);return a.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,o){var l;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(l=o==null?void 0:o.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),x={};o!=null&&w_(o,x);const E=await this.fetchUploadUrl(p,h,g,v,x,o==null?void 0:o.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},l?{"X-Goog-Upload-File-Name":l}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Wv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(o);throw n>=400&&n<600?new bl({message:l,status:n}):new Error(l)}}function cR(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=o(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const l=o(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dR="mcp_used/unknown";let fR=!1;function R_(t){for(const e of t)if(hR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return fR}function I_(t){var e;const n=(e=t[Wd])!==null&&e!==void 0?e:"";t[Wd]=(n+` ${dR}`).trimStart()}function hR(t){return t!==null&&typeof t=="object"&&t instanceof Uf}function pR(t){return mn(this,arguments,function*(n,o=100){let l,a=0;for(;a<o;){const c=yield ve(n.listTools({cursor:l}));for(const h of c.tools)yield yield ve(h),a++;if(!c.nextCursor)break;l=c.nextCursor}})}class Uf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Uf(e,n)}async initialize(){var e,n,o,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(n=void 0,gn(pR(v))),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const x=l;c.push(x);const E=x.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=v}}catch(x){n={error:x}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),YT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[o.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:o.name,arguments:o.args},void 0,a);n.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function mR(t,e,n){const o=new OT;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(o,l),e(o)}class gR{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=_R(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(q=>{p=q}),x=e.callbacks,E=function(){p({})},T=this.apiClient,N={onopen:E,onmessage:q=>{mR(T,x.onmessage,q)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(q){},onclose:(o=x==null?void 0:x.onclose)!==null&&o!==void 0?o:function(q){}},M=this.webSocketFactory.create(g,vR(c),N);M.connect(),await v;const z={setup:{model:ke(this.apiClient,e.model)}};return M.send(JSON.stringify(z)),new yR(M,this.apiClient)}}class yR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=VA(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=qA(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Qo.PLAY)}pause(){this.sendPlaybackControl(Qo.PAUSE)}stop(){this.sendPlaybackControl(Qo.STOP)}resetContext(){this.sendPlaybackControl(Qo.RESET_CONTEXT)}close(){this.conn.close()}}function vR(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function _R(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xR="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function ER(t,e,n){const o=new LT;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const a=JSON.parse(l);if(t.isVertexAI()){const c=YA(a);Object.assign(o,c)}else Object.assign(o,a);e(o)}class CR{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new gR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&R_(e.config.tools)&&I_(x);const E=AR(x);if(this.apiClient.isVertexAI()){const oe=this.apiClient.getProject(),de=this.apiClient.getLocation(),X=this.apiClient.getApiKey(),ae=!!oe&&!!de||!!X;this.apiClient.getCustomBaseUrl()&&!ae?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v))}else{const oe=this.apiClient.getApiKey();let de="BidiGenerateContent",X="key";oe!=null&&oe.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),de="BidiGenerateContentConstrained",X="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${de}?${X}=${oe}`}let T=()=>{};const N=new Promise(oe=>{T=oe}),M=e.callbacks,I=function(){var oe;(oe=M==null?void 0:M.onopen)===null||oe===void 0||oe.call(M),T({})},H=this.apiClient,z={onopen:I,onmessage:oe=>{ER(H,M.onmessage,oe)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(oe){},onclose:(o=M==null?void 0:M.onclose)!==null&&o!==void 0?o:function(oe){}},q=this.webSocketFactory.create(v,bR(E),z);q.connect(),await N;let V=ke(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const oe=this.apiClient.getProject(),de=this.apiClient.getLocation();oe&&de&&(V=`projects/${oe}/locations/${de}/`+V)}let Y={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ga.AUDIO]}:e.config.responseModalities=[ga.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const te=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],W=[];for(const oe of te)if(this.isCallableTool(oe)){const de=oe;W.push(await de.tool())}else W.push(oe);W.length>0&&(e.config.tools=W);const me={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Y=GA(this.apiClient,me):Y=BA(this.apiClient,me),delete Y.config,q.send(JSON.stringify(Y)),new TR(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const SR={turnComplete:!0};class TR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=rn(n.turns),e.isVertexAI()||(o=o.map(l=>Ga(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const a of o){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(xR)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},SR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:zA(e)}:n={realtimeInput:FA(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function bR(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function AR(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zv=10;function jv(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Zo(c)){l=!0;break}if(!l)return!0;const a=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Zo(t){return"callTool"in t&&typeof t.callTool=="function"}function NR(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>Zo(l)))!==null&&o!==void 0?o:!1}function e0(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,l)=>{if(Zo(o))return;const a=o;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(l)}),n}function t0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR extends Qn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!NR(n)||jv(n.config))return await this.generateContentInternal(g);const p=e0(n);if(p.length>0){const M=p.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let v,x;const E=rn(g.contents),T=(a=(l=(o=g.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:Zv;let N=0;for(;N<T&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const M=v.candidates[0].content,I=[];for(const H of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Zo(H)){const q=await H.callTool(v.functionCalls);I.push(...q)}N++,x={role:"user",parts:I},g.contents=rn(g.contents),g.contents.push(M),g.contents.push(x),t0(g.config)&&(E.push(M),E.push(x))}return t0(g.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async n=>{var o,l,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),jv(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const g=e0(n);if(g.length>0){const x=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(l=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var l;let a;const c=[];if(o!=null&&o.generatedImages)for(const g of o.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async n=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new oo(Yn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var o,l,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,l;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>Zo(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&R_(e.config.tools)){const g=(l=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&l!==void 0?l:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),I_(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,o,l;const a=new Map;for(const c of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(Zo(c)){const h=c,g=await h.tool();for(const p of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,o,l;const a=(l=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&l!==void 0?l:Zv;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,x){return mn(this,arguments,function*(){for(var E,T,N,M,I,H;h<a;){c&&(h++,c=!1);const Y=yield ve(p.processParamsMaybeAddMcpUsage(x)),te=yield ve(p.generateContentStreamInternal(Y)),W=[],me=[];try{for(var z=!0,q=(T=void 0,gn(te)),V;V=yield ve(q.next()),E=V.done,!E;z=!0){M=V.value,z=!1;const oe=M;if(yield yield ve(oe),oe.candidates&&(!((I=oe.candidates[0])===null||I===void 0)&&I.content)){me.push(oe.candidates[0].content);for(const de of(H=oe.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(h<a&&de.functionCall){if(!de.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(de.functionCall.name)){const X=yield ve(v.get(de.functionCall.name).callTool([de.functionCall]));W.push(...X)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${de.functionCall.name}`)}}}}catch(oe){T={error:oe}}finally{try{!z&&!E&&(N=q.return)&&(yield ve(N.call(q)))}finally{if(T)throw T.error}}if(W.length>0){c=!0;const oe=new dl;oe.candidates=[{content:{role:"user",parts:W}}],yield yield ve(oe);const de=[];de.push(...me),de.push({role:"user",parts:W});const X=rn(x.contents).concat(de);x.contents=X}else break}})})(this,g,e)}async generateContentInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Qv(this.apiClient,e);return h=se("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Xv(v),E=new dl;return Object.assign(E,x),E})}else{const p=Kv(this.apiClient,e);return h=se("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=$v(v),E=new dl;return Object.assign(E,x),E})}}async generateContentStreamInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Qv(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(x){return mn(this,arguments,function*(){var E,T,N,M;try{for(var I=!0,H=gn(x),z;z=yield ve(H.next()),E=z.done,!E;I=!0){M=z.value,I=!1;const q=M,V=Xv(yield ve(q.json()));V.sdkHttpResponse={headers:q.headers};const Y=new dl;Object.assign(Y,V),yield yield ve(Y)}}catch(q){T={error:q}}finally{try{!I&&!E&&(N=H.return)&&(yield ve(N.call(H)))}finally{if(T)throw T.error}}})})}else{const p=Kv(this.apiClient,e);return h=se("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(x){return mn(this,arguments,function*(){var E,T,N,M;try{for(var I=!0,H=gn(x),z;z=yield ve(H.next()),E=z.done,!E;I=!0){M=z.value,I=!1;const q=M,V=$v(yield ve(q.json()));V.sdkHttpResponse={headers:q.headers};const Y=new dl;Object.assign(Y,V),yield yield ve(Y)}}catch(q){T={error:q}}finally{try{!I&&!E&&(N=H.return)&&(yield ve(N.call(H)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=CN(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=TN(v),E=new Iv;return Object.assign(E,x),E})}else{const p=EN(this.apiClient,e);return h=se("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=SN(v),E=new Iv;return Object.assign(E,x),E})}}async generateImagesInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=PN(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=ON(v),E=new Mv;return Object.assign(E,x),E})}else{const p=UN(this.apiClient,e);return h=se("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=LN(v),E=new Mv;return Object.assign(E,x),E})}}async editImageInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=yN(this.apiClient,e);return a=se("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=vN(g),v=new bT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Pw(this.apiClient,e);return a=se("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=Lw(g),v=new AT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=gw(this.apiClient,e);return a=se("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=yw(g),v=new NT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Sw(this.apiClient,e);return a=se("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Tw(g),v=new wT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ew(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Xd(v))}else{const p=jN(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$d(v))}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uw(this.apiClient,e);return h=se("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=dw(v),E=new Dv;return Object.assign(E,x),E})}else{const p=aw(this.apiClient,e);return h=se("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=cw(v),E=new Dv;return Object.assign(E,x),E})}}async update(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=kw(this.apiClient,e);return h=se("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Xd(v))}else{const p=Dw(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$d(v))}}async delete(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=hN(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=mN(v),E=new kv;return Object.assign(E,x),E})}else{const p=fN(this.apiClient,e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=pN(v),E=new kv;return Object.assign(E,x),E})}}async countTokens(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=uN(this.apiClient,e);return h=se("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=dN(v),E=new Uv;return Object.assign(E,x),E})}else{const p=aN(this.apiClient,e);return h=se("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=cN(v),E=new Uv;return Object.assign(E,x),E})}}async computeTokens(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=tN(this.apiClient,e);return a=se("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=nN(g),v=new RT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=FN(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const x=qN(v),E=new ya;return Object.assign(E,x),E})}else{const p=VN(this.apiClient,e);return h=se("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const x=GN(v),E=new ya;return Object.assign(E,x),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RR extends Qn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;o&&"httpOptions"in o&&(a=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=_T(e);return h=se("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const p=vT(e);return h=se("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=dT(e);return a=se("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function MR(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>GR(a))),f(e,["parts"],l)}const o=d(t,["role"]);return o!=null&&f(e,["role"],o),e}function DR(t,e,n){const o={},l=d(e,["expireTime"]);n!==void 0&&l!=null&&f(n,["expireTime"],l);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=d(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=d(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],BR(t,h));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&f(n,["fieldMask"],g),o}function kR(t,e){const n={},o=d(e,["config"]);return o!=null&&f(n,["config"],DR(t,o,n)),n}function UR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const o=d(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function PR(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const o=d(t,["args"]);o!=null&&f(e,["args"],o);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function OR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function HR(t,e){const n={},o=d(t,["generationConfig"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig"],o);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],MR(bt(N)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let te=cs(M);Array.isArray(te)&&(te=te.map(W=>VR(us(W)))),f(e,["setup","tools"],te)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],qR(I));const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const z=d(t,["outputAudioTranscription"]);e!==void 0&&z!=null&&f(e,["setup","outputAudioTranscription"],z);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const V=d(t,["contextWindowCompression"]);e!==void 0&&V!=null&&f(e,["setup","contextWindowCompression"],V);const Y=d(t,["proactivity"]);if(e!==void 0&&Y!=null&&f(e,["setup","proactivity"],Y),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function BR(t,e){const n={},o=d(e,["model"]);o!=null&&f(n,["setup","model"],ke(t,o));const l=d(e,["config"]);return l!=null&&f(n,["config"],HR(l,n)),n}function GR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const o=d(t,["codeExecutionResult"]);o!=null&&f(e,["codeExecutionResult"],o);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],UR(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],PR(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],IR(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function qR(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const o=d(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],LR(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],OR(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const l=Object.keys(o).map(a=>`${n}.${a}`);e.push(...l)}else e.push(n)}return e.join(",")}function zR(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const a=o.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const a=FR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class YR extends Qn{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=kR(this.apiClient,e);a=se("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=zR(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),l.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JR(t,e){const n={},o=d(t,["force"]);return e!==void 0&&o!=null&&f(e,["_query","force"],o),n}function KR(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const o=d(t,["config"]);return o!=null&&JR(o,e),e}function QR(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function $R(t,e){const n={},o=d(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function XR(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const o=d(t,["config"]);return o!=null&&$R(o,e),e}function WR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const o=d(t,["nextPageToken"]);o!=null&&f(e,["nextPageToken"],o);const l=d(t,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZR extends Qn{constructor(e){super(),this.apiClient=e,this.list=async n=>new oo(Yn.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QR(e);return a=se("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=KR(e);l=se("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=XR(e);return a=se("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=WR(g),v=new IT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jR extends Qn{constructor(e,n=new ZR(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new oo(Yn.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Fw(e);return a=se("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Jw(e);return a=se("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,o;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Yw(e);l=se("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Zw(e);return a=se("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=jw(g),v=new MT;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=eR(e);return a=se("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=tR(g),v=new DT;return Object.assign(v,p),v})}}async importFile(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$w(e);return a=se("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Qw(g),v=new wf;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let M_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return M_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))};const e1=()=>M_();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const jd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class an extends Error{}class Rt extends an{constructor(e,n,o,l){super(`${Rt.makeMessage(e,n,o)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,o){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,o,l){if(!e||!l)return new Fa({message:o,cause:jd(n)});const a=n;return e===400?new k_(e,a,o,l):e===401?new U_(e,a,o,l):e===403?new P_(e,a,o,l):e===404?new L_(e,a,o,l):e===409?new O_(e,a,o,l):e===422?new H_(e,a,o,l):e===429?new B_(e,a,o,l):e>=500?new G_(e,a,o,l):new Rt(e,a,o,l)}}class ef extends Rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fa extends Rt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class D_ extends Fa{constructor({message:e}={}){super({message:e??"Request timed out."})}}class k_ extends Rt{}class U_ extends Rt{}class P_ extends Rt{}class L_ extends Rt{}class O_ extends Rt{}class H_ extends Rt{}class B_ extends Rt{}class G_ extends Rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t1=/^[a-z][a-z0-9+.-]*:/i,n1=t=>t1.test(t);let tf=t=>(tf=Array.isArray,tf(t));const i1=tf;let o1=i1;const n0=o1;function s1(t){if(!t)return!0;for(const e in t)return!1;return!0}function l1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const r1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new an(`${t} must be an integer`);if(e<0)throw new an(`${t} must be a positive integer`);return e},a1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ko="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const d1=()=>{var t,e,n,o,l;const a=c1();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":o0(Deno.build.os),"X-Stainless-Arch":i0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":o0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":i0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const c=f1();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function f1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const o=n.exec(navigator.userAgent);if(o){const l=o[1]||0,a=o[2]||0,c=o[3]||0;return{browser:e,version:`${l}.${a}.${c}`}}}return null}const i0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",o0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let la;const h1=()=>la??(la=d1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function q_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function m1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return q_({start(){},async pull(n){const{done:o,value:l}=await e.next();o?n.close():n.enqueue(l)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function V_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function g1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const o=t.getReader(),l=o.cancel();o.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rd(t,e,n){return F_(),new File(t,e??"unknown_file",n)}function v1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const _1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",x1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&z_(t),E1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function C1(t,e,n){if(F_(),t=await t,x1(t))return t instanceof File?t:Rd([await t.arrayBuffer()],t.name);if(E1(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Rd(await nf(l),e,n)}const o=await nf(t);if(e||(e=v1(t)),!(n!=null&&n.type)){const l=o.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof l=="string"&&(n=Object.assign(Object.assign({},n),{type:l}))}return Rd(o,e,n)}async function nf(t){var e,n,o,l,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(z_(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(_1(t))try{for(var h=!0,g=gn(t),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const v=l;c.push(...await nf(v))}}catch(v){n={error:v}}finally{try{!h&&!e&&(o=g.return)&&await o.call(g)}finally{if(n)throw n.error}}else{const v=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${S1(t)}`)}return c}function S1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y_{constructor(e){this._client=e}}Y_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const s0=Object.freeze(Object.create(null)),T1=(t=J_)=>(function(n,...o){if(n.length===1)return n[0];let l=!1;const a=[],c=n.reduce((v,x,E)=>{var T,N,M;/[?#]/.test(x)&&(l=!0);const I=o[E];let H=(l?encodeURIComponent:t)(""+I);return E!==o.length&&(I==null||typeof I=="object"&&I.toString===((M=Object.getPrototypeOf((N=Object.getPrototypeOf((T=I.hasOwnProperty)!==null&&T!==void 0?T:s0))!==null&&N!==void 0?N:s0))===null||M===void 0?void 0:M.toString))&&(H=I+"",a.push({start:v.length+x.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+x+(E===o.length?"":H)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((v,x)=>v.start-x.start),a.length>0){let v=0;const x=a.reduce((E,T)=>{const N=" ".repeat(T.start-v),M="^".repeat(T.length);return v=T.start+T.length,E+N+M},"");throw new an(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${x}`)}return c}),ra=T1(J_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class K_ extends Y_{create(e,n){var o;const{api_version:l=this._client.apiVersion}=e,a=_a(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new an("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new an("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ra`/${l}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){const{api_version:l=this._client.apiVersion}=n??{};return this._client.delete(ra`/${l}/interactions/${e}`,o)}cancel(e,n={},o){const{api_version:l=this._client.apiVersion}=n??{};return this._client.post(ra`/${l}/interactions/${e}/cancel`,o)}get(e,n={},o){var l;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=_a(a,["api_version"]);return this._client.get(ra`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(l=n==null?void 0:n.stream)!==null&&l!==void 0?l:!1}))}}K_._key=Object.freeze(["interactions"]);class Q_ extends K_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b1(t){let e=0;for(const l of t)e+=l.length;const n=new Uint8Array(e);let o=0;for(const l of t)n.set(l,o),o+=l.length;return n}let aa;function Pf(t){let e;return(aa??(e=new globalThis.TextEncoder,aa=e.encode.bind(e)))(t)}let ua;function l0(t){let e;return(ua??(e=new globalThis.TextDecoder,ua=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class za{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pf(e):e;this.buffer=b1([this.buffer,n]);const o=[];let l;for(;(l=A1(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){o.push(l0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,c=l0(this.buffer.subarray(0,a));o.push(c),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}za.NEWLINE_CHARS=new Set([`
`,"\r"]);za.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function A1(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function N1(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xa={off:0,error:200,warn:300,info:400,debug:500},r0=(t,e,n)=>{if(t){if(l1(xa,t))return t;Nt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(xa))}`)}};function yl(){}function ca(t,e,n){return!e||xa[t]>xa[n]?yl:e[t].bind(e)}const w1={error:yl,warn:yl,info:yl,debug:yl};let a0=new WeakMap;function Nt(t){var e;const n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return w1;const l=a0.get(n);if(l&&l[0]===o)return l[1];const a={error:ca("error",n,o),warn:ca("warn",n,o),info:ca("info",n,o),debug:ca("debug",n,o)};return a0.set(n,[o,a]),a}const Xi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $o{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let l=!1;const a=o?Nt(o):console;function c(){return mn(this,arguments,function*(){var g,p,v,x;if(l)throw new an("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=gn(R1(e,n)),M;M=yield ve(N.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;if(!E)if(I.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield ve(JSON.parse(I.data))}catch(H){throw a.error("Could not parse message into JSON:",I.data),a.error("From chunk:",I.raw),H}}}catch(I){p={error:I}}finally{try{!T&&!g&&(v=N.return)&&(yield ve(v.call(N)))}finally{if(p)throw p.error}}E=!0}catch(I){if(Zd(I))return yield ve(void 0);throw I}finally{E||n.abort()}})}return new $o(c,n,o)}static fromReadableStream(e,n,o){let l=!1;function a(){return mn(this,arguments,function*(){var g,p,v,x;const E=new za,T=V_(e);try{for(var N=!0,M=gn(T),I;I=yield ve(M.next()),g=I.done,!g;N=!0){x=I.value,N=!1;const H=x;for(const z of E.decode(H))yield yield ve(z)}}catch(H){p={error:H}}finally{try{!N&&!g&&(v=M.return)&&(yield ve(v.call(M)))}finally{if(p)throw p.error}}for(const H of E.flush())yield yield ve(H)})}function c(){return mn(this,arguments,function*(){var g,p,v,x;if(l)throw new an("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=gn(a()),M;M=yield ve(N.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;E||I&&(yield yield ve(JSON.parse(I)))}}catch(I){p={error:I}}finally{try{!T&&!g&&(v=N.return)&&(yield ve(v.call(N)))}finally{if(p)throw p.error}}E=!0}catch(I){if(Zd(I))return yield ve(void 0);throw I}finally{E||n.abort()}})}return new $o(c,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],o=this.iterator(),l=a=>({next:()=>{if(a.length===0){const c=o.next();e.push(c),n.push(c)}return a.shift()}});return[new $o(()=>l(e),this.controller,this.client),new $o(()=>l(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return q_({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{const{value:l,done:a}=await n.next();if(a)return o.close();const c=Pf(JSON.stringify(l)+`
`);o.enqueue(c)}catch(l){o.error(l)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}}function R1(t,e){return mn(this,arguments,function*(){var o,l,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new an("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new an("Attempted to iterate over a response with no body");const h=new M1,g=new za,p=V_(t.body);try{for(var v=!0,x=gn(I1(p)),E;E=yield ve(x.next()),o=E.done,!o;v=!0){c=E.value,v=!1;const T=c;for(const N of g.decode(T)){const M=h.decode(N);M&&(yield yield ve(M))}}}catch(T){l={error:T}}finally{try{!v&&!o&&(a=x.return)&&(yield ve(a.call(x)))}finally{if(l)throw l.error}}for(const T of g.flush()){const N=h.decode(T);N&&(yield yield ve(N))}})}function I1(t){return mn(this,arguments,function*(){var n,o,l,a;let c=new Uint8Array;try{for(var h=!0,g=gn(t),p;p=yield ve(g.next()),n=p.done,!n;h=!0){a=p.value,h=!1;const v=a;if(v==null)continue;const x=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Pf(v):v;let E=new Uint8Array(c.length+x.length);E.set(c),E.set(x,c.length),c=E;let T;for(;(T=N1(c))!==-1;)yield yield ve(c.slice(0,T)),c=c.slice(T)}}catch(v){o={error:v}}finally{try{!h&&!n&&(l=g.return)&&(yield ve(l.call(g)))}finally{if(o)throw o.error}}c.length>0&&(yield yield ve(c))})}class M1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,l]=D1(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}function D1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function k1(t,e){const{response:n,requestLogID:o,retryOfRequestLogID:l,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return Nt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):$o.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return Nt(t).debug(`[${o}] response parsed`,Xi({retryOfRequestLogID:l,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends Promise{constructor(e,n,o=k1){super(l=>{l(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Lf(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $_=Symbol("brand.privateNullableHeaders");function*U1(t){if(!t)return;if($_ in t){const{values:o,nulls:l}=t;yield*o.entries();for(const a of l)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():n0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){const l=o[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const a=n0(o[1])?o[1]:[o[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[l,null]),yield[l,h])}}const fl=t=>{const e=new Headers,n=new Set;for(const o of t){const l=new Set;for(const[a,c]of U1(o)){const h=a.toLowerCase();l.has(h)||(e.delete(a),l.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[$_]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Id=t=>{var e,n,o,l,a,c;if(typeof globalThis.process<"u")return(o=(n=(e=sT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||a===void 0?void 0:a.call(l,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var X_;class Ya{constructor(e){var n,o,l,a,c,h,g,{baseURL:p=Id("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Id("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:x="v1beta"}=e,E=_a(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:v,apiVersion:x},E),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(o=T.timeout)!==null&&o!==void 0?o:Ya.DEFAULT_TIMEOUT,this.logger=(l=T.logger)!==null&&l!==void 0?l:console;const N="warn";this.logLevel=N,this.logLevel=(c=(a=r0(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:r0(Id("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:p1(),this.encoder=y1,this._options=T,this.apiKey=v,this.apiVersion=x,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=fl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return fl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return fl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,o])=>typeof o<"u").map(([n,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(n)}=`;throw new an(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ko}`}defaultIdempotencyKey(){return`stainless-node-retry-${e1()}`}makeStatusError(e,n,o,l){return Rt.generate(e,n,o,l)}buildURL(e,n,o){const l=!this.baseURLOverridden()&&o||this.baseURL,a=n1(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return s1(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:o}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,o){return this.request(Promise.resolve(o).then(l=>Object.assign({method:e,path:n},l)))}request(e,n=null){return new Lf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,o){var l,a,c;const h=await e,g=(l=h.maxRetries)!==null&&l!==void 0?l:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:p,url:v,timeout:x}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(p,{url:v,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=o===void 0?"":`, retryOf: ${o}`,N=Date.now();if(Nt(this).debug(`[${E}] sending request`,Xi({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:p.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new ef;const M=new AbortController,I=await this.fetchWithTimeout(v,p,x,M).catch(jd),H=Date.now();if(I instanceof globalThis.Error){const q=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new ef;const V=Zd(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(n)return Nt(this).info(`[${E}] connection ${V?"timed out":"failed"} - ${q}`),Nt(this).debug(`[${E}] connection ${V?"timed out":"failed"} (${q})`,Xi({retryOfRequestLogID:o,url:v,durationMs:H-N,message:I.message})),this.retryRequest(h,n,o??E);throw Nt(this).info(`[${E}] connection ${V?"timed out":"failed"} - error; no more retries left`),Nt(this).debug(`[${E}] connection ${V?"timed out":"failed"} (error; no more retries left)`,Xi({retryOfRequestLogID:o,url:v,durationMs:H-N,message:I.message})),V?new D_:new Fa({cause:I})}const z=`[${E}${T}] ${p.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${H-N}ms`;if(!I.ok){const q=await this.shouldRetry(I);if(n&&q){const oe=`retrying, ${n} attempts remaining`;return await g1(I.body),Nt(this).info(`${z} - ${oe}`),Nt(this).debug(`[${E}] response error (${oe})`,Xi({retryOfRequestLogID:o,url:I.url,status:I.status,headers:I.headers,durationMs:H-N})),this.retryRequest(h,n,o??E,I.headers)}const V=q?"error; no more retries left":"error; not retryable";Nt(this).info(`${z} - ${V}`);const Y=await I.text().catch(oe=>jd(oe).message),te=a1(Y),W=te?void 0:Y;throw Nt(this).debug(`[${E}] response error (${V})`,Xi({retryOfRequestLogID:o,url:I.url,status:I.status,headers:I.headers,message:W,durationMs:Date.now()-N})),this.makeStatusError(I.status,te,W,I.headers)}return Nt(this).info(z),Nt(this).debug(`[${E}] response start`,Xi({retryOfRequestLogID:o,url:I.url,status:I.status,headers:I.headers,durationMs:H-N})),{response:I,options:h,controller:M,requestLogID:E,retryOfRequestLogID:o,startTime:N}}async fetchWithTimeout(e,n,o,l){const a=n||{},{signal:c,method:h}=a,g=_a(a,["signal","method"]);c&&c.addEventListener("abort",()=>l.abort());const p=setTimeout(()=>l.abort(),o),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,x=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(x.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,o,l){var a;let c;const h=l==null?void 0:l.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=l==null?void 0:l.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,p)}return await u1(c),this.makeRequest(e,n-1,o)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var o,l,a;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,x=this.buildURL(g,p,v);"timeout"in c&&r1("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:E,body:T}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:o,retryCount:l}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=fl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),h1()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=fl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:m1(e)}:this.encoder({body:e,headers:o})}}Ya.DEFAULT_TIMEOUT=6e4;class gt extends Ya{constructor(){super(...arguments),this.interactions=new Q_(this)}}X_=gt;gt.GeminiNextGenAPIClient=X_;gt.GeminiNextGenAPIClientError=an;gt.APIError=Rt;gt.APIConnectionError=Fa;gt.APIConnectionTimeoutError=D_;gt.APIUserAbortError=ef;gt.NotFoundError=L_;gt.ConflictError=O_;gt.RateLimitError=B_;gt.BadRequestError=k_;gt.AuthenticationError=U_;gt.InternalServerError=G_;gt.PermissionDeniedError=P_;gt.UnprocessableEntityError=H_;gt.toFile=C1;gt.Interactions=Q_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P1(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function L1(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function O1(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function H1(t,e){const n={},o=d(t,["sdkHttpResponse"]);return o!=null&&f(n,["sdkHttpResponse"],o),n}function B1(t,e,n){const o={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=d(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&f(e,["displayName"],l),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function G1(t,e,n){const o={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],u0(T))}else if(l==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],u0(T))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),o}function q1(t,e){const n={},o=d(t,["baseModel"]);o!=null&&f(n,["baseModel"],o);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&Z1(a);const c=d(t,["config"]);return c!=null&&B1(c,n),n}function V1(t,e){const n={},o=d(t,["baseModel"]);o!=null&&f(n,["baseModel"],o);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&j1(a,n,e);const c=d(t,["config"]);return c!=null&&G1(c,n,e),n}function F1(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function z1(t,e){const n={},o=d(t,["name"]);return o!=null&&f(n,["_url","name"],o),n}function Y1(t,e,n){const o={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function J1(t,e,n){const o={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),o}function K1(t,e){const n={},o=d(t,["config"]);return o!=null&&Y1(o,n),n}function Q1(t,e){const n={},o=d(t,["config"]);return o!=null&&J1(o,n),n}function $1(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>W_(h))),f(n,["tuningJobs"],c)}return n}function X1(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>of(h))),f(n,["tuningJobs"],c)}return n}function W1(t,e){const n={},o=d(t,["name"]);o!=null&&f(n,["model"],o);const l=d(t,["name"]);return l!=null&&f(n,["endpoint"],l),n}function Z1(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=d(t,["examples"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>a)),f(n,["examples","examples"],l)}return n}function j1(t,e,n){const o={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function W_(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],h_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["description"]);v!=null&&f(n,["description"],v);const x=d(t,["baseModel"]);x!=null&&f(n,["baseModel"],x);const E=d(t,["_self"]);return E!=null&&f(n,["tunedModel"],W1(E)),n}function of(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],h_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["error"]);v!=null&&f(n,["error"],v);const x=d(t,["description"]);x!=null&&f(n,["description"],x);const E=d(t,["baseModel"]);E!=null&&f(n,["baseModel"],E);const T=d(t,["tunedModel"]);T!=null&&f(n,["tunedModel"],T);const N=d(t,["preTunedModel"]);N!=null&&f(n,["preTunedModel"],N);const M=d(t,["supervisedTuningSpec"]);M!=null&&f(n,["supervisedTuningSpec"],M);const I=d(t,["preferenceOptimizationSpec"]);I!=null&&f(n,["preferenceOptimizationSpec"],I);const H=d(t,["tuningDataStats"]);H!=null&&f(n,["tuningDataStats"],H);const z=d(t,["encryptionSpec"]);z!=null&&f(n,["encryptionSpec"],z);const q=d(t,["partnerModelTuningSpec"]);q!=null&&f(n,["partnerModelTuningSpec"],q);const V=d(t,["customBaseModel"]);V!=null&&f(n,["customBaseModel"],V);const Y=d(t,["experiment"]);Y!=null&&f(n,["experiment"],Y);const te=d(t,["labels"]);te!=null&&f(n,["labels"],te);const W=d(t,["outputUri"]);W!=null&&f(n,["outputUri"],W);const me=d(t,["pipelineJob"]);me!=null&&f(n,["pipelineJob"],me);const oe=d(t,["serviceAccount"]);oe!=null&&f(n,["serviceAccount"],oe);const de=d(t,["tunedModelDisplayName"]);de!=null&&f(n,["tunedModelDisplayName"],de);const X=d(t,["veoTuningSpec"]);return X!=null&&f(n,["veoTuningSpec"],X),n}function eI(t,e){const n={},o=d(t,["sdkHttpResponse"]);o!=null&&f(n,["sdkHttpResponse"],o);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(t,["done"]);c!=null&&f(n,["done"],c);const h=d(t,["error"]);return h!=null&&f(n,["error"],h),n}function u0(t,e){const n={},o=d(t,["gcsUri"]);o!=null&&f(n,["validationDatasetUri"],o);const l=d(t,["vertexDatasetResource"]);return l!=null&&f(n,["validationDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tI extends Qn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new oo(Yn.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:zd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=z1(e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>of(v))}else{const p=F1(e);return h=se("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>W_(v))}}async listInternal(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Q1(e);return h=se("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=X1(v),E=new Pv;return Object.assign(E,x),E})}else{const p=K1(e);return h=se("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=$1(v),E=new Pv;return Object.assign(E,x),E})}}async cancel(e){var n,o,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=L1(e);return h=se("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=H1(v),E=new Lv;return Object.assign(E,x),E})}else{const p=P1(e);return h=se("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=O1(v),E=new Lv;return Object.assign(E,x),E})}}async tuneInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=V1(e,e);return a=se("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>of(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=q1(e);return a=se("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>eI(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nI{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const iI=1024*1024*8,oI=3,sI=1e3,lI=2,Ea="x-goog-upload-status";async function rI(t,e,n){var o;const l=await Z_(t,e,n),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[Ea])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function aI(t,e,n){var o;const l=await Z_(t,e,n),a=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[Ea])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=r_(a),h=new Rf;return Object.assign(h,c),h}async function Z_(t,e,n){var o,l;let a=0,c=0,h=new Jd(new Response),g="upload";for(a=t.size;c<a;){const p=Math.min(iI,a-c),v=t.slice(c,c+p);c+p>=a&&(g+=", finalize");let x=0,E=sI;for(;x<oI&&(h=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Ea]));)x++,await cI(E),E=E*lI;if(c+=p,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[Ea])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function uI(t){return{size:t.size,type:t.type}}function cI(t){return new Promise(e=>setTimeout(e,t))}class dI{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rI(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aI(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fI{create(e,n,o){return new hI(e,n,o)}}class hI{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c0="x-goog-api-key";class pI{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(c0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(c0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mI="gl-node/";class j_{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=uT(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new pI(this.apiKey);this.apiClient=new uR({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:mI+"web",uploader:new dI,downloader:new nI}),this.models=new wR(this.apiClient),this.live=new CR(this.apiClient,l,new fI),this.batches=new Hb(this.apiClient),this.chats=new _A(this.models,this.apiClient),this.caches=new gA(this.apiClient),this.files=new RA(this.apiClient),this.operations=new RR(this.apiClient),this.authTokens=new YR(this.apiClient),this.tunings=new tI(this.apiClient),this.fileSearchStores=new jR(this.apiClient)}}const gI=({activePoolId:t,poolSettings:e,globalSettings:n,onUpdatePoolSettings:o,onUpdateActivePool:l,onUpdateGlobalSettings:a,onResetGrid:c,onDeletePool:h,onGenerateNumbers:g,squares:p,pools:v,onSwitchPool:x,onCreatePool:E,fullState:T,onImportState:N})=>{const[M,I]=le.useState(""),[H,z]=le.useState(!1),[q,V]=le.useState(!1),[Y,te]=le.useState({name:"",teamA:"",teamB:"",costPerBox:10}),W=(v||[]).find($=>$.id===t);le.useEffect(()=>{W&&(I(W.name),te($=>({...$,teamA:W.settings.teamA,teamB:W.settings.teamB,costPerBox:W.settings.costPerBox,name:`${W.name} Copy`})))},[t,W]);const me=$=>{$.preventDefault(),Y.name.trim()&&(E(Y.name,{teamA:Y.teamA,teamB:Y.teamB,costPerBox:Y.costPerBox}),V(!1))},oe=async()=>{z(!0);try{const ne=await new j_({apiKey:"PLACEHOLDER_API_KEY"}).models.generateContent({model:"gemini-3-flash-preview",contents:`Generate 3 catchy, professional one-liner slogans for a Super Bowl Squares contest that benefits the charity "${(n==null?void 0:n.charityName)||"Charity"}". Make them feel exciting and community-focused. Format as a bulleted list.`});alert(ne.text)}catch{alert("Failed to generate slogan.")}finally{z(!1)}},de=()=>{const $=JSON.stringify(T,null,2),ne="data:application/json;charset=utf-8,"+encodeURIComponent($),ye=document.createElement("a");ye.setAttribute("href",ne),ye.setAttribute("download",`squares_backup_${new Date().toISOString().split("T")[0]}.json`),ye.click()},X=($,ne,ye)=>{var ee,b;const U=$.target.value.replace(/[^0-9]/g,""),J=U===""?NaN:parseInt(U,10),O=ne==="row"?"rowNumbers":"colNumbers",ie=[...(e==null?void 0:e[O])||Array(10).fill(null)];if(ie[ye]=isNaN(J)?null:J,o({[O]:ie}),U!==""&&ye<9){const w=(ee=$.target.parentElement)==null?void 0:ee.querySelectorAll("input");(b=w==null?void 0:w[ye+1])==null||b.focus()}},ae=$=>{o({payouts:{...e.payouts,...$}})};return _.jsxs("div",{className:"space-y-6 md:space-y-12 max-w-4xl mx-auto pb-12",children:[_.jsx("section",{className:"bg-indigo-900 text-white p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-2xl overflow-hidden",children:_.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 relative z-10",children:[_.jsx("div",{className:"flex items-center gap-4 text-center md:text-left",children:_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight",children:"Admin Control Panel"}),_.jsx("p",{className:"text-[10px] text-indigo-300 font-bold uppercase tracking-widest",children:"Global & Contest Settings"})]})}),_.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[_.jsx("button",{onClick:de,className:"flex-1 md:flex-none bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-black uppercase text-[9px] tracking-widest border border-white/10 transition-all",children:"Backup JSON"}),_.jsx("button",{onClick:oe,disabled:H,className:"flex-1 md:flex-none bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-black uppercase text-[9px] tracking-widest border border-white/10 transition-all",children:"AI Slogan"})]})]})}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm space-y-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Contest Management"}),!q&&_.jsxs("button",{onClick:()=>V(!0),className:"bg-green-600 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg hover:bg-green-700 transition-all",children:[_.jsx("i",{className:"fas fa-plus mr-2"})," Create New Contest"]})]}),q&&_.jsxs("form",{onSubmit:me,className:"bg-indigo-50/50 p-6 md:p-8 rounded-[2rem] border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[_.jsxs("div",{className:"md:col-span-2",children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Contest Name"}),_.jsx("input",{required:!0,value:Y.name,onChange:$=>te({...Y,name:$.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none",placeholder:"e.g. AFC CHAMPIONSHIP"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Team A (Rows)"}),_.jsx("input",{required:!0,value:Y.teamA,onChange:$=>te({...Y,teamA:$.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-bold text-gray-700 text-sm outline-none",placeholder:"Team A"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Team B (Columns)"}),_.jsx("input",{required:!0,value:Y.teamB,onChange:$=>te({...Y,teamB:$.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-bold text-gray-700 text-sm outline-none",placeholder:"Team B"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Cost Per Square ($)"}),_.jsx("input",{required:!0,type:"number",min:"1",value:Y.costPerBox,onChange:$=>te({...Y,costPerBox:parseInt($.target.value)}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-black text-indigo-900 text-sm outline-none"})]})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx("button",{type:"submit",className:"flex-1 bg-indigo-900 text-white py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl",children:"Launch New Contest"}),_.jsx("button",{type:"button",onClick:()=>V(!1),className:"px-8 bg-white text-gray-400 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest border border-gray-100",children:"Cancel"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-2 px-1",children:"All Active Contests"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map($=>_.jsxs("div",{className:`p-6 rounded-[2rem] border-2 transition-all flex justify-between items-center ${$.id===t?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-indigo-50 hover:border-indigo-100"}`,children:[_.jsxs("div",{children:[_.jsx("h4",{className:"font-black uppercase text-xs tracking-tight",children:$.name}),_.jsxs("p",{className:`text-[8px] font-bold uppercase mt-1 ${$.id===t?"text-indigo-300":"text-gray-400"}`,children:[$.settings.teamA," vs ",$.settings.teamB,"  $",$.settings.costPerBox,"/box"]})]}),_.jsx("div",{className:"flex gap-2",children:$.id!==t?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>x($.id),className:"bg-indigo-50 text-indigo-600 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-white transition-all",children:_.jsx("i",{className:"fas fa-exchange-alt text-[10px]"})}),_.jsx("button",{onClick:()=>{window.confirm(`Delete ${$.name}?`)&&h($.id)},className:"bg-red-50 text-red-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-white transition-all",children:_.jsx("i",{className:"fas fa-trash-alt text-[10px]"})})]}):_.jsx("div",{className:"bg-white/20 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest",children:"Active"})})]},$.id))})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm space-y-8",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Global Organization Settings"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Organization / Charity Name"}),_.jsx("input",{value:(n==null?void 0:n.charityName)||"",onChange:$=>a({charityName:$.target.value}),className:"w-full px-5 py-4 bg-indigo-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none transition-all",placeholder:"e.g. St Bernard KofC 14269"}),_.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase mt-2 px-1 italic",children:"This title appears as the main header of the application."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Admin Access Password"}),_.jsx("input",{type:"text",value:(n==null?void 0:n.adminPassword)||"",onChange:$=>a({adminPassword:$.target.value}),className:"w-full px-5 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none transition-all",placeholder:"admin"}),_.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase mt-2 px-1 italic",children:"Password required to unlock this Admin & Financials tab."})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight mb-8",children:"Payout Configuration"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-3 block",children:"Payout Mode"}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsx("button",{onClick:()=>ae({mode:"standard"}),className:`py-4 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${e.payouts.mode==="standard"?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-gray-100 text-gray-400"}`,children:"Standard Quarters"}),_.jsx("button",{onClick:()=>ae({mode:"scoreChange"}),className:`py-4 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${e.payouts.mode==="scoreChange"?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-gray-100 text-gray-400"}`,children:"Score Change"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-3 block",children:"Charity Donation %"}),_.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[_.jsx("input",{type:"range",min:"0",max:"100",value:e.payouts.charityPercent,onChange:$=>ae({charityPercent:parseInt($.target.value)}),className:"flex-grow accent-indigo-900"}),_.jsxs("span",{className:"font-black text-indigo-900 w-12 text-right text-xl",children:[e.payouts.charityPercent,"%"]})]}),_.jsxs("p",{className:"text-[8px] font-black text-indigo-400 uppercase text-center",children:["Remaining ",100-e.payouts.charityPercent,"% to Players"]})]})]})]}),e.payouts.mode==="standard"?_.jsxs("div",{className:"p-6 bg-indigo-50 rounded-[2rem]",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest mb-4",children:"Quarterly Splits (%)"}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(e.payouts.standardSplits).map(([$,ne])=>_.jsxs("div",{children:[_.jsx("label",{className:"text-[8px] font-black text-indigo-300 uppercase block mb-1",children:$.toUpperCase()}),_.jsx("input",{type:"number",value:ne,onChange:ye=>{const U={...e.payouts.standardSplits,[$]:parseInt(ye.target.value)||0};ae({standardSplits:U})},className:"w-full p-3 bg-white border border-indigo-100 rounded-xl font-black text-indigo-900 text-sm focus:border-indigo-500 outline-none"})]},$))})]}):_.jsxs("div",{className:"p-6 bg-green-50 rounded-[2rem] flex flex-col md:flex-row items-center justify-between gap-4 border border-green-100",children:[_.jsxs("div",{className:"flex-grow",children:[_.jsx("h4",{className:"font-black text-green-900 uppercase text-xs",children:"Score Change Multiplier"}),_.jsxs("p",{className:"text-[10px] text-green-600 font-bold uppercase mt-1",children:["Every unique score pays Entry Fee x ",e.payouts.scoreChangeMultiplier]})]}),_.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-green-100",children:[_.jsx("button",{onClick:()=>ae({scoreChangeMultiplier:Math.max(1,e.payouts.scoreChangeMultiplier-1)}),className:"w-12 h-12 bg-gray-50 hover:bg-green-500 hover:text-white rounded-xl font-black transition-all",children:"-"}),_.jsx("div",{className:"flex flex-col items-center min-w-[60px]",children:_.jsxs("span",{className:"font-black text-green-900 text-2xl leading-none",children:[e.payouts.scoreChangeMultiplier,"x"]})}),_.jsx("button",{onClick:()=>ae({scoreChangeMultiplier:e.payouts.scoreChangeMultiplier+1}),className:"w-12 h-12 bg-gray-50 hover:bg-green-500 hover:text-white rounded-xl font-black transition-all",children:"+"})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsx("h3",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-8",children:"Global Payment Methods"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"PayPal Username"}),_.jsx("input",{value:(n==null?void 0:n.paypalAccount)||"",onChange:$=>a({paypalAccount:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Venmo Username"}),_.jsx("input",{value:(n==null?void 0:n.venmoAccount)||"",onChange:$=>a({venmoAccount:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Zelle ID / Phone / Email"}),_.jsx("input",{value:(n==null?void 0:n.zelleAccount)||"",onChange:$=>a({zelleAccount:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Custom Payment Instructions"}),_.jsx("input",{value:(n==null?void 0:n.otherPaymentInfo)||"",onChange:$=>a({otherPaymentInfo:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsxs("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight mb-8",children:["Active Contest: ",W==null?void 0:W.name]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block",children:"Rename Current Pool"}),_.jsx("input",{value:M,onChange:$=>I($.target.value),onBlur:()=>l({name:M}),className:"w-full px-5 py-3 bg-indigo-50 border-none rounded-xl font-black text-indigo-900"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block",children:"Cost Per Box ($)"}),_.jsx("input",{type:"number",value:(e==null?void 0:e.costPerBox)||0,onChange:$=>o({costPerBox:Number($.target.value)}),className:"w-full px-5 py-3 bg-gray-50 border-none rounded-xl font-black"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block",children:"Team A Label"}),_.jsx("input",{value:(e==null?void 0:e.teamA)||"",onChange:$=>o({teamA:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-none rounded-xl font-bold"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block",children:"Team B Label"}),_.jsx("input",{value:(e==null?void 0:e.teamB)||"",onChange:$=>o({teamB:$.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-none rounded-xl font-bold"})]})]})]}),_.jsxs("div",{className:"space-y-6 pt-6 border-t border-gray-100",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:"Score Assignments"}),_.jsx("button",{onClick:g,className:"bg-indigo-900 text-white px-4 py-2 rounded-lg text-[9px] font-black uppercase",children:"Shuffle"})]}),_.jsx(d0,{title:(e==null?void 0:e.teamA)||"Team A",type:"row",values:e==null?void 0:e.rowNumbers,onChange:X}),_.jsx(d0,{title:(e==null?void 0:e.teamB)||"Team B",type:"col",values:e==null?void 0:e.colNumbers,onChange:X})]})]}),_.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:_.jsx("button",{onClick:c,className:"flex-1 py-4 text-red-500 font-black uppercase tracking-widest text-[10px] hover:bg-red-50 rounded-2xl transition-all border-2 border-dashed border-red-100",children:"Clear Active Grid Data"})})]})},d0=({title:t,type:e,values:n,onChange:o})=>_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest",children:[t," Numbers"]}),_.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 scrollbar-hide",children:Array.from({length:10}).map((l,a)=>_.jsx("input",{maxLength:1,value:(n||[])[a]??"",onChange:c=>o(c,e,a),className:"w-9 h-9 md:w-11 md:h-11 flex-shrink-0 text-center bg-gray-50 border border-gray-100 rounded-lg focus:border-indigo-500 font-black text-indigo-900 text-sm"},a))})]}),yI=({squares:t,participants:e,settings:n,onUpdateSquare:o,onUpdateParticipant:l,onApplyPayment:a})=>{const[c,h]=le.useState(""),[g,p]=le.useState(null),[v,x]=le.useState(null),[E,T]=le.useState(null),[N,M]=le.useState(""),[I,H]=le.useState("Cash"),[z,q]=le.useState(""),V=n.costPerBox||0,Y=le.useMemo(()=>e.map(X=>{const ae=t.filter(U=>U.participantId===X.id),$=ae.reduce((U,J)=>U+J.paidAmount,0),ne=ae.length*V,ye=Array.from(new Set(ae.map(U=>U.paymentMethod).filter(Boolean)));return{...X,boxCount:ae.length,totalPaid:$,totalOwed:ne,squareIds:ae.map(U=>U.id),amountRemaining:ne-$,paymentMethods:ye.length>0?ye:["None"]}}).sort((X,ae)=>ae.boxCount-X.boxCount),[t,e,V]),te=le.useMemo(()=>{const X=t.filter($=>$.assigned).length*V,ae=t.reduce(($,ne)=>$+ne.paidAmount,0);return{totalDue:X,totalCollected:ae,outstanding:Math.max(0,X-ae),percentCollected:X>0?ae/X*100:0}},[t,V]),W=Y.filter(X=>X.name.toLowerCase().includes(c.toLowerCase())||X.alias.toLowerCase().includes(c.toLowerCase())||X.email.toLowerCase().includes(c.toLowerCase())),me=X=>{const ae=Math.max(0,X.totalOwed-X.totalPaid);T(X),M(ae>0?ae.toString():""),H("Cash"),q("")},oe=()=>{T(null),M(""),q("")},de=X=>{if(X.preventDefault(),!E)return;const ae=parseFloat(N.replace(/[$,\s]/g,""));!isNaN(ae)&&ae>0?(a(E.id,ae,I,z),oe()):alert("Please enter a valid amount greater than 0.")};return _.jsxs("div",{className:"space-y-10 animate-in fade-in duration-500",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[_.jsxs("div",{className:"bg-indigo-900 p-6 rounded-3xl text-white shadow-xl relative overflow-hidden group",children:[_.jsx("div",{className:"absolute -right-4 -bottom-4 opacity-10 group-hover:scale-125 transition-transform duration-500",children:_.jsx("i",{className:"fas fa-hand-holding-heart text-9xl"})}),_.jsx("p",{className:"text-indigo-300 text-xs font-black uppercase tracking-widest mb-2",children:"Goal Pledged"}),_.jsxs("p",{className:"text-4xl font-black",children:["$",te.totalDue]})]}),_.jsxs("div",{className:"bg-white border-2 border-green-500/20 p-6 rounded-3xl shadow-lg relative overflow-hidden group",children:[_.jsx("div",{className:"absolute -right-4 -bottom-4 text-green-500/10 group-hover:scale-125 transition-transform duration-500",children:_.jsx("i",{className:"fas fa-check-double text-9xl"})}),_.jsx("p",{className:"text-green-600 text-xs font-black uppercase tracking-widest mb-2",children:"Collected"}),_.jsxs("p",{className:"text-4xl font-black text-gray-900",children:["$",te.totalCollected]})]}),_.jsxs("div",{className:"bg-white border-2 border-orange-500/20 p-6 rounded-3xl shadow-lg relative overflow-hidden group",children:[_.jsx("div",{className:"absolute -right-4 -bottom-4 text-orange-500/10 group-hover:scale-125 transition-transform duration-500",children:_.jsx("i",{className:"fas fa-hourglass-half text-9xl"})}),_.jsx("p",{className:"text-orange-600 text-xs font-black uppercase tracking-widest mb-2",children:"Waiting"}),_.jsxs("p",{className:"text-4xl font-black text-gray-900",children:["$",te.outstanding]})]}),_.jsxs("div",{className:"bg-white border-2 border-indigo-500/10 p-6 rounded-3xl shadow-lg flex flex-col justify-center items-center",children:[_.jsxs("div",{className:"relative w-24 h-24",children:[_.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[_.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",className:"text-gray-100"}),_.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"transparent",strokeDasharray:251,strokeDashoffset:251-251*te.percentCollected/100,className:"text-indigo-600 transition-all duration-1000"})]}),_.jsxs("span",{className:"absolute inset-0 flex items-center justify-center font-black text-indigo-900",children:[Math.round(te.percentCollected),"%"]})]}),_.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mt-2",children:"Funds Collected"})]})]}),_.jsxs("div",{className:"bg-white border border-gray-100 rounded-3xl overflow-hidden shadow-2xl",children:[_.jsxs("div",{className:"p-8 border-b bg-gray-50/50 flex flex-col md:flex-row justify-between items-center gap-6",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-black text-gray-900 uppercase tracking-tight",children:"Participant Roster"}),_.jsx("p",{className:"text-sm text-gray-500",children:"Track entries and payment history"})]}),_.jsxs("div",{className:"relative w-full md:w-80 group",children:[_.jsx("i",{className:"fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-500 transition-colors"}),_.jsx("input",{type:"text",placeholder:"Search by name, email or alias...",value:c,onChange:X=>h(X.target.value),className:"w-full pl-12 pr-6 py-3 bg-white border-2 border-gray-100 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all shadow-sm"})]})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-left",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-gray-50 text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100",children:[_.jsx("th",{className:"px-8 py-5",children:"Player Info"}),_.jsx("th",{className:"px-8 py-5",children:"Grid Alias"}),_.jsx("th",{className:"px-8 py-5 text-center",children:"Boxes"}),_.jsx("th",{className:"px-8 py-5",children:"Payment Status"}),_.jsx("th",{className:"px-8 py-5 text-right",children:"Actions"})]})}),_.jsxs("tbody",{className:"divide-y divide-gray-50",children:[W.map(X=>{const ae=g===X.id,$=v===X.id,ne=Math.max(0,X.totalOwed-X.totalPaid),U=X.boxCount>0&&ne===0;return _.jsxs(l_.Fragment,{children:[_.jsxs("tr",{className:`hover:bg-indigo-50/30 transition-colors ${$?"bg-indigo-50/20":""}`,children:[_.jsx("td",{className:"px-8 py-6",children:ae?_.jsxs("div",{className:"space-y-2",children:[_.jsx("input",{className:"text-sm font-bold border-2 border-indigo-100 rounded-xl px-2 py-1 w-full outline-none focus:border-indigo-500",value:X.name,onChange:J=>l(X.id,{name:J.target.value})}),_.jsx("input",{className:"text-xs border-2 border-indigo-100 rounded-xl px-2 py-1 w-full outline-none focus:border-indigo-500",value:X.email,onChange:J=>l(X.id,{email:J.target.value})})]}):_.jsxs("div",{children:[_.jsx("p",{className:"font-black text-gray-900",children:X.name}),_.jsx("p",{className:"text-xs text-indigo-500 font-medium",children:X.email})]})}),_.jsx("td",{className:"px-8 py-6",children:ae?_.jsx("input",{className:"text-sm font-black border-2 border-indigo-100 rounded-xl px-2 py-1 w-full text-indigo-700 uppercase outline-none focus:border-indigo-500",value:X.alias,onChange:J=>l(X.id,{alias:J.target.value})}):_.jsx("span",{className:"inline-block px-3 py-1 bg-indigo-100 text-indigo-700 text-xs font-black rounded-lg uppercase tracking-wider",children:X.alias})}),_.jsx("td",{className:"px-8 py-6 text-center",children:_.jsx("span",{className:"text-xl font-black text-gray-900",children:X.boxCount})}),_.jsx("td",{className:"px-8 py-6",children:_.jsxs("div",{className:"space-y-2 min-w-[140px]",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("div",{className:"flex justify-between items-baseline",children:[_.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Amount Paid"}),_.jsx("div",{className:"text-right",children:_.jsxs("p",{className:`text-lg font-black leading-none ${U?"text-green-600":ne>0?"text-orange-600":"text-indigo-900"}`,children:["$",X.totalPaid]})})]}),_.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[_.jsxs("span",{className:"text-[9px] font-bold text-gray-400 uppercase",children:["Total Due: $",X.totalOwed]}),ne>0&&_.jsxs("span",{className:"text-[9px] font-black text-red-500 uppercase bg-red-50 px-1.5 py-0.5 rounded-md",children:["Bal: $",ne]})]})]}),_.jsx("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:_.jsx("div",{className:`h-full transition-all duration-500 ${U?"bg-green-500":"bg-orange-400"}`,style:{width:`${X.totalOwed>0?Math.min(100,X.totalPaid/X.totalOwed*100):0}%`}})})]})}),_.jsx("td",{className:"px-8 py-6 text-right",children:_.jsxs("div",{className:"flex justify-end gap-2",children:[_.jsx("button",{onClick:()=>x($?null:X.id),className:`p-2 rounded-lg transition-all ${$?"bg-indigo-900 text-white":"bg-gray-100 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50"}`,title:"View History",children:_.jsx("i",{className:"fas fa-history"})}),_.jsx("button",{onClick:()=>p(ae?null:X.id),className:`p-2 rounded-lg transition-all ${ae?"bg-indigo-600 text-white":"bg-gray-100 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50"}`,title:"Edit Participant",children:_.jsx("i",{className:`fas ${ae?"fa-check":"fa-edit"}`})}),_.jsxs("button",{onClick:()=>me(X),className:"px-4 py-2 rounded-xl text-xs font-black uppercase transition-all shadow-sm bg-green-600 text-white hover:bg-green-700 shadow-green-200 active:scale-95 flex items-center gap-2",title:"Add Payment or Donation",children:[_.jsx("i",{className:"fas fa-plus"}),"Add"]})]})})]}),$&&_.jsx("tr",{className:"bg-gray-50/80 animate-in slide-in-from-top-2 duration-300",children:_.jsx("td",{colSpan:5,className:"px-12 py-6 border-b border-gray-100",children:_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[_.jsx("i",{className:"fas fa-history text-indigo-400 text-xs"}),_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:"Payment Transaction Log"})]}),X.paymentHistory&&X.paymentHistory.length>0?_.jsx("div",{className:"grid grid-cols-1 gap-2",children:X.paymentHistory.map(J=>_.jsxs("div",{className:"flex items-start justify-between bg-white p-4 rounded-2xl border border-gray-100 shadow-sm group hover:border-indigo-200 transition-all",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 group-hover:bg-indigo-600 group-hover:text-white transition-colors flex-shrink-0",children:_.jsx("i",{className:`fas ${J.method.toLowerCase().includes("cash")?"fa-money-bill-wave":"fa-mobile-alt"}`})}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsxs("p",{className:"text-sm font-black text-gray-900",children:["$",J.amount]}),_.jsxs("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:["via ",J.method]})]}),J.notes&&_.jsx("p",{className:"text-xs text-gray-500 mt-1 font-medium italic border-l-2 border-indigo-100 pl-3",children:J.notes})]})]}),_.jsxs("div",{className:"text-right flex-shrink-0",children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase",children:new Date(J.timestamp).toLocaleDateString()}),_.jsx("p",{className:"text-[9px] font-bold text-gray-300",children:new Date(J.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},J.id))}):_.jsx("div",{className:"text-center py-6 bg-white rounded-3xl border border-dashed border-gray-200",children:_.jsx("p",{className:"text-xs text-gray-400 font-medium italic",children:"No transactions recorded yet."})}),_.jsxs("div",{className:"pt-2 flex justify-between items-center text-[9px] font-black uppercase tracking-widest text-indigo-300",children:[_.jsxs("span",{children:["Total Collected for ",X.alias,": $",X.totalPaid]}),_.jsx("button",{onClick:()=>x(null),className:"hover:text-indigo-600 transition-colors",children:"Close Log"})]})]})})})]},X.id)}),W.length===0&&_.jsx("tr",{children:_.jsx("td",{colSpan:5,className:"px-8 py-20 text-center",children:_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:_.jsx("i",{className:"fas fa-users-slash text-gray-300 text-3xl"})}),_.jsx("p",{className:"text-gray-400 font-bold",children:"No participants found"})]})})})]})]})})]}),E&&_.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-sm animate-in fade-in duration-300",children:_.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in duration-300",children:[_.jsxs("div",{className:"bg-green-600 p-8 text-white flex justify-between items-center",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-2xl font-black uppercase tracking-tight",children:"Record Payment"}),_.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-widest",children:E.alias})]}),_.jsx("button",{onClick:oe,className:"w-10 h-10 rounded-full bg-white/20 hover:bg-white/30 flex items-center justify-center transition-colors",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("form",{onSubmit:de,className:"p-10 space-y-6 max-h-[75vh] overflow-y-auto scrollbar-hide",children:[_.jsxs("div",{children:[_.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-3 ml-1",children:"Payment Amount ($)"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 font-black text-indigo-900 text-2xl",children:"$"}),_.jsx("input",{autoFocus:!0,type:"number",step:"0.01",required:!0,value:N,onChange:X=>M(X.target.value),className:"w-full pl-12 pr-6 py-5 bg-gray-50 border-2 border-transparent focus:border-green-500 focus:bg-white rounded-[2rem] outline-none transition-all font-black text-2xl text-indigo-900",placeholder:"0.00"})]}),E.totalOwed>0&&_.jsxs("p",{className:"text-[10px] text-gray-400 mt-3 ml-2 font-bold uppercase",children:["Remaining Balance: $",Math.max(0,E.totalOwed-E.totalPaid)]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-3 ml-1",children:"Payment Method"}),_.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Cash","Venmo","PayPal","Zelle"].map(X=>_.jsx("button",{type:"button",onClick:()=>H(X),className:`py-3 rounded-2xl border-2 font-black uppercase text-[10px] tracking-widest transition-all ${I===X?"bg-indigo-900 border-indigo-900 text-white shadow-lg":"bg-white border-gray-100 text-gray-400 hover:border-indigo-100"}`,children:X},X))})]}),_.jsxs("div",{children:[_.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-3 ml-1",children:"Transaction Notes"}),_.jsx("textarea",{value:z,onChange:X=>q(X.target.value),className:"w-full px-6 py-4 bg-gray-50 border-2 border-transparent focus:border-green-500 focus:bg-white rounded-2xl outline-none transition-all font-medium text-xs text-indigo-900 resize-none h-24",placeholder:"e.g. Received via Zelle, donor matching, etc."})]}),_.jsx("div",{className:"pt-4",children:_.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-5 rounded-[2rem] font-black uppercase tracking-widest text-sm hover:bg-green-700 shadow-xl shadow-green-100 transition-all active:scale-95 flex items-center justify-center gap-3",children:[_.jsx("i",{className:"fas fa-check-circle"}),"Confirm Payment"]})})]})]})})]})},vI=({isOpen:t,onClose:e,onSubmit:n,onUnassign:o,onSetPendingSelection:l,selectedSquareIds:a,activePool:c,existingParticipants:h,settings:g})=>{const[p,v]=le.useState(!1),[x,E]=le.useState(!1),[T,N]=le.useState(""),[M,I]=le.useState(!1),[H,z]=le.useState(null),[q,V]=le.useState({name:"",email:"",phone:"",alias:""}),Y=le.useMemo(()=>(a||[]).map(w=>(c.squares||[])[w]).filter(Boolean),[a,c.squares]),te=le.useMemo(()=>h.find(w=>w.email.toLowerCase()===q.email.toLowerCase()),[q.email,h]),W=le.useMemo(()=>te?(c.squares||[]).filter(w=>w.participantId===te.id&&!(a||[]).includes(w.id)&&(w.paidAmount||0)<g.costPerBox):[],[te,c.squares,a,g.costPerBox]),me=le.useMemo(()=>[...Y,...W],[Y,W]),oe=Y.length>0&&Y.every(w=>w.assigned),de=le.useMemo(()=>{if(!x||Y.length===0)return null;const w=Y[0],G=h.find(Je=>Je.id===(w==null?void 0:w.participantId));if(!G)return null;const Z=(c.squares||[]).filter(Je=>Je.participantId===G.id),ce=Z.length*g.costPerBox,he=(G.paymentHistory||[]).reduce((Je,Xe)=>Je+Xe.amount,0);return{balance:Math.max(0,ce-he),totalPaid:he,boxCount:Z.length,p:G}},[x,Y,h,c.squares,g.costPerBox]),X=le.useMemo(()=>me.length*g.costPerBox-me.reduce((w,G)=>w+(G.paidAmount||0),0),[me,g.costPerBox]);if(le.useEffect(()=>{if(t)if(v(!1),E(!1),N(""),I(!1),z(null),Y.length===1&&Y[0].assigned){const w=h.find(G=>G.id===Y[0].participantId);w&&V({name:w.name,email:w.email,phone:w.phone,alias:w.alias.toUpperCase()})}else V({name:"",email:"",phone:"",alias:""})},[t,Y,h]),!t||Y.length===0)return null;const ae=w=>{const G=(a||[]).filter(Z=>Z!==w);l(G),G.length===0&&e()},$=w=>{window.confirm("Relinquish this square and make it available for others?")&&(o(w),l((a||[]).filter(G=>G!==w)),e())},ne=w=>{if(!w)return w;const G=w.replace(/[^\d]/g,""),Z=G.length;return Z<4?G:Z<7?`(${G.slice(0,3)}) ${G.slice(3)}`:`(${G.slice(0,3)}) ${G.slice(3,6)}-${G.slice(6,10)}`},ye=w=>{const G=ne(w.target.value);V({...q,phone:G})},U=w=>{const G=w.target.value;if(!G)return;const Z=h.find(ce=>ce.id===G);Z&&V({name:Z.name,email:Z.email,phone:Z.phone,alias:Z.alias.toUpperCase()})},J=w=>{w.preventDefault();const G=me.map(Z=>Z.id);n({...q,alias:q.alias.toUpperCase()},G),v(!0)},O=w=>{w.preventDefault();const G=Y[0],Z=h.find(ce=>ce.id===G.participantId);Z&&Z.email.toLowerCase()===T.toLowerCase()?(E(!0),I(!1)):I(!0)},ie=w=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(w)}&margin=10`,ee=g.zelleAccount||g.paypalAccount||g.venmoAccount||g.otherPaymentInfo,b=({currentAlias:w,amount:G})=>{var Ce;const Z=`https://www.paypal.com/paypalme/${g.paypalAccount}/${G}`,ce=`https://venmo.com/${(Ce=g.venmoAccount)==null?void 0:Ce.replace("@","")}?txn=pay&amount=${G}&note=${encodeURIComponent(`Squares: ${w.toUpperCase()}`)}`,he=g.zelleAccount||"";return _.jsxs("div",{className:"space-y-4",children:[g.paypalAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("a",{href:Z,target:"_blank",className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#003087] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx("i",{className:"fab fa-paypal"})," PayPal: $",G]}),_.jsx("button",{type:"button",onClick:Je=>{Je.preventDefault(),z(H==="paypal"?null:"paypal")},className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"Scan QR"})]}),H==="paypal"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ie(Z),alt:"PayPal QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan with Camera to Pay"})]})]}),g.venmoAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("a",{href:ce,target:"_blank",className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#3d95ce] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx("i",{className:"fab fa-vimeo-v"})," Venmo: $",G]}),_.jsx("button",{type:"button",onClick:Je=>{Je.preventDefault(),z(H==="venmo"?null:"venmo")},className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"Scan QR"})]}),H==="venmo"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ie(ce),alt:"Venmo QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan with Camera to Pay"})]})]}),g.zelleAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("div",{className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#6d1ed4] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(he),alert("Zelle info copied!")},className:"flex items-center gap-2 text-left",children:[_.jsx("i",{className:"fas fa-university"})," Zelle: ",he," ($",G,")"]}),_.jsx("button",{type:"button",onClick:()=>z(H==="zelle"?null:"zelle"),className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"QR Code"})]}),H==="zelle"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ie(he),alt:"Zelle QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan to Copy Info"})]})]}),g.otherPaymentInfo&&_.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-xl text-center",children:[_.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase mb-1",children:"Other Instructions"}),_.jsx("p",{className:"text-xs font-bold text-gray-700",children:g.otherPaymentInfo})]}),_.jsxs("p",{className:"text-[9px] text-gray-400 italic text-center uppercase font-black",children:['Memo: "',w.toUpperCase(),'"']})]})};return _.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4 bg-indigo-950/40 backdrop-blur-md",children:_.jsxs("div",{className:"bg-white rounded-t-[2rem] md:rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-in slide-in-from-bottom-full md:slide-in-from-bottom-6 duration-300",children:[_.jsxs("div",{className:"p-6 md:p-8 bg-indigo-900 text-white flex justify-between items-center relative overflow-hidden",children:[_.jsxs("div",{className:"relative z-10",children:[_.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight leading-none",children:oe?"Manage Reservation":`Claiming ${Y.length} Boxes`}),_.jsx("p",{className:"text-indigo-300 text-[9px] font-bold uppercase tracking-widest mt-2",children:oe?"Account Details":`Support ${g.charityName}`})]}),_.jsx("button",{onClick:e,className:"bg-white/10 w-10 h-10 rounded-full flex items-center justify-center transition-all z-10",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsx("div",{className:"p-6 md:p-8 space-y-6 max-h-[80vh] overflow-y-auto scrollbar-hide",children:!oe&&!p?_.jsxs("form",{onSubmit:J,className:"space-y-5",children:[h.length>0&&_.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-indigo-400 mb-1 block",children:"Quick Select Player"}),_.jsxs("select",{onChange:U,className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[_.jsx("option",{value:"",children:"-- New Player --"}),h.sort((w,G)=>w.alias.localeCompare(G.alias)).map(w=>_.jsxs("option",{value:w.id,children:[w.alias.toUpperCase()," (",w.name,")"]},w.id))]})]}),_.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Items in checkout"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(w=>_.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-white text-indigo-900 font-black text-[10px] rounded-lg shadow-sm border border-indigo-100 group",children:[_.jsxs("span",{children:["#",w.id+1]}),_.jsx("button",{type:"button",onClick:()=>ae(w.id),className:"w-4 h-4 rounded-full bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:_.jsx("i",{className:"fas fa-times text-[8px]"})})]},w.id))}),_.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-100/50 flex justify-between items-center",children:[_.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-900",children:"Amount Due"}),_.jsxs("span",{className:"text-lg font-black text-indigo-900",children:["$",X]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Full Name"}),_.jsx("input",{required:!0,value:q.name,onChange:w=>V({...q,name:w.target.value}),className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"John Doe"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Email Address"}),_.jsx("input",{required:!0,type:"email",value:q.email,onChange:w=>V({...q,email:w.target.value}),className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm",placeholder:"email@example.com"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Cell Number"}),_.jsx("input",{required:!0,type:"tel",value:q.phone,onChange:ye,className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm",placeholder:"(123) 456-7890",maxLength:14})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Alias (Visible on Grid)"}),_.jsx("input",{required:!0,value:q.alias,onChange:w=>V({...q,alias:w.target.value.toUpperCase()}),className:"w-full p-4 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm",placeholder:"e.g. CHAMP_2025"})]}),_.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl",children:"Confirm & Register"})]}):p?_.jsxs("div",{className:"text-center space-y-6",children:[_.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl border-2 border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-500 text-4xl mb-3"}),_.jsx("h3",{className:"font-black text-indigo-900 uppercase text-sm",children:"Successfully Claimed!"}),_.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase mt-1",children:"Please finish the process by paying below."})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",X]}),_.jsx("p",{className:"text-[9px] font-black uppercase text-indigo-300 tracking-widest",children:"Total Donation Amount"})]}),ee?_.jsx(b,{currentAlias:q.alias,amount:X}):_.jsx("p",{className:"text-xs text-gray-400 italic",children:"Contact admin for payment info."}),_.jsx("button",{onClick:e,className:"text-xs font-black uppercase text-indigo-500 py-2",children:"Return to Board"})]}):_.jsxs("div",{className:"space-y-6",children:[x&&de&&_.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border-2 border-orange-200 text-center animate-in zoom-in-95",children:[_.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase tracking-widest mb-1",children:"Total Account Balance"}),_.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",de.balance.toFixed(2)]}),_.jsxs("p",{className:"text-[8px] font-bold text-indigo-400 uppercase mt-2",children:[de.boxCount," Total Squares / $",de.totalPaid," Contributed"]})]}),_.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("p",{className:"text-[9px] font-black uppercase text-gray-400",children:"Account Alias"}),_.jsx("p",{className:"font-black text-indigo-900 text-sm",children:Y[0].alias.toUpperCase()})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("p",{className:"text-[9px] font-black uppercase text-gray-400",children:"Reserved Squares"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map(w=>_.jsxs("div",{className:"flex-1 min-w-[120px] bg-white p-3 rounded-xl border border-indigo-100 flex justify-between items-center",children:[_.jsxs("span",{className:"text-[10px] font-black text-indigo-400",children:["Box #",w.id+1]}),_.jsxs("span",{className:`text-[10px] font-black ${w.paidAmount>=g.costPerBox?"text-green-600":"text-orange-600"}`,children:["$",w.paidAmount," Paid"]})]},w.id))})]})]}),x?_.jsxs("div",{className:"space-y-6",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest text-center",children:"Donate to Settle Balance"}),_.jsx(b,{currentAlias:Y[0].alias,amount:(de==null?void 0:de.balance)||0}),_.jsx("div",{className:"pt-6 border-t border-gray-100",children:_.jsx("button",{onClick:()=>$(Y[0].id),className:"w-full bg-red-50 text-red-500 py-4 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-red-100 transition-colors",children:"Cancel Selection & Relinquish Box"})})]}):_.jsxs("form",{onSubmit:O,className:"space-y-4",children:[_.jsx("p",{className:"text-xs text-center font-bold text-gray-500",children:"Enter your email to verify ownership & view balance."}),_.jsx("input",{required:!0,type:"email",value:T,onChange:w=>N(w.target.value),className:"w-full p-4 bg-gray-50 border-none rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Confirm Account Email"}),M&&_.jsx("p",{className:"text-red-500 text-[10px] font-bold text-center uppercase",children:"Email does not match this reservation."}),_.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:"Verify Ownership"})]})]})})]})})},_I=({isOpen:t,onClose:e,appState:n})=>{const[o,l]=le.useState(!1),a=le.useMemo(()=>{try{const p=btoa(JSON.stringify(n)),v=new URL(window.location.origin+window.location.pathname);return v.searchParams.set("data",p),v.toString()}catch(p){return console.error("Error generating share URL",p),window.location.href}},[n,t]),c=le.useMemo(()=>`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(a)}&margin=10`,[a]);if(!t)return null;const h=()=>{navigator.clipboard.writeText(a).then(()=>{l(!0),setTimeout(()=>l(!1),3e3)})},g=a.length>7e3;return _.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md animate-in fade-in duration-300",children:_.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in-95 duration-300",children:[_.jsxs("div",{className:"bg-green-600 p-8 text-white flex justify-between items-center relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:_.jsx("i",{className:"fas fa-share-alt text-8xl rotate-12"})}),_.jsxs("div",{className:"relative z-10",children:[_.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"Share Your Board"}),_.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-widest",children:"Snapshot Sharing Enabled"})]}),_.jsx("button",{onClick:e,className:"bg-white/10 hover:bg-white/20 w-12 h-12 rounded-full flex items-center justify-center transition-all z-10",children:_.jsx("i",{className:"fas fa-times text-xl"})})]}),_.jsxs("div",{className:"p-10 space-y-8 text-center max-h-[80vh] overflow-y-auto scrollbar-hide",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"bg-gray-50 p-6 rounded-[2.5rem] border-2 border-dashed border-gray-200 inline-block",children:_.jsx("img",{src:c,alt:"Share QR Code",className:"w-56 h-56 mx-auto rounded-xl shadow-inner"})}),_.jsxs("p",{className:"text-gray-500 text-sm font-medium px-4",children:["Ask participants to ",_.jsx("span",{className:"font-black text-indigo-900",children:"scan this code"})," with their phone to instantly see the current board state."]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"relative group",children:[_.jsx("input",{readOnly:!0,value:a,className:"w-full pl-6 pr-32 py-5 bg-gray-50 border-2 border-gray-100 rounded-3xl font-mono text-xs text-gray-400 outline-none truncate"}),_.jsx("button",{onClick:h,className:`absolute right-2 top-2 bottom-2 px-6 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${o?"bg-green-600 text-white":"bg-indigo-900 text-white hover:bg-black shadow-lg shadow-indigo-100"}`,children:o?"Copied!":"Copy Link"})]}),g&&_.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50 border border-orange-200 rounded-2xl text-left",children:[_.jsx("i",{className:"fas fa-exclamation-triangle text-orange-500 mt-1"}),_.jsx("p",{className:"text-[10px] text-orange-800 font-bold uppercase leading-relaxed",children:'Notice: This board has a lot of data. Snapshot links may not work in older browsers. If problems occur, use the "Export JSON" backup feature in Admin.'})]})]}),_.jsxs("div",{className:"pt-6 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-info-circle"}),"How it works"]}),_.jsx("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:'Your data is stored "inside" the link. When someone opens it, their browser saves a copy. No login or database required!'})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-sync-alt"}),"Updates"]}),_.jsxs("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:["If you change the board later, you must ",_.jsx("span",{className:"text-indigo-600 font-bold",children:"generate a new link"})," for others to see the changes."]})]})]}),_.jsx("button",{onClick:e,className:"w-full py-4 text-indigo-400 font-black uppercase text-[10px] tracking-widest hover:text-indigo-900 transition-colors",children:"Back to Grid"})]})]})})},xI=({globalSettings:t,activePool:e})=>{const[n,o]=le.useState(!1),[l,a]=le.useState([]),[c,h]=le.useState(""),[g,p]=le.useState(!1),v=le.useRef(null);le.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[l]);const x=async()=>{if(!c.trim()||g)return;const E=c.trim();a(T=>[...T,{role:"user",text:E}]),h(""),p(!0);try{const T=new j_({apiKey:"PLACEHOLDER_API_KEY"}),N=`
        You are the "Charity Squares Assistant" for a Super Bowl squares contest.
        Current Charity: ${t.charityName}.
        Current Matchup: ${e.settings.teamA} vs ${e.settings.teamB}.
        Cost per square: $${e.settings.costPerBox}.
        Board Name: ${e.name}.
        Rules: Participants pick a square. Once the board is full, axes (0-9) are randomized. 
        Winning square is determined by the last digit of the score for each team at various intervals (usually quarters).
        Keep responses helpful, enthusiastic about charity, and concise.
      `,M=await T.models.generateContent({model:"gemini-3-flash-preview",contents:`${N}

User Question: ${E}`});a(I=>[...I,{role:"ai",text:M.text||"I'm sorry, I couldn't process that."}])}catch{a(N=>[...N,{role:"ai",text:"Error connecting to AI. Please try again later."}])}finally{p(!1)}};return _.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>o(!n),className:"fixed bottom-8 right-8 w-16 h-16 bg-indigo-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-[100] border-4 border-white animate-bounce-slow",children:_.jsx("i",{className:`fas ${n?"fa-times":"fa-magic"} text-xl`})}),n&&_.jsxs("div",{className:"fixed bottom-28 right-8 w-80 md:w-96 bg-white rounded-[2rem] shadow-2xl z-[100] border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[_.jsxs("div",{className:"bg-indigo-600 p-6 text-white",children:[_.jsxs("h3",{className:"font-black uppercase tracking-tight flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-robot"}),"Contest Assistant"]}),_.jsx("p",{className:"text-[10px] text-indigo-200 font-bold uppercase tracking-widest mt-1",children:"Ask me anything about the rules!"})]}),_.jsxs("div",{ref:v,className:"flex-grow p-4 h-80 overflow-y-auto space-y-4 scrollbar-hide",children:[l.length===0&&_.jsx("div",{className:"text-center py-10",children:_.jsx("p",{className:"text-gray-400 text-xs italic",children:`"How do I win?" or "What's the charity for?"`})}),l.map((E,T)=>_.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-xs leading-relaxed ${E.role==="user"?"bg-indigo-100 text-indigo-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:E.text})},T)),g&&_.jsx("div",{className:"flex justify-start",children:_.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl rounded-bl-none",children:_.jsxs("div",{className:"flex gap-1",children:[_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"}),_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})})})]}),_.jsxs("div",{className:"p-4 border-t border-gray-50 flex gap-2",children:[_.jsx("input",{type:"text",value:c,onChange:E=>h(E.target.value),onKeyDown:E=>E.key==="Enter"&&x(),placeholder:"Type a message...",className:"flex-grow bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none"}),_.jsx("button",{onClick:x,className:"w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-black transition-colors",children:_.jsx("i",{className:"fas fa-paper-plane text-xs"})})]})]})]})},EI=({activePool:t,settings:e,onAddScore:n,onUpdateScore:o,onDeleteScore:l,isAdmin:a})=>{const[c,h]=le.useState(""),[g,p]=le.useState(""),[v,x]=le.useState("Score Change"),[E,T]=le.useState(null),[N,M]=le.useState(null),{scores:I=[],squares:H=[]}=t,{payouts:z,costPerBox:q,rowNumbers:V,colNumbers:Y}=e,te=le.useMemo(()=>H.length*q,[H.length,q]),W=le.useMemo(()=>te*(z.charityPercent/100),[te,z.charityPercent]),me=te-W,oe=(ne,ye)=>{const U=ne%10,J=ye%10,O=(V||[]).indexOf(U),ie=(Y||[]).indexOf(J);if(O===-1||ie===-1)return null;const ee=H.find(b=>b.row===O&&b.col===ie);return ee?{alias:ee.assigned?ee.alias:"Unassigned",id:ee.id,assigned:ee.assigned}:null},de=le.useMemo(()=>(I||[]).map((ne,ye)=>{const U=oe(ne.teamAScore,ne.teamBScore);let J=0;if(z.mode==="standard"){const O=z.standardSplits[ne.label.toLowerCase()]||0;J=me*(O/100)}else{const O=ne.teamAScore===0&&ne.teamBScore===0,ie=I.slice(0,ye).some(ee=>ee.teamAScore===0&&ee.teamBScore===0);O&&!ie?J=q:J=q*(z.scoreChangeMultiplier||3)}return{...ne,winner:U,payout:J}}),[I,z,me,q,V,Y,H]),X=ne=>{ne.preventDefault(),M(null);const ye=parseInt(c),U=parseInt(g);if(isNaN(ye)||isNaN(U)){M("Scores must be valid numbers.");return}if(ye<0||U<0){M("Scores cannot be negative.");return}if(z.mode==="standard"&&!["Kickoff","Q1","Half","Q3","Final"].includes(v)){M(`Label "${v}" is not supported in Standard mode.`);return}E?(o({id:E,teamAScore:ye,teamBScore:U,label:v,timestamp:Date.now()}),T(null)):n({id:crypto.randomUUID(),teamAScore:ye,teamBScore:U,label:v,timestamp:Date.now()}),h(""),p("")},ae=ne=>{T(ne.id),h(ne.teamAScore.toString()),p(ne.teamBScore.toString()),x(ne.label),M(null),window.scrollTo({top:0,behavior:"smooth"})},$=()=>{T(null),h(""),p(""),M(null)};return _.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-12",children:[_.jsxs("div",{className:"bg-indigo-900 text-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:_.jsx("i",{className:"fas fa-sack-dollar text-[120px] rotate-12"})}),_.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"inline-block px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-indigo-300",children:"Live Payout Analytics"}),_.jsxs("h2",{className:"text-4xl md:text-6xl font-black tracking-tighter",children:["Total Pot: $",te]}),_.jsxs("p",{className:"text-indigo-300 text-sm font-medium uppercase tracking-widest italic opacity-80",children:["Supporting ",e.teamA," Charity"]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between items-end",children:[_.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Pot Distribution"}),_.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:[z.charityPercent,"% Charity / ",100-z.charityPercent,"% Players"]})]}),_.jsxs("div",{className:"h-4 bg-white/5 rounded-full overflow-hidden flex border border-white/10",children:[_.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${z.charityPercent}%`}}),_.jsx("div",{className:"h-full bg-green-500",style:{width:`${100-z.charityPercent}%`}})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase mb-1",children:"Charity Portion"}),_.jsxs("p",{className:"text-xl font-black",children:["$",W.toFixed(2)]})]}),_.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[_.jsx("p",{className:"text-[9px] font-black text-green-400 uppercase mb-1",children:"Player Pot"}),_.jsxs("p",{className:"text-xl font-black",children:["$",me.toFixed(2)]})]})]})]})]})]}),a&&_.jsxs("section",{className:`bg-white border-2 p-8 rounded-[3rem] shadow-xl relative transition-all duration-300 ${E?"border-orange-500 ring-4 ring-orange-50":"border-indigo-100"}`,children:[_.jsx("div",{className:`absolute -top-4 left-10 text-white px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg ${E?"bg-orange-500":"bg-indigo-600"}`,children:E?"Editing Entry":"Add New Score"}),_.jsxs("form",{onSubmit:X,className:"space-y-6 mt-4",children:[N&&_.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 animate-pulse",children:[_.jsx("i",{className:"fas fa-exclamation-triangle"}),N]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:[e.teamA," Score"]}),_.jsx("input",{type:"number",required:!0,value:c,onChange:ne=>h(ne.target.value),className:"w-full p-5 bg-gray-50 rounded-2xl font-black text-3xl outline-none focus:ring-4 focus:ring-indigo-500/10 border border-gray-100",placeholder:"0",min:"0"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:[e.teamB," Score"]}),_.jsx("input",{type:"number",required:!0,value:g,onChange:ne=>p(ne.target.value),className:"w-full p-5 bg-gray-50 rounded-2xl font-black text-3xl outline-none focus:ring-4 focus:ring-indigo-500/10 border border-gray-100",placeholder:"0",min:"0"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Event Label"}),_.jsx("select",{value:v,onChange:ne=>x(ne.target.value),className:"w-full p-5 bg-indigo-50 rounded-2xl font-black text-indigo-900 outline-none border border-indigo-100 appearance-none",children:z.mode==="standard"?_.jsxs(_.Fragment,{children:[_.jsx("option",{value:"Kickoff",children:"Kickoff (0-0)"}),_.jsx("option",{value:"Q1",children:"End of Q1"}),_.jsx("option",{value:"Half",children:"Halftime"}),_.jsx("option",{value:"Q3",children:"End of Q3"}),_.jsx("option",{value:"Final",children:"Final Score"})]}):_.jsxs(_.Fragment,{children:[_.jsx("option",{value:"Kickoff",children:"Kickoff (0-0)"}),_.jsx("option",{value:"Score Change",children:"Score Update"}),_.jsx("option",{value:"End of Quarter",children:"End of Quarter"}),_.jsx("option",{value:"Final",children:"Final Score"})]})})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{type:"submit",className:`flex-grow py-6 rounded-2xl font-black uppercase text-[11px] tracking-widest shadow-2xl transition-all transform hover:-translate-y-1 active:translate-y-0 ${E?"bg-orange-500 text-white hover:bg-orange-600":"bg-indigo-900 text-white hover:bg-black"}`,children:E?"Save Edit":"Log Score"}),E&&_.jsx("button",{type:"button",onClick:$,className:"px-6 bg-gray-100 text-gray-500 rounded-2xl font-black uppercase text-[11px] tracking-widest hover:bg-gray-200",children:"Cancel"})]})]})]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between px-4",children:[_.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-[0.2em]",children:"Match Timeline"}),z.mode==="scoreChange"&&_.jsxs("span",{className:"text-[9px] font-bold text-orange-500 uppercase bg-orange-50 px-3 py-1 rounded-full border border-orange-100 animate-pulse",children:[z.scoreChangeMultiplier,"x Multiplier Active"]})]}),de.length===0?_.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-[3rem] py-24 text-center",children:[_.jsx("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-trophy text-gray-200 text-3xl"})}),_.jsx("h4",{className:"text-gray-400 font-black uppercase text-xs tracking-widest",children:"Awaiting Kickoff..."})]}):_.jsx("div",{className:"grid grid-cols-1 gap-4",children:de.slice().reverse().map((ne,ye)=>{var ee;const U=z.mode==="scoreChange"&&ne.teamAScore===0&&ne.teamBScore===0&&ne.payout===q,J=ne.winner!==null,O=ne.winner&&ne.winner.assigned,ie=E===ne.id;return _.jsxs("div",{className:`bg-white border rounded-[2.5rem] p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6 transition-all shadow-sm hover:shadow-xl ${ie?"border-orange-500 ring-4 ring-orange-50 bg-orange-50/10":ye===0?"border-indigo-500 ring-4 ring-indigo-500/5":"border-gray-100"}`,children:[_.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[_.jsxs("div",{className:`text-center px-6 py-4 rounded-[2rem] border min-w-[100px] ${ye===0?"bg-indigo-900 text-white border-indigo-900":"bg-gray-50 border-gray-100 text-indigo-900"}`,children:[_.jsx("p",{className:`text-[8px] font-black uppercase tracking-widest mb-1 ${ye===0?"text-indigo-300":"text-gray-400"}`,children:ne.label}),_.jsxs("p",{className:"text-2xl font-black tabular-nums",children:[ne.teamAScore," - ",ne.teamBScore]})]}),_.jsxs("div",{className:"flex-grow",children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Square Holder"}),_.jsx("h4",{className:`text-lg font-black uppercase truncate max-w-[160px] ${O?"text-gray-900":"text-gray-400 italic"}`,children:((ee=ne.winner)==null?void 0:ee.alias)||"Missing Axis #s"}),J&&_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsxs("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-black uppercase",children:["Box #",ne.winner.id+1]}),!O&&_.jsx("span",{className:"text-[8px] font-black text-red-500 uppercase bg-red-50 px-2 py-0.5 rounded-full",children:"Not Purchased"}),U&&_.jsx("span",{className:"text-[8px] font-black text-orange-600 uppercase",children:"Money Back Trigger"})]})]})]}),_.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[_.jsxs("div",{className:"flex-grow md:flex-none text-center md:text-right",children:[_.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Payout"}),_.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["$",ne.payout.toFixed(2)]})]}),a&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>ae(ne),className:"w-12 h-12 bg-indigo-50 text-indigo-500 rounded-2xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-sm",children:_.jsx("i",{className:"fas fa-edit text-sm"})}),_.jsx("button",{onClick:()=>l(ne.id),className:"w-12 h-12 bg-red-50 text-red-500 rounded-2xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all shadow-sm",children:_.jsx("i",{className:"fas fa-trash-alt text-sm"})})]})]})]},ne.id)})})]}),_.jsxs("div",{className:"bg-white border-2 border-indigo-50 p-8 rounded-[3rem] grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[_.jsxs("div",{children:[_.jsxs("h4",{className:"font-black text-indigo-900 uppercase text-xs mb-3",children:["Payout Mode: ",z.mode==="standard"?"Traditional":"Score Change"]}),_.jsx("p",{className:"text-[11px] text-gray-500 font-medium leading-relaxed",children:z.mode==="standard"?"Quarter-based payouts. Percentages for each interval are configurable in the Admin tab.":`Payout of ${z.scoreChangeMultiplier}x the box cost ($${q*z.scoreChangeMultiplier}) for every unique score update.`})]}),_.jsx("div",{className:"flex flex-col gap-3",children:_.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-2xl border border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-600"}),_.jsxs("span",{className:"text-[10px] font-black text-green-900 uppercase",children:["Supporting ",e.charityName]})]})})]})]})},CI=({state:t})=>{const[e,n]=le.useState(""),[o,l]=le.useState(""),[a,c]=le.useState(null),h=le.useMemo(()=>{if(!o)return null;const x=[];if(t.pools.forEach(I=>{const H=(I.participants||[]).find(z=>z.email.toLowerCase()===o.toLowerCase());if(H){const z=(I.squares||[]).filter(q=>q.participantId===H.id);if(z.length>0){const q=z.length*I.settings.costPerBox,V=(H.paymentHistory||[]).reduce((Y,te)=>Y+te.amount,0);x.push({pool:I,participant:H,squares:z,due:q,paid:V})}}}),x.length===0)return null;const E=x.reduce((I,H)=>I+H.squares.length,0),T=x.reduce((I,H)=>I+H.due,0),N=x.reduce((I,H)=>I+H.paid,0),M=Math.max(0,T-N);return{results:x,totalBoxes:E,totalDue:T,totalPaid:N,netBalance:M,alias:x[0].participant.alias}},[o,t.pools]),g=x=>{x.preventDefault(),l(e.trim()),c(null)},p=x=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(x)}&margin=10`,v=({amount:x,alias:E})=>{var H;const T=t.globalSettings,N=`https://www.paypal.com/paypalme/${T.paypalAccount}/${x}`,M=`https://venmo.com/${(H=T.venmoAccount)==null?void 0:H.replace("@","")}?txn=pay&amount=${x}&note=${encodeURIComponent(`Balance: ${E.toUpperCase()}`)}`,I=T.zelleAccount||"";return _.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-2xl mx-auto",children:[T.paypalAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("a",{href:N,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#003087] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("i",{className:"fab fa-paypal"})," PayPal"]}),_.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),c(a==="paypal"?null:"paypal")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="paypal"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(N),alt:"PayPal QR",className:"w-20 h-20"})})]}),T.venmoAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("a",{href:M,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#3d95ce] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("i",{className:"fab fa-vimeo-v"})," Venmo"]}),_.jsx("button",{type:"button",onClick:z=>{z.preventDefault(),c(a==="venmo"?null:"venmo")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="venmo"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(M),alt:"Venmo QR",className:"w-20 h-20"})})]}),T.zelleAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#6d1ed4] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow",children:[_.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(I),alert("Zelle info copied!")},className:"flex items-center gap-1 text-left truncate",children:[_.jsx("i",{className:"fas fa-university"})," Zelle"]}),_.jsx("button",{type:"button",onClick:()=>c(a==="zelle"?null:"zelle"),className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="zelle"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(I),alt:"Zelle QR",className:"w-20 h-20"})})]})]})};return _.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-8 animate-in fade-in duration-500",children:[_.jsxs("section",{className:"bg-indigo-900 text-white rounded-2xl p-4 md:p-6 shadow-xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-5 pointer-events-none",children:_.jsx("i",{className:"fas fa-user-shield text-[60px] rotate-12"})}),_.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Status Check"}),_.jsx("p",{className:"text-indigo-300 text-[8px] font-bold uppercase tracking-widest",children:"Verify account balances"})]}),_.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[_.jsx("input",{required:!0,type:"email",value:e,onChange:x=>n(x.target.value),placeholder:"Enter your email...",className:"w-full sm:w-56 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-bold outline-none focus:border-white focus:bg-white/20 transition-all placeholder:text-indigo-400 text-xs"}),_.jsx("button",{type:"submit",className:"bg-white text-indigo-900 px-4 py-2 rounded-lg font-black uppercase text-[9px] tracking-widest shadow-lg hover:bg-indigo-50 active:scale-95 transition-all",children:"Go"})]})]})]}),h?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg overflow-hidden",children:[_.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100",children:[_.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[_.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Squares"}),_.jsx("p",{className:"text-2xl font-black text-indigo-900 leading-none",children:h.totalBoxes})]}),_.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[_.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Contributed"}),_.jsxs("p",{className:"text-2xl font-black text-gray-900 leading-none",children:["$",h.totalPaid]})]}),_.jsxs("div",{className:`p-4 flex flex-col items-center text-center transition-all ${h.netBalance>0?"bg-orange-50/30":"bg-green-50/30"}`,children:[_.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest mb-1 ${h.netBalance>0?"text-orange-600":"text-green-600"}`,children:"Balance"}),h.netBalance>0?_.jsxs("p",{className:"text-2xl font-black text-orange-600 leading-none",children:["$",h.netBalance]}):_.jsx("p",{className:"text-xl font-black text-green-600 leading-none uppercase tracking-tighter",children:"PAID"})]})]}),h.netBalance>0&&_.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-50 bg-orange-50/20 animate-in slide-in-from-top-2 duration-300",children:[_.jsx("div",{className:"text-center mb-3",children:_.jsxs("h3",{className:"text-[8px] font-black text-orange-600 uppercase tracking-widest",children:["Settle Outstanding: $",h.netBalance]})}),_.jsx(v,{amount:h.netBalance,alias:h.alias})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("h3",{className:"text-[9px] font-black text-indigo-900 uppercase tracking-widest px-2",children:"History Breakdown"}),_.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden",children:_.jsx("div",{className:"divide-y divide-gray-50",children:h.results.map((x,E)=>_.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-4 hover:bg-indigo-50/30 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[_.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex-shrink-0 flex items-center justify-center text-indigo-600",children:_.jsx("i",{className:"fas fa-football-ball text-[10px]"})}),_.jsxs("div",{className:"truncate",children:[_.jsx("h4",{className:"font-black text-xs text-indigo-900 uppercase truncate",children:x.pool.name}),_.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase",children:[x.squares.length," Box",x.squares.length>1?"es":"","  (",x.squares.map(T=>`#${T.id+1}`).join(", "),")"]})]})]}),_.jsxs("div",{className:"flex-shrink-0 text-right",children:[_.jsxs("p",{className:`text-xs font-black ${x.paid>=x.due?"text-green-600":"text-orange-600"}`,children:["$",x.paid,"/$",x.due]}),_.jsx("span",{className:`text-[6px] font-black uppercase ${x.paid>=x.due?"text-green-500":"text-orange-500"}`,children:x.paid>=x.due?"Paid":"Pending"})]})]},E))})})]})]}):o&&_.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-2xl py-12 text-center animate-in zoom-in-95",children:[_.jsx("i",{className:"fas fa-search-minus text-gray-200 text-2xl mb-2"}),_.jsx("h4",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No squares for this email"})]})]})},SI=()=>{};var f0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=function(t,e){if(!t)throw fs(e)},fs=function(t){return new Error("Firebase Database ("+ex.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let l=t.charCodeAt(o);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&o+1<t.length&&(t.charCodeAt(o+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++o)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},TI=function(t){const e=[];let n=0,o=0;for(;n<t.length;){const l=t[n++];if(l<128)e[o++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[n++];e[o++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[n++],c=t[n++],h=t[n++],g=((l&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[o++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Of={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let l=0;l<t.length;l+=3){const a=t[l],c=l+1<t.length,h=c?t[l+1]:0,g=l+2<t.length,p=g?t[l+2]:0,v=a>>2,x=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,T=p&63;g||(T=64,c||(E=64)),o.push(n[v],n[x],n[E],n[T])}return o.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let l=0;l<t.length;){const a=n[t.charAt(l++)],h=l<t.length?n[t.charAt(l)]:0;++l;const p=l<t.length?n[t.charAt(l)]:64;++l;const x=l<t.length?n[t.charAt(l)]:64;if(++l,a==null||h==null||p==null||x==null)throw new bI;const E=a<<2|h>>4;if(o.push(E),p!==64){const T=h<<4&240|p>>2;if(o.push(T),x!==64){const N=p<<6&192|x;o.push(N)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nx=function(t){const e=tx(t);return Of.encodeByteArray(e,!0)},Ca=function(t){return nx(t).replace(/\./g,"")},sf=function(t){try{return Of.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){return ix(void 0,t)}function ix(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!NI(n)||(t[n]=ix(t[n],e[n]));return t}function NI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=()=>wI().__FIREBASE_DEFAULTS__,II=()=>{if(typeof process>"u"||typeof f0>"u")return;const t=f0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sf(t[1]);return e&&JSON.parse(e)},ox=()=>{try{return SI()||RI()||II()||MI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DI=t=>{var e,n;return(n=(e=ox())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},kI=t=>{const e=DI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},sx=()=>{var t;return(t=ox())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ca(JSON.stringify(n)),Ca(JSON.stringify(c)),""].join(".")}const _l={};function LI(){const t={prod:[],emulator:[]};for(const e of Object.keys(_l))_l[e]?t.emulator.push(e):t.prod.push(e);return t}function OI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let h0=!1;function HI(t,e){if(typeof window>"u"||typeof document>"u"||!Hf(window.location.host)||_l[t]===e||_l[t]||h0)return;_l[t]=e;function n(E){return`__firebase__banner__${E}`}const o="__firebase__banner",a=LI().prod.length>0;function c(){const E=document.getElementById(o);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{h0=!0,c()},E}function v(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=OI(o),T=n("text"),N=document.getElementById(T)||document.createElement("span"),M=n("learnmore"),I=document.getElementById(M)||document.createElement("a"),H=n("preprendIcon"),z=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;h(q),v(I,M);const V=p();g(z,H),q.append(z,N,I,V),document.body.appendChild(q)}a?(N.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(BI())}function GI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qI(){return ex.NODE_ADMIN===!0}function VI(){try{return typeof indexedDB=="object"}catch{return!1}}function FI(){return new Promise((t,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(o);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(o),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="FirebaseError";class Ll extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=zI,Object.setPrototypeOf(this,Ll.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rx.prototype.create)}}class rx{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?YI(a,o):"Error",h=`${this.serviceName}: ${c} (${l}).`;return new Ll(l,h,o)}}function YI(t,e){return t.replace(JI,(n,o)=>{const l=e[o];return l!=null?String(l):`<${o}?>`})}const JI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=function(t){let e={},n={},o={},l="";try{const a=t.split(".");e=Al(sf(a[0])||""),n=Al(sf(a[1])||""),l=a[2],o=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:o,signature:l}},KI=function(t){const e=ax(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},QI=function(t){const e=ax(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function is(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function p0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sa(t,e,n){const o={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(o[l]=e.call(n,t[l],l,t));return o}function Ta(t,e){if(t===e)return!0;const n=Object.keys(t),o=Object.keys(e);for(const l of n){if(!o.includes(l))return!1;const a=t[l],c=e[l];if(m0(a)&&m0(c)){if(!Ta(a,c))return!1}else if(a!==c)return!1}for(const l of o)if(!n.includes(l))return!1;return!0}function m0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){const e=[];for(const[n,o]of Object.entries(t))Array.isArray(o)?o.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const o=this.W_;if(typeof e=="string")for(let x=0;x<16;x++)o[x]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let x=0;x<16;x++)o[x]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let x=16;x<80;x++){const E=o[x-3]^o[x-8]^o[x-14]^o[x-16];o[x]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],p,v;for(let x=0;x<80;x++){x<40?x<20?(p=h^a&(c^h),v=1518500249):(p=a^c^h,v=1859775393):x<60?(p=a&c|h&(a|c),v=2400959708):(p=a^c^h,v=3395469782);const E=(l<<5|l>>>27)+p+g+v+o[x]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const o=n-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<n;){if(c===0)for(;l<=o;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<n;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let o=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[o]=this.chain_[l]>>a&255,++o;return e}}function Ja(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=function(t){const e=[];let n=0;for(let o=0;o<t.length;o++){let l=t.charCodeAt(o);if(l>=55296&&l<=56319){const a=l-55296;o++,j(o<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(o)-56320;l=65536+(a<<10)+c}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Ka=function(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(t){return t&&t._delegate?t._delegate:t}class Nl{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Pl;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&o.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eM(e))try{this.getOrInitializeService({instanceIdentifier:Wi})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});o.resolve(a)}catch{}}}}clearInstance(e=Wi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wi){return this.instances.has(e)}getOptions(e=Wi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);o===h&&c.resolve(l)}return l}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(o)??new Set;l.add(e),this.onInitCallbacks.set(o,l);const a=this.instances.get(o);return a&&e(a,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const l of o)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:jI(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Wi){return this.component?this.component.multipleInstances?e:Wi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jI(t){return t===Wi?void 0:t}function eM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const nM={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},iM=ze.INFO,oM={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},sM=(t,e,...n)=>{if(e<t.logLevel)return;const o=new Date().toISOString(),l=oM[e];if(l)console[l](`[${o}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ux{constructor(e){this.name=e,this._logLevel=iM,this._logHandler=sM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const lM=(t,e)=>e.some(n=>t instanceof n);let g0,y0;function rM(){return g0||(g0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aM(){return y0||(y0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cx=new WeakMap,lf=new WeakMap,dx=new WeakMap,Md=new WeakMap,Bf=new WeakMap;function uM(t){const e=new Promise((n,o)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Si(t.result)),l()},c=()=>{o(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&cx.set(n,t)}).catch(()=>{}),Bf.set(e,t),e}function cM(t){if(lf.has(t))return;const e=new Promise((n,o)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),l()},c=()=>{o(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});lf.set(t,e)}let rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dM(t){rf=t(rf)}function fM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=t.call(Dd(this),e,...n);return dx.set(o,e.sort?e.sort():[e]),Si(o)}:aM().includes(t)?function(...e){return t.apply(Dd(this),e),Si(cx.get(this))}:function(...e){return Si(t.apply(Dd(this),e))}}function hM(t){return typeof t=="function"?fM(t):(t instanceof IDBTransaction&&cM(t),lM(t,rM())?new Proxy(t,rf):t)}function Si(t){if(t instanceof IDBRequest)return uM(t);if(Md.has(t))return Md.get(t);const e=hM(t);return e!==t&&(Md.set(t,e),Bf.set(e,t)),e}const Dd=t=>Bf.get(t);function pM(t,e,{blocked:n,upgrade:o,blocking:l,terminated:a}={}){const c=indexedDB.open(t,e),h=Si(c);return o&&c.addEventListener("upgradeneeded",g=>{o(Si(c.result),g.oldVersion,g.newVersion,Si(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),l&&g.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const mM=["get","getKey","getAll","getAllKeys","count"],gM=["put","add","delete","clear"],kd=new Map;function v0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kd.get(e))return kd.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,l=gM.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(l||mM.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,l?"readwrite":"readonly");let p=g.store;return o&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),l&&g.done]))[0]};return kd.set(e,a),a}dM(t=>({...t,get:(e,n,o)=>v0(e,n)||t.get(e,n,o),has:(e,n)=>!!v0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vM(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function vM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",_0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new ux("@firebase/app"),_M="@firebase/app-compat",xM="@firebase/analytics-compat",EM="@firebase/analytics",CM="@firebase/app-check-compat",SM="@firebase/app-check",TM="@firebase/auth",bM="@firebase/auth-compat",AM="@firebase/database",NM="@firebase/data-connect",wM="@firebase/database-compat",RM="@firebase/functions",IM="@firebase/functions-compat",MM="@firebase/installations",DM="@firebase/installations-compat",kM="@firebase/messaging",UM="@firebase/messaging-compat",PM="@firebase/performance",LM="@firebase/performance-compat",OM="@firebase/remote-config",HM="@firebase/remote-config-compat",BM="@firebase/storage",GM="@firebase/storage-compat",qM="@firebase/firestore",VM="@firebase/ai",FM="@firebase/firestore-compat",zM="firebase",YM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",JM={[af]:"fire-core",[_M]:"fire-core-compat",[EM]:"fire-analytics",[xM]:"fire-analytics-compat",[SM]:"fire-app-check",[CM]:"fire-app-check-compat",[TM]:"fire-auth",[bM]:"fire-auth-compat",[AM]:"fire-rtdb",[NM]:"fire-data-connect",[wM]:"fire-rtdb-compat",[RM]:"fire-fn",[IM]:"fire-fn-compat",[MM]:"fire-iid",[DM]:"fire-iid-compat",[kM]:"fire-fcm",[UM]:"fire-fcm-compat",[PM]:"fire-perf",[LM]:"fire-perf-compat",[OM]:"fire-rc",[HM]:"fire-rc-compat",[BM]:"fire-gcs",[GM]:"fire-gcs-compat",[qM]:"fire-fst",[FM]:"fire-fst-compat",[VM]:"fire-vertex","fire-js":"fire-js",[zM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba=new Map,KM=new Map,cf=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){Jn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Aa(t){const e=t.name;if(cf.has(e))return Jn.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,t);for(const n of ba.values())x0(n,t);for(const n of KM.values())x0(n,t);return!0}function QM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $M(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new rx("app","Firebase",XM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=YM;function fx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const o={name:uf,automaticDataCollectionEnabled:!0,...e},l=o.name;if(typeof l!="string"||!l)throw Ti.create("bad-app-name",{appName:String(l)});if(n||(n=sx()),!n)throw Ti.create("no-options");const a=ba.get(l);if(a){if(Ta(n,a.options)&&Ta(o,a.config))return a;throw Ti.create("duplicate-app",{appName:l})}const c=new tM(l);for(const g of cf.values())c.addComponent(g);const h=new WM(n,o,c);return ba.set(l,h),h}function jM(t=uf){const e=ba.get(t);if(!e&&t===uf&&sx())return fx();if(!e)throw Ti.create("no-app",{appName:t});return e}function jo(t,e,n){let o=JM[t]??t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),a=e.match(/\s|\//);if(l||a){const c=[`Unable to register library "${o}" with version "${e}":`];l&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jn.warn(c.join(" "));return}Aa(new Nl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="firebase-heartbeat-database",tD=1,wl="firebase-heartbeat-store";let Ud=null;function hx(){return Ud||(Ud=pM(eD,tD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ti.create("idb-open",{originalErrorMessage:t.message})})),Ud}async function nD(t){try{const n=(await hx()).transaction(wl),o=await n.objectStore(wl).get(px(t));return await n.done,o}catch(e){if(e instanceof Ll)Jn.warn(e.message);else{const n=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jn.warn(n.message)}}}async function E0(t,e){try{const o=(await hx()).transaction(wl,"readwrite");await o.objectStore(wl).put(e,px(t)),await o.done}catch(n){if(n instanceof Ll)Jn.warn(n.message);else{const o=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jn.warn(o.message)}}}function px(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=1024,oD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rD(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=C0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>oD){const c=aD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){Jn.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=C0(),{heartbeatsToSend:o,unsentEntries:l}=lD(this._heartbeatsCache.heartbeats),a=Ca(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Jn.warn(n),""}}}function C0(){return new Date().toISOString().substring(0,10)}function lD(t,e=iD){const n=[];let o=t.slice();for(const l of t){const a=n.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),S0(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),S0(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class rD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VI()?FI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return E0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return E0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function S0(t){return Ca(JSON.stringify({version:2,heartbeats:t})).length}function aD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let o=1;o<t.length;o++)t[o].date<n&&(n=t[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t){Aa(new Nl("platform-logger",e=>new yM(e),"PRIVATE")),Aa(new Nl("heartbeat",e=>new sD(e),"PRIVATE")),jo(af,_0,t),jo(af,_0,"esm2020"),jo("fire-js","")}uD("");var cD="firebase",dD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo(cD,dD,"app");var T0={};const b0="@firebase/database",A0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mx="";function fD(t){mx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Al(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Tn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hD(e)}}catch{}return new pD},ji=gx("localStorage"),mD=gx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new ux("@firebase/database"),gD=(function(){let t=1;return function(){return t++}})(),yx=function(t){const e=WI(t),n=new XI;n.update(e);const o=n.digest();return Of.encodeByteArray(o)},Hl=function(...t){let e="";for(let n=0;n<t.length;n++){const o=t[n];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=Hl.apply(null,o):typeof o=="object"?e+=mt(o):e+=o,e+=" "}return e};let xl=null,N0=!0;const yD=function(t,e){j(!0,"Can't turn on custom loggers persistently."),es.logLevel=ze.VERBOSE,xl=es.log.bind(es)},Ct=function(...t){if(N0===!0&&(N0=!1,xl===null&&mD.get("logging_enabled")===!0&&yD()),xl){const e=Hl.apply(null,t);xl(e)}},Bl=function(t){return function(...e){Ct(t,...e)}},df=function(...t){const e="FIREBASE INTERNAL ERROR: "+Hl(...t);es.error(e)},Kn=function(...t){const e=`FIREBASE FATAL ERROR: ${Hl(...t)}`;throw es.error(e),new Error(e)},wt=function(...t){const e="FIREBASE WARNING: "+Hl(...t);es.warn(e)},vD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&wt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Gf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},_D=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},os="[MIN_NAME]",eo="[MAX_NAME]",so=function(t,e){if(t===e)return 0;if(t===os||e===eo)return-1;if(e===os||t===eo)return 1;{const n=w0(t),o=w0(e);return n!==null?o!==null?n-o===0?t.length-e.length:n-o:-1:o!==null?1:t<e?-1:1}},xD=function(t,e){return t===e?0:t<e?-1:1},hl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},qf=function(t){if(typeof t!="object"||t===null)return mt(t);const e=[];for(const o in t)e.push(o);e.sort();let n="{";for(let o=0;o<e.length;o++)o!==0&&(n+=","),n+=mt(e[o]),n+=":",n+=qf(t[e[o]]);return n+="}",n},vx=function(t,e){const n=t.length;if(n<=e)return[t];const o=[];for(let l=0;l<n;l+=e)l+e>n?o.push(t.substring(l,n)):o.push(t.substring(l,l+e));return o};function St(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _x=function(t){j(!Gf(t),"Invalid JSON number");const e=11,n=52,o=(1<<e-1)-1;let l,a,c,h,g;t===0?(a=0,c=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-o)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),o),a=h+o,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-o-n))));const p=[];for(g=n;g;g-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(l?1:0),p.reverse();const v=p.join("");let x="";for(g=0;g<64;g+=8){let E=parseInt(v.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),x=x+E}return x.toLowerCase()},ED=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},CD=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function SD(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const o=new Error(t+" at "+e._path.toString()+": "+n);return o.code=t.toUpperCase(),o}const TD=new RegExp("^-?(0*)\\d{1,10}$"),bD=-2147483648,AD=2147483647,w0=function(t){if(TD.test(t)){const e=Number(t);if(e>=bD&&e<=AD)return e}return null},hs=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw wt("Exception was thrown by user callback.",n),e},Math.floor(0))}},ND=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},El=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$M(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(o=>this.appCheck=o)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){wt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,o){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,o):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',wt(e)}}class ma{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ma.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf="5",xx="v",Ex="s",Cx="r",Sx="f",Tx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bx="ls",Ax="p",ff="ac",Nx="websocket",wx="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,o,l,a=!1,c="",h=!1,g=!1,p=null){this.secure=n,this.namespace=o,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ji.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ji.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function ID(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Ix(t,e,n){j(typeof e=="string","typeof type must == string"),j(typeof n=="object","typeof params must == object");let o;if(e===Nx)o=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===wx)o=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ID(t)&&(n.ns=t.namespace);const l=[];return St(n,(a,c)=>{l.push(a+"="+c)}),o+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.counters_={}}incrementCounter(e,n=1){Tn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return AI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd={},Ld={};function Ff(t){const e=t.toString();return Pd[e]||(Pd[e]=new MD),Pd[e]}function DD(t,e){const n=t.toString();return Ld[n]||(Ld[n]=e()),Ld[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<o.length;++l)o[l]&&hs(()=>{this.onMessage_(o[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="start",UD="close",PD="pLPCommand",LD="pRTLPCB",Mx="id",Dx="pw",kx="ser",OD="cb",HD="seg",BD="ts",GD="d",qD="dframe",Ux=1870,Px=30,VD=Ux-Px,FD=25e3,zD=3e4;class Xo{constructor(e,n,o,l,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=o,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bl(e),this.stats_=Ff(n),this.urlFn=g=>(this.appCheckToken&&(g[ff]=this.appCheckToken),Ix(n,wx,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new kD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zD)),_D(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zf((...a)=>{const[c,h,g,p,v]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===R0)this.id=h,this.password=g;else if(c===UD)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const o={};o[R0]="t",o[kx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[OD]=this.scriptTagHolder.uniqueCallbackIdentifier),o[xx]=Vf,this.transportSessionId&&(o[Ex]=this.transportSessionId),this.lastSessionId&&(o[bx]=this.lastSessionId),this.applicationId&&(o[Ax]=this.applicationId),this.appCheckToken&&(o[ff]=this.appCheckToken),typeof location<"u"&&location.hostname&&Tx.test(location.hostname)&&(o[Cx]=Sx);const l=this.urlFn(o);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xo.forceAllow_=!0}static forceDisallow(){Xo.forceDisallow_=!0}static isAvailable(){return Xo.forceAllow_?!0:!Xo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ED()&&!CD()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=nx(n),l=vx(o,VD);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const o={};o[qD]="t",o[Mx]=e,o[Dx]=n,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class zf{constructor(e,n,o,l){this.onDisconnect=o,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gD(),window[PD+this.uniqueCallbackIdentifier]=e,window[LD+this.uniqueCallbackIdentifier]=n,this.myIFrame=zf.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Ct("frame writing exception"),h.stack&&Ct(h.stack),Ct(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ct("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Mx]=this.myID,e[Dx]=this.myPW,e[kx]=this.currentSerial;let n=this.urlFn(e),o="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Px+o.length<=Ux;){const c=this.pendingSegs.shift();o=o+"&"+HD+l+"="+c.seg+"&"+BD+l+"="+c.ts+"&"+GD+l+"="+c.d,l++}return n=n+o,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,o){this.pendingSegs.push({seg:e,ts:n,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const o=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(o,Math.floor(FD)),a=()=>{clearTimeout(l),o()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const l=o.readyState;(!l||l==="loaded"||l==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),n())},o.onerror=()=>{Ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=16384,JD=45e3;let Na=null;typeof MozWebSocket<"u"?Na=MozWebSocket:typeof WebSocket<"u"&&(Na=WebSocket);class hn{constructor(e,n,o,l,a,c,h){this.connId=e,this.applicationId=o,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bl(this.connId),this.stats_=Ff(n),this.connURL=hn.connectionURL_(n,c,h,l,o),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,o,l,a){const c={};return c[xx]=Vf,typeof location<"u"&&location.hostname&&Tx.test(location.hostname)&&(c[Cx]=Sx),n&&(c[Ex]=n),o&&(c[bx]=o),l&&(c[ff]=l),a&&(c[Ax]=a),Ix(e,Nx,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ji.set("previous_websocket_failure",!0);try{let o;qI(),this.mySock=new Na(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){hn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(n);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&Na!==null&&!hn.forceDisallow_}static previouslyFailed(){return ji.isInMemoryStorage||ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){ji.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const o=Al(n);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(j(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const o=this.extractFrameCount_(n);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const o=vx(n,YD);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(JD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hn.responsesRequiredToBeHealthy=2;hn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static get ALL_TRANSPORTS(){return[Xo,hn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=hn&&hn.isAvailable();let o=n&&!hn.previouslyFailed();if(e.webSocketOnly&&(n||wt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[hn];else{const l=this.transports_=[];for(const a of Rl.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);Rl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Rl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=6e4,QD=5e3,$D=10*1024,XD=100*1024,Od="t",I0="d",WD="s",M0="r",ZD="e",D0="o",k0="a",U0="n",P0="p",jD="h";class ek{constructor(e,n,o,l,a,c,h,g,p,v){this.id=e,this.repoInfo_=n,this.applicationId_=o,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bl("c:"+this.id+":"),this.transportManager_=new Rl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,o)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=El(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>XD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$D?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Od in e){const n=e[Od];n===k0?this.upgradeIfSecondaryHealthy_():n===M0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===D0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=hl("t",e),o=hl("d",e);if(n==="c")this.onSecondaryControl_(o);else if(n==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:P0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:k0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:U0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=hl("t",e),o=hl("d",e);n==="c"?this.onControl_(o):n==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=hl(Od,e);if(I0 in e){const o=e[I0];if(n===jD){const l={...o};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===U0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===WD?this.onConnectionShutdown_(o):n===M0?this.onReset_(o):n===ZD?df("Server Error: "+o):n===D0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):df("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,o=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Vf!==o&&wt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,o),El(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(KD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):El(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(QD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:P0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{put(e,n,o,l){}merge(e,n,o,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,o){}onDisconnectMerge(e,n,o){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let l=0;l<o.length;l++)o[l].callback.apply(o[l].context,n)}}on(e,n,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:o});const l=this.getInitialEvent(e);l&&n.apply(o,l)}off(e,n,o){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!o||o===l[a].context)){l.splice(a,1);return}}validateEventType_(e){j(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Ox{static getInstance(){return new wa}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=32,O0=768;class qe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let o=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[o]=this.pieces_[l],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Pe(){return new qe("")}function Se(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ai(t){return t.pieces_.length-t.pieceNum_}function Ye(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new qe(t.pieces_,e)}function Yf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function tk(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Il(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Hx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new qe(e,0)}function je(t,e){const n=[];for(let o=t.pieceNum_;o<t.pieces_.length;o++)n.push(t.pieces_[o]);if(e instanceof qe)for(let o=e.pieceNum_;o<e.pieces_.length;o++)n.push(e.pieces_[o]);else{const o=e.split("/");for(let l=0;l<o.length;l++)o[l].length>0&&n.push(o[l])}return new qe(n,0)}function Ne(t){return t.pieceNum_>=t.pieces_.length}function Ot(t,e){const n=Se(t),o=Se(e);if(n===null)return e;if(n===o)return Ot(Ye(t),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function nk(t,e){const n=Il(t,0),o=Il(e,0);for(let l=0;l<n.length&&l<o.length;l++){const a=so(n[l],o[l]);if(a!==0)return a}return n.length===o.length?0:n.length<o.length?-1:1}function Jf(t,e){if(Ai(t)!==Ai(e))return!1;for(let n=t.pieceNum_,o=e.pieceNum_;n<=t.pieces_.length;n++,o++)if(t.pieces_[n]!==e.pieces_[o])return!1;return!0}function ln(t,e){let n=t.pieceNum_,o=e.pieceNum_;if(Ai(t)>Ai(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[o])return!1;++n,++o}return!0}class ik{constructor(e,n){this.errorPrefix_=n,this.parts_=Il(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Ka(this.parts_[o]);Bx(this)}}function ok(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ka(e),Bx(t)}function sk(t){const e=t.parts_.pop();t.byteLength_-=Ka(e),t.parts_.length>0&&(t.byteLength_-=1)}function Bx(t){if(t.byteLength_>O0)throw new Error(t.errorPrefix_+"has a key path longer than "+O0+" bytes ("+t.byteLength_+").");if(t.parts_.length>L0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+L0+") or object contains a cycle "+Zi(t))}function Zi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Ox{static getInstance(){return new Kf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=1e3,lk=300*1e3,H0=30*1e3,rk=1.3,ak=3e4,uk="server_kill",B0=3;class zn extends Lx{constructor(e,n,o,l,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=zn.nextPersistentConnectionId_++,this.log_=Bl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pl,this.maxReconnectDelay_=lk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&wa.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,o){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(mt(a)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),o&&(this.requestCBHash_[l]=o)}get(e){this.initConnection_();const n=new Pl,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,o,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:n,query:e,tag:o};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(o)})}sendListen_(e){const n=e.query,o=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+o+" for "+l);const a={p:o},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,p=h.s;zn.warnOnListenWarnings_(g,n),(this.listens.get(o)&&this.listens.get(o).get(l))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(o,l),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Tn(e,"w")){const o=is(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();wt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||QI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=H0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=KI(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(n,o,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,o=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,o)})}unlisten(e,n){const o=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),j(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,e._queryObject,n)}sendUnlisten_(e,n,o,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";l&&(a.q=o,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:o})}onDisconnectMerge(e,n,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:o})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,o,l){const a={p:n,d:o};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,n,o,l){this.putInternal("p",e,n,o,l)}merge(e,n,o,l){this.putInternal("m",e,n,o,l)}putInternal(e,n,o,l,a){this.initConnection_();const c={p:n,d:o};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,o,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,o=>{if(o.s!=="ok"){const a=o.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+mt(e));const n=e.r,o=this.requestCBHash_[n];o&&(delete this.requestCBHash_[n],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):df("Unrecognized action received from server: "+mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>ak&&(this.reconnectDelay_=pl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+zn.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,o())},p=function(x){j(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(x)};this.realtime_={close:g,sendRequest:p};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[x,E]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?Ct("getToken() completed but was canceled"):(Ct("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=E&&E.token,h=new ek(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,o,T=>{wt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(uk)},a))}catch(x){this.log_("Failed to get token: "+x),c||(this.repoInfo_.nodeAdmin&&wt(x),g())}}}interrupt(e){Ct("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ct("Resuming connection for reason: "+e),delete this.interruptReasons_[e],p0(this.interruptReasons_)&&(this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let o;n?o=n.map(a=>qf(a)).join("$"):o="default";const l=this.removeListen_(e,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const o=new qe(e).toString();let l;if(this.listens.has(o)){const a=this.listens.get(o);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(e,n){Ct("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=B0&&(this.reconnectDelay_=H0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ct("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=B0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+mx.replace(/\./g,"-")]=1,lx()?e["framework.cordova"]=1:GI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=wa.getInstance().currentlyOnline();return p0(this.interruptReasons_)&&e}}zn.nextPersistentConnectionId_=0;zn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Te(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const o=new Te(os,e),l=new Te(os,n);return this.compare(o,l)!==0}minPost(){return Te.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let da;class Gx extends Qa{static get __EMPTY_NODE(){return da}static set __EMPTY_NODE(e){da=e}compare(e,n){return so(e.name,n.name)}isDefinedOn(e){throw fs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(eo,da)}makePost(e,n){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,da)}toString(){return".key"}}const ts=new Gx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,o,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?o(e.key,n):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ht{constructor(e,n,o,l,a){this.key=e,this.value=n,this.color=o??ht.RED,this.left=l??Ht.EMPTY_NODE,this.right=a??Ht.EMPTY_NODE}copy(e,n,o,l,a){return new ht(e??this.key,n??this.value,o??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let l=this;const a=o(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,o),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ht.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let o,l;if(o=this,n(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),n(e,o.key)===0){if(o.right.isEmpty())return Ht.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ht.RED=!0;ht.BLACK=!1;class ck{copy(e,n,o,l,a){return this}insert(e,n,o){return new ht(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ht{constructor(e,n=Ht.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ht(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ht.BLACK,null,null))}remove(e){return new Ht(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ht.BLACK,null,null))}get(e){let n,o=this.root_;for(;!o.isEmpty();){if(n=this.comparator_(e,o.key),n===0)return o.value;n<0?o=o.left:n>0&&(o=o.right)}return null}getPredecessorKey(e){let n,o=this.root_,l=null;for(;!o.isEmpty();)if(n=this.comparator_(e,o.key),n===0){if(o.left.isEmpty())return l?l.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else n<0?o=o.left:n>0&&(l=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fa(this.root_,null,this.comparator_,!0,e)}}Ht.EMPTY_NODE=new ck;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){return so(t.name,e.name)}function Qf(t,e){return so(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf;function fk(t){hf=t}const qx=function(t){return typeof t=="number"?"number:"+_x(t):"string:"+t},Vx=function(t){if(t.isLeafNode()){const e=t.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Tn(e,".sv"),"Priority must be a string or number.")}else j(t===hf||t.isEmpty(),"priority of unexpected type.");j(t===hf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G0;class ft{static set __childrenNodeConstructor(e){G0=e}static get __childrenNodeConstructor(){return G0}constructor(e,n=ft.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ft(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ne(e)?this:Se(e)===".priority"?this.priorityNode_:ft.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const o=Se(e);return o===null?n:n.isEmpty()&&o!==".priority"?this:(j(o!==".priority"||Ai(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_x(this.value_):e+=this.value_,this.lazyHash_=yx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ft.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ft.__childrenNodeConstructor?-1:(j(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,o=typeof this.value_,l=ft.VALUE_TYPE_ORDER.indexOf(n),a=ft.VALUE_TYPE_ORDER.indexOf(o);return j(l>=0,"Unknown leaf type: "+n),j(a>=0,"Unknown leaf type: "+o),l===a?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ft.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fx,zx;function hk(t){Fx=t}function pk(t){zx=t}class mk extends Qa{compare(e,n){const o=e.node.getPriority(),l=n.node.getPriority(),a=o.compareTo(l);return a===0?so(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(eo,new ft("[PRIORITY-POST]",zx))}makePost(e,n){const o=Fx(e);return new Te(n,new ft("[PRIORITY-POST]",o))}toString(){return".priority"}}const et=new mk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=Math.log(2);class yk{constructor(e){const n=a=>parseInt(Math.log(a)/gk,10),o=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=o(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ra=function(t,e,n,o){t.sort(e);const l=function(g,p){const v=p-g;let x,E;if(v===0)return null;if(v===1)return x=t[g],E=n?n(x):x,new ht(E,x.node,ht.BLACK,null,null);{const T=parseInt(v/2,10)+g,N=l(g,T),M=l(T+1,p);return x=t[T],E=n?n(x):x,new ht(E,x.node,ht.BLACK,N,M)}},a=function(g){let p=null,v=null,x=t.length;const E=function(N,M){const I=x-N,H=x;x-=N;const z=l(I+1,H),q=t[I],V=n?n(q):q;T(new ht(V,q.node,M,null,z))},T=function(N){p?(p.left=N,p=N):(v=N,p=N)};for(let N=0;N<g.count;++N){const M=g.nextBitIsOne(),I=Math.pow(2,g.count-(N+1));M?E(I,ht.BLACK):(E(I,ht.BLACK),E(I,ht.RED))}return v},c=new yk(t.length),h=a(c);return new Ht(o||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd;const Jo={};class Fn{static get Default(){return j(Jo&&et,"ChildrenNode.ts has not been loaded"),Hd=Hd||new Fn({".priority":Jo},{".priority":et}),Hd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=is(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ht?n:null}hasIndex(e){return Tn(this.indexSet_,e.toString())}addIndex(e,n){j(e!==ts,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let l=!1;const a=n.getIterator(Te.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),o.push(c),c=a.getNext();let h;l?h=Ra(o,e.getCompare()):h=Jo;const g=e.toString(),p={...this.indexSet_};p[g]=e;const v={...this.indexes_};return v[g]=h,new Fn(v,p)}addToIndexes(e,n){const o=Sa(this.indexes_,(l,a)=>{const c=is(this.indexSet_,a);if(j(c,"Missing index implementation for "+a),l===Jo)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(Te.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&h.push(p),p=g.getNext();return h.push(e),Ra(h,c.getCompare())}else return Jo;else{const h=n.get(e.name);let g=l;return h&&(g=g.remove(new Te(e.name,h))),g.insert(e,e.node)}});return new Fn(o,this.indexSet_)}removeFromIndexes(e,n){const o=Sa(this.indexes_,l=>{if(l===Jo)return l;{const a=n.get(e.name);return a?l.remove(new Te(e.name,a)):l}});return new Fn(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class ge{static get EMPTY_NODE(){return ml||(ml=new ge(new Ht(Qf),null,Fn.Default))}constructor(e,n,o){this.children_=e,this.priorityNode_=n,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&Vx(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ml}updatePriority(e){return this.children_.isEmpty()?this:new ge(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ml:n}}getChild(e){const n=Se(e);return n===null?this:this.getImmediateChild(n).getChild(Ye(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(j(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const o=new Te(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(o,this.children_));const c=l.isEmpty()?ml:this.priorityNode_;return new ge(l,c,a)}}updateChild(e,n){const o=Se(e);if(o===null)return n;{j(Se(e)!==".priority"||Ai(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Ye(e),n);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let o=0,l=0,a=!0;if(this.forEachChild(et,(c,h)=>{n[c]=h.val(e),o++,a&&ge.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*o){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+qx(this.getPriority().val())+":"),this.forEachChild(et,(n,o)=>{const l=o.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":yx(e)}return this.lazyHash_}getPredecessorChildName(e,n,o){const l=this.resolveIndex_(o);if(l){const a=l.getPredecessorKey(new Te(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Te(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const o=n.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Te(n,this.children_.get(n)):null}forEachChild(e,n){const o=this.resolveIndex_(e);return o?o.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Te.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const o=this.resolveIndex_(n);if(o)return o.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Te.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gl?-1:0}withIndex(e){if(e===ts||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ge(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===ts||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const o=this.getIterator(et),l=n.getIterator(et);let a=o.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=o.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===ts?null:this.indexMap_.get(e.toString())}}ge.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vk extends ge{constructor(){super(new Ht(Qf),ge.EMPTY_NODE,Fn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ge.EMPTY_NODE}isEmpty(){return!1}}const Gl=new vk;Object.defineProperties(Te,{MIN:{value:new Te(os,ge.EMPTY_NODE)},MAX:{value:new Te(eo,Gl)}});Gx.__EMPTY_NODE=ge.EMPTY_NODE;ft.__childrenNodeConstructor=ge;fk(Gl);pk(Gl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=!0;function pt(t,e=null){if(t===null)return ge.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ft(n,pt(e))}if(!(t instanceof Array)&&_k){const n=[];let o=!1;if(St(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=pt(h);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),n.push(new Te(c,g)))}}),n.length===0)return ge.EMPTY_NODE;const a=Ra(n,dk,c=>c.name,Qf);if(o){const c=Ra(n,et.getCompare());return new ge(a,pt(e),new Fn({".priority":c},{".priority":et}))}else return new ge(a,pt(e),Fn.Default)}else{let n=ge.EMPTY_NODE;return St(t,(o,l)=>{if(Tn(t,o)&&o.substring(0,1)!=="."){const a=pt(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(o,a))}}),n.updatePriority(pt(e))}}hk(pt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk extends Qa{constructor(e){super(),this.indexPath_=e,j(!Ne(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const o=this.extractChild(e.node),l=this.extractChild(n.node),a=o.compareTo(l);return a===0?so(e.name,n.name):a}makePost(e,n){const o=pt(e),l=ge.EMPTY_NODE.updateChild(this.indexPath_,o);return new Te(n,l)}maxPost(){const e=ge.EMPTY_NODE.updateChild(this.indexPath_,Gl);return new Te(eo,e)}toString(){return Il(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek extends Qa{compare(e,n){const o=e.node.compareTo(n.node);return o===0?so(e.name,n.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){const o=pt(e);return new Te(n,o)}toString(){return".value"}}const Ck=new Ek;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t){return{type:"value",snapshotNode:t}}function ss(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ml(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Dl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.index_=e}updateChild(e,n,o,l,a,c){j(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(l).equals(o.getChild(l))&&h.isEmpty()===o.isEmpty()||(c!=null&&(o.isEmpty()?e.hasChild(n)?c.trackChildChange(Ml(n,h)):j(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(ss(n,o)):c.trackChildChange(Dl(n,o,h))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(n,o).withIndex(this.index_)}updateFullNode(e,n,o){return o!=null&&(e.isLeafNode()||e.forEachChild(et,(l,a)=>{n.hasChild(l)||o.trackChildChange(Ml(l,a))}),n.isLeafNode()||n.forEachChild(et,(l,a)=>{if(e.hasChild(l)){const c=e.getImmediateChild(l);c.equals(a)||o.trackChildChange(Dl(l,a,c))}else o.trackChildChange(ss(l,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ge.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.indexedFilter_=new $f(e.getIndex()),this.index_=e.getIndex(),this.startPost_=kl.getStartPost_(e),this.endPost_=kl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&o}updateChild(e,n,o,l,a,c){return this.matches(new Te(n,o))||(o=ge.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,o,l,a,c)}updateFullNode(e,n,o){n.isLeafNode()&&(n=ge.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(ge.EMPTY_NODE);const a=this;return n.forEachChild(et,(c,h)=>{a.matches(new Te(c,h))||(l=l.updateImmediateChild(c,ge.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=n=>{const o=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new kl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,o,l,a,c){return this.rangedFilter_.matches(new Te(n,o))||(o=ge.EMPTY_NODE),e.getImmediateChild(n).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,o,l,a,c):this.fullLimitUpdateChild_(e,n,o,a,c)}updateFullNode(e,n,o){let l;if(n.isLeafNode()||n.isEmpty())l=ge.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=ge.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(ge.EMPTY_NODE);let a;this.reverse_?a=l.getReverseIterator(this.index_):a=l.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:l=l.updateImmediateChild(h.name,ge.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,o)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,o,l,a){let c;if(this.reverse_){const x=this.index_.getCompare();c=(E,T)=>x(T,E)}else c=this.index_.getCompare();const h=e;j(h.numChildren()===this.limit_,"");const g=new Te(n,o),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(n)){const x=h.getImmediateChild(n);let E=l.getChildAfterChild(this.index_,p,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=l.getChildAfterChild(this.index_,E,this.reverse_);const T=E==null?1:c(E,g);if(v&&!o.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(Dl(n,o,x)),h.updateImmediateChild(n,o);{a!=null&&a.trackChildChange(Ml(n,x));const M=h.updateImmediateChild(n,ge.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(ss(E.name,E.node)),M.updateImmediateChild(E.name,E.node)):M}}else return o.isEmpty()?e:v&&c(p,g)>=0?(a!=null&&(a.trackChildChange(Ml(p.name,p.node)),a.trackChildChange(ss(n,o))),h.updateImmediateChild(n,o).updateImmediateChild(p.name,ge.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=et}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:os}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===et}copy(){const e=new Xf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bk(t){return t.loadsAllData()?new $f(t.getIndex()):t.hasLimit()?new Tk(t):new kl(t)}function q0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===et?n="$priority":t.index_===Ck?n="$value":t.index_===ts?n="$key":(j(t.index_ instanceof xk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){const o=t.startAfterSet_?"startAfter":"startAt";e[o]=mt(t.indexStartValue_),t.startNameSet_&&(e[o]+=","+mt(t.indexStartName_))}if(t.endSet_){const o=t.endBeforeSet_?"endBefore":"endAt";e[o]=mt(t.indexEndValue_),t.endNameSet_&&(e[o]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function V0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==et&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Lx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,o,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.log_=Bl("p:rest:"),this.listens_={}}listen(e,n,o,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Ia.getListenId_(e,o),h={};this.listens_[c]=h;const g=q0(e._queryParams);this.restRequest_(a+".json",g,(p,v)=>{let x=v;if(p===404&&(x=null,p=null),p===null&&this.onDataUpdate_(a,x,!1,o),is(this.listens_,c)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",l(E,null)}})}unlisten(e,n){const o=Ia.getListenId_(e,n);delete this.listens_[o]}get(e){const n=q0(e._queryParams),o=e._path.toString(),l=new Pl;return this.restRequest_(o+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(o,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},o){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$I(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(o&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Al(h.responseText)}catch{wt("Failed to parse JSON response for "+c+": "+h.responseText)}o(null,g)}else h.status!==401&&h.status!==404&&wt("Got unsuccessful REST response for "+c+" Status: "+h.status),o(h.status);o=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.rootNode_=ge.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(){return{value:null,children:new Map}}function Jx(t,e,n){if(Ne(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const o=Se(e);t.children.has(o)||t.children.set(o,Ma());const l=t.children.get(o);e=Ye(e),Jx(l,e,n)}}function pf(t,e,n){t.value!==null?n(e,t.value):Nk(t,(o,l)=>{const a=new qe(e.toString()+"/"+o);pf(l,a,n)})}function Nk(t,e){t.children.forEach((n,o)=>{e(o,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&St(this.last_,(o,l)=>{n[o]=n[o]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=10*1e3,Rk=30*1e3,Ik=300*1e3;class Mk{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new wk(e);const o=F0+(Rk-F0)*Math.random();El(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),n={};let o=!1;St(e,(l,a)=>{a>0&&Tn(this.statsToReport_,l)&&(n[l]=a,o=!0)}),o&&this.server_.reportStats(n),El(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ik))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(pn||(pn={}));function Wf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,o){this.path=e,this.affectedTree=n,this.revert=o,this.type=pn.ACK_USER_WRITE,this.source=Wf()}operationForChild(e){if(Ne(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new qe(e));return new Da(Pe(),n,this.revert)}}else return j(Se(this.path)===e,"operationForChild called for unrelated child."),new Da(Ye(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.source=e,this.path=n,this.type=pn.LISTEN_COMPLETE}operationForChild(e){return Ne(this.path)?new Ul(this.source,Pe()):new Ul(this.source,Ye(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n,o){this.source=e,this.path=n,this.snap=o,this.type=pn.OVERWRITE}operationForChild(e){return Ne(this.path)?new to(this.source,Pe(),this.snap.getImmediateChild(e)):new to(this.source,Ye(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,o){this.source=e,this.path=n,this.children=o,this.type=pn.MERGE}operationForChild(e){if(Ne(this.path)){const n=this.children.subtree(new qe(e));return n.isEmpty()?null:n.value?new to(this.source,Pe(),n.value):new ls(this.source,Pe(),n)}else return j(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ls(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,o){this.node_=e,this.fullyInitialized_=n,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ne(e))return this.isFullyInitialized()&&!this.filtered_;const n=Se(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function kk(t,e,n,o){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Sk(c.childName,c.snapshotNode))}),gl(t,l,"child_removed",e,o,n),gl(t,l,"child_added",e,o,n),gl(t,l,"child_moved",a,o,n),gl(t,l,"child_changed",e,o,n),gl(t,l,"value",e,o,n),l}function gl(t,e,n,o,l,a){const c=o.filter(h=>h.type===n);c.sort((h,g)=>Pk(t,h,g)),c.forEach(h=>{const g=Uk(t,h,a);l.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(g,t.query_))})})}function Uk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Pk(t,e,n){if(e.childName==null||n.childName==null)throw fs("Should only compare child_ events.");const o=new Te(e.childName,e.snapshotNode),l=new Te(n.childName,n.snapshotNode);return t.index_.compare(o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t,e){return{eventCache:t,serverCache:e}}function Cl(t,e,n,o){return $a(new no(e,n,o),t.serverCache)}function Kx(t,e,n,o){return $a(t.eventCache,new no(e,n,o))}function mf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function io(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd;const Lk=()=>(Bd||(Bd=new Ht(xD)),Bd);class Fe{static fromObject(e){let n=new Fe(null);return St(e,(o,l)=>{n=n.set(new qe(o),l)}),n}constructor(e,n=Lk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(Ne(e))return null;{const o=Se(e),l=this.children.get(o);if(l!==null){const a=l.findRootMostMatchingPathAndValue(Ye(e),n);return a!=null?{path:je(new qe(o),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ne(e))return this;{const n=Se(e),o=this.children.get(n);return o!==null?o.subtree(Ye(e)):new Fe(null)}}set(e,n){if(Ne(e))return new Fe(n,this.children);{const o=Se(e),a=(this.children.get(o)||new Fe(null)).set(Ye(e),n),c=this.children.insert(o,a);return new Fe(this.value,c)}}remove(e){if(Ne(e))return this.children.isEmpty()?new Fe(null):new Fe(null,this.children);{const n=Se(e),o=this.children.get(n);if(o){const l=o.remove(Ye(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new Fe(null):new Fe(this.value,a)}else return this}}get(e){if(Ne(e))return this.value;{const n=Se(e),o=this.children.get(n);return o?o.get(Ye(e)):null}}setTree(e,n){if(Ne(e))return n;{const o=Se(e),a=(this.children.get(o)||new Fe(null)).setTree(Ye(e),n);let c;return a.isEmpty()?c=this.children.remove(o):c=this.children.insert(o,a),new Fe(this.value,c)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){const o={};return this.children.inorderTraversal((l,a)=>{o[l]=a.fold_(je(e,l),n)}),n(e,this.value,o)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,o){const l=this.value?o(n,this.value):!1;if(l)return l;if(Ne(e))return null;{const a=Se(e),c=this.children.get(a);return c?c.findOnPath_(Ye(e),je(n,a),o):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,o){if(Ne(e))return this;{this.value&&o(n,this.value);const l=Se(e),a=this.children.get(l);return a?a.foreachOnPath_(Ye(e),je(n,l),o):new Fe(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((o,l)=>{l.foreach_(je(e,o),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,o)=>{o.value&&e(n,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.writeTree_=e}static empty(){return new yn(new Fe(null))}}function Sl(t,e,n){if(Ne(e))return new yn(new Fe(n));{const o=t.writeTree_.findRootMostValueAndPath(e);if(o!=null){const l=o.path;let a=o.value;const c=Ot(l,e);return a=a.updateChild(c,n),new yn(t.writeTree_.set(l,a))}else{const l=new Fe(n),a=t.writeTree_.setTree(e,l);return new yn(a)}}}function gf(t,e,n){let o=t;return St(n,(l,a)=>{o=Sl(o,je(e,l),a)}),o}function z0(t,e){if(Ne(e))return yn.empty();{const n=t.writeTree_.setTree(e,new Fe(null));return new yn(n)}}function yf(t,e){return lo(t,e)!=null}function lo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ot(n.path,e)):null}function Y0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(et,(o,l)=>{e.push(new Te(o,l))}):t.writeTree_.children.inorderTraversal((o,l)=>{l.value!=null&&e.push(new Te(o,l.value))}),e}function bi(t,e){if(Ne(e))return t;{const n=lo(t,e);return n!=null?new yn(new Fe(n)):new yn(t.writeTree_.subtree(e))}}function vf(t){return t.writeTree_.isEmpty()}function rs(t,e){return Qx(Pe(),t.writeTree_,e)}function Qx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let o=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(j(a.value!==null,"Priority writes must always be leaf nodes"),o=a.value):n=Qx(je(t,l),a,n)}),!n.getChild(t).isEmpty()&&o!==null&&(n=n.updateChild(je(t,".priority"),o)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e){return Zx(e,t)}function Ok(t,e,n,o,l){j(o>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:o,visible:l}),l&&(t.visibleWrites=Sl(t.visibleWrites,e,n)),t.lastWriteId=o}function Hk(t,e,n,o){j(o>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:o,visible:!0}),t.visibleWrites=gf(t.visibleWrites,e,n),t.lastWriteId=o}function Bk(t,e){for(let n=0;n<t.allWrites.length;n++){const o=t.allWrites[n];if(o.writeId===e)return o}return null}function Gk(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);j(n>=0,"removeWrite called with nonexistent writeId.");const o=t.allWrites[n];t.allWrites.splice(n,1);let l=o.visible,a=!1,c=t.allWrites.length-1;for(;l&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&qk(h,o.path)?l=!1:ln(o.path,h.path)&&(a=!0)),c--}if(l){if(a)return Vk(t),!0;if(o.snap)t.visibleWrites=z0(t.visibleWrites,o.path);else{const h=o.children;St(h,g=>{t.visibleWrites=z0(t.visibleWrites,je(o.path,g))})}return!0}else return!1}function qk(t,e){if(t.snap)return ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ln(je(t.path,n),e))return!0;return!1}function Vk(t){t.visibleWrites=$x(t.allWrites,Fk,Pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Fk(t){return t.visible}function $x(t,e,n){let o=yn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const c=a.path;let h;if(a.snap)ln(n,c)?(h=Ot(n,c),o=Sl(o,h,a.snap)):ln(c,n)&&(h=Ot(c,n),o=Sl(o,Pe(),a.snap.getChild(h)));else if(a.children){if(ln(n,c))h=Ot(n,c),o=gf(o,h,a.children);else if(ln(c,n))if(h=Ot(c,n),Ne(h))o=gf(o,Pe(),a.children);else{const g=is(a.children,Se(h));if(g){const p=g.getChild(Ye(h));o=Sl(o,Pe(),p)}}}else throw fs("WriteRecord should have .snap or .children")}}return o}function Xx(t,e,n,o,l){if(!o&&!l){const a=lo(t.visibleWrites,e);if(a!=null)return a;{const c=bi(t.visibleWrites,e);if(vf(c))return n;if(n==null&&!yf(c,Pe()))return null;{const h=n||ge.EMPTY_NODE;return rs(c,h)}}}else{const a=bi(t.visibleWrites,e);if(!l&&vf(a))return n;if(!l&&n==null&&!yf(a,Pe()))return null;{const c=function(p){return(p.visible||l)&&(!o||!~o.indexOf(p.writeId))&&(ln(p.path,e)||ln(e,p.path))},h=$x(t.allWrites,c,e),g=n||ge.EMPTY_NODE;return rs(h,g)}}}function zk(t,e,n){let o=ge.EMPTY_NODE;const l=lo(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(et,(a,c)=>{o=o.updateImmediateChild(a,c)}),o;if(n){const a=bi(t.visibleWrites,e);return n.forEachChild(et,(c,h)=>{const g=rs(bi(a,new qe(c)),h);o=o.updateImmediateChild(c,g)}),Y0(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}else{const a=bi(t.visibleWrites,e);return Y0(a).forEach(c=>{o=o.updateImmediateChild(c.name,c.node)}),o}}function Yk(t,e,n,o,l){j(o||l,"Either existingEventSnap or existingServerSnap must exist");const a=je(e,n);if(yf(t.visibleWrites,a))return null;{const c=bi(t.visibleWrites,a);return vf(c)?l.getChild(n):rs(c,l.getChild(n))}}function Jk(t,e,n,o){const l=je(e,n),a=lo(t.visibleWrites,l);if(a!=null)return a;if(o.isCompleteForChild(n)){const c=bi(t.visibleWrites,l);return rs(c,o.getNode().getImmediateChild(n))}else return null}function Kk(t,e){return lo(t.visibleWrites,e)}function Qk(t,e,n,o,l,a,c){let h;const g=bi(t.visibleWrites,e),p=lo(g,Pe());if(p!=null)h=p;else if(n!=null)h=rs(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const v=[],x=c.getCompare(),E=a?h.getReverseIteratorFrom(o,c):h.getIteratorFrom(o,c);let T=E.getNext();for(;T&&v.length<l;)x(T,o)!==0&&v.push(T),T=E.getNext();return v}else return[]}function $k(){return{visibleWrites:yn.empty(),allWrites:[],lastWriteId:-1}}function ka(t,e,n,o){return Xx(t.writeTree,t.treePath,e,n,o)}function th(t,e){return zk(t.writeTree,t.treePath,e)}function J0(t,e,n,o){return Yk(t.writeTree,t.treePath,e,n,o)}function Ua(t,e){return Kk(t.writeTree,je(t.treePath,e))}function Xk(t,e,n,o,l,a){return Qk(t.writeTree,t.treePath,e,n,o,l,a)}function nh(t,e,n){return Jk(t.writeTree,t.treePath,e,n)}function Wx(t,e){return Zx(je(t.treePath,e),t.writeTree)}function Zx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,o=e.childName;j(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),j(o!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(o);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(o,Dl(o,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(o);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(o,Ml(o,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(o,ss(o,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(o,Dl(o,e.snapshotNode,l.oldSnap));else throw fs("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{getCompleteChild(e){return null}getChildAfterChild(e,n,o){return null}}const jx=new Zk;class ih{constructor(e,n,o=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=o}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new no(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nh(this.writes_,e,o)}}getChildAfterChild(e,n,o){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:io(this.viewCache_),a=Xk(this.writes_,l,n,1,o,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(t){return{filter:t}}function e2(t,e){j(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function t2(t,e,n,o,l){const a=new Wk;let c,h;if(n.type===pn.OVERWRITE){const p=n;p.source.fromUser?c=_f(t,e,p.path,p.snap,o,l,a):(j(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Ne(p.path),c=Pa(t,e,p.path,p.snap,o,l,h,a))}else if(n.type===pn.MERGE){const p=n;p.source.fromUser?c=i2(t,e,p.path,p.children,o,l,a):(j(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),c=xf(t,e,p.path,p.children,o,l,h,a))}else if(n.type===pn.ACK_USER_WRITE){const p=n;p.revert?c=l2(t,e,p.path,o,l,a):c=o2(t,e,p.path,p.affectedTree,o,l,a)}else if(n.type===pn.LISTEN_COMPLETE)c=s2(t,e,n.path,o,a);else throw fs("Unknown operation type: "+n.type);const g=a.getChanges();return n2(e,c,g),{viewCache:c,changes:g}}function n2(t,e,n){const o=e.eventCache;if(o.isFullyInitialized()){const l=o.getNode().isLeafNode()||o.getNode().isEmpty(),a=mf(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!o.getNode().equals(a)||!o.getNode().getPriority().equals(a.getPriority()))&&n.push(Yx(mf(e)))}}function eE(t,e,n,o,l,a){const c=e.eventCache;if(Ua(o,n)!=null)return e;{let h,g;if(Ne(n))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=io(e),v=p instanceof ge?p:ge.EMPTY_NODE,x=th(o,v);h=t.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const p=ka(o,io(e));h=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=Se(n);if(p===".priority"){j(Ai(n)===1,"Can't have a priority with additional path components");const v=c.getNode();g=e.serverCache.getNode();const x=J0(o,n,v,g);x!=null?h=t.filter.updatePriority(v,x):h=c.getNode()}else{const v=Ye(n);let x;if(c.isCompleteForChild(p)){g=e.serverCache.getNode();const E=J0(o,n,c.getNode(),g);E!=null?x=c.getNode().getImmediateChild(p).updateChild(v,E):x=c.getNode().getImmediateChild(p)}else x=nh(o,p,e.serverCache);x!=null?h=t.filter.updateChild(c.getNode(),p,x,v,l,a):h=c.getNode()}}return Cl(e,h,c.isFullyInitialized()||Ne(n),t.filter.filtersNodes())}}function Pa(t,e,n,o,l,a,c,h){const g=e.serverCache;let p;const v=c?t.filter:t.filter.getIndexedFilter();if(Ne(n))p=v.updateFullNode(g.getNode(),o,null);else if(v.filtersNodes()&&!g.isFiltered()){const T=g.getNode().updateChild(n,o);p=v.updateFullNode(g.getNode(),T,null)}else{const T=Se(n);if(!g.isCompleteForPath(n)&&Ai(n)>1)return e;const N=Ye(n),I=g.getNode().getImmediateChild(T).updateChild(N,o);T===".priority"?p=v.updatePriority(g.getNode(),I):p=v.updateChild(g.getNode(),T,I,N,jx,null)}const x=Kx(e,p,g.isFullyInitialized()||Ne(n),v.filtersNodes()),E=new ih(l,x,a);return eE(t,x,n,l,E,h)}function _f(t,e,n,o,l,a,c){const h=e.eventCache;let g,p;const v=new ih(l,e,a);if(Ne(n))p=t.filter.updateFullNode(e.eventCache.getNode(),o,c),g=Cl(e,p,!0,t.filter.filtersNodes());else{const x=Se(n);if(x===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),o),g=Cl(e,p,h.isFullyInitialized(),h.isFiltered());else{const E=Ye(n),T=h.getNode().getImmediateChild(x);let N;if(Ne(E))N=o;else{const M=v.getCompleteChild(x);M!=null?Yf(E)===".priority"&&M.getChild(Hx(E)).isEmpty()?N=M:N=M.updateChild(E,o):N=ge.EMPTY_NODE}if(T.equals(N))g=e;else{const M=t.filter.updateChild(h.getNode(),x,N,E,v,c);g=Cl(e,M,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function K0(t,e){return t.eventCache.isCompleteForChild(e)}function i2(t,e,n,o,l,a,c){let h=e;return o.foreach((g,p)=>{const v=je(n,g);K0(e,Se(v))&&(h=_f(t,h,v,p,l,a,c))}),o.foreach((g,p)=>{const v=je(n,g);K0(e,Se(v))||(h=_f(t,h,v,p,l,a,c))}),h}function Q0(t,e,n){return n.foreach((o,l)=>{e=e.updateChild(o,l)}),e}function xf(t,e,n,o,l,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;Ne(n)?p=o:p=new Fe(null).setTree(n,o);const v=e.serverCache.getNode();return p.children.inorderTraversal((x,E)=>{if(v.hasChild(x)){const T=e.serverCache.getNode().getImmediateChild(x),N=Q0(t,T,E);g=Pa(t,g,new qe(x),N,l,a,c,h)}}),p.children.inorderTraversal((x,E)=>{const T=!e.serverCache.isCompleteForChild(x)&&E.value===null;if(!v.hasChild(x)&&!T){const N=e.serverCache.getNode().getImmediateChild(x),M=Q0(t,N,E);g=Pa(t,g,new qe(x),M,l,a,c,h)}}),g}function o2(t,e,n,o,l,a,c){if(Ua(l,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(o.value!=null){if(Ne(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return Pa(t,e,n,g.getNode().getChild(n),l,a,h,c);if(Ne(n)){let p=new Fe(null);return g.getNode().forEachChild(ts,(v,x)=>{p=p.set(new qe(v),x)}),xf(t,e,n,p,l,a,h,c)}else return e}else{let p=new Fe(null);return o.foreach((v,x)=>{const E=je(n,v);g.isCompleteForPath(E)&&(p=p.set(v,g.getNode().getChild(E)))}),xf(t,e,n,p,l,a,h,c)}}function s2(t,e,n,o,l){const a=e.serverCache,c=Kx(e,a.getNode(),a.isFullyInitialized()||Ne(n),a.isFiltered());return eE(t,c,n,o,jx,l)}function l2(t,e,n,o,l,a){let c;if(Ua(o,n)!=null)return e;{const h=new ih(o,e,l),g=e.eventCache.getNode();let p;if(Ne(n)||Se(n)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=ka(o,io(e));else{const x=e.serverCache.getNode();j(x instanceof ge,"serverChildren would be complete if leaf node"),v=th(o,x)}v=v,p=t.filter.updateFullNode(g,v,a)}else{const v=Se(n);let x=nh(o,v,e.serverCache);x==null&&e.serverCache.isCompleteForChild(v)&&(x=g.getImmediateChild(v)),x!=null?p=t.filter.updateChild(g,v,x,Ye(n),h,a):e.eventCache.getNode().hasChild(v)?p=t.filter.updateChild(g,v,ge.EMPTY_NODE,Ye(n),h,a):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=ka(o,io(e)),c.isLeafNode()&&(p=t.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||Ua(o,Pe())!=null,Cl(e,p,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,l=new $f(o.getIndex()),a=bk(o);this.processor_=jk(a);const c=n.serverCache,h=n.eventCache,g=l.updateFullNode(ge.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(ge.EMPTY_NODE,h.getNode(),null),v=new no(g,c.isFullyInitialized(),l.filtersNodes()),x=new no(p,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=$a(x,v),this.eventGenerator_=new Dk(this.query_)}get query(){return this.query_}}function a2(t){return t.viewCache_.serverCache.getNode()}function u2(t,e){const n=io(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ne(e)&&!n.getImmediateChild(Se(e)).isEmpty())?n.getChild(e):null}function $0(t){return t.eventRegistrations_.length===0}function c2(t,e){t.eventRegistrations_.push(e)}function X0(t,e,n){const o=[];if(n){j(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,l);c&&o.push(c)})}if(e){let l=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))l.push(c);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return o}function W0(t,e,n,o){e.type===pn.MERGE&&e.source.queryId!==null&&(j(io(t.viewCache_),"We should always have a full cache before handling merges"),j(mf(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=t2(t.processor_,l,e,n,o);return e2(t.processor_,a.viewCache),j(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,tE(t,a.changes,a.viewCache.eventCache.getNode(),null)}function d2(t,e){const n=t.viewCache_.eventCache,o=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(et,(a,c)=>{o.push(ss(a,c))}),n.isFullyInitialized()&&o.push(Yx(n.getNode())),tE(t,o,n.getNode(),e)}function tE(t,e,n,o){const l=o?[o]:t.eventRegistrations_;return kk(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let La;class f2{constructor(){this.views=new Map}}function h2(t){j(!La,"__referenceConstructor has already been defined"),La=t}function p2(){return j(La,"Reference.ts has not been loaded"),La}function m2(t){return t.views.size===0}function oh(t,e,n,o){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return j(a!=null,"SyncTree gave us an op for an invalid query."),W0(a,e,n,o)}else{let a=[];for(const c of t.views.values())a=a.concat(W0(c,e,n,o));return a}}function g2(t,e,n,o,l){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let h=ka(n,l?o:null),g=!1;h?g=!0:o instanceof ge?(h=th(n,o),g=!1):(h=ge.EMPTY_NODE,g=!1);const p=$a(new no(h,g,!1),new no(o,l,!1));return new r2(e,p)}return c}function y2(t,e,n,o,l,a){const c=g2(t,e,o,l,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),c2(c,n),d2(c,n)}function v2(t,e,n,o){const l=e._queryIdentifier,a=[];let c=[];const h=Ni(t);if(l==="default")for(const[g,p]of t.views.entries())c=c.concat(X0(p,n,o)),$0(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||a.push(p.query));else{const g=t.views.get(l);g&&(c=c.concat(X0(g,n,o)),$0(g)&&(t.views.delete(l),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Ni(t)&&a.push(new(p2())(e._repo,e._path)),{removed:a,events:c}}function nE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ns(t,e){let n=null;for(const o of t.views.values())n=n||u2(o,e);return n}function iE(t,e){if(e._queryParams.loadsAllData())return Xa(t);{const o=e._queryIdentifier;return t.views.get(o)}}function oE(t,e){return iE(t,e)!=null}function Ni(t){return Xa(t)!=null}function Xa(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa;function _2(t){j(!Oa,"__referenceConstructor has already been defined"),Oa=t}function x2(){return j(Oa,"Reference.ts has not been loaded"),Oa}let E2=1;class Z0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=$k(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sE(t,e,n,o,l){return Ok(t.pendingWriteTree_,e,n,o,l),l?ps(t,new to(Wf(),e,n)):[]}function C2(t,e,n,o){Hk(t.pendingWriteTree_,e,n,o);const l=Fe.fromObject(n);return ps(t,new ls(Wf(),e,l))}function Ci(t,e,n=!1){const o=Bk(t.pendingWriteTree_,e);if(Gk(t.pendingWriteTree_,e)){let a=new Fe(null);return o.snap!=null?a=a.set(Pe(),!0):St(o.children,c=>{a=a.set(new qe(c),!0)}),ps(t,new Da(o.path,a,n))}else return[]}function Wa(t,e,n){return ps(t,new to(Zf(),e,n))}function S2(t,e,n){const o=Fe.fromObject(n);return ps(t,new ls(Zf(),e,o))}function T2(t,e){return ps(t,new Ul(Zf(),e))}function b2(t,e,n){const o=lh(t,n);if(o){const l=rh(o),a=l.path,c=l.queryId,h=Ot(a,e),g=new Ul(jf(c),h);return ah(t,a,g)}else return[]}function Ef(t,e,n,o,l=!1){const a=e._path,c=t.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||oE(c,e))){const g=v2(c,e,n,o);m2(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const p=g.removed;if(h=g.events,!l){const v=p.findIndex(E=>E._queryParams.loadsAllData())!==-1,x=t.syncPointTree_.findOnPath(a,(E,T)=>Ni(T));if(v&&!x){const E=t.syncPointTree_.subtree(a);if(!E.isEmpty()){const T=w2(E);for(let N=0;N<T.length;++N){const M=T[N],I=M.query,H=aE(t,M);t.listenProvider_.startListening(Tl(I),Ha(t,I),H.hashFn,H.onComplete)}}}!x&&p.length>0&&!o&&(v?t.listenProvider_.stopListening(Tl(e),null):p.forEach(E=>{const T=t.queryToTagMap.get(Za(E));t.listenProvider_.stopListening(Tl(E),T)}))}R2(t,p)}return h}function A2(t,e,n,o){const l=lh(t,o);if(l!=null){const a=rh(l),c=a.path,h=a.queryId,g=Ot(c,e),p=new to(jf(h),g,n);return ah(t,c,p)}else return[]}function N2(t,e,n,o){const l=lh(t,o);if(l){const a=rh(l),c=a.path,h=a.queryId,g=Ot(c,e),p=Fe.fromObject(n),v=new ls(jf(h),g,p);return ah(t,c,v)}else return[]}function j0(t,e,n,o=!1){const l=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(l,(E,T)=>{const N=Ot(E,l);a=a||ns(T,N),c=c||Ni(T)});let h=t.syncPointTree_.get(l);h?(c=c||Ni(h),a=a||ns(h,Pe())):(h=new f2,t.syncPointTree_=t.syncPointTree_.set(l,h));let g;a!=null?g=!0:(g=!1,a=ge.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((T,N)=>{const M=ns(N,Pe());M&&(a=a.updateImmediateChild(T,M))}));const p=oE(h,e);if(!p&&!e._queryParams.loadsAllData()){const E=Za(e);j(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");const T=I2();t.queryToTagMap.set(E,T),t.tagToQueryMap.set(T,E)}const v=eh(t.pendingWriteTree_,l);let x=y2(h,e,n,v,a,g);if(!p&&!c&&!o){const E=iE(h,e);x=x.concat(M2(t,e,E))}return x}function sh(t,e,n){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=Ot(c,e),p=ns(h,g);if(p)return p});return Xx(l,e,a,n,!0)}function ps(t,e){return lE(e,t.syncPointTree_,null,eh(t.pendingWriteTree_,Pe()))}function lE(t,e,n,o){if(Ne(t.path))return rE(t,e,n,o);{const l=e.get(Pe());n==null&&l!=null&&(n=ns(l,Pe()));let a=[];const c=Se(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const p=n?n.getImmediateChild(c):null,v=Wx(o,c);a=a.concat(lE(h,g,p,v))}return l&&(a=a.concat(oh(l,t,o,n))),a}}function rE(t,e,n,o){const l=e.get(Pe());n==null&&l!=null&&(n=ns(l,Pe()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,p=Wx(o,c),v=t.operationForChild(c);v&&(a=a.concat(rE(v,h,g,p)))}),l&&(a=a.concat(oh(l,t,o,n))),a}function aE(t,e){const n=e.query,o=Ha(t,n);return{hashFn:()=>(a2(e)||ge.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return o?b2(t,n._path,o):T2(t,n._path);{const a=SD(l,n);return Ef(t,n,null,a)}}}}function Ha(t,e){const n=Za(e);return t.queryToTagMap.get(n)}function Za(t){return t._path.toString()+"$"+t._queryIdentifier}function lh(t,e){return t.tagToQueryMap.get(e)}function rh(t){const e=t.indexOf("$");return j(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new qe(t.substr(0,e))}}function ah(t,e,n){const o=t.syncPointTree_.get(e);j(o,"Missing sync point for query tag that we're tracking");const l=eh(t.pendingWriteTree_,e);return oh(o,n,l,null)}function w2(t){return t.fold((e,n,o)=>{if(n&&Ni(n))return[Xa(n)];{let l=[];return n&&(l=nE(n)),St(o,(a,c)=>{l=l.concat(c)}),l}})}function Tl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(x2())(t._repo,t._path):t}function R2(t,e){for(let n=0;n<e.length;++n){const o=e[n];if(!o._queryParams.loadsAllData()){const l=Za(o),a=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(a)}}}function I2(){return E2++}function M2(t,e,n){const o=e._path,l=Ha(t,e),a=aE(t,n),c=t.listenProvider_.startListening(Tl(e),l,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(o);if(l)j(!Ni(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((p,v,x)=>{if(!Ne(p)&&v&&Ni(v))return[Xa(v).query];{let E=[];return v&&(E=E.concat(nE(v).map(T=>T.query))),St(x,(T,N)=>{E=E.concat(N)}),E}});for(let p=0;p<g.length;++p){const v=g[p];t.listenProvider_.stopListening(Tl(v),Ha(t,v))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new uh(n)}node(){return this.node_}}class ch{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=je(this.path_,e);return new ch(this.syncTree_,n)}node(){return sh(this.syncTree_,this.path_)}}const D2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},e_=function(t,e,n){if(!t||typeof t!="object")return t;if(j(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return k2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return U2(t[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},k2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:j(!1,"Unexpected server value: "+t)}},U2=function(t,e,n){t.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const o=t.increment;typeof o!="number"&&j(!1,"Unexpected increment value: "+o);const l=e.node();if(j(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return o;const c=l.getValue();return typeof c!="number"?o:c+o},uE=function(t,e,n,o){return dh(e,new ch(n,t),o)},cE=function(t,e,n){return dh(t,new uh(e),n)};function dh(t,e,n){const o=t.getPriority().val(),l=e_(o,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=e_(c.getValue(),e,n);return h!==c.getValue()||l!==c.getPriority().val()?new ft(h,pt(l)):t}else{const c=t;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new ft(l))),c.forEachChild(et,(h,g)=>{const p=dh(g,e.getImmediateChild(h),n);p!==g&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e="",n=null,o={children:{},childCount:0}){this.name=e,this.parent=n,this.node=o}}function hh(t,e){let n=e instanceof qe?e:new qe(e),o=t,l=Se(n);for(;l!==null;){const a=is(o.node.children,l)||{children:{},childCount:0};o=new fh(l,o,a),n=Ye(n),l=Se(n)}return o}function ms(t){return t.node.value}function dE(t,e){t.node.value=e,Cf(t)}function fE(t){return t.node.childCount>0}function P2(t){return ms(t)===void 0&&!fE(t)}function ja(t,e){St(t.node.children,(n,o)=>{e(new fh(n,t,o))})}function hE(t,e,n,o){n&&e(t),ja(t,l=>{hE(l,e,!0)})}function L2(t,e,n){let o=t.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function ql(t){return new qe(t.parent===null?t.name:ql(t.parent)+"/"+t.name)}function Cf(t){t.parent!==null&&O2(t.parent,t.name,t)}function O2(t,e,n){const o=P2(n),l=Tn(t.node.children,e);o&&l?(delete t.node.children[e],t.node.childCount--,Cf(t)):!o&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Cf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/[\[\].#$\/\u0000-\u001F\u007F]/,B2=/[\[\].#$\u0000-\u001F\u007F]/,Gd=10*1024*1024,ph=function(t){return typeof t=="string"&&t.length!==0&&!H2.test(t)},pE=function(t){return typeof t=="string"&&t.length!==0&&!B2.test(t)},G2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),pE(t)},q2=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Gf(t)||t&&typeof t=="object"&&Tn(t,".sv")},V2=function(t,e,n,o){eu(Ja(t,"value"),e,n)},eu=function(t,e,n){const o=n instanceof qe?new ik(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Zi(o));if(typeof e=="function")throw new Error(t+"contains a function "+Zi(o)+" with contents = "+e.toString());if(Gf(e))throw new Error(t+"contains "+e.toString()+" "+Zi(o));if(typeof e=="string"&&e.length>Gd/3&&Ka(e)>Gd)throw new Error(t+"contains a string greater than "+Gd+" utf8 bytes "+Zi(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(St(e,(c,h)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!ph(c)))throw new Error(t+" contains an invalid key ("+c+") "+Zi(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ok(o,c),eu(t,h,o),sk(o)}),l&&a)throw new Error(t+' contains ".value" child '+Zi(o)+" in addition to actual children.")}},F2=function(t,e){let n,o;for(n=0;n<e.length;n++){o=e[n];const a=Il(o);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!ph(a[c]))throw new Error(t+"contains an invalid key ("+a[c]+") in path "+o.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(nk);let l=null;for(n=0;n<e.length;n++){if(o=e[n],l!==null&&ln(l,o))throw new Error(t+"contains a path "+l.toString()+" that is ancestor of another path "+o.toString());l=o}},z2=function(t,e,n,o){const l=Ja(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const a=[];St(e,(c,h)=>{const g=new qe(c);if(eu(l,h,je(n,g)),Yf(g)===".priority"&&!q2(h))throw new Error(l+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),F2(l,a)},mE=function(t,e,n,o){if(!pE(n))throw new Error(Ja(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Y2=function(t,e,n,o){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mE(t,e,n)},J2=function(t,e){if(Se(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},K2=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ph(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!G2(n))throw new Error(Ja(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tu(t,e){let n=null;for(let o=0;o<e.length;o++){const l=e[o],a=l.getPath();n!==null&&!Jf(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&t.eventLists_.push(n)}function gE(t,e,n){tu(t,n),yE(t,o=>Jf(o,e))}function vn(t,e,n){tu(t,n),yE(t,o=>ln(o,e)||ln(e,o))}function yE(t,e){t.recursionDepth_++;let n=!0;for(let o=0;o<t.eventLists_.length;o++){const l=t.eventLists_[o];if(l){const a=l.path;e(a)?($2(t.eventLists_[o]),t.eventLists_[o]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const o=n.getEventRunner();xl&&Ct("event: "+n.toString()),hs(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="repo_interrupt",W2=25;class Z2{constructor(e,n,o,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=o,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Q2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ma(),this.transactionQueueTree_=new fh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j2(t,e,n){if(t.stats_=Ff(t.repoInfo_),t.forceRestClient_||ND())t.server_=new Ia(t.repoInfo_,(o,l,a,c)=>{t_(t,o,l,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>n_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}t.persistentConnection_=new zn(t.repoInfo_,e,(o,l,a,c)=>{t_(t,o,l,a,c)},o=>{n_(t,o)},o=>{tU(t,o)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(o=>{t.server_.refreshAuthToken(o)}),t.appCheckProvider_.addTokenChangeListener(o=>{t.server_.refreshAppCheckToken(o.token)}),t.statsReporter_=DD(t.repoInfo_,()=>new Mk(t.stats_,t.server_)),t.infoData_=new Ak,t.infoSyncTree_=new Z0({startListening:(o,l,a,c)=>{let h=[];const g=t.infoData_.getNode(o._path);return g.isEmpty()||(h=Wa(t.infoSyncTree_,o._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),mh(t,"connected",!1),t.serverSyncTree_=new Z0({startListening:(o,l,a,c)=>(t.server_.listen(o,a,l,(h,g)=>{const p=c(h,g);vn(t.eventQueue_,o._path,p)}),[]),stopListening:(o,l)=>{t.server_.unlisten(o,l)}})}function eU(t){const n=t.infoData_.getNode(new qe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function nu(t){return D2({timestamp:eU(t)})}function t_(t,e,n,o,l){t.dataUpdateCount++;const a=new qe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(l)if(o){const g=Sa(n,p=>pt(p));c=N2(t.serverSyncTree_,a,g,l)}else{const g=pt(n);c=A2(t.serverSyncTree_,a,g,l)}else if(o){const g=Sa(n,p=>pt(p));c=S2(t.serverSyncTree_,a,g)}else{const g=pt(n);c=Wa(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=as(t,a)),vn(t.eventQueue_,h,c)}function n_(t,e){mh(t,"connected",e),e===!1&&oU(t)}function tU(t,e){St(e,(n,o)=>{mh(t,n,o)})}function mh(t,e,n){const o=new qe("/.info/"+e),l=pt(n);t.infoData_.updateSnapshot(o,l);const a=Wa(t.infoSyncTree_,o,l);vn(t.eventQueue_,o,a)}function gh(t){return t.nextWriteId_++}function nU(t,e,n,o,l){iu(t,"set",{path:e.toString(),value:n,priority:o});const a=nu(t),c=pt(n,o),h=sh(t.serverSyncTree_,e),g=cE(c,h,a),p=gh(t),v=sE(t.serverSyncTree_,e,g,p,!0);tu(t.eventQueue_,v),t.server_.put(e.toString(),c.val(!0),(E,T)=>{const N=E==="ok";N||wt("set at "+e+" failed: "+E);const M=Ci(t.serverSyncTree_,p,!N);vn(t.eventQueue_,e,M),Sf(t,l,E,T)});const x=vh(t,e);as(t,x),vn(t.eventQueue_,x,[])}function iU(t,e,n,o){iu(t,"update",{path:e.toString(),value:n});let l=!0;const a=nu(t),c={};if(St(n,(h,g)=>{l=!1,c[h]=uE(je(e,h),pt(g),t.serverSyncTree_,a)}),l)Ct("update() called with empty data.  Don't do anything."),Sf(t,o,"ok",void 0);else{const h=gh(t),g=C2(t.serverSyncTree_,e,c,h);tu(t.eventQueue_,g),t.server_.merge(e.toString(),n,(p,v)=>{const x=p==="ok";x||wt("update at "+e+" failed: "+p);const E=Ci(t.serverSyncTree_,h,!x),T=E.length>0?as(t,e):e;vn(t.eventQueue_,T,E),Sf(t,o,p,v)}),St(n,p=>{const v=vh(t,je(e,p));as(t,v)}),vn(t.eventQueue_,e,[])}}function oU(t){iu(t,"onDisconnectEvents");const e=nu(t),n=Ma();pf(t.onDisconnect_,Pe(),(l,a)=>{const c=uE(l,a,t.serverSyncTree_,e);Jx(n,l,c)});let o=[];pf(n,Pe(),(l,a)=>{o=o.concat(Wa(t.serverSyncTree_,l,a));const c=vh(t,l);as(t,c)}),t.onDisconnect_=Ma(),vn(t.eventQueue_,Pe(),o)}function sU(t,e,n){let o;Se(e._path)===".info"?o=j0(t.infoSyncTree_,e,n):o=j0(t.serverSyncTree_,e,n),gE(t.eventQueue_,e._path,o)}function lU(t,e,n){let o;Se(e._path)===".info"?o=Ef(t.infoSyncTree_,e,n):o=Ef(t.serverSyncTree_,e,n),gE(t.eventQueue_,e._path,o)}function rU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(X2)}function iu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ct(n,...e)}function Sf(t,e,n,o){e&&hs(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let a=l;o&&(a+=": "+o);const c=new Error(a);c.code=l,e(c)}})}function vE(t,e,n){return sh(t.serverSyncTree_,e,n)||ge.EMPTY_NODE}function yh(t,e=t.transactionQueueTree_){if(e||ou(t,e),ms(e)){const n=xE(t,e);j(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&aU(t,ql(e),n)}else fE(e)&&ja(e,n=>{yh(t,n)})}function aU(t,e,n){const o=n.map(p=>p.currentWriteId),l=vE(t,e,o);let a=l;const c=l.hash();for(let p=0;p<n.length;p++){const v=n[p];j(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const x=Ot(e,v.path);a=a.updateChild(x,v.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,p=>{iu(t,"transaction put response",{path:g.toString(),status:p});let v=[];if(p==="ok"){const x=[];for(let E=0;E<n.length;E++)n[E].status=2,v=v.concat(Ci(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&x.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();ou(t,hh(t.transactionQueueTree_,e)),yh(t,t.transactionQueueTree_),vn(t.eventQueue_,e,v);for(let E=0;E<x.length;E++)hs(x[E])}else{if(p==="datastale")for(let x=0;x<n.length;x++)n[x].status===3?n[x].status=4:n[x].status=0;else{wt("transaction at "+g.toString()+" failed: "+p);for(let x=0;x<n.length;x++)n[x].status=4,n[x].abortReason=p}as(t,e)}},c)}function as(t,e){const n=_E(t,e),o=ql(n),l=xE(t,n);return uU(t,l,o),o}function uU(t,e,n){if(e.length===0)return;const o=[];let l=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],p=Ot(n,g.path);let v=!1,x;if(j(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,x=g.abortReason,l=l.concat(Ci(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=W2)v=!0,x="maxretry",l=l.concat(Ci(t.serverSyncTree_,g.currentWriteId,!0));else{const E=vE(t,g.path,c);g.currentInputSnapshot=E;const T=e[h].update(E.val());if(T!==void 0){eu("transaction failed: Data returned ",T,g.path);let N=pt(T);typeof T=="object"&&T!=null&&Tn(T,".priority")||(N=N.updatePriority(E.getPriority()));const I=g.currentWriteId,H=nu(t),z=cE(N,E,H);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=z,g.currentWriteId=gh(t),c.splice(c.indexOf(I),1),l=l.concat(sE(t.serverSyncTree_,g.path,z,g.currentWriteId,g.applyLocally)),l=l.concat(Ci(t.serverSyncTree_,I,!0))}else v=!0,x="nodata",l=l.concat(Ci(t.serverSyncTree_,g.currentWriteId,!0))}vn(t.eventQueue_,n,l),l=[],v&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(x==="nodata"?o.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):o.push(()=>e[h].onComplete(new Error(x),!1,null))))}ou(t,t.transactionQueueTree_);for(let h=0;h<o.length;h++)hs(o[h]);yh(t,t.transactionQueueTree_)}function _E(t,e){let n,o=t.transactionQueueTree_;for(n=Se(e);n!==null&&ms(o)===void 0;)o=hh(o,n),e=Ye(e),n=Se(e);return o}function xE(t,e){const n=[];return EE(t,e,n),n.sort((o,l)=>o.order-l.order),n}function EE(t,e,n){const o=ms(e);if(o)for(let l=0;l<o.length;l++)n.push(o[l]);ja(e,l=>{EE(t,l,n)})}function ou(t,e){const n=ms(e);if(n){let o=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[o]=n[l],o++);n.length=o,dE(e,n.length>0?n:void 0)}ja(e,o=>{ou(t,o)})}function vh(t,e){const n=ql(_E(t,e)),o=hh(t.transactionQueueTree_,e);return L2(o,l=>{qd(t,l)}),qd(t,o),hE(o,l=>{qd(t,l)}),n}function qd(t,e){const n=ms(e);if(n){const o=[];let l=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(j(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(j(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),l=l.concat(Ci(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&o.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?dE(e,void 0):n.length=a+1,vn(t.eventQueue_,ql(e),l);for(let c=0;c<o.length;c++)hs(o[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(t){let e="";const n=t.split("/");for(let o=0;o<n.length;o++)if(n[o].length>0){let l=n[o];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function dU(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const o=n.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):wt(`Invalid query segment '${n}' in query '${t}'`)}return e}const i_=function(t,e){const n=fU(t),o=n.namespace;n.domain==="firebase.com"&&Kn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&n.domain!=="localhost"&&Kn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||vD();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Rx(n.host,n.secure,o,l,e,"",o!==n.subdomain),path:new qe(n.pathString)}},fU=function(t){let e="",n="",o="",l="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(h=t.substring(0,p-1),t=t.substring(p+2));let v=t.indexOf("/");v===-1&&(v=t.length);let x=t.indexOf("?");x===-1&&(x=t.length),e=t.substring(0,Math.min(v,x)),v<x&&(l=cU(t.substring(v,x)));const E=dU(t.substring(Math.min(t.length,x)));p=e.indexOf(":"),p>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const N=e.indexOf(".");o=e.substring(0,N).toLowerCase(),n=e.substring(N+1),a=o}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:n,subdomain:o,secure:c,scheme:h,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hU{constructor(e,n,o,l){this.eventType=e,this.eventRegistration=n,this.snapshot=o,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mt(this.snapshot.exportVal())}}class pU{constructor(e,n,o){this.eventRegistration=e,this.error=n,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mU{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return j(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,o,l){this._repo=e,this._path=n,this._queryParams=o,this._orderByCalled=l}get key(){return Ne(this._path)?null:Yf(this._path)}get ref(){return new Ri(this._repo,this._path)}get _queryIdentifier(){const e=V0(this._queryParams),n=qf(e);return n==="{}"?"default":n}get _queryObject(){return V0(this._queryParams)}isEqual(e){if(e=Ol(e),!(e instanceof _h))return!1;const n=this._repo===e._repo,o=Jf(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&o&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+tk(this._path)}}class Ri extends _h{constructor(e,n){super(e,n,new Xf,!1)}get parent(){const e=Hx(this._path);return e===null?null:new Ri(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ba{constructor(e,n,o){this._node=e,this.ref=n,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new qe(e),o=Tf(this.ref,e);return new Ba(this._node.getChild(n),o,et)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,l)=>e(new Ba(l,Tf(this.ref,o),et)))}hasChild(e){const n=new qe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function at(t,e){return t=Ol(t),t._checkNotDeleted("ref"),e!==void 0?Tf(t._root,e):t._root}function Tf(t,e){return t=Ol(t),Se(t._path)===null?Y2("child","path",e):mE("child","path",e),new Ri(t._repo,je(t._path,e))}function $i(t,e){t=Ol(t),J2("set",t._path),V2("set",e,t._path);const n=new Pl;return nU(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function fn(t,e){z2("update",e,t._path);const n=new Pl;return iU(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class xh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const o=n._queryParams.getIndex();return new hU("value",this,new Ba(e.snapshotNode,new Ri(n._repo,n._path),o))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new pU(this,e,n):null}matches(e){return e instanceof xh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function gU(t,e,n,o,l){const a=new mU(n,void 0),c=new xh(a);return sU(t._repo,t,c),()=>lU(t._repo,t,c)}function yU(t,e,n,o){return gU(t,"value",e)}h2(Ri);_2(Ri);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="FIREBASE_DATABASE_EMULATOR_HOST",bf={};let _U=!1;function xU(t,e,n,o){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=Hf(a);t.repoInfo_=new Rx(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),o&&(t.authTokenProvider_=o)}function EU(t,e,n,o,l){let a=o||t.options.databaseURL;a===void 0&&(t.options.projectId||Kn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ct("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=i_(a,l),h=c.repoInfo,g;typeof process<"u"&&T0&&(g=T0[vU]),g?(a=`http://${g}?ns=${h.namespace}`,c=i_(a,l),h=c.repoInfo):c.repoInfo.secure;const p=new RD(t.name,t.options,e);K2("Invalid Firebase Database URL",c),Ne(c.path)||Kn("Database URL must point to the root of a Firebase Database (not including a child path).");const v=SU(h,t,p,new wD(t,n));return new TU(v,t)}function CU(t,e){const n=bf[e];(!n||n[t.key]!==t)&&Kn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),rU(t),delete n[t.key]}function SU(t,e,n,o){let l=bf[e.name];l||(l={},bf[e.name]=l);let a=l[t.toURLString()];return a&&Kn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Z2(t,_U,n,o),l[t.toURLString()]=a,a}class TU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(j2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ri(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(CU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Kn("Cannot call "+e+" on a deleted database.")}}function bU(t=jM(),e){const n=QM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const o=kI("database");o&&AU(n,...o)}return n}function AU(t,e,n,o={}){t=Ol(t),t._checkNotDeleted("useEmulator");const l=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&Ta(o,a.repoInfo_.emulatorOptions))return;Kn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)o.mockUserToken&&Kn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new ma(ma.OWNER);else if(o.mockUserToken){const h=typeof o.mockUserToken=="string"?o.mockUserToken:PI(o.mockUserToken,t.app.options.projectId);c=new ma(h)}Hf(e)&&(UI(e),HI("Database",!0)),xU(a,l,o,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t){fD(ZM),Aa(new Nl("database",(e,{instanceIdentifier:n})=>{const o=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return EU(o,l,a,n)},"PUBLIC").setMultipleInstances(!0)),jo(b0,A0,t),jo(b0,A0,"esm2020")}zn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};zn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NU();const wU={apiKey:"AIzaSyAZF464USpdS6rQNUL1w_-715Rv29GHMw8",authDomain:"st-bernard-kofc-superbowl-grid.firebaseapp.com",databaseURL:"https://st-bernard-kofc-superbowl-grid-default-rtdb.firebaseio.com",projectId:"st-bernard-kofc-superbowl-grid",storageBucket:"st-bernard-kofc-superbowl-grid.appspot.com",messagingSenderId:"619277918232",appId:"1:619277918232:web:4cbdf203d06471d563636d",measurementId:"G-1P3RY5S27M"},RU=fx(wU),ut=bU(RU),CE=()=>Array.from({length:100},(t,e)=>({id:e,row:Math.floor(e/10),col:e%10,participantId:null,alias:"",paidAmount:0,assigned:!1})),vl={teamA:"NFC Champions",teamB:"AFC Champions",costPerBox:10,rowNumbers:[],colNumbers:[],isLocked:!1,payouts:{mode:"standard",charityPercent:50,standardSplits:{q1:20,half:30,q3:20,final:30},scoreChangeMultiplier:3}},Vd={adminPassword:"admin",charityName:"St Bernard KofC 14269",zelleAccount:"",paypalAccount:"",venmoAccount:"",otherPaymentInfo:""},o_=(t,e=vl)=>({id:crypto.randomUUID(),name:t,squares:CE(),participants:[],scores:[],settings:{...e,isLocked:!1,rowNumbers:[],colNumbers:[]},createdAt:Date.now()}),IU=()=>{var U,J;const[t,e]=le.useState(null),[n,o]=le.useState(!1),[l,a]=le.useState("grid"),[c,h]=le.useState(null),[g,p]=le.useState([]),[v,x]=le.useState(!1),[E,T]=le.useState(""),[N,M]=le.useState(!1),[I,H]=le.useState(!1),[z,q]=le.useState(!1);le.useEffect(()=>{const O=at(ut,"state");return yU(O,ie=>{const ee=ie.val();if(ee)ee.pools&&(ee.pools=ee.pools.map(b=>{var w,G,Z;return{...b,participants:b.participants||[],scores:b.scores||[],settings:{...vl,...b.settings,rowNumbers:((w=b.settings)==null?void 0:w.rowNumbers)||[],colNumbers:((G=b.settings)==null?void 0:G.colNumbers)||[],payouts:((Z=b.settings)==null?void 0:Z.payouts)||vl.payouts}}})),e(ee);else{const b=o_("Super Bowl LIX"),w={pools:[b],activePoolId:b.id,globalSettings:Vd};$i(at(ut,"state"),w),e(w)}o(!0)})},[]);const V=le.useMemo(()=>!t||!t.pools?null:t.pools.find(O=>O.id===t.activePoolId)||t.pools[0],[t]),Y=le.useMemo(()=>!t||!t.pools?-1:t.pools.findIndex(O=>O.id===t.activePoolId),[t]),te=le.useCallback(O=>{!t||Y===-1||fn(at(ut,`state/pools/${Y}`),O)},[t,Y]),W=le.useCallback(O=>{!t||Y===-1||fn(at(ut,`state/pools/${Y}/settings`),O)},[t,Y]),me=le.useCallback(O=>{t&&fn(at(ut,"state/globalSettings"),O)},[t]),oe=(O,ie)=>{if(!t||!V||Y===-1)return;let ee=(V.participants||[]).find(G=>G.email.toLowerCase()===O.email.toLowerCase());const b=[...V.participants||[]];if(!ee)ee={...O,id:crypto.randomUUID(),paymentHistory:[]},b.push(ee);else{const G=b.findIndex(Z=>Z.id===ee.id);b[G]={...ee,...O}}const w={};w[`state/pools/${Y}/participants`]=b,ie.forEach(G=>{w[`state/pools/${Y}/squares/${G}`]={...V.squares[G]||{},participantId:ee.id,alias:O.alias.toUpperCase(),assigned:!0}}),fn(at(ut),w),p([]),q(!1)},de=O=>{var ee;if(!V)return;const ie=(V.squares||[])[O];ie!=null&&ie.assigned?h(O):(ee=V.settings)!=null&&ee.isLocked||p(b=>b.includes(O)?b.filter(w=>w!==O):[...b,O])},X=le.useCallback((O,ie,ee)=>{const b=(ie.participants||[]).find(he=>he.id===O);if(!b)return;const w=(b.paymentHistory||[]).reduce((he,Ce)=>he+Ce.amount,0),G=ie.settings.costPerBox;let Z=w;const ce=[...ie.squares||[]].map(he=>{if(he.participantId!==O)return he;const Ce=Math.min(Z,G);return Z-=Ce,{...he,paidAmount:Ce}});fn(at(ut,`state/pools/${ee}/squares`),ce)},[]),ae=le.useCallback((O,ie,ee)=>{if(!t||!V||Y===-1)return;const b={id:crypto.randomUUID(),amount:ie,method:ee,timestamp:Date.now()},w=(V.participants||[]).map(G=>G.id===O?{...G,paymentHistory:[...G.paymentHistory||[],b]}:G);fn(at(ut,`state/pools/${Y}/participants`),w).then(()=>{X(O,{...V,participants:w},Y)})},[t,V,Y,X]),$=le.useCallback((O,ie,ee,b)=>{if(!t||!V||Y===-1)return;const w=(V.participants||[]).map(G=>{if(G.id===O){const Z=(G.paymentHistory||[]).map(ce=>ce.id===ie?{...ce,amount:ee,method:b}:ce);return{...G,paymentHistory:Z}}return G});fn(at(ut,`state/pools/${Y}/participants`),w).then(()=>{X(O,{...V,participants:w},Y)})},[t,V,Y,X]),ne=le.useCallback((O,ie)=>{if(!t||!V||Y===-1)return;const ee=(V.participants||[]).map(b=>{if(b.id===O){const w=(b.paymentHistory||[]).filter(G=>G.id!==ie);return{...b,paymentHistory:w}}return b});fn(at(ut,`state/pools/${Y}/participants`),ee).then(()=>{X(O,{...V,participants:ee},Y)})},[t,V,Y,X]);if(!n||!t||!V)return _.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-6 text-center",children:[_.jsx("div",{className:"bg-white/10 p-8 rounded-full animate-pulse mb-6",children:_.jsx("i",{className:"fas fa-football-ball text-5xl md:text-6xl"})}),_.jsx("p",{className:"font-black uppercase tracking-widest animate-bounce text-sm",children:"Syncing Live Board..."})]});const ye=g.length*(((U=V.settings)==null?void 0:U.costPerBox)||0);return _.jsxs("div",{className:"min-h-screen flex flex-col font-sans bg-gray-50/50 selection:bg-indigo-100 selection:text-indigo-900 pb-24 md:pb-0",children:[_.jsx("header",{className:"bg-indigo-900 text-white p-4 md:p-6 shadow-2xl sticky top-0 z-50 border-b border-indigo-800 backdrop-blur-md bg-indigo-900/90",children:_.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 md:gap-6",children:[_.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[_.jsx("div",{className:"bg-white p-2 rounded-xl shadow-inner rotate-3 hidden sm:block",children:_.jsx("i",{className:"fas fa-football-ball text-indigo-900 text-xl"})}),_.jsxs("div",{className:"flex-grow min-w-0",children:[_.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1 md:gap-4",children:[_.jsx("h1",{className:"text-lg md:text-2xl font-black tracking-tight uppercase leading-none truncate overflow-hidden max-w-[300px] md:max-w-[400px]",children:((J=t.globalSettings)==null?void 0:J.charityName)||"Charity Bowl"}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:"hidden md:block text-indigo-500 font-bold opacity-30",children:"/"}),_.jsx("select",{value:t.activePoolId,onChange:O=>$i(at(ut,"state/activePoolId"),O.target.value),className:"bg-indigo-800 text-indigo-100 text-[9px] md:text-[10px] font-black uppercase tracking-widest px-2 py-1 rounded-lg border border-indigo-700 outline-none max-w-[120px] md:max-w-none",children:(t.pools||[]).map(O=>_.jsx("option",{value:O.id,children:O.name},O.id))})]})]}),_.jsx("p",{className:"text-indigo-400 text-[8px] md:text-[9px] font-black uppercase tracking-[0.2em] mt-1 opacity-70",children:"Live Contest Dashboard"})]})]}),_.jsxs("nav",{className:"flex items-center gap-2 w-full md:w-auto justify-between md:justify-end",children:[_.jsx("div",{className:"flex bg-black/20 rounded-xl p-1 backdrop-blur-md border border-white/10 flex-grow md:flex-grow-0",children:["grid","winners","player","admin"].map(O=>_.jsx("button",{onClick:()=>{a(O),O==="grid"&&x(!1)},className:`flex-1 md:flex-none px-3 md:px-5 py-2 rounded-lg capitalize font-black text-[10px] md:text-xs tracking-widest transition-all duration-300 ${l===O?"bg-white text-indigo-900 shadow-md":"text-indigo-100 hover:text-white"}`,children:O==="admin"?"Admin / Money":O==="player"?"My Status":O},O))}),_.jsx("button",{onClick:()=>H(!0),className:"bg-green-500 hover:bg-green-400 text-white w-10 h-10 md:w-11 md:h-11 rounded-xl flex items-center justify-center transition-all shadow-lg shadow-green-900/20 flex-shrink-0",children:_.jsx("i",{className:"fas fa-share-nodes text-xs md:text-sm"})})]})]})}),_.jsx("main",{className:"flex-grow max-w-7xl mx-auto w-full p-3 md:p-8",children:_.jsxs("div",{className:"bg-white rounded-[2rem] md:rounded-[3.5rem] shadow-2xl p-4 md:p-8 border border-gray-100 min-h-[500px] relative overflow-hidden",children:[l==="grid"&&_.jsx(oT,{squares:V.squares||[],pendingSelection:g,settings:{...t.globalSettings||{},...V.settings||{}},onSquareClick:de}),l==="winners"&&_.jsx(EI,{activePool:V,settings:{...t.globalSettings||{},...V.settings||{}},onAddScore:O=>{const ie=[...V.scores||[],O];te({scores:ie})},onUpdateScore:O=>{const ie=(V.scores||[]).map(ee=>ee.id===O.id?O:ee);te({scores:ie})},onDeleteScore:O=>{const ie=(V.scores||[]).filter(ee=>ee.id!==O);te({scores:ie})},isAdmin:v}),l==="player"&&_.jsx(CI,{state:t}),l==="admin"&&(v?_.jsxs("div",{className:"space-y-12",children:[_.jsx(gI,{activePoolId:t.activePoolId,poolSettings:V.settings||vl,globalSettings:t.globalSettings||Vd,onUpdatePoolSettings:W,onUpdateActivePool:te,onUpdateGlobalSettings:me,onResetGrid:()=>te({squares:CE(),participants:[],scores:[]}),onDeletePool:O=>{var b;const ie=(t.pools||[]).filter(w=>w.id!==O),ee=O===t.activePoolId?((b=ie[0])==null?void 0:b.id)||"":t.activePoolId;$i(at(ut,"state"),{...t,pools:ie,activePoolId:ee})},onGenerateNumbers:()=>{const O=()=>Array.from({length:10},(ie,ee)=>ee).sort(()=>Math.random()-.5);W({rowNumbers:O(),colNumbers:O()})},squares:V.squares||[],pools:t.pools||[],onSwitchPool:O=>$i(at(ut,"state/activePoolId"),O),onCreatePool:(O,ie)=>{const ee=o_(O,{...V.settings||vl,...ie||{}});$i(at(ut,"state/pools"),[...t.pools||[],ee]),$i(at(ut,"state/activePoolId"),ee.id)},fullState:t,onImportState:O=>{$i(at(ut,"state"),O),x(!1)}}),_.jsxs("div",{className:"pt-12 border-t-2 border-indigo-50",children:[_.jsx("div",{className:"mb-8 px-4 flex flex-col md:flex-row md:items-center justify-between gap-2",children:_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl font-black text-indigo-900 uppercase tracking-tight",children:"Financials & Roster"}),_.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:"Real-time payment tracking & participant audit"})]})}),_.jsx(yI,{squares:V.squares||[],participants:V.participants||[],settings:{...t.globalSettings||{},...V.settings||{}},onUpdateSquare:(O,ie)=>{fn(at(ut,`state/pools/${Y}/squares/${O}`),ie)},onUpdateParticipant:(O,ie)=>{const ee=(V.participants||[]).findIndex(b=>b.id===O);ee!==-1&&fn(at(ut,`state/pools/${Y}/participants/${ee}`),ie)},onApplyPayment:ae,onEditPayment:$,onDeletePayment:ne})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center py-12 md:py-24 animate-in fade-in zoom-in-95",children:[_.jsx("div",{className:"bg-indigo-50 p-6 md:p-8 rounded-full mb-6 relative",children:_.jsx("i",{className:"fas fa-shield-alt text-indigo-600 text-4xl md:text-5xl"})}),_.jsx("h2",{className:"text-xl md:text-3xl font-black text-gray-900 uppercase tracking-tight mb-3 text-center",children:"Admin Access"}),_.jsxs("form",{onSubmit:O=>{var ie;O.preventDefault(),E===(((ie=t.globalSettings)==null?void 0:ie.adminPassword)||"admin")?(x(!0),M(!1),T("")):(M(!0),T(""))},className:"w-full max-w-xs md:max-w-sm space-y-4",children:[_.jsx("input",{type:"password",autoFocus:!0,value:E,onChange:O=>T(O.target.value),placeholder:"Admin Password...",className:`w-full px-6 py-4 bg-gray-50 border-2 rounded-2xl outline-none transition-all font-black text-center text-indigo-900 tracking-[0.2em] ${N?"border-red-500 bg-red-50":"border-gray-100 focus:border-indigo-500"}`}),_.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] md:text-xs hover:bg-black transition-all shadow-xl",children:"Unlock Admin & Financials"})]})]}))]})}),g.length>0&&l==="grid"&&_.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[60] p-4 bg-indigo-950/80 backdrop-blur-xl border-t border-indigo-700 animate-in slide-in-from-bottom-full duration-500",children:_.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"bg-indigo-600 text-white w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center font-black text-lg shadow-xl shadow-indigo-900/40",children:g.length}),_.jsxs("div",{children:[_.jsx("p",{className:"text-white text-xs md:text-sm font-black uppercase tracking-tight",children:"Boxes Selected"}),_.jsxs("p",{className:"text-indigo-300 text-[10px] md:text-xs font-bold uppercase tracking-widest",children:["Total: $",ye]})]})]}),_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>p([]),className:"px-4 py-3 text-indigo-300 hover:text-white font-black uppercase text-[10px] tracking-widest",children:"Clear"}),_.jsx("button",{onClick:()=>q(!0),className:"bg-green-500 hover:bg-green-400 text-white px-6 md:px-10 py-3 md:py-4 rounded-xl md:rounded-2xl font-black uppercase text-[10px] md:text-xs tracking-[0.2em] shadow-2xl transition-all transform hover:-translate-y-1 active:translate-y-0",children:"Proceed to Checkout"})]})]})}),_.jsx(xI,{globalSettings:t.globalSettings||Vd,activePool:V}),_.jsx(vI,{isOpen:c!==null||z,onClose:()=>{h(null),q(!1)},onSetPendingSelection:p,onSubmit:oe,onUnassign:O=>{fn(at(ut,`state/pools/${Y}/squares/${O}`),{participantId:null,alias:"",assigned:!1,paidAmount:0}),h(null)},selectedSquareIds:z?g:c!==null?[c]:[],activePool:V,existingParticipants:V.participants||[],settings:{...t.globalSettings||{},...V.settings||{}}}),_.jsx(_I,{isOpen:I,onClose:()=>H(!1),appState:t})]})},SE=document.getElementById("root");if(!SE)throw new Error("Could not find root element to mount to");const MU=iT.createRoot(SE);MU.render(_.jsx(l_.StrictMode,{children:_.jsx(IU,{})}));
