(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(l){if(l.ep)return;l.ep=!0;const r=n(l);fetch(l.href,r)}})();function Tv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ff={exports:{}},ha={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function jb(){if(Vy)return ha;Vy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,r){var u=null;if(r!==void 0&&(u=""+r),l.key!==void 0&&(u=""+l.key),"key"in l){r={};for(var p in l)p!=="key"&&(r[p]=l[p])}else r=l;return l=r.ref,{$$typeof:t,type:s,key:u,ref:l!==void 0?l:null,props:r}}return ha.Fragment=e,ha.jsx=n,ha.jsxs=n,ha}var Fy;function Yb(){return Fy||(Fy=1,ff.exports=jb()),ff.exports}var h=Yb(),hf={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function $b(){if(zy)return ze;zy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),u=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function T(w){return w===null||typeof w!="object"?null:(w=E&&w[E]||w["@@iterator"],typeof w=="function"?w:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,k={};function G(w,R,F){this.props=w,this.context=R,this.refs=k,this.updater=F||N}G.prototype.isReactComponent={},G.prototype.setState=function(w,R){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,R,"setState")},G.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function X(){}X.prototype=G.prototype;function j(w,R,F){this.props=w,this.context=R,this.refs=k,this.updater=F||N}var M=j.prototype=new X;M.constructor=j,D(M,G.prototype),M.isPureReactComponent=!0;var fe=Array.isArray;function ie(){}var oe={H:null,A:null,T:null,S:null},xe=Object.prototype.hasOwnProperty;function ce(w,R,F){var W=F.ref;return{$$typeof:t,type:w,key:R,ref:W!==void 0?W:null,props:F}}function Ie(w,R){return ce(w.type,R,w.props)}function qe(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function Ye(w){var R={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(F){return R[F]})}var ue=/\/+/g;function Je(w,R){return typeof w=="object"&&w!==null&&w.key!=null?Ye(""+w.key):R.toString(36)}function Fe(w){switch(w.status){case"fulfilled":return w.value;case"rejected":throw w.reason;default:switch(typeof w.status=="string"?w.then(ie,ie):(w.status="pending",w.then(function(R){w.status==="pending"&&(w.status="fulfilled",w.value=R)},function(R){w.status==="pending"&&(w.status="rejected",w.reason=R)})),w.status){case"fulfilled":return w.value;case"rejected":throw w.reason}}throw w}function O(w,R,F,W,q){var ne=typeof w;(ne==="undefined"||ne==="boolean")&&(w=null);var re=!1;if(w===null)re=!0;else switch(ne){case"bigint":case"string":case"number":re=!0;break;case"object":switch(w.$$typeof){case t:case e:re=!0;break;case v:return re=w._init,O(re(w._payload),R,F,W,q)}}if(re)return q=q(w),re=W===""?"."+Je(w,0):W,fe(q)?(F="",re!=null&&(F=re.replace(ue,"$&/")+"/"),O(q,R,F,"",function(rt){return rt})):q!=null&&(qe(q)&&(q=Ie(q,F+(q.key==null||w&&w.key===q.key?"":(""+q.key).replace(ue,"$&/")+"/")+re)),R.push(q)),1;re=0;var be=W===""?".":W+":";if(fe(w))for(var Pe=0;Pe<w.length;Pe++)W=w[Pe],ne=be+Je(W,Pe),re+=O(W,R,F,ne,q);else if(Pe=T(w),typeof Pe=="function")for(w=Pe.call(w),Pe=0;!(W=w.next()).done;)W=W.value,ne=be+Je(W,Pe++),re+=O(W,R,F,ne,q);else if(ne==="object"){if(typeof w.then=="function")return O(Fe(w),R,F,W,q);throw R=String(w),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.")}return re}function te(w,R,F){if(w==null)return w;var W=[],q=0;return O(w,W,"","",function(ne){return R.call(F,ne,q++)}),W}function ve(w){if(w._status===-1){var R=w._result;R=R(),R.then(function(F){(w._status===0||w._status===-1)&&(w._status=1,w._result=F)},function(F){(w._status===0||w._status===-1)&&(w._status=2,w._result=F)}),w._status===-1&&(w._status=0,w._result=R)}if(w._status===1)return w._result.default;throw w._result}var Ce=typeof reportError=="function"?reportError:function(w){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof w=="object"&&w!==null&&typeof w.message=="string"?String(w.message):String(w),error:w});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",w);return}console.error(w)},Ge={map:te,forEach:function(w,R,F){te(w,function(){R.apply(this,arguments)},F)},count:function(w){var R=0;return te(w,function(){R++}),R},toArray:function(w){return te(w,function(R){return R})||[]},only:function(w){if(!qe(w))throw Error("React.Children.only expected to receive a single React element child.");return w}};return ze.Activity=_,ze.Children=Ge,ze.Component=G,ze.Fragment=n,ze.Profiler=l,ze.PureComponent=j,ze.StrictMode=s,ze.Suspense=y,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,ze.__COMPILER_RUNTIME={__proto__:null,c:function(w){return oe.H.useMemoCache(w)}},ze.cache=function(w){return function(){return w.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(w,R,F){if(w==null)throw Error("The argument must be a React element, but you passed "+w+".");var W=D({},w.props),q=w.key;if(R!=null)for(ne in R.key!==void 0&&(q=""+R.key),R)!xe.call(R,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&R.ref===void 0||(W[ne]=R[ne]);var ne=arguments.length-2;if(ne===1)W.children=F;else if(1<ne){for(var re=Array(ne),be=0;be<ne;be++)re[be]=arguments[be+2];W.children=re}return ce(w.type,q,W)},ze.createContext=function(w){return w={$$typeof:u,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null},w.Provider=w,w.Consumer={$$typeof:r,_context:w},w},ze.createElement=function(w,R,F){var W,q={},ne=null;if(R!=null)for(W in R.key!==void 0&&(ne=""+R.key),R)xe.call(R,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(q[W]=R[W]);var re=arguments.length-2;if(re===1)q.children=F;else if(1<re){for(var be=Array(re),Pe=0;Pe<re;Pe++)be[Pe]=arguments[Pe+2];q.children=be}if(w&&w.defaultProps)for(W in re=w.defaultProps,re)q[W]===void 0&&(q[W]=re[W]);return ce(w,ne,q)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(w){return{$$typeof:p,render:w}},ze.isValidElement=qe,ze.lazy=function(w){return{$$typeof:v,_payload:{_status:-1,_result:w},_init:ve}},ze.memo=function(w,R){return{$$typeof:m,type:w,compare:R===void 0?null:R}},ze.startTransition=function(w){var R=oe.T,F={};oe.T=F;try{var W=w(),q=oe.S;q!==null&&q(F,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(ie,Ce)}catch(ne){Ce(ne)}finally{R!==null&&F.types!==null&&(R.types=F.types),oe.T=R}},ze.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},ze.use=function(w){return oe.H.use(w)},ze.useActionState=function(w,R,F){return oe.H.useActionState(w,R,F)},ze.useCallback=function(w,R){return oe.H.useCallback(w,R)},ze.useContext=function(w){return oe.H.useContext(w)},ze.useDebugValue=function(){},ze.useDeferredValue=function(w,R){return oe.H.useDeferredValue(w,R)},ze.useEffect=function(w,R){return oe.H.useEffect(w,R)},ze.useEffectEvent=function(w){return oe.H.useEffectEvent(w)},ze.useId=function(){return oe.H.useId()},ze.useImperativeHandle=function(w,R,F){return oe.H.useImperativeHandle(w,R,F)},ze.useInsertionEffect=function(w,R){return oe.H.useInsertionEffect(w,R)},ze.useLayoutEffect=function(w,R){return oe.H.useLayoutEffect(w,R)},ze.useMemo=function(w,R){return oe.H.useMemo(w,R)},ze.useOptimistic=function(w,R){return oe.H.useOptimistic(w,R)},ze.useReducer=function(w,R,F){return oe.H.useReducer(w,R,F)},ze.useRef=function(w){return oe.H.useRef(w)},ze.useState=function(w){return oe.H.useState(w)},ze.useSyncExternalStore=function(w,R,F){return oe.H.useSyncExternalStore(w,R,F)},ze.useTransition=function(){return oe.H.useTransition()},ze.version="19.2.4",ze}var jy;function ph(){return jy||(jy=1,hf.exports=$b()),hf.exports}var z=ph();const Mf=Tv(z);var pf={exports:{}},pa={},mf={exports:{}},gf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function Jb(){return Yy||(Yy=1,(function(t){function e(O,te){var ve=O.length;O.push(te);e:for(;0<ve;){var Ce=ve-1>>>1,Ge=O[Ce];if(0<l(Ge,te))O[Ce]=te,O[ve]=Ge,ve=Ce;else break e}}function n(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var te=O[0],ve=O.pop();if(ve!==te){O[0]=ve;e:for(var Ce=0,Ge=O.length,w=Ge>>>1;Ce<w;){var R=2*(Ce+1)-1,F=O[R],W=R+1,q=O[W];if(0>l(F,ve))W<Ge&&0>l(q,F)?(O[Ce]=q,O[W]=ve,Ce=W):(O[Ce]=F,O[R]=ve,Ce=R);else if(W<Ge&&0>l(q,ve))O[Ce]=q,O[W]=ve,Ce=W;else break e}}return te}function l(O,te){var ve=O.sortIndex-te.sortIndex;return ve!==0?ve:O.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var u=Date,p=u.now();t.unstable_now=function(){return u.now()-p}}var y=[],m=[],v=1,_=null,E=3,T=!1,N=!1,D=!1,k=!1,G=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function M(O){for(var te=n(m);te!==null;){if(te.callback===null)s(m);else if(te.startTime<=O)s(m),te.sortIndex=te.expirationTime,e(y,te);else break;te=n(m)}}function fe(O){if(D=!1,M(O),!N)if(n(y)!==null)N=!0,ie||(ie=!0,Ye());else{var te=n(m);te!==null&&Fe(fe,te.startTime-O)}}var ie=!1,oe=-1,xe=5,ce=-1;function Ie(){return k?!0:!(t.unstable_now()-ce<xe)}function qe(){if(k=!1,ie){var O=t.unstable_now();ce=O;var te=!0;try{e:{N=!1,D&&(D=!1,X(oe),oe=-1),T=!0;var ve=E;try{t:{for(M(O),_=n(y);_!==null&&!(_.expirationTime>O&&Ie());){var Ce=_.callback;if(typeof Ce=="function"){_.callback=null,E=_.priorityLevel;var Ge=Ce(_.expirationTime<=O);if(O=t.unstable_now(),typeof Ge=="function"){_.callback=Ge,M(O),te=!0;break t}_===n(y)&&s(y),M(O)}else s(y);_=n(y)}if(_!==null)te=!0;else{var w=n(m);w!==null&&Fe(fe,w.startTime-O),te=!1}}break e}finally{_=null,E=ve,T=!1}te=void 0}}finally{te?Ye():ie=!1}}}var Ye;if(typeof j=="function")Ye=function(){j(qe)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Je=ue.port2;ue.port1.onmessage=qe,Ye=function(){Je.postMessage(null)}}else Ye=function(){G(qe,0)};function Fe(O,te){oe=G(function(){O(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(O){switch(E){case 1:case 2:case 3:var te=3;break;default:te=E}var ve=E;E=te;try{return O()}finally{E=ve}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(O,te){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ve=E;E=O;try{return te()}finally{E=ve}},t.unstable_scheduleCallback=function(O,te,ve){var Ce=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ce+ve:Ce):ve=Ce,O){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ve+Ge,O={id:v++,callback:te,priorityLevel:O,startTime:ve,expirationTime:Ge,sortIndex:-1},ve>Ce?(O.sortIndex=ve,e(m,O),n(y)===null&&O===n(m)&&(D?(X(oe),oe=-1):D=!0,Fe(fe,ve-Ce))):(O.sortIndex=Ge,e(y,O),N||T||(N=!0,ie||(ie=!0,Ye()))),O},t.unstable_shouldYield=Ie,t.unstable_wrapCallback=function(O){var te=E;return function(){var ve=E;E=te;try{return O.apply(this,arguments)}finally{E=ve}}}})(gf)),gf}var $y;function Kb(){return $y||($y=1,mf.exports=Jb()),mf.exports}var yf={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy;function Qb(){if(Jy)return Cn;Jy=1;var t=ph();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function r(y,m,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:_==null?null:""+_,children:y,containerInfo:m,implementation:v}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Cn.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return r(y,m,null,v)},Cn.flushSync=function(y){var m=u.T,v=s.p;try{if(u.T=null,s.p=2,y)return y()}finally{u.T=m,s.p=v,s.d.f()}},Cn.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(y,m))},Cn.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Cn.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,T=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?s.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:T}):v==="script"&&s.d.X(y,{crossOrigin:_,integrity:E,fetchPriority:T,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Cn.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);s.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(y)},Cn.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,_=p(v,m.crossOrigin);s.d.L(y,v,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Cn.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=p(m.as,m.crossOrigin);s.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(y)},Cn.requestFormReset=function(y){s.d.r(y)},Cn.unstable_batchedUpdates=function(y,m){return y(m)},Cn.useFormState=function(y,m,v){return u.H.useFormState(y,m,v)},Cn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Cn.version="19.2.4",Cn}var Ky;function Xb(){if(Ky)return yf.exports;Ky=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yf.exports=Qb(),yf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function Wb(){if(Qy)return pa;Qy=1;var t=Kb(),e=ph(),n=Xb();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function r(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function p(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function y(i){if(r(i)!==i)throw Error(s(188))}function m(i){var o=i.alternate;if(!o){if(o=r(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,c=o;;){var g=a.return;if(g===null)break;var x=g.alternate;if(x===null){if(c=g.return,c!==null){a=c;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===a)return y(g),i;if(x===c)return y(g),o;x=x.sibling}throw Error(s(188))}if(a.return!==c.return)a=g,c=x;else{for(var C=!1,b=g.child;b;){if(b===a){C=!0,a=g,c=x;break}if(b===c){C=!0,c=g,a=x;break}b=b.sibling}if(!C){for(b=x.child;b;){if(b===a){C=!0,a=x,c=g;break}if(b===c){C=!0,c=x,a=g;break}b=b.sibling}if(!C)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),j=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),Ie=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator;function Ye(i){return i===null||typeof i!="object"?null:(i=qe&&i[qe]||i["@@iterator"],typeof i=="function"?i:null)}var ue=Symbol.for("react.client.reference");function Je(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ue?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case G:return"Profiler";case k:return"StrictMode";case fe:return"Suspense";case ie:return"SuspenseList";case ce:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case j:return i.displayName||"Context";case X:return(i._context.displayName||"Context")+".Consumer";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case oe:return o=i.displayName||null,o!==null?o:Je(i.type)||"Memo";case xe:o=i._payload,i=i._init;try{return Je(i(o))}catch{}}return null}var Fe=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ce=[],Ge=-1;function w(i){return{current:i}}function R(i){0>Ge||(i.current=Ce[Ge],Ce[Ge]=null,Ge--)}function F(i,o){Ge++,Ce[Ge]=i.current,i.current=o}var W=w(null),q=w(null),ne=w(null),re=w(null);function be(i,o){switch(F(ne,o),F(q,i),F(W,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?dy(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=dy(o),i=fy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}R(W),F(W,i)}function Pe(){R(W),R(q),R(ne)}function rt(i){i.memoizedState!==null&&F(re,i);var o=W.current,a=fy(o,i.type);o!==a&&(F(q,i),F(W,a))}function yt(i){q.current===i&&(R(W),R(q)),re.current===i&&(R(re),ca._currentValue=ve)}var Jt,Dt;function ln(i){if(Jt===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Jt=o&&o[1]||"",Dt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jt+i+Dt}var Y=!1;function ge(i,o){if(!i||Y)return"";Y=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(V){var H=V}Reflect.construct(i,[],Z)}else{try{Z.call()}catch(V){H=V}i.call(Z.prototype)}}else{try{throw Error()}catch(V){H=V}(Z=i())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(V){if(V&&H&&typeof V.stack=="string")return[V.stack,H.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=c.DetermineComponentFrameRoot(),C=x[0],b=x[1];if(C&&b){var A=C.split(`
`),B=b.split(`
`);for(g=c=0;c<A.length&&!A[c].includes("DetermineComponentFrameRoot");)c++;for(;g<B.length&&!B[g].includes("DetermineComponentFrameRoot");)g++;if(c===A.length||g===B.length)for(c=A.length-1,g=B.length-1;1<=c&&0<=g&&A[c]!==B[g];)g--;for(;1<=c&&0<=g;c--,g--)if(A[c]!==B[g]){if(c!==1||g!==1)do if(c--,g--,0>g||A[c]!==B[g]){var $=`
`+A[c].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=c&&0<=g);break}}}finally{Y=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ln(a):""}function ke(i,o){switch(i.tag){case 26:case 27:case 5:return ln(i.type);case 16:return ln("Lazy");case 13:return i.child!==o&&o!==null?ln("Suspense Fallback"):ln("Suspense");case 19:return ln("SuspenseList");case 0:case 15:return ge(i.type,!1);case 11:return ge(i.type.render,!1);case 1:return ge(i.type,!0);case 31:return ln("Activity");default:return""}}function xt(i){try{var o="",a=null;do o+=ke(i,a),a=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Vt=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,L=t.unstable_cancelCallback,ee=t.unstable_shouldYield,J=t.unstable_requestPaint,le=t.unstable_now,he=t.unstable_getCurrentPriorityLevel,Te=t.unstable_ImmediatePriority,ae=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,Me=t.unstable_LowPriority,je=t.unstable_IdlePriority,Ne=t.log,Le=t.unstable_setDisableYieldValue,nt=null,Re=null;function at(i){if(typeof Ne=="function"&&Le(i),Re&&typeof Re.setStrictMode=="function")try{Re.setStrictMode(nt,i)}catch{}}var ct=Math.clz32?Math.clz32:ai,Bn=Math.log,li=Math.LN2;function ai(i){return i>>>=0,i===0?32:31-(Bn(i)/li|0)|0}var Be=256,Ft=262144,wn=4194304;function an(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Yn(i,o,a){var c=i.pendingLanes;if(c===0)return 0;var g=0,x=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var b=c&134217727;return b!==0?(c=b&~x,c!==0?g=an(c):(C&=b,C!==0?g=an(C):a||(a=b&~i,a!==0&&(g=an(a))))):(b=c&~x,b!==0?g=an(b):C!==0?g=an(C):a||(a=c&~i,a!==0&&(g=an(a)))),g===0?0:o!==0&&o!==g&&(o&x)===0&&(x=g&-g,a=o&-o,x>=a||x===32&&(a&4194048)!==0)?o:g}function pn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function vi(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var i=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),i}function ho(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function Os(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function lu(i,o,a,c,g,x){var C=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var b=i.entanglements,A=i.expirationTimes,B=i.hiddenUpdates;for(a=C&~a;0<a;){var $=31-ct(a),Z=1<<$;b[$]=0,A[$]=-1;var H=B[$];if(H!==null)for(B[$]=null,$=0;$<H.length;$++){var V=H[$];V!==null&&(V.lane&=-536870913)}a&=~Z}c!==0&&po(i,c,0),x!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=x&~(C&~o))}function po(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-ct(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function ja(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var c=31-ct(a),g=1<<c;g&o|i[c]&o&&(i[c]|=o),a&=~g}}function Ya(i,o){var a=o&-o;return a=(a&42)!==0?1:vl(a),(a&(i.suspendedLanes|o))!==0?0:a}function vl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function _l(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function El(){var i=te.p;return i!==0?i:(i=window.event,i===void 0?32:Ly(i.type))}function Cl(i,o){var a=te.p;try{return te.p=i,o()}finally{te.p=a}}var ri=Math.random().toString(36).slice(2),tn="__reactFiber$"+ri,mn="__reactProps$"+ri,Ai="__reactContainer$"+ri,mo="__reactEvents$"+ri,$a="__reactListeners$"+ri,Ja="__reactHandles$"+ri,bl="__reactResources$"+ri,is="__reactMarker$"+ri;function go(i){delete i[tn],delete i[mn],delete i[mo],delete i[$a],delete i[Ja]}function wi(i){var o=i[tn];if(o)return o;for(var a=i.parentNode;a;){if(o=a[Ai]||a[tn]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=vy(i);i!==null;){if(a=i[tn])return a;i=vy(i)}return o}i=a,a=i.parentNode}return null}function Ii(i){if(i=i[tn]||i[Ai]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function ss(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Ri(i){var o=i[bl];return o||(o=i[bl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function zt(i){i[is]=!0}var Tl=new Set,Sl={};function _i(i,o){Mi(i,o),Mi(i+"Capture",o)}function Mi(i,o){for(Sl[i]=o,i=0;i<o.length;i++)Tl.add(o[i])}var S=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),K={},se={};function me(i){return Vt.call(se,i)?!0:Vt.call(K,i)?!1:S.test(i)?se[i]=!0:(K[i]=!0,!1)}function _e(i,o,a){if(me(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function Oe(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function Se(i,o,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+c)}}function Ke(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ot(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ae(i,o,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,x=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(C){a=""+C,x.call(this,C)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(C){a=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function ut(i){if(!i._valueTracker){var o=ot(i)?"checked":"value";i._valueTracker=Ae(i,o,""+i[o])}}function Ut(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return i&&(c=ot(i)?i.checked?"true":"false":i.value),i=c,i!==a?(o.setValue(i),!0):!1}function Kt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var On=/[\n"\\]/g;function Nt(i){return i.replace(On,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function dt(i,o,a,c,g,x,C,b){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Ke(o)):i.value!==""+Ke(o)&&(i.value=""+Ke(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?nn(i,C,Ke(o)):a!=null?nn(i,C,Ke(a)):c!=null&&i.removeAttribute("value"),g==null&&x!=null&&(i.defaultChecked=!!x),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.name=""+Ke(b):i.removeAttribute("name")}function os(i,o,a,c,g,x,C,b){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.type=x),o!=null||a!=null){if(!(x!=="submit"&&x!=="reset"||o!=null)){ut(i);return}a=a!=null?""+Ke(a):"",o=o!=null?""+Ke(o):a,b||o===i.value||(i.value=o),i.defaultValue=o}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=b?i.checked:!!c,i.defaultChecked=!!c,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),ut(i)}function nn(i,o,a){o==="number"&&Kt(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Qt(i,o,a,c){if(i=i.options,o){o={};for(var g=0;g<a.length;g++)o["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=o.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Ke(a),o=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,c&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function $n(i,o,a){if(o!=null&&(o=""+Ke(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Ke(a):""}function sn(i,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(s(92));if(Fe(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=Ke(o),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),ut(i)}function Jn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var Di=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yo(i,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,a):typeof a!="number"||a===0||Di.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function cp(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var g in o)c=o[g],o.hasOwnProperty(g)&&a[g]!==c&&yo(i,g,c)}else for(var x in o)o.hasOwnProperty(x)&&yo(i,x,o[x])}function au(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ka(i){return VE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ki(){}var ru=null;function cu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xo=null,vo=null;function up(i){var o=Ii(i);if(o&&(i=o.stateNode)){var a=i[mn]||null;e:switch(i=o.stateNode,o.type){case"input":if(dt(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==i&&c.form===i.form){var g=c[mn]||null;if(!g)throw Error(s(90));dt(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===i.form&&Ut(c)}break e;case"textarea":$n(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&Qt(i,!!a.multiple,o,!1)}}}var uu=!1;function dp(i,o,a){if(uu)return i(o,a);uu=!0;try{var c=i(o);return c}finally{if(uu=!1,(xo!==null||vo!==null)&&(Ur(),xo&&(o=xo,i=vo,vo=xo=null,up(o),i)))for(o=0;o<i.length;o++)up(i[o])}}function Nl(i,o){var a=i.stateNode;if(a===null)return null;var c=a[mn]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=!1;if(Pi)try{var Al={};Object.defineProperty(Al,"passive",{get:function(){du=!0}}),window.addEventListener("test",Al,Al),window.removeEventListener("test",Al,Al)}catch{du=!1}var ls=null,fu=null,Qa=null;function fp(){if(Qa)return Qa;var i,o=fu,a=o.length,c,g="value"in ls?ls.value:ls.textContent,x=g.length;for(i=0;i<a&&o[i]===g[i];i++);var C=a-i;for(c=1;c<=C&&o[a-c]===g[x-c];c++);return Qa=g.slice(i,1<c?1-c:void 0)}function Xa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Wa(){return!0}function hp(){return!1}function In(i){function o(a,c,g,x,C){this._reactName=a,this._targetInst=g,this.type=c,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(a=i[b],this[b]=a?a(x):x[b]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Wa:hp,this.isPropagationStopped=hp,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wa)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wa)},persist:function(){},isPersistent:Wa}),o}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Za=In(Hs),wl=_({},Hs,{view:0,detail:0}),FE=In(wl),hu,pu,Il,er=_({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Il&&(Il&&i.type==="mousemove"?(hu=i.screenX-Il.screenX,pu=i.screenY-Il.screenY):pu=hu=0,Il=i),hu)},movementY:function(i){return"movementY"in i?i.movementY:pu}}),pp=In(er),zE=_({},er,{dataTransfer:0}),jE=In(zE),YE=_({},wl,{relatedTarget:0}),mu=In(YE),$E=_({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=In($E),KE=_({},Hs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),QE=In(KE),XE=_({},Hs,{data:0}),mp=In(XE),WE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tC(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=eC[i])?!!o[i]:!1}function gu(){return tC}var nC=_({},wl,{key:function(i){if(i.key){var o=WE[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Xa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ZE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(i){return i.type==="keypress"?Xa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),iC=In(nC),sC=_({},er,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=In(sC),oC=_({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),lC=In(oC),aC=_({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),rC=In(aC),cC=_({},er,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uC=In(cC),dC=_({},Hs,{newState:0,oldState:0}),fC=In(dC),hC=[9,13,27,32],yu=Pi&&"CompositionEvent"in window,Rl=null;Pi&&"documentMode"in document&&(Rl=document.documentMode);var pC=Pi&&"TextEvent"in window&&!Rl,yp=Pi&&(!yu||Rl&&8<Rl&&11>=Rl),xp=" ",vp=!1;function _p(i,o){switch(i){case"keyup":return hC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _o=!1;function mC(i,o){switch(i){case"compositionend":return Ep(o);case"keypress":return o.which!==32?null:(vp=!0,xp);case"textInput":return i=o.data,i===xp&&vp?null:i;default:return null}}function gC(i,o){if(_o)return i==="compositionend"||!yu&&_p(i,o)?(i=fp(),Qa=fu=ls=null,_o=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return yp&&o.locale!=="ko"?null:o.data;default:return null}}var yC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!yC[i.type]:o==="textarea"}function bp(i,o,a,c){xo?vo?vo.push(c):vo=[c]:xo=c,o=Fr(o,"onChange"),0<o.length&&(a=new Za("onChange","change",null,a,c),i.push({event:a,listeners:o}))}var Ml=null,Dl=null;function xC(i){oy(i,0)}function tr(i){var o=ss(i);if(Ut(o))return i}function Tp(i,o){if(i==="change")return o}var Sp=!1;if(Pi){var xu;if(Pi){var vu="oninput"in document;if(!vu){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),vu=typeof Np.oninput=="function"}xu=vu}else xu=!1;Sp=xu&&(!document.documentMode||9<document.documentMode)}function Ap(){Ml&&(Ml.detachEvent("onpropertychange",wp),Dl=Ml=null)}function wp(i){if(i.propertyName==="value"&&tr(Dl)){var o=[];bp(o,Dl,i,cu(i)),dp(xC,o)}}function vC(i,o,a){i==="focusin"?(Ap(),Ml=o,Dl=a,Ml.attachEvent("onpropertychange",wp)):i==="focusout"&&Ap()}function _C(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return tr(Dl)}function EC(i,o){if(i==="click")return tr(o)}function CC(i,o){if(i==="input"||i==="change")return tr(o)}function bC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Hn=typeof Object.is=="function"?Object.is:bC;function kl(i,o){if(Hn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var g=a[c];if(!Vt.call(o,g)||!Hn(i[g],o[g]))return!1}return!0}function Ip(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rp(i,o){var a=Ip(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=o&&c>=o)return{node:a,offset:o-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ip(a)}}function Mp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Mp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Dp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Kt(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Kt(i.document)}return o}function _u(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var TC=Pi&&"documentMode"in document&&11>=document.documentMode,Eo=null,Eu=null,Pl=null,Cu=!1;function kp(i,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cu||Eo==null||Eo!==Kt(c)||(c=Eo,"selectionStart"in c&&_u(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Pl&&kl(Pl,c)||(Pl=c,c=Fr(Eu,"onSelect"),0<c.length&&(o=new Za("onSelect","select",null,o,a),i.push({event:o,listeners:c}),o.target=Eo)))}function Gs(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Co={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},bu={},Pp={};Pi&&(Pp=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function qs(i){if(bu[i])return bu[i];if(!Co[i])return i;var o=Co[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Pp)return bu[i]=o[a];return i}var Lp=qs("animationend"),Up=qs("animationiteration"),Bp=qs("animationstart"),SC=qs("transitionrun"),NC=qs("transitionstart"),AC=qs("transitioncancel"),Op=qs("transitionend"),Hp=new Map,Tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tu.push("scrollEnd");function ci(i,o){Hp.set(i,o),_i(o,[i])}var nr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Kn=[],bo=0,Su=0;function ir(){for(var i=bo,o=Su=bo=0;o<i;){var a=Kn[o];Kn[o++]=null;var c=Kn[o];Kn[o++]=null;var g=Kn[o];Kn[o++]=null;var x=Kn[o];if(Kn[o++]=null,c!==null&&g!==null){var C=c.pending;C===null?g.next=g:(g.next=C.next,C.next=g),c.pending=g}x!==0&&Gp(a,g,x)}}function sr(i,o,a,c){Kn[bo++]=i,Kn[bo++]=o,Kn[bo++]=a,Kn[bo++]=c,Su|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Nu(i,o,a,c){return sr(i,o,a,c),or(i)}function Vs(i,o){return sr(i,null,null,o),or(i)}function Gp(i,o,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var g=!1,x=i.return;x!==null;)x.childLanes|=a,c=x.alternate,c!==null&&(c.childLanes|=a),x.tag===22&&(i=x.stateNode,i===null||i._visibility&1||(g=!0)),i=x,x=x.return;return i.tag===3?(x=i.stateNode,g&&o!==null&&(g=31-ct(a),i=x.hiddenUpdates,c=i[g],c===null?i[g]=[o]:c.push(o),o.lane=a|536870912),x):null}function or(i){if(50<na)throw na=0,Ld=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var To={};function wC(i,o,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,o,a,c){return new wC(i,o,a,c)}function Au(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Li(i,o){var a=i.alternate;return a===null?(a=Gn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function qp(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function lr(i,o,a,c,g,x){var C=0;if(c=i,typeof i=="function")Au(i)&&(C=1);else if(typeof i=="string")C=kb(i,a,W.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case ce:return i=Gn(31,a,o,g),i.elementType=ce,i.lanes=x,i;case D:return Fs(a.children,g,x,o);case k:C=8,g|=24;break;case G:return i=Gn(12,a,o,g|2),i.elementType=G,i.lanes=x,i;case fe:return i=Gn(13,a,o,g),i.elementType=fe,i.lanes=x,i;case ie:return i=Gn(19,a,o,g),i.elementType=ie,i.lanes=x,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:C=10;break e;case X:C=9;break e;case M:C=11;break e;case oe:C=14;break e;case xe:C=16,c=null;break e}C=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=Gn(C,a,o,g),o.elementType=i,o.type=c,o.lanes=x,o}function Fs(i,o,a,c){return i=Gn(7,i,c,o),i.lanes=a,i}function wu(i,o,a){return i=Gn(6,i,null,o),i.lanes=a,i}function Vp(i){var o=Gn(18,null,null,0);return o.stateNode=i,o}function Iu(i,o,a){return o=Gn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Fp=new WeakMap;function Qn(i,o){if(typeof i=="object"&&i!==null){var a=Fp.get(i);return a!==void 0?a:(o={value:i,source:o,stack:xt(o)},Fp.set(i,o),o)}return{value:i,source:o,stack:xt(o)}}var So=[],No=0,ar=null,Ll=0,Xn=[],Wn=0,as=null,Ei=1,Ci="";function Ui(i,o){So[No++]=Ll,So[No++]=ar,ar=i,Ll=o}function zp(i,o,a){Xn[Wn++]=Ei,Xn[Wn++]=Ci,Xn[Wn++]=as,as=i;var c=Ei;i=Ci;var g=32-ct(c)-1;c&=~(1<<g),a+=1;var x=32-ct(o)+g;if(30<x){var C=g-g%5;x=(c&(1<<C)-1).toString(32),c>>=C,g-=C,Ei=1<<32-ct(o)+g|a<<g|c,Ci=x+i}else Ei=1<<x|a<<g|c,Ci=i}function Ru(i){i.return!==null&&(Ui(i,1),zp(i,1,0))}function Mu(i){for(;i===ar;)ar=So[--No],So[No]=null,Ll=So[--No],So[No]=null;for(;i===as;)as=Xn[--Wn],Xn[Wn]=null,Ci=Xn[--Wn],Xn[Wn]=null,Ei=Xn[--Wn],Xn[Wn]=null}function jp(i,o){Xn[Wn++]=Ei,Xn[Wn++]=Ci,Xn[Wn++]=as,Ei=o.id,Ci=o.overflow,as=i}var gn=null,Pt=null,lt=!1,rs=null,Zn=!1,Du=Error(s(519));function cs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(Qn(o,i)),Du}function Yp(i){var o=i.stateNode,a=i.type,c=i.memoizedProps;switch(o[tn]=i,o[mn]=c,a){case"dialog":et("cancel",o),et("close",o);break;case"iframe":case"object":case"embed":et("load",o);break;case"video":case"audio":for(a=0;a<sa.length;a++)et(sa[a],o);break;case"source":et("error",o);break;case"img":case"image":case"link":et("error",o),et("load",o);break;case"details":et("toggle",o);break;case"input":et("invalid",o),os(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":et("invalid",o);break;case"textarea":et("invalid",o),sn(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||cy(o.textContent,a)?(c.popover!=null&&(et("beforetoggle",o),et("toggle",o)),c.onScroll!=null&&et("scroll",o),c.onScrollEnd!=null&&et("scrollend",o),c.onClick!=null&&(o.onclick=ki),o=!0):o=!1,o||cs(i,!0)}function $p(i){for(gn=i.return;gn;)switch(gn.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:gn=gn.return}}function Ao(i){if(i!==gn)return!1;if(!lt)return $p(i),lt=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Qd(i.type,i.memoizedProps)),a=!a),a&&Pt&&cs(i),$p(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Pt=xy(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Pt=xy(i)}else o===27?(o=Pt,bs(i.type)?(i=tf,tf=null,Pt=i):Pt=o):Pt=gn?ti(i.stateNode.nextSibling):null;return!0}function zs(){Pt=gn=null,lt=!1}function ku(){var i=rs;return i!==null&&(kn===null?kn=i:kn.push.apply(kn,i),rs=null),i}function Ul(i){rs===null?rs=[i]:rs.push(i)}var Pu=w(null),js=null,Bi=null;function us(i,o,a){F(Pu,o._currentValue),o._currentValue=a}function Oi(i){i._currentValue=Pu.current,R(Pu)}function Lu(i,o,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===a)break;i=i.return}}function Uu(i,o,a,c){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var x=g.dependencies;if(x!==null){var C=g.child;x=x.firstContext;e:for(;x!==null;){var b=x;x=g;for(var A=0;A<o.length;A++)if(b.context===o[A]){x.lanes|=a,b=x.alternate,b!==null&&(b.lanes|=a),Lu(x.return,a,i),c||(C=null);break e}x=b.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(s(341));C.lanes|=a,x=C.alternate,x!==null&&(x.lanes|=a),Lu(C,a,i),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===i){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function wo(i,o,a,c){i=null;for(var g=o,x=!1;g!==null;){if(!x){if((g.flags&524288)!==0)x=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var b=g.type;Hn(g.pendingProps.value,C.value)||(i!==null?i.push(b):i=[b])}}else if(g===re.current){if(C=g.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ca):i=[ca])}g=g.return}i!==null&&Uu(o,i,a,c),o.flags|=262144}function rr(i){for(i=i.firstContext;i!==null;){if(!Hn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ys(i){js=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function yn(i){return Jp(js,i)}function cr(i,o){return js===null&&Ys(i),Jp(i,o)}function Jp(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Bi===null){if(i===null)throw Error(s(308));Bi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Bi=Bi.next=o;return a}var IC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},RC=t.unstable_scheduleCallback,MC=t.unstable_NormalPriority,Xt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bu(){return{controller:new IC,data:new Map,refCount:0}}function Bl(i){i.refCount--,i.refCount===0&&RC(MC,function(){i.controller.abort()})}var Ol=null,Ou=0,Io=0,Ro=null;function DC(i,o){if(Ol===null){var a=Ol=[];Ou=0,Io=qd(),Ro={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Ou++,o.then(Kp,Kp),o}function Kp(){if(--Ou===0&&Ol!==null){Ro!==null&&(Ro.status="fulfilled");var i=Ol;Ol=null,Io=0,Ro=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function kC(i,o){var a=[],c={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var g=0;g<a.length;g++)(0,a[g])(o)},function(g){for(c.status="rejected",c.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),c}var Qp=O.S;O.S=function(i,o){kg=le(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&DC(i,o),Qp!==null&&Qp(i,o)};var $s=w(null);function Hu(){var i=$s.current;return i!==null?i:St.pooledCache}function ur(i,o){o===null?F($s,$s.current):F($s,o.pool)}function Xp(){var i=Hu();return i===null?null:{parent:Xt._currentValue,pool:i}}var Mo=Error(s(460)),Gu=Error(s(474)),dr=Error(s(542)),fr={then:function(){}};function Wp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zp(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(ki,ki),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,tm(i),i;default:if(typeof o.status=="string")o.then(ki,ki);else{if(i=St,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=c}},function(c){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,tm(i),i}throw Ks=o,Mo}}function Js(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ks=a,Mo):a}}var Ks=null;function em(){if(Ks===null)throw Error(s(459));var i=Ks;return Ks=null,i}function tm(i){if(i===Mo||i===dr)throw Error(s(483))}var Do=null,Hl=0;function hr(i){var o=Hl;return Hl+=1,Do===null&&(Do=[]),Zp(Do,i,o)}function Gl(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function pr(i,o){throw o.$$typeof===E?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function nm(i){function o(P,I){if(i){var U=P.deletions;U===null?(P.deletions=[I],P.flags|=16):U.push(I)}}function a(P,I){if(!i)return null;for(;I!==null;)o(P,I),I=I.sibling;return null}function c(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function g(P,I){return P=Li(P,I),P.index=0,P.sibling=null,P}function x(P,I,U){return P.index=U,i?(U=P.alternate,U!==null?(U=U.index,U<I?(P.flags|=67108866,I):U):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function C(P){return i&&P.alternate===null&&(P.flags|=67108866),P}function b(P,I,U,Q){return I===null||I.tag!==6?(I=wu(U,P.mode,Q),I.return=P,I):(I=g(I,U),I.return=P,I)}function A(P,I,U,Q){var De=U.type;return De===D?$(P,I,U.props.children,Q,U.key):I!==null&&(I.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===xe&&Js(De)===I.type)?(I=g(I,U.props),Gl(I,U),I.return=P,I):(I=lr(U.type,U.key,U.props,null,P.mode,Q),Gl(I,U),I.return=P,I)}function B(P,I,U,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=Iu(U,P.mode,Q),I.return=P,I):(I=g(I,U.children||[]),I.return=P,I)}function $(P,I,U,Q,De){return I===null||I.tag!==7?(I=Fs(U,P.mode,Q,De),I.return=P,I):(I=g(I,U),I.return=P,I)}function Z(P,I,U){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=wu(""+I,P.mode,U),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case T:return U=lr(I.type,I.key,I.props,null,P.mode,U),Gl(U,I),U.return=P,U;case N:return I=Iu(I,P.mode,U),I.return=P,I;case xe:return I=Js(I),Z(P,I,U)}if(Fe(I)||Ye(I))return I=Fs(I,P.mode,U,null),I.return=P,I;if(typeof I.then=="function")return Z(P,hr(I),U);if(I.$$typeof===j)return Z(P,cr(P,I),U);pr(P,I)}return null}function H(P,I,U,Q){var De=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return De!==null?null:b(P,I,""+U,Q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case T:return U.key===De?A(P,I,U,Q):null;case N:return U.key===De?B(P,I,U,Q):null;case xe:return U=Js(U),H(P,I,U,Q)}if(Fe(U)||Ye(U))return De!==null?null:$(P,I,U,Q,null);if(typeof U.then=="function")return H(P,I,hr(U),Q);if(U.$$typeof===j)return H(P,I,cr(P,U),Q);pr(P,U)}return null}function V(P,I,U,Q,De){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(U)||null,b(I,P,""+Q,De);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return P=P.get(Q.key===null?U:Q.key)||null,A(I,P,Q,De);case N:return P=P.get(Q.key===null?U:Q.key)||null,B(I,P,Q,De);case xe:return Q=Js(Q),V(P,I,U,Q,De)}if(Fe(Q)||Ye(Q))return P=P.get(U)||null,$(I,P,Q,De,null);if(typeof Q.then=="function")return V(P,I,U,hr(Q),De);if(Q.$$typeof===j)return V(P,I,U,cr(I,Q),De);pr(I,Q)}return null}function Ee(P,I,U,Q){for(var De=null,ft=null,we=I,Qe=I=0,st=null;we!==null&&Qe<U.length;Qe++){we.index>Qe?(st=we,we=null):st=we.sibling;var ht=H(P,we,U[Qe],Q);if(ht===null){we===null&&(we=st);break}i&&we&&ht.alternate===null&&o(P,we),I=x(ht,I,Qe),ft===null?De=ht:ft.sibling=ht,ft=ht,we=st}if(Qe===U.length)return a(P,we),lt&&Ui(P,Qe),De;if(we===null){for(;Qe<U.length;Qe++)we=Z(P,U[Qe],Q),we!==null&&(I=x(we,I,Qe),ft===null?De=we:ft.sibling=we,ft=we);return lt&&Ui(P,Qe),De}for(we=c(we);Qe<U.length;Qe++)st=V(we,P,Qe,U[Qe],Q),st!==null&&(i&&st.alternate!==null&&we.delete(st.key===null?Qe:st.key),I=x(st,I,Qe),ft===null?De=st:ft.sibling=st,ft=st);return i&&we.forEach(function(ws){return o(P,ws)}),lt&&Ui(P,Qe),De}function Ue(P,I,U,Q){if(U==null)throw Error(s(151));for(var De=null,ft=null,we=I,Qe=I=0,st=null,ht=U.next();we!==null&&!ht.done;Qe++,ht=U.next()){we.index>Qe?(st=we,we=null):st=we.sibling;var ws=H(P,we,ht.value,Q);if(ws===null){we===null&&(we=st);break}i&&we&&ws.alternate===null&&o(P,we),I=x(ws,I,Qe),ft===null?De=ws:ft.sibling=ws,ft=ws,we=st}if(ht.done)return a(P,we),lt&&Ui(P,Qe),De;if(we===null){for(;!ht.done;Qe++,ht=U.next())ht=Z(P,ht.value,Q),ht!==null&&(I=x(ht,I,Qe),ft===null?De=ht:ft.sibling=ht,ft=ht);return lt&&Ui(P,Qe),De}for(we=c(we);!ht.done;Qe++,ht=U.next())ht=V(we,P,Qe,ht.value,Q),ht!==null&&(i&&ht.alternate!==null&&we.delete(ht.key===null?Qe:ht.key),I=x(ht,I,Qe),ft===null?De=ht:ft.sibling=ht,ft=ht);return i&&we.forEach(function(zb){return o(P,zb)}),lt&&Ui(P,Qe),De}function bt(P,I,U,Q){if(typeof U=="object"&&U!==null&&U.type===D&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case T:e:{for(var De=U.key;I!==null;){if(I.key===De){if(De=U.type,De===D){if(I.tag===7){a(P,I.sibling),Q=g(I,U.props.children),Q.return=P,P=Q;break e}}else if(I.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===xe&&Js(De)===I.type){a(P,I.sibling),Q=g(I,U.props),Gl(Q,U),Q.return=P,P=Q;break e}a(P,I);break}else o(P,I);I=I.sibling}U.type===D?(Q=Fs(U.props.children,P.mode,Q,U.key),Q.return=P,P=Q):(Q=lr(U.type,U.key,U.props,null,P.mode,Q),Gl(Q,U),Q.return=P,P=Q)}return C(P);case N:e:{for(De=U.key;I!==null;){if(I.key===De)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){a(P,I.sibling),Q=g(I,U.children||[]),Q.return=P,P=Q;break e}else{a(P,I);break}else o(P,I);I=I.sibling}Q=Iu(U,P.mode,Q),Q.return=P,P=Q}return C(P);case xe:return U=Js(U),bt(P,I,U,Q)}if(Fe(U))return Ee(P,I,U,Q);if(Ye(U)){if(De=Ye(U),typeof De!="function")throw Error(s(150));return U=De.call(U),Ue(P,I,U,Q)}if(typeof U.then=="function")return bt(P,I,hr(U),Q);if(U.$$typeof===j)return bt(P,I,cr(P,U),Q);pr(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,I!==null&&I.tag===6?(a(P,I.sibling),Q=g(I,U),Q.return=P,P=Q):(a(P,I),Q=wu(U,P.mode,Q),Q.return=P,P=Q),C(P)):a(P,I)}return function(P,I,U,Q){try{Hl=0;var De=bt(P,I,U,Q);return Do=null,De}catch(we){if(we===Mo||we===dr)throw we;var ft=Gn(29,we,null,P.mode);return ft.lanes=Q,ft.return=P,ft}finally{}}}var Qs=nm(!0),im=nm(!1),ds=!1;function qu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function fs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function hs(i,o,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(mt&2)!==0){var g=c.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),c.pending=o,o=or(i),Gp(i,null,a),o}return sr(i,c,o,a),or(i)}function ql(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,ja(i,a)}}function Fu(i,o){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var g=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var C={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};x===null?g=x=C:x=x.next=C,a=a.next}while(a!==null);x===null?g=x=o:x=x.next=o}else g=x=o;a={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var zu=!1;function Vl(){if(zu){var i=Ro;if(i!==null)throw i}}function Fl(i,o,a,c){zu=!1;var g=i.updateQueue;ds=!1;var x=g.firstBaseUpdate,C=g.lastBaseUpdate,b=g.shared.pending;if(b!==null){g.shared.pending=null;var A=b,B=A.next;A.next=null,C===null?x=B:C.next=B,C=A;var $=i.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==C&&(b===null?$.firstBaseUpdate=B:b.next=B,$.lastBaseUpdate=A))}if(x!==null){var Z=g.baseState;C=0,$=B=A=null,b=x;do{var H=b.lane&-536870913,V=H!==b.lane;if(V?(it&H)===H:(c&H)===H){H!==0&&H===Io&&(zu=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Ee=i,Ue=b;H=o;var bt=a;switch(Ue.tag){case 1:if(Ee=Ue.payload,typeof Ee=="function"){Z=Ee.call(bt,Z,H);break e}Z=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ue.payload,H=typeof Ee=="function"?Ee.call(bt,Z,H):Ee,H==null)break e;Z=_({},Z,H);break e;case 2:ds=!0}}H=b.callback,H!==null&&(i.flags|=64,V&&(i.flags|=8192),V=g.callbacks,V===null?g.callbacks=[H]:V.push(H))}else V={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(B=$=V,A=Z):$=$.next=V,C|=H;if(b=b.next,b===null){if(b=g.shared.pending,b===null)break;V=b,b=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);$===null&&(A=Z),g.baseState=A,g.firstBaseUpdate=B,g.lastBaseUpdate=$,x===null&&(g.shared.lanes=0),xs|=C,i.lanes=C,i.memoizedState=Z}}function sm(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function om(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)sm(a[i],o)}var ko=w(null),mr=w(0);function lm(i,o){i=$i,F(mr,i),F(ko,o),$i=i|o.baseLanes}function ju(){F(mr,$i),F(ko,ko.current)}function Yu(){$i=mr.current,R(ko),R(mr)}var qn=w(null),ei=null;function ps(i){var o=i.alternate;F(jt,jt.current&1),F(qn,i),ei===null&&(o===null||ko.current!==null||o.memoizedState!==null)&&(ei=i)}function $u(i){F(jt,jt.current),F(qn,i),ei===null&&(ei=i)}function am(i){i.tag===22?(F(jt,jt.current),F(qn,i),ei===null&&(ei=i)):ms()}function ms(){F(jt,jt.current),F(qn,qn.current)}function Vn(i){R(qn),ei===i&&(ei=null),R(jt)}var jt=w(0);function gr(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Zd(a)||ef(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Hi=0,$e=null,Et=null,Wt=null,yr=!1,Po=!1,Xs=!1,xr=0,zl=0,Lo=null,PC=0;function Ot(){throw Error(s(321))}function Ju(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Hn(i[a],o[a]))return!1;return!0}function Ku(i,o,a,c,g,x){return Hi=x,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,O.H=i===null||i.memoizedState===null?zm:ud,Xs=!1,x=a(c,g),Xs=!1,Po&&(x=cm(o,a,c,g)),rm(i),x}function rm(i){O.H=$l;var o=Et!==null&&Et.next!==null;if(Hi=0,Wt=Et=$e=null,yr=!1,zl=0,Lo=null,o)throw Error(s(300));i===null||Zt||(i=i.dependencies,i!==null&&rr(i)&&(Zt=!0))}function cm(i,o,a,c){$e=i;var g=0;do{if(Po&&(Lo=null),zl=0,Po=!1,25<=g)throw Error(s(301));if(g+=1,Wt=Et=null,i.updateQueue!=null){var x=i.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}O.H=jm,x=o(a,c)}while(Po);return x}function LC(){var i=O.H,o=i.useState()[0];return o=typeof o.then=="function"?jl(o):o,i=i.useState()[0],(Et!==null?Et.memoizedState:null)!==i&&($e.flags|=1024),o}function Qu(){var i=xr!==0;return xr=0,i}function Xu(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Wu(i){if(yr){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}yr=!1}Hi=0,Wt=Et=$e=null,Po=!1,zl=xr=0,Lo=null}function Tn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?$e.memoizedState=Wt=i:Wt=Wt.next=i,Wt}function Yt(){if(Et===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=Et.next;var o=Wt===null?$e.memoizedState:Wt.next;if(o!==null)Wt=o,Et=i;else{if(i===null)throw $e.alternate===null?Error(s(467)):Error(s(310));Et=i,i={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Wt===null?$e.memoizedState=Wt=i:Wt=Wt.next=i}return Wt}function vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(i){var o=zl;return zl+=1,Lo===null&&(Lo=[]),i=Zp(Lo,i,o),o=$e,(Wt===null?o.memoizedState:Wt.next)===null&&(o=o.alternate,O.H=o===null||o.memoizedState===null?zm:ud),i}function _r(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return jl(i);if(i.$$typeof===j)return yn(i)}throw Error(s(438,String(i)))}function Zu(i){var o=null,a=$e.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=$e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=vr(),$e.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),c=0;c<i;c++)a[c]=Ie;return o.index++,a}function Gi(i,o){return typeof o=="function"?o(i):o}function Er(i){var o=Yt();return ed(o,Et,i)}function ed(i,o,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var g=i.baseQueue,x=c.pending;if(x!==null){if(g!==null){var C=g.next;g.next=x.next,x.next=C}o.baseQueue=g=x,c.pending=null}if(x=i.baseState,g===null)i.memoizedState=x;else{o=g.next;var b=C=null,A=null,B=o,$=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(it&Z)===Z:(Hi&Z)===Z){var H=B.revertLane;if(H===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Io&&($=!0);else if((Hi&H)===H){B=B.next,H===Io&&($=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(b=A=Z,C=x):A=A.next=Z,$e.lanes|=H,xs|=H;Z=B.action,Xs&&a(x,Z),x=B.hasEagerState?B.eagerState:a(x,Z)}else H={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(b=A=H,C=x):A=A.next=H,$e.lanes|=Z,xs|=Z;B=B.next}while(B!==null&&B!==o);if(A===null?C=x:A.next=b,!Hn(x,i.memoizedState)&&(Zt=!0,$&&(a=Ro,a!==null)))throw a;i.memoizedState=x,i.baseState=C,i.baseQueue=A,c.lastRenderedState=x}return g===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function td(i){var o=Yt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,g=a.pending,x=o.memoizedState;if(g!==null){a.pending=null;var C=g=g.next;do x=i(x,C.action),C=C.next;while(C!==g);Hn(x,o.memoizedState)||(Zt=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),a.lastRenderedState=x}return[x,c]}function um(i,o,a){var c=$e,g=Yt(),x=lt;if(x){if(a===void 0)throw Error(s(407));a=a()}else a=o();var C=!Hn((Et||g).memoizedState,a);if(C&&(g.memoizedState=a,Zt=!0),g=g.queue,sd(hm.bind(null,c,g,i),[i]),g.getSnapshot!==o||C||Wt!==null&&Wt.memoizedState.tag&1){if(c.flags|=2048,Uo(9,{destroy:void 0},fm.bind(null,c,g,a,o),null),St===null)throw Error(s(349));x||(Hi&127)!==0||dm(c,o,a)}return a}function dm(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=$e.updateQueue,o===null?(o=vr(),$e.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function fm(i,o,a,c){o.value=a,o.getSnapshot=c,pm(o)&&mm(i)}function hm(i,o,a){return a(function(){pm(o)&&mm(i)})}function pm(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Hn(i,a)}catch{return!0}}function mm(i){var o=Vs(i,2);o!==null&&Pn(o,i,2)}function nd(i){var o=Tn();if(typeof i=="function"){var a=i;if(i=a(),Xs){at(!0);try{a()}finally{at(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:i},o}function gm(i,o,a,c){return i.baseState=a,ed(i,Et,typeof c=="function"?c:Gi)}function UC(i,o,a,c,g){if(Tr(i))throw Error(s(485));if(i=o.action,i!==null){var x={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};O.T!==null?a(!0):x.isTransition=!1,c(x),a=o.pending,a===null?(x.next=o.pending=x,ym(o,x)):(x.next=a.next,o.pending=a.next=x)}}function ym(i,o){var a=o.action,c=o.payload,g=i.state;if(o.isTransition){var x=O.T,C={};O.T=C;try{var b=a(g,c),A=O.S;A!==null&&A(C,b),xm(i,o,b)}catch(B){id(i,o,B)}finally{x!==null&&C.types!==null&&(x.types=C.types),O.T=x}}else try{x=a(g,c),xm(i,o,x)}catch(B){id(i,o,B)}}function xm(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){vm(i,o,c)},function(c){return id(i,o,c)}):vm(i,o,a)}function vm(i,o,a){o.status="fulfilled",o.value=a,_m(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,ym(i,a)))}function id(i,o,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,_m(o),o=o.next;while(o!==c)}i.action=null}function _m(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Em(i,o){return o}function Cm(i,o){if(lt){var a=St.formState;if(a!==null){e:{var c=$e;if(lt){if(Pt){t:{for(var g=Pt,x=Zn;g.nodeType!==8;){if(!x){g=null;break t}if(g=ti(g.nextSibling),g===null){g=null;break t}}x=g.data,g=x==="F!"||x==="F"?g:null}if(g){Pt=ti(g.nextSibling),c=g.data==="F!";break e}}cs(c)}c=!1}c&&(o=a[0])}}return a=Tn(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:o},a.queue=c,a=qm.bind(null,$e,c),c.dispatch=a,c=nd(!1),x=cd.bind(null,$e,!1,c.queue),c=Tn(),g={state:o,dispatch:null,action:i,pending:null},c.queue=g,a=UC.bind(null,$e,g,x,a),g.dispatch=a,c.memoizedState=i,[o,a,!1]}function bm(i){var o=Yt();return Tm(o,Et,i)}function Tm(i,o,a){if(o=ed(i,o,Em)[0],i=Er(Gi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=jl(o)}catch(C){throw C===Mo?dr:C}else c=o;o=Yt();var g=o.queue,x=g.dispatch;return a!==o.memoizedState&&($e.flags|=2048,Uo(9,{destroy:void 0},BC.bind(null,g,a),null)),[c,x,i]}function BC(i,o){i.action=o}function Sm(i){var o=Yt(),a=Et;if(a!==null)return Tm(o,a,i);Yt(),o=o.memoizedState,a=Yt();var c=a.queue.dispatch;return a.memoizedState=i,[o,c,!1]}function Uo(i,o,a,c){return i={tag:i,create:a,deps:c,inst:o,next:null},o=$e.updateQueue,o===null&&(o=vr(),$e.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,o.lastEffect=i),i}function Nm(){return Yt().memoizedState}function Cr(i,o,a,c){var g=Tn();$e.flags|=i,g.memoizedState=Uo(1|o,{destroy:void 0},a,c===void 0?null:c)}function br(i,o,a,c){var g=Yt();c=c===void 0?null:c;var x=g.memoizedState.inst;Et!==null&&c!==null&&Ju(c,Et.memoizedState.deps)?g.memoizedState=Uo(o,x,a,c):($e.flags|=i,g.memoizedState=Uo(1|o,x,a,c))}function Am(i,o){Cr(8390656,8,i,o)}function sd(i,o){br(2048,8,i,o)}function OC(i){$e.flags|=4;var o=$e.updateQueue;if(o===null)o=vr(),$e.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function wm(i){var o=Yt().memoizedState;return OC({ref:o,nextImpl:i}),function(){if((mt&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Im(i,o){return br(4,2,i,o)}function Rm(i,o){return br(4,4,i,o)}function Mm(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Dm(i,o,a){a=a!=null?a.concat([i]):null,br(4,4,Mm.bind(null,o,i),a)}function od(){}function km(i,o){var a=Yt();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&Ju(o,c[1])?c[0]:(a.memoizedState=[i,o],i)}function Pm(i,o){var a=Yt();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&Ju(o,c[1]))return c[0];if(c=i(),Xs){at(!0);try{i()}finally{at(!1)}}return a.memoizedState=[c,o],c}function ld(i,o,a){return a===void 0||(Hi&1073741824)!==0&&(it&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=Lg(),$e.lanes|=i,xs|=i,a)}function Lm(i,o,a,c){return Hn(a,o)?a:ko.current!==null?(i=ld(i,a,c),Hn(i,o)||(Zt=!0),i):(Hi&42)===0||(Hi&1073741824)!==0&&(it&261930)===0?(Zt=!0,i.memoizedState=a):(i=Lg(),$e.lanes|=i,xs|=i,o)}function Um(i,o,a,c,g){var x=te.p;te.p=x!==0&&8>x?x:8;var C=O.T,b={};O.T=b,cd(i,!1,o,a);try{var A=g(),B=O.S;if(B!==null&&B(b,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var $=kC(A,c);Yl(i,o,$,jn(i))}else Yl(i,o,c,jn(i))}catch(Z){Yl(i,o,{then:function(){},status:"rejected",reason:Z},jn())}finally{te.p=x,C!==null&&b.types!==null&&(C.types=b.types),O.T=C}}function HC(){}function ad(i,o,a,c){if(i.tag!==5)throw Error(s(476));var g=Bm(i).queue;Um(i,g,o,ve,a===null?HC:function(){return Om(i),a(c)})}function Bm(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:ve},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Om(i){var o=Bm(i);o.next===null&&(o=i.alternate.memoizedState),Yl(i,o.next.queue,{},jn())}function rd(){return yn(ca)}function Hm(){return Yt().memoizedState}function Gm(){return Yt().memoizedState}function GC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=jn();i=fs(a);var c=hs(o,i,a);c!==null&&(Pn(c,o,a),ql(c,o,a)),o={cache:Bu()},i.payload=o;return}o=o.return}}function qC(i,o,a){var c=jn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Tr(i)?Vm(o,a):(a=Nu(i,o,a,c),a!==null&&(Pn(a,i,c),Fm(a,o,c)))}function qm(i,o,a){var c=jn();Yl(i,o,a,c)}function Yl(i,o,a,c){var g={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tr(i))Vm(o,g);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var C=o.lastRenderedState,b=x(C,a);if(g.hasEagerState=!0,g.eagerState=b,Hn(b,C))return sr(i,o,g,0),St===null&&ir(),!1}catch{}finally{}if(a=Nu(i,o,g,c),a!==null)return Pn(a,i,c),Fm(a,o,c),!0}return!1}function cd(i,o,a,c){if(c={lane:2,revertLane:qd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Tr(i)){if(o)throw Error(s(479))}else o=Nu(i,a,c,2),o!==null&&Pn(o,i,2)}function Tr(i){var o=i.alternate;return i===$e||o!==null&&o===$e}function Vm(i,o){Po=yr=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Fm(i,o,a){if((a&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,ja(i,a)}}var $l={readContext:yn,use:_r,useCallback:Ot,useContext:Ot,useEffect:Ot,useImperativeHandle:Ot,useLayoutEffect:Ot,useInsertionEffect:Ot,useMemo:Ot,useReducer:Ot,useRef:Ot,useState:Ot,useDebugValue:Ot,useDeferredValue:Ot,useTransition:Ot,useSyncExternalStore:Ot,useId:Ot,useHostTransitionStatus:Ot,useFormState:Ot,useActionState:Ot,useOptimistic:Ot,useMemoCache:Ot,useCacheRefresh:Ot};$l.useEffectEvent=Ot;var zm={readContext:yn,use:_r,useCallback:function(i,o){return Tn().memoizedState=[i,o===void 0?null:o],i},useContext:yn,useEffect:Am,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Cr(4194308,4,Mm.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Cr(4194308,4,i,o)},useInsertionEffect:function(i,o){Cr(4,2,i,o)},useMemo:function(i,o){var a=Tn();o=o===void 0?null:o;var c=i();if(Xs){at(!0);try{i()}finally{at(!1)}}return a.memoizedState=[c,o],c},useReducer:function(i,o,a){var c=Tn();if(a!==void 0){var g=a(o);if(Xs){at(!0);try{a(o)}finally{at(!1)}}}else g=o;return c.memoizedState=c.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},c.queue=i,i=i.dispatch=qC.bind(null,$e,i),[c.memoizedState,i]},useRef:function(i){var o=Tn();return i={current:i},o.memoizedState=i},useState:function(i){i=nd(i);var o=i.queue,a=qm.bind(null,$e,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:od,useDeferredValue:function(i,o){var a=Tn();return ld(a,i,o)},useTransition:function(){var i=nd(!1);return i=Um.bind(null,$e,i.queue,!0,!1),Tn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var c=$e,g=Tn();if(lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),St===null)throw Error(s(349));(it&127)!==0||dm(c,o,a)}g.memoizedState=a;var x={value:a,getSnapshot:o};return g.queue=x,Am(hm.bind(null,c,x,i),[i]),c.flags|=2048,Uo(9,{destroy:void 0},fm.bind(null,c,x,a,o),null),a},useId:function(){var i=Tn(),o=St.identifierPrefix;if(lt){var a=Ci,c=Ei;a=(c&~(1<<32-ct(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=xr++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=PC++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:rd,useFormState:Cm,useActionState:Cm,useOptimistic:function(i){var o=Tn();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=cd.bind(null,$e,!0,a),a.dispatch=o,[i,o]},useMemoCache:Zu,useCacheRefresh:function(){return Tn().memoizedState=GC.bind(null,$e)},useEffectEvent:function(i){var o=Tn(),a={impl:i};return o.memoizedState=a,function(){if((mt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},ud={readContext:yn,use:_r,useCallback:km,useContext:yn,useEffect:sd,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Rm,useMemo:Pm,useReducer:Er,useRef:Nm,useState:function(){return Er(Gi)},useDebugValue:od,useDeferredValue:function(i,o){var a=Yt();return Lm(a,Et.memoizedState,i,o)},useTransition:function(){var i=Er(Gi)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:jl(i),o]},useSyncExternalStore:um,useId:Hm,useHostTransitionStatus:rd,useFormState:bm,useActionState:bm,useOptimistic:function(i,o){var a=Yt();return gm(a,Et,i,o)},useMemoCache:Zu,useCacheRefresh:Gm};ud.useEffectEvent=wm;var jm={readContext:yn,use:_r,useCallback:km,useContext:yn,useEffect:sd,useImperativeHandle:Dm,useInsertionEffect:Im,useLayoutEffect:Rm,useMemo:Pm,useReducer:td,useRef:Nm,useState:function(){return td(Gi)},useDebugValue:od,useDeferredValue:function(i,o){var a=Yt();return Et===null?ld(a,i,o):Lm(a,Et.memoizedState,i,o)},useTransition:function(){var i=td(Gi)[0],o=Yt().memoizedState;return[typeof i=="boolean"?i:jl(i),o]},useSyncExternalStore:um,useId:Hm,useHostTransitionStatus:rd,useFormState:Sm,useActionState:Sm,useOptimistic:function(i,o){var a=Yt();return Et!==null?gm(a,Et,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Zu,useCacheRefresh:Gm};jm.useEffectEvent=wm;function dd(i,o,a,c){o=i.memoizedState,a=a(c,o),a=a==null?o:_({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var fd={enqueueSetState:function(i,o,a){i=i._reactInternals;var c=jn(),g=fs(c);g.payload=o,a!=null&&(g.callback=a),o=hs(i,g,c),o!==null&&(Pn(o,i,c),ql(o,i,c))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var c=jn(),g=fs(c);g.tag=1,g.payload=o,a!=null&&(g.callback=a),o=hs(i,g,c),o!==null&&(Pn(o,i,c),ql(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=jn(),c=fs(a);c.tag=2,o!=null&&(c.callback=o),o=hs(i,c,a),o!==null&&(Pn(o,i,a),ql(o,i,a))}};function Ym(i,o,a,c,g,x,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,x,C):o.prototype&&o.prototype.isPureReactComponent?!kl(a,c)||!kl(g,x):!0}function $m(i,o,a,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==i&&fd.enqueueReplaceState(o,o.state,null)}function Ws(i,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(i=i.defaultProps){a===o&&(a=_({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function Jm(i){nr(i)}function Km(i){console.error(i)}function Qm(i){nr(i)}function Sr(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function Xm(i,o,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function hd(i,o,a){return a=fs(a),a.tag=3,a.payload={element:null},a.callback=function(){Sr(i,o)},a}function Wm(i){return i=fs(i),i.tag=3,i}function Zm(i,o,a,c){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var x=c.value;i.payload=function(){return g(x)},i.callback=function(){Xm(o,a,c)}}var C=a.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Xm(o,a,c),typeof g!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function VC(i,o,a,c,g){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&wo(o,a,g,!0),a=qn.current,a!==null){switch(a.tag){case 31:case 13:return ei===null?Br():a.alternate===null&&Ht===0&&(Ht=3),a.flags&=-257,a.flags|=65536,a.lanes=g,c===fr?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),Od(i,c,g)),!1;case 22:return a.flags|=65536,c===fr?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),Od(i,c,g)),!1}throw Error(s(435,a.tag))}return Od(i,c,g),Br(),!1}if(lt)return o=qn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,c!==Du&&(i=Error(s(422),{cause:c}),Ul(Qn(i,a)))):(c!==Du&&(o=Error(s(423),{cause:c}),Ul(Qn(o,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,c=Qn(c,a),g=hd(i.stateNode,c,g),Fu(i,g),Ht!==4&&(Ht=2)),!1;var x=Error(s(520),{cause:c});if(x=Qn(x,a),ta===null?ta=[x]:ta.push(x),Ht!==4&&(Ht=2),o===null)return!0;c=Qn(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=hd(a.stateNode,c,i),Fu(a,i),!1;case 1:if(o=a.type,x=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(vs===null||!vs.has(x))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Wm(g),Zm(g,i,a,c),Fu(a,g),!1}a=a.return}while(a!==null);return!1}var pd=Error(s(461)),Zt=!1;function xn(i,o,a,c){o.child=i===null?im(o,null,a,c):Qs(o,i.child,a,c)}function eg(i,o,a,c,g){a=a.render;var x=o.ref;if("ref"in c){var C={};for(var b in c)b!=="ref"&&(C[b]=c[b])}else C=c;return Ys(o),c=Ku(i,o,a,C,x,g),b=Qu(),i!==null&&!Zt?(Xu(i,o,g),qi(i,o,g)):(lt&&b&&Ru(o),o.flags|=1,xn(i,o,c,g),o.child)}function tg(i,o,a,c,g){if(i===null){var x=a.type;return typeof x=="function"&&!Au(x)&&x.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=x,ng(i,o,x,c,g)):(i=lr(a.type,null,c,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(x=i.child,!Cd(i,g)){var C=x.memoizedProps;if(a=a.compare,a=a!==null?a:kl,a(C,c)&&i.ref===o.ref)return qi(i,o,g)}return o.flags|=1,i=Li(x,c),i.ref=o.ref,i.return=o,o.child=i}function ng(i,o,a,c,g){if(i!==null){var x=i.memoizedProps;if(kl(x,c)&&i.ref===o.ref)if(Zt=!1,o.pendingProps=c=x,Cd(i,g))(i.flags&131072)!==0&&(Zt=!0);else return o.lanes=i.lanes,qi(i,o,g)}return md(i,o,a,c,g)}function ig(i,o,a,c){var g=c.children,x=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(x=x!==null?x.baseLanes|a:a,i!==null){for(c=o.child=i.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~x}else c=0,o.child=null;return sg(i,o,x,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&ur(o,x!==null?x.cachePool:null),x!==null?lm(o,x):ju(),am(o);else return c=o.lanes=536870912,sg(i,o,x!==null?x.baseLanes|a:a,a,c)}else x!==null?(ur(o,x.cachePool),lm(o,x),ms(),o.memoizedState=null):(i!==null&&ur(o,null),ju(),ms());return xn(i,o,g,a),o.child}function Jl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function sg(i,o,a,c,g){var x=Hu();return x=x===null?null:{parent:Xt._currentValue,pool:x},o.memoizedState={baseLanes:a,cachePool:x},i!==null&&ur(o,null),ju(),am(o),i!==null&&wo(i,o,c,!0),o.childLanes=g,null}function Nr(i,o){return o=wr({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function og(i,o,a){return Qs(o,i.child,null,a),i=Nr(o,o.pendingProps),i.flags|=2,Vn(o),o.memoizedState=null,i}function FC(i,o,a){var c=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(lt){if(c.mode==="hidden")return i=Nr(o,c),o.lanes=536870912,Jl(null,i);if($u(o),(i=Pt)?(i=yy(i,Zn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:as!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Vp(i),a.return=o,o.child=a,gn=o,Pt=null)):i=null,i===null)throw cs(o);return o.lanes=536870912,null}return Nr(o,c)}var x=i.memoizedState;if(x!==null){var C=x.dehydrated;if($u(o),g)if(o.flags&256)o.flags&=-257,o=og(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Zt||wo(i,o,a,!1),g=(a&i.childLanes)!==0,Zt||g){if(c=St,c!==null&&(C=Ya(c,a),C!==0&&C!==x.retryLane))throw x.retryLane=C,Vs(i,C),Pn(c,i,C),pd;Br(),o=og(i,o,a)}else i=x.treeContext,Pt=ti(C.nextSibling),gn=o,lt=!0,rs=null,Zn=!1,i!==null&&jp(o,i),o=Nr(o,c),o.flags|=4096;return o}return i=Li(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Ar(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function md(i,o,a,c,g){return Ys(o),a=Ku(i,o,a,c,void 0,g),c=Qu(),i!==null&&!Zt?(Xu(i,o,g),qi(i,o,g)):(lt&&c&&Ru(o),o.flags|=1,xn(i,o,a,g),o.child)}function lg(i,o,a,c,g,x){return Ys(o),o.updateQueue=null,a=cm(o,c,a,g),rm(i),c=Qu(),i!==null&&!Zt?(Xu(i,o,x),qi(i,o,x)):(lt&&c&&Ru(o),o.flags|=1,xn(i,o,a,x),o.child)}function ag(i,o,a,c,g){if(Ys(o),o.stateNode===null){var x=To,C=a.contextType;typeof C=="object"&&C!==null&&(x=yn(C)),x=new a(c,x),o.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=fd,o.stateNode=x,x._reactInternals=o,x=o.stateNode,x.props=c,x.state=o.memoizedState,x.refs={},qu(o),C=a.contextType,x.context=typeof C=="object"&&C!==null?yn(C):To,x.state=o.memoizedState,C=a.getDerivedStateFromProps,typeof C=="function"&&(dd(o,a,C,c),x.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&fd.enqueueReplaceState(x,x.state,null),Fl(o,c,x,g),Vl(),x.state=o.memoizedState),typeof x.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){x=o.stateNode;var b=o.memoizedProps,A=Ws(a,b);x.props=A;var B=x.context,$=a.contextType;C=To,typeof $=="object"&&$!==null&&(C=yn($));var Z=a.getDerivedStateFromProps;$=typeof Z=="function"||typeof x.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,$||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(b||B!==C)&&$m(o,x,c,C),ds=!1;var H=o.memoizedState;x.state=H,Fl(o,c,x,g),Vl(),B=o.memoizedState,b||H!==B||ds?(typeof Z=="function"&&(dd(o,a,Z,c),B=o.memoizedState),(A=ds||Ym(o,a,A,c,H,B,C))?($||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(o.flags|=4194308)):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=B),x.props=c,x.state=B,x.context=C,c=A):(typeof x.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{x=o.stateNode,Vu(i,o),C=o.memoizedProps,$=Ws(a,C),x.props=$,Z=o.pendingProps,H=x.context,B=a.contextType,A=To,typeof B=="object"&&B!==null&&(A=yn(B)),b=a.getDerivedStateFromProps,(B=typeof b=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==Z||H!==A)&&$m(o,x,c,A),ds=!1,H=o.memoizedState,x.state=H,Fl(o,c,x,g),Vl();var V=o.memoizedState;C!==Z||H!==V||ds||i!==null&&i.dependencies!==null&&rr(i.dependencies)?(typeof b=="function"&&(dd(o,a,b,c),V=o.memoizedState),($=ds||Ym(o,a,$,c,H,V,A)||i!==null&&i.dependencies!==null&&rr(i.dependencies))?(B||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(c,V,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(c,V,A)),typeof x.componentDidUpdate=="function"&&(o.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=V),x.props=c,x.state=V,x.context=A,c=$):(typeof x.componentDidUpdate!="function"||C===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),c=!1)}return x=c,Ar(i,o),c=(o.flags&128)!==0,x||c?(x=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:x.render(),o.flags|=1,i!==null&&c?(o.child=Qs(o,i.child,null,g),o.child=Qs(o,null,a,g)):xn(i,o,a,g),o.memoizedState=x.state,i=o.child):i=qi(i,o,g),i}function rg(i,o,a,c){return zs(),o.flags|=256,xn(i,o,a,c),o.child}var gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yd(i){return{baseLanes:i,cachePool:Xp()}}function xd(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=zn),i}function cg(i,o,a){var c=o.pendingProps,g=!1,x=(o.flags&128)!==0,C;if((C=x)||(C=i!==null&&i.memoizedState===null?!1:(jt.current&2)!==0),C&&(g=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(lt){if(g?ps(o):ms(),(i=Pt)?(i=yy(i,Zn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:as!==null?{id:Ei,overflow:Ci}:null,retryLane:536870912,hydrationErrors:null},a=Vp(i),a.return=o,o.child=a,gn=o,Pt=null)):i=null,i===null)throw cs(o);return ef(i)?o.lanes=32:o.lanes=536870912,null}var b=c.children;return c=c.fallback,g?(ms(),g=o.mode,b=wr({mode:"hidden",children:b},g),c=Fs(c,g,a,null),b.return=o,c.return=o,b.sibling=c,o.child=b,c=o.child,c.memoizedState=yd(a),c.childLanes=xd(i,C,a),o.memoizedState=gd,Jl(null,c)):(ps(o),vd(o,b))}var A=i.memoizedState;if(A!==null&&(b=A.dehydrated,b!==null)){if(x)o.flags&256?(ps(o),o.flags&=-257,o=_d(i,o,a)):o.memoizedState!==null?(ms(),o.child=i.child,o.flags|=128,o=null):(ms(),b=c.fallback,g=o.mode,c=wr({mode:"visible",children:c.children},g),b=Fs(b,g,a,null),b.flags|=2,c.return=o,b.return=o,c.sibling=b,o.child=c,Qs(o,i.child,null,a),c=o.child,c.memoizedState=yd(a),c.childLanes=xd(i,C,a),o.memoizedState=gd,o=Jl(null,c));else if(ps(o),ef(b)){if(C=b.nextSibling&&b.nextSibling.dataset,C)var B=C.dgst;C=B,c=Error(s(419)),c.stack="",c.digest=C,Ul({value:c,source:null,stack:null}),o=_d(i,o,a)}else if(Zt||wo(i,o,a,!1),C=(a&i.childLanes)!==0,Zt||C){if(C=St,C!==null&&(c=Ya(C,a),c!==0&&c!==A.retryLane))throw A.retryLane=c,Vs(i,c),Pn(C,i,c),pd;Zd(b)||Br(),o=_d(i,o,a)}else Zd(b)?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,Pt=ti(b.nextSibling),gn=o,lt=!0,rs=null,Zn=!1,i!==null&&jp(o,i),o=vd(o,c.children),o.flags|=4096);return o}return g?(ms(),b=c.fallback,g=o.mode,A=i.child,B=A.sibling,c=Li(A,{mode:"hidden",children:c.children}),c.subtreeFlags=A.subtreeFlags&65011712,B!==null?b=Li(B,b):(b=Fs(b,g,a,null),b.flags|=2),b.return=o,c.return=o,c.sibling=b,o.child=c,Jl(null,c),c=o.child,b=i.child.memoizedState,b===null?b=yd(a):(g=b.cachePool,g!==null?(A=Xt._currentValue,g=g.parent!==A?{parent:A,pool:A}:g):g=Xp(),b={baseLanes:b.baseLanes|a,cachePool:g}),c.memoizedState=b,c.childLanes=xd(i,C,a),o.memoizedState=gd,Jl(i.child,c)):(ps(o),a=i.child,i=a.sibling,a=Li(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=a,o.memoizedState=null,a)}function vd(i,o){return o=wr({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function wr(i,o){return i=Gn(22,i,null,o),i.lanes=0,i}function _d(i,o,a){return Qs(o,i.child,null,a),i=vd(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function ug(i,o,a){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),Lu(i.return,o,a)}function Ed(i,o,a,c,g,x){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:g,treeForkCount:x}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=c,C.tail=a,C.tailMode=g,C.treeForkCount=x)}function dg(i,o,a){var c=o.pendingProps,g=c.revealOrder,x=c.tail;c=c.children;var C=jt.current,b=(C&2)!==0;if(b?(C=C&1|2,o.flags|=128):C&=1,F(jt,C),xn(i,o,c,a),c=lt?Ll:0,!b&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ug(i,a,o);else if(i.tag===19)ug(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=o.child,g=null;a!==null;)i=a.alternate,i!==null&&gr(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=o.child,o.child=null):(g=a.sibling,a.sibling=null),Ed(o,!1,g,a,x,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&gr(i)===null){o.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Ed(o,!0,a,null,x,c);break;case"together":Ed(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function qi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),xs|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(wo(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=Li(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=Li(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function Cd(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&rr(i)))}function zC(i,o,a){switch(o.tag){case 3:be(o,o.stateNode.containerInfo),us(o,Xt,i.memoizedState.cache),zs();break;case 27:case 5:rt(o);break;case 4:be(o,o.stateNode.containerInfo);break;case 10:us(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,$u(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(ps(o),o.flags|=128,null):(a&o.child.childLanes)!==0?cg(i,o,a):(ps(o),i=qi(i,o,a),i!==null?i.sibling:null);ps(o);break;case 19:var g=(i.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(wo(i,o,a,!1),c=(a&o.childLanes)!==0),g){if(c)return dg(i,o,a);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),F(jt,jt.current),c)break;return null;case 22:return o.lanes=0,ig(i,o,a,o.pendingProps);case 24:us(o,Xt,i.memoizedState.cache)}return qi(i,o,a)}function fg(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Zt=!0;else{if(!Cd(i,a)&&(o.flags&128)===0)return Zt=!1,zC(i,o,a);Zt=(i.flags&131072)!==0}else Zt=!1,lt&&(o.flags&1048576)!==0&&zp(o,Ll,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=Js(o.elementType),o.type=i,typeof i=="function")Au(i)?(c=Ws(i,c),o.tag=1,o=ag(null,o,i,c,a)):(o.tag=0,o=md(null,o,i,c,a));else{if(i!=null){var g=i.$$typeof;if(g===M){o.tag=11,o=eg(null,o,i,c,a);break e}else if(g===oe){o.tag=14,o=tg(null,o,i,c,a);break e}}throw o=Je(i)||i,Error(s(306,o,""))}}return o;case 0:return md(i,o,o.type,o.pendingProps,a);case 1:return c=o.type,g=Ws(c,o.pendingProps),ag(i,o,c,g,a);case 3:e:{if(be(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var x=o.memoizedState;g=x.element,Vu(i,o),Fl(o,c,null,a);var C=o.memoizedState;if(c=C.cache,us(o,Xt,c),c!==x.cache&&Uu(o,[Xt],a,!0),Vl(),c=C.element,x.isDehydrated)if(x={element:c,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){o=rg(i,o,c,a);break e}else if(c!==g){g=Qn(Error(s(424)),o),Ul(g),o=rg(i,o,c,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Pt=ti(i.firstChild),gn=o,lt=!0,rs=null,Zn=!0,a=im(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(zs(),c===g){o=qi(i,o,a);break e}xn(i,o,c,a)}o=o.child}return o;case 26:return Ar(i,o),i===null?(a=by(o.type,null,o.pendingProps,null))?o.memoizedState=a:lt||(a=o.type,i=o.pendingProps,c=zr(ne.current).createElement(a),c[tn]=o,c[mn]=i,vn(c,a,i),zt(c),o.stateNode=c):o.memoizedState=by(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return rt(o),i===null&&lt&&(c=o.stateNode=_y(o.type,o.pendingProps,ne.current),gn=o,Zn=!0,g=Pt,bs(o.type)?(tf=g,Pt=ti(c.firstChild)):Pt=g),xn(i,o,o.pendingProps.children,a),Ar(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&lt&&((g=c=Pt)&&(c=_b(c,o.type,o.pendingProps,Zn),c!==null?(o.stateNode=c,gn=o,Pt=ti(c.firstChild),Zn=!1,g=!0):g=!1),g||cs(o)),rt(o),g=o.type,x=o.pendingProps,C=i!==null?i.memoizedProps:null,c=x.children,Qd(g,x)?c=null:C!==null&&Qd(g,C)&&(o.flags|=32),o.memoizedState!==null&&(g=Ku(i,o,LC,null,null,a),ca._currentValue=g),Ar(i,o),xn(i,o,c,a),o.child;case 6:return i===null&&lt&&((i=a=Pt)&&(a=Eb(a,o.pendingProps,Zn),a!==null?(o.stateNode=a,gn=o,Pt=null,i=!0):i=!1),i||cs(o)),null;case 13:return cg(i,o,a);case 4:return be(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=Qs(o,null,c,a):xn(i,o,c,a),o.child;case 11:return eg(i,o,o.type,o.pendingProps,a);case 7:return xn(i,o,o.pendingProps,a),o.child;case 8:return xn(i,o,o.pendingProps.children,a),o.child;case 12:return xn(i,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,us(o,o.type,c.value),xn(i,o,c.children,a),o.child;case 9:return g=o.type._context,c=o.pendingProps.children,Ys(o),g=yn(g),c=c(g),o.flags|=1,xn(i,o,c,a),o.child;case 14:return tg(i,o,o.type,o.pendingProps,a);case 15:return ng(i,o,o.type,o.pendingProps,a);case 19:return dg(i,o,a);case 31:return FC(i,o,a);case 22:return ig(i,o,a,o.pendingProps);case 24:return Ys(o),c=yn(Xt),i===null?(g=Hu(),g===null&&(g=St,x=Bu(),g.pooledCache=x,x.refCount++,x!==null&&(g.pooledCacheLanes|=a),g=x),o.memoizedState={parent:c,cache:g},qu(o),us(o,Xt,g)):((i.lanes&a)!==0&&(Vu(i,o),Fl(o,null,null,a),Vl()),g=i.memoizedState,x=o.memoizedState,g.parent!==c?(g={parent:c,cache:c},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),us(o,Xt,c)):(c=x.cache,us(o,Xt,c),c!==g.cache&&Uu(o,[Xt],a,!0))),xn(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Vi(i){i.flags|=4}function bd(i,o,a,c,g){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Hg())i.flags|=8192;else throw Ks=fr,Gu}else i.flags&=-16777217}function hg(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wy(o))if(Hg())i.flags|=8192;else throw Ks=fr,Gu}function Ir(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Ni():536870912,i.lanes|=o,Go|=o)}function Kl(i,o){if(!lt)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Lt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(o)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=c,i.childLanes=a,o}function jC(i,o,a){var c=o.pendingProps;switch(Mu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(o),null;case 1:return Lt(o),null;case 3:return a=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Oi(Xt),Pe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Ao(o)?Vi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ku())),Lt(o),null;case 26:var g=o.type,x=o.memoizedState;return i===null?(Vi(o),x!==null?(Lt(o),hg(o,x)):(Lt(o),bd(o,g,null,c,a))):x?x!==i.memoizedState?(Vi(o),Lt(o),hg(o,x)):(Lt(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&Vi(o),Lt(o),bd(o,g,i,c,a)),null;case 27:if(yt(o),a=ne.current,g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Vi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return Lt(o),null}i=W.current,Ao(o)?Yp(o):(i=_y(g,c,a),o.stateNode=i,Vi(o))}return Lt(o),null;case 5:if(yt(o),g=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Vi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return Lt(o),null}if(x=W.current,Ao(o))Yp(o);else{var C=zr(ne.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof c.is=="string"?C.createElement("select",{is:c.is}):C.createElement("select"),c.multiple?x.multiple=!0:c.size&&(x.size=c.size);break;default:x=typeof c.is=="string"?C.createElement(g,{is:c.is}):C.createElement(g)}}x[tn]=o,x[mn]=c;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=x;e:switch(vn(x,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Vi(o)}}return Lt(o),bd(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&Vi(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=ne.current,Ao(o)){if(i=o.stateNode,a=o.memoizedProps,c=null,g=gn,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}i[tn]=o,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||cy(i.nodeValue,a)),i||cs(o,!0)}else i=zr(i).createTextNode(c),i[tn]=o,o.stateNode=i}return Lt(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(c=Ao(o),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[tn]=o}else zs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),i=!1}else a=ku(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(Vn(o),o):(Vn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Lt(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Ao(o),c!==null&&c.dehydrated!==null){if(i===null){if(!g)throw Error(s(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[tn]=o}else zs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),g=!1}else g=ku(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Vn(o),o):(Vn(o),null)}return Vn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=o.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==g&&(c.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Ir(o,o.updateQueue),Lt(o),null);case 4:return Pe(),i===null&&jd(o.stateNode.containerInfo),Lt(o),null;case 10:return Oi(o.type),Lt(o),null;case 19:if(R(jt),c=o.memoizedState,c===null)return Lt(o),null;if(g=(o.flags&128)!==0,x=c.rendering,x===null)if(g)Kl(c,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(x=gr(i),x!==null){for(o.flags|=128,Kl(c,!1),i=x.updateQueue,o.updateQueue=i,Ir(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)qp(a,i),a=a.sibling;return F(jt,jt.current&1|2),lt&&Ui(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&le()>Pr&&(o.flags|=128,g=!0,Kl(c,!1),o.lanes=4194304)}else{if(!g)if(i=gr(x),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,Ir(o,i),Kl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!x.alternate&&!lt)return Lt(o),null}else 2*le()-c.renderingStartTime>Pr&&a!==536870912&&(o.flags|=128,g=!0,Kl(c,!1),o.lanes=4194304);c.isBackwards?(x.sibling=o.child,o.child=x):(i=c.last,i!==null?i.sibling=x:o.child=x,c.last=x)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=le(),i.sibling=null,a=jt.current,F(jt,g?a&1|2:a&1),lt&&Ui(o,c.treeForkCount),i):(Lt(o),null);case 22:case 23:return Vn(o),Yu(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(Lt(o),o.subtreeFlags&6&&(o.flags|=8192)):Lt(o),a=o.updateQueue,a!==null&&Ir(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),i!==null&&R($s),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Oi(Xt),Lt(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function YC(i,o){switch(Mu(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Oi(Xt),Pe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return yt(o),null;case 31:if(o.memoizedState!==null){if(Vn(o),o.alternate===null)throw Error(s(340));zs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Vn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));zs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return R(jt),null;case 4:return Pe(),null;case 10:return Oi(o.type),null;case 22:case 23:return Vn(o),Yu(),i!==null&&R($s),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Oi(Xt),null;case 25:return null;default:return null}}function pg(i,o){switch(Mu(o),o.tag){case 3:Oi(Xt),Pe();break;case 26:case 27:case 5:yt(o);break;case 4:Pe();break;case 31:o.memoizedState!==null&&Vn(o);break;case 13:Vn(o);break;case 19:R(jt);break;case 10:Oi(o.type);break;case 22:case 23:Vn(o),Yu(),i!==null&&R($s);break;case 24:Oi(Xt)}}function Ql(i,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var g=c.next;a=g;do{if((a.tag&i)===i){c=void 0;var x=a.create,C=a.inst;c=x(),C.destroy=c}a=a.next}while(a!==g)}}catch(b){_t(o,o.return,b)}}function gs(i,o,a){try{var c=o.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var x=g.next;c=x;do{if((c.tag&i)===i){var C=c.inst,b=C.destroy;if(b!==void 0){C.destroy=void 0,g=o;var A=a,B=b;try{B()}catch($){_t(g,A,$)}}}c=c.next}while(c!==x)}}catch($){_t(o,o.return,$)}}function mg(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{om(o,a)}catch(c){_t(i,i.return,c)}}}function gg(i,o,a){a.props=Ws(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){_t(i,o,c)}}function Xl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(g){_t(i,o,g)}}function bi(i,o){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(g){_t(i,o,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){_t(i,o,g)}else a.current=null}function yg(i){var o=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(g){_t(i,i.return,g)}}function Td(i,o,a){try{var c=i.stateNode;pb(c,i.type,a,o),c[mn]=o}catch(g){_t(i,i.return,g)}}function xg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&bs(i.type)||i.tag===4}function Sd(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||xg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&bs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Nd(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=ki));else if(c!==4&&(c===27&&bs(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Nd(i,o,a),i=i.sibling;i!==null;)Nd(i,o,a),i=i.sibling}function Rr(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(c!==4&&(c===27&&bs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Rr(i,o,a),i=i.sibling;i!==null;)Rr(i,o,a),i=i.sibling}function vg(i){var o=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);vn(o,c,a),o[tn]=i,o[mn]=a}catch(x){_t(i,i.return,x)}}var Fi=!1,en=!1,Ad=!1,_g=typeof WeakSet=="function"?WeakSet:Set,rn=null;function $C(i,o){if(i=i.containerInfo,Jd=Xr,i=Dp(i),_u(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var g=c.anchorOffset,x=c.focusNode;c=c.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var C=0,b=-1,A=-1,B=0,$=0,Z=i,H=null;t:for(;;){for(var V;Z!==a||g!==0&&Z.nodeType!==3||(b=C+g),Z!==x||c!==0&&Z.nodeType!==3||(A=C+c),Z.nodeType===3&&(C+=Z.nodeValue.length),(V=Z.firstChild)!==null;)H=Z,Z=V;for(;;){if(Z===i)break t;if(H===a&&++B===g&&(b=C),H===x&&++$===c&&(A=C),(V=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=V}a=b===-1||A===-1?null:{start:b,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kd={focusedElem:i,selectionRange:a},Xr=!1,rn=o;rn!==null;)if(o=rn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,rn=i;else for(;rn!==null;){switch(o=rn,x=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&x!==null){i=void 0,a=o,g=x.memoizedProps,x=x.memoizedState,c=a.stateNode;try{var Ee=Ws(a.type,g);i=c.getSnapshotBeforeUpdate(Ee,x),c.__reactInternalSnapshotBeforeUpdate=i}catch(Ue){_t(a,a.return,Ue)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Wd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,rn=i;break}rn=o.return}}function Eg(i,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ji(i,a),c&4&&Ql(5,a);break;case 1:if(ji(i,a),c&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(C){_t(a,a.return,C)}else{var g=Ws(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(g,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){_t(a,a.return,C)}}c&64&&mg(a),c&512&&Xl(a,a.return);break;case 3:if(ji(i,a),c&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{om(i,o)}catch(C){_t(a,a.return,C)}}break;case 27:o===null&&c&4&&vg(a);case 26:case 5:ji(i,a),o===null&&c&4&&yg(a),c&512&&Xl(a,a.return);break;case 12:ji(i,a);break;case 31:ji(i,a),c&4&&Tg(i,a);break;case 13:ji(i,a),c&4&&Sg(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=nb.bind(null,a),Cb(i,a))));break;case 22:if(c=a.memoizedState!==null||Fi,!c){o=o!==null&&o.memoizedState!==null||en,g=Fi;var x=en;Fi=c,(en=o)&&!x?Yi(i,a,(a.subtreeFlags&8772)!==0):ji(i,a),Fi=g,en=x}break;case 30:break;default:ji(i,a)}}function Cg(i){var o=i.alternate;o!==null&&(i.alternate=null,Cg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&go(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Bt=null,Rn=!1;function zi(i,o,a){for(a=a.child;a!==null;)bg(i,o,a),a=a.sibling}function bg(i,o,a){if(Re&&typeof Re.onCommitFiberUnmount=="function")try{Re.onCommitFiberUnmount(nt,a)}catch{}switch(a.tag){case 26:en||bi(a,o),zi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:en||bi(a,o);var c=Bt,g=Rn;bs(a.type)&&(Bt=a.stateNode,Rn=!1),zi(i,o,a),la(a.stateNode),Bt=c,Rn=g;break;case 5:en||bi(a,o);case 6:if(c=Bt,g=Rn,Bt=null,zi(i,o,a),Bt=c,Rn=g,Bt!==null)if(Rn)try{(Bt.nodeType===9?Bt.body:Bt.nodeName==="HTML"?Bt.ownerDocument.body:Bt).removeChild(a.stateNode)}catch(x){_t(a,o,x)}else try{Bt.removeChild(a.stateNode)}catch(x){_t(a,o,x)}break;case 18:Bt!==null&&(Rn?(i=Bt,my(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Jo(i)):my(Bt,a.stateNode));break;case 4:c=Bt,g=Rn,Bt=a.stateNode.containerInfo,Rn=!0,zi(i,o,a),Bt=c,Rn=g;break;case 0:case 11:case 14:case 15:gs(2,a,o),en||gs(4,a,o),zi(i,o,a);break;case 1:en||(bi(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&gg(a,o,c)),zi(i,o,a);break;case 21:zi(i,o,a);break;case 22:en=(c=en)||a.memoizedState!==null,zi(i,o,a),en=c;break;default:zi(i,o,a)}}function Tg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Jo(i)}catch(a){_t(o,o.return,a)}}}function Sg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jo(i)}catch(a){_t(o,o.return,a)}}function JC(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new _g),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new _g),o;default:throw Error(s(435,i.tag))}}function Mr(i,o){var a=JC(i);o.forEach(function(c){if(!a.has(c)){a.add(c);var g=ib.bind(null,i,c);c.then(g,g)}})}function Mn(i,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var g=a[c],x=i,C=o,b=C;e:for(;b!==null;){switch(b.tag){case 27:if(bs(b.type)){Bt=b.stateNode,Rn=!1;break e}break;case 5:Bt=b.stateNode,Rn=!1;break e;case 3:case 4:Bt=b.stateNode.containerInfo,Rn=!0;break e}b=b.return}if(Bt===null)throw Error(s(160));bg(x,C,g),Bt=null,Rn=!1,x=g.alternate,x!==null&&(x.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Ng(o,i),o=o.sibling}var ui=null;function Ng(i,o){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Mn(o,i),Dn(i),c&4&&(gs(3,i,i.return),Ql(3,i),gs(5,i,i.return));break;case 1:Mn(o,i),Dn(i),c&512&&(en||a===null||bi(a,a.return)),c&64&&Fi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var g=ui;if(Mn(o,i),Dn(i),c&512&&(en||a===null||bi(a,a.return)),c&4){var x=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":x=g.getElementsByTagName("title")[0],(!x||x[is]||x[tn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=g.createElement(c),g.head.insertBefore(x,g.querySelector("head > title"))),vn(x,c,a),x[tn]=i,zt(x),c=x;break e;case"link":var C=Ny("link","href",g).get(c+(a.href||""));if(C){for(var b=0;b<C.length;b++)if(x=C[b],x.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&x.getAttribute("rel")===(a.rel==null?null:a.rel)&&x.getAttribute("title")===(a.title==null?null:a.title)&&x.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){C.splice(b,1);break t}}x=g.createElement(c),vn(x,c,a),g.head.appendChild(x);break;case"meta":if(C=Ny("meta","content",g).get(c+(a.content||""))){for(b=0;b<C.length;b++)if(x=C[b],x.getAttribute("content")===(a.content==null?null:""+a.content)&&x.getAttribute("name")===(a.name==null?null:a.name)&&x.getAttribute("property")===(a.property==null?null:a.property)&&x.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&x.getAttribute("charset")===(a.charSet==null?null:a.charSet)){C.splice(b,1);break t}}x=g.createElement(c),vn(x,c,a),g.head.appendChild(x);break;default:throw Error(s(468,c))}x[tn]=i,zt(x),c=x}i.stateNode=c}else Ay(g,i.type,i.stateNode);else i.stateNode=Sy(g,c,i.memoizedProps);else x!==c?(x===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):x.count--,c===null?Ay(g,i.type,i.stateNode):Sy(g,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Td(i,i.memoizedProps,a.memoizedProps)}break;case 27:Mn(o,i),Dn(i),c&512&&(en||a===null||bi(a,a.return)),a!==null&&c&4&&Td(i,i.memoizedProps,a.memoizedProps);break;case 5:if(Mn(o,i),Dn(i),c&512&&(en||a===null||bi(a,a.return)),i.flags&32){g=i.stateNode;try{Jn(g,"")}catch(Ee){_t(i,i.return,Ee)}}c&4&&i.stateNode!=null&&(g=i.memoizedProps,Td(i,g,a!==null?a.memoizedProps:g)),c&1024&&(Ad=!0);break;case 6:if(Mn(o,i),Dn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Ee){_t(i,i.return,Ee)}}break;case 3:if($r=null,g=ui,ui=jr(o.containerInfo),Mn(o,i),ui=g,Dn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Jo(o.containerInfo)}catch(Ee){_t(i,i.return,Ee)}Ad&&(Ad=!1,Ag(i));break;case 4:c=ui,ui=jr(i.stateNode.containerInfo),Mn(o,i),Dn(i),ui=c;break;case 12:Mn(o,i),Dn(i);break;case 31:Mn(o,i),Dn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Mr(i,c)));break;case 13:Mn(o,i),Dn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(kr=le()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Mr(i,c)));break;case 22:g=i.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,B=Fi,$=en;if(Fi=B||g,en=$||A,Mn(o,i),en=$,Fi=B,Dn(i),c&8192)e:for(o=i.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(a===null||A||Fi||en||Zs(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){A=a=o;try{if(x=A.stateNode,g)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{b=A.stateNode;var Z=A.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Ee){_t(A,A.return,Ee)}}}else if(o.tag===6){if(a===null){A=o;try{A.stateNode.nodeValue=g?"":A.memoizedProps}catch(Ee){_t(A,A.return,Ee)}}}else if(o.tag===18){if(a===null){A=o;try{var V=A.stateNode;g?gy(V,!0):gy(A.stateNode,!1)}catch(Ee){_t(A,A.return,Ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Mr(i,a))));break;case 19:Mn(o,i),Dn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,Mr(i,c)));break;case 30:break;case 21:break;default:Mn(o,i),Dn(i)}}function Dn(i){var o=i.flags;if(o&2){try{for(var a,c=i.return;c!==null;){if(xg(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var g=a.stateNode,x=Sd(i);Rr(i,x,g);break;case 5:var C=a.stateNode;a.flags&32&&(Jn(C,""),a.flags&=-33);var b=Sd(i);Rr(i,b,C);break;case 3:case 4:var A=a.stateNode.containerInfo,B=Sd(i);Nd(i,B,A);break;default:throw Error(s(161))}}catch($){_t(i,i.return,$)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Ag(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Ag(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function ji(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Eg(i,o.alternate,o),o=o.sibling}function Zs(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:gs(4,o,o.return),Zs(o);break;case 1:bi(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&gg(o,o.return,a),Zs(o);break;case 27:la(o.stateNode);case 26:case 5:bi(o,o.return),Zs(o);break;case 22:o.memoizedState===null&&Zs(o);break;case 30:Zs(o);break;default:Zs(o)}i=i.sibling}}function Yi(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,g=i,x=o,C=x.flags;switch(x.tag){case 0:case 11:case 15:Yi(g,x,a),Ql(4,x);break;case 1:if(Yi(g,x,a),c=x,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(B){_t(c,c.return,B)}if(c=x,g=c.updateQueue,g!==null){var b=c.stateNode;try{var A=g.shared.hiddenCallbacks;if(A!==null)for(g.shared.hiddenCallbacks=null,g=0;g<A.length;g++)sm(A[g],b)}catch(B){_t(c,c.return,B)}}a&&C&64&&mg(x),Xl(x,x.return);break;case 27:vg(x);case 26:case 5:Yi(g,x,a),a&&c===null&&C&4&&yg(x),Xl(x,x.return);break;case 12:Yi(g,x,a);break;case 31:Yi(g,x,a),a&&C&4&&Tg(g,x);break;case 13:Yi(g,x,a),a&&C&4&&Sg(g,x);break;case 22:x.memoizedState===null&&Yi(g,x,a),Xl(x,x.return);break;case 30:break;default:Yi(g,x,a)}o=o.sibling}}function wd(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Bl(a))}function Id(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bl(i))}function di(i,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wg(i,o,a,c),o=o.sibling}function wg(i,o,a,c){var g=o.flags;switch(o.tag){case 0:case 11:case 15:di(i,o,a,c),g&2048&&Ql(9,o);break;case 1:di(i,o,a,c);break;case 3:di(i,o,a,c),g&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Bl(i)));break;case 12:if(g&2048){di(i,o,a,c),i=o.stateNode;try{var x=o.memoizedProps,C=x.id,b=x.onPostCommit;typeof b=="function"&&b(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){_t(o,o.return,A)}}else di(i,o,a,c);break;case 31:di(i,o,a,c);break;case 13:di(i,o,a,c);break;case 23:break;case 22:x=o.stateNode,C=o.alternate,o.memoizedState!==null?x._visibility&2?di(i,o,a,c):Wl(i,o):x._visibility&2?di(i,o,a,c):(x._visibility|=2,Bo(i,o,a,c,(o.subtreeFlags&10256)!==0||!1)),g&2048&&wd(C,o);break;case 24:di(i,o,a,c),g&2048&&Id(o.alternate,o);break;default:di(i,o,a,c)}}function Bo(i,o,a,c,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var x=i,C=o,b=a,A=c,B=C.flags;switch(C.tag){case 0:case 11:case 15:Bo(x,C,b,A,g),Ql(8,C);break;case 23:break;case 22:var $=C.stateNode;C.memoizedState!==null?$._visibility&2?Bo(x,C,b,A,g):Wl(x,C):($._visibility|=2,Bo(x,C,b,A,g)),g&&B&2048&&wd(C.alternate,C);break;case 24:Bo(x,C,b,A,g),g&&B&2048&&Id(C.alternate,C);break;default:Bo(x,C,b,A,g)}o=o.sibling}}function Wl(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,c=o,g=c.flags;switch(c.tag){case 22:Wl(a,c),g&2048&&wd(c.alternate,c);break;case 24:Wl(a,c),g&2048&&Id(c.alternate,c);break;default:Wl(a,c)}o=o.sibling}}var Zl=8192;function Oo(i,o,a){if(i.subtreeFlags&Zl)for(i=i.child;i!==null;)Ig(i,o,a),i=i.sibling}function Ig(i,o,a){switch(i.tag){case 26:Oo(i,o,a),i.flags&Zl&&i.memoizedState!==null&&Pb(a,ui,i.memoizedState,i.memoizedProps);break;case 5:Oo(i,o,a);break;case 3:case 4:var c=ui;ui=jr(i.stateNode.containerInfo),Oo(i,o,a),ui=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=Zl,Zl=16777216,Oo(i,o,a),Zl=c):Oo(i,o,a));break;default:Oo(i,o,a)}}function Rg(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ea(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];rn=c,Dg(c,i)}Rg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Mg(i),i=i.sibling}function Mg(i){switch(i.tag){case 0:case 11:case 15:ea(i),i.flags&2048&&gs(9,i,i.return);break;case 3:ea(i);break;case 12:ea(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Dr(i)):ea(i);break;default:ea(i)}}function Dr(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];rn=c,Dg(c,i)}Rg(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:gs(8,o,o.return),Dr(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Dr(o));break;default:Dr(o)}i=i.sibling}}function Dg(i,o){for(;rn!==null;){var a=rn;switch(a.tag){case 0:case 11:case 15:gs(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Bl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,rn=c;else e:for(a=i;rn!==null;){c=rn;var g=c.sibling,x=c.return;if(Cg(c),c===a){rn=null;break e}if(g!==null){g.return=x,rn=g;break e}rn=x}}}var KC={getCacheForType:function(i){var o=yn(Xt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return yn(Xt).controller.signal}},QC=typeof WeakMap=="function"?WeakMap:Map,mt=0,St=null,Ze=null,it=0,vt=0,Fn=null,ys=!1,Ho=!1,Rd=!1,$i=0,Ht=0,xs=0,eo=0,Md=0,zn=0,Go=0,ta=null,kn=null,Dd=!1,kr=0,kg=0,Pr=1/0,Lr=null,vs=null,on=0,_s=null,qo=null,Ji=0,kd=0,Pd=null,Pg=null,na=0,Ld=null;function jn(){return(mt&2)!==0&&it!==0?it&-it:O.T!==null?qd():El()}function Lg(){if(zn===0)if((it&536870912)===0||lt){var i=Ft;Ft<<=1,(Ft&3932160)===0&&(Ft=262144),zn=i}else zn=536870912;return i=qn.current,i!==null&&(i.flags|=32),zn}function Pn(i,o,a){(i===St&&(vt===2||vt===9)||i.cancelPendingCommit!==null)&&(Vo(i,0),Es(i,it,zn,!1)),Os(i,a),((mt&2)===0||i!==St)&&(i===St&&((mt&2)===0&&(eo|=a),Ht===4&&Es(i,it,zn,!1)),Ti(i))}function Ug(i,o,a){if((mt&6)!==0)throw Error(s(327));var c=!a&&(o&127)===0&&(o&i.expiredLanes)===0||pn(i,o),g=c?ZC(i,o):Bd(i,o,!0),x=c;do{if(g===0){Ho&&!c&&Es(i,o,0,!1);break}else{if(a=i.current.alternate,x&&!XC(a)){g=Bd(i,o,!1),x=!1;continue}if(g===2){if(x=o,i.errorRecoveryDisabledLanes&x)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var b=i;g=ta;var A=b.current.memoizedState.isDehydrated;if(A&&(Vo(b,C).flags|=256),C=Bd(b,C,!1),C!==2){if(Rd&&!A){b.errorRecoveryDisabledLanes|=x,eo|=x,g=4;break e}x=kn,kn=g,x!==null&&(kn===null?kn=x:kn.push.apply(kn,x))}g=C}if(x=!1,g!==2)continue}}if(g===1){Vo(i,0),Es(i,o,0,!0);break}e:{switch(c=i,x=g,x){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Es(c,o,zn,!ys);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(g=kr+300-le(),10<g)){if(Es(c,o,zn,!ys),Yn(c,0,!0)!==0)break e;Ji=o,c.timeoutHandle=hy(Bg.bind(null,c,a,kn,Lr,Dd,o,zn,eo,Go,ys,x,"Throttled",-0,0),g);break e}Bg(c,a,kn,Lr,Dd,o,zn,eo,Go,ys,x,null,-0,0)}}break}while(!0);Ti(i)}function Bg(i,o,a,c,g,x,C,b,A,B,$,Z,H,V){if(i.timeoutHandle=-1,Z=o.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},Ig(o,x,Z);var Ee=(x&62914560)===x?kr-le():(x&4194048)===x?kg-le():0;if(Ee=Lb(Z,Ee),Ee!==null){Ji=x,i.cancelPendingCommit=Ee(jg.bind(null,i,o,x,a,c,g,C,b,A,$,Z,null,H,V)),Es(i,x,C,!B);return}}jg(i,o,x,a,c,g,C,b,A)}function XC(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var g=a[c],x=g.getSnapshot;g=g.value;try{if(!Hn(x(),g))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Es(i,o,a,c){o&=~Md,o&=~eo,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var g=o;0<g;){var x=31-ct(g),C=1<<x;c[x]=-1,g&=~C}a!==0&&po(i,a,o)}function Ur(){return(mt&6)===0?(ia(0),!1):!0}function Ud(){if(Ze!==null){if(vt===0)var i=Ze.return;else i=Ze,Bi=js=null,Wu(i),Do=null,Hl=0,i=Ze;for(;i!==null;)pg(i.alternate,i),i=i.return;Ze=null}}function Vo(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,yb(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Ji=0,Ud(),St=i,Ze=a=Li(i.current,null),it=o,vt=0,Fn=null,ys=!1,Ho=pn(i,o),Rd=!1,Go=zn=Md=eo=xs=Ht=0,kn=ta=null,Dd=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var g=31-ct(c),x=1<<g;o|=i[g],c&=~x}return $i=o,ir(),a}function Og(i,o){$e=null,O.H=$l,o===Mo||o===dr?(o=em(),vt=3):o===Gu?(o=em(),vt=4):vt=o===pd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Fn=o,Ze===null&&(Ht=1,Sr(i,Qn(o,i.current)))}function Hg(){var i=qn.current;return i===null?!0:(it&4194048)===it?ei===null:(it&62914560)===it||(it&536870912)!==0?i===ei:!1}function Gg(){var i=O.H;return O.H=$l,i===null?$l:i}function qg(){var i=O.A;return O.A=KC,i}function Br(){Ht=4,ys||(it&4194048)!==it&&qn.current!==null||(Ho=!0),(xs&134217727)===0&&(eo&134217727)===0||St===null||Es(St,it,zn,!1)}function Bd(i,o,a){var c=mt;mt|=2;var g=Gg(),x=qg();(St!==i||it!==o)&&(Lr=null,Vo(i,o)),o=!1;var C=Ht;e:do try{if(vt!==0&&Ze!==null){var b=Ze,A=Fn;switch(vt){case 8:Ud(),C=6;break e;case 3:case 2:case 9:case 6:qn.current===null&&(o=!0);var B=vt;if(vt=0,Fn=null,Fo(i,b,A,B),a&&Ho){C=0;break e}break;default:B=vt,vt=0,Fn=null,Fo(i,b,A,B)}}WC(),C=Ht;break}catch($){Og(i,$)}while(!0);return o&&i.shellSuspendCounter++,Bi=js=null,mt=c,O.H=g,O.A=x,Ze===null&&(St=null,it=0,ir()),C}function WC(){for(;Ze!==null;)Vg(Ze)}function ZC(i,o){var a=mt;mt|=2;var c=Gg(),g=qg();St!==i||it!==o?(Lr=null,Pr=le()+500,Vo(i,o)):Ho=pn(i,o);e:do try{if(vt!==0&&Ze!==null){o=Ze;var x=Fn;t:switch(vt){case 1:vt=0,Fn=null,Fo(i,o,x,1);break;case 2:case 9:if(Wp(x)){vt=0,Fn=null,Fg(o);break}o=function(){vt!==2&&vt!==9||St!==i||(vt=7),Ti(i)},x.then(o,o);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Wp(x)?(vt=0,Fn=null,Fg(o)):(vt=0,Fn=null,Fo(i,o,x,7));break;case 5:var C=null;switch(Ze.tag){case 26:C=Ze.memoizedState;case 5:case 27:var b=Ze;if(C?wy(C):b.stateNode.complete){vt=0,Fn=null;var A=b.sibling;if(A!==null)Ze=A;else{var B=b.return;B!==null?(Ze=B,Or(B)):Ze=null}break t}}vt=0,Fn=null,Fo(i,o,x,5);break;case 6:vt=0,Fn=null,Fo(i,o,x,6);break;case 8:Ud(),Ht=6;break e;default:throw Error(s(462))}}eb();break}catch($){Og(i,$)}while(!0);return Bi=js=null,O.H=c,O.A=g,mt=a,Ze!==null?0:(St=null,it=0,ir(),Ht)}function eb(){for(;Ze!==null&&!ee();)Vg(Ze)}function Vg(i){var o=fg(i.alternate,i,$i);i.memoizedProps=i.pendingProps,o===null?Or(i):Ze=o}function Fg(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=lg(a,o,o.pendingProps,o.type,void 0,it);break;case 11:o=lg(a,o,o.pendingProps,o.type.render,o.ref,it);break;case 5:Wu(o);default:pg(a,o),o=Ze=qp(o,$i),o=fg(a,o,$i)}i.memoizedProps=i.pendingProps,o===null?Or(i):Ze=o}function Fo(i,o,a,c){Bi=js=null,Wu(o),Do=null,Hl=0;var g=o.return;try{if(VC(i,g,o,a,it)){Ht=1,Sr(i,Qn(a,i.current)),Ze=null;return}}catch(x){if(g!==null)throw Ze=g,x;Ht=1,Sr(i,Qn(a,i.current)),Ze=null;return}o.flags&32768?(lt||c===1?i=!0:Ho||(it&536870912)!==0?i=!1:(ys=i=!0,(c===2||c===9||c===3||c===6)&&(c=qn.current,c!==null&&c.tag===13&&(c.flags|=16384))),zg(o,i)):Or(o)}function Or(i){var o=i;do{if((o.flags&32768)!==0){zg(o,ys);return}i=o.return;var a=jC(o.alternate,o,$i);if(a!==null){Ze=a;return}if(o=o.sibling,o!==null){Ze=o;return}Ze=o=i}while(o!==null);Ht===0&&(Ht=5)}function zg(i,o){do{var a=YC(i.alternate,i);if(a!==null){a.flags&=32767,Ze=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Ze=i;return}Ze=i=a}while(i!==null);Ht=6,Ze=null}function jg(i,o,a,c,g,x,C,b,A){i.cancelPendingCommit=null;do Hr();while(on!==0);if((mt&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(x=o.lanes|o.childLanes,x|=Su,lu(i,a,x,C,b,A),i===St&&(Ze=St=null,it=0),qo=o,_s=i,Ji=a,kd=x,Pd=g,Pg=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sb(pe,function(){return Qg(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=O.T,O.T=null,g=te.p,te.p=2,C=mt,mt|=4;try{$C(i,o,a)}finally{mt=C,te.p=g,O.T=c}}on=1,Yg(),$g(),Jg()}}function Yg(){if(on===1){on=0;var i=_s,o=qo,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var c=te.p;te.p=2;var g=mt;mt|=4;try{Ng(o,i);var x=Kd,C=Dp(i.containerInfo),b=x.focusedElem,A=x.selectionRange;if(C!==b&&b&&b.ownerDocument&&Mp(b.ownerDocument.documentElement,b)){if(A!==null&&_u(b)){var B=A.start,$=A.end;if($===void 0&&($=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min($,b.value.length);else{var Z=b.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var V=H.getSelection(),Ee=b.textContent.length,Ue=Math.min(A.start,Ee),bt=A.end===void 0?Ue:Math.min(A.end,Ee);!V.extend&&Ue>bt&&(C=bt,bt=Ue,Ue=C);var P=Rp(b,Ue),I=Rp(b,bt);if(P&&I&&(V.rangeCount!==1||V.anchorNode!==P.node||V.anchorOffset!==P.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var U=Z.createRange();U.setStart(P.node,P.offset),V.removeAllRanges(),Ue>bt?(V.addRange(U),V.extend(I.node,I.offset)):(U.setEnd(I.node,I.offset),V.addRange(U))}}}}for(Z=[],V=b;V=V.parentNode;)V.nodeType===1&&Z.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var Q=Z[b];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Xr=!!Jd,Kd=Jd=null}finally{mt=g,te.p=c,O.T=a}}i.current=o,on=2}}function $g(){if(on===2){on=0;var i=_s,o=qo,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var c=te.p;te.p=2;var g=mt;mt|=4;try{Eg(i,o.alternate,o)}finally{mt=g,te.p=c,O.T=a}}on=3}}function Jg(){if(on===4||on===3){on=0,J();var i=_s,o=qo,a=Ji,c=Pg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?on=5:(on=0,qo=_s=null,Kg(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(vs=null),_l(a),o=o.stateNode,Re&&typeof Re.onCommitFiberRoot=="function")try{Re.onCommitFiberRoot(nt,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=O.T,g=te.p,te.p=2,O.T=null;try{for(var x=i.onRecoverableError,C=0;C<c.length;C++){var b=c[C];x(b.value,{componentStack:b.stack})}}finally{O.T=o,te.p=g}}(Ji&3)!==0&&Hr(),Ti(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Ld?na++:(na=0,Ld=i):na=0,ia(0)}}function Kg(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Bl(o)))}function Hr(){return Yg(),$g(),Jg(),Qg()}function Qg(){if(on!==5)return!1;var i=_s,o=kd;kd=0;var a=_l(Ji),c=O.T,g=te.p;try{te.p=32>a?32:a,O.T=null,a=Pd,Pd=null;var x=_s,C=Ji;if(on=0,qo=_s=null,Ji=0,(mt&6)!==0)throw Error(s(331));var b=mt;if(mt|=4,Mg(x.current),wg(x,x.current,C,a),mt=b,ia(0,!1),Re&&typeof Re.onPostCommitFiberRoot=="function")try{Re.onPostCommitFiberRoot(nt,x)}catch{}return!0}finally{te.p=g,O.T=c,Kg(i,o)}}function Xg(i,o,a){o=Qn(a,o),o=hd(i.stateNode,o,2),i=hs(i,o,2),i!==null&&(Os(i,2),Ti(i))}function _t(i,o,a){if(i.tag===3)Xg(i,i,a);else for(;o!==null;){if(o.tag===3){Xg(o,i,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(vs===null||!vs.has(c))){i=Qn(a,i),a=Wm(2),c=hs(o,a,2),c!==null&&(Zm(a,c,o,i),Os(c,2),Ti(c));break}}o=o.return}}function Od(i,o,a){var c=i.pingCache;if(c===null){c=i.pingCache=new QC;var g=new Set;c.set(o,g)}else g=c.get(o),g===void 0&&(g=new Set,c.set(o,g));g.has(a)||(Rd=!0,g.add(a),i=tb.bind(null,i,o,a),o.then(i,i))}function tb(i,o,a){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,St===i&&(it&a)===a&&(Ht===4||Ht===3&&(it&62914560)===it&&300>le()-kr?(mt&2)===0&&Vo(i,0):Md|=a,Go===it&&(Go=0)),Ti(i)}function Wg(i,o){o===0&&(o=Ni()),i=Vs(i,o),i!==null&&(Os(i,o),Ti(i))}function nb(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),Wg(i,a)}function ib(i,o){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),Wg(i,a)}function sb(i,o){return kt(i,o)}var Gr=null,zo=null,Hd=!1,qr=!1,Gd=!1,Cs=0;function Ti(i){i!==zo&&i.next===null&&(zo===null?Gr=zo=i:zo=zo.next=i),qr=!0,Hd||(Hd=!0,lb())}function ia(i,o){if(!Gd&&qr){Gd=!0;do for(var a=!1,c=Gr;c!==null;){if(i!==0){var g=c.pendingLanes;if(g===0)var x=0;else{var C=c.suspendedLanes,b=c.pingedLanes;x=(1<<31-ct(42|i)+1)-1,x&=g&~(C&~b),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(a=!0,ny(c,x))}else x=it,x=Yn(c,c===St?x:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(x&3)===0||pn(c,x)||(a=!0,ny(c,x));c=c.next}while(a);Gd=!1}}function ob(){Zg()}function Zg(){qr=Hd=!1;var i=0;Cs!==0&&gb()&&(i=Cs);for(var o=le(),a=null,c=Gr;c!==null;){var g=c.next,x=ey(c,o);x===0?(c.next=null,a===null?Gr=g:a.next=g,g===null&&(zo=a)):(a=c,(i!==0||(x&3)!==0)&&(qr=!0)),c=g}on!==0&&on!==5||ia(i),Cs!==0&&(Cs=0)}function ey(i,o){for(var a=i.suspendedLanes,c=i.pingedLanes,g=i.expirationTimes,x=i.pendingLanes&-62914561;0<x;){var C=31-ct(x),b=1<<C,A=g[C];A===-1?((b&a)===0||(b&c)!==0)&&(g[C]=vi(b,o)):A<=o&&(i.expiredLanes|=b),x&=~b}if(o=St,a=it,a=Yn(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===o&&(vt===2||vt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&L(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||pn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(c!==null&&L(c),_l(a)){case 2:case 8:a=ae;break;case 32:a=pe;break;case 268435456:a=je;break;default:a=pe}return c=ty.bind(null,i),a=kt(a,c),i.callbackPriority=o,i.callbackNode=a,o}return c!==null&&c!==null&&L(c),i.callbackPriority=2,i.callbackNode=null,2}function ty(i,o){if(on!==0&&on!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Hr()&&i.callbackNode!==a)return null;var c=it;return c=Yn(i,i===St?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(Ug(i,c,o),ey(i,le()),i.callbackNode!=null&&i.callbackNode===a?ty.bind(null,i):null)}function ny(i,o){if(Hr())return null;Ug(i,o,!0)}function lb(){xb(function(){(mt&6)!==0?kt(Te,ob):Zg()})}function qd(){if(Cs===0){var i=Io;i===0&&(i=Be,Be<<=1,(Be&261888)===0&&(Be=256)),Cs=i}return Cs}function iy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ka(""+i)}function sy(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function ab(i,o,a,c,g){if(o==="submit"&&a&&a.stateNode===g){var x=iy((g[mn]||null).action),C=c.submitter;C&&(o=(o=C[mn]||null)?iy(o.formAction):C.getAttribute("formAction"),o!==null&&(x=o,C=null));var b=new Za("action","action",null,c,g);i.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Cs!==0){var A=C?sy(g,C):new FormData(g);ad(a,{pending:!0,data:A,method:g.method,action:x},null,A)}}else typeof x=="function"&&(b.preventDefault(),A=C?sy(g,C):new FormData(g),ad(a,{pending:!0,data:A,method:g.method,action:x},x,A))},currentTarget:g}]})}}for(var Vd=0;Vd<Tu.length;Vd++){var Fd=Tu[Vd],rb=Fd.toLowerCase(),cb=Fd[0].toUpperCase()+Fd.slice(1);ci(rb,"on"+cb)}ci(Lp,"onAnimationEnd"),ci(Up,"onAnimationIteration"),ci(Bp,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(SC,"onTransitionRun"),ci(NC,"onTransitionStart"),ci(AC,"onTransitionCancel"),ci(Op,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_i("onBeforeInput",["compositionend","keypress","textInput","paste"]),_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sa));function oy(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],g=c.event;c=c.listeners;e:{var x=void 0;if(o)for(var C=c.length-1;0<=C;C--){var b=c[C],A=b.instance,B=b.currentTarget;if(b=b.listener,A!==x&&g.isPropagationStopped())break e;x=b,g.currentTarget=B;try{x(g)}catch($){nr($)}g.currentTarget=null,x=A}else for(C=0;C<c.length;C++){if(b=c[C],A=b.instance,B=b.currentTarget,b=b.listener,A!==x&&g.isPropagationStopped())break e;x=b,g.currentTarget=B;try{x(g)}catch($){nr($)}g.currentTarget=null,x=A}}}}function et(i,o){var a=o[mo];a===void 0&&(a=o[mo]=new Set);var c=i+"__bubble";a.has(c)||(ly(o,i,2,!1),a.add(c))}function zd(i,o,a){var c=0;o&&(c|=4),ly(a,i,c,o)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function jd(i){if(!i[Vr]){i[Vr]=!0,Tl.forEach(function(a){a!=="selectionchange"&&(ub.has(a)||zd(a,!1,i),zd(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Vr]||(o[Vr]=!0,zd("selectionchange",!1,o))}}function ly(i,o,a,c){switch(Ly(o)){case 2:var g=Ob;break;case 8:g=Hb;break;default:g=af}a=g.bind(null,o,a,i),g=void 0,!du||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),c?g!==void 0?i.addEventListener(o,a,{capture:!0,passive:g}):i.addEventListener(o,a,!0):g!==void 0?i.addEventListener(o,a,{passive:g}):i.addEventListener(o,a,!1)}function Yd(i,o,a,c,g){var x=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var C=c.tag;if(C===3||C===4){var b=c.stateNode.containerInfo;if(b===g)break;if(C===4)for(C=c.return;C!==null;){var A=C.tag;if((A===3||A===4)&&C.stateNode.containerInfo===g)return;C=C.return}for(;b!==null;){if(C=wi(b),C===null)return;if(A=C.tag,A===5||A===6||A===26||A===27){c=x=C;continue e}b=b.parentNode}}c=c.return}dp(function(){var B=x,$=cu(a),Z=[];e:{var H=Hp.get(i);if(H!==void 0){var V=Za,Ee=i;switch(i){case"keypress":if(Xa(a)===0)break e;case"keydown":case"keyup":V=iC;break;case"focusin":Ee="focus",V=mu;break;case"focusout":Ee="blur",V=mu;break;case"beforeblur":case"afterblur":V=mu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=lC;break;case Lp:case Up:case Bp:V=JE;break;case Op:V=rC;break;case"scroll":case"scrollend":V=FE;break;case"wheel":V=uC;break;case"copy":case"cut":case"paste":V=QE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=gp;break;case"toggle":case"beforetoggle":V=fC}var Ue=(o&4)!==0,bt=!Ue&&(i==="scroll"||i==="scrollend"),P=Ue?H!==null?H+"Capture":null:H;Ue=[];for(var I=B,U;I!==null;){var Q=I;if(U=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||U===null||P===null||(Q=Nl(I,P),Q!=null&&Ue.push(oa(I,Q,U))),bt)break;I=I.return}0<Ue.length&&(H=new V(H,Ee,null,a,$),Z.push({event:H,listeners:Ue}))}}if((o&7)===0){e:{if(H=i==="mouseover"||i==="pointerover",V=i==="mouseout"||i==="pointerout",H&&a!==ru&&(Ee=a.relatedTarget||a.fromElement)&&(wi(Ee)||Ee[Ai]))break e;if((V||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,V?(Ee=a.relatedTarget||a.toElement,V=B,Ee=Ee?wi(Ee):null,Ee!==null&&(bt=r(Ee),Ue=Ee.tag,Ee!==bt||Ue!==5&&Ue!==27&&Ue!==6)&&(Ee=null)):(V=null,Ee=B),V!==Ee)){if(Ue=pp,Q="onMouseLeave",P="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(Ue=gp,Q="onPointerLeave",P="onPointerEnter",I="pointer"),bt=V==null?H:ss(V),U=Ee==null?H:ss(Ee),H=new Ue(Q,I+"leave",V,a,$),H.target=bt,H.relatedTarget=U,Q=null,wi($)===B&&(Ue=new Ue(P,I+"enter",Ee,a,$),Ue.target=U,Ue.relatedTarget=bt,Q=Ue),bt=Q,V&&Ee)t:{for(Ue=db,P=V,I=Ee,U=0,Q=P;Q;Q=Ue(Q))U++;Q=0;for(var De=I;De;De=Ue(De))Q++;for(;0<U-Q;)P=Ue(P),U--;for(;0<Q-U;)I=Ue(I),Q--;for(;U--;){if(P===I||I!==null&&P===I.alternate){Ue=P;break t}P=Ue(P),I=Ue(I)}Ue=null}else Ue=null;V!==null&&ay(Z,H,V,Ue,!1),Ee!==null&&bt!==null&&ay(Z,bt,Ee,Ue,!0)}}e:{if(H=B?ss(B):window,V=H.nodeName&&H.nodeName.toLowerCase(),V==="select"||V==="input"&&H.type==="file")var ft=Tp;else if(Cp(H))if(Sp)ft=CC;else{ft=_C;var we=vC}else V=H.nodeName,!V||V.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&au(B.elementType)&&(ft=Tp):ft=EC;if(ft&&(ft=ft(i,B))){bp(Z,ft,a,$);break e}we&&we(i,H,B),i==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&nn(H,"number",H.value)}switch(we=B?ss(B):window,i){case"focusin":(Cp(we)||we.contentEditable==="true")&&(Eo=we,Eu=B,Pl=null);break;case"focusout":Pl=Eu=Eo=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,kp(Z,a,$);break;case"selectionchange":if(TC)break;case"keydown":case"keyup":kp(Z,a,$)}var Qe;if(yu)e:{switch(i){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else _o?_p(i,a)&&(st="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(st="onCompositionStart");st&&(yp&&a.locale!=="ko"&&(_o||st!=="onCompositionStart"?st==="onCompositionEnd"&&_o&&(Qe=fp()):(ls=$,fu="value"in ls?ls.value:ls.textContent,_o=!0)),we=Fr(B,st),0<we.length&&(st=new mp(st,i,null,a,$),Z.push({event:st,listeners:we}),Qe?st.data=Qe:(Qe=Ep(a),Qe!==null&&(st.data=Qe)))),(Qe=pC?mC(i,a):gC(i,a))&&(st=Fr(B,"onBeforeInput"),0<st.length&&(we=new mp("onBeforeInput","beforeinput",null,a,$),Z.push({event:we,listeners:st}),we.data=Qe)),ab(Z,i,B,a,$)}oy(Z,o)})}function oa(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Fr(i,o){for(var a=o+"Capture",c=[];i!==null;){var g=i,x=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||x===null||(g=Nl(i,a),g!=null&&c.unshift(oa(i,g,x)),g=Nl(i,o),g!=null&&c.push(oa(i,g,x))),i.tag===3)return c;i=i.return}return[]}function db(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function ay(i,o,a,c,g){for(var x=o._reactName,C=[];a!==null&&a!==c;){var b=a,A=b.alternate,B=b.stateNode;if(b=b.tag,A!==null&&A===c)break;b!==5&&b!==26&&b!==27||B===null||(A=B,g?(B=Nl(a,x),B!=null&&C.unshift(oa(a,B,A))):g||(B=Nl(a,x),B!=null&&C.push(oa(a,B,A)))),a=a.return}C.length!==0&&i.push({event:o,listeners:C})}var fb=/\r\n?/g,hb=/\u0000|\uFFFD/g;function ry(i){return(typeof i=="string"?i:""+i).replace(fb,`
`).replace(hb,"")}function cy(i,o){return o=ry(o),ry(i)===o}function Ct(i,o,a,c,g,x){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Jn(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Jn(i,""+c);break;case"className":Oe(i,"class",c);break;case"tabIndex":Oe(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Oe(i,a,c);break;case"style":cp(i,c,x);break;case"data":if(o!=="object"){Oe(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ka(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(a==="formAction"?(o!=="input"&&Ct(i,o,"name",g.name,g,null),Ct(i,o,"formEncType",g.formEncType,g,null),Ct(i,o,"formMethod",g.formMethod,g,null),Ct(i,o,"formTarget",g.formTarget,g,null)):(Ct(i,o,"encType",g.encType,g,null),Ct(i,o,"method",g.method,g,null),Ct(i,o,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ka(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=ki);break;case"onScroll":c!=null&&et("scroll",i);break;case"onScrollEnd":c!=null&&et("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ka(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":et("beforetoggle",i),et("toggle",i),_e(i,"popover",c);break;case"xlinkActuate":Se(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Se(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Se(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Se(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Se(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Se(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Se(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Se(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Se(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":_e(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qE.get(a)||a,_e(i,a,c))}}function $d(i,o,a,c,g,x){switch(a){case"style":cp(i,c,x);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(g.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Jn(i,c):(typeof c=="number"||typeof c=="bigint")&&Jn(i,""+c);break;case"onScroll":c!=null&&et("scroll",i);break;case"onScrollEnd":c!=null&&et("scrollend",i);break;case"onClick":c!=null&&(i.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),o=a.slice(2,g?a.length-7:void 0),x=i[mn]||null,x=x!=null?x[a]:null,typeof x=="function"&&i.removeEventListener(o,x,g),typeof c=="function")){typeof x!="function"&&x!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,c,g);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):_e(i,a,c)}}}function vn(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",i),et("load",i);var c=!1,g=!1,x;for(x in a)if(a.hasOwnProperty(x)){var C=a[x];if(C!=null)switch(x){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ct(i,o,x,C,a,null)}}g&&Ct(i,o,"srcSet",a.srcSet,a,null),c&&Ct(i,o,"src",a.src,a,null);return;case"input":et("invalid",i);var b=x=C=g=null,A=null,B=null;for(c in a)if(a.hasOwnProperty(c)){var $=a[c];if($!=null)switch(c){case"name":g=$;break;case"type":C=$;break;case"checked":A=$;break;case"defaultChecked":B=$;break;case"value":x=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:Ct(i,o,c,$,a,null)}}os(i,x,b,A,B,C,g,!1);return;case"select":et("invalid",i),c=C=x=null;for(g in a)if(a.hasOwnProperty(g)&&(b=a[g],b!=null))switch(g){case"value":x=b;break;case"defaultValue":C=b;break;case"multiple":c=b;default:Ct(i,o,g,b,a,null)}o=x,a=C,i.multiple=!!c,o!=null?Qt(i,!!c,o,!1):a!=null&&Qt(i,!!c,a,!0);return;case"textarea":et("invalid",i),x=g=c=null;for(C in a)if(a.hasOwnProperty(C)&&(b=a[C],b!=null))switch(C){case"value":c=b;break;case"defaultValue":g=b;break;case"children":x=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:Ct(i,o,C,b,a,null)}sn(i,c,g,x);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(c=a[A],c!=null))switch(A){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ct(i,o,A,c,a,null)}return;case"dialog":et("beforetoggle",i),et("toggle",i),et("cancel",i),et("close",i);break;case"iframe":case"object":et("load",i);break;case"video":case"audio":for(c=0;c<sa.length;c++)et(sa[c],i);break;case"image":et("error",i),et("load",i);break;case"details":et("toggle",i);break;case"embed":case"source":case"link":et("error",i),et("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(c=a[B],c!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ct(i,o,B,c,a,null)}return;default:if(au(o)){for($ in a)a.hasOwnProperty($)&&(c=a[$],c!==void 0&&$d(i,o,$,c,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(c=a[b],c!=null&&Ct(i,o,b,c,a,null))}function pb(i,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,x=null,C=null,b=null,A=null,B=null,$=null;for(V in a){var Z=a[V];if(a.hasOwnProperty(V)&&Z!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=Z;default:c.hasOwnProperty(V)||Ct(i,o,V,null,c,Z)}}for(var H in c){var V=c[H];if(Z=a[H],c.hasOwnProperty(H)&&(V!=null||Z!=null))switch(H){case"type":x=V;break;case"name":g=V;break;case"checked":B=V;break;case"defaultChecked":$=V;break;case"value":C=V;break;case"defaultValue":b=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,o));break;default:V!==Z&&Ct(i,o,H,V,c,Z)}}dt(i,C,b,A,B,$,x,g);return;case"select":V=C=b=H=null;for(x in a)if(A=a[x],a.hasOwnProperty(x)&&A!=null)switch(x){case"value":break;case"multiple":V=A;default:c.hasOwnProperty(x)||Ct(i,o,x,null,c,A)}for(g in c)if(x=c[g],A=a[g],c.hasOwnProperty(g)&&(x!=null||A!=null))switch(g){case"value":H=x;break;case"defaultValue":b=x;break;case"multiple":C=x;default:x!==A&&Ct(i,o,g,x,c,A)}o=b,a=C,c=V,H!=null?Qt(i,!!a,H,!1):!!c!=!!a&&(o!=null?Qt(i,!!a,o,!0):Qt(i,!!a,a?[]:"",!1));return;case"textarea":V=H=null;for(b in a)if(g=a[b],a.hasOwnProperty(b)&&g!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Ct(i,o,b,null,c,g)}for(C in c)if(g=c[C],x=a[C],c.hasOwnProperty(C)&&(g!=null||x!=null))switch(C){case"value":H=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==x&&Ct(i,o,C,g,c,x)}$n(i,H,V);return;case"option":for(var Ee in a)if(H=a[Ee],a.hasOwnProperty(Ee)&&H!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":i.selected=!1;break;default:Ct(i,o,Ee,null,c,H)}for(A in c)if(H=c[A],V=a[A],c.hasOwnProperty(A)&&H!==V&&(H!=null||V!=null))switch(A){case"selected":i.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ct(i,o,A,H,c,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in a)H=a[Ue],a.hasOwnProperty(Ue)&&H!=null&&!c.hasOwnProperty(Ue)&&Ct(i,o,Ue,null,c,H);for(B in c)if(H=c[B],V=a[B],c.hasOwnProperty(B)&&H!==V&&(H!=null||V!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,o));break;default:Ct(i,o,B,H,c,V)}return;default:if(au(o)){for(var bt in a)H=a[bt],a.hasOwnProperty(bt)&&H!==void 0&&!c.hasOwnProperty(bt)&&$d(i,o,bt,void 0,c,H);for($ in c)H=c[$],V=a[$],!c.hasOwnProperty($)||H===V||H===void 0&&V===void 0||$d(i,o,$,H,c,V);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!c.hasOwnProperty(P)&&Ct(i,o,P,null,c,H);for(Z in c)H=c[Z],V=a[Z],!c.hasOwnProperty(Z)||H===V||H==null&&V==null||Ct(i,o,Z,H,c,V)}function uy(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mb(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var g=a[c],x=g.transferSize,C=g.initiatorType,b=g.duration;if(x&&b&&uy(C)){for(C=0,b=g.responseEnd,c+=1;c<a.length;c++){var A=a[c],B=A.startTime;if(B>b)break;var $=A.transferSize,Z=A.initiatorType;$&&uy(Z)&&(A=A.responseEnd,C+=$*(A<b?1:(b-B)/(A-B)))}if(--c,o+=8*(x+C)/(g.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Jd=null,Kd=null;function zr(i){return i.nodeType===9?i:i.ownerDocument}function dy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Qd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Xd=null;function gb(){var i=window.event;return i&&i.type==="popstate"?i===Xd?!1:(Xd=i,!0):(Xd=null,!1)}var hy=typeof setTimeout=="function"?setTimeout:void 0,yb=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,xb=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(i){return py.resolve(null).then(i).catch(vb)}:hy;function vb(i){setTimeout(function(){throw i})}function bs(i){return i==="head"}function my(i,o){var a=o,c=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(g),Jo(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")la(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,la(a);for(var x=a.firstChild;x;){var C=x.nextSibling,b=x.nodeName;x[is]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=C}}else a==="body"&&la(i.ownerDocument.body);a=g}while(a);Jo(o)}function gy(i,o){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Wd(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Wd(a),go(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function _b(i,o,a,c){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[is])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(x=i.getAttribute("rel"),x==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(x!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(x=i.getAttribute("src"),(x!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&x&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var x=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===x)return i}else return i;if(i=ti(i.nextSibling),i===null)break}return null}function Eb(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=ti(i.nextSibling),i===null))return null;return i}function yy(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ti(i.nextSibling),i===null))return null;return i}function Zd(i){return i.data==="$?"||i.data==="$~"}function ef(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Cb(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function ti(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var tf=null;function xy(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return ti(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function vy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function _y(i,o,a){switch(o=zr(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function la(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);go(i)}var ni=new Map,Ey=new Set;function jr(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=te.d;te.d={f:bb,r:Tb,D:Sb,C:Nb,L:Ab,m:wb,X:Rb,S:Ib,M:Mb};function bb(){var i=Ki.f(),o=Ur();return i||o}function Tb(i){var o=Ii(i);o!==null&&o.tag===5&&o.type==="form"?Om(o):Ki.r(i)}var jo=typeof document>"u"?null:document;function Cy(i,o,a){var c=jo;if(c&&typeof o=="string"&&o){var g=Nt(o);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Ey.has(g)||(Ey.add(g),i={rel:i,crossOrigin:a,href:o},c.querySelector(g)===null&&(o=c.createElement("link"),vn(o,"link",i),zt(o),c.head.appendChild(o)))}}function Sb(i){Ki.D(i),Cy("dns-prefetch",i,null)}function Nb(i,o){Ki.C(i,o),Cy("preconnect",i,o)}function Ab(i,o,a){Ki.L(i,o,a);var c=jo;if(c&&i&&o){var g='link[rel="preload"][as="'+Nt(o)+'"]';o==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+Nt(a.imageSizes)+'"]')):g+='[href="'+Nt(i)+'"]';var x=g;switch(o){case"style":x=Yo(i);break;case"script":x=$o(i)}ni.has(x)||(i=_({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),ni.set(x,i),c.querySelector(g)!==null||o==="style"&&c.querySelector(aa(x))||o==="script"&&c.querySelector(ra(x))||(o=c.createElement("link"),vn(o,"link",i),zt(o),c.head.appendChild(o)))}}function wb(i,o){Ki.m(i,o);var a=jo;if(a&&i){var c=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+Nt(c)+'"][href="'+Nt(i)+'"]',x=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=$o(i)}if(!ni.has(x)&&(i=_({rel:"modulepreload",href:i},o),ni.set(x,i),a.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ra(x)))return}c=a.createElement("link"),vn(c,"link",i),zt(c),a.head.appendChild(c)}}}function Ib(i,o,a){Ki.S(i,o,a);var c=jo;if(c&&i){var g=Ri(c).hoistableStyles,x=Yo(i);o=o||"default";var C=g.get(x);if(!C){var b={loading:0,preload:null};if(C=c.querySelector(aa(x)))b.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":o},a),(a=ni.get(x))&&nf(i,a);var A=C=c.createElement("link");zt(A),vn(A,"link",i),A._p=new Promise(function(B,$){A.onload=B,A.onerror=$}),A.addEventListener("load",function(){b.loading|=1}),A.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Yr(C,o,c)}C={type:"stylesheet",instance:C,count:1,state:b},g.set(x,C)}}}function Rb(i,o){Ki.X(i,o);var a=jo;if(a&&i){var c=Ri(a).hoistableScripts,g=$o(i),x=c.get(g);x||(x=a.querySelector(ra(g)),x||(i=_({src:i,async:!0},o),(o=ni.get(g))&&sf(i,o),x=a.createElement("script"),zt(x),vn(x,"link",i),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(g,x))}}function Mb(i,o){Ki.M(i,o);var a=jo;if(a&&i){var c=Ri(a).hoistableScripts,g=$o(i),x=c.get(g);x||(x=a.querySelector(ra(g)),x||(i=_({src:i,async:!0,type:"module"},o),(o=ni.get(g))&&sf(i,o),x=a.createElement("script"),zt(x),vn(x,"link",i),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},c.set(g,x))}}function by(i,o,a,c){var g=(g=ne.current)?jr(g):null;if(!g)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=Yo(a.href),a=Ri(g).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Yo(a.href);var x=Ri(g).hoistableStyles,C=x.get(i);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(i,C),(x=g.querySelector(aa(i)))&&!x._p&&(C.instance=x,C.state.loading=5),ni.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ni.set(i,a),x||Db(g,i,a,C.state))),o&&c===null)throw Error(s(528,""));return C}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=$o(a),a=Ri(g).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Yo(i){return'href="'+Nt(i)+'"'}function aa(i){return'link[rel="stylesheet"]['+i+"]"}function Ty(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function Db(i,o,a,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),vn(o,"link",a),zt(o),i.head.appendChild(o))}function $o(i){return'[src="'+Nt(i)+'"]'}function ra(i){return"script[async]"+i}function Sy(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(c)return o.instance=c,zt(c),c;var g=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),zt(c),vn(c,"style",g),Yr(c,a.precedence,i),o.instance=c;case"stylesheet":g=Yo(a.href);var x=i.querySelector(aa(g));if(x)return o.state.loading|=4,o.instance=x,zt(x),x;c=Ty(a),(g=ni.get(g))&&nf(c,g),x=(i.ownerDocument||i).createElement("link"),zt(x);var C=x;return C._p=new Promise(function(b,A){C.onload=b,C.onerror=A}),vn(x,"link",c),o.state.loading|=4,Yr(x,a.precedence,i),o.instance=x;case"script":return x=$o(a.src),(g=i.querySelector(ra(x)))?(o.instance=g,zt(g),g):(c=a,(g=ni.get(x))&&(c=_({},a),sf(c,g)),i=i.ownerDocument||i,g=i.createElement("script"),zt(g),vn(g,"link",c),i.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Yr(c,a.precedence,i));return o.instance}function Yr(i,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,x=g,C=0;C<c.length;C++){var b=c[C];if(b.dataset.precedence===o)x=b;else if(x!==g)break}x?x.parentNode.insertBefore(i,x.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function nf(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function sf(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var $r=null;function Ny(i,o,a){if($r===null){var c=new Map,g=$r=new Map;g.set(a,c)}else g=$r,c=g.get(a),c||(c=new Map,g.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var x=a[g];if(!(x[is]||x[tn]||i==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(o)||"";C=i+C;var b=c.get(C);b?b.push(x):c.set(C,[x])}}return c}function Ay(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function kb(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function wy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Pb(i,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Yo(c.href),x=o.querySelector(aa(g));if(x){o=x._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Jr.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=x,zt(x);return}x=o.ownerDocument||o,c=Ty(c),(g=ni.get(g))&&nf(c,g),x=x.createElement("link"),zt(x);var C=x;C._p=new Promise(function(b,A){C.onload=b,C.onerror=A}),vn(x,"link",c),a.instance=x}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Jr.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var of=0;function Lb(i,o){return i.stylesheets&&i.count===0&&Qr(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&Qr(i,i.stylesheets),i.unsuspend){var x=i.unsuspend;i.unsuspend=null,x()}},6e4+o);0<i.imgBytes&&of===0&&(of=62500*mb());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Qr(i,i.stylesheets),i.unsuspend)){var x=i.unsuspend;i.unsuspend=null,x()}},(i.imgBytes>of?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Jr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qr(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Kr=null;function Qr(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Kr=new Map,o.forEach(Ub,i),Kr=null,Jr.call(i))}function Ub(i,o){if(!(o.state.loading&4)){var a=Kr.get(i);if(a)var c=a.get(null);else{a=new Map,Kr.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<g.length;x++){var C=g[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(a.set(C.dataset.precedence,C),c=C)}c&&a.set(null,c)}g=o.instance,C=g.getAttribute("data-precedence"),x=a.get(C)||c,x===c&&a.set(null,g),a.set(C,g),this.count++,c=Jr.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),x?x.parentNode.insertBefore(g,x.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),o.state.loading|=4}}var ca={$$typeof:j,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function Bb(i,o,a,c,g,x,C,b,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ho(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ho(0),this.hiddenUpdates=ho(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Iy(i,o,a,c,g,x,C,b,A,B,$,Z){return i=new Bb(i,o,a,C,A,B,$,Z,b),o=1,x===!0&&(o|=24),x=Gn(3,null,null,o),i.current=x,x.stateNode=i,o=Bu(),o.refCount++,i.pooledCache=o,o.refCount++,x.memoizedState={element:c,isDehydrated:a,cache:o},qu(x),i}function Ry(i){return i?(i=To,i):To}function My(i,o,a,c,g,x){g=Ry(g),c.context===null?c.context=g:c.pendingContext=g,c=fs(o),c.payload={element:a},x=x===void 0?null:x,x!==null&&(c.callback=x),a=hs(i,c,o),a!==null&&(Pn(a,i,o),ql(a,i,o))}function Dy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function lf(i,o){Dy(i,o),(i=i.alternate)&&Dy(i,o)}function ky(i){if(i.tag===13||i.tag===31){var o=Vs(i,67108864);o!==null&&Pn(o,i,67108864),lf(i,67108864)}}function Py(i){if(i.tag===13||i.tag===31){var o=jn();o=vl(o);var a=Vs(i,o);a!==null&&Pn(a,i,o),lf(i,o)}}var Xr=!0;function Ob(i,o,a,c){var g=O.T;O.T=null;var x=te.p;try{te.p=2,af(i,o,a,c)}finally{te.p=x,O.T=g}}function Hb(i,o,a,c){var g=O.T;O.T=null;var x=te.p;try{te.p=8,af(i,o,a,c)}finally{te.p=x,O.T=g}}function af(i,o,a,c){if(Xr){var g=rf(c);if(g===null)Yd(i,o,c,Wr,a),Uy(i,c);else if(qb(g,i,o,a,c))c.stopPropagation();else if(Uy(i,c),o&4&&-1<Gb.indexOf(i)){for(;g!==null;){var x=Ii(g);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=an(x.pendingLanes);if(C!==0){var b=x;for(b.pendingLanes|=2,b.entangledLanes|=2;C;){var A=1<<31-ct(C);b.entanglements[1]|=A,C&=~A}Ti(x),(mt&6)===0&&(Pr=le()+500,ia(0))}}break;case 31:case 13:b=Vs(x,2),b!==null&&Pn(b,x,2),Ur(),lf(x,2)}if(x=rf(c),x===null&&Yd(i,o,c,Wr,a),x===g)break;g=x}g!==null&&c.stopPropagation()}else Yd(i,o,c,null,a)}}function rf(i){return i=cu(i),cf(i)}var Wr=null;function cf(i){if(Wr=null,i=wi(i),i!==null){var o=r(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=u(o),i!==null)return i;i=null}else if(a===31){if(i=p(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Wr=i,null}function Ly(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case Te:return 2;case ae:return 8;case pe:case Me:return 32;case je:return 268435456;default:return 32}default:return 32}}var uf=!1,Ts=null,Ss=null,Ns=null,ua=new Map,da=new Map,As=[],Gb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uy(i,o){switch(i){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":ua.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":da.delete(o.pointerId)}}function fa(i,o,a,c,g,x){return i===null||i.nativeEvent!==x?(i={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:x,targetContainers:[g]},o!==null&&(o=Ii(o),o!==null&&ky(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function qb(i,o,a,c,g){switch(o){case"focusin":return Ts=fa(Ts,i,o,a,c,g),!0;case"dragenter":return Ss=fa(Ss,i,o,a,c,g),!0;case"mouseover":return Ns=fa(Ns,i,o,a,c,g),!0;case"pointerover":var x=g.pointerId;return ua.set(x,fa(ua.get(x)||null,i,o,a,c,g)),!0;case"gotpointercapture":return x=g.pointerId,da.set(x,fa(da.get(x)||null,i,o,a,c,g)),!0}return!1}function By(i){var o=wi(i.target);if(o!==null){var a=r(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){i.blockedOn=o,Cl(i.priority,function(){Py(a)});return}}else if(o===31){if(o=p(a),o!==null){i.blockedOn=o,Cl(i.priority,function(){Py(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Zr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=rf(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);ru=c,a.target.dispatchEvent(c),ru=null}else return o=Ii(a),o!==null&&ky(o),i.blockedOn=a,!1;o.shift()}return!0}function Oy(i,o,a){Zr(i)&&a.delete(o)}function Vb(){uf=!1,Ts!==null&&Zr(Ts)&&(Ts=null),Ss!==null&&Zr(Ss)&&(Ss=null),Ns!==null&&Zr(Ns)&&(Ns=null),ua.forEach(Oy),da.forEach(Oy)}function ec(i,o){i.blockedOn===o&&(i.blockedOn=null,uf||(uf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Vb)))}var tc=null;function Hy(i){tc!==i&&(tc=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tc===i&&(tc=null);for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1],g=i[o+2];if(typeof c!="function"){if(cf(c||a)===null)continue;break}var x=Ii(a);x!==null&&(i.splice(o,3),o-=3,ad(x,{pending:!0,data:g,method:a.method,action:c},c,g))}}))}function Jo(i){function o(A){return ec(A,i)}Ts!==null&&ec(Ts,i),Ss!==null&&ec(Ss,i),Ns!==null&&ec(Ns,i),ua.forEach(o),da.forEach(o);for(var a=0;a<As.length;a++){var c=As[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<As.length&&(a=As[0],a.blockedOn===null);)By(a),a.blockedOn===null&&As.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var g=a[c],x=a[c+1],C=g[mn]||null;if(typeof x=="function")C||Hy(a);else if(C){var b=null;if(x&&x.hasAttribute("formAction")){if(g=x,C=x[mn]||null)b=C.formAction;else if(cf(g)!==null)continue}else b=C.action;typeof b=="function"?a[c+1]=b:(a.splice(c,3),c-=3),Hy(a)}}}function Gy(){function i(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return g=C})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function df(i){this._internalRoot=i}nc.prototype.render=df.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,c=jn();My(a,c,i,o,null,null)},nc.prototype.unmount=df.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;My(i.current,2,null,i,null,null),Ur(),o[Ai]=null}};function nc(i){this._internalRoot=i}nc.prototype.unstable_scheduleHydration=function(i){if(i){var o=El();i={blockedOn:null,target:i,priority:o};for(var a=0;a<As.length&&o!==0&&o<As[a].priority;a++);As.splice(a,0,i),a===0&&By(i)}};var qy=e.version;if(qy!=="19.2.4")throw Error(s(527,qy,"19.2.4"));te.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var Fb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{nt=ic.inject(Fb),Re=ic}catch{}}return pa.createRoot=function(i,o){if(!l(i))throw Error(s(299));var a=!1,c="",g=Jm,x=Km,C=Qm;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=Iy(i,1,!1,null,null,a,c,null,g,x,C,Gy),i[Ai]=o.current,jd(i),new df(o)},pa.hydrateRoot=function(i,o,a){if(!l(i))throw Error(s(299));var c=!1,g="",x=Jm,C=Km,b=Qm,A=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(C=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(A=a.formState)),o=Iy(i,1,!0,o,a??null,c,g,A,x,C,b,Gy),o.context=Ry(null),a=o.current,c=jn(),c=vl(c),g=fs(c),g.callback=null,hs(a,g,c),a=c,o.current.lanes=a,Os(o,a),Ti(o),i[Ai]=o.current,jd(i),new nc(o)},pa.version="19.2.4",pa}var Xy;function Zb(){if(Xy)return pf.exports;Xy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pf.exports=Wb(),pf.exports}var eT=Zb();const tT=Tv(eT),nT=({squares:t,pendingSelection:e,settings:n,onSquareClick:s,participants:l,onCheckout:r,onSetPendingSelection:u,activePool:p})=>{var O,te,ve,Ce,Ge,w;const[y,m]=z.useState(!1),[v,_]=z.useState(1),E=z.useRef(null),T=z.useRef(null),N="print-grid-only-mode";z.useEffect(()=>{const R=()=>{if(E.current){const W=E.current,q=W.querySelector(".grid-inner-content");if(q){const ne=W.clientWidth-40,re=q.offsetWidth;if(re>0){const be=ne/re;_(Math.min(1,parseFloat(be.toFixed(2))))}}}},F=setTimeout(R,300);return window.addEventListener("resize",R),()=>{clearTimeout(F),window.removeEventListener("resize",R)}},[]),z.useEffect(()=>{const R=()=>{document.body.classList.remove(N)};return window.addEventListener("afterprint",R),()=>{window.removeEventListener("afterprint",R),document.body.classList.remove(N)}},[]);const D=z.useMemo(()=>{const R={};return(l||[]).forEach(F=>{R[F.id]=F}),R},[l]),k=(R,F)=>{const W=R==="row"?n.rowNumbers:n.colNumbers;return W&&W.length>0?W[F]:"?"},G=z.useMemo(()=>Array.from({length:10},(R,F)=>(t||[]).filter(W=>W.row===F)),[t]),X=z.useMemo(()=>{const R=new Set,{scores:F=[]}=p,{rowNumbers:W,colNumbers:q}=n;return(F||[]).forEach(ne=>{const re=ne.teamAScore%10,be=ne.teamBScore%10,Pe=(W||[]).indexOf(re),rt=(q||[]).indexOf(be);if(Pe!==-1&&rt!==-1){const yt=t.find(Jt=>Jt.row===Pe&&Jt.col===rt);yt&&R.add(yt.id)}}),R},[p.scores,t,n.rowNumbers,n.colNumbers]),j=z.useMemo(()=>{const R=t.filter(re=>re.assigned).length,F=n.costPerBox||10,W=t.reduce((re,be)=>re+(be.paidAmount||0),0),q=100*F,ne=R*F;return{assigned:R,remaining:100-R,totalRaised:W,totalCommitted:ne,potentialTotal:q}},[t,n.costPerBox]),M=z.useMemo(()=>{const{payouts:R,costPerBox:F}=n,W=100*F;if(R.mode==="scoreChange")return{isScoreChange:!0,multiplier:R.scoreChangeMultiplier,perChange:F*R.scoreChangeMultiplier,charity:R.charityPayoutType==="fixed"?R.charityFixedAmount:W*(R.charityPercent/100)};let q=0;R.charityPayoutType==="fixed"?q=R.charityFixedAmount||0:q=W*(R.charityPercent/100);const ne=W-q,re=be=>R.standardPayoutType==="fixed"?be:ne*(be/100);return{isScoreChange:!1,q1:re(R.standardSplits.q1),half:re(R.standardSplits.half),q3:re(R.standardSplits.q3),final:re(R.standardSplits.final),charity:q}},[n]),fe=z.useMemo(()=>{const{scores:R=[]}=p,{payouts:F,costPerBox:W,rowNumbers:q,colNumbers:ne}=n,re=100*W;let be=0;F.charityPayoutType==="fixed"?be=F.charityFixedAmount||0:be=re*(F.charityPercent/100);const Pe=re-be;return(R||[]).map((rt,yt)=>{const Jt=rt.teamAScore%10,Dt=rt.teamBScore%10,ln=(q||[]).indexOf(Jt),Y=(ne||[]).indexOf(Dt),ge=t.find(xt=>xt.row===ln&&xt.col===Y);let ke=0;if(F.mode==="standard")if(F.standardPayoutType==="fixed")ke=F.standardSplits[rt.label.toLowerCase()]||0;else{const xt=F.standardSplits[rt.label.toLowerCase()]||0;ke=Pe*(xt/100)}else{const xt=rt.teamAScore===0&&rt.teamBScore===0,Vt=R.slice(0,yt).some(kt=>kt.teamAScore===0&&kt.teamBScore===0);ke=xt&&!Vt?W:W*(F.scoreChangeMultiplier||3)}return{label:rt.label,score:`${rt.teamAScore}-${rt.teamBScore}`,winner:ge!=null&&ge.assigned?ge.alias:ge?"UNCLAIMED":"PENDING",payout:ke}}).reverse()},[p.scores,n,t]),ie=()=>{document.body.classList.add(N),window.print(),m(!1)},oe=()=>{if(E.current){const R=E.current.innerHTML;window.openPrintWindow&&window.openPrintWindow(R)}m(!1)},xe=()=>{const R=["Square #","Row Num","Col Num","Player Alias","Real Name","Email","Phone","Status"],F=(t||[]).map(be=>{const Pe=be.participantId?D[be.participantId]:null;return[be.id+1,k("row",be.row),k("col",be.col),be.assigned?be.alias:"Unassigned",Pe?Pe.name:"",Pe?Pe.email:"",Pe?Pe.phone:"",be.paidAmount>=n.costPerBox?"Paid":be.assigned?"Pending":"Available"]});F.sort((be,Pe)=>{const rt=String(be[6]||"").replace(/\D/g,""),yt=String(Pe[6]||"").replace(/\D/g,"");return!rt&&yt?1:rt&&!yt?-1:rt.localeCompare(yt)});const W=[R,...F].map(be=>be.map(Pe=>`"${String(Pe).replace(/"/g,'""')}"`).join(",")).join(`
`),q=new Blob([W],{type:"text/csv;charset=utf-8;"}),ne=URL.createObjectURL(q),re=document.createElement("a");re.setAttribute("href",ne),re.setAttribute("download",`grid_mapping_${new Date().toISOString().split("T")[0]}.csv`),re.click(),m(!1)},ce=R=>{if(R.touches.length===2){const F=Math.hypot(R.touches[0].pageX-R.touches[1].pageX,R.touches[0].pageY-R.touches[1].pageY);T.current=F}},Ie=R=>{if(R.touches.length===2&&T.current!==null){const F=Math.hypot(R.touches[0].pageX-R.touches[1].pageX,R.touches[0].pageY-R.touches[1].pageY),W=F/T.current;_(q=>{const ne=Math.min(Math.max(.1,q*W),2.5);return parseFloat(ne.toFixed(2))}),T.current=F}},qe=()=>{T.current=null},Ye="w-28 md:w-40",ue="w-14 md:w-28";return h.jsxs("div",{className:"flex flex-col items-center w-full relative",children:[h.jsx("style",{children:`
        @media print {
          body.${N} * {
            visibility: hidden !important;
          }
          body.${N} .print-grid-only,
          body.${N} .print-grid-only * {
            visibility: visible !important;
          }
          body.${N} .print-grid-only {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
          }
        }
      `}),h.jsx("div",{ref:E,className:"print-grid-only w-full overflow-auto max-h-[85vh] pb-8 mb-4 touch-pan-x touch-pan-y custom-scrollbar print:overflow-visible relative flex justify-center",onTouchStart:ce,onTouchMove:Ie,onTouchEnd:qe,children:h.jsx("div",{className:"inline-block p-4 print:p-0 min-w-max transition-transform duration-300 origin-top",style:{transform:`scale(${v})`},children:h.jsxs("div",{className:"grid-inner-content flex flex-col",children:[h.jsxs("div",{className:"flex items-end",children:[h.jsx("div",{className:"min-w-[136px] md:min-w-[272px] flex-shrink-0"}),h.jsxs("div",{className:"flex flex-col items-center w-full",children:[h.jsxs("div",{className:"bg-indigo-900 border-2 border-indigo-900 py-6 rounded-t-[3rem] shadow-sm mb-0 w-full flex items-center justify-center gap-12",children:[n.teamBLogo?h.jsx("img",{src:n.teamBLogo,className:"h-8 md:h-16 w-auto object-contain drop-shadow-lg",alt:"Team B Logo"}):h.jsx("i",{className:"fas fa-helmet-safety text-white/50 text-xl md:text-3xl"}),h.jsx("span",{className:"text-2xl md:text-5xl lg:text-6xl font-black text-white uppercase tracking-[0.2em] whitespace-nowrap leading-tight text-center max-w-[50%]",children:n.teamB||"AFC"}),n.teamBLogo?h.jsx("img",{src:n.teamBLogo,className:"h-8 md:h-16 w-auto object-contain drop-shadow-lg",alt:"Team B Logo"}):h.jsx("i",{className:"fas fa-helmet-safety text-white/50 text-xl md:text-3xl"})]}),h.jsx("div",{className:"flex gap-[1px] md:gap-[2px] w-full",children:Array.from({length:10}).map((R,F)=>h.jsx("div",{className:`${Ye} h-10 md:h-14 flex items-center justify-center font-black text-sm md:text-2xl text-indigo-900 bg-indigo-50 rounded-t-lg border-b border-indigo-200`,children:k("col",F)},F))})]})]}),h.jsxs("div",{className:"flex",children:[h.jsxs("div",{className:"w-20 md:w-40 flex flex-col items-center justify-center bg-indigo-900 rounded-l-[3rem] shadow-lg mr-1 md:mr-2 flex-shrink-0 py-24 px-1",children:[n.teamALogo?h.jsx("img",{src:n.teamALogo,className:"w-18 md:w-36 h-auto object-contain drop-shadow-lg mb-16 -rotate-90",alt:"Team A Logo"}):h.jsx("i",{className:"fas fa-helmet-safety text-white/30 text-lg md:text-3xl mb-16"}),h.jsx("span",{className:"text-xl md:text-4xl lg:text-5xl font-black text-white uppercase tracking-[0.15em] whitespace-nowrap [writing-mode:vertical-lr] rotate-180 leading-none",children:n.teamA||"NFC"}),n.teamALogo?h.jsx("img",{src:n.teamALogo,className:"w-18 md:w-36 h-auto object-contain drop-shadow-lg mt-16 -rotate-90",alt:"Team A Logo"}):h.jsx("i",{className:"fas fa-helmet-safety text-white/30 text-lg md:text-3xl mt-16"})]}),h.jsx("div",{className:"flex flex-col gap-[1px] md:gap-[2px] mr-[1px] md:mr-[2px] flex-shrink-0",children:Array.from({length:10}).map((R,F)=>h.jsx("div",{className:`axis-label h-24 md:h-36 ${ue} flex items-center justify-center font-black text-sm md:text-2xl text-white bg-indigo-800 border-r border-indigo-900/50`,children:k("row",F)},F))}),h.jsx("div",{className:"grid-body-container flex flex-col gap-[1px] md:gap-[2px] bg-indigo-900 border-2 md:border-4 border-indigo-900 rounded-tr-lg rounded-br-lg overflow-hidden shadow-2xl",children:G.map((R,F)=>h.jsx("div",{className:"flex gap-[1px] md:gap-[2px]",children:R.map(W=>{const q=(n==null?void 0:n.costPerBox)||10,ne=W.paidAmount||0,re=ne>=q&&q>0,be=ne>0&&!re,Pe=e.includes(W.id),rt=W.alias.slice(0,16).toUpperCase(),yt=W.participantId?D[W.participantId]:null,Jt=yt?yt.name:"",Dt=X.has(W.id);return h.jsxs("div",{title:W.assigned?`Player: ${Jt}
Alias: ${rt}`:`Box #${W.id+1}`,className:`group square-box cursor-pointer ${Ye} h-24 md:h-36 flex flex-col items-center justify-center p-2 transition-all relative ${Dt?"bg-yellow-100 !border-yellow-300":W.assigned?re?"bg-green-50":be?"bg-orange-50":"bg-indigo-50":Pe?"bg-indigo-600 ring-4 ring-indigo-400/50 scale-95 z-10 shadow-inner":n!=null&&n.isLocked?"bg-gray-100":"bg-white"}`,onClick:()=>s(W.id),children:[h.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[24px] md:text-[48px] font-black pointer-events-none transition-opacity ${Pe?"text-white/10":"text-indigo-950/10"} ${W.assigned?"opacity-20":""}`,children:W.id+1}),W.assigned?h.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full relative z-10 text-center overflow-hidden",children:[h.jsx("span",{className:`text-[10px] md:text-[14px] font-black ${re?"text-green-600":"text-indigo-950"} uppercase leading-tight line-clamp-3 break-words w-full group-hover:hidden px-1`,children:rt}),h.jsx("span",{className:`hidden group-hover:block text-[9px] md:text-[12px] font-black ${re?"text-green-700":"text-indigo-800"} uppercase leading-tight line-clamp-3 break-words w-full animate-in fade-in duration-200 px-1 italic`,children:Jt})]}):Pe?h.jsx("div",{className:"animate-pulse no-print relative z-10",children:h.jsx("i",{className:"fas fa-shopping-cart text-white text-[12px] md:text-[18px]"})}):null]},W.id)})},F))})]})]})})}),h.jsxs("div",{className:"grid-controls w-full max-w-5xl flex flex-col md:flex-row items-center justify-between mb-8 print-hidden px-4 gap-4 z-[90] relative",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2 relative",children:[h.jsxs("button",{type:"button",onClick:()=>m(!y),className:"bg-white text-indigo-900 px-6 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-all flex items-center gap-3 border-2 border-indigo-100 shadow-xl cursor-pointer active:scale-95 select-none",children:[h.jsx("i",{className:"fas fa-file-export text-indigo-600"})," Export & Print",h.jsx("i",{className:`fas fa-chevron-${y?"up":"down"} text-[8px] transition-transform`})]}),y&&h.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-indigo-50 p-2 animate-in slide-in-from-top-2 duration-200 z-[100]",children:[h.jsxs("button",{onClick:ie,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[h.jsx("i",{className:"fas fa-desktop text-indigo-400 text-xs"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Browser Print"}),h.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Standard system dialog"})]})]}),h.jsxs("button",{onClick:oe,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[h.jsx("i",{className:"fas fa-window-maximize text-indigo-400 text-xs"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Isolated Print View"}),h.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Best for mobile & tablets"})]})]}),h.jsx("div",{className:"h-[1px] bg-indigo-50 my-1"}),h.jsxs("button",{onClick:xe,className:"w-full text-left px-4 py-3 hover:bg-green-50 rounded-xl flex items-center gap-3 transition-colors",children:[h.jsx("i",{className:"fas fa-file-csv text-green-500 text-xs"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Export Grid CSV"}),h.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Download mapping data"})]})]})]})]}),h.jsxs("div",{className:"flex items-center gap-1 bg-white p-2 rounded-2xl border-2 border-indigo-50 shadow-sm print-hidden",children:[h.jsx("button",{onClick:()=>_(R=>Math.max(.1,R-.1)),className:"w-10 h-10 flex items-center justify-center bg-gray-50 rounded-xl text-indigo-900 hover:bg-indigo-50",children:h.jsx("i",{className:"fas fa-minus text-[10px]"})}),h.jsx("div",{className:"px-3 min-w-[60px] text-center",children:h.jsxs("span",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[Math.round(v*100),"%"]})}),h.jsx("button",{onClick:()=>_(R=>Math.min(2.5,R+.1)),className:"w-10 h-10 flex items-center justify-center bg-gray-50 rounded-xl text-indigo-900 hover:bg-indigo-50",children:h.jsx("i",{className:"fas fa-plus text-[10px]"})}),h.jsx("button",{onClick:()=>_(1),className:"ml-1 px-3 py-2 text-[8px] font-black uppercase text-indigo-400",children:"1:1"})]})]}),e.length>0&&h.jsxs("button",{onClick:r,className:"bg-green-600 text-white px-10 py-4 rounded-2xl text-[12px] font-black uppercase tracking-[0.2em] hover:scale-105 active:scale-95 transition-all flex items-center gap-3 shadow-2xl",children:[h.jsx("i",{className:"fas fa-shopping-cart"})," Claim ",e.length," Box",e.length>1?"es":""]})]}),h.jsx("div",{className:"w-full max-w-6xl mb-6 px-4 print-hidden",children:h.jsxs("div",{className:"bg-indigo-900 rounded-[2rem] p-6 shadow-2xl flex flex-col lg:flex-row items-center justify-between gap-6 border-b-4 border-indigo-950 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 pointer-events-none",children:h.jsx("i",{className:"fas fa-football-ball text-[120px] rotate-12"})}),h.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto z-10",children:[h.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center text-white flex-shrink-0",children:h.jsx("i",{className:"fas fa-hand-holding-heart text-xl"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-indigo-300 text-[9px] font-black uppercase tracking-widest",children:"Charity Impact Goal"}),h.jsxs("h3",{className:"text-xl font-black text-white uppercase leading-none mt-1 whitespace-nowrap",children:["$",j.totalRaised," ",h.jsxs("span",{className:"text-indigo-400",children:["/ $",j.potentialTotal," Raised"]})]})]})]}),h.jsx("div",{className:"flex-grow flex flex-wrap justify-center gap-2 md:gap-4 px-4 border-l border-r border-white/5 z-10",children:M.isScoreChange?h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"px-4 py-2 bg-green-500/10 rounded-xl border border-green-500/20 text-center",children:[h.jsx("span",{className:"text-[8px] font-black text-green-400 uppercase block",children:"Score Change Prize"}),h.jsxs("span",{className:"text-sm font-black text-white",children:["$",M.perChange," ",h.jsxs("span",{className:"text-[10px] text-green-400",children:["(",M.multiplier,"x)"]})]})]}),h.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Charity"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(O=M.charity)==null?void 0:O.toFixed(0)]})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Q1"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(te=M.q1)==null?void 0:te.toFixed(0)]})]}),h.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Half"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(ve=M.half)==null?void 0:ve.toFixed(0)]})]}),h.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Q3"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(Ce=M.q3)==null?void 0:Ce.toFixed(0)]})]}),h.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Final"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(Ge=M.final)==null?void 0:Ge.toFixed(0)]})]}),h.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"text-[7px] font-black text-green-400 uppercase tracking-widest",children:"Charity"}),h.jsxs("span",{className:"text-xs md:text-sm font-black text-green-400",children:["$",(w=M.charity)==null?void 0:w.toFixed(0)]})]})]})}),h.jsxs("div",{className:"flex flex-wrap justify-center md:justify-end gap-3 flex-shrink-0 z-10",children:[h.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[h.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Money Committed"}),h.jsxs("span",{className:"text-base font-black text-indigo-200",children:["$",j.totalCommitted]})]}),h.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[h.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Raised So Far"}),h.jsxs("span",{className:"text-base font-black text-white",children:["$",j.totalRaised]})]}),h.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[h.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Boxes Left"}),h.jsx("span",{className:"text-base font-black text-white",children:j.remaining})]}),h.jsxs("div",{className:"px-4 py-2 bg-white/10 rounded-2xl border border-white/20 flex flex-col items-center min-w-[90px] backdrop-blur-sm bg-indigo-500/10",children:[h.jsx("span",{className:"text-[8px] font-black text-indigo-200 uppercase tracking-widest",children:"Cost/Box"}),h.jsxs("span",{className:"text-base font-black text-white",children:["$",n.costPerBox]})]})]})]})}),h.jsx("div",{className:"status-bar w-full max-w-2xl mb-6 px-4 print-hidden",children:h.jsxs("div",{className:"flex items-center justify-between bg-white border border-indigo-100 rounded-2xl p-4 shadow-sm",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Contest Availability"}),h.jsxs("p",{className:"text-xl font-black text-indigo-900 uppercase leading-none mt-1",children:[j.remaining," ",h.jsx("span",{className:"text-sm font-bold text-gray-400 ml-1",children:"Boxes Left"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("div",{className:"h-2 w-32 bg-gray-100 rounded-full overflow-hidden self-center",children:h.jsx("div",{className:`h-full transition-all duration-1000 ${j.remaining<10?"bg-red-500":"bg-indigo-500"}`,style:{width:`${j.assigned}%`}})}),h.jsxs("span",{className:"text-[10px] font-black text-indigo-900",children:[j.assigned,"% Full"]})]})]})}),h.jsx("div",{className:"w-full max-w-4xl space-y-6 px-4 mb-12",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"bg-indigo-50/50 p-6 md:p-8 rounded-[2rem] border border-indigo-100 backdrop-blur-sm print-hidden",children:[h.jsxs("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-6 flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-info-circle text-indigo-400"})," Box Status Legend"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-xl border border-green-100",children:[h.jsx("i",{className:"fas fa-check-circle text-green-600"}),h.jsx("span",{className:"font-black text-green-900 uppercase text-[9px]",children:"Fully Paid"})]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-xl border border-orange-100",children:[h.jsx("i",{className:"fas fa-dot-circle text-orange-500"}),h.jsx("span",{className:"font-black text-orange-900 uppercase text-[9px]",children:"Partial"})]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-100 rounded-xl border border-yellow-200",children:[h.jsx("i",{className:"fas fa-trophy text-yellow-600"}),h.jsx("span",{className:"font-black text-yellow-900 uppercase text-[9px]",children:"Winner"})]}),h.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-600 rounded-xl border border-indigo-700",children:[h.jsx("i",{className:"fas fa-shopping-cart text-white"}),h.jsx("span",{className:"font-black text-white uppercase text-[9px]",children:"In Cart"})]})]})]}),h.jsxs("div",{className:"bg-white border-2 border-green-100 p-6 md:p-8 rounded-[2rem] shadow-sm relative overflow-hidden",children:[h.jsx("div",{className:"absolute -top-4 -right-4 opacity-5 rotate-12",children:h.jsx("i",{className:"fas fa-trophy text-6xl text-green-600"})}),h.jsxs("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-6 flex items-center gap-2 relative z-10",children:[h.jsx("i",{className:"fas fa-trophy text-green-500"})," Live Winner Breakdown"]}),fe.length===0?h.jsx("div",{className:"h-24 flex flex-col items-center justify-center border-2 border-dashed border-gray-100 rounded-2xl",children:h.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Awaiting Kickoff"})}):h.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto scrollbar-hide",children:fe.map((R,F)=>h.jsxs("div",{className:`p-3 rounded-xl flex items-center justify-between border-b last:border-0 ${F===0?"bg-green-50 border-green-200":"bg-gray-50 border-gray-100"}`,children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-[8px] font-black uppercase text-indigo-400 w-12",children:R.label}),h.jsx("span",{className:"text-xs font-black text-indigo-900",children:R.winner})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("p",{className:"text-[10px] font-black text-gray-950",children:["$",R.payout.toFixed(0)]}),h.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase leading-none mt-0.5",children:["Score: ",R.score]})]})]},F))})]})]})})]})},iT=({squares:t,participants:e,settings:n,onUpdateSquare:s,onUpdateParticipant:l,onUnassignSquare:r,onClearUserBoxes:u,onApplyPayment:p,onEditPayment:y,onDeletePayment:m,onApplyUnappliedPayments:v})=>{const[_,E]=z.useState(""),[T,N]=z.useState(null),[D,k]=z.useState(null),[G,X]=z.useState(null),[j,M]=z.useState(null),[fe,ie]=z.useState(null),[oe,xe]=z.useState(""),[ce,Ie]=z.useState("Cash"),[qe,Ye]=z.useState(""),[ue,Je]=z.useState(""),[Fe,O]=z.useState({name:"",email:"",phone:"",alias:""}),te=(n==null?void 0:n.costPerBox)||10,ve=z.useMemo(()=>e||[],[e]),Ce=z.useMemo(()=>t||[],[t]),Ge=z.useMemo(()=>ve.map(Y=>{const ge=Ce.filter(ee=>ee.participantId===Y.id),ke=(Y.paymentHistory||[]).reduce((ee,J)=>ee+J.amount,0),xt=ge.length*te,Vt=ge.reduce((ee,J)=>ee+(J.paidAmount||0),0),kt=Math.min(ke,xt),L=Math.max(0,kt-Vt);return{...Y,boxCount:ge.length,totalPaid:ke,totalOwed:xt,appliedTotal:Vt,unapplied:L,squareIds:ge.map(ee=>ee.id)}}).sort((Y,ge)=>(Y.alias||"").localeCompare(ge.alias||"")),[Ce,ve,te]),w=z.useMemo(()=>{const Y=[];return Ge.forEach(ge=>{(ge.paymentHistory||[]).forEach(ke=>{Y.push({pAlias:ge.alias,pName:ge.name,pEmail:ge.email,pPhone:ge.phone,pId:ge.id,t:ke})})}),Y.sort((ge,ke)=>ke.t.timestamp-ge.t.timestamp)},[Ge]),R=z.useMemo(()=>{if(!ue)return null;const ge=new Date(`${ue}T00:00:00`).getTime();return Number.isNaN(ge)?null:ge},[ue]),F=z.useMemo(()=>R?w.filter(({t:Y})=>Y.timestamp>=R):w,[w,R]),W=z.useMemo(()=>{const Y=Ce.filter(ke=>ke.assigned).length*te,ge=Ge.reduce((ke,xt)=>ke+(xt.totalPaid||0),0);return{totalDue:Y,totalCollected:ge,outstanding:Math.max(0,Y-ge),percentCollected:Y>0?ge/Y*100:0}},[Ce,te,Ge]),q=Ge.filter(Y=>(Y.name||"").toLowerCase().includes(_.toLowerCase())||(Y.alias||"").toLowerCase().includes(_.toLowerCase())),ne=()=>{if(w.length===0)return;const Y=["Timestamp","Alias","Full Name","Email","Phone","Amount","Method"],ge=w.map(({pAlias:L,pName:ee,pEmail:J,pPhone:le,t:he})=>[new Date(he.timestamp).toLocaleString().replace(",",""),L,ee,J,le,he.amount.toFixed(2),he.method]),ke=[Y,...ge].map(L=>L.join(",")).join(`
`),xt=new Blob([ke],{type:"text/csv;charset=utf-8;"}),Vt=URL.createObjectURL(xt),kt=document.createElement("a");kt.setAttribute("href",Vt),kt.setAttribute("download",`payouts_audit_${new Date().toISOString().split("T")[0]}.csv`),kt.click()},re=()=>{if(F.length===0)return;const Y=["Timestamp","Alias","Full Name","Email","Phone","Amount","Method"],ge=F.map(({pAlias:ee,pName:J,pEmail:le,pPhone:he,t:Te})=>[new Date(Te.timestamp).toLocaleString().replace(",",""),ee,J,le,he,Te.amount.toFixed(2),Te.method]),ke=[Y,...ge].map(ee=>ee.join(",")).join(`
`),xt=new Blob([ke],{type:"text/csv;charset=utf-8;"}),Vt=URL.createObjectURL(xt),kt=document.createElement("a");kt.setAttribute("href",Vt);const L=ue||new Date().toISOString().split("T")[0];kt.setAttribute("download",`transactions_since_${L}.csv`),kt.click()},be=Y=>{const ge=Math.max(0,(Y.totalOwed||0)-(Y.totalPaid||0));N(Y),ie(null),xe(ge>0?ge.toString():""),Ie("Cash"),Ye("")},Pe=(Y,ge)=>{N(Y),ie(ge.id),xe(ge.amount.toString()),Ie(ge.method),Ye(ge.note||"")},rt=Y=>{M(Y),O({name:Y.name,email:Y.email,phone:Y.phone,alias:Y.alias.toUpperCase()})},yt=Y=>{if(Y.preventDefault(),!T)return;const ge=parseFloat(oe);!isNaN(ge)&&ge>=0&&(fe?y(T.id,fe,ge,ce,qe):p(T.id,ge,ce,qe),N(null),ie(null),Ye(""))},Jt=Y=>{Y.preventDefault(),j&&(l(j.id,{...Fe,alias:Fe.alias.toUpperCase()}),M(null))},Dt=()=>{!T||!fe||window.confirm(`Delete this $${oe} entry for ${T.alias}?`)&&(m(T.id,fe),N(null),ie(null))},ln=Y=>{const ge=Y.replace(/[^\d]/g,""),ke=ge.length;return ke<4?ge:ke<7?`(${ge.slice(0,3)}) ${ge.slice(3)}`:`(${ge.slice(0,3)}) ${ge.slice(3,6)}-${ge.slice(6,10)}`};return h.jsxs("div",{className:"space-y-6 md:space-y-12 pb-24",children:[h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6",children:[h.jsxs("div",{className:"bg-indigo-900 p-4 md:p-6 rounded-2xl md:rounded-3xl text-white shadow-xl",children:[h.jsx("p",{className:"text-indigo-300 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Total Pledged"}),h.jsxs("p",{className:"text-xl md:text-4xl font-black",children:["$",W.totalDue]})]}),h.jsxs("div",{className:"bg-white border-2 border-green-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[h.jsx("p",{className:"text-green-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Collected"}),h.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",W.totalCollected]})]}),h.jsxs("div",{className:"bg-white border-2 border-orange-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[h.jsx("p",{className:"text-orange-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Outstanding"}),h.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",W.outstanding]})]}),h.jsxs("div",{className:"bg-indigo-50 p-4 md:p-6 rounded-2xl md:rounded-3xl flex items-center justify-center gap-2",children:[h.jsxs("span",{className:"text-xl md:text-2xl font-black text-indigo-900",children:[Math.round(W.percentCollected),"%"]}),h.jsxs("span",{className:"text-[7px] md:text-[9px] font-black text-gray-400 uppercase leading-none",children:["Goal",h.jsx("br",{}),"Progress"]})]})]}),h.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl md:rounded-[2.5rem] overflow-hidden shadow-xl",children:[h.jsxs("div",{className:"p-4 md:p-8 border-b bg-gray-50 flex flex-col md:flex-row justify-between items-center gap-4",children:[h.jsx("h3",{className:"text-lg md:text-xl font-black text-gray-900 uppercase",children:"Participant Roster"}),h.jsx("div",{className:"relative w-full md:w-64",children:h.jsx("input",{type:"text",placeholder:"Filter names...",value:_,onChange:Y=>E(Y.target.value),className:"w-full pl-4 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-sm outline-none focus:border-indigo-500"})})]}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-gray-50 text-[8px] md:text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100",children:[h.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Player"}),h.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Money Status"}),h.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5 text-right",children:"Actions"})]})}),h.jsx("tbody",{className:"divide-y divide-gray-50",children:q.map(Y=>{const ge=Math.max(0,(Y.totalOwed||0)-(Y.totalPaid||0));return h.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors",children:[h.jsxs("td",{className:"px-4 md:px-8 py-4",children:[h.jsx("p",{className:"font-black text-xs md:text-sm text-gray-900 truncate max-w-[120px]",children:Y.alias.toUpperCase()||"GUEST"}),h.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:[Y.boxCount||0," Boxes"]})]}),h.jsx("td",{className:"px-4 md:px-8 py-4",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("span",{className:`text-xs md:text-sm font-black ${ge===0?"text-green-600":"text-indigo-900"}`,children:["$",Y.totalPaid||0]}),ge>0&&h.jsxs("span",{className:"text-[8px] text-red-500 font-bold uppercase",children:["Due: $",ge]}),Y.unapplied>0&&h.jsxs("span",{className:"text-[8px] text-orange-600 font-bold uppercase",children:["Unapplied: $",Y.unapplied.toFixed(2)]})]})}),h.jsx("td",{className:"px-4 md:px-8 py-4 text-right",children:h.jsxs("div",{className:"flex justify-end gap-2",children:[h.jsx("button",{onClick:()=>X(Y),className:"bg-orange-50 text-orange-600 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-orange-500 hover:text-white transition-all shadow-sm",title:"Manage Boxes",children:h.jsx("i",{className:"fas fa-th text-xs"})}),h.jsx("button",{onClick:()=>rt(Y),className:"bg-gray-100 text-gray-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-indigo-900 hover:text-white transition-all shadow-sm",title:"Edit Profile",children:h.jsx("i",{className:"fas fa-user-edit text-xs"})}),h.jsx("button",{onClick:()=>k(Y),className:"bg-indigo-50 text-indigo-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-sm",title:"Payment History",children:h.jsx("i",{className:"fas fa-history text-xs"})}),Y.unapplied>0&&h.jsx("button",{onClick:()=>v(Y.id),className:"bg-yellow-50 text-yellow-700 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-yellow-500 hover:text-white transition-all shadow-sm",title:`Apply Unapplied Payments ($${Y.unapplied.toFixed(2)})`,children:h.jsx("i",{className:"fas fa-sync-alt text-xs"})}),h.jsxs("button",{onClick:()=>be(Y),className:"bg-green-600 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase shadow-lg shadow-green-100",children:[h.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]})})]},Y.id)})})]})})]}),h.jsxs("section",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between px-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center",children:h.jsx("i",{className:"fas fa-receipt text-xs"})}),h.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Global Audit Trail"})]}),h.jsxs("button",{type:"button",onClick:ne,disabled:w.length===0,className:"bg-indigo-900 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all flex items-center gap-2 disabled:opacity-50",children:[h.jsx("i",{className:"fas fa-file-csv"})," Export CSV"]})]}),h.jsx("div",{className:"bg-white border border-gray-100 rounded-[2rem] md:rounded-[2.5rem] shadow-xl overflow-hidden",children:w.length===0?h.jsxs("div",{className:"py-20 text-center",children:[h.jsx("i",{className:"fas fa-receipt text-gray-200 text-4xl mb-4"}),h.jsx("p",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No transactions recorded"})]}):h.jsx("div",{className:"divide-y divide-gray-50 max-h-[500px] overflow-y-auto scrollbar-hide",children:w.map(({pAlias:Y,pId:ge,t:ke})=>h.jsxs("div",{className:"p-5 md:p-6 flex flex-col hover:bg-indigo-50 transition-all group cursor-pointer",onClick:()=>{const xt=Ge.find(Vt=>Vt.id===ge);xt&&Pe(xt,ke)},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0 ${ke.method==="Venmo"?"bg-blue-50 text-blue-500":ke.method==="PayPal"?"bg-[#003087] text-white":ke.method==="Cash"?"bg-green-50 text-green-600":"bg-indigo-50 text-indigo-600"}`,children:h.jsx("i",{className:`fas ${ke.method==="Venmo"?"fa-vimeo-v":ke.method==="PayPal"?"fa-paypal":ke.method==="Cash"?"fa-money-bill-wave":"fa-credit-card"} text-xs`})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-xs font-black text-indigo-900 uppercase",children:Y.toUpperCase()}),h.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:[ke.method,"  ",new Date(ke.timestamp).toLocaleString()]})]})]}),h.jsxs("div",{className:"text-right flex items-center gap-4 flex-shrink-0",children:[h.jsx("div",{className:"flex flex-col items-end",children:h.jsxs("p",{className:"text-sm md:text-base font-black text-indigo-900",children:["$",ke.amount.toFixed(2)]})}),h.jsx("i",{className:"fas fa-chevron-right text-gray-200 text-xs"})]})]}),ke.note&&h.jsx("p",{className:"text-[9px] text-gray-500 italic mt-2 ml-14",children:ke.note})]},ke.id))})})]}),h.jsxs("section",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between px-4 gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center",children:h.jsx("i",{className:"fas fa-calendar-alt text-xs"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"New Transactions Report"}),h.jsx("p",{className:"text-[9px] text-gray-400 font-bold uppercase mt-1",children:"Payments since a selected date"})]})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[h.jsxs("div",{className:"flex flex-col",children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400",children:"Start Date"}),h.jsx("input",{type:"date",value:ue,onChange:Y=>Je(Y.target.value),className:"px-3 py-2 bg-white border border-gray-200 rounded-xl text-xs font-bold"})]}),h.jsxs("button",{type:"button",onClick:re,disabled:F.length===0,className:"bg-indigo-900 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all flex items-center gap-2 disabled:opacity-50",children:[h.jsx("i",{className:"fas fa-file-csv"})," Export CSV"]})]})]}),h.jsx("div",{className:"bg-white border border-gray-100 rounded-[2rem] md:rounded-[2.5rem] shadow-xl overflow-hidden",children:F.length===0?h.jsxs("div",{className:"py-20 text-center",children:[h.jsx("i",{className:"fas fa-calendar-times text-gray-200 text-4xl mb-4"}),h.jsx("p",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No transactions for this date range"})]}):h.jsx("div",{className:"divide-y divide-gray-50 max-h-[500px] overflow-y-auto scrollbar-hide",children:F.map(({pAlias:Y,pId:ge,t:ke,pName:xt,pEmail:Vt,pPhone:kt})=>h.jsx("div",{className:"p-5 md:p-6 flex flex-col hover:bg-indigo-50 transition-all group",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0 ${ke.method==="Venmo"?"bg-blue-50 text-blue-500":ke.method==="PayPal"?"bg-[#003087] text-white":ke.method==="Cash"?"bg-green-50 text-green-600":"bg-indigo-50 text-indigo-600"}`,children:h.jsx("i",{className:`fas ${ke.method==="Venmo"?"fa-vimeo-v":ke.method==="PayPal"?"fa-paypal":ke.method==="Cash"?"fa-money-bill-wave":"fa-credit-card"} text-xs`})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-xs font-black text-indigo-900 uppercase",children:Y.toUpperCase()}),h.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:[ke.method,"  ",new Date(ke.timestamp).toLocaleString()]}),h.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase mt-0.5",children:[xt,"  ",Vt,"  ",kt]})]})]}),h.jsxs("div",{className:"text-right flex items-center gap-4 flex-shrink-0",children:[h.jsx("div",{className:"flex flex-col items-end",children:h.jsxs("p",{className:"text-sm md:text-base font-black text-indigo-900",children:["$",ke.amount.toFixed(2)]})}),h.jsx("i",{className:"fas fa-chevron-right text-gray-200 text-xs"})]})]})},ke.id))})})]}),D&&h.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[h.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"font-black uppercase text-sm",children:[D.alias,"'s History"]}),h.jsxs("p",{className:"text-[9px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:["Total: $",D.totalPaid]})]}),h.jsx("button",{onClick:()=>k(null),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:h.jsx("i",{className:"fas fa-times"})})]}),h.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-3 scrollbar-hide",children:!D.paymentHistory||D.paymentHistory.length===0?h.jsx("div",{className:"py-12 text-center text-gray-400 italic text-xs",children:"No transactions."}):D.paymentHistory.slice().reverse().map(Y=>h.jsxs("div",{onClick:()=>{k(null),Pe(D,Y)},className:"bg-gray-50 border border-gray-100 p-4 rounded-2xl flex flex-col group cursor-pointer hover:border-indigo-200 transition-all",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-black text-indigo-900",children:["$",Y.amount.toFixed(2)]}),h.jsxs("div",{className:"flex gap-2 mt-1",children:[h.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:Y.method}),h.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:new Date(Y.timestamp).toLocaleDateString()})]})]}),h.jsx("i",{className:"fas fa-edit text-indigo-200 group-hover:text-indigo-500 transition-colors"})]}),Y.note&&h.jsx("p",{className:"text-[9px] text-gray-600 italic mt-2 pt-2 border-t border-gray-200",children:Y.note})]},Y.id))}),h.jsx("div",{className:"p-6 border-t border-gray-100",children:h.jsx("button",{onClick:()=>k(null),className:"w-full py-4 bg-gray-50 rounded-2xl font-black text-[10px] uppercase text-gray-400 tracking-widest hover:bg-gray-100 transition-all",children:"Close"})})]})}),G&&h.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:h.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[h.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"font-black uppercase text-sm",children:["Manage ",G.alias,"'s Boxes"]}),h.jsxs("p",{className:"text-[9px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:[G.boxCount," box",G.boxCount!==1?"es":""]})]}),h.jsx("button",{onClick:()=>X(null),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:h.jsx("i",{className:"fas fa-times"})})]}),h.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-3 scrollbar-hide",children:[h.jsx("div",{className:"flex justify-end mb-2",children:h.jsxs("button",{onClick:()=>{u(G.id),X(null)},className:"px-4 py-2 bg-red-50 text-red-500 font-black uppercase text-[8px] rounded-lg hover:bg-red-500 hover:text-white transition-all border border-red-100",children:[h.jsx("i",{className:"fas fa-trash-alt mr-2"})," Remove All Boxes"]})}),!G.squareIds||G.squareIds.length===0?h.jsx("div",{className:"py-12 text-center text-gray-400 italic text-xs",children:"No boxes assigned."}):G.squareIds.map(Y=>{const ge=Ce[Y];return h.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-4 rounded-2xl flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm font-black text-indigo-900 uppercase",children:["Box #",Y+1]}),h.jsx("div",{className:"flex gap-2 mt-1",children:h.jsxs("span",{className:`text-[8px] font-black uppercase px-2 py-0.5 rounded-md ${ge.paidAmount>=n.costPerBox?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:["$",ge.paidAmount," Paid"]})})]}),h.jsx("button",{onClick:()=>r(Y),className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all shadow-sm",children:h.jsx("i",{className:"fas fa-trash-alt text-xs"})})]},Y)})]}),h.jsx("div",{className:"p-6 border-t border-gray-100",children:h.jsx("button",{onClick:()=>X(null),className:"w-full py-4 bg-gray-50 rounded-2xl font-black text-[10px] uppercase text-gray-400 tracking-widest hover:bg-gray-100 transition-all",children:"Close"})})]})}),j&&h.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:h.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95",children:[h.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[h.jsx("h3",{className:"font-black uppercase text-sm",children:"Edit Participant"}),h.jsx("button",{onClick:()=>M(null),children:h.jsx("i",{className:"fas fa-times"})})]}),h.jsxs("form",{onSubmit:Jt,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Full Name"}),h.jsx("input",{required:!0,onFocus:Y=>Y.target.select(),value:Fe.name,onChange:Y=>O({...Fe,name:Y.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Email"}),h.jsx("input",{required:!0,type:"email",onFocus:Y=>Y.target.select(),value:Fe.email,onChange:Y=>O({...Fe,email:Y.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Phone"}),h.jsx("input",{required:!0,type:"tel",onFocus:Y=>Y.target.select(),value:Fe.phone,onChange:Y=>O({...Fe,phone:ln(Y.target.value)}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Alias"}),h.jsx("input",{required:!0,maxLength:16,onFocus:Y=>Y.target.select(),value:Fe.alias,onChange:Y=>O({...Fe,alias:Y.target.value.toUpperCase()}),className:"w-full p-3 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs shadow-xl mt-4",children:"Update Profile"})]})]})}),T&&h.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:h.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in slide-in-from-bottom-6 max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:`p-6 text-white flex justify-between items-center sticky top-0 ${fe?"bg-orange-500":"bg-indigo-900"}`,children:[h.jsx("h3",{className:"font-black uppercase text-sm",children:fe?"Edit Entry":"Add Entry"}),h.jsx("button",{onClick:()=>{N(null),ie(null),Ye("")},children:h.jsx("i",{className:"fas fa-times"})})]}),h.jsxs("form",{onSubmit:yt,className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Amount ($)"}),h.jsx("input",{required:!0,autoFocus:!0,type:"number",step:"0.01",value:oe,onChange:Y=>xe(Y.target.value),className:"w-full p-4 bg-gray-50 rounded-xl font-black text-lg outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Method"}),h.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Cash","Venmo","PayPal","Zelle","Other"].map(Y=>h.jsx("button",{type:"button",onClick:()=>Ie(Y),className:`py-3 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${ce===Y?"bg-indigo-900 border-indigo-900 text-white":"bg-white border-gray-100 text-gray-400"}`,children:Y},Y))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Note (optional)"}),h.jsx("textarea",{value:qe,onChange:Y=>Ye(Y.target.value),placeholder:"e.g., 'Cash payment during meeting'",className:"w-full p-3 bg-gray-50 rounded-xl font-medium text-sm outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:3})]}),h.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[h.jsx("button",{type:"submit",className:`w-full text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs shadow-xl ${fe?"bg-orange-500":"bg-green-600"}`,children:fe?"Save Changes":"Log Payment"}),fe&&h.jsx("button",{type:"button",onClick:Dt,className:"w-full bg-red-50 text-red-500 py-4 rounded-xl font-black uppercase tracking-widest text-[10px] hover:bg-red-500 hover:text-white transition-all border border-red-100",children:"Delete Entry"})]})]})]})})]})},Sv=({activePool:t,settings:e,onAddScore:n,onUpdateScore:s,onDeleteScore:l,isAdmin:r})=>{const[u,p]=z.useState(""),[y,m]=z.useState(""),[v,_]=z.useState("Score Update"),[E,T]=z.useState(null),[N,D]=z.useState(null),{scores:k=[],squares:G=[]}=t,{payouts:X,costPerBox:j,rowNumbers:M,colNumbers:fe}=e,ie=z.useMemo(()=>G.length*j,[G.length,j]),oe=z.useMemo(()=>X.charityPayoutType==="fixed"?X.charityFixedAmount||0:ie*(X.charityPercent/100),[ie,X.charityPercent,X.charityPayoutType,X.charityFixedAmount]),xe=ie-oe,ce=(ue,Je)=>{const Fe=ue%10,O=Je%10,te=(M||[]).indexOf(Fe),ve=(fe||[]).indexOf(O);if(te===-1||ve===-1)return null;const Ce=G.find(Ge=>Ge.row===te&&Ge.col===ve);return Ce?{alias:Ce.assigned?Ce.alias:"Unassigned",id:Ce.id,assigned:Ce.assigned}:null},Ie=z.useMemo(()=>(k||[]).map((ue,Je)=>{const Fe=ce(ue.teamAScore,ue.teamBScore);let O=0;if(X.mode==="standard")if(X.standardPayoutType==="fixed")O=X.standardSplits[ue.label.toLowerCase()]||0;else{const te=X.standardSplits[ue.label.toLowerCase()]||0;O=xe*(te/100)}else{const te=ue.teamAScore===0&&ue.teamBScore===0,ve=k.slice(0,Je).some(Ce=>Ce.teamAScore===0&&Ce.teamBScore===0);if(te&&!ve&&X.scoreChangeInitialRefund!==!1)O=j;else if(ue.label==="Final")O=xe;else{const Ce=X.scoreChangeMultiplier||3;X.scoreChangeAppliesTo==="totalPot"?O=ie*Ce:O=j*Ce}}return{...ue,winner:Fe,payout:O}}),[k,X,xe,j,M,fe,G,ie]),qe=ue=>{ue.preventDefault(),D(null);const Je=parseInt(u),Fe=parseInt(y);if(isNaN(Je)||isNaN(Fe)){D("Invalid scores.");return}E?(s({id:E,teamAScore:Je,teamBScore:Fe,label:v,timestamp:Date.now()}),T(null)):n({id:crypto.randomUUID(),teamAScore:Je,teamBScore:Fe,label:v,timestamp:Date.now()}),p(""),m("")},Ye=ue=>{T(ue.id),p(ue.teamAScore.toString()),m(ue.teamBScore.toString()),_(ue.label),D(null)};return h.jsxs("div",{className:"space-y-8 pb-12",children:[!r&&h.jsxs("div",{className:"bg-indigo-900 text-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:h.jsx("i",{className:"fas fa-sack-dollar text-[120px] rotate-12"})}),h.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsx("div",{className:"inline-block px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-indigo-300",children:"Live Contest Standings"}),h.jsxs("div",{className:"flex items-center gap-4",children:[e.teamALogo?h.jsx("img",{src:e.teamALogo,alt:e.teamA,className:"h-10 object-contain"}):h.jsx("div",{className:"h-10 w-10 rounded bg-indigo-100 flex items-center justify-center font-black text-indigo-700",children:(e.teamA||"").slice(0,2).toUpperCase()}),h.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black tracking-tighter truncate leading-tight",children:["Pot: $",ie]}),e.teamBLogo?h.jsx("img",{src:e.teamBLogo,alt:e.teamB,className:"h-10 object-contain ml-4"}):h.jsx("div",{className:"ml-4 h-10 w-10 rounded bg-indigo-100 flex items-center justify-center font-black text-indigo-700",children:(e.teamB||"").slice(0,2).toUpperCase()})]}),h.jsxs("p",{className:"text-indigo-300 text-sm font-medium uppercase tracking-widest italic opacity-80 truncate",children:["Supporting ",e.charityName]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase mb-1",children:"Charity"}),h.jsxs("p",{className:"text-xl font-black",children:["$",oe.toFixed(0)]})]}),h.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[h.jsx("p",{className:"text-[9px] font-black text-green-400 uppercase mb-1",children:"Players"}),h.jsxs("p",{className:"text-xl font-black",children:["$",xe.toFixed(0)]})]})]})]})]}),r&&h.jsxs("section",{className:`bg-indigo-50/50 p-8 rounded-[3rem] border-2 transition-all ${E?"border-orange-500 bg-orange-50/20":"border-indigo-100"}`,children:[h.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest mb-6",children:"Log Live Score Change"}),h.jsxs("form",{onSubmit:qe,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:[e.teamA," Score"]}),h.jsx("input",{type:"number",required:!0,value:u,onChange:ue=>p(ue.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-2xl outline-none",placeholder:"0"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:[e.teamB," Score"]}),h.jsx("input",{type:"number",required:!0,value:y,onChange:ue=>m(ue.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-2xl outline-none",placeholder:"0"})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Label"}),h.jsxs("select",{value:v,onChange:ue=>_(ue.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-sm outline-none",children:[h.jsx("option",{value:"Score Update",children:"Score Update"}),h.jsx("option",{value:"Q1",children:"End of Q1"}),h.jsx("option",{value:"Half",children:"Halftime"}),h.jsx("option",{value:"Q3",children:"End of Q3"}),h.jsx("option",{value:"Final",children:"Final Score"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{type:"submit",className:`flex-grow py-4 rounded-xl font-black uppercase text-[10px] text-white ${E?"bg-orange-500":"bg-indigo-900"}`,children:E?"Save":"Log"}),E&&h.jsx("button",{onClick:()=>T(null),className:"px-4 py-4 bg-white text-gray-400 rounded-xl font-black text-[10px] uppercase",children:"X"})]})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-[0.2em] px-4",children:"Match Timeline"}),Ie.length===0?h.jsx("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-[3rem] py-24 text-center",children:h.jsx("p",{className:"text-gray-400 font-black uppercase text-xs tracking-widest italic",children:"Game in progress... Waiting for first score."})}):h.jsx("div",{className:"grid grid-cols-1 gap-4",children:Ie.slice().reverse().map(ue=>{var Je;return h.jsxs("div",{className:"bg-white border border-gray-100 rounded-[2.5rem] p-6 flex flex-col md:flex-row items-center justify-between gap-6 shadow-sm",children:[h.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[h.jsxs("div",{className:"text-center px-6 py-4 rounded-[2rem] bg-indigo-50 border border-indigo-100 min-w-[100px]",children:[h.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest mb-1 text-gray-400",children:ue.label}),h.jsxs("p",{className:"text-2xl font-black tabular-nums",children:[ue.teamAScore," - ",ue.teamBScore]})]}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Square Holder"}),h.jsx("h4",{className:"text-lg font-black uppercase truncate text-indigo-950",children:((Je=ue.winner)==null?void 0:Je.alias)||"Missing Axis #s"}),ue.winner&&h.jsxs("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-black uppercase",children:["Box #",ue.winner.id+1]})]})]}),h.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[h.jsxs("div",{className:"text-right",children:[h.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Payout"}),h.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["$",ue.payout.toFixed(0)]})]}),r&&h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>Ye(ue),className:"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center",children:h.jsx("i",{className:"fas fa-edit"})}),h.jsx("button",{onClick:()=>l(ue.id),className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center",children:h.jsx("i",{className:"fas fa-trash"})})]})]})]},ue.id)})})]})]})},sT=({activePoolId:t,poolSettings:e,globalSettings:n,onUpdatePoolSettings:s,onUpdateActivePool:l,onUpdateGlobalSettings:r,onResetGrid:u,onDeletePool:p,onGenerateNumbers:y,squares:m,participants:v,allParticipants:_,onUpdateSquare:E,onUpdateParticipant:T,onUnassignSquare:N,onClearUserBoxes:D,onApplyPayment:k,onEditPayment:G,onDeletePayment:X,onApplyUnappliedPayments:j,onApplyUnappliedPaymentsAll:M,onDeleteParticipant:fe,onForceDeleteParticipant:ie,onAddScore:oe,onUpdateScore:xe,onDeleteScore:ce,onReapplyPayments:Ie,onRebuildGlobalParticipants:qe,scores:Ye,pools:ue,onSwitchPool:Je,onCreatePool:Fe,fullState:O,onImportState:te,onSendTestNotification:ve})=>{var mn,Ai,mo,$a,Ja,bl,is,go,wi,Ii,ss,Ri,zt,Tl,Sl,_i,Mi;const[Ce,Ge]=z.useState("overview"),[w,R]=z.useState(!1),[F,W]=z.useState(!1),[q,ne]=z.useState(!0),[re,be]=z.useState(""),[Pe,rt]=z.useState(null),yt=z.useRef(null),Jt=S=>{const K=[...(L==null?void 0:L.participants)||[]];K.find(se=>se.id===S.id)||K.push(S),l({participants:K})},[Dt,ln]=z.useState({name:"",teamA:"NFC",teamB:"AFC",costPerBox:10}),[Y,ge]=z.useState({name:"",email:"",phone:"",alias:""}),[ke,xt]=z.useState((n==null?void 0:n.teamALogo)||""),[Vt,kt]=z.useState((n==null?void 0:n.teamBLogo)||"");Mf.useEffect(()=>{xt((n==null?void 0:n.teamALogo)||""),kt((n==null?void 0:n.teamBLogo)||"")},[n==null?void 0:n.teamALogo,n==null?void 0:n.teamBLogo]);const L=(ue||[]).find(S=>S.id===t),ee=S=>(S||[]).join(", "),J=S=>S.split(/[,;\n]/).map(K=>K.trim()).filter(Boolean),le=S=>{const K=J(S),se=[],me=K.map(_e=>_e.toLowerCase()).filter(_e=>{const Oe=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_e);return Oe||se.push(_e),Oe});return{list:me,invalid:se,normalized:me.join(", ")}},he=S=>{const K=J(S),se=[],me=[];return K.forEach(_e=>{const Oe=_e.replace(/\D/g,"");if(Oe.length<10||Oe.length>15){se.push(_e);return}const Se=_e.trim().startsWith("+")?`+${Oe}`:Oe.length===10?`+1${Oe}`:`+${Oe}`;me.push(Se)}),{list:me,invalid:se,normalized:me.join(", ")}},[Te,ae]=z.useState(ee(n==null?void 0:n.notificationEmails)),[pe,Me]=z.useState(ee(n==null?void 0:n.notificationPhones)),[je,Ne]=z.useState(ee(e==null?void 0:e.notificationEmails)),[Le,nt]=z.useState(ee(e==null?void 0:e.notificationPhones));z.useEffect(()=>{ae(ee(n==null?void 0:n.notificationEmails)),Me(ee(n==null?void 0:n.notificationPhones))},[n==null?void 0:n.notificationEmails,n==null?void 0:n.notificationPhones]),z.useEffect(()=>{Ne(ee(e==null?void 0:e.notificationEmails)),nt(ee(e==null?void 0:e.notificationPhones))},[e==null?void 0:e.notificationEmails,e==null?void 0:e.notificationPhones]);const Re=z.useMemo(()=>le(je),[je]),at=z.useMemo(()=>he(Le),[Le]),ct=z.useMemo(()=>le(Te),[Te]),Bn=z.useMemo(()=>he(pe),[pe]),li=z.useMemo(()=>{const S=re.trim().toLowerCase();if(!S)return[];const K=new Map;(_||[]).forEach(me=>K.set(me.id,me)),(ue||[]).forEach(me=>(me.participants||[]).forEach(_e=>{K.has(_e.id)||K.set(_e.id,_e)}));const se=[];return(ue||[]).forEach(me=>{const _e=(me.squares||[]).filter(Ke=>Ke.assigned&&(Ke.alias||"").trim().toLowerCase().includes(S));if(_e.length===0)return;const Oe=_e.map(Ke=>Ke.id).sort((Ke,ot)=>Ke-ot),Se=new Map;_e.forEach(Ke=>{if(!Ke.participantId)return;const ot=K.get(Ke.participantId);if(!ot)return;const Ae=`${ot.name||""}|${ot.email||""}|${ot.phone||""}`;Se.has(Ae)||Se.set(Ae,{name:ot.name,email:ot.email,phone:ot.phone})}),se.push({poolId:me.id,poolName:me.name||me.id,boxIds:Oe,contacts:Array.from(Se.values())})}),se},[re,ue,_]),ai=S=>new Promise((K,se)=>{const me=new FileReader;me.onload=()=>K(String(me.result)),me.onerror=se,me.readAsDataURL(S)}),Be=(S,K=6e3)=>new Promise(se=>{if(!S)return se(!1);const me=new Image;let _e=!1;const Oe=()=>{_e||(_e=!0,se(!0),Ke())},Se=()=>{_e||(_e=!0,se(!1),Ke())},Ke=()=>{me.onload=null,me.onerror=null,clearTimeout(ot)};me.onload=Oe,me.onerror=Se;const ot=setTimeout(Se,K);me.src=S}),Ft=()=>new Promise(S=>{if(window.Dropbox)return S();const K=document.createElement("script");K.src="https://www.dropbox.com/static/api/2/dropins.js",K.id="dropboxjs",K.setAttribute("data-app-key",String((n==null?void 0:n.dropboxAppKey)||"")),K.onload=()=>S(),document.head.appendChild(K)}),wn=async(S,{maxWidth:K=800,maxHeight:se=800,maxBytes:me=15e4,mime:_e="image/webp",quality:Oe=.8}={})=>{try{if(!S.type||S.type==="image/svg+xml")return S;const Se=await ai(S),Ke=await new Promise((Qt,$n)=>{const sn=new Image;sn.onload=()=>Qt(sn),sn.onerror=$n,sn.src=Se});let{width:ot,height:Ae}=Ke;const ut=ot/Ae;ot>K&&(ot=K,Ae=Math.round(K/ut)),Ae>se&&(Ae=se,ot=Math.round(se*ut));const Ut=document.createElement("canvas");Ut.width=Math.max(1,Math.round(ot)),Ut.height=Math.max(1,Math.round(Ae));const Kt=Ut.getContext("2d");if(!Kt)return S;Kt.clearRect(0,0,Ut.width,Ut.height),Kt.drawImage(Ke,0,0,Ut.width,Ut.height);const On=(Qt,$n)=>new Promise(sn=>{if(!Ut.toBlob)return sn(null);Ut.toBlob(Jn=>sn(Jn),$n,Qt)});let Nt=Oe,dt=await On(Nt,_e);const os=S.type||"image/png",nn=.5;for(;dt&&dt.size>me&&Nt>nn;)Nt=Math.max(nn,Nt-.1),dt=await On(Nt,_e)||dt;if(dt&&dt.size>me&&_e!=="image/jpeg"){const Qt=await On(Math.min(.8,Nt),"image/jpeg");Qt&&Qt.size<dt.size&&(dt=Qt)}return dt&&dt.size<S.size?dt:S}catch(Se){return console.warn("optimizeImage failed, using original file",Se),S}},an=async(S,K,se)=>{try{const me=await wn(S),_e=await ai(me);if(me.size&&me.size<S.size&&console.log(`Logo optimized: ${S.size}  ${me.size} bytes`),me.size&&me.size>3e5&&!confirm("Optimized image is still large (>300KB). Save anyway?"))return;K==="global"?r(se==="A"?{teamALogo:_e}:{teamBLogo:_e}):s(se==="A"?{teamALogo:_e}:{teamBLogo:_e})}catch(me){console.error("Logo file -> dataURL failed",me),alert("Failed to process file.")}},Yn=async(S,K)=>{if(!(n!=null&&n.dropboxAppKey)){alert("Set a Dropbox App Key in Global settings first.");return}try{await Ft();const se={success:me=>{var Oe,Se,Ke;const _e=((Oe=me[0])==null?void 0:Oe.link)||((Se=me[0])==null?void 0:Se.thumbnailLink)||((Ke=me[0])==null?void 0:Ke.url);if(!_e){alert("Dropbox returned no usable link.");return}S==="global"?r(K==="A"?{teamALogo:_e}:{teamBLogo:_e}):s(K==="A"?{teamALogo:_e}:{teamBLogo:_e})},linkType:"direct",multiselect:!1,extensions:[".png",".jpg",".jpeg",".svg",".webp"]};window.Dropbox.choose(se)}catch(se){console.error(se),alert("Dropbox chooser failed to load.")}},pn=async(S,K,se,me="assets")=>{const[_e,Oe]=K.split("/");if(!_e||!Oe)throw new Error("Invalid repo (owner/repo)");const Se=await fetch(`https://api.github.com/repos/${_e}/${Oe}`,{headers:{Authorization:`token ${se}`}});if(!Se.ok)throw new Error("Failed to read repo info: "+await Se.text());const ot=(await Se.json()).default_branch||"main",Ae=await S.arrayBuffer(),ut=btoa(String.fromCharCode(...new Uint8Array(Ae))),Ut=`${me}/${Date.now()}_${S.name||"logo"}
`,Kt=await fetch(`https://api.github.com/repos/${_e}/${Oe}/contents/${encodeURIComponent(Ut)}`,{method:"PUT",headers:{Authorization:`token ${se}`,"Content-Type":"application/json"},body:JSON.stringify({message:`Add logo ${S.name||"logo"}`,content:ut,branch:ot})});if(!Kt.ok)throw new Error("GitHub upload failed: "+await Kt.text());return await Kt.json(),`https://raw.githubusercontent.com/${_e}/${Oe}/${ot}/${Ut}`},vi=async(S,K,se)=>{try{const me=n==null?void 0:n.githubToken,_e=n==null?void 0:n.githubRepo;if(!me||!_e){alert("Set GitHub token and repo in Global settings first.");return}const Oe=await wn(S),Se=await pn(Oe,_e,me);K==="global"?r(se==="A"?{teamALogo:Se}:{teamBLogo:Se}):s(se==="A"?{teamALogo:Se}:{teamBLogo:Se})}catch(me){console.error(me),alert("GitHub upload failed: "+((me==null?void 0:me.message)||me))}},Ni=async(S,K,se)=>!await Be(se)&&!confirm("Image failed to load  save anyway?")?!1:(S==="global"?r(K==="A"?{teamALogo:se}:{teamBLogo:se}):s(K==="A"?{teamALogo:se}:{teamBLogo:se}),!0),ho=S=>{const K=new Set,se=new Set,me=(S||[]).filter(Se=>Se!==null&&!isNaN(Se));me.forEach(Se=>{K.has(Se)&&se.add(Se),K.add(Se)});const _e=[];for(let Se=0;Se<=9;Se++)K.has(Se)||_e.push(Se);return{isValid:_e.length===0&&se.size===0&&me.length===10,missing:_e,duplicates:Array.from(se),count:me.length}},Os=z.useMemo(()=>ho(e.rowNumbers),[e.rowNumbers]),lu=z.useMemo(()=>ho(e.colNumbers),[e.colNumbers]),po=z.useMemo(()=>{const K=((e==null?void 0:e.costPerBox)||0)*100,se=e.payouts;let me=se.charityPayoutType==="fixed"?se.charityFixedAmount||0:se.charityPercent/100*K,_e=K-me;return{totalPot:K,charityAmount:me,playerPot:_e}},[e]),ja=S=>{S.preventDefault(),Dt.name.trim()&&(Fe(Dt.name,{teamA:Dt.teamA,teamB:Dt.teamB,costPerBox:Dt.costPerBox}),R(!1))},Ya=S=>{if(S.preventDefault(),!Y.name.trim())return;const K=Y.alias.trim().toLowerCase();if(K){const Oe=(L==null?void 0:L.participants)||[];if([..._||[],...Oe].some(ot=>(ot.alias||"").trim().toLowerCase()===K)){alert(`Alias "${Y.alias}" already exists. Aliases must be unique.`);return}}const se=Oe=>{if(!Oe)return"";const Se=Oe.replace(/\D/g,"");return Se.length===10?`(${Se.slice(0,3)}) ${Se.slice(3,6)}-${Se.slice(6)}`:Oe},me={id:crypto.randomUUID(),name:Y.name,email:Y.email,phone:se(Y.phone),alias:Y.alias,paymentHistory:[]},_e=[...(L==null?void 0:L.participants)||[],me];l({participants:_e}),typeof onCreateGlobalParticipant=="function"&&onCreateGlobalParticipant(me),ge({name:"",email:"",phone:"",alias:""}),W(!1)},vl=S=>{window.confirm("Are you sure you want to delete this person from the participant list?")&&fe(S)},_l=S=>{window.confirm("FORCE DELETE will remove this person and clear all their boxes. Continue?")&&ie(S)},El=(S,K,se)=>{var Ke;const me=S.target.value.replace(/[^0-9]/g,""),_e=me===""?null:parseInt(me,10),Oe=K==="row"?"rowNumbers":"colNumbers",Se=[...e[Oe]||Array(10).fill(null)];if(Se[se]=_e,s({[Oe]:Se}),me!==""&&se<9){const ot=S.target.closest(".axis-row"),Ae=ot==null?void 0:ot.querySelectorAll("input");(Ke=Ae==null?void 0:Ae[se+1])==null||Ke.focus()}},Cl=S=>{s({[S==="row"?"rowNumbers":"colNumbers"]:Array(10).fill(null)})},ri=({status:S})=>S.isValid?h.jsx("span",{className:"text-[8px] font-black text-green-500 uppercase bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:"Ready"}):h.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.duplicates.length>0&&h.jsxs("span",{className:"text-[8px] font-black text-red-500 uppercase bg-red-50 px-2 py-0.5 rounded-full border border-red-100",children:["Dupes: ",S.duplicates.join(",")]}),S.missing.length>0&&h.jsxs("span",{className:"text-[8px] font-black text-orange-500 uppercase bg-orange-50 px-2 py-0.5 rounded-full border border-orange-100",children:["Missing: ",S.missing.join(",")]})]}),tn=[{id:"overview",label:"Overview",icon:"fa-th-large"},{id:"pools",label:"Contests",icon:"fa-gamepad"},{id:"settings",label:"Grid Settings",icon:"fa-sliders-h"},{id:"axis",label:"Axis Numbers",icon:"fa-th"},{id:"participants",label:"Add Names",icon:"fa-users"},{id:"winners",label:"Winners",icon:"fa-trophy"},{id:"stats",label:"Players",icon:"fa-chart-bar"},{id:"global",label:"Organization",icon:"fa-cog"},{id:"danger",label:"Danger Zone",icon:"fa-exclamation-triangle"}];return h.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[h.jsx("header",{className:"bg-indigo-900 text-white sticky top-0 z-40 shadow-xl",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-6",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight",children:"Admin Control Panel"}),h.jsx("p",{className:"text-[10px] text-indigo-300 font-bold uppercase tracking-widest",children:"Master Grid Management"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>{const S=JSON.stringify(O,null,2),K="data:application/json;charset=utf-8,"+encodeURIComponent(S),se=document.createElement("a");se.setAttribute("href",K),se.setAttribute("download","grid-backup.json"),se.click()},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[h.jsx("i",{className:"fas fa-download mr-2"}),"Backup"]}),h.jsxs("button",{onClick:()=>{var S;return(S=yt.current)==null?void 0:S.click()},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[h.jsx("i",{className:"fas fa-upload mr-2"}),"Restore"]}),h.jsxs("button",{onClick:()=>{try{const S=O,K=(Ae,ut)=>{const Ut=Kt=>`"${String(Kt??"").replace(/"/g,'""')}"`;return[Ae.join(","),...ut.map(Kt=>Kt.map(Ut).join(","))].join(`
`)},me=(Ae=>Ae?Ae.pools&&Array.isArray(Ae.pools)?Ae.pools:Ae.pools&&typeof Ae.pools=="object"?Object.values(Ae.pools).map(ut=>({...ut,squares:Array.isArray(ut.squares)?ut.squares:ut.squares?Object.values(ut.squares):[],participants:ut.participants||[],settings:ut.settings||{costPerBox:10,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)}})):Array.isArray(Ae)?Ae:[Ae]:[])(S),_e=[],Oe=[];me.forEach(Ae=>{const ut=Ae.name||Ae.id||"Unnamed Pool",Ut=Ae.settings&&Ae.settings.costPerBox||10,Kt=Ae.squares||[],On=Ae.participants||[],Nt={};(Kt||[]).forEach((dt,os)=>{const nn=dt&&dt.participantId?dt.participantId:null;nn&&(Nt[nn]=Nt[nn]||[],Nt[nn].push(typeof dt.id=="number"?dt.id:dt.id||os))}),On.forEach(dt=>{const os=dt.id,nn=(Nt[os]||[]).slice().sort((Di,yo)=>Di-yo).map(Di=>typeof Di=="number"?Di+1:Di),Qt=nn.length,$n=Qt*Ut,sn=(dt.paymentHistory||[]).reduce((Di,yo)=>Di+(yo.amount||0),0),Jn=Math.max(0,$n-sn);_e.push([ut,dt.alias||"",dt.name||"",dt.email||"",dt.phone||"",Qt,nn.join(";"),Ut,$n,sn,Jn])}),Object.keys(Nt).forEach(dt=>{if(!(On||[]).find(nn=>nn.id===dt)){const nn=(Nt[dt]||[]).slice().sort((sn,Jn)=>sn-Jn).map(sn=>typeof sn=="number"?sn+1:sn),Qt=nn.length,$n=Qt*Ut;_e.push([ut,"","","","",Qt,nn.join(";"),Ut,$n,0,$n])}}),Oe.push([ut,Ae.settings&&Ae.settings.rowNumbers?Ae.settings.rowNumbers.join(";"):"",Ae.settings&&Ae.settings.colNumbers?Ae.settings.colNumbers.join(";"):""])});const Se=K(["Pool","Alias","Name","Email","Phone","BoxesPlayed","BoxIDs","CostPerBox","TotalDue","TotalPaid","Outstanding"],_e),Ke=K(["Pool","RowNumbers","ColNumbers"],Oe),ot=(Ae,ut,Ut="text/csv")=>{const Kt="data:"+Ut+";charset=utf-8,"+encodeURIComponent(ut),On=document.createElement("a");On.setAttribute("href",Kt),On.setAttribute("download",Ae),On.click()};ot("aging_report.csv",Se),ot("grid_numbers.csv",Ke)}catch(S){console.error(S),alert("Failed to generate aging report.")}},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[h.jsx("i",{className:"fas fa-file-csv mr-2"}),"Aging Report"]}),h.jsx("input",{type:"file",ref:yt,onChange:S=>{var me;const K=(me=S.target.files)==null?void 0:me[0];if(!K)return;const se=new FileReader;se.onload=_e=>{var Oe;try{const Se=JSON.parse((Oe=_e.target)==null?void 0:Oe.result);window.confirm("Overwrite ALL data with this backup?")&&te(Se)}catch{alert("Invalid JSON file.")}S.target.value=""},se.readAsText(K)},accept:".json",className:"hidden"})]})]})})}),h.jsxs("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto gap-6 p-4 md:p-6",children:[h.jsx("nav",{className:"w-full md:w-48 flex-shrink-0",children:h.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:tn.map(S=>h.jsxs("button",{onClick:()=>Ge(S.id),className:`w-full text-left px-6 py-4 font-black uppercase text-[11px] tracking-wide transition-all flex items-center gap-3 ${Ce===S.id?"bg-indigo-900 text-white":"text-indigo-900 hover:bg-indigo-50"}`,children:[h.jsx("i",{className:`fas ${S.icon} w-4 text-center`}),S.label]},S.id))})}),h.jsx("div",{className:"flex-1 min-w-0",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:p-10",children:[Ce==="overview"&&h.jsx("div",{className:"space-y-8",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase mb-6",children:"Financial Summary"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-indigo-50 p-6 rounded-3xl text-center flex flex-col justify-center",children:[h.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Projected Total Pot"}),h.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",po.totalPot]})]}),h.jsxs("div",{className:"bg-indigo-900 p-6 rounded-3xl text-center text-white flex flex-col justify-center shadow-xl",children:[h.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase tracking-widest mb-1",children:"Charity Portion"}),h.jsxs("p",{className:"text-4xl font-black",children:["$",po.charityAmount.toFixed(0)]})]}),h.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl text-center flex flex-col justify-center border border-green-100",children:[h.jsx("p",{className:"text-[9px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Player Pool"}),h.jsxs("p",{className:"text-4xl font-black text-green-700",children:["$",po.playerPot.toFixed(0)]})]})]})]})}),Ce==="pools"&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Active Contests"}),h.jsxs("button",{onClick:()=>R(!w),className:"bg-indigo-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100",children:[h.jsx("i",{className:`fas ${w?"fa-times":"fa-plus"} mr-2`})," ",w?"Cancel":"New Contest"]})]}),w?h.jsxs("form",{onSubmit:ja,className:"bg-indigo-50 p-8 rounded-3xl border border-indigo-100 space-y-6 animate-in slide-in-from-top-4",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Grid Name"}),h.jsx("input",{required:!0,value:Dt.name,onChange:S=>ln({...Dt,name:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"e.g. 2025 Big Game"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Cost Per Box ($)"}),h.jsx("input",{type:"number",required:!0,value:Dt.costPerBox,onChange:S=>ln({...Dt,costPerBox:Number(S.target.value)}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Vertical Team (Rows)"}),h.jsx("input",{required:!0,value:Dt.teamA,onChange:S=>ln({...Dt,teamA:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Horizontal Team (Cols)"}),h.jsx("input",{required:!0,value:Dt.teamB,onChange:S=>ln({...Dt,teamB:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]})]}),h.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Initialize Contest Grid"})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ue.map(S=>h.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center justify-between transition-all ${S.id===t?"bg-indigo-50 border-indigo-200 ring-2 ring-indigo-500/20":"bg-gray-50 border-gray-100"}`,children:[h.jsxs("div",{className:"truncate pr-4",children:[h.jsx("p",{className:"font-black text-indigo-900 uppercase text-xs truncate",children:S.name}),h.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase truncate",children:[S.settings.teamA," vs ",S.settings.teamB,"  $",S.settings.costPerBox,"/Box"]})]}),h.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[S.id!==t&&h.jsx("button",{onClick:()=>Je(S.id),className:"px-4 py-2 bg-indigo-900 text-white rounded-lg text-[8px] font-black uppercase",children:"Select"}),h.jsx("button",{onClick:()=>p(S.id),className:"w-8 h-8 bg-red-50 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all",children:h.jsx("i",{className:"fas fa-trash-alt text-[10px]"})})]})]},S.id))})]}),Ce==="settings"&&h.jsxs("div",{className:"space-y-8",children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Selected Contest Settings"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Grid Display Name"}),h.jsx("input",{value:(L==null?void 0:L.name)||"",onChange:S=>l({name:S.target.value}),className:"w-full p-4 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm md:text-lg outline-none focus:ring-4 focus:ring-indigo-500/10"})]}),h.jsxs("div",{className:"md:col-span-2 bg-red-50/60 p-5 rounded-2xl border border-red-100 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-red-600 uppercase",children:"Grid Lock"}),h.jsx("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1",children:"When locked, only admins can claim or remove boxes."})]}),h.jsxs("label",{className:"inline-flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",checked:!!e.isLocked,onChange:S=>s({isLocked:S.target.checked}),className:"w-5 h-5"}),h.jsx("span",{className:"text-[10px] font-black uppercase text-red-700",children:"Lock Grid"})]})]}),h.jsxs("div",{className:"md:col-span-2 bg-indigo-50 p-5 rounded-2xl border border-indigo-100 space-y-4",children:[h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-700 uppercase",children:"Notifications"}),h.jsx("p",{className:"text-[9px] text-indigo-500 font-bold uppercase mt-1",children:"Send alerts on box changes to global + pool contacts."})]}),h.jsxs("label",{className:"inline-flex items-center gap-3",children:[h.jsx("input",{type:"checkbox",checked:!!e.notifyOnSquareChange,onChange:S=>s({notifyOnSquareChange:S.target.checked}),className:"w-5 h-5"}),h.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-800",children:"Notify on Box Changes"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Pool Notification Emails"}),h.jsx("input",{value:je,onChange:S=>Ne(S.target.value),onBlur:()=>{s({notificationEmails:Re.list}),Ne(Re.normalized)},className:"w-full p-3 bg-white rounded-xl outline-none font-bold text-xs",placeholder:"admin1@example.com, admin2@example.com"}),Re.invalid.length>0&&h.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1",children:["Invalid emails: ",Re.invalid.join(", ")]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Pool Notification Phones (E.164)"}),h.jsx("input",{value:Le,onChange:S=>nt(S.target.value),onBlur:()=>{s({notificationPhones:at.list}),nt(at.normalized)},className:"w-full p-3 bg-white rounded-xl outline-none font-bold text-xs",placeholder:"+15551234567, +15557654321"}),at.invalid.length>0&&h.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1",children:["Invalid phones: ",at.invalid.join(", ")]}),at.list.length>0&&h.jsxs("p",{className:"text-[9px] text-indigo-400 font-bold uppercase mt-1",children:["Normalized: ",at.list.join(", ")]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Action Filter"}),h.jsxs("select",{value:e.notifyActionFilter||"any",onChange:S=>s({notifyActionFilter:S.target.value}),className:"w-full p-3 bg-white rounded-xl outline-none font-bold text-xs",children:[h.jsx("option",{value:"taken",children:"Only when a box is taken"}),h.jsx("option",{value:"any",children:"Any box change"})]})]}),h.jsx("div",{className:"flex items-end",children:h.jsx("button",{type:"button",onClick:()=>ve(t),className:"w-full py-3 bg-indigo-900 text-white rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg",children:"Send Test Notification"})}),e.lastTestNotificationAt&&h.jsx("div",{className:"md:col-span-2",children:h.jsxs("p",{className:"text-[9px] text-indigo-500 font-bold uppercase",children:["Last test sent: ",new Date(e.lastTestNotificationAt).toLocaleString()]})})]})]}),h.jsxs("div",{className:"bg-green-50/50 p-6 rounded-3xl border border-green-100",children:[h.jsx("label",{className:"text-[9px] font-black text-green-600 uppercase block mb-2",children:"Cost Per Box ($)"}),h.jsxs("div",{className:"relative",children:[h.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 text-xl font-black text-green-300",children:"$"}),h.jsx("input",{type:"number",value:e.costPerBox,onChange:S=>s({costPerBox:Number(S.target.value)}),className:"w-full pl-6 pr-4 py-2 bg-transparent border-none font-black text-3xl text-green-700 outline-none"})]}),h.jsx("p",{className:"text-[8px] font-bold text-green-600 uppercase mt-2",children:"Adjusting this updates all prize/payout estimates."})]}),h.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Vertical Team (Rows)"}),h.jsx("input",{value:e.teamA,onChange:S=>s({teamA:S.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-indigo-900 uppercase text-xs outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Horizontal Team (Cols)"}),h.jsx("input",{value:e.teamB,onChange:S=>s({teamB:S.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-indigo-900 uppercase text-xs outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Team A Logo (override URL  leave blank to use default)"}),h.jsx("div",{className:"flex gap-3",children:h.jsxs("div",{className:"flex gap-3 items-center",children:[h.jsx("input",{value:e.teamALogo||"",onChange:S=>s({teamALogo:S.target.value}),onBlur:S=>Ni("pool","A",S.target.value),className:"flex-1 p-3 bg-white rounded-xl outline-none",placeholder:"https://.../logo.png"}),h.jsx("input",{id:"pool-teamA-file",type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&an(K,"pool","A"),S.currentTarget.value=""},className:"hidden"}),h.jsx("button",{onClick:()=>{var S;return(S=document.getElementById("pool-teamA-file"))==null?void 0:S.click()},className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Upload"}),(n==null?void 0:n.dropboxAppKey)&&h.jsx("button",{onClick:()=>Yn("pool","A"),className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Dropbox"}),(n==null?void 0:n.githubToken)&&(n==null?void 0:n.githubRepo)&&h.jsxs("label",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black cursor-pointer",children:["GH",h.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&vi(K,"pool","A"),S.currentTarget.value=""},className:"hidden"})]}),e.teamALogo&&h.jsx("button",{onClick:()=>s({teamALogo:""}),className:"px-3 py-2 bg-red-50 text-red-500 rounded-xl font-black",children:"Clear"})]})}),e.teamALogo?h.jsx("img",{src:e.teamALogo,className:"mt-3 h-12 object-contain rounded",alt:"team A"}):h.jsx("p",{className:"text-[9px] text-gray-400 mt-2",children:"Using default logo unless overridden"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Team B Logo (override URL  leave blank to use default)"}),h.jsx("div",{className:"flex gap-3",children:h.jsxs("div",{className:"flex gap-3 items-center",children:[h.jsx("input",{value:e.teamBLogo||"",onChange:S=>s({teamBLogo:S.target.value}),onBlur:S=>Ni("pool","B",S.target.value),className:"flex-1 p-3 bg-white rounded-xl outline-none",placeholder:"https://.../logo.png"}),h.jsx("input",{id:"pool-teamB-file",type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&an(K,"pool","B"),S.currentTarget.value=""},className:"hidden"}),h.jsx("button",{onClick:()=>{var S;return(S=document.getElementById("pool-teamB-file"))==null?void 0:S.click()},className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Upload"}),(n==null?void 0:n.dropboxAppKey)&&h.jsx("button",{onClick:()=>Yn("pool","B"),className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Dropbox"}),(n==null?void 0:n.githubToken)&&(n==null?void 0:n.githubRepo)&&h.jsxs("label",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black cursor-pointer",children:["GH",h.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&vi(K,"pool","B"),S.currentTarget.value=""},className:"hidden"})]}),e.teamBLogo&&h.jsx("button",{onClick:()=>s({teamBLogo:""}),className:"px-3 py-2 bg-red-50 text-red-500 rounded-xl font-black",children:"Clear"})]})}),e.teamBLogo?h.jsx("img",{src:e.teamBLogo,className:"mt-3 h-12 object-contain rounded",alt:"team B"}):h.jsx("p",{className:"text-[9px] text-gray-400 mt-2",children:"Using default logo unless overridden"})]}),h.jsxs("div",{className:"md:col-span-2 bg-white p-4 rounded-xl border mt-2",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-2",children:"Payout Mode"}),h.jsx("div",{className:"flex gap-2 items-center mb-3",children:h.jsxs("select",{value:((mn=e.payouts)==null?void 0:mn.mode)||"standard",onChange:S=>s({payouts:{...e.payouts||{},mode:S.target.value}}),className:"p-3 rounded-lg bg-gray-50 border-none font-black",children:[h.jsx("option",{value:"standard",children:"Standard (by Quarter)"}),h.jsx("option",{value:"scoreChange",children:"Score Change (per change)"})]})}),((Ai=e.payouts)==null?void 0:Ai.mode)==="scoreChange"?h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block",children:"Score Change Multiplier"}),h.jsx("input",{type:"number",value:((mo=e.payouts)==null?void 0:mo.scoreChangeMultiplier)||3,onChange:S=>s({payouts:{...e.payouts||{},scoreChangeMultiplier:Number(S.target.value)}}),className:"w-40 p-3 rounded-lg bg-gray-50"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Applies To"}),h.jsxs("select",{value:(($a=e.payouts)==null?void 0:$a.scoreChangeAppliesTo)||"perBox",onChange:S=>s({payouts:{...e.payouts||{},scoreChangeAppliesTo:S.target.value}}),className:"p-2 rounded-lg bg-gray-50",children:[h.jsx("option",{value:"perBox",children:"Per Box (legacy)"}),h.jsx("option",{value:"totalPot",children:"Full Pool (total pot)"})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"0-0 Initial Refund"}),h.jsx("input",{type:"checkbox",checked:!!((Ja=e.payouts)!=null&&Ja.scoreChangeInitialRefund),onChange:S=>s({payouts:{...e.payouts||{},scoreChangeInitialRefund:S.target.checked}})})]}),h.jsx("p",{className:"text-[10px] text-gray-500",children:'Payout multiplier applied each time the score changes. When set to Full Pool, each change pays `totalPot * multiplier`. The final/"Final" entry receives the player pot remaining after charity.'})]}):h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block",children:"Standard Splits"}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx("input",{type:"number",value:((is=(bl=e.payouts)==null?void 0:bl.standardSplits)==null?void 0:is.q1)||0,onChange:S=>{var K;return s({payouts:{...e.payouts||{},standardSplits:{...((K=e.payouts)==null?void 0:K.standardSplits)||{},q1:Number(S.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Q1 %"}),h.jsx("input",{type:"number",value:((wi=(go=e.payouts)==null?void 0:go.standardSplits)==null?void 0:wi.half)||0,onChange:S=>{var K;return s({payouts:{...e.payouts||{},standardSplits:{...((K=e.payouts)==null?void 0:K.standardSplits)||{},half:Number(S.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Half %"}),h.jsx("input",{type:"number",value:((ss=(Ii=e.payouts)==null?void 0:Ii.standardSplits)==null?void 0:ss.q3)||0,onChange:S=>{var K;return s({payouts:{...e.payouts||{},standardSplits:{...((K=e.payouts)==null?void 0:K.standardSplits)||{},q3:Number(S.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Q3 %"}),h.jsx("input",{type:"number",value:((zt=(Ri=e.payouts)==null?void 0:Ri.standardSplits)==null?void 0:zt.final)||0,onChange:S=>{var K;return s({payouts:{...e.payouts||{},standardSplits:{...((K=e.payouts)==null?void 0:K.standardSplits)||{},final:Number(S.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Final %"})]}),h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Charity"}),h.jsxs("select",{value:((Tl=e.payouts)==null?void 0:Tl.charityPayoutType)||"percent",onChange:S=>s({payouts:{...e.payouts||{},charityPayoutType:S.target.value}}),className:"p-2 rounded-lg bg-gray-50",children:[h.jsx("option",{value:"percent",children:"Percent"}),h.jsx("option",{value:"fixed",children:"Fixed"})]}),((Sl=e.payouts)==null?void 0:Sl.charityPayoutType)==="fixed"?h.jsx("input",{type:"number",value:((_i=e.payouts)==null?void 0:_i.charityFixedAmount)||0,onChange:S=>s({payouts:{...e.payouts||{},charityFixedAmount:Number(S.target.value)}}),className:"p-2 rounded-lg bg-gray-50 w-32"}):h.jsx("input",{type:"number",value:((Mi=e.payouts)==null?void 0:Mi.charityPercent)||0,onChange:S=>s({payouts:{...e.payouts||{},charityPercent:Number(S.target.value)}}),className:"p-2 rounded-lg bg-gray-50 w-32"})]})]})]})]})]})]}),Ce==="axis"&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Grid Axis Numbers"}),h.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Values 0-9 for grid coordinates"})]}),h.jsxs("button",{onClick:y,className:"w-full md:w-auto bg-indigo-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100 hover:bg-black transition-all",children:[h.jsx("i",{className:"fas fa-random mr-2"})," Randomize Numbers"]})]}),h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"axis-row",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[e.teamA," (Vertical)"]}),h.jsx(ri,{status:Os})]}),h.jsxs("button",{onClick:()=>Cl("row"),className:"text-[8px] font-black text-red-400 uppercase",children:[h.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]}),h.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:Array.from({length:10}).map((S,K)=>h.jsx("input",{type:"text",maxLength:1,onFocus:se=>se.target.select(),value:e.rowNumbers[K]??"",onChange:se=>El(se,"row",K),className:"w-full h-12 text-center bg-gray-50 border-2 border-gray-100 rounded-xl font-black text-indigo-900 outline-none focus:border-indigo-500",placeholder:"?"},`row-${K}`))})]}),h.jsxs("div",{className:"axis-row",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[e.teamB," (Horizontal)"]}),h.jsx(ri,{status:lu})]}),h.jsxs("button",{onClick:()=>Cl("col"),className:"text-[8px] font-black text-red-400 uppercase",children:[h.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]}),h.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:Array.from({length:10}).map((S,K)=>h.jsx("input",{type:"text",maxLength:1,onFocus:se=>se.target.select(),value:e.colNumbers[K]??"",onChange:se=>El(se,"col",K),className:"w-full h-12 text-center bg-gray-50 border-2 border-gray-100 rounded-xl font-black text-indigo-900 outline-none focus:border-indigo-500",placeholder:"?"},`col-${K}`))})]})]})]}),Ce==="participants"&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Add Participants"}),h.jsx("button",{onClick:()=>ne(S=>!S),className:"text-[11px] font-black text-indigo-400 uppercase bg-indigo-50 px-3 py-2 rounded-lg border border-indigo-100 hover:bg-indigo-100 transition-all",children:q?"Showing: All":"Show all names"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:Ie,className:"bg-white text-indigo-900 px-4 py-3 rounded-xl font-black uppercase text-[10px] border border-indigo-100 hover:bg-indigo-50 shadow-sm",children:[h.jsx("i",{className:"fas fa-sync-alt mr-2"}),"Reapply Payments"]}),h.jsxs("button",{onClick:M,className:"bg-white text-indigo-900 px-4 py-3 rounded-xl font-black uppercase text-[10px] border border-indigo-100 hover:bg-indigo-50 shadow-sm",children:[h.jsx("i",{className:"fas fa-hand-holding-usd mr-2"}),"Apply Unapplied (All)"]}),h.jsxs("button",{onClick:qe,className:"bg-white text-indigo-900 px-4 py-3 rounded-xl font-black uppercase text-[10px] border border-indigo-100 hover:bg-indigo-50 shadow-sm",children:[h.jsx("i",{className:"fas fa-users-cog mr-2"}),"Rebuild Global"]}),h.jsxs("button",{onClick:()=>W(!F),className:"bg-indigo-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100",children:[h.jsx("i",{className:`fas ${F?"fa-times":"fa-plus"} mr-2`})," ",F?"Cancel":"Add Person"]})]})]}),F&&h.jsxs("form",{onSubmit:Ya,className:"bg-indigo-50 p-8 rounded-3xl border border-indigo-100 space-y-6 animate-in slide-in-from-top-4",children:[h.jsx("p",{className:"text-[10px] text-indigo-600 font-black uppercase",children:"Alias is optional now and can be set when they pick a box"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Full Name"}),h.jsx("input",{required:!0,value:Y.name,onChange:S=>ge({...Y,name:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"e.g. John Smith"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Email (Optional)"}),h.jsx("input",{type:"email",value:Y.email,onChange:S=>ge({...Y,email:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"john@example.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Phone (Optional)"}),h.jsx("input",{type:"tel",value:Y.phone,onChange:S=>ge({...Y,phone:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"555-1234"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Alias (Optional for now)"}),h.jsx("input",{value:Y.alias,onChange:S=>ge({...Y,alias:S.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"e.g. JSmith"})]})]}),h.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Add to Participant List"})]}),h.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-2xl p-6",children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Search by Alias (All Contests)"}),h.jsx("input",{value:re,onChange:S=>be(S.target.value),className:"mt-2 w-full p-3 bg-white rounded-xl font-bold outline-none",placeholder:"Type an alias to find boxes"}),re.trim()!==""&&h.jsx("div",{className:"mt-4",children:li.length===0?h.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"No boxes found for that alias."}):h.jsx("div",{className:"space-y-3",children:li.map(S=>h.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[h.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase",children:S.poolName}),h.jsxs("div",{className:"text-sm font-bold text-indigo-900",children:["Boxes: ",S.boxIds.map(K=>`#${K+1}`).join(", ")]}),S.contacts.length>0?h.jsx("div",{className:"mt-2 text-[10px] font-bold text-gray-600",children:S.contacts.map((K,se)=>h.jsxs("div",{children:[K.name||"Unknown","  ",K.email||"No email","  ",K.phone||"No phone"]},`${S.poolId}-contact-${se}`))}):h.jsx("div",{className:"mt-2 text-[10px] font-bold text-gray-400",children:"No contact details found."})]},S.poolId))})})]}),((q?_||v:(L==null?void 0:L.participants)||v)||[]).length>0?h.jsx("div",{className:"bg-white rounded-2xl border border-gray-100",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-gray-100 bg-gray-50",children:[h.jsx("th",{className:"text-left px-6 py-4 text-[9px] font-black text-indigo-400 uppercase min-w-[220px]",children:"Name"}),h.jsx("th",{className:"text-left px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Email"}),h.jsx("th",{className:"text-left px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Phone"}),h.jsx("th",{className:"text-left px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Alias"}),h.jsx("th",{className:"text-center px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Boxes"}),h.jsx("th",{className:"text-center px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Total Played"}),h.jsx("th",{className:"text-center px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Total Owed"}),h.jsx("th",{className:"text-center px-6 py-4 text-[9px] font-black text-indigo-400 uppercase",children:"Action"})]})}),h.jsx("tbody",{children:((q?_||v:(L==null?void 0:L.participants)||v)||[]).sort((S,K)=>S.name.localeCompare(K.name)).map(S=>{const K=((L==null?void 0:L.squares)||[]).filter(Ae=>Ae.participantId===S.id).length,se=(e==null?void 0:e.costPerBox)||10,me=(S.paymentHistory||[]).reduce((Ae,ut)=>Ae+(ut.amount||0),0),_e=K*se,Oe=Math.max(0,_e-me),Se=(ue||[]).map(Ae=>({poolId:Ae.id,poolName:Ae.name,boxIds:(Ae.squares||[]).filter(ut=>ut.participantId===S.id).map(ut=>ut.id)})).filter(Ae=>(Ae.boxIds||[]).length>0),Ke=Ae=>`$${Ae.toFixed(2)}`,ot=((L==null?void 0:L.participants)||[]).some(Ae=>Ae.id===S.id);return h.jsxs(Mf.Fragment,{children:[h.jsxs("tr",{className:"border-b border-gray-100 hover:bg-indigo-50/30 transition-all",children:[h.jsxs("td",{className:"px-6 py-4 text-sm font-bold text-indigo-900",children:[S.name,!ot&&q&&h.jsx("span",{className:"ml-3 text-[10px] px-2 py-1 bg-indigo-50 text-indigo-500 rounded",children:"global"})]}),h.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.email||"-"}),h.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:S.phone||"-"}),h.jsx("td",{className:"px-6 py-4 text-sm font-bold text-indigo-600 uppercase",children:S.alias||h.jsx("span",{className:"text-gray-400",children:"Not set"})}),h.jsx("td",{className:"px-6 py-4 text-center text-sm font-bold text-indigo-900",children:K}),h.jsx("td",{className:"px-6 py-4 text-center text-sm font-bold text-indigo-900",children:Ke(me)}),h.jsx("td",{className:"px-6 py-4 text-center text-sm font-bold text-red-500",children:Ke(Oe)}),h.jsxs("td",{className:"px-6 py-4 text-center flex items-center justify-center gap-2",children:[h.jsx("button",{title:"Show boxes (all contests)",onClick:()=>rt(Pe===S.id?null:S.id),className:"w-8 h-8 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-600 hover:text-white transition-all",children:h.jsx("i",{className:"fas fa-eye text-[10px]"})}),!ot&&q?h.jsx("button",{title:"Add to active pool",onClick:()=>Jt(S),className:"w-8 h-8 bg-green-50 text-emerald-600 rounded-lg hover:bg-emerald-600 hover:text-white transition-all",children:h.jsx("i",{className:"fas fa-plus text-[10px]"})}):h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>vl(S.id),className:"w-8 h-8 bg-red-50 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all",title:"Delete",children:h.jsx("i",{className:"fas fa-trash-alt text-[10px]"})}),h.jsx("button",{onClick:()=>_l(S.id),className:"w-8 h-8 bg-red-100 text-red-700 rounded-lg hover:bg-red-600 hover:text-white transition-all",title:"Force Delete (clear boxes)",children:h.jsx("i",{className:"fas fa-bolt text-[10px]"})})]})]})]}),Pe===S.id&&h.jsx("tr",{className:"bg-gray-50",children:h.jsx("td",{colSpan:8,className:"px-6 py-4 text-sm text-gray-700",children:h.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Se.length===0?h.jsx("div",{className:"text-sm text-gray-500",children:"No boxes assigned across any contests."}):Se.map(Ae=>h.jsxs("div",{className:"p-3 bg-white rounded-xl border",children:[h.jsx("div",{className:"text-xs font-black text-indigo-500 uppercase mb-2",children:Ae.poolName}),h.jsx("div",{className:"text-sm text-indigo-900 font-bold",children:Ae.boxIds.map(ut=>`#${ut+1}`).join(", ")})]},Ae.poolId))})})})]},S.id)})})]})})}):h.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-8 text-center",children:[h.jsx("p",{className:"text-[11px] font-black text-indigo-600 uppercase",children:"No participants added yet"}),h.jsx("p",{className:"text-[9px] text-indigo-500 mt-2",children:'Click "Add Person" to start building your participant list'})]})]}),Ce==="winners"&&h.jsx(Sv,{activePool:L,settings:{...n,...e},onAddScore:oe,onUpdateScore:xe,onDeleteScore:ce,isAdmin:!0}),Ce==="stats"&&h.jsx(iT,{squares:m,participants:v,settings:{...n,...e},onUpdateSquare:E,onUpdateParticipant:T,onUnassignSquare:N,onClearUserBoxes:D,onApplyPayment:k,onEditPayment:G,onDeletePayment:X,onApplyUnappliedPayments:j}),Ce==="global"&&h.jsxs("div",{className:"space-y-8",children:[h.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Global Organization Settings"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Main Organization/Charity Name"}),h.jsx("input",{onFocus:S=>S.target.select(),value:(n==null?void 0:n.charityName)||"",onChange:S=>r({charityName:S.target.value}),className:"w-full px-5 py-4 bg-indigo-50 border-none rounded-2xl font-black text-indigo-900 uppercase text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Administrative Password"}),h.jsx("input",{type:"text",onFocus:S=>S.target.select(),value:(n==null?void 0:n.adminPassword)||"",onChange:S=>r({adminPassword:S.target.value}),className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl font-black text-indigo-900 uppercase text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Venmo Link/Username"}),h.jsx("input",{type:"text",value:(n==null?void 0:n.venmoAccount)||"",onChange:S=>r({venmoAccount:S.target.value}),className:"w-full px-5 py-4 bg-blue-50/50 rounded-2xl font-black text-indigo-900 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Zelle Account Info"}),h.jsx("input",{type:"text",value:(n==null?void 0:n.zelleAccount)||"",onChange:S=>r({zelleAccount:S.target.value}),className:"w-full px-5 py-4 bg-purple-50 rounded-2xl font-black text-indigo-900 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Global Notification Emails"}),h.jsx("input",{value:Te,onChange:S=>ae(S.target.value),onBlur:()=>{r({notificationEmails:ct.list}),ae(ct.normalized)},className:"w-full px-5 py-4 bg-gray-50 rounded-2xl font-black text-indigo-900 text-sm",placeholder:"admin@example.com, alerts@example.com"}),ct.invalid.length>0&&h.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1",children:["Invalid emails: ",ct.invalid.join(", ")]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Global Notification Phones (E.164)"}),h.jsx("input",{value:pe,onChange:S=>Me(S.target.value),onBlur:()=>{r({notificationPhones:Bn.list}),Me(Bn.normalized)},className:"w-full px-5 py-4 bg-gray-50 rounded-2xl font-black text-indigo-900 text-sm",placeholder:"+15551234567, +15557654321"}),Bn.invalid.length>0&&h.jsxs("p",{className:"text-[9px] text-red-500 font-bold uppercase mt-1",children:["Invalid phones: ",Bn.invalid.join(", ")]}),Bn.list.length>0&&h.jsxs("p",{className:"text-[9px] text-indigo-400 font-bold uppercase mt-1",children:["Normalized: ",Bn.list.join(", ")]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Default Team A Logo (URL)"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex gap-3 items-center",children:[h.jsx("input",{value:ke,onChange:S=>xt(S.target.value),onBlur:async S=>{await Ni("global","A",ke)||xt((n==null?void 0:n.teamALogo)||"")},className:"flex-1 px-5 py-3 bg-white rounded-2xl font-black text-indigo-900 text-sm",placeholder:"https://.../logo.png"}),h.jsx("input",{id:"global-teamA-file",type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&an(K,"global","A"),S.currentTarget.value=""},className:"hidden"}),h.jsx("button",{onClick:()=>{var S;return(S=document.getElementById("global-teamA-file"))==null?void 0:S.click()},className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Upload"}),(n==null?void 0:n.dropboxAppKey)&&h.jsx("button",{onClick:()=>Yn("global","A"),className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Dropbox"}),(n==null?void 0:n.githubToken)&&(n==null?void 0:n.githubRepo)&&h.jsxs("label",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black cursor-pointer",children:["GH",h.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&vi(K,"global","A"),S.currentTarget.value=""},className:"hidden"})]}),(n==null?void 0:n.teamALogo)&&h.jsx("button",{onClick:()=>r({teamALogo:""}),className:"px-3 py-2 bg-red-50 text-red-500 rounded-xl font-black",children:"Clear"})]}),(n==null?void 0:n.teamALogo)&&h.jsx("img",{src:n.teamALogo,alt:"Team A",className:"mt-3 h-12 object-contain rounded"}),"                      "]}),h.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"GitHub Token (optional)"}),h.jsx("input",{type:"password",value:(n==null?void 0:n.githubToken)||"",onChange:S=>r({githubToken:S.target.value}),className:"w-full px-5 py-3 bg-white rounded-2xl font-black text-indigo-900 text-sm",placeholder:"ghp_xxx (stored in DB)"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"GitHub Repo (owner/repo)"}),h.jsx("input",{value:(n==null?void 0:n.githubRepo)||"",onChange:S=>r({githubRepo:S.target.value}),className:"w-full px-5 py-3 bg-white rounded-2xl font-black text-indigo-900 text-sm",placeholder:"yourname/your-repo (for hosting)"}),h.jsx("p",{className:"text-[9px] text-gray-400 mt-1",children:"If set, Admin can upload logos to this repo using the token above."})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Default Team B Logo (URL)"}),h.jsxs("div",{className:"flex gap-3 items-center",children:[h.jsx("input",{value:Vt,onChange:S=>kt(S.target.value),onBlur:async S=>{await Ni("global","B",Vt)||kt((n==null?void 0:n.teamBLogo)||"")},className:"flex-1 px-5 py-3 bg-white rounded-2xl font-black text-indigo-900 text-sm",placeholder:"https://.../logo.png"}),h.jsx("input",{id:"global-teamB-file",type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&an(K,"global","B"),S.currentTarget.value=""},className:"hidden"}),h.jsx("button",{onClick:()=>{var S;return(S=document.getElementById("global-teamB-file"))==null?void 0:S.click()},className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Upload"}),(n==null?void 0:n.dropboxAppKey)&&h.jsx("button",{onClick:()=>Yn("global","B"),className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black",children:"Dropbox"}),(n==null?void 0:n.githubToken)&&(n==null?void 0:n.githubRepo)&&h.jsxs("label",{className:"px-3 py-2 bg-indigo-50 text-indigo-700 rounded-xl font-black cursor-pointer",children:["GH",h.jsx("input",{type:"file",accept:"image/*",onChange:S=>{var se;const K=(se=S.target.files)==null?void 0:se[0];K&&vi(K,"global","B"),S.currentTarget.value=""},className:"hidden"})]}),(n==null?void 0:n.teamBLogo)&&h.jsx("button",{onClick:()=>r({teamBLogo:""}),className:"px-3 py-2 bg-red-50 text-red-500 rounded-xl font-black",children:"Clear"})]}),(n==null?void 0:n.teamBLogo)&&h.jsx("img",{src:n.teamBLogo,alt:"Team B",className:"mt-3 h-12 object-contain rounded"})]})]})]}),Ce==="danger"&&h.jsx("div",{className:"space-y-8",children:h.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-r-2xl",children:[h.jsx("h3",{className:"text-lg font-black text-red-700 uppercase mb-2",children:"Danger Zone"}),h.jsx("p",{className:"text-sm text-red-600 mb-6",children:"These actions are irreversible. Proceed with caution."}),h.jsx("button",{onClick:u,className:"w-full py-4 text-red-500 font-black uppercase text-[10px] hover:bg-red-100 rounded-2xl border-2 border-dashed border-red-300 transition-all",children:"Reset All Boxes for Active Grid"})]})})]})})]})]})},oT=({isOpen:t,onClose:e,onSubmit:n,onUnassign:s,onSetPendingSelection:l,selectedSquareIds:r,activePool:u,existingParticipants:p,settings:y,isAdmin:m=!1})=>{const[v,_]=z.useState(!1),[E,T]=z.useState(!1),[N,D]=z.useState(""),[k,G]=z.useState(!1),[X,j]=z.useState(null),[M,fe]=z.useState(!0),[ie,oe]=z.useState({name:"",email:"",phone:"",alias:""}),xe=z.useMemo(()=>(r||[]).map(q=>(u.squares||[])[q]).filter(Boolean),[r,u.squares]),ce=z.useMemo(()=>p.find(q=>(q.alias||"").toLowerCase()===ie.alias.toLowerCase()),[ie.alias,p]),Ie=z.useMemo(()=>{const q=(ie.email||"").trim().toLowerCase(),ne=(ie.phone||"").replace(/\D/g,"");if(!(!q&&!ne))return p.find(re=>q&&(re.email||"").trim().toLowerCase()===q||ne&&(re.phone||"").replace(/\D/g,"")===ne)},[ie.email,ie.phone,p]),qe=z.useMemo(()=>Ie?(Ie.paymentHistory||[]).reduce((q,ne)=>q+ne.amount,0):0,[Ie]),Ye=z.useMemo(()=>!ce||xe.length===0?!1:xe.every(q=>q.assigned&&q.participantId===ce.id),[xe,ce]),ue=z.useMemo(()=>{const q=ce==null?void 0:ce.id;if(!q||!Ye)return xe;const ne=(u.squares||[]).filter(re=>re.participantId===q&&!(r||[]).includes(re.id)&&(re.paidAmount||0)<y.costPerBox);return[...xe,...ne]},[ce,Ye,u.squares,r,xe,y.costPerBox]),Je=xe.length>0&&xe.every(q=>q.assigned),Fe=z.useMemo(()=>{if(!E&&!m||xe.length===0)return null;const q=xe[0],ne=p.find(yt=>yt.id===(q==null?void 0:q.participantId));if(!ne)return null;const re=(u.squares||[]).filter(yt=>yt.participantId===ne.id),be=re.length*y.costPerBox,Pe=(ne.paymentHistory||[]).reduce((yt,Jt)=>yt+Jt.amount,0);return{balance:Math.max(0,be-Pe),totalPaid:Pe,boxCount:re.length,p:ne}},[E,m,xe,p,u.squares,y.costPerBox]),O=z.useMemo(()=>ue.length*y.costPerBox-ue.reduce((q,ne)=>q+(ne.paidAmount||0),0),[ue,y.costPerBox]),te=!!y.isLocked&&!m;if(z.useEffect(()=>{if(t)if(_(!1),T(!1),D(""),G(!1),j(null),fe(!0),xe.length===1&&xe[0].assigned){const q=p.find(ne=>ne.id===xe[0].participantId);q&&oe({name:q.name,email:q.email,phone:q.phone,alias:q.alias.toUpperCase()})}else oe({name:"",email:"",phone:"",alias:""})},[t,xe,p]),!t||xe.length===0)return null;const ve=q=>{const ne=(r||[]).filter(re=>re!==q);l(ne),ne.length===0&&e()},Ce=q=>{const ne=q.target.value.replace(/[^\d]/g,""),re=ne.length;let be=ne;re>=4&&re<7?be=`(${ne.slice(0,3)}) ${ne.slice(3)}`:re>=7&&(be=`(${ne.slice(0,3)}) ${ne.slice(3,6)}-${ne.slice(6,10)}`),oe({...ie,phone:be})},Ge=q=>{const ne=q.target.value;if(!ne)return;const re=p.find(be=>be.id===ne);re&&oe({name:re.name,email:re.email,phone:re.phone,alias:re.alias.toUpperCase()})},w=q=>{if(q.preventDefault(),te){alert("This grid is locked. Only admins can claim boxes right now.");return}if(!ie.email&&!ie.phone)return;if(!ie.alias.trim()){alert("Alias is required when assigning boxes.");return}const ne=!!Ie&&M;n({...ie,alias:ie.alias.toUpperCase()},ue.map(re=>re.id),ne),_(!0)},R=q=>{q.preventDefault();const ne=xe[0],re=p.find(be=>be.id===ne.participantId);re&&re.email.toLowerCase()===N.toLowerCase()?(T(!0),G(!1)):G(!0)},F=y.zelleAccount||y.paypalAccount||y.paypalLink||y.venmoAccount||y.otherPaymentInfo,W=({currentAlias:q,amount:ne})=>{const re=y.paypalLink||(y.paypalAccount?`https://www.paypal.com/paypalme/${y.paypalAccount}/${ne}`:null),be=y.venmoAccount?`https://venmo.com/${y.venmoAccount.replace("@","")}?txn=pay&amount=${ne}&note=${encodeURIComponent(`Squares: ${q.toUpperCase()}`)}`:null;return h.jsxs("div",{className:"space-y-4",children:[re&&h.jsx("a",{href:re,target:"_blank",className:"flex items-center justify-between px-5 py-3 bg-[#003087] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:h.jsxs("span",{children:[h.jsx("i",{className:"fab fa-paypal mr-2"})," PayPal: $",ne]})}),be&&h.jsx("a",{href:be,target:"_blank",className:"flex items-center justify-between px-5 py-3 bg-[#3d95ce] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:h.jsxs("span",{children:[h.jsx("i",{className:"fab fa-vimeo-v mr-2"})," Venmo: $",ne]})}),y.zelleAccount&&h.jsxs("div",{className:"px-5 py-3 bg-[#6d1ed4] text-white rounded-xl font-black uppercase text-[10px] tracking-widest text-center",children:["Zelle: ",y.zelleAccount]}),h.jsxs("p",{className:"text-[9px] text-gray-400 italic text-center uppercase font-black",children:['Memo: "',q.toUpperCase(),'"']})]})};return h.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4 bg-indigo-950/40 backdrop-blur-md",children:h.jsxs("div",{className:"bg-white rounded-t-[2rem] md:rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-in slide-in-from-bottom-full md:slide-in-from-bottom-6 duration-300",children:[h.jsxs("div",{className:"p-6 md:p-8 bg-indigo-900 text-white flex justify-between items-center relative overflow-hidden",children:[h.jsxs("div",{className:"relative z-10",children:[h.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight leading-none",children:Je?"Manage Box":`Claiming ${xe.length} Boxes`}),h.jsx("p",{className:"text-indigo-300 text-[9px] font-bold uppercase tracking-widest mt-2 uppercase",children:m?"ADMIN CONTROL ENABLED":`Support ${y.charityName}`})]}),h.jsx("button",{onClick:e,className:"bg-white/10 w-10 h-10 rounded-full flex items-center justify-center z-10",children:h.jsx("i",{className:"fas fa-times text-xl"})})]}),h.jsx("div",{className:"p-6 md:p-8 space-y-6 max-h-[80vh] overflow-y-auto scrollbar-hide",children:!Je&&!v?h.jsxs("form",{onSubmit:w,className:"space-y-5",children:[p.length>0&&h.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[h.jsx("label",{className:"text-[9px] font-black uppercase text-indigo-400 mb-1 block",children:"Quick Select Player"}),h.jsxs("select",{onChange:Ge,className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[h.jsx("option",{value:"",children:"-- New Player --"}),p.sort((q,ne)=>(q.alias||q.name).localeCompare(ne.alias||ne.name)).map(q=>h.jsxs("option",{value:q.id,children:[(q.alias||q.name).toString().toUpperCase()," ",q.originPoolName?`  ${q.originPoolName}`:""]},q.id))]})]}),h.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100",children:[h.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1",children:"Items in checkout"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:xe.map(q=>h.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-white text-indigo-900 font-black text-[10px] rounded-lg shadow-sm border border-indigo-100",children:[h.jsxs("span",{children:["#",q.id+1]}),h.jsx("button",{type:"button",onClick:()=>ve(q.id),className:"w-4 h-4 rounded-full bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white",children:h.jsx("i",{className:"fas fa-times text-[8px]"})})]},q.id))}),h.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-100/50 flex justify-between items-center",children:[h.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-900",children:"Amount Due"}),h.jsxs("span",{className:"text-lg font-black text-indigo-900",children:["$",O]})]}),Ie&&h.jsxs("label",{className:"mt-3 flex items-start gap-3 text-[10px] font-bold text-gray-600",children:[h.jsx("input",{type:"checkbox",checked:M,onChange:q=>fe(q.target.checked),className:"mt-0.5"}),h.jsxs("span",{children:["Apply existing payments from this email/phone ($",qe.toFixed(2),") to these boxes."]})]})]}),h.jsx("input",{required:!0,onFocus:q=>q.target.select(),value:ie.name,onChange:q=>oe({...ie,name:q.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Full Name"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{type:"email",value:ie.email,onChange:q=>oe({...ie,email:q.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Email Address (optional)"}),h.jsx("input",{type:"tel",value:ie.phone,onChange:Ce,className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Cell Number (optional)",maxLength:14}),!ie.email&&!ie.phone&&h.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase",children:"Require either email or phone"})]}),h.jsx("input",{required:!0,maxLength:16,value:ie.alias,onChange:q=>oe({...ie,alias:q.target.value.toUpperCase()}),className:"w-full p-4 bg-indigo-50 rounded-xl font-black text-indigo-900 uppercase text-sm outline-none",placeholder:"Alias (Visible on Grid)"}),h.jsx("button",{type:"submit",disabled:!ie.name||!ie.email&&!ie.phone||!ie.alias,className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50",children:"Confirm & Register"})]}):v?h.jsxs("div",{className:"text-center space-y-6",children:[h.jsx("i",{className:"fas fa-check-circle text-green-500 text-4xl mb-3"}),h.jsx("h3",{className:"font-black text-indigo-900 uppercase text-sm",children:"Successfully Claimed!"}),h.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",O]}),F?h.jsx(W,{currentAlias:ie.alias,amount:O}):h.jsx("p",{className:"text-xs text-gray-400",children:"Contact admin to pay."}),h.jsx("button",{onClick:e,className:"text-xs font-black uppercase text-indigo-500",children:"Return to Board"})]}):h.jsxs("div",{className:"space-y-6",children:[(E||m)&&Fe&&h.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border-2 border-orange-200 text-center animate-in zoom-in-95",children:[h.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase mb-1",children:"Balance Due"}),h.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",Fe.balance.toFixed(0)]})]}),!E&&!m?h.jsxs("form",{onSubmit:R,className:"space-y-4",children:[h.jsx("p",{className:"text-xs text-center font-bold text-gray-500",children:"Enter account email to manage this box."}),h.jsx("input",{required:!0,onFocus:q=>q.target.select(),type:"email",value:N,onChange:q=>D(q.target.value),className:"w-full p-4 bg-gray-50 border-none rounded-xl text-sm outline-none",placeholder:"Verify Email"}),k&&h.jsx("p",{className:"text-red-500 text-[10px] font-bold text-center uppercase",children:"Email does not match."}),h.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:"Verify Ownership"})]}):h.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[Fe&&h.jsx(W,{currentAlias:Fe.p.alias,amount:Fe.balance}),h.jsxs("div",{className:"pt-8 border-t border-gray-100 space-y-4",children:[h.jsx("h4",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest",children:m?"ADMIN CONTROL: REMOVE CLAIM":"RELINQUISH BOX"}),h.jsx("p",{className:"text-[10px] text-gray-400 font-bold leading-tight px-1 uppercase italic",children:"Removing the name will make this box available for others. Funds will be redistributed to other boxes if applicable."}),h.jsx("button",{type:"button",onClick:()=>s(xe[0].id),disabled:te,className:`w-full py-5 rounded-2xl font-black uppercase text-[12px] tracking-widest shadow-xl transition-all active:scale-95 ${te?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-600 text-white hover:bg-black"}`,children:"Remove Name (Relinquish)"}),te&&h.jsx("p",{className:"text-[9px] font-bold uppercase text-gray-400 text-center",children:"Grid locked. Admins can manage claims."})]})]})]})})]})})},lT=({isOpen:t,onClose:e})=>t?h.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md animate-in fade-in duration-300",children:h.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"bg-indigo-600 p-8 text-white flex justify-between items-center relative overflow-hidden flex-shrink-0",children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:h.jsx("i",{className:"fas fa-question-circle text-8xl rotate-12"})}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"How it Works"}),h.jsx("p",{className:"text-indigo-100 text-xs font-bold uppercase tracking-widest",children:"Platform Guide & Documentation"})]}),h.jsx("button",{onClick:e,className:"bg-white/10 hover:bg-white/20 w-12 h-12 rounded-full flex items-center justify-center transition-all z-10",children:h.jsx("i",{className:"fas fa-times text-xl"})})]}),h.jsxs("div",{className:"p-8 md:p-10 overflow-y-auto space-y-10 scrollbar-hide",children:[h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center",children:h.jsx("i",{className:"fas fa-rocket text-sm"})}),h.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"Getting Started"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"p-5 bg-blue-50 border border-blue-100 rounded-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Welcome to the Board"}),h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Click the ",h.jsx("span",{className:"font-bold",children:"logo in the header"})," to jump to the Board. Use the ",h.jsx("span",{className:"font-bold",children:"Pool Selector"})," to switch between contests. This app supports multiple simultaneous pools."]})]}),h.jsxs("div",{className:"p-5 bg-blue-50 border border-blue-100 rounded-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Navigation Tabs"}),h.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-th text-indigo-400 mt-0.5"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"Board:"})," View and claim squares"]})]}),h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-trophy text-indigo-400 mt-0.5"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"Winners:"})," Live score tracking and payouts"]})]}),h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-user-check text-indigo-400 mt-0.5"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"My Boxes:"})," Check your status and balance"]})]}),h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-lock text-indigo-400 mt-0.5"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"Admin:"})," Management tools (password protected)"]})]})]})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-green-100 text-green-600 rounded-xl flex items-center justify-center",children:h.jsx("i",{className:"fas fa-user text-sm"})}),h.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"For Contest Players"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Claiming Squares"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click any white square on the board to select it (they'll highlight in blue). Select as many as you want, then press ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"Claim Selected"})," to register with your name, email, and alias."]})]}),h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Making Payments"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["After registering, use the payment buttons in ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"My Boxes"})," to send funds via Venmo, PayPal, or Zelle. Always include your ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"Alias"})," in the memo."]})]}),h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Checking Your Status"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Go to ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"My Boxes"}),", enter your email, and see your claimed squares, payment history, and current balance at a glance."]})]}),h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Winning & Payouts"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["The ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"Winners"})," tab shows live scores and calculates payouts in real-time. Winners are determined by matching the last digit of each team's score to the grid coordinates."]})]}),h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Sharing the Contest"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click the ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"Share"})," button to get a shareable link. Recipients can see the board and join without needing special access."]})]}),h.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Get Help"}),h.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click the ",h.jsx("span",{className:"text-indigo-600 font-bold",children:"?"})," icon in the header anytime to revisit this guide."]})]})]})]}),h.jsxs("section",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center",children:h.jsx("i",{className:"fas fa-lock text-sm"})}),h.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"For Administrators"})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Pool & Grid Settings"}),h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Create new pools, set team names, configure the cost per box, and manage grid locks. Use ",h.jsx("span",{className:"font-bold",children:"Generate Numbers"})," to randomly populate the X and Y axis numbers for winner calculations."]})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Financial Configuration"}),h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Set the ",h.jsx("span",{className:"font-bold",children:"Charity Share"})," as a fixed amount or percentage. Configure payment accounts (Venmo, PayPal, Zelle, or custom). Track and record all participant payments."]})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Payout Modes"}),h.jsxs("ul",{className:"text-xs text-gray-600 space-y-2 mt-2",children:[h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-check text-indigo-400 mt-1"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"Standard:"})," Split payouts across Q1, Halftime, Q3, and Final."]})]}),h.jsxs("li",{className:"flex gap-2",children:[h.jsx("i",{className:"fas fa-check text-indigo-400 mt-1"})," ",h.jsxs("span",{children:[h.jsx("strong",{children:"Score Change:"})," Award a multiplier payout each time the score changes."]})]})]})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Live Scoring & Winners"}),h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Enter scores in the ",h.jsx("span",{className:"font-bold",children:"Admin Panel  Winners"})," tab. The system instantly calculates winners by matching score last digits to grid coordinates and applies payouts based on your configuration."]})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Participant & Payment Management"}),h.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Manage all participants, edit aliases, log manual payments, and redistribute funds. Unassign squares to reclaim them, and use ",h.jsx("span",{className:"font-bold",children:"Clear All Boxes"})," for bulk resets."]})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Export & Data Management"}),h.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Export the full grid as CSV (with player names and contact info), payment audit logs, or the entire pool state as JSON. Import previously exported states to restore or clone contests."})]}),h.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[h.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Multi-Pool Support"}),h.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Run multiple contests in a single app instance. Create new pools, switch between them using the dropdown, and manage each independently with separate grids, participants, and payouts."})]})]})]})]}),h.jsx("div",{className:"p-8 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:h.jsx("button",{onClick:e,className:"w-full py-4 bg-indigo-900 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Got it, Let's Go!"})})]})}):null;var aT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rT,cT;function uT(){return{geminiUrl:rT,vertexUrl:cT}}function dT(t,e,n,s){var l,r;if(!(t!=null&&t.baseUrl)){const u=uT();return e?(l=u.vertexUrl)!==null&&l!==void 0?l:n:(r=u.geminiUrl)!==null&&r!==void 0?r:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ts{}function ye(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const r=e[l];return r!=null?String(r):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function f(t,e,n){for(let r=0;r<e.length-1;r++){const u=e[r];if(u.endsWith("[]")){const p=u.slice(0,-2);if(!(p in t))if(Array.isArray(n))t[p]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[p])){const y=t[p];if(Array.isArray(n))for(let m=0;m<y.length;m++){const v=y[m];f(v,e.slice(r+1),n[m])}else for(const m of y)f(m,e.slice(r+1),n)}return}else if(u.endsWith("[0]")){const p=u.slice(0,-3);p in t||(t[p]=[{}]);const y=t[p];f(y[0],e.slice(r+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const s=e[e.length-1],l=t[s];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const l=e[s];if(l.endsWith("[]")){const r=l.slice(0,-2);if(r in t){const u=t[r];return Array.isArray(u)?u.map(p=>d(p,e.slice(s+1),n)):n}else return n}else t=t[l]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function fT(t,e){for(const[n,s]of Object.entries(e)){const l=n.split("."),r=s.split("."),u=new Set;let p=-1;for(let y=0;y<l.length;y++)if(l[y]==="*"){p=y;break}if(p!==-1&&r.length>p)for(let y=p;y<r.length;y++){const m=r[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&u.add(m)}Df(t,l,r,0,u)}}function Df(t,e,n,s,l){if(s>=e.length||typeof t!="object"||t===null)return;const r=e[s];if(r.endsWith("[]")){const u=r.slice(0,-2),p=t;if(u in p&&Array.isArray(p[u]))for(const y of p[u])Df(y,e,n,s+1,l)}else if(r==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,p=Object.keys(u).filter(m=>!m.startsWith("_")&&!l.has(m)),y={};for(const m of p)y[m]=u[m];for(const[m,v]of Object.entries(y)){const _=[];for(const E of n.slice(s))E==="*"?_.push(m):_.push(E);f(u,_,v)}for(const m of p)delete u[m]}}else{const u=t;r in u&&Df(u[r],e,n,s+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mh(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hT(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function pT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],gT(u)),e}function mT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response"]);return u!=null&&f(e,["response"],yT(u)),e}function gT(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>xT(u))),f(e,["generatedVideos"],r)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function yT(t){const e={},n=d(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>vT(u))),f(e,["generatedVideos"],r)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function xT(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],ST(n)),e}function vT(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],NT(n)),e}function _T(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function ET(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function CT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response"]);return u!=null&&f(e,["response"],bT(u)),e}function bT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function Nv(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response"]);return u!=null&&f(e,["response"],TT(u)),e}function TT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function ST(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],mh(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function NT(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],mh(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Wy||(Wy={}));var Zy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Zy||(Zy={}));var e0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(e0||(e0={}));var Is;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Is||(Is={}));var t0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(t0||(t0={}));var n0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(n0||(n0={}));var i0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(i0||(i0={}));var s0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(s0||(s0={}));var o0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(o0||(o0={}));var l0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(l0||(l0={}));var a0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(a0||(a0={}));var r0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(r0||(r0={}));var c0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(c0||(c0={}));var u0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(u0||(u0={}));var d0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(d0||(d0={}));var f0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(f0||(f0={}));var h0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(h0||(h0={}));var p0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(p0||(p0={}));var m0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(m0||(m0={}));var g0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(g0||(g0={}));var y0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(y0||(y0={}));var yc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(yc||(yc={}));var x0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(x0||(x0={}));var v0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(v0||(v0={}));var _0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(_0||(_0={}));var kf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(kf||(kf={}));var E0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(E0||(E0={}));var C0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(C0||(C0={}));var Pf;(function(t){t.COLLECTION="COLLECTION"})(Pf||(Pf={}));var b0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(b0||(b0={}));var T0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(T0||(T0={}));var S0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(S0||(S0={}));var N0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(N0||(N0={}));var A0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(A0||(A0={}));var w0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(w0||(w0={}));var I0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(I0||(I0={}));var R0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(R0||(R0={}));var M0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(M0||(M0={}));var D0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(D0||(D0={}));var k0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(k0||(k0={}));var P0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(P0||(P0={}));var L0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(L0||(L0={}));var U0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(U0||(U0={}));var B0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(B0||(B0={}));var O0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(O0||(O0={}));var H0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(H0||(H0={}));var G0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(G0||(G0={}));var q0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(q0||(q0={}));var V0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(V0||(V0={}));var F0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(F0||(F0={}));var z0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(z0||(z0={}));var j0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(j0||(j0={}));var Y0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Y0||(Y0={}));var $0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})($0||($0={}));var J0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(J0||(J0={}));var K0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(K0||(K0={}));var Xo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Xo||(Xo={}));class Lf{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ma{get text(){var e,n,s,l,r,u,p,y;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const _=[];for(const E of(y=(p=(u=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[T,N]of Object.entries(E))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(N!==null||N!==void 0)&&_.push(T);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,m+=E.text}}return _.length>0&&console.warn(`there are non-text parts ${_} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,n,s,l,r,u,p,y;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const _ of(y=(p=(u=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)!==null&&y!==void 0?y:[]){for(const[E,T]of Object.entries(_))E!=="inlineData"&&(T!==null||T!==void 0)&&v.push(E);_.inlineData&&typeof _.inlineData.data=="string"&&(m+=atob(_.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,s,l,r,u,p,y;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(p=(u=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,s,l,r,u,p,y,m;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(p=(u=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.executableCode).map(_=>_.executableCode).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,s,l,r,u,p,y,m;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(p=(u=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content)===null||p===void 0?void 0:p.parts)===null||y===void 0?void 0:y.filter(_=>_.codeExecutionResult).map(_=>_.codeExecutionResult).filter(_=>_!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Q0{}class X0{}class AT{}class wT{}class IT{}class RT{}class W0{}class Z0{}class ex{}class MT{}class xc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new xc;let l;const r=e;return n?l=mT(r):l=pT(r),Object.assign(s,l),s}}class tx{}class nx{}class ix{}class sx{}class DT{}class kT{}class PT{}class gh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new gh,r=CT(e);return Object.assign(s,r),s}}class LT{}class UT{}class BT{}class ox{}class OT{get text(){var e,n,s;let l="",r=!1;const u=[];for(const p of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[y,m]of Object.entries(p))y!=="text"&&y!=="thought"&&m!==null&&u.push(y);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;r=!0,l+=p.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?l:void 0}get data(){var e,n,s;let l="";const r=[];for(const u of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[p,y]of Object.entries(u))p!=="inlineData"&&y!==null&&r.push(p);u.inlineData&&typeof u.inlineData.data=="string"&&(l+=atob(u.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class HT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class yh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new yh,r=Nv(e);return Object.assign(s,r),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Av(t,e){const n=pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function wv(t){return Array.isArray(t)?t.map(e=>vc(e)):[vc(t)]}function vc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function Iv(t){const e=vc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rv(t){const e=vc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lx(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Mv(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>lx(e)):[lx(t)]}function Uf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function ax(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function rx(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bn(t){if(t==null)throw new Error("ContentUnion is required");return Uf(t)?t:{role:"user",parts:Mv(t)}}function xh(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=bn(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=bn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>bn(n)):[bn(e)]}function si(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(ax(t)||rx(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(t)]}const e=[],n=[],s=Uf(t[0]);for(const l of t){const r=Uf(l);if(r!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(l);else{if(ax(l)||rx(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return s||e.push({role:"user",parts:Mv(n)}),e}function GT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Is).includes(n[0].toUpperCase())?n[0].toUpperCase():Is.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Is).includes(s.toUpperCase())?s.toUpperCase():Is.TYPE_UNSPECIFIED})}}function el(t){const e={},n=["items"],s=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&GT(t.type,e);for(const[u,p]of Object.entries(t))if(p!=null)if(u=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(Is).includes(p.toUpperCase())?p.toUpperCase():Is.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=el(p);else if(s.includes(u)){const y=[];for(const m of p){if(m.type=="null"){e.nullable=!0;continue}y.push(el(m))}e[u]=y}else if(l.includes(u)){const y={};for(const[m,v]of Object.entries(p))y[m]=el(v);e[u]=y}else{if(u==="additionalProperties")continue;e[u]=p}return e}function vh(t){return el(t)}function _h(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Eh(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function fl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=el(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=el(e.response));return t}function hl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function qT(t,e,n,s=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function ns(t,e){if(typeof e!="string")throw new Error("name must be a string");return qT(t,e,"cachedContents")}function Dv(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Us(t){return mh(t)}function VT(t){return t!=null&&typeof t=="object"&&"name"in t}function FT(t){return t!=null&&typeof t=="object"&&"video"in t}function zT(t){return t!=null&&typeof t=="object"&&"uri"in t}function kv(t){var e;let n;if(VT(t)&&(n=t.name),!(zT(t)&&(n=t.uri,n===void 0))&&!(FT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Pv(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Lv(t){for(const e of["models","tunedModels","publisherModels"])if(jT(t,e))return t[e];return[]}function jT(t,e){return t!==null&&typeof t=="object"&&e in t}function YT(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $T(t,e={}){const n=[],s=new Set;for(const l of t){const r=l.name;if(s.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);s.add(r);const u=YT(l,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function Uv(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function JT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Bv(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let r=!1;for(const u of l){if(typeof u!="object"||u===null)continue;const y=u.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function pl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Ov(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KT(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>IS(u))),f(e,["inlinedResponses"],r)}const l=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["inlinedEmbedContentResponses"],r)}return e}function QT(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigqueryDestination","outputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function XT(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigqueryDestination","outputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function fc(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["metadata","state"]);l!=null&&f(e,["state"],Ov(l));const r=d(t,["metadata","createTime"]);r!=null&&f(e,["createTime"],r);const u=d(t,["metadata","endTime"]);u!=null&&f(e,["endTime"],u);const p=d(t,["metadata","updateTime"]);p!=null&&f(e,["updateTime"],p);const y=d(t,["metadata","model"]);y!=null&&f(e,["model"],y);const m=d(t,["metadata","output"]);return m!=null&&f(e,["dest"],KT(Bv(m))),e}function Bf(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["state"]);l!=null&&f(e,["state"],Ov(l));const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["createTime"]);u!=null&&f(e,["createTime"],u);const p=d(t,["startTime"]);p!=null&&f(e,["startTime"],p);const y=d(t,["endTime"]);y!=null&&f(e,["endTime"],y);const m=d(t,["updateTime"]);m!=null&&f(e,["updateTime"],m);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const _=d(t,["inputConfig"]);_!=null&&f(e,["src"],WT(_));const E=d(t,["outputConfig"]);E!=null&&f(e,["dest"],QT(Bv(E)));const T=d(t,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function WT(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigquerySource","inputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function ZT(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(n,["fileName"],s);const l=d(e,["inlinedRequests"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>wS(t,u))),f(n,["requests","requests"],r)}return n}function eS(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigquerySource","inputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function tS(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function iS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function sS(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],oS(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const r=d(t,["finishReason"]);r!=null&&f(e,["finishReason"],r);const u=d(t,["avgLogprobs"]);u!=null&&f(e,["avgLogprobs"],u);const p=d(t,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const y=d(t,["index"]);y!=null&&f(e,["index"],y);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function oS(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function Hv(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(r=>US(r))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function lS(t,e){const n={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function aS(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["dest"]);return e!==void 0&&l!=null&&f(e,["outputConfig"],XT(JT(l))),n}function cx(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],ZT(t,Uv(t,l)));const r=d(e,["config"]);return r!=null&&lS(r,n),n}function rS(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],pt(t,s));const l=d(e,["src"]);l!=null&&f(n,["inputConfig"],eS(Uv(t,l)));const r=d(e,["config"]);return r!=null&&aS(r,n),n}function cS(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),n}function uS(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],yS(t,l));const r=d(e,["config"]);return r!=null&&cS(r,n),n}function dS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function fS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function hS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);return r!=null&&f(e,["error"],r),e}function pS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);return r!=null&&f(e,["error"],r),e}function mS(t,e){const n={},s=d(e,["contents"]);if(s!=null){let r=xh(t,s);Array.isArray(r)&&(r=r.map(u=>u)),f(n,["requests[]","request","content"],r)}const l=d(e,["config"]);return l!=null&&(f(n,["_self"],gS(l,n)),fT(n,{"requests[].*":"requests[].request.*"})),n}function gS(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const r=d(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&f(e,["requests[]","outputDimensionality"],r),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function yS(t,e){const n={},s=d(e,["fileName"]);s!=null&&f(n,["file_name"],s);const l=d(e,["inlinedRequests"]);return l!=null&&f(n,["requests"],mS(t,l)),n}function xS(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function vS(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _S(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ES(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],Hv(bn(l)));const r=d(e,["temperature"]);r!=null&&f(s,["temperature"],r);const u=d(e,["topP"]);u!=null&&f(s,["topP"],u);const p=d(e,["topK"]);p!=null&&f(s,["topK"],p);const y=d(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const D=d(e,["seed"]);D!=null&&f(s,["seed"],D);const k=d(e,["responseMimeType"]);k!=null&&f(s,["responseMimeType"],k);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],vh(G));const X=d(e,["responseJsonSchema"]);if(X!=null&&f(s,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=d(e,["safetySettings"]);if(n!==void 0&&j!=null){let ue=j;Array.isArray(ue)&&(ue=ue.map(Je=>BS(Je))),f(n,["safetySettings"],ue)}const M=d(e,["tools"]);if(n!==void 0&&M!=null){let ue=hl(M);Array.isArray(ue)&&(ue=ue.map(Je=>HS(fl(Je)))),f(n,["tools"],ue)}const fe=d(e,["toolConfig"]);if(n!==void 0&&fe!=null&&f(n,["toolConfig"],OS(fe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);n!==void 0&&ie!=null&&f(n,["cachedContent"],ns(t,ie));const oe=d(e,["responseModalities"]);oe!=null&&f(s,["responseModalities"],oe);const xe=d(e,["mediaResolution"]);xe!=null&&f(s,["mediaResolution"],xe);const ce=d(e,["speechConfig"]);if(ce!=null&&f(s,["speechConfig"],_h(ce)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ie=d(e,["thinkingConfig"]);Ie!=null&&f(s,["thinkingConfig"],Ie);const qe=d(e,["imageConfig"]);qe!=null&&f(s,["imageConfig"],AS(qe));const Ye=d(e,["enableEnhancedCivicAnswers"]);if(Ye!=null&&f(s,["enableEnhancedCivicAnswers"],Ye),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function CS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(m=>sS(m))),f(e,["candidates"],y)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const r=d(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const u=d(t,["responseId"]);u!=null&&f(e,["responseId"],u);const p=d(t,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function bS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function TS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],pl(t,s)),n}function SS(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function NS(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function AS(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wS(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["request","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let p=si(l);Array.isArray(p)&&(p=p.map(y=>Hv(y))),f(n,["request","contents"],p)}const r=d(e,["metadata"]);r!=null&&f(n,["metadata"],r);const u=d(e,["config"]);return u!=null&&f(n,["request","generationConfig"],ES(t,u,d(n,["request"],{}))),n}function IS(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],CS(n));const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function RS(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);if(e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function MS(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const r=d(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),n}function DS(t){const e={},n=d(t,["config"]);return n!=null&&RS(n,e),e}function kS(t){const e={},n=d(t,["config"]);return n!=null&&MS(n,e),e}function PS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["operations"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>fc(u))),f(e,["batchJobs"],r)}return e}function LS(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["batchPredictionJobs"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>Bf(u))),f(e,["batchJobs"],r)}return e}function US(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const r=d(t,["fileData"]);r!=null&&f(e,["fileData"],xS(r));const u=d(t,["functionCall"]);u!=null&&f(e,["functionCall"],vS(u));const p=d(t,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=d(t,["inlineData"]);y!=null&&f(e,["inlineData"],tS(y));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function BS(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function OS(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],_S(s)),e}function HS(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=d(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const u=d(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],SS(u));const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],NS(p));const y=d(t,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Wi;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Wi||(Wi={}));class co{constructor(e,n,s,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,l)}init(e,n,s){var l,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(r=(l=u.config)===null||l===void 0?void 0:l.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GS extends ts{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Wi.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=cx(this.apiClient,e),s=n._url,l=ye("{model}:batchGenerateContent",s),p=n.batch.inputConfig.requests,y=p.requests,m=[];for(const v of y){const _=Object.assign({},v);if(_.systemInstruction){const E=_.systemInstruction;delete _.systemInstruction;const T=_.request;T.systemInstruction=E,_.request=T}m.push(_)}return p.requests=m,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},l=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${l}`),s.dest===void 0){const r=this.getGcsUri(e),u=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?s.dest=`${r.slice(0,-6)}/dest`:s.dest=`${r}_dest_${l}`;else if(u)s.dest=`${u}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=rS(this.apiClient,e);return p=ye("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Bf(v))}else{const m=cx(this.apiClient,e);return p=ye("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>fc(v))}}async createEmbeddingsInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=uS(this.apiClient,e);return r=ye("{model}:asyncBatchEmbedContent",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>fc(y))}}async get(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=TS(this.apiClient,e);return p=ye("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Bf(v))}else{const m=bS(this.apiClient,e);return p=ye("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>fc(v))}}async cancel(e){var n,s,l,r;let u="",p={};if(this.apiClient.isVertexAI()){const y=iS(this.apiClient,e);u=ye("batchPredictionJobs/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const y=nS(this.apiClient,e);u=ye("batches/{name}:cancel",y._url),p=y._query,delete y._url,delete y._query,await this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=kS(e);return p=ye("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=LS(v),E=new ox;return Object.assign(E,_),E})}else{const m=DS(e);return p=ye("batches",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=PS(v),E=new ox;return Object.assign(E,_),E})}}async delete(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=fS(this.apiClient,e);return p=ye("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>pS(v))}else{const m=dS(this.apiClient,e);return p=ye("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>hS(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qS(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function ux(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(r=>uN(r))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function VS(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let v=si(u);Array.isArray(v)&&(v=v.map(_=>ux(_))),f(e,["contents"],v)}const p=d(t,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],ux(bn(p)));const y=d(t,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(_=>fN(_))),f(e,["tools"],v)}const m=d(t,["toolConfig"]);if(e!==void 0&&m!=null&&f(e,["toolConfig"],dN(m)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function FS(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const r=d(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const u=d(t,["contents"]);if(e!==void 0&&u!=null){let _=si(u);Array.isArray(_)&&(_=_.map(E=>E)),f(e,["contents"],_)}const p=d(t,["systemInstruction"]);e!==void 0&&p!=null&&f(e,["systemInstruction"],bn(p));const y=d(t,["tools"]);if(e!==void 0&&y!=null){let _=y;Array.isArray(_)&&(_=_.map(E=>hN(E))),f(e,["tools"],_)}const m=d(t,["toolConfig"]);e!==void 0&&m!=null&&f(e,["toolConfig"],m);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function zS(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],Av(t,s));const l=d(e,["config"]);return l!=null&&VS(l,n),n}function jS(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],Av(t,s));const l=d(e,["config"]);return l!=null&&FS(l,n),n}function YS(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ns(t,s)),n}function $S(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ns(t,s)),n}function JS(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function KS(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function QS(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function XS(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WS(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZS(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const r=d(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const u=d(t,["response"]);u!=null&&f(e,["response"],u);const p=d(t,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function eN(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ns(t,s)),n}function tN(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ns(t,s)),n}function nN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function iN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function sN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function oN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function lN(t){const e={},n=d(t,["config"]);return n!=null&&sN(n,e),e}function aN(t){const e={},n=d(t,["config"]);return n!=null&&oN(n,e),e}function rN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["cachedContents"],r)}return e}function cN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["cachedContents"],r)}return e}function uN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const r=d(t,["fileData"]);r!=null&&f(e,["fileData"],QS(r));const u=d(t,["functionCall"]);u!=null&&f(e,["functionCall"],XS(u));const p=d(t,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=d(t,["inlineData"]);y!=null&&f(e,["inlineData"],qS(y));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function dN(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],WS(s)),e}function fN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=d(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const u=d(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],nN(u));const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],iN(p));const y=d(t,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function hN(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const r=d(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const u=d(t,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>ZS(E))),f(e,["functionDeclarations"],_)}const p=d(t,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=d(t,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=d(t,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function pN(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function mN(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function gN(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],ns(t,s));const l=d(e,["config"]);return l!=null&&pN(l,n),n}function yN(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],ns(t,s));const l=d(e,["config"]);return l!=null&&mN(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xN extends ts{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Wi.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=jS(this.apiClient,e);return p=ye("cachedContents",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=zS(this.apiClient,e);return p=ye("cachedContents",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async get(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=tN(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=eN(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async delete(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=$S(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=KS(v),E=new ix;return Object.assign(E,_),E})}else{const m=YS(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=JS(v),E=new ix;return Object.assign(E,_),E})}}async update(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=yN(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>v)}else{const m=gN(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>v)}}async listInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=aN(e);return p=ye("cachedContents",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=cN(v),E=new sx;return Object.assign(E,_),E})}else{const m=lN(e);return p=ye("cachedContents",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=rN(v),E=new sx;return Object.assign(E,_),E})}}}function _c(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(n[s[l]]=t[s[l]]);return n}function dx(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(t){return this instanceof Ve?(this.v=t,this):new Ve(t)}function pi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),l,r=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",u),l[Symbol.asyncIterator]=function(){return this},l;function u(T){return function(N){return Promise.resolve(N).then(T,_)}}function p(T,N){s[T]&&(l[T]=function(D){return new Promise(function(k,G){r.push([T,D,k,G])>1||y(T,D)})},N&&(l[T]=N(l[T])))}function y(T,N){try{m(s[T](N))}catch(D){E(r[0][3],D)}}function m(T){T.value instanceof Ve?Promise.resolve(T.value.v).then(v,_):E(r[0][2],T)}function v(T){y("next",T)}function _(T){y("throw",T)}function E(T,N){T(N),r.shift(),r.length&&y(r[0][0],r[0][1])}}function mi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof dx=="function"?dx(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(r){n[r]=t[r]&&function(u){return new Promise(function(p,y){u=t[r](u),l(p,y,u.done,u.value)})}}function l(r,u,p,y){Promise.resolve(y).then(function(m){r({value:m,done:p})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Gv(n)}function Gv(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function _N(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fx(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const l=[];let r=!0;for(;s<n&&t[s].role==="model";)l.push(t[s]),r&&!Gv(t[s])&&(r=!1),s++;r?e.push(...l):e.pop()}return e}class EN{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new CN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class CN{constructor(e,n,s,l={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=l,this.history=r,this.sendPromise=Promise.resolve(),_N(r)}async sendMessage(e){var n;await this.sendPromise;const s=bn(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,u,p;const y=await l,m=(u=(r=y.candidates)===null||r===void 0?void 0:r[0])===null||u===void 0?void 0:u.content,v=y.automaticFunctionCallingHistory,_=this.getHistory(!0).length;let E=[];v!=null&&(E=(p=v.slice(_))!==null&&p!==void 0?p:[]);const T=m?[m]:[];this.recordHistory(s,T,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const s=bn(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const r=await l;return this.processStreamResponse(r,s)}getHistory(e=!1){const n=e?fx(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return pi(this,arguments,function*(){var l,r,u,p,y,m;const v=[];try{for(var _=!0,E=mi(e),T;T=yield Ve(E.next()),l=T.done,!l;_=!0){p=T.value,_=!1;const N=p;if(vN(N)){const D=(m=(y=N.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;D!==void 0&&v.push(D)}yield yield Ve(N)}}catch(N){r={error:N}}finally{try{!_&&!l&&(u=E.return)&&(yield Ve(u.call(E)))}finally{if(r)throw r.error}}this.recordHistory(n,v)})}recordHistory(e,n,s){let l=[];n.length>0&&n.every(r=>r.role!==void 0)?l=n:l.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...fx(s)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wa extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wa.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bN(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function TN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function SN(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],kv(n)),e}function NN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function AN(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],kv(n)),e}function wN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function IN(t){const e={},n=d(t,["config"]);return n!=null&&wN(n,e),e}function RN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["files"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MN extends ts{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Wi.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=IN(e);return r=ye("files",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>{const m=RN(y),v=new LT;return Object.assign(v,m),v})}}async createInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=bN(e);return r=ye("upload/v1beta/files",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=TN(y),v=new UT;return Object.assign(v,m),v})}}async get(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=AN(e);return r=ye("files/{file}",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=SN(e);return r=ye("files/{file}",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>{const m=NN(y),v=new BT;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hc(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function DN(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(r=>JN(r))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function kN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function PN(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LN(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const r=d(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const u=d(t,["response"]);u!=null&&f(e,["response"],u);const p=d(t,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function UN(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const r=d(t,["candidateCount"]);r!=null&&f(e,["candidateCount"],r);const u=d(t,["enableAffectiveDialog"]);u!=null&&f(e,["enableAffectiveDialog"],u);const p=d(t,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const y=d(t,["logprobs"]);y!=null&&f(e,["logprobs"],y);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const D=d(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const k=d(t,["routingConfig"]);k!=null&&f(e,["routingConfig"],k);const G=d(t,["seed"]);G!=null&&f(e,["seed"],G);const X=d(t,["speechConfig"]);X!=null&&f(e,["speechConfig"],X);const j=d(t,["stopSequences"]);j!=null&&f(e,["stopSequences"],j);const M=d(t,["temperature"]);M!=null&&f(e,["temperature"],M);const fe=d(t,["thinkingConfig"]);fe!=null&&f(e,["thinkingConfig"],fe);const ie=d(t,["topK"]);ie!=null&&f(e,["topK"],ie);const oe=d(t,["topP"]);if(oe!=null&&f(e,["topP"],oe),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function ON(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function HN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const r=d(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const u=d(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const p=d(t,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=d(t,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Eh(_));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],DN(bn(N)));const D=d(t,["tools"]);if(e!==void 0&&D!=null){let ie=hl(D);Array.isArray(ie)&&(ie=ie.map(oe=>QN(fl(oe)))),f(e,["setup","tools"],ie)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&f(e,["setup","sessionResumption"],KN(k));const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const X=d(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const j=d(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&f(e,["setup","realtimeInputConfig"],j);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const fe=d(t,["proactivity"]);if(e!==void 0&&fe!=null&&f(e,["setup","proactivity"],fe),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function GN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],UN(s));const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const r=d(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const u=d(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const p=d(t,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=d(t,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Eh(_));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],bn(N));const D=d(t,["tools"]);if(e!==void 0&&D!=null){let oe=hl(D);Array.isArray(oe)&&(oe=oe.map(xe=>XN(fl(xe)))),f(e,["setup","tools"],oe)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&f(e,["setup","sessionResumption"],k);const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const X=d(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const j=d(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&f(e,["setup","realtimeInputConfig"],j);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const fe=d(t,["proactivity"]);e!==void 0&&fe!=null&&f(e,["setup","proactivity"],fe);const ie=d(t,["explicitVadSignal"]);return e!==void 0&&ie!=null&&f(e,["setup","explicitVadSignal"],ie),n}function qN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],pt(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],HN(l,n)),n}function VN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],pt(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],GN(l,n)),n}function FN(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function zN(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["weightedPrompts"],s)}return e}function jN(t){const e={},n=d(t,["media"]);if(n!=null){let m=wv(n);Array.isArray(m)&&(m=m.map(v=>hc(v))),f(e,["mediaChunks"],m)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],hc(Rv(s)));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const r=d(t,["video"]);r!=null&&f(e,["video"],hc(Iv(r)));const u=d(t,["text"]);u!=null&&f(e,["text"],u);const p=d(t,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=d(t,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function YN(t){const e={},n=d(t,["media"]);if(n!=null){let m=wv(n);Array.isArray(m)&&(m=m.map(v=>v)),f(e,["mediaChunks"],m)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],Rv(s));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const r=d(t,["video"]);r!=null&&f(e,["video"],Iv(r));const u=d(t,["text"]);u!=null&&f(e,["text"],u);const p=d(t,["activityStart"]);p!=null&&f(e,["activityStart"],p);const y=d(t,["activityEnd"]);return y!=null&&f(e,["activityEnd"],y),e}function $N(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const l=d(t,["toolCall"]);l!=null&&f(e,["toolCall"],l);const r=d(t,["toolCallCancellation"]);r!=null&&f(e,["toolCallCancellation"],r);const u=d(t,["usageMetadata"]);u!=null&&f(e,["usageMetadata"],WN(u));const p=d(t,["goAway"]);p!=null&&f(e,["goAway"],p);const y=d(t,["sessionResumptionUpdate"]);y!=null&&f(e,["sessionResumptionUpdate"],y);const m=d(t,["voiceActivityDetectionSignal"]);m!=null&&f(e,["voiceActivityDetectionSignal"],m);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],ZN(v)),e}function JN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const r=d(t,["fileData"]);r!=null&&f(e,["fileData"],kN(r));const u=d(t,["functionCall"]);u!=null&&f(e,["functionCall"],PN(u));const p=d(t,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=d(t,["inlineData"]);y!=null&&f(e,["inlineData"],hc(y));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function KN(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=d(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const u=d(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],BN(u));const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],ON(p));const y=d(t,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function XN(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const r=d(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const u=d(t,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>LN(E))),f(e,["functionDeclarations"],_)}const p=d(t,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=d(t,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=d(t,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function WN(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const l=d(t,["candidatesTokenCount"]);l!=null&&f(e,["responseTokenCount"],l);const r=d(t,["toolUsePromptTokenCount"]);r!=null&&f(e,["toolUsePromptTokenCount"],r);const u=d(t,["thoughtsTokenCount"]);u!=null&&f(e,["thoughtsTokenCount"],u);const p=d(t,["totalTokenCount"]);p!=null&&f(e,["totalTokenCount"],p);const y=d(t,["promptTokensDetails"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["promptTokensDetails"],T)}const m=d(t,["cacheTokensDetails"]);if(m!=null){let T=m;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["cacheTokensDetails"],T)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["responseTokensDetails"],T)}const _=d(t,["toolUsePromptTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["toolUsePromptTokensDetails"],T)}const E=d(t,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}function ZN(t){const e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function tA(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],nA(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const r=d(t,["finishReason"]);r!=null&&f(e,["finishReason"],r);const u=d(t,["avgLogprobs"]);u!=null&&f(e,["avgLogprobs"],u);const p=d(t,["groundingMetadata"]);p!=null&&f(e,["groundingMetadata"],p);const y=d(t,["index"]);y!=null&&f(e,["index"],y);const m=d(t,["logprobsResult"]);m!=null&&f(e,["logprobsResult"],m);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const _=d(t,["urlContextMetadata"]);return _!=null&&f(e,["urlContextMetadata"],_),e}function nA(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function iA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let r=si(l);Array.isArray(r)&&(r=r.map(u=>u)),f(n,["contents"],r)}return n}function sA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(r=>r)),f(e,["tokensInfo"],l)}return e}function oA(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const s=d(t,["statistics"]);return s!=null&&f(e,["statistics"],lA(s)),e}function lA(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const s=d(t,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function qc(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(r=>mw(r))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function aA(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const s=d(t,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function rA(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cA(t,e){const n={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],bn(s));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(p=>zv(p))),f(e,["tools"],u)}const r=d(t,["generationConfig"]);return e!==void 0&&r!=null&&f(e,["generationConfig"],ew(r)),n}function uA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let u=si(l);Array.isArray(u)&&(u=u.map(p=>qc(p))),f(n,["contents"],u)}const r=d(e,["config"]);return r!=null&&rA(r),n}function dA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let u=si(l);Array.isArray(u)&&(u=u.map(p=>p)),f(n,["contents"],u)}const r=d(e,["config"]);return r!=null&&cA(r,n),n}function fA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const l=d(t,["cachedContentTokenCount"]);return l!=null&&f(e,["cachedContentTokenCount"],l),e}function hA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function pA(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],pt(t,s)),n}function mA(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],pt(t,s)),n}function gA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function yA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function xA(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const p=d(t,["guidanceScale"]);e!==void 0&&p!=null&&f(e,["parameters","guidanceScale"],p);const y=d(t,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const D=d(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const k=d(t,["addWatermark"]);e!==void 0&&k!=null&&f(e,["parameters","addWatermark"],k);const G=d(t,["labels"]);e!==void 0&&G!=null&&f(e,["labels"],G);const X=d(t,["editMode"]);e!==void 0&&X!=null&&f(e,["parameters","editMode"],X);const j=d(t,["baseSteps"]);return e!==void 0&&j!=null&&f(e,["parameters","editConfig","baseSteps"],j),n}function vA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const r=d(e,["referenceImages"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>Ew(y))),f(n,["instances[0]","referenceImages"],p)}const u=d(e,["config"]);return u!=null&&xA(u,n),n}function _A(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(r=>Vc(r))),f(e,["generatedImages"],l)}return e}function EA(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const r=d(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&f(e,["requests[]","outputDimensionality"],r),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CA(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const r=d(t,["outputDimensionality"]);e!==void 0&&r!=null&&f(e,["parameters","outputDimensionality"],r);const u=d(t,["mimeType"]);e!==void 0&&u!=null&&f(e,["instances[]","mimeType"],u);const p=d(t,["autoTruncate"]);return e!==void 0&&p!=null&&f(e,["parameters","autoTruncate"],p),n}function bA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let p=xh(t,l);Array.isArray(p)&&(p=p.map(y=>y)),f(n,["requests[]","content"],p)}const r=d(e,["config"]);r!=null&&EA(r,n);const u=d(e,["model"]);return u!==void 0&&f(n,["requests[]","model"],pt(t,u)),n}function TA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let u=xh(t,l);Array.isArray(u)&&(u=u.map(p=>p)),f(n,["instances[]","content"],u)}const r=d(e,["config"]);return r!=null&&CA(r,n),n}function SA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["embeddings"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["embeddings"],r)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function NA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>oA(u))),f(e,["embeddings"],r)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function AA(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const s=d(t,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function wA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function IA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RA(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function MA(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const r=d(t,["parametersJsonSchema"]);r!=null&&f(e,["parametersJsonSchema"],r);const u=d(t,["response"]);u!=null&&f(e,["response"],u);const p=d(t,["responseJsonSchema"]);if(p!=null&&f(e,["responseJsonSchema"],p),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function DA(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],qc(bn(l)));const r=d(e,["temperature"]);r!=null&&f(s,["temperature"],r);const u=d(e,["topP"]);u!=null&&f(s,["topP"],u);const p=d(e,["topK"]);p!=null&&f(s,["topK"],p);const y=d(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const D=d(e,["seed"]);D!=null&&f(s,["seed"],D);const k=d(e,["responseMimeType"]);k!=null&&f(s,["responseMimeType"],k);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],vh(G));const X=d(e,["responseJsonSchema"]);if(X!=null&&f(s,["responseJsonSchema"],X),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=d(e,["safetySettings"]);if(n!==void 0&&j!=null){let ue=j;Array.isArray(ue)&&(ue=ue.map(Je=>Cw(Je))),f(n,["safetySettings"],ue)}const M=d(e,["tools"]);if(n!==void 0&&M!=null){let ue=hl(M);Array.isArray(ue)&&(ue=ue.map(Je=>Iw(fl(Je)))),f(n,["tools"],ue)}const fe=d(e,["toolConfig"]);if(n!==void 0&&fe!=null&&f(n,["toolConfig"],ww(fe)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ie=d(e,["cachedContent"]);n!==void 0&&ie!=null&&f(n,["cachedContent"],ns(t,ie));const oe=d(e,["responseModalities"]);oe!=null&&f(s,["responseModalities"],oe);const xe=d(e,["mediaResolution"]);xe!=null&&f(s,["mediaResolution"],xe);const ce=d(e,["speechConfig"]);if(ce!=null&&f(s,["speechConfig"],_h(ce)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Ie=d(e,["thinkingConfig"]);Ie!=null&&f(s,["thinkingConfig"],Ie);const qe=d(e,["imageConfig"]);qe!=null&&f(s,["imageConfig"],ow(qe));const Ye=d(e,["enableEnhancedCivicAnswers"]);if(Ye!=null&&f(s,["enableEnhancedCivicAnswers"],Ye),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function kA(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],bn(l));const r=d(e,["temperature"]);r!=null&&f(s,["temperature"],r);const u=d(e,["topP"]);u!=null&&f(s,["topP"],u);const p=d(e,["topK"]);p!=null&&f(s,["topK"],p);const y=d(e,["candidateCount"]);y!=null&&f(s,["candidateCount"],y);const m=d(e,["maxOutputTokens"]);m!=null&&f(s,["maxOutputTokens"],m);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const _=d(e,["responseLogprobs"]);_!=null&&f(s,["responseLogprobs"],_);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const D=d(e,["seed"]);D!=null&&f(s,["seed"],D);const k=d(e,["responseMimeType"]);k!=null&&f(s,["responseMimeType"],k);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],vh(G));const X=d(e,["responseJsonSchema"]);X!=null&&f(s,["responseJsonSchema"],X);const j=d(e,["routingConfig"]);j!=null&&f(s,["routingConfig"],j);const M=d(e,["modelSelectionConfig"]);M!=null&&f(s,["modelConfig"],M);const fe=d(e,["safetySettings"]);if(n!==void 0&&fe!=null){let te=fe;Array.isArray(te)&&(te=te.map(ve=>ve)),f(n,["safetySettings"],te)}const ie=d(e,["tools"]);if(n!==void 0&&ie!=null){let te=hl(ie);Array.isArray(te)&&(te=te.map(ve=>zv(fl(ve)))),f(n,["tools"],te)}const oe=d(e,["toolConfig"]);n!==void 0&&oe!=null&&f(n,["toolConfig"],oe);const xe=d(e,["labels"]);n!==void 0&&xe!=null&&f(n,["labels"],xe);const ce=d(e,["cachedContent"]);n!==void 0&&ce!=null&&f(n,["cachedContent"],ns(t,ce));const Ie=d(e,["responseModalities"]);Ie!=null&&f(s,["responseModalities"],Ie);const qe=d(e,["mediaResolution"]);qe!=null&&f(s,["mediaResolution"],qe);const Ye=d(e,["speechConfig"]);Ye!=null&&f(s,["speechConfig"],_h(Ye));const ue=d(e,["audioTimestamp"]);ue!=null&&f(s,["audioTimestamp"],ue);const Je=d(e,["thinkingConfig"]);Je!=null&&f(s,["thinkingConfig"],Je);const Fe=d(e,["imageConfig"]);if(Fe!=null&&f(s,["imageConfig"],lw(Fe)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const O=d(e,["modelArmorConfig"]);return n!==void 0&&O!=null&&f(n,["modelArmorConfig"],O),s}function hx(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let u=si(l);Array.isArray(u)&&(u=u.map(p=>qc(p))),f(n,["contents"],u)}const r=d(e,["config"]);return r!=null&&f(n,["generationConfig"],DA(t,r,n)),n}function px(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["contents"]);if(l!=null){let u=si(l);Array.isArray(u)&&(u=u.map(p=>p)),f(n,["contents"],u)}const r=d(e,["config"]);return r!=null&&f(n,["generationConfig"],kA(t,r,n)),n}function mx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let y=s;Array.isArray(y)&&(y=y.map(m=>tA(m))),f(e,["candidates"],y)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const r=d(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const u=d(t,["responseId"]);u!=null&&f(e,["responseId"],u);const p=d(t,["usageMetadata"]);return p!=null&&f(e,["usageMetadata"],p),e}function gx(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>v)),f(e,["candidates"],m)}const l=d(t,["createTime"]);l!=null&&f(e,["createTime"],l);const r=d(t,["modelVersion"]);r!=null&&f(e,["modelVersion"],r);const u=d(t,["promptFeedback"]);u!=null&&f(e,["promptFeedback"],u);const p=d(t,["responseId"]);p!=null&&f(e,["responseId"],p);const y=d(t,["usageMetadata"]);return y!=null&&f(e,["usageMetadata"],y),e}function PA(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const r=d(t,["guidanceScale"]);if(e!==void 0&&r!=null&&f(e,["parameters","guidanceScale"],r),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const p=d(t,["personGeneration"]);e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p);const y=d(t,["includeSafetyAttributes"]);e!==void 0&&y!=null&&f(e,["parameters","includeSafetyAttributes"],y);const m=d(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function LA(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const r=d(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const u=d(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const p=d(t,["guidanceScale"]);e!==void 0&&p!=null&&f(e,["parameters","guidanceScale"],p);const y=d(t,["seed"]);e!==void 0&&y!=null&&f(e,["parameters","seed"],y);const m=d(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&f(e,["parameters","safetySetting"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["includeSafetyAttributes"]);e!==void 0&&_!=null&&f(e,["parameters","includeSafetyAttributes"],_);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const D=d(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const k=d(t,["addWatermark"]);e!==void 0&&k!=null&&f(e,["parameters","addWatermark"],k);const G=d(t,["labels"]);e!==void 0&&G!=null&&f(e,["labels"],G);const X=d(t,["imageSize"]);e!==void 0&&X!=null&&f(e,["parameters","sampleImageSize"],X);const j=d(t,["enhancePrompt"]);return e!==void 0&&j!=null&&f(e,["parameters","enhancePrompt"],j),n}function UA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const r=d(e,["config"]);return r!=null&&PA(r,n),n}function BA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const r=d(e,["config"]);return r!=null&&LA(r,n),n}function OA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>QA(u))),f(e,["generatedImages"],r)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],Vv(l)),e}function HA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>Vc(u))),f(e,["generatedImages"],r)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],Fv(l)),e}function GA(t,e){const n={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=d(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const u=d(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const p=d(t,["personGeneration"]);if(e!==void 0&&p!=null&&f(e,["parameters","personGeneration"],p),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=d(t,["negativePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","negativePrompt"],y);const m=d(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Fc(v));const _=d(t,["referenceImages"]);if(e!==void 0&&_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>Vw(T))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function qA(t,e){const n={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const r=d(t,["fps"]);e!==void 0&&r!=null&&f(e,["parameters","fps"],r);const u=d(t,["durationSeconds"]);e!==void 0&&u!=null&&f(e,["parameters","durationSeconds"],u);const p=d(t,["seed"]);e!==void 0&&p!=null&&f(e,["parameters","seed"],p);const y=d(t,["aspectRatio"]);e!==void 0&&y!=null&&f(e,["parameters","aspectRatio"],y);const m=d(t,["resolution"]);e!==void 0&&m!=null&&f(e,["parameters","resolution"],m);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const _=d(t,["pubsubTopic"]);e!==void 0&&_!=null&&f(e,["parameters","pubsubTopic"],_);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const N=d(t,["generateAudio"]);e!==void 0&&N!=null&&f(e,["parameters","generateAudio"],N);const D=d(t,["lastFrame"]);e!==void 0&&D!=null&&f(e,["instances[0]","lastFrame"],xi(D));const k=d(t,["referenceImages"]);if(e!==void 0&&k!=null){let j=k;Array.isArray(j)&&(j=j.map(M=>Fw(M))),f(e,["instances[0]","referenceImages"],j)}const G=d(t,["mask"]);e!==void 0&&G!=null&&f(e,["instances[0]","mask"],qw(G));const X=d(t,["compressionQuality"]);return e!==void 0&&X!=null&&f(e,["parameters","compressionQuality"],X),n}function VA(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response","generateVideoResponse"]);return u!=null&&f(e,["response"],YA(u)),e}function FA(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response"]);return u!=null&&f(e,["response"],$A(u)),e}function zA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const r=d(e,["image"]);r!=null&&f(n,["instances[0]","image"],Fc(r));const u=d(e,["video"]);u!=null&&f(n,["instances[0]","video"],jv(u));const p=d(e,["source"]);p!=null&&JA(p,n);const y=d(e,["config"]);return y!=null&&GA(y,n),n}function jA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const r=d(e,["image"]);r!=null&&f(n,["instances[0]","image"],xi(r));const u=d(e,["video"]);u!=null&&f(n,["instances[0]","video"],Yv(u));const p=d(e,["source"]);p!=null&&KA(p,n);const y=d(e,["config"]);return y!=null&&qA(y,n),n}function YA(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>WA(u))),f(e,["generatedVideos"],r)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function $A(t){const e={},n=d(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(u=>ZA(u))),f(e,["generatedVideos"],r)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function JA(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Fc(l));const r=d(t,["video"]);return e!==void 0&&r!=null&&f(e,["instances[0]","video"],jv(r)),n}function KA(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],xi(l));const r=d(t,["video"]);return e!==void 0&&r!=null&&f(e,["instances[0]","video"],Yv(r)),n}function QA(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],aw(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);return l!=null&&f(e,["safetyAttributes"],Vv(l)),e}function Vc(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],qv(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);l!=null&&f(e,["safetyAttributes"],Fv(l));const r=d(t,["prompt"]);return r!=null&&f(e,["enhancedPrompt"],r),e}function XA(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],qv(n));const s=d(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(r=>r)),f(e,["labels"],l)}return e}function WA(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],Hw(n)),e}function ZA(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],Gw(n)),e}function ew(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const r=d(t,["candidateCount"]);r!=null&&f(e,["candidateCount"],r);const u=d(t,["enableAffectiveDialog"]);u!=null&&f(e,["enableAffectiveDialog"],u);const p=d(t,["frequencyPenalty"]);p!=null&&f(e,["frequencyPenalty"],p);const y=d(t,["logprobs"]);y!=null&&f(e,["logprobs"],y);const m=d(t,["maxOutputTokens"]);m!=null&&f(e,["maxOutputTokens"],m);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const _=d(t,["presencePenalty"]);_!=null&&f(e,["presencePenalty"],_);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const D=d(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const k=d(t,["routingConfig"]);k!=null&&f(e,["routingConfig"],k);const G=d(t,["seed"]);G!=null&&f(e,["seed"],G);const X=d(t,["speechConfig"]);X!=null&&f(e,["speechConfig"],X);const j=d(t,["stopSequences"]);j!=null&&f(e,["stopSequences"],j);const M=d(t,["temperature"]);M!=null&&f(e,["temperature"],M);const fe=d(t,["thinkingConfig"]);fe!=null&&f(e,["thinkingConfig"],fe);const ie=d(t,["topK"]);ie!=null&&f(e,["topK"],ie);const oe=d(t,["topP"]);if(oe!=null&&f(e,["topP"],oe),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function tw(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],pt(t,s)),n}function nw(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],pt(t,s)),n}function iw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function sw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function ow(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);s!=null&&f(e,["imageSize"],s);const l=d(t,["personGeneration"]);l!=null&&f(e,["personGeneration"],l);const r=d(t,["outputMimeType"]);r!=null&&f(e,["imageOutputOptions","mimeType"],r);const u=d(t,["outputCompressionQuality"]);return u!=null&&f(e,["imageOutputOptions","compressionQuality"],u),e}function aw(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Us(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function qv(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],Us(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Fc(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Us(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function xi(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Us(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function rw(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const r=d(e,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const u=d(e,["filter"]);n!==void 0&&u!=null&&f(n,["_query","filter"],u);const p=d(e,["queryBase"]);return n!==void 0&&p!=null&&f(n,["_url","models_url"],Pv(t,p)),s}function cw(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const r=d(e,["pageToken"]);n!==void 0&&r!=null&&f(n,["_query","pageToken"],r);const u=d(e,["filter"]);n!==void 0&&u!=null&&f(n,["_query","filter"],u);const p=d(e,["queryBase"]);return n!==void 0&&p!=null&&f(n,["_url","models_url"],Pv(t,p)),s}function uw(t,e){const n={},s=d(e,["config"]);return s!=null&&rw(t,s,n),n}function dw(t,e){const n={},s=d(e,["config"]);return s!=null&&cw(t,s,n),n}function fw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let r=Lv(l);Array.isArray(r)&&(r=r.map(u=>Of(u))),f(e,["models"],r)}return e}function hw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let r=Lv(l);Array.isArray(r)&&(r=r.map(u=>Hf(u))),f(e,["models"],r)}return e}function pw(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const s=d(t,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const l=d(t,["maskDilation"]);return l!=null&&f(e,["dilation"],l),e}function Of(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const r=d(t,["version"]);r!=null&&f(e,["version"],r);const u=d(t,["_self"]);u!=null&&f(e,["tunedModelInfo"],Rw(u));const p=d(t,["inputTokenLimit"]);p!=null&&f(e,["inputTokenLimit"],p);const y=d(t,["outputTokenLimit"]);y!=null&&f(e,["outputTokenLimit"],y);const m=d(t,["supportedGenerationMethods"]);m!=null&&f(e,["supportedActions"],m);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const _=d(t,["maxTemperature"]);_!=null&&f(e,["maxTemperature"],_);const E=d(t,["topP"]);E!=null&&f(e,["topP"],E);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const N=d(t,["thinking"]);return N!=null&&f(e,["thinking"],N),e}function Hf(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const r=d(t,["versionId"]);r!=null&&f(e,["version"],r);const u=d(t,["deployedModels"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>AA(E))),f(e,["endpoints"],_)}const p=d(t,["labels"]);p!=null&&f(e,["labels"],p);const y=d(t,["_self"]);y!=null&&f(e,["tunedModelInfo"],Mw(y));const m=d(t,["defaultCheckpointId"]);m!=null&&f(e,["defaultCheckpointId"],m);const v=d(t,["checkpoints"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(E=>E)),f(e,["checkpoints"],_)}return e}function mw(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const r=d(t,["fileData"]);r!=null&&f(e,["fileData"],wA(r));const u=d(t,["functionCall"]);u!=null&&f(e,["functionCall"],IA(u));const p=d(t,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=d(t,["inlineData"]);y!=null&&f(e,["inlineData"],eA(y));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function gw(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],xi(n)),e}function yw(t,e){const n={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const r=d(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const u=d(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const y=d(t,["personGeneration"]);e!==void 0&&y!=null&&f(e,["parameters","personGeneration"],y);const m=d(t,["addWatermark"]);e!==void 0&&m!=null&&f(e,["parameters","addWatermark"],m);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const _=d(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","compressionQuality"],_);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const T=d(t,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),n}function xw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["source"]);l!=null&&_w(l,n);const r=d(e,["config"]);return r!=null&&yw(r,n),n}function vw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Vc(l))),f(e,["generatedImages"],s)}return e}function _w(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],xi(l));const r=d(t,["productImages"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>gw(p))),f(e,["instances[0]","productImages"],u)}return n}function Ew(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],xi(n));const s=d(t,["referenceId"]);s!=null&&f(e,["referenceId"],s);const l=d(t,["referenceType"]);l!=null&&f(e,["referenceType"],l);const r=d(t,["maskImageConfig"]);r!=null&&f(e,["maskImageConfig"],pw(r));const u=d(t,["controlImageConfig"]);u!=null&&f(e,["controlImageConfig"],aA(u));const p=d(t,["styleImageConfig"]);p!=null&&f(e,["styleImageConfig"],p);const y=d(t,["subjectImageConfig"]);return y!=null&&f(e,["subjectImageConfig"],y),e}function Vv(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function Fv(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function Cw(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function bw(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],xi(n)),e}function Tw(t,e){const n={},s=d(t,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const r=d(t,["confidenceThreshold"]);e!==void 0&&r!=null&&f(e,["parameters","confidenceThreshold"],r);const u=d(t,["maskDilation"]);e!==void 0&&u!=null&&f(e,["parameters","maskDilation"],u);const p=d(t,["binaryColorThreshold"]);e!==void 0&&p!=null&&f(e,["parameters","binaryColorThreshold"],p);const y=d(t,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),n}function Sw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["source"]);l!=null&&Aw(l,n);const r=d(e,["config"]);return r!=null&&Tw(r,n),n}function Nw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>XA(l))),f(e,["generatedMasks"],s)}return e}function Aw(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],xi(l));const r=d(t,["scribbleImage"]);return e!==void 0&&r!=null&&f(e,["instances[0]","scribble"],bw(r)),n}function ww(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],RA(s)),e}function Iw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=d(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const u=d(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],iw(u));const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],sw(p));const y=d(t,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}function zv(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const r=d(t,["enterpriseWebSearch"]);r!=null&&f(e,["enterpriseWebSearch"],r);const u=d(t,["functionDeclarations"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>MA(E))),f(e,["functionDeclarations"],_)}const p=d(t,["googleMaps"]);p!=null&&f(e,["googleMaps"],p);const y=d(t,["googleSearch"]);y!=null&&f(e,["googleSearch"],y);const m=d(t,["googleSearchRetrieval"]);m!=null&&f(e,["googleSearchRetrieval"],m);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Rw(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Mw(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Dw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const r=d(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),n}function kw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const r=d(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&f(e,["defaultCheckpointId"],r),n}function Pw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","name"],pt(t,s));const l=d(e,["config"]);return l!=null&&Dw(l,n),n}function Lw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["config"]);return l!=null&&kw(l,n),n}function Uw(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const r=d(t,["personGeneration"]);e!==void 0&&r!=null&&f(e,["parameters","personGeneration"],r);const u=d(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const p=d(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const y=d(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&f(e,["parameters","outputOptions","compressionQuality"],y);const m=d(t,["enhanceInputImage"]);e!==void 0&&m!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const T=d(t,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),n}function Bw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],pt(t,s));const l=d(e,["image"]);l!=null&&f(n,["instances[0]","image"],xi(l));const r=d(e,["upscaleFactor"]);r!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],r);const u=d(e,["config"]);return u!=null&&Uw(u,n),n}function Ow(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(r=>Vc(r))),f(e,["generatedImages"],l)}return e}function Hw(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Us(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function Gw(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Us(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function qw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],xi(n));const s=d(t,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function Vw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Fc(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function Fw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],xi(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function jv(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["encodedVideo"],Us(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["encoding"],l),e}function Yv(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Us(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zw(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),n}function jw(t){const e={},n=d(t,["config"]);return n!=null&&zw(n,e),e}function Yw(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function $w(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&Yw(s,e),e}function Jw(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Kw(t,e){const n={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["customMetadata"],r)}const l=d(t,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),n}function Qw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const r=d(t,["error"]);r!=null&&f(e,["error"],r);const u=d(t,["response"]);return u!=null&&f(e,["response"],Ww(u)),e}function Xw(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const l=d(t,["config"]);return l!=null&&Kw(l,e),e}function Ww(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function Zw(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function e1(t){const e={},n=d(t,["config"]);return n!=null&&Zw(n,e),e}function t1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["fileSearchStores"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["fileSearchStores"],r)}return e}function $v(t,e){const n={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const r=d(t,["customMetadata"]);if(e!==void 0&&r!=null){let p=r;Array.isArray(p)&&(p=p.map(y=>y)),f(e,["customMetadata"],p)}const u=d(t,["chunkingConfig"]);return e!==void 0&&u!=null&&f(e,["chunkingConfig"],u),n}function n1(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["config"]);return s!=null&&$v(s,e),e}function i1(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s1="Content-Type",o1="X-Server-Timeout",l1="User-Agent",Gf="x-goog-api-client",a1="1.38.0",r1=`google-genai-sdk/${a1}`,c1="v1beta1",u1="v1beta";class d1{constructor(e){var n,s,l;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const r={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(r.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?r.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:c1}else{if(!this.clientOptions.apiKey)throw new wa({message:"API key must be set when using the Gemini API.",status:403});r.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:u1,r.baseUrl="https://generativelanguage.googleapis.com/"}r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const l=[this.getRequestUrlInternal(n)];return s&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Pf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[u,p]of Object.entries(e.queryParams))l.searchParams.append(u,String(p));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,l.toString(),e.abortSignal),this.unaryApiCall(l,r,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[l,r]of Object.entries(n))typeof r=="object"?s[l]=Object.assign(Object.assign({},s[l]),r):r!==void 0&&(s[l]=r);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,l.toString(),e.abortSignal),this.streamApiCall(l,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,l){if(n&&n.timeout||l){const r=new AbortController,u=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const p=setTimeout(()=>r.abort(),n.timeout);p&&typeof p.unref=="function"&&p.unref()}l&&l.addEventListener("abort",()=>{r.abort()}),e.signal=u}return n&&n.extraBody!==null&&f1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await yx(l),new Lf(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await yx(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return pi(this,arguments,function*(){var s;const l=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),r=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let u="";const p="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ve(l.read());if(m){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=r.decode(v,{stream:!0});try{const N=JSON.parse(_);if("error"in N){const D=JSON.parse(JSON.stringify(N.error)),k=D.status,G=D.code,X=`got status: ${k}. ${JSON.stringify(N)}`;if(G>=400&&G<600)throw new wa({message:X,status:G})}}catch(N){if(N.name==="ApiError")throw N}u+=_;let E=-1,T=0;for(;;){E=-1,T=0;for(const k of y){const G=u.indexOf(k);G!==-1&&(E===-1||G<E)&&(E=G,T=k.length)}if(E===-1)break;const N=u.substring(0,E);u=u.substring(E+T);const D=N.trim();if(D.startsWith(p)){const k=D.substring(p.length).trim();try{const G=new Response(k,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new Lf(G))}catch(G){throw new Error(`exception parsing stream chunk ${k}. ${G}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=r1+" "+this.clientOptions.userAgentExtra;return e[l1]=n,e[Gf]=n,e[s1]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[l,r]of Object.entries(e.headers))s.append(l,r);e.timeout&&e.timeout>0&&s.append(o1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const r=this.clientOptions.uploader,u=await r.stat(e);l.sizeBytes=String(u.size);const p=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:u.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=p;const y={file:l},m=this.getFileName(e),v=ye("upload/v1beta/files",y._url),_=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,m,y,n==null?void 0:n.httpOptions);return r.upload(e,_,this)}async uploadFileToFileSearchStore(e,n,s){var l;const r=this.clientOptions.uploader,u=await r.stat(n),p=String(u.size),y=(l=s==null?void 0:s.mimeType)!==null&&l!==void 0?l:u.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),_={};s!=null&&$v(s,_);const E=await this.fetchUploadUrl(m,p,y,v,_,s==null?void 0:s.httpOptions);return r.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,l,r,u){var p;let y={};u?y=u:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},l?{"X-Goog-Upload-File-Name":l}:{})};const m=await this.request({path:e,body:JSON.stringify(r),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(p=m==null?void 0:m.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function yx(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(s);throw n>=400&&n<600?new wa({message:l,status:n}):new Error(l)}}function f1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(r,u){const p=Object.assign({},r);for(const y in u)if(Object.prototype.hasOwnProperty.call(u,y)){const m=u[y],v=p[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?p[y]=s(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),p[y]=m)}return p}const l=s(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h1="mcp_used/unknown";let p1=!1;function Jv(t){for(const e of t)if(m1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return p1}function Kv(t){var e;const n=(e=t[Gf])!==null&&e!==void 0?e:"";t[Gf]=(n+` ${h1}`).trimStart()}function m1(t){return t!==null&&typeof t=="object"&&t instanceof Ch}function g1(t){return pi(this,arguments,function*(n,s=100){let l,r=0;for(;r<s;){const u=yield Ve(n.listTools({cursor:l}));for(const p of u.tools)yield yield Ve(p),r++;if(!u.nextCursor)break;l=u.nextCursor}})}class Ch{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ch(e,n)}async initialize(){var e,n,s,l;if(this.mcpTools.length>0)return;const r={},u=[];for(const v of this.mcpClients)try{for(var p=!0,y=(n=void 0,mi(g1(v))),m;m=await y.next(),e=m.done,!e;p=!0){l=m.value,p=!1;const _=l;u.push(_);const E=_.name;if(r[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);r[E]=v}}catch(_){n={error:_}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),$T(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[s.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const u=await l.callTool({name:s.name,arguments:s.args},void 0,r);n.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function y1(t,e,n){const s=new HT;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(s,l),e(s)}class x1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),u=E1(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),y=`${l}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${p}`;let m=()=>{};const v=new Promise(j=>{m=j}),_=e.callbacks,E=function(){m({})},T=this.apiClient,N={onopen:E,onmessage:j=>{y1(T,_.onmessage,j)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(j){},onclose:(s=_==null?void 0:_.onclose)!==null&&s!==void 0?s:function(j){}},D=this.webSocketFactory.create(y,_1(u),N);D.connect(),await v;const X={setup:{model:pt(this.apiClient,e.model)}};return D.send(JSON.stringify(X)),new v1(D,this.apiClient)}}class v1{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=zN(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=FN(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Xo.PLAY)}pause(){this.sendPlaybackControl(Xo.PAUSE)}stop(){this.sendPlaybackControl(Xo.STOP)}resetContext(){this.sendPlaybackControl(Xo.RESET_CONTEXT)}close(){this.conn.close()}}function _1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function E1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function b1(t,e,n){const s=new OT;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const r=JSON.parse(l);if(t.isVertexAI()){const u=$N(r);Object.assign(s,u)}else Object.assign(s,r);e(s)}class T1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new x1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,l,r,u,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const _=this.apiClient.getHeaders();e.config&&e.config.tools&&Jv(e.config.tools)&&Kv(_);const E=w1(_);if(this.apiClient.isVertexAI()){const ce=this.apiClient.getProject(),Ie=this.apiClient.getLocation(),qe=this.apiClient.getApiKey(),Ye=!!ce&&!!Ie||!!qe;this.apiClient.getCustomBaseUrl()&&!Ye?v=y:(v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v))}else{const ce=this.apiClient.getApiKey();let Ie="BidiGenerateContent",qe="key";ce!=null&&ce.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Ie="BidiGenerateContentConstrained",qe="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${Ie}?${qe}=${ce}`}let T=()=>{};const N=new Promise(ce=>{T=ce}),D=e.callbacks,k=function(){var ce;(ce=D==null?void 0:D.onopen)===null||ce===void 0||ce.call(D),T({})},G=this.apiClient,X={onopen:k,onmessage:ce=>{b1(G,D.onmessage,ce)},onerror:(n=D==null?void 0:D.onerror)!==null&&n!==void 0?n:function(ce){},onclose:(s=D==null?void 0:D.onclose)!==null&&s!==void 0?s:function(ce){}},j=this.webSocketFactory.create(v,A1(E),X);j.connect(),await N;let M=pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const ce=this.apiClient.getProject(),Ie=this.apiClient.getLocation();ce&&Ie&&(M=`projects/${ce}/locations/${Ie}/`+M)}let fe={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[yc.AUDIO]}:e.config.responseModalities=[yc.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ie=(p=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&p!==void 0?p:[],oe=[];for(const ce of ie)if(this.isCallableTool(ce)){const Ie=ce;oe.push(await Ie.tool())}else oe.push(ce);oe.length>0&&(e.config.tools=oe);const xe={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=VN(this.apiClient,xe):fe=qN(this.apiClient,xe),delete fe.config,j.send(JSON.stringify(fe)),new N1(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const S1={turnComplete:!0};class N1{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=si(n.turns),e.isVertexAI()||(s=s.map(l=>qc(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const r of s){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(C1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},S1),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:YN(e)}:n={realtimeInput:jN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function A1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function w1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xx=10;function vx(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(tl(u)){l=!0;break}if(!l)return!0;const r=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function tl(t){return"callTool"in t&&typeof t.callTool=="function"}function I1(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>tl(l)))!==null&&s!==void 0?s:!1}function _x(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,l)=>{if(tl(s))return;const r=s;r.functionDeclarations&&r.functionDeclarations.length>0&&n.push(l)}),n}function Ex(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R1 extends ts{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,l,r,u,p;const y=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!I1(n)||vx(n.config))return await this.generateContentInternal(y);const m=_x(n);if(m.length>0){const D=m.map(k=>`tools[${k}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,_;const E=si(y.contents),T=(r=(l=(s=y.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&r!==void 0?r:xx;let N=0;for(;N<T&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,k=[];for(const G of(p=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&p!==void 0?p:[])if(tl(G)){const j=await G.callTool(v.functionCalls);k.push(...j)}N++,_={role:"user",parts:k},y.contents=si(y.contents),y.contents.push(D),y.contents.push(_),Ex(y.config)&&(E.push(D),E.push(_))}return Ex(y.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async n=>{var s,l,r,u,p;if(this.maybeMoveToResponseJsonSchem(n),vx(n.config)){const _=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(_)}const y=_x(n);if(y.length>0){const _=y.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${_}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(r=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||r===void 0?void 0:r.streamFunctionCallArguments,v=(p=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var l;let r;const u=[];if(s!=null&&s.generatedImages)for(const y of s.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((l=y==null?void 0:y.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?r=y==null?void 0:y.safetyAttributes:u.push(y);let p;return r?p={generatedImages:u,positivePromptSafetyAttributes:r,sdkHttpResponse:s.sdkHttpResponse}:p={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},p}),this.list=async n=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new co(Wi.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(u),u)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var s,l,r,u,p,y;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(r=n.source)===null||r===void 0?void 0:r.video)===null||u===void 0)&&u.uri&&(!((y=(p=n.source)===null||p===void 0?void 0:p.video)===null||y===void 0)&&y.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,l;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const u=await Promise.all(r.map(async y=>tl(y)?await y.tool():y)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(p.config.tools=u,e.config&&e.config.tools&&Jv(e.config.tools)){const y=(l=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&l!==void 0?l:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Kv(m),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return p}async initAfcToolsMap(e){var n,s,l;const r=new Map;for(const u of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(tl(u)){const p=u,y=await p.tool();for(const m of(l=y.functionDeclarations)!==null&&l!==void 0?l:[]){if(!m.name)throw new Error("Function declaration name is required.");if(r.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);r.set(m.name,p)}}return r}async processAfcStream(e){var n,s,l;const r=(l=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:xx;let u=!1,p=0;const y=await this.initAfcToolsMap(e);return(function(m,v,_){return pi(this,arguments,function*(){for(var E,T,N,D,k,G;p<r;){u&&(p++,u=!1);const fe=yield Ve(m.processParamsMaybeAddMcpUsage(_)),ie=yield Ve(m.generateContentStreamInternal(fe)),oe=[],xe=[];try{for(var X=!0,j=(T=void 0,mi(ie)),M;M=yield Ve(j.next()),E=M.done,!E;X=!0){D=M.value,X=!1;const ce=D;if(yield yield Ve(ce),ce.candidates&&(!((k=ce.candidates[0])===null||k===void 0)&&k.content)){xe.push(ce.candidates[0].content);for(const Ie of(G=ce.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(p<r&&Ie.functionCall){if(!Ie.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(Ie.functionCall.name)){const qe=yield Ve(v.get(Ie.functionCall.name).callTool([Ie.functionCall]));oe.push(...qe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${Ie.functionCall.name}`)}}}}catch(ce){T={error:ce}}finally{try{!X&&!E&&(N=j.return)&&(yield Ve(N.call(j)))}finally{if(T)throw T.error}}if(oe.length>0){u=!0;const ce=new ma;ce.candidates=[{content:{role:"user",parts:oe}}],yield yield Ve(ce);const Ie=[];Ie.push(...xe),Ie.push({role:"user",parts:oe});const qe=si(_.contents).concat(Ie);_.contents=qe}else break}})})(this,y,e)}async generateContentInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=px(this.apiClient,e);return p=ye("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=gx(v),E=new ma;return Object.assign(E,_),E})}else{const m=hx(this.apiClient,e);return p=ye("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=mx(v),E=new ma;return Object.assign(E,_),E})}}async generateContentStreamInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=px(this.apiClient,e);return p=ye("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(_){return pi(this,arguments,function*(){var E,T,N,D;try{for(var k=!0,G=mi(_),X;X=yield Ve(G.next()),E=X.done,!E;k=!0){D=X.value,k=!1;const j=D,M=gx(yield Ve(j.json()));M.sdkHttpResponse={headers:j.headers};const fe=new ma;Object.assign(fe,M),yield yield Ve(fe)}}catch(j){T={error:j}}finally{try{!k&&!E&&(N=G.return)&&(yield Ve(N.call(G)))}finally{if(T)throw T.error}}})})}else{const m=hx(this.apiClient,e);return p=ye("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.requestStream({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),u.then(function(_){return pi(this,arguments,function*(){var E,T,N,D;try{for(var k=!0,G=mi(_),X;X=yield Ve(G.next()),E=X.done,!E;k=!0){D=X.value,k=!1;const j=D,M=mx(yield Ve(j.json()));M.sdkHttpResponse={headers:j.headers};const fe=new ma;Object.assign(fe,M),yield yield Ve(fe)}}catch(j){T={error:j}}finally{try{!k&&!E&&(N=G.return)&&(yield Ve(N.call(G)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=TA(this.apiClient,e);return p=ye("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=NA(v),E=new Q0;return Object.assign(E,_),E})}else{const m=bA(this.apiClient,e);return p=ye("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=SA(v),E=new Q0;return Object.assign(E,_),E})}}async generateImagesInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=BA(this.apiClient,e);return p=ye("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=HA(v),E=new X0;return Object.assign(E,_),E})}else{const m=UA(this.apiClient,e);return p=ye("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=OA(v),E=new X0;return Object.assign(E,_),E})}}async editImageInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=vA(this.apiClient,e);return r=ye("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>{const m=_A(y),v=new AT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=Bw(this.apiClient,e);return r=ye("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>{const m=Ow(y),v=new wT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=xw(this.apiClient,e);return r=ye("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=vw(y),v=new IT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=Sw(this.apiClient,e);return r=ye("{model}:predict",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=Nw(y),v=new RT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=nw(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Hf(v))}else{const m=tw(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Of(v))}}async listInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=dw(this.apiClient,e);return p=ye("{models_url}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=hw(v),E=new W0;return Object.assign(E,_),E})}else{const m=uw(this.apiClient,e);return p=ye("{models_url}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=fw(v),E=new W0;return Object.assign(E,_),E})}}async update(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=Lw(this.apiClient,e);return p=ye("{model}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>Hf(v))}else{const m=Pw(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>Of(v))}}async delete(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=mA(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=yA(v),E=new Z0;return Object.assign(E,_),E})}else{const m=pA(this.apiClient,e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=gA(v),E=new Z0;return Object.assign(E,_),E})}}async countTokens(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=dA(this.apiClient,e);return p=ye("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=hA(v),E=new ex;return Object.assign(E,_),E})}else{const m=uA(this.apiClient,e);return p=ye("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=fA(v),E=new ex;return Object.assign(E,_),E})}}async computeTokens(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=iA(this.apiClient,e);return r=ye("{model}:computeTokens",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>{const m=sA(y),v=new MT;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=jA(this.apiClient,e);return p=ye("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u.then(v=>{const _=FA(v),E=new xc;return Object.assign(E,_),E})}else{const m=zA(this.apiClient,e);return p=ye("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u.then(v=>{const _=VA(v),E=new xc;return Object.assign(E,_),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M1 extends ts{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let r;s&&"httpOptions"in s&&(r=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let r;s&&"httpOptions"in s&&(r=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=ET(e);return p=ye("{operationName}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),u}else{const m=_T(e);return p=ye("{operationName}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),u}}async fetchPredictVideosOperationInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=hT(e);return r=ye("{resourceName}:fetchPredictOperation",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D1(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function k1(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(r=>V1(r))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function P1(t,e,n){const s={},l=d(e,["expireTime"]);n!==void 0&&l!=null&&f(n,["expireTime"],l);const r=d(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&f(n,["newSessionExpireTime"],r);const u=d(e,["uses"]);n!==void 0&&u!=null&&f(n,["uses"],u);const p=d(e,["liveConnectConstraints"]);n!==void 0&&p!=null&&f(n,["bidiGenerateContentSetup"],q1(t,p));const y=d(e,["lockAdditionalFields"]);return n!==void 0&&y!=null&&f(n,["fieldMask"],y),s}function L1(t,e){const n={},s=d(e,["config"]);return s!=null&&f(n,["config"],P1(t,s,n)),n}function U1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function B1(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function O1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function H1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function G1(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const r=d(t,["temperature"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","temperature"],r);const u=d(t,["topP"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","topP"],u);const p=d(t,["topK"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","topK"],p);const y=d(t,["maxOutputTokens"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","maxOutputTokens"],y);const m=d(t,["mediaResolution"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","mediaResolution"],m);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const _=d(t,["speechConfig"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","speechConfig"],Eh(_));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],k1(bn(N)));const D=d(t,["tools"]);if(e!==void 0&&D!=null){let ie=hl(D);Array.isArray(ie)&&(ie=ie.map(oe=>z1(fl(oe)))),f(e,["setup","tools"],ie)}const k=d(t,["sessionResumption"]);e!==void 0&&k!=null&&f(e,["setup","sessionResumption"],F1(k));const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const X=d(t,["outputAudioTranscription"]);e!==void 0&&X!=null&&f(e,["setup","outputAudioTranscription"],X);const j=d(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&f(e,["setup","realtimeInputConfig"],j);const M=d(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const fe=d(t,["proactivity"]);if(e!==void 0&&fe!=null&&f(e,["setup","proactivity"],fe),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function q1(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],pt(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],G1(l,n)),n}function V1(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const r=d(t,["fileData"]);r!=null&&f(e,["fileData"],U1(r));const u=d(t,["functionCall"]);u!=null&&f(e,["functionCall"],B1(u));const p=d(t,["functionResponse"]);p!=null&&f(e,["functionResponse"],p);const y=d(t,["inlineData"]);y!=null&&f(e,["inlineData"],D1(y));const m=d(t,["text"]);m!=null&&f(e,["text"],m);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const _=d(t,["thoughtSignature"]);_!=null&&f(e,["thoughtSignature"],_);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function F1(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function z1(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const r=d(t,["functionDeclarations"]);if(r!=null){let v=r;Array.isArray(v)&&(v=v.map(_=>_)),f(e,["functionDeclarations"],v)}const u=d(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],O1(u));const p=d(t,["googleSearch"]);p!=null&&f(e,["googleSearch"],H1(p));const y=d(t,["googleSearchRetrieval"]);y!=null&&f(e,["googleSearchRetrieval"],y);const m=d(t,["urlContext"]);return m!=null&&f(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const l=Object.keys(s).map(r=>`${n}.${r}`);e.push(...l)}else e.push(n)}return e.join(",")}function Y1(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const r=s.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const r=j1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];l.length>0&&(p=l.map(m=>u.includes(m)?`generationConfig.${m}`:m));const y=[];r&&y.push(r),p.length>0&&y.push(...p),y.length>0?t.fieldMask=y.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class $1 extends ts{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=L1(this.apiClient,e);r=ye("auth_tokens",p._url),u=p._query,delete p.config,delete p._url,delete p._query;const y=Y1(p,e.config);return l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(m=>m.json()),l.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J1(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function K1(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&J1(s,e),e}function Q1(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function X1(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function W1(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const s=d(t,["config"]);return s!=null&&X1(s,e),e}function Z1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["documents"]);if(l!=null){let r=l;Array.isArray(r)&&(r=r.map(u=>u)),f(e,["documents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eI extends ts{constructor(e){super(),this.apiClient=e,this.list=async n=>new co(Wi.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Q1(e);return r=ye("{name}",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,s;let l="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=K1(e);l=ye("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:l,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=W1(e);return r=ye("{parent}/documents",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=Z1(y),v=new DT;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tI extends ts{constructor(e,n=new eI(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new co(Wi.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=jw(e);return r=ye("fileSearchStores",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Jw(e);return r=ye("{name}",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var n,s;let l="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$w(e);l=ye("{name}",u._url),r=u._query,delete u._url,delete u._query,await this.apiClient.request({path:l,queryParams:r,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=e1(e);return r=ye("fileSearchStores",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=t1(y),v=new kT;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=n1(e);return r=ye("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=i1(y),v=new PT;return Object.assign(v,m),v})}}async importFile(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Xw(e);return r=ye("{file_search_store_name}:importFile",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json()),l.then(y=>{const m=Qw(y),v=new gh;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qv=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Qv=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const nI=()=>Qv();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Vf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oi extends Error{}class An extends oi{constructor(e,n,s,l){super(`${An.makeMessage(e,n,s)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,s){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,s,l){if(!e||!l)return new zc({message:s,cause:Vf(n)});const r=n;return e===400?new Wv(e,r,s,l):e===401?new Zv(e,r,s,l):e===403?new e_(e,r,s,l):e===404?new t_(e,r,s,l):e===409?new n_(e,r,s,l):e===422?new i_(e,r,s,l):e===429?new s_(e,r,s,l):e>=500?new o_(e,r,s,l):new An(e,r,s,l)}}class Ff extends An{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class zc extends An{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Xv extends zc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Wv extends An{}class Zv extends An{}class e_ extends An{}class t_ extends An{}class n_ extends An{}class i_ extends An{}class s_ extends An{}class o_ extends An{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iI=/^[a-z][a-z0-9+.-]*:/i,sI=t=>iI.test(t);let zf=t=>(zf=Array.isArray,zf(t));const oI=zf;let lI=oI;const Cx=lI;function aI(t){if(!t)return!0;for(const e in t)return!1;return!0}function rI(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cI=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new oi(`${t} must be an integer`);if(e<0)throw new oi(`${t} must be a positive integer`);return e},uI=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dI=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fI(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const hI=()=>{var t,e,n,s,l;const r=fI();if(r==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":Tx(Deno.build.os),"X-Stainless-Arch":bx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(r==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":Tx((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":bx((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const u=pI();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function pI(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const l=s[1]||0,r=s[2]||0,u=s[3]||0;return{browser:e,version:`${l}.${r}.${u}`}}}return null}const bx=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Tx=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let sc;const mI=()=>sc??(sc=hI());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gI(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function l_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function yI(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return l_({start(){},async pull(n){const{done:s,value:l}=await e.next();s?n.close():n.enqueue(l)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function a_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xI(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),l=s.cancel();s.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vI=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function xf(t,e,n){return r_(),new File(t,e??"unknown_file",n)}function _I(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const EI=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CI=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&c_(t),bI=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function TI(t,e,n){if(r_(),t=await t,CI(t))return t instanceof File?t:xf([await t.arrayBuffer()],t.name);if(bI(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),xf(await jf(l),e,n)}const s=await jf(t);if(e||(e=_I(t)),!(n!=null&&n.type)){const l=s.find(r=>typeof r=="object"&&"type"in r&&r.type);typeof l=="string"&&(n=Object.assign(Object.assign({},n),{type:l}))}return xf(s,e,n)}async function jf(t){var e,n,s,l,r;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(c_(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(EI(t))try{for(var p=!0,y=mi(t),m;m=await y.next(),e=m.done,!e;p=!0){l=m.value,p=!1;const v=l;u.push(...await jf(v))}}catch(v){n={error:v}}finally{try{!p&&!e&&(s=y.return)&&await s.call(y)}finally{if(n)throw n.error}}else{const v=(r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${SI(t)}`)}return u}function SI(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u_{constructor(e){this._client=e}}u_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Sx=Object.freeze(Object.create(null)),NI=(t=d_)=>(function(n,...s){if(n.length===1)return n[0];let l=!1;const r=[],u=n.reduce((v,_,E)=>{var T,N,D;/[?#]/.test(_)&&(l=!0);const k=s[E];let G=(l?encodeURIComponent:t)(""+k);return E!==s.length&&(k==null||typeof k=="object"&&k.toString===((D=Object.getPrototypeOf((N=Object.getPrototypeOf((T=k.hasOwnProperty)!==null&&T!==void 0?T:Sx))!==null&&N!==void 0?N:Sx))===null||D===void 0?void 0:D.toString))&&(G=k+"",r.push({start:v.length+_.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),v+_+(E===s.length?"":G)},""),p=u.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(p))!==null;)r.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(r.sort((v,_)=>v.start-_.start),r.length>0){let v=0;const _=r.reduce((E,T)=>{const N=" ".repeat(T.start-v),D="^".repeat(T.length);return v=T.start+T.length,E+N+D},"");throw new oi(`Path parameters result in path with invalid segments:
${r.map(E=>E.error).join(`
`)}
${u}
${_}`)}return u}),oc=NI(d_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f_ extends u_{create(e,n){var s;const{api_version:l=this._client.apiVersion}=e,r=_c(e,["api_version"]);if("model"in r&&"agent_config"in r)throw new oi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in r&&"generation_config"in r)throw new oi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(oc`/${l}/interactions`,Object.assign(Object.assign({body:r},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.delete(oc`/${l}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.post(oc`/${l}/interactions/${e}/cancel`,s)}get(e,n={},s){var l;const r=n??{},{api_version:u=this._client.apiVersion}=r,p=_c(r,["api_version"]);return this._client.get(oc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:p},s),{stream:(l=n==null?void 0:n.stream)!==null&&l!==void 0?l:!1}))}}f_._key=Object.freeze(["interactions"]);class h_ extends f_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AI(t){let e=0;for(const l of t)e+=l.length;const n=new Uint8Array(e);let s=0;for(const l of t)n.set(l,s),s+=l.length;return n}let lc;function bh(t){let e;return(lc??(e=new globalThis.TextEncoder,lc=e.encode.bind(e)))(t)}let ac;function Nx(t){let e;return(ac??(e=new globalThis.TextDecoder,ac=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?bh(e):e;this.buffer=AI([this.buffer,n]);const s=[];let l;for(;(l=wI(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){s.push(Nx(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const r=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,u=Nx(this.buffer.subarray(0,r));s.push(u),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}jc.NEWLINE_CHARS=new Set([`
`,"\r"]);jc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function wI(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function II(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ec={off:0,error:200,warn:300,info:400,debug:500},Ax=(t,e,n)=>{if(t){if(rI(Ec,t))return t;Sn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ec))}`)}};function Ea(){}function rc(t,e,n){return!e||Ec[t]>Ec[n]?Ea:e[t].bind(e)}const RI={error:Ea,warn:Ea,info:Ea,debug:Ea};let wx=new WeakMap;function Sn(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return RI;const l=wx.get(n);if(l&&l[0]===s)return l[1];const r={error:rc("error",n,s),warn:rc("warn",n,s),info:rc("info",n,s),debug:rc("debug",n,s)};return wx.set(n,[s,r]),r}const to=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wo{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let l=!1;const r=s?Sn(s):console;function u(){return pi(this,arguments,function*(){var y,m,v,_;if(l)throw new oi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=mi(MI(e,n)),D;D=yield Ve(N.next()),y=D.done,!y;T=!0){_=D.value,T=!1;const k=_;if(!E)if(k.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Ve(JSON.parse(k.data))}catch(G){throw r.error("Could not parse message into JSON:",k.data),r.error("From chunk:",k.raw),G}}}catch(k){m={error:k}}finally{try{!T&&!y&&(v=N.return)&&(yield Ve(v.call(N)))}finally{if(m)throw m.error}}E=!0}catch(k){if(qf(k))return yield Ve(void 0);throw k}finally{E||n.abort()}})}return new Wo(u,n,s)}static fromReadableStream(e,n,s){let l=!1;function r(){return pi(this,arguments,function*(){var y,m,v,_;const E=new jc,T=a_(e);try{for(var N=!0,D=mi(T),k;k=yield Ve(D.next()),y=k.done,!y;N=!0){_=k.value,N=!1;const G=_;for(const X of E.decode(G))yield yield Ve(X)}}catch(G){m={error:G}}finally{try{!N&&!y&&(v=D.return)&&(yield Ve(v.call(D)))}finally{if(m)throw m.error}}for(const G of E.flush())yield yield Ve(G)})}function u(){return pi(this,arguments,function*(){var y,m,v,_;if(l)throw new oi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=mi(r()),D;D=yield Ve(N.next()),y=D.done,!y;T=!0){_=D.value,T=!1;const k=_;E||k&&(yield yield Ve(JSON.parse(k)))}}catch(k){m={error:k}}finally{try{!T&&!y&&(v=N.return)&&(yield Ve(v.call(N)))}finally{if(m)throw m.error}}E=!0}catch(k){if(qf(k))return yield Ve(void 0);throw k}finally{E||n.abort()}})}return new Wo(u,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),l=r=>({next:()=>{if(r.length===0){const u=s.next();e.push(u),n.push(u)}return r.shift()}});return[new Wo(()=>l(e),this.controller,this.client),new Wo(()=>l(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return l_({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:l,done:r}=await n.next();if(r)return s.close();const u=bh(JSON.stringify(l)+`
`);s.enqueue(u)}catch(l){s.error(l)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function MI(t,e){return pi(this,arguments,function*(){var s,l,r,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new oi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new oi("Attempted to iterate over a response with no body");const p=new kI,y=new jc,m=a_(t.body);try{for(var v=!0,_=mi(DI(m)),E;E=yield Ve(_.next()),s=E.done,!s;v=!0){u=E.value,v=!1;const T=u;for(const N of y.decode(T)){const D=p.decode(N);D&&(yield yield Ve(D))}}}catch(T){l={error:T}}finally{try{!v&&!s&&(r=_.return)&&(yield Ve(r.call(_)))}finally{if(l)throw l.error}}for(const T of y.flush()){const N=p.decode(T);N&&(yield yield Ve(N))}})}function DI(t){return pi(this,arguments,function*(){var n,s,l,r;let u=new Uint8Array;try{for(var p=!0,y=mi(t),m;m=yield Ve(y.next()),n=m.done,!n;p=!0){r=m.value,p=!1;const v=r;if(v==null)continue;const _=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?bh(v):v;let E=new Uint8Array(u.length+_.length);E.set(u),E.set(_,u.length),u=E;let T;for(;(T=II(u))!==-1;)yield yield Ve(u.slice(0,T)),u=u.slice(T)}}catch(v){s={error:v}}finally{try{!p&&!n&&(l=y.return)&&(yield Ve(l.call(y)))}finally{if(s)throw s.error}}u.length>0&&(yield yield Ve(u))})}class kI{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const r={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],r}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,l]=PI(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}function PI(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LI(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:l,startTime:r}=e,u=await(async()=>{var p;if(e.options.stream)return Sn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Wo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const y=n.headers.get("content-type"),m=(p=y==null?void 0:y.split(";")[0])===null||p===void 0?void 0:p.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await n.json():await n.text()})();return Sn(t).debug(`[${s}] response parsed`,to({retryOfRequestLogID:l,url:n.url,status:n.status,body:u,durationMs:Date.now()-r})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Th extends Promise{constructor(e,n,s=LI){super(l=>{l(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Th(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p_=Symbol("brand.privateNullableHeaders");function*UI(t){if(!t)return;if(p_ in t){const{values:s,nulls:l}=t;yield*s.entries();for(const r of l)yield[r,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Cx(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const l=s[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const r=Cx(s[1])?s[1]:[s[1]];let u=!1;for(const p of r)p!==void 0&&(e&&!u&&(u=!0,yield[l,null]),yield[l,p])}}const ga=t=>{const e=new Headers,n=new Set;for(const s of t){const l=new Set;for(const[r,u]of UI(s)){const p=r.toLowerCase();l.has(p)||(e.delete(r),l.add(p)),u===null?(e.delete(r),n.add(p)):(e.append(r,u),n.delete(p))}}return{[p_]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vf=t=>{var e,n,s,l,r,u;if(typeof globalThis.process<"u")return(s=(n=(e=aT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(r=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||r===void 0?void 0:r.call(l,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var m_;class Yc{constructor(e){var n,s,l,r,u,p,y,{baseURL:m=vf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=vf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:_="v1beta"}=e,E=_c(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:v,apiVersion:_},E),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(s=T.timeout)!==null&&s!==void 0?s:Yc.DEFAULT_TIMEOUT,this.logger=(l=T.logger)!==null&&l!==void 0?l:console;const N="warn";this.logLevel=N,this.logLevel=(u=(r=Ax(T.logLevel,"ClientOptions.logLevel",this))!==null&&r!==void 0?r:Ax(vf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:N,this.fetchOptions=T.fetchOptions,this.maxRetries=(p=T.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(y=T.fetch)!==null&&y!==void 0?y:gI(),this.encoder=vI,this._options=T,this.apiKey=v,this.apiVersion=_,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ga([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ga([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ga([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new oi(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Qo}`}defaultIdempotencyKey(){return`stainless-node-retry-${nI()}`}makeStatusError(e,n,s,l){return An.generate(e,n,s,l)}buildURL(e,n,s){const l=!this.baseURLOverridden()&&s||this.baseURL,r=sI(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return aI(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(r.search=this.stringifyQuery(n)),r.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(l=>Object.assign({method:e,path:n},l)))}request(e,n=null){return new Th(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var l,r,u;const p=await e,y=(l=p.maxRetries)!==null&&l!==void 0?l:this.maxRetries;n==null&&(n=y),await this.prepareOptions(p);const{req:m,url:v,timeout:_}=await this.buildRequest(p,{retryCount:y-n});await this.prepareRequest(m,{url:v,options:p});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Sn(this).debug(`[${E}] sending request`,to({retryOfRequestLogID:s,method:p.method,url:v,options:p,headers:m.headers})),!((r=p.signal)===null||r===void 0)&&r.aborted)throw new Ff;const D=new AbortController,k=await this.fetchWithTimeout(v,m,_,D).catch(Vf),G=Date.now();if(k instanceof globalThis.Error){const j=`retrying, ${n} attempts remaining`;if(!((u=p.signal)===null||u===void 0)&&u.aborted)throw new Ff;const M=qf(k)||/timed? ?out/i.test(String(k)+("cause"in k?String(k.cause):""));if(n)return Sn(this).info(`[${E}] connection ${M?"timed out":"failed"} - ${j}`),Sn(this).debug(`[${E}] connection ${M?"timed out":"failed"} (${j})`,to({retryOfRequestLogID:s,url:v,durationMs:G-N,message:k.message})),this.retryRequest(p,n,s??E);throw Sn(this).info(`[${E}] connection ${M?"timed out":"failed"} - error; no more retries left`),Sn(this).debug(`[${E}] connection ${M?"timed out":"failed"} (error; no more retries left)`,to({retryOfRequestLogID:s,url:v,durationMs:G-N,message:k.message})),M?new Xv:new zc({cause:k})}const X=`[${E}${T}] ${m.method} ${v} ${k.ok?"succeeded":"failed"} with status ${k.status} in ${G-N}ms`;if(!k.ok){const j=await this.shouldRetry(k);if(n&&j){const ce=`retrying, ${n} attempts remaining`;return await xI(k.body),Sn(this).info(`${X} - ${ce}`),Sn(this).debug(`[${E}] response error (${ce})`,to({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:G-N})),this.retryRequest(p,n,s??E,k.headers)}const M=j?"error; no more retries left":"error; not retryable";Sn(this).info(`${X} - ${M}`);const fe=await k.text().catch(ce=>Vf(ce).message),ie=uI(fe),oe=ie?void 0:fe;throw Sn(this).debug(`[${E}] response error (${M})`,to({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,message:oe,durationMs:Date.now()-N})),this.makeStatusError(k.status,ie,oe,k.headers)}return Sn(this).info(X),Sn(this).debug(`[${E}] response start`,to({retryOfRequestLogID:s,url:k.url,status:k.status,headers:k.headers,durationMs:G-N})),{response:k,options:p,controller:D,requestLogID:E,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,n,s,l){const r=n||{},{signal:u,method:p}=r,y=_c(r,["signal","method"]);u&&u.addEventListener("abort",()=>l.abort());const m=setTimeout(()=>l.abort(),s),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,_=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);p&&(_.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,_)}finally{clearTimeout(m)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,l){var r;let u;const p=l==null?void 0:l.get("retry-after-ms");if(p){const m=parseFloat(p);Number.isNaN(m)||(u=m)}const y=l==null?void 0:l.get("retry-after");if(y&&!u){const m=parseFloat(y);Number.isNaN(m)?u=Date.parse(y)-Date.now():u=m*1e3}if(!(u&&0<=u&&u<60*1e3)){const m=(r=e.maxRetries)!==null&&r!==void 0?r:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,m)}return await dI(u),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const r=n-e,u=Math.min(.5*Math.pow(2,r),8),p=1-Math.random()*.25;return u*p*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,l,r;const u=Object.assign({},e),{method:p,path:y,query:m,defaultBaseURL:v}=u,_=this.buildURL(y,m,v);"timeout"in u&&cI("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:E,body:T}=this.buildBody({options:u}),N=await this.buildHeaders({options:e,method:p,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:N},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(r=u.fetchOptions)!==null&&r!==void 0?r:{}),url:_,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:l}){let r={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),r[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let p=ga([r,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),mI()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=ga([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:yI(e)}:this.encoder({body:e,headers:s})}}Yc.DEFAULT_TIMEOUT=6e4;class hn extends Yc{constructor(){super(...arguments),this.interactions=new h_(this)}}m_=hn;hn.GeminiNextGenAPIClient=m_;hn.GeminiNextGenAPIClientError=oi;hn.APIError=An;hn.APIConnectionError=zc;hn.APIConnectionTimeoutError=Xv;hn.APIUserAbortError=Ff;hn.NotFoundError=t_;hn.ConflictError=n_;hn.RateLimitError=s_;hn.BadRequestError=Wv;hn.AuthenticationError=Zv;hn.InternalServerError=o_;hn.PermissionDeniedError=e_;hn.UnprocessableEntityError=i_;hn.toFile=TI;hn.Interactions=h_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BI(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function OI(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function HI(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function GI(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function qI(t,e,n){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=d(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&f(e,["displayName"],l),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=d(t,["epochCount"]);e!==void 0&&r!=null&&f(e,["tuningTask","hyperparameters","epochCount"],r);const u=d(t,["learningRateMultiplier"]);if(u!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const p=d(t,["batchSize"]);e!==void 0&&p!=null&&f(e,["tuningTask","hyperparameters","batchSize"],p);const y=d(t,["learningRate"]);if(e!==void 0&&y!=null&&f(e,["tuningTask","hyperparameters","learningRate"],y),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function VI(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],Ix(T))}else if(l==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],Ix(T))}const r=d(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&f(e,["tunedModelDisplayName"],r);const u=d(t,["description"]);e!==void 0&&u!=null&&f(e,["description"],u);let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let y=d(n,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(y==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let m=d(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(m==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const _=d(t,["labels"]);e!==void 0&&_!=null&&f(e,["labels"],_);const E=d(t,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function FI(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const r=d(t,["trainingDataset"]);r!=null&&eR(r);const u=d(t,["config"]);return u!=null&&qI(u,n),n}function zI(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const r=d(t,["trainingDataset"]);r!=null&&tR(r,n,e);const u=d(t,["config"]);return u!=null&&VI(u,n,e),n}function jI(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function YI(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function $I(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const u=d(t,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),s}function JI(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const r=d(t,["pageToken"]);e!==void 0&&r!=null&&f(e,["_query","pageToken"],r);const u=d(t,["filter"]);return e!==void 0&&u!=null&&f(e,["_query","filter"],u),s}function KI(t,e){const n={},s=d(t,["config"]);return s!=null&&$I(s,n),n}function QI(t,e){const n={},s=d(t,["config"]);return s!=null&&JI(s,n),n}function XI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const r=d(t,["tunedModels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>g_(p))),f(n,["tuningJobs"],u)}return n}function WI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const r=d(t,["tuningJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(p=>Yf(p))),f(n,["tuningJobs"],u)}return n}function ZI(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["model"],s);const l=d(t,["name"]);return l!=null&&f(n,["endpoint"],l),n}function eR(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(r=>r)),f(n,["examples","examples"],l)}return n}function tR(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(t,["gcsUri"]);e!==void 0&&u!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let r=d(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function g_(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const r=d(t,["state"]);r!=null&&f(n,["state"],Dv(r));const u=d(t,["createTime"]);u!=null&&f(n,["createTime"],u);const p=d(t,["tuningTask","startTime"]);p!=null&&f(n,["startTime"],p);const y=d(t,["tuningTask","completeTime"]);y!=null&&f(n,["endTime"],y);const m=d(t,["updateTime"]);m!=null&&f(n,["updateTime"],m);const v=d(t,["description"]);v!=null&&f(n,["description"],v);const _=d(t,["baseModel"]);_!=null&&f(n,["baseModel"],_);const E=d(t,["_self"]);return E!=null&&f(n,["tunedModel"],ZI(E)),n}function Yf(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const r=d(t,["state"]);r!=null&&f(n,["state"],Dv(r));const u=d(t,["createTime"]);u!=null&&f(n,["createTime"],u);const p=d(t,["startTime"]);p!=null&&f(n,["startTime"],p);const y=d(t,["endTime"]);y!=null&&f(n,["endTime"],y);const m=d(t,["updateTime"]);m!=null&&f(n,["updateTime"],m);const v=d(t,["error"]);v!=null&&f(n,["error"],v);const _=d(t,["description"]);_!=null&&f(n,["description"],_);const E=d(t,["baseModel"]);E!=null&&f(n,["baseModel"],E);const T=d(t,["tunedModel"]);T!=null&&f(n,["tunedModel"],T);const N=d(t,["preTunedModel"]);N!=null&&f(n,["preTunedModel"],N);const D=d(t,["supervisedTuningSpec"]);D!=null&&f(n,["supervisedTuningSpec"],D);const k=d(t,["preferenceOptimizationSpec"]);k!=null&&f(n,["preferenceOptimizationSpec"],k);const G=d(t,["tuningDataStats"]);G!=null&&f(n,["tuningDataStats"],G);const X=d(t,["encryptionSpec"]);X!=null&&f(n,["encryptionSpec"],X);const j=d(t,["partnerModelTuningSpec"]);j!=null&&f(n,["partnerModelTuningSpec"],j);const M=d(t,["customBaseModel"]);M!=null&&f(n,["customBaseModel"],M);const fe=d(t,["experiment"]);fe!=null&&f(n,["experiment"],fe);const ie=d(t,["labels"]);ie!=null&&f(n,["labels"],ie);const oe=d(t,["outputUri"]);oe!=null&&f(n,["outputUri"],oe);const xe=d(t,["pipelineJob"]);xe!=null&&f(n,["pipelineJob"],xe);const ce=d(t,["serviceAccount"]);ce!=null&&f(n,["serviceAccount"],ce);const Ie=d(t,["tunedModelDisplayName"]);Ie!=null&&f(n,["tunedModelDisplayName"],Ie);const qe=d(t,["veoTuningSpec"]);return qe!=null&&f(n,["veoTuningSpec"],qe),n}function nR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const r=d(t,["metadata"]);r!=null&&f(n,["metadata"],r);const u=d(t,["done"]);u!=null&&f(n,["done"],u);const p=d(t,["error"]);return p!=null&&f(n,["error"],p),n}function Ix(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["validationDatasetUri"],s);const l=d(t,["vertexDatasetResource"]);return l!=null&&f(n,["validationDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iR extends ts{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new co(Wi.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:l});return r.baseModel=void 0,await this.tuneInternal(r)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),r=await this.tuneMldevInternal(l);let u="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?u=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(u=r.name.split("/operations/")[0]),{name:u,state:kf.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=YI(e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>Yf(v))}else{const m=jI(e);return p=ye("{name}",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>g_(v))}}async listInternal(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=QI(e);return p=ye("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=WI(v),E=new tx;return Object.assign(E,_),E})}else{const m=KI(e);return p=ye("tunedModels",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=XI(v),E=new tx;return Object.assign(E,_),E})}}async cancel(e){var n,s,l,r;let u,p="",y={};if(this.apiClient.isVertexAI()){const m=OI(e);return p=ye("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=GI(v),E=new nx;return Object.assign(E,_),E})}else{const m=BI(e);return p=ye("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,u=this.apiClient.request({path:p,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(_=>{const E=_;return E.sdkHttpResponse={headers:v.headers},E})),u.then(v=>{const _=HI(v),E=new nx;return Object.assign(E,_),E})}}async tuneInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI()){const p=zI(e,e);return r=ye("tuningJobs",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>Yf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let l,r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=FI(e);return r=ye("tunedModels",p._url),u=p._query,delete p._url,delete p._query,l=this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),l.then(y=>nR(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sR{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const oR=1024*1024*8,lR=3,aR=1e3,rR=2,Cc="x-goog-upload-status";async function cR(t,e,n){var s;const l=await y_(t,e,n),r=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Cc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return r.file}async function uR(t,e,n){var s;const l=await y_(t,e,n),r=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[Cc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Nv(r),p=new yh;return Object.assign(p,u),p}async function y_(t,e,n){var s,l;let r=0,u=0,p=new Lf(new Response),y="upload";for(r=t.size;u<r;){const m=Math.min(oR,r-u),v=t.slice(u,u+m);u+m>=r&&(y+=", finalize");let _=0,E=aR;for(;_<lR&&(p=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(u),"Content-Length":String(m)}}}),!(!((s=p==null?void 0:p.headers)===null||s===void 0)&&s[Cc]));)_++,await fR(E),E=E*rR;if(u+=m,((l=p==null?void 0:p.headers)===null||l===void 0?void 0:l[Cc])!=="active")break;if(r<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function dR(t){return{size:t.size,type:t.type}}function fR(t){return new Promise(e=>setTimeout(e,t))}class hR{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cR(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await uR(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dR(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pR{create(e,n,s){return new mR(e,n,s)}}class mR{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rx="x-goog-api-key";class gR{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Rx)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rx,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yR="gl-node/";class xR{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new hn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=dT(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new gR(this.apiKey);this.apiClient=new d1({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:yR+"web",uploader:new hR,downloader:new sR}),this.models=new R1(this.apiClient),this.live=new T1(this.apiClient,l,new pR),this.batches=new GS(this.apiClient),this.chats=new EN(this.models,this.apiClient),this.caches=new xN(this.apiClient),this.files=new MN(this.apiClient),this.operations=new M1(this.apiClient),this.authTokens=new $1(this.apiClient),this.tunings=new iR(this.apiClient),this.fileSearchStores=new tI(this.apiClient)}}const vR=({globalSettings:t,activePool:e})=>{const[n,s]=z.useState(!1),[l,r]=z.useState([]),[u,p]=z.useState(""),[y,m]=z.useState(!1),v=z.useRef(null);z.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[l]);const _=async()=>{if(!u.trim()||y)return;const E=u.trim();r(T=>[...T,{role:"user",text:E}]),p(""),m(!0);try{const T=new xR({apiKey:"PLACEHOLDER_API_KEY"}),N=`
        You are the "Charity Squares Assistant" for a Super Bowl squares contest.
        Current Charity: ${t.charityName}.
        Current Matchup: ${e.settings.teamA} vs ${e.settings.teamB}.
        Cost per square: $${e.settings.costPerBox}.
        Board Name: ${e.name}.
        Rules: Participants pick a square. Once the board is full, axes (0-9) are randomized. 
        Winning square is determined by the last digit of the score for each team at various intervals (usually quarters).
        Keep responses helpful, enthusiastic about charity, and concise.
      `,D=await T.models.generateContent({model:"gemini-3-flash-preview",contents:`${N}

User Question: ${E}`});r(k=>[...k,{role:"ai",text:D.text||"I'm sorry, I couldn't process that."}])}catch{r(N=>[...N,{role:"ai",text:"Error connecting to AI. Please try again later."}])}finally{m(!1)}};return h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>s(!n),className:"fixed bottom-8 right-8 w-16 h-16 bg-indigo-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-[100] border-4 border-white animate-bounce-slow",children:h.jsx("i",{className:`fas ${n?"fa-times":"fa-magic"} text-xl`})}),n&&h.jsxs("div",{className:"fixed bottom-28 right-8 w-80 md:w-96 bg-white rounded-[2rem] shadow-2xl z-[100] border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[h.jsxs("div",{className:"bg-indigo-600 p-6 text-white",children:[h.jsxs("h3",{className:"font-black uppercase tracking-tight flex items-center gap-2",children:[h.jsx("i",{className:"fas fa-robot"}),"Contest Assistant"]}),h.jsx("p",{className:"text-[10px] text-indigo-200 font-bold uppercase tracking-widest mt-1",children:"Ask me anything about the rules!"})]}),h.jsxs("div",{ref:v,className:"flex-grow p-4 h-80 overflow-y-auto space-y-4 scrollbar-hide",children:[l.length===0&&h.jsx("div",{className:"text-center py-10",children:h.jsx("p",{className:"text-gray-400 text-xs italic",children:`"How do I win?" or "What's the charity for?"`})}),l.map((E,T)=>h.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:h.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-xs leading-relaxed ${E.role==="user"?"bg-indigo-100 text-indigo-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:E.text})},T)),y&&h.jsx("div",{className:"flex justify-start",children:h.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl rounded-bl-none",children:h.jsxs("div",{className:"flex gap-1",children:[h.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),h.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"}),h.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})})})]}),h.jsxs("div",{className:"p-4 border-t border-gray-50 flex gap-2",children:[h.jsx("input",{type:"text",value:u,onChange:E=>p(E.target.value),onKeyDown:E=>E.key==="Enter"&&_(),placeholder:"Type a message...",className:"flex-grow bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none"}),h.jsx("button",{onClick:_,className:"w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-black transition-colors",children:h.jsx("i",{className:"fas fa-paper-plane text-xs"})})]})]})]})},_R=({state:t})=>{const[e,n]=z.useState(""),[s,l]=z.useState(""),[r,u]=z.useState(null),p=z.useMemo(()=>{if(!s)return null;const _=[],E=s.toLowerCase();if(t.pools.forEach(G=>{const X=(G.participants||[]).find(j=>j.email.toLowerCase()===E||(j.phone||"").replace(/[^\d]/g,"")===E.replace(/[^\d]/g,""));if(X){const j=(G.squares||[]).filter(M=>M.participantId===X.id);if(j.length>0){const M=j.length*G.settings.costPerBox,fe=(X.paymentHistory||[]).reduce((ie,oe)=>ie+oe.amount,0);_.push({pool:G,participant:X,squares:j,due:M,paid:fe})}}}),_.length===0)return null;const T=_.reduce((G,X)=>G+X.squares.length,0),N=_.reduce((G,X)=>G+X.due,0),D=_.reduce((G,X)=>G+X.paid,0),k=Math.max(0,N-D);return{results:_,totalBoxes:T,totalDue:N,totalPaid:D,netBalance:k,alias:_[0].participant.alias}},[s,t.pools]),y=_=>{_.preventDefault(),l(e.trim()),u(null)},m=_=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(_)}&margin=10`,v=({amount:_,alias:E})=>{const T=t.globalSettings,N=T.paypalLink||(T.paypalAccount?`https://www.paypal.com/paypalme/${T.paypalAccount}/${_}`:null),D=T.venmoAccount?`https://venmo.com/${T.venmoAccount.replace("@","")}?txn=pay&amount=${_}&note=${encodeURIComponent(`Balance: ${E.toUpperCase()}`)}`:null,k=T.zelleAccount||"";return h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-2xl mx-auto",children:[N&&h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("a",{href:N,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#003087] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("i",{className:"fab fa-paypal"})," PayPal"]}),h.jsx("button",{type:"button",onClick:G=>{G.preventDefault(),u(r==="paypal"?null:"paypal")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),r==="paypal"&&h.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:h.jsx("img",{src:m(N),alt:"PayPal QR",className:"w-20 h-20"})})]}),D&&h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("a",{href:D,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#3d95ce] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("i",{className:"fab fa-vimeo-v"})," Venmo"]}),h.jsx("button",{type:"button",onClick:G=>{G.preventDefault(),u(r==="venmo"?null:"venmo")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),r==="venmo"&&h.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:h.jsx("img",{src:m(D),alt:"Venmo QR",className:"w-20 h-20"})})]}),k&&h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#6d1ed4] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow",children:[h.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(k),alert("Zelle info copied!")},className:"flex items-center gap-1 text-left truncate",children:[h.jsx("i",{className:"fas fa-university"})," Zelle"]}),h.jsx("button",{type:"button",onClick:()=>u(r==="zelle"?null:"zelle"),className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),r==="zelle"&&h.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:h.jsx("img",{src:m(k),alt:"Zelle QR",className:"w-20 h-20"})})]})]})};return h.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-8 animate-in fade-in duration-500",children:[h.jsxs("section",{className:"bg-indigo-900 text-white rounded-2xl p-4 md:p-6 shadow-xl relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-5 pointer-events-none",children:h.jsx("i",{className:"fas fa-user-shield text-[60px] rotate-12"})}),h.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Status Check"}),h.jsx("p",{className:"text-indigo-300 text-[8px] font-bold uppercase tracking-widest",children:"Verify account balances"})]}),h.jsxs("form",{onSubmit:y,className:"flex gap-2",children:[h.jsx("input",{required:!0,type:"text",value:e,onChange:_=>n(_.target.value),placeholder:"Email or phone...",className:"w-full sm:w-56 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-bold outline-none focus:border-white focus:bg-white/20 transition-all placeholder:text-indigo-400 text-xs"}),h.jsx("button",{type:"submit",className:"bg-white text-indigo-900 px-4 py-2 rounded-lg font-black uppercase text-[9px] tracking-widest shadow-lg hover:bg-indigo-50 active:scale-95 transition-all",children:"Go"})]})]})]}),p?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg overflow-hidden",children:[h.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100",children:[h.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[h.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Squares"}),h.jsx("p",{className:"text-2xl font-black text-indigo-900 leading-none",children:p.totalBoxes})]}),h.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[h.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Contributed"}),h.jsxs("p",{className:"text-2xl font-black text-gray-900 leading-none",children:["$",p.totalPaid]})]}),h.jsxs("div",{className:`p-4 flex flex-col items-center text-center transition-all ${p.netBalance>0?"bg-orange-50/30":"bg-green-50/30"}`,children:[h.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest mb-1 ${p.netBalance>0?"text-orange-600":"text-green-600"}`,children:"Balance"}),p.netBalance>0?h.jsxs("p",{className:"text-2xl font-black text-orange-600 leading-none",children:["$",p.netBalance]}):h.jsx("p",{className:"text-xl font-black text-green-600 leading-none uppercase tracking-tighter",children:"PAID"})]})]}),p.netBalance>0&&h.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-50 bg-orange-50/20 animate-in slide-in-from-top-2 duration-300",children:[h.jsx("div",{className:"text-center mb-3",children:h.jsxs("h3",{className:"text-[8px] font-black text-orange-600 uppercase tracking-widest",children:["Settle Outstanding: $",p.netBalance]})}),h.jsx(v,{amount:p.netBalance,alias:p.alias})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"text-[9px] font-black text-indigo-900 uppercase tracking-widest px-2",children:"History Breakdown"}),h.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden",children:h.jsx("div",{className:"divide-y divide-gray-50",children:p.results.map((_,E)=>h.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-4 hover:bg-indigo-50/30 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex-shrink-0 flex items-center justify-center text-indigo-600",children:h.jsx("i",{className:"fas fa-football-ball text-[10px]"})}),h.jsxs("div",{className:"truncate",children:[h.jsx("h4",{className:"font-black text-xs text-indigo-900 uppercase truncate",children:_.pool.name}),h.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase",children:[_.squares.length," Box",_.squares.length>1?"es":"","  (",_.squares.map(T=>`#${T.id+1}`).join(", "),")"]})]})]}),h.jsxs("div",{className:"flex-shrink-0 text-right",children:[h.jsxs("p",{className:`text-xs font-black ${_.paid>=_.due?"text-green-600":"text-orange-600"}`,children:["$",_.paid,"/$",_.due]}),h.jsx("span",{className:`text-[6px] font-black uppercase ${_.paid>=_.due?"text-green-500":"text-orange-500"}`,children:_.paid>=_.due?"Paid":"Pending"})]})]},E))})})]})]}):s&&h.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-2xl py-12 text-center animate-in zoom-in-95",children:[h.jsx("i",{className:"fas fa-search-minus text-gray-200 text-2xl mb-2"}),h.jsx("h4",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No squares found for this email or phone"})]})]})},ER=()=>{};var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=function(t,e){if(!t)throw ml(e)},ml=function(t){return new Error("Firebase Database ("+x_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},CR=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const r=t[n++];e[s++]=String.fromCharCode((l&31)<<6|r&63)}else if(l>239&&l<365){const r=t[n++],u=t[n++],p=t[n++],y=((l&7)<<18|(r&63)<<12|(u&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const r=t[n++],u=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(r&63)<<6|u&63)}}return e.join("")},Sh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const r=t[l],u=l+1<t.length,p=u?t[l+1]:0,y=l+2<t.length,m=y?t[l+2]:0,v=r>>2,_=(r&3)<<4|p>>4;let E=(p&15)<<2|m>>6,T=m&63;y||(T=64,u||(E=64)),s.push(n[v],n[_],n[E],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const r=n[t.charAt(l++)],p=l<t.length?n[t.charAt(l)]:0;++l;const m=l<t.length?n[t.charAt(l)]:64;++l;const _=l<t.length?n[t.charAt(l)]:64;if(++l,r==null||p==null||m==null||_==null)throw new bR;const E=r<<2|p>>4;if(s.push(E),m!==64){const T=p<<4&240|m>>2;if(s.push(T),_!==64){const N=m<<6&192|_;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const __=function(t){const e=v_(t);return Sh.encodeByteArray(e,!0)},bc=function(t){return __(t).replace(/\./g,"")},$f=function(t){try{return Sh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){return E_(void 0,t)}function E_(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!SR(n)||(t[n]=E_(t[n],e[n]));return t}function SR(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=()=>NR().__FIREBASE_DEFAULTS__,wR=()=>{if(typeof process>"u"||typeof Mx>"u")return;const t=Mx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$f(t[1]);return e&&JSON.parse(e)},C_=()=>{try{return ER()||AR()||wR()||IR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RR=t=>{var e,n;return(n=(e=C_())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},MR=t=>{const e=RR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},b_=()=>{var t;return(t=C_())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function DR(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[bc(JSON.stringify(n)),bc(JSON.stringify(u)),""].join(".")}const Ca={};function PR(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ca))Ca[e]?t.emulator.push(e):t.prod.push(e);return t}function LR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Dx=!1;function UR(t,e){if(typeof window>"u"||typeof document>"u"||!Nh(window.location.host)||Ca[t]===e||Ca[t]||Dx)return;Ca[t]=e;function n(E){return`__firebase__banner__${E}`}const s="__firebase__banner",r=PR().prod.length>0;function u(){const E=document.getElementById(s);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function y(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Dx=!0,u()},E}function v(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=LR(s),T=n("text"),N=document.getElementById(T)||document.createElement("span"),D=n("learnmore"),k=document.getElementById(D)||document.createElement("a"),G=n("preprendIcon"),X=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;p(j),v(k,D);const M=m();y(X,G),j.append(X,N,k,M),document.body.appendChild(j)}r?(N.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function T_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(BR())}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HR(){return x_.NODE_ADMIN===!0}function GR(){try{return typeof indexedDB=="object"}catch{return!1}}function qR(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var r;e(((r=l.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="FirebaseError";class Ha extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=VR,Object.setPrototypeOf(this,Ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S_.prototype.create)}}class S_{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,r=this.errors[e],u=r?FR(r,s):"Error",p=`${this.serviceName}: ${u} (${l}).`;return new Ha(l,p,s)}}function FR(t,e){return t.replace(zR,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const zR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(t){return JSON.parse(t)}function fn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=function(t){let e={},n={},s={},l="";try{const r=t.split(".");e=Ia($f(r[0])||""),n=Ia($f(r[1])||""),l=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},jR=function(t){const e=N_(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},YR=function(t){const e=N_(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ll(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tc(t,e,n){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(n,t[l],l,t));return s}function Sc(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const r=t[l],u=e[l];if(Px(r)&&Px(u)){if(!Sc(r,u))return!1}else if(r!==u)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function Px(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)s[_]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let _=0;_<16;_++)s[_]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let _=16;_<80;_++){const E=s[_-3]^s[_-8]^s[_-14]^s[_-16];s[_]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],r=this.chain_[1],u=this.chain_[2],p=this.chain_[3],y=this.chain_[4],m,v;for(let _=0;_<80;_++){_<40?_<20?(m=p^r&(u^p),v=1518500249):(m=r^u^p,v=1859775393):_<60?(m=r&u|p&(r|u),v=2400959708):(m=r^u^p,v=3395469782);const E=(l<<5|l>>>27)+m+y+v+s[_]&4294967295;y=p,p=u,u=(r<<30|r>>>2)&4294967295,r=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+p&4294967295,this.chain_[4]=this.chain_[4]+y&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const r=this.buf_;let u=this.inbuf_;for(;l<n;){if(u===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(r[u]=e.charCodeAt(l),++u,++l,u===this.blockSize){this.compress_(r),u=0;break}}else for(;l<n;)if(r[u]=e[l],++u,++l,u===this.blockSize){this.compress_(r),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[l]>>r&255,++s;return e}}function $c(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const r=l-55296;s++,de(s<t.length,"Surrogate pair missing trail surrogate.");const u=t.charCodeAt(s)-56320;l=65536+(r<<10)+u}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Jc=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){return t&&t._delegate?t._delegate:t}class Ra{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Oa;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WR(e))try{this.getOrInitializeService({instanceIdentifier:no})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:l});s.resolve(r)}catch{}}}}clearInstance(e=no){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=no){return this.instances.has(e)}getOptions(e=no){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,u]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(r);s===p&&u.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const r=this.instances.get(s);return r&&e(r,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=no){return this.component?this.component.multipleInstances?e:no:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XR(t){return t===no?void 0:t}function WR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const eM={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},tM=Rt.INFO,nM={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},iM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=nM[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class A_{constructor(e){this.name=e,this._logLevel=tM,this._logHandler=iM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const sM=(t,e)=>e.some(n=>t instanceof n);let Lx,Ux;function oM(){return Lx||(Lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lM(){return Ux||(Ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w_=new WeakMap,Jf=new WeakMap,I_=new WeakMap,_f=new WeakMap,Ah=new WeakMap;function aM(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",r),t.removeEventListener("error",u)},r=()=>{n(Ms(t.result)),l()},u=()=>{s(t.error),l()};t.addEventListener("success",r),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&w_.set(n,t)}).catch(()=>{}),Ah.set(e,t),e}function rM(t){if(Jf.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",u),t.removeEventListener("abort",u)},r=()=>{n(),l()},u=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",r),t.addEventListener("error",u),t.addEventListener("abort",u)});Jf.set(t,e)}let Kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||I_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cM(t){Kf=t(Kf)}function uM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ef(this),e,...n);return I_.set(s,e.sort?e.sort():[e]),Ms(s)}:lM().includes(t)?function(...e){return t.apply(Ef(this),e),Ms(w_.get(this))}:function(...e){return Ms(t.apply(Ef(this),e))}}function dM(t){return typeof t=="function"?uM(t):(t instanceof IDBTransaction&&rM(t),sM(t,oM())?new Proxy(t,Kf):t)}function Ms(t){if(t instanceof IDBRequest)return aM(t);if(_f.has(t))return _f.get(t);const e=dM(t);return e!==t&&(_f.set(t,e),Ah.set(e,t)),e}const Ef=t=>Ah.get(t);function fM(t,e,{blocked:n,upgrade:s,blocking:l,terminated:r}={}){const u=indexedDB.open(t,e),p=Ms(u);return s&&u.addEventListener("upgradeneeded",y=>{s(Ms(u.result),y.oldVersion,y.newVersion,Ms(u.transaction),y)}),n&&u.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{r&&y.addEventListener("close",()=>r()),l&&y.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),p}const hM=["get","getKey","getAll","getAllKeys","count"],pM=["put","add","delete","clear"],Cf=new Map;function Bx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cf.get(e))return Cf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=pM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||hM.includes(n)))return;const r=async function(u,...p){const y=this.transaction(u,l?"readwrite":"readonly");let m=y.store;return s&&(m=m.index(p.shift())),(await Promise.all([m[n](...p),l&&y.done]))[0]};return Cf.set(e,r),r}cM(t=>({...t,get:(e,n,s)=>Bx(e,n)||t.get(e,n,s),has:(e,n)=>!!Bx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function gM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qf="@firebase/app",Ox="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new A_("@firebase/app"),yM="@firebase/app-compat",xM="@firebase/analytics-compat",vM="@firebase/analytics",_M="@firebase/app-check-compat",EM="@firebase/app-check",CM="@firebase/auth",bM="@firebase/auth-compat",TM="@firebase/database",SM="@firebase/data-connect",NM="@firebase/database-compat",AM="@firebase/functions",wM="@firebase/functions-compat",IM="@firebase/installations",RM="@firebase/installations-compat",MM="@firebase/messaging",DM="@firebase/messaging-compat",kM="@firebase/performance",PM="@firebase/performance-compat",LM="@firebase/remote-config",UM="@firebase/remote-config-compat",BM="@firebase/storage",OM="@firebase/storage-compat",HM="@firebase/firestore",GM="@firebase/ai",qM="@firebase/firestore-compat",VM="firebase",FM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="[DEFAULT]",zM={[Qf]:"fire-core",[yM]:"fire-core-compat",[vM]:"fire-analytics",[xM]:"fire-analytics-compat",[EM]:"fire-app-check",[_M]:"fire-app-check-compat",[CM]:"fire-auth",[bM]:"fire-auth-compat",[TM]:"fire-rtdb",[SM]:"fire-data-connect",[NM]:"fire-rtdb-compat",[AM]:"fire-fn",[wM]:"fire-fn-compat",[IM]:"fire-iid",[RM]:"fire-iid-compat",[MM]:"fire-fcm",[DM]:"fire-fcm-compat",[kM]:"fire-perf",[PM]:"fire-perf-compat",[LM]:"fire-rc",[UM]:"fire-rc-compat",[BM]:"fire-gcs",[OM]:"fire-gcs-compat",[HM]:"fire-fst",[qM]:"fire-fst-compat",[GM]:"fire-vertex","fire-js":"fire-js",[VM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc=new Map,jM=new Map,Wf=new Map;function Hx(t,e){try{t.container.addComponent(e)}catch(n){Zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ac(t){const e=t.name;if(Wf.has(e))return Zi.debug(`There were multiple attempts to register component ${e}.`),!1;Wf.set(e,t);for(const n of Nc.values())Hx(n,t);for(const n of jM.values())Hx(n,t);return!0}function YM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $M(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new S_("app","Firebase",JM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=FM;function R_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Xf,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Ds.create("bad-app-name",{appName:String(l)});if(n||(n=b_()),!n)throw Ds.create("no-options");const r=Nc.get(l);if(r){if(Sc(n,r.options)&&Sc(s,r.config))return r;throw Ds.create("duplicate-app",{appName:l})}const u=new ZR(l);for(const y of Wf.values())u.addComponent(y);const p=new KM(n,s,u);return Nc.set(l,p),p}function XM(t=Xf){const e=Nc.get(t);if(!e&&t===Xf&&b_())return R_();if(!e)throw Ds.create("no-app",{appName:t});return e}function nl(t,e,n){let s=zM[t]??t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),r=e.match(/\s|\//);if(l||r){const u=[`Unable to register library "${s}" with version "${e}":`];l&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&r&&u.push("and"),r&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zi.warn(u.join(" "));return}Ac(new Ra(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="firebase-heartbeat-database",ZM=1,Ma="firebase-heartbeat-store";let bf=null;function M_(){return bf||(bf=fM(WM,ZM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ds.create("idb-open",{originalErrorMessage:t.message})})),bf}async function eD(t){try{const n=(await M_()).transaction(Ma),s=await n.objectStore(Ma).get(D_(t));return await n.done,s}catch(e){if(e instanceof Ha)Zi.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zi.warn(n.message)}}}async function Gx(t,e){try{const s=(await M_()).transaction(Ma,"readwrite");await s.objectStore(Ma).put(e,D_(t)),await s.done}catch(n){if(n instanceof Ha)Zi.warn(n.message);else{const s=Ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zi.warn(s.message)}}}function D_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=1024,nD=30;class iD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qx();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(u=>u.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:l}),this._heartbeatsCache.heartbeats.length>nD){const u=lD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Zi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qx(),{heartbeatsToSend:s,unsentEntries:l}=sD(this._heartbeatsCache.heartbeats),r=bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Zi.warn(n),""}}}function qx(){return new Date().toISOString().substring(0,10)}function sD(t,e=tD){const n=[];let s=t.slice();for(const l of t){const r=n.find(u=>u.agent===l.agent);if(r){if(r.dates.push(l.date),Vx(n)>e){r.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Vx(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class oD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GR()?qR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vx(t){return bc(JSON.stringify({version:2,heartbeats:t})).length}function lD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){Ac(new Ra("platform-logger",e=>new mM(e),"PRIVATE")),Ac(new Ra("heartbeat",e=>new iD(e),"PRIVATE")),nl(Qf,Ox,t),nl(Qf,Ox,"esm2020"),nl("fire-js","")}aD("");var rD="firebase",cD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nl(rD,cD,"app");var Fx={};const zx="@firebase/database",jx="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k_="";function uD(t){k_=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),fn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ia(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Si(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dD(e)}}catch{}return new fD},so=P_("localStorage"),hD=P_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new A_("@firebase/database"),pD=(function(){let t=1;return function(){return t++}})(),L_=function(t){const e=KR(t),n=new JR;n.update(e);const s=n.digest();return Sh.encodeByteArray(s)},qa=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=qa.apply(null,s):typeof s=="object"?e+=fn(s):e+=s,e+=" "}return e};let ba=null,Yx=!0;const mD=function(t,e){de(!0,"Can't turn on custom loggers persistently."),il.logLevel=Rt.VERBOSE,ba=il.log.bind(il)},_n=function(...t){if(Yx===!0&&(Yx=!1,ba===null&&hD.get("logging_enabled")===!0&&mD()),ba){const e=qa.apply(null,t);ba(e)}},Va=function(t){return function(...e){_n(t,...e)}},Zf=function(...t){const e="FIREBASE INTERNAL ERROR: "+qa(...t);il.error(e)},es=function(...t){const e=`FIREBASE FATAL ERROR: ${qa(...t)}`;throw il.error(e),new Error(e)},Nn=function(...t){const e="FIREBASE WARNING: "+qa(...t);il.warn(e)},gD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Nn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wh=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},al="[MIN_NAME]",oo="[MAX_NAME]",uo=function(t,e){if(t===e)return 0;if(t===al||e===oo)return-1;if(e===al||t===oo)return 1;{const n=$x(t),s=$x(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},xD=function(t,e){return t===e?0:t<e?-1:1},ya=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+fn(e))},Ih=function(t){if(typeof t!="object"||t===null)return fn(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=fn(e[s]),n+=":",n+=Ih(t[e[s]]);return n+="}",n},U_=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(t.substring(l,n)):s.push(t.substring(l,l+e));return s};function En(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const B_=function(t){de(!wh(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,r,u,p,y;t===0?(r=0,u=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(p=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=p+s,u=Math.round(t*Math.pow(2,n-p)-Math.pow(2,n))):(r=0,u=Math.round(t/Math.pow(2,1-s-n))));const m=[];for(y=n;y;y-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(y=e;y;y-=1)m.push(r%2?1:0),r=Math.floor(r/2);m.push(l?1:0),m.reverse();const v=m.join("");let _="";for(y=0;y<64;y+=8){let E=parseInt(v.substr(y,8),2).toString(16);E.length===1&&(E="0"+E),_=_+E}return _.toLowerCase()},vD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_D=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ED(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const CD=new RegExp("^-?(0*)\\d{1,10}$"),bD=-2147483648,TD=2147483647,$x=function(t){if(CD.test(t)){const e=Number(t);if(e>=bD&&e<=TD)return e}return null},gl=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Nn("Exception was thrown by user callback.",n),e},Math.floor(0))}},SD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ta=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$M(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Nn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nn(e)}}class pc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}pc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="5",O_="v",H_="s",G_="r",q_="f",V_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,F_="ls",z_="p",eh="ac",j_="websocket",Y_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n,s,l,r=!1,u="",p=!1,y=!1,m=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=r,this.persistenceKey=u,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=y,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=so.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&so.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function wD(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function J_(t,e,n){de(typeof e=="string","typeof type must == string"),de(typeof n=="object","typeof params must == object");let s;if(e===j_)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Y_)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);wD(t)&&(n.ns=t.namespace);const l=[];return En(n,(r,u)=>{l.push(r+"="+u)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.counters_={}}incrementCounter(e,n=1){Si(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return TR(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf={},Sf={};function Mh(t){const e=t.toString();return Tf[e]||(Tf[e]=new ID),Tf[e]}function RD(t,e){const n=t.toString();return Sf[n]||(Sf[n]=e()),Sf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&gl(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="start",DD="close",kD="pLPCommand",PD="pRTLPCB",K_="id",Q_="pw",X_="ser",LD="cb",UD="seg",BD="ts",OD="d",HD="dframe",W_=1870,Z_=30,GD=W_-Z_,qD=25e3,VD=3e4;class Zo{constructor(e,n,s,l,r,u,p){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=r,this.transportSessionId=u,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Va(e),this.stats_=Mh(n),this.urlFn=y=>(this.appCheckToken&&(y[eh]=this.appCheckToken),J_(n,Y_,y))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new MD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(VD)),yD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Dh((...r)=>{const[u,p,y,m,v]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Jx)this.id=p,this.password=y;else if(u===DD)p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...r)=>{const[u,p]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(u,p)},()=>{this.onClosed_()},this.urlFn);const s={};s[Jx]="t",s[X_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[LD]=this.scriptTagHolder.uniqueCallbackIdentifier),s[O_]=Rh,this.transportSessionId&&(s[H_]=this.transportSessionId),this.lastSessionId&&(s[F_]=this.lastSessionId),this.applicationId&&(s[z_]=this.applicationId),this.appCheckToken&&(s[eh]=this.appCheckToken),typeof location<"u"&&location.hostname&&V_.test(location.hostname)&&(s[G_]=q_);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zo.forceAllow_=!0}static forceDisallow(){Zo.forceDisallow_=!0}static isAvailable(){return Zo.forceAllow_?!0:!Zo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vD()&&!_D()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=fn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=__(n),l=U_(s,GD);for(let r=0;r<l.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[HD]="t",s[K_]=e,s[Q_]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=fn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Dh{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=pD(),window[kD+this.uniqueCallbackIdentifier]=e,window[PD+this.uniqueCallbackIdentifier]=n,this.myIFrame=Dh.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(p){_n("frame writing exception"),p.stack&&_n(p.stack),_n(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_n("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[K_]=this.myID,e[Q_]=this.myPW,e[X_]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Z_+s.length<=W_;){const u=this.pendingSegs.shift();s=s+"&"+UD+l+"="+u.seg+"&"+BD+l+"="+u.ts+"&"+OD+l+"="+u.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(qD)),r=()=>{clearTimeout(l),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{_n("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=16384,zD=45e3;let wc=null;typeof MozWebSocket<"u"?wc=MozWebSocket:typeof WebSocket<"u"&&(wc=WebSocket);class fi{constructor(e,n,s,l,r,u,p){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Va(this.connId),this.stats_=Mh(n),this.connURL=fi.connectionURL_(n,u,p,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,r){const u={};return u[O_]=Rh,typeof location<"u"&&location.hostname&&V_.test(location.hostname)&&(u[G_]=q_),n&&(u[H_]=n),s&&(u[F_]=s),l&&(u[eh]=l),r&&(u[z_]=r),J_(e,j_,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,so.set("previous_websocket_failure",!0);try{let s;HR(),this.mySock=new wc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&wc!==null&&!fi.forceDisallow_}static previouslyFailed(){return so.isInMemoryStorage||so.get("previous_websocket_failure")===!0}markConnectionHealthy(){so.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Ia(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(de(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=fn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=U_(n,FD);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}fi.responsesRequiredToBeHealthy=2;fi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static get ALL_TRANSPORTS(){return[Zo,fi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=fi&&fi.isAvailable();let s=n&&!fi.previouslyFailed();if(e.webSocketOnly&&(n||Nn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[fi];else{const l=this.transports_=[];for(const r of Da.ALL_TRANSPORTS)r&&r.isAvailable()&&l.push(r);Da.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Da.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=6e4,YD=5e3,$D=10*1024,JD=100*1024,Nf="t",Kx="d",KD="s",Qx="r",QD="e",Xx="o",Wx="a",Zx="n",ev="p",XD="h";class WD{constructor(e,n,s,l,r,u,p,y,m,v){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=r,this.onMessage_=u,this.onReady_=p,this.onDisconnect_=y,this.onKill_=m,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Va("c:"+this.id+":"),this.transportManager_=new Da(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>JD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$D?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nf in e){const n=e[Nf];n===Wx?this.upgradeIfSecondaryHealthy_():n===Qx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Xx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=ya("t",e),s=ya("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ev,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Wx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Zx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=ya("t",e),s=ya("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=ya(Nf,e);if(Kx in e){const s=e[Kx];if(n===XD){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===Zx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===KD?this.onConnectionShutdown_(s):n===Qx?this.onReset_(s):n===QD?Zf("Server Error: "+s):n===Xx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Zf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Rh!==s&&Nn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(jD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(YD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ev,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(so.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.allowedEvents_=e,this.listeners_={},de(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let r=0;r<l.length;r++)if(l[r].callback===n&&(!s||s===l[r].context)){l.splice(r,1);return}}validateEventType_(e){de(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends tE{static getInstance(){return new Ic}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!T_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return de(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv=32,nv=768;class Tt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function gt(){return new Tt("")}function Xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ps(t){return t.pieces_.length-t.pieceNum_}function Mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Tt(t.pieces_,e)}function kh(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ZD(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ka(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function nE(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Tt(e,0)}function Gt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Tt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new Tt(n,0)}function tt(t){return t.pieceNum_>=t.pieces_.length}function Ln(t,e){const n=Xe(t),s=Xe(e);if(n===null)return e;if(n===s)return Ln(Mt(t),Mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ek(t,e){const n=ka(t,0),s=ka(e,0);for(let l=0;l<n.length&&l<s.length;l++){const r=uo(n[l],s[l]);if(r!==0)return r}return n.length===s.length?0:n.length<s.length?-1:1}function Ph(t,e){if(Ps(t)!==Ps(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function ii(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Ps(t)>Ps(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class tk{constructor(e,n){this.errorPrefix_=n,this.parts_=ka(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Jc(this.parts_[s]);iE(this)}}function nk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Jc(e),iE(t)}function ik(t){const e=t.parts_.pop();t.byteLength_-=Jc(e),t.parts_.length>0&&(t.byteLength_-=1)}function iE(t){if(t.byteLength_>nv)throw new Error(t.errorPrefix_+"has a key path longer than "+nv+" bytes ("+t.byteLength_+").");if(t.parts_.length>tv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+tv+") or object contains a cycle "+io(t))}function io(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh extends tE{static getInstance(){return new Lh}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return de(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=1e3,sk=300*1e3,iv=30*1e3,ok=1.3,lk=3e4,ak="server_kill",sv=3;class Xi extends eE{constructor(e,n,s,l,r,u,p,y){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=r,this.authTokenProvider_=u,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=Xi.nextPersistentConnectionId_++,this.log_=Va("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xa,this.maxReconnectDelay_=sk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Lh.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ic.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,r={r:l,a:e,b:n};this.log_(fn(r)),de(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new Oa,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const p=u.d;u.s==="ok"?n.resolve(p):n.reject(p)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,l){this.initConnection_();const r=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+r),this.listens.has(u)||this.listens.set(u,new Map),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),de(!this.listens.get(u).has(r),"listen() called twice for same path/queryId.");const p={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(u).set(r,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const r={p:s},u="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(u,r,p=>{const y=p.d,m=p.s;Xi.warnOnListenWarnings_(y,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",p),m!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(m,y))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Si(e,"w")){const s=ll(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Nn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||YR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=jR(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const r=l.s,u=l.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),de(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const r={p:e},u="n";l&&(r.q=s,r.t=l),this.sendRequest(u,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,u=>{l&&setTimeout(()=>{l(u.s,u.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,r){this.initConnection_();const u={p:n,d:s};r!==void 0&&(u.h=r),this.outstandingPuts_.push({action:e,request:u,onComplete:l}),this.outstandingPutCount_++;const p=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(p):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+fn(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Zf("Unrecognized action received from server: "+fn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){de(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>lk&&(this.reconnectDelay_=xa),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ok)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+Xi.nextConnectionId_++,r=this.lastSessionId;let u=!1,p=null;const y=function(){p?p.close():(u=!0,s())},m=function(_){de(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(_)};this.realtime_={close:y,sendRequest:m};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,E]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);u?_n("getToken() completed but was canceled"):(_n("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=E&&E.token,p=new WD(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,T=>{Nn(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(ak)},r))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&Nn(_),y())}}}interrupt(e){_n("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_n("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kx(this.interruptReasons_)&&(this.reconnectDelay_=xa,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>Ih(r)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new Tt(e).toString();let l;if(this.listens.has(s)){const r=this.listens.get(s);l=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){_n("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sv&&(this.reconnectDelay_=iv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_n("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+k_.replace(/\./g,"-")]=1,T_()?e["framework.cordova"]=1:OR()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ic.getInstance().currentlyOnline();return kx(this.interruptReasons_)&&e}}Xi.nextPersistentConnectionId_=0;Xi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new We(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new We(al,e),l=new We(al,n);return this.compare(s,l)!==0}minPost(){return We.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc;class sE extends Kc{static get __EMPTY_NODE(){return cc}static set __EMPTY_NODE(e){cc=e}compare(e,n){return uo(e.name,n.name)}isDefinedOn(e){throw ml("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return We.MIN}maxPost(){return new We(oo,cc)}makePost(e,n){return de(typeof e=="string","KeyIndex indexValue must always be a string."),new We(e,cc)}toString(){return".key"}}const sl=new sE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n,s,l,r=null){this.isReverse_=l,this.resultGenerator_=r,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?s(e.key,n):1,l&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class un{constructor(e,n,s,l,r){this.key=e,this.value=n,this.color=s??un.RED,this.left=l??Un.EMPTY_NODE,this.right=r??Un.EMPTY_NODE}copy(e,n,s,l,r){return new un(e??this.key,n??this.value,s??this.color,l??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const r=s(e,l.key);return r<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):r===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Un.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}un.RED=!0;un.BLACK=!1;class rk{copy(e,n,s,l,r){return this}insert(e,n,s){return new un(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Un{constructor(e,n=Un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,un.BLACK,null,null))}remove(e){return new Un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,un.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new uc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new uc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new uc(this.root_,null,this.comparator_,!0,e)}}Un.EMPTY_NODE=new rk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){return uo(t.name,e.name)}function Uh(t,e){return uo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th;function uk(t){th=t}const oE=function(t){return typeof t=="number"?"number:"+B_(t):"string:"+t},lE=function(t){if(t.isLeafNode()){const e=t.val();de(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Si(e,".sv"),"Priority must be a string or number.")}else de(t===th||t.isEmpty(),"priority of unexpected type.");de(t===th||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov;class cn{static set __childrenNodeConstructor(e){ov=e}static get __childrenNodeConstructor(){return ov}constructor(e,n=cn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,de(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),lE(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new cn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return tt(e)?this:Xe(e)===".priority"?this.priorityNode_:cn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:cn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Xe(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(de(s!==".priority"||Ps(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,cn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+oE(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=B_(this.value_):e+=this.value_,this.lazyHash_=L_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===cn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof cn.__childrenNodeConstructor?-1:(de(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=cn.VALUE_TYPE_ORDER.indexOf(n),r=cn.VALUE_TYPE_ORDER.indexOf(s);return de(l>=0,"Unknown leaf type: "+n),de(r>=0,"Unknown leaf type: "+s),l===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}cn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aE,rE;function dk(t){aE=t}function fk(t){rE=t}class hk extends Kc{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),r=s.compareTo(l);return r===0?uo(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return We.MIN}maxPost(){return new We(oo,new cn("[PRIORITY-POST]",rE))}makePost(e,n){const s=aE(e);return new We(n,new cn("[PRIORITY-POST]",s))}toString(){return".priority"}}const qt=new hk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=Math.log(2);class mk{constructor(e){const n=r=>parseInt(Math.log(r)/pk,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Rc=function(t,e,n,s){t.sort(e);const l=function(y,m){const v=m-y;let _,E;if(v===0)return null;if(v===1)return _=t[y],E=n?n(_):_,new un(E,_.node,un.BLACK,null,null);{const T=parseInt(v/2,10)+y,N=l(y,T),D=l(T+1,m);return _=t[T],E=n?n(_):_,new un(E,_.node,un.BLACK,N,D)}},r=function(y){let m=null,v=null,_=t.length;const E=function(N,D){const k=_-N,G=_;_-=N;const X=l(k+1,G),j=t[k],M=n?n(j):j;T(new un(M,j.node,D,null,X))},T=function(N){m?(m.left=N,m=N):(v=N,m=N)};for(let N=0;N<y.count;++N){const D=y.nextBitIsOne(),k=Math.pow(2,y.count-(N+1));D?E(k,un.BLACK):(E(k,un.BLACK),E(k,un.RED))}return v},u=new mk(t.length),p=r(u);return new Un(s||e,p)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af;const Ko={};class Qi{static get Default(){return de(Ko&&qt,"ChildrenNode.ts has not been loaded"),Af=Af||new Qi({".priority":Ko},{".priority":qt}),Af}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ll(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Un?n:null}hasIndex(e){return Si(this.indexSet_,e.toString())}addIndex(e,n){de(e!==sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const r=n.getIterator(We.Wrap);let u=r.getNext();for(;u;)l=l||e.isDefinedOn(u.node),s.push(u),u=r.getNext();let p;l?p=Rc(s,e.getCompare()):p=Ko;const y=e.toString(),m={...this.indexSet_};m[y]=e;const v={...this.indexes_};return v[y]=p,new Qi(v,m)}addToIndexes(e,n){const s=Tc(this.indexes_,(l,r)=>{const u=ll(this.indexSet_,r);if(de(u,"Missing index implementation for "+r),l===Ko)if(u.isDefinedOn(e.node)){const p=[],y=n.getIterator(We.Wrap);let m=y.getNext();for(;m;)m.name!==e.name&&p.push(m),m=y.getNext();return p.push(e),Rc(p,u.getCompare())}else return Ko;else{const p=n.get(e.name);let y=l;return p&&(y=y.remove(new We(e.name,p))),y.insert(e,e.node)}});return new Qi(s,this.indexSet_)}removeFromIndexes(e,n){const s=Tc(this.indexes_,l=>{if(l===Ko)return l;{const r=n.get(e.name);return r?l.remove(new We(e.name,r)):l}});return new Qi(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va;class He{static get EMPTY_NODE(){return va||(va=new He(new Un(Uh),null,Qi.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&lE(this.priorityNode_),this.children_.isEmpty()&&de(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||va}updatePriority(e){return this.children_.isEmpty()?this:new He(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?va:n}}getChild(e){const n=Xe(e);return n===null?this:this.getImmediateChild(n).getChild(Mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(de(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new We(e,n);let l,r;n.isEmpty()?(l=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const u=l.isEmpty()?va:this.priorityNode_;return new He(l,u,r)}}updateChild(e,n){const s=Xe(e);if(s===null)return n;{de(Xe(e)!==".priority"||Ps(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(Mt(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,r=!0;if(this.forEachChild(qt,(u,p)=>{n[u]=p.val(e),s++,r&&He.INTEGER_REGEXP_.test(u)?l=Math.max(l,Number(u)):r=!1}),!e&&r&&l<2*s){const u=[];for(const p in n)u[p]=n[p];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+oE(this.getPriority().val())+":"),this.forEachChild(qt,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":L_(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const r=l.getPredecessorKey(new We(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new We(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new We(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,We.Wrap);let r=l.peek();for(;r!=null&&n.compare(r,e)<0;)l.getNext(),r=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,We.Wrap);let r=l.peek();for(;r!=null&&n.compare(r,e)>0;)l.getNext(),r=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fa?-1:0}withIndex(e){if(e===sl||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new He(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===sl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(qt),l=n.getIterator(qt);let r=s.getNext(),u=l.getNext();for(;r&&u;){if(r.name!==u.name||!r.node.equals(u.node))return!1;r=s.getNext(),u=l.getNext()}return r===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===sl?null:this.indexMap_.get(e.toString())}}He.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gk extends He{constructor(){super(new Un(Uh),He.EMPTY_NODE,Qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return He.EMPTY_NODE}isEmpty(){return!1}}const Fa=new gk;Object.defineProperties(We,{MIN:{value:new We(al,He.EMPTY_NODE)},MAX:{value:new We(oo,Fa)}});sE.__EMPTY_NODE=He.EMPTY_NODE;cn.__childrenNodeConstructor=He;uk(Fa);fk(Fa);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=!0;function dn(t,e=null){if(t===null)return He.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),de(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new cn(n,dn(e))}if(!(t instanceof Array)&&yk){const n=[];let s=!1;if(En(t,(u,p)=>{if(u.substring(0,1)!=="."){const y=dn(p);y.isEmpty()||(s=s||!y.getPriority().isEmpty(),n.push(new We(u,y)))}}),n.length===0)return He.EMPTY_NODE;const r=Rc(n,ck,u=>u.name,Uh);if(s){const u=Rc(n,qt.getCompare());return new He(r,dn(e),new Qi({".priority":u},{".priority":qt}))}else return new He(r,dn(e),Qi.Default)}else{let n=He.EMPTY_NODE;return En(t,(s,l)=>{if(Si(t,s)&&s.substring(0,1)!=="."){const r=dn(l);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(dn(e))}}dk(dn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk extends Kc{constructor(e){super(),this.indexPath_=e,de(!tt(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),r=s.compareTo(l);return r===0?uo(e.name,n.name):r}makePost(e,n){const s=dn(e),l=He.EMPTY_NODE.updateChild(this.indexPath_,s);return new We(n,l)}maxPost(){const e=He.EMPTY_NODE.updateChild(this.indexPath_,Fa);return new We(oo,e)}toString(){return ka(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk extends Kc{compare(e,n){const s=e.node.compareTo(n.node);return s===0?uo(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return We.MIN}maxPost(){return We.MAX}makePost(e,n){const s=dn(e);return new We(n,s)}toString(){return".value"}}const _k=new vk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){return{type:"value",snapshotNode:t}}function rl(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Pa(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function La(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ek(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this.index_=e}updateChild(e,n,s,l,r,u){de(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(n);return p.getChild(l).equals(s.getChild(l))&&p.isEmpty()===s.isEmpty()||(u!=null&&(s.isEmpty()?e.hasChild(n)?u.trackChildChange(Pa(n,p)):de(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?u.trackChildChange(rl(n,s)):u.trackChildChange(La(n,s,p))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(qt,(l,r)=>{n.hasChild(l)||s.trackChildChange(Pa(l,r))}),n.isLeafNode()||n.forEachChild(qt,(l,r)=>{if(e.hasChild(l)){const u=e.getImmediateChild(l);u.equals(r)||s.trackChildChange(La(l,r,u))}else s.trackChildChange(rl(l,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?He.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.indexedFilter_=new Bh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ua.getStartPost_(e),this.endPost_=Ua.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,l,r,u){return this.matches(new We(n,s))||(s=He.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,l,r,u)}updateFullNode(e,n,s){n.isLeafNode()&&(n=He.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(He.EMPTY_NODE);const r=this;return n.forEachChild(qt,(u,p)=>{r.matches(new We(u,p))||(l=l.updateImmediateChild(u,He.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ua(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,l,r,u){return this.rangedFilter_.matches(new We(n,s))||(s=He.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,l,r,u):this.fullLimitUpdateChild_(e,n,s,r,u)}updateFullNode(e,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=He.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=He.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;r.hasNext()&&u<this.limit_;){const p=r.getNext();if(this.withinDirectionalStart(p))if(this.withinDirectionalEnd(p))l=l.updateImmediateChild(p.name,p.node),u++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(He.EMPTY_NODE);let r;this.reverse_?r=l.getReverseIterator(this.index_):r=l.getIterator(this.index_);let u=0;for(;r.hasNext();){const p=r.getNext();u<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?u++:l=l.updateImmediateChild(p.name,He.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,l,r){let u;if(this.reverse_){const _=this.index_.getCompare();u=(E,T)=>_(T,E)}else u=this.index_.getCompare();const p=e;de(p.numChildren()===this.limit_,"");const y=new We(n,s),m=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),v=this.rangedFilter_.matches(y);if(p.hasChild(n)){const _=p.getImmediateChild(n);let E=l.getChildAfterChild(this.index_,m,this.reverse_);for(;E!=null&&(E.name===n||p.hasChild(E.name));)E=l.getChildAfterChild(this.index_,E,this.reverse_);const T=E==null?1:u(E,y);if(v&&!s.isEmpty()&&T>=0)return r!=null&&r.trackChildChange(La(n,s,_)),p.updateImmediateChild(n,s);{r!=null&&r.trackChildChange(Pa(n,_));const D=p.updateImmediateChild(n,He.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(r!=null&&r.trackChildChange(rl(E.name,E.node)),D.updateImmediateChild(E.name,E.node)):D}}else return s.isEmpty()?e:v&&u(m,y)>=0?(r!=null&&(r.trackChildChange(Pa(m.name,m.node)),r.trackChildChange(rl(n,s))),p.updateImmediateChild(n,s).updateImmediateChild(m.name,He.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return de(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return de(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:al}hasEnd(){return this.endSet_}getIndexEndValue(){return de(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return de(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return de(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qt}copy(){const e=new Oh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bk(t){return t.loadsAllData()?new Bh(t.getIndex()):t.hasLimit()?new Ck(t):new Ua(t)}function lv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===qt?n="$priority":t.index_===_k?n="$value":t.index_===sl?n="$key":(de(t.index_ instanceof xk,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=fn(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=fn(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+fn(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=fn(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+fn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function av(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==qt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends eE{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(de(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=Va("p:rest:"),this.listens_={}}listen(e,n,s,l){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const u=Mc.getListenId_(e,s),p={};this.listens_[u]=p;const y=lv(e._queryParams);this.restRequest_(r+".json",y,(m,v)=>{let _=v;if(m===404&&(_=null,m=null),m===null&&this.onDataUpdate_(r,_,!1,s),ll(this.listens_,u)===p){let E;m?m===401?E="permission_denied":E="rest_error:"+m:E="ok",l(E,null)}})}unlisten(e,n){const s=Mc.getListenId_(e,n);delete this.listens_[s]}get(e){const n=lv(e._queryParams),s=e._path.toString(),l=new Oa;return this.restRequest_(s+".json",n,(r,u)=>{let p=u;r===404&&(p=null,r=null),r===null?(this.onDataUpdate_(s,p,!1,null),l.resolve(p)):l.reject(new Error(p))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,r])=>{l&&l.accessToken&&(n.auth=l.accessToken),r&&r.token&&(n.ac=r.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$R(n);this.log_("Sending REST request for "+u);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(s&&p.readyState===4){this.log_("REST Response for "+u+" received. status:",p.status,"response:",p.responseText);let y=null;if(p.status>=200&&p.status<300){try{y=Ia(p.responseText)}catch{Nn("Failed to parse JSON response for "+u+": "+p.responseText)}s(null,y)}else p.status!==401&&p.status!==404&&Nn("Got unsuccessful REST response for "+u+" Status: "+p.status),s(p.status);s=null}},p.open("GET",u,!0),p.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.rootNode_=He.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(){return{value:null,children:new Map}}function uE(t,e,n){if(tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=Xe(e);t.children.has(s)||t.children.set(s,Dc());const l=t.children.get(s);e=Mt(e),uE(l,e,n)}}function nh(t,e,n){t.value!==null?n(e,t.value):Sk(t,(s,l)=>{const r=new Tt(e.toString()+"/"+s);nh(l,r,n)})}function Sk(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&En(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=10*1e3,Ak=30*1e3,wk=300*1e3;class Ik{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nk(e);const s=rv+(Ak-rv)*Math.random();Ta(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;En(e,(l,r)=>{r>0&&Si(this.statsToReport_,l)&&(n[l]=r,s=!0)}),s&&this.server_.reportStats(n),Ta(this.reportStats_.bind(this),Math.floor(Math.random()*2*wk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hi;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(hi||(hi={}));function Hh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=hi.ACK_USER_WRITE,this.source=Hh()}operationForChild(e){if(tt(this.path)){if(this.affectedTree.value!=null)return de(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Tt(e));return new kc(gt(),n,this.revert)}}else return de(Xe(this.path)===e,"operationForChild called for unrelated child."),new kc(Mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.source=e,this.path=n,this.type=hi.LISTEN_COMPLETE}operationForChild(e){return tt(this.path)?new Ba(this.source,gt()):new Ba(this.source,Mt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=hi.OVERWRITE}operationForChild(e){return tt(this.path)?new lo(this.source,gt(),this.snap.getImmediateChild(e)):new lo(this.source,Mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=hi.MERGE}operationForChild(e){if(tt(this.path)){const n=this.children.subtree(new Tt(e));return n.isEmpty()?null:n.value?new lo(this.source,gt(),n.value):new cl(this.source,gt(),n)}else return de(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new cl(this.source,Mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Mk(t,e,n,s){const l=[],r=[];return e.forEach(u=>{u.type==="child_changed"&&t.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&r.push(Ek(u.childName,u.snapshotNode))}),_a(t,l,"child_removed",e,s,n),_a(t,l,"child_added",e,s,n),_a(t,l,"child_moved",r,s,n),_a(t,l,"child_changed",e,s,n),_a(t,l,"value",e,s,n),l}function _a(t,e,n,s,l,r){const u=s.filter(p=>p.type===n);u.sort((p,y)=>kk(t,p,y)),u.forEach(p=>{const y=Dk(t,p,r);l.forEach(m=>{m.respondsTo(p.type)&&e.push(m.createEvent(y,t.query_))})})}function Dk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function kk(t,e,n){if(e.childName==null||n.childName==null)throw ml("Should only compare child_ events.");const s=new We(e.childName,e.snapshotNode),l=new We(n.childName,n.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e){return{eventCache:t,serverCache:e}}function Sa(t,e,n,s){return Qc(new ao(e,n,s),t.serverCache)}function dE(t,e,n,s){return Qc(t.eventCache,new ao(e,n,s))}function ih(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ro(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf;const Pk=()=>(wf||(wf=new Un(xD)),wf);class It{static fromObject(e){let n=new It(null);return En(e,(s,l)=>{n=n.set(new Tt(s),l)}),n}constructor(e,n=Pk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:gt(),value:this.value};if(tt(e))return null;{const s=Xe(e),l=this.children.get(s);if(l!==null){const r=l.findRootMostMatchingPathAndValue(Mt(e),n);return r!=null?{path:Gt(new Tt(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tt(e))return this;{const n=Xe(e),s=this.children.get(n);return s!==null?s.subtree(Mt(e)):new It(null)}}set(e,n){if(tt(e))return new It(n,this.children);{const s=Xe(e),r=(this.children.get(s)||new It(null)).set(Mt(e),n),u=this.children.insert(s,r);return new It(this.value,u)}}remove(e){if(tt(e))return this.children.isEmpty()?new It(null):new It(null,this.children);{const n=Xe(e),s=this.children.get(n);if(s){const l=s.remove(Mt(e));let r;return l.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,l),this.value===null&&r.isEmpty()?new It(null):new It(this.value,r)}else return this}}get(e){if(tt(e))return this.value;{const n=Xe(e),s=this.children.get(n);return s?s.get(Mt(e)):null}}setTree(e,n){if(tt(e))return n;{const s=Xe(e),r=(this.children.get(s)||new It(null)).setTree(Mt(e),n);let u;return r.isEmpty()?u=this.children.remove(s):u=this.children.insert(s,r),new It(this.value,u)}}fold(e){return this.fold_(gt(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,r)=>{s[l]=r.fold_(Gt(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,gt(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(tt(e))return null;{const r=Xe(e),u=this.children.get(r);return u?u.findOnPath_(Mt(e),Gt(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,gt(),n)}foreachOnPath_(e,n,s){if(tt(e))return this;{this.value&&s(n,this.value);const l=Xe(e),r=this.children.get(l);return r?r.foreachOnPath_(Mt(e),Gt(n,l),s):new It(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(Gt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.writeTree_=e}static empty(){return new gi(new It(null))}}function Na(t,e,n){if(tt(e))return new gi(new It(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let r=s.value;const u=Ln(l,e);return r=r.updateChild(u,n),new gi(t.writeTree_.set(l,r))}else{const l=new It(n),r=t.writeTree_.setTree(e,l);return new gi(r)}}}function sh(t,e,n){let s=t;return En(n,(l,r)=>{s=Na(s,Gt(e,l),r)}),s}function cv(t,e){if(tt(e))return gi.empty();{const n=t.writeTree_.setTree(e,new It(null));return new gi(n)}}function oh(t,e){return fo(t,e)!=null}function fo(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ln(n.path,e)):null}function uv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(qt,(s,l)=>{e.push(new We(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new We(s,l.value))}),e}function ks(t,e){if(tt(e))return t;{const n=fo(t,e);return n!=null?new gi(new It(n)):new gi(t.writeTree_.subtree(e))}}function lh(t){return t.writeTree_.isEmpty()}function ul(t,e){return fE(gt(),t.writeTree_,e)}function fE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,r)=>{l===".priority"?(de(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=fE(Gt(t,l),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(Gt(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t,e){return gE(e,t)}function Lk(t,e,n,s,l){de(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(t.visibleWrites=Na(t.visibleWrites,e,n)),t.lastWriteId=s}function Uk(t,e,n,s){de(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=sh(t.visibleWrites,e,n),t.lastWriteId=s}function Bk(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Ok(t,e){const n=t.allWrites.findIndex(p=>p.writeId===e);de(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let l=s.visible,r=!1,u=t.allWrites.length-1;for(;l&&u>=0;){const p=t.allWrites[u];p.visible&&(u>=n&&Hk(p,s.path)?l=!1:ii(s.path,p.path)&&(r=!0)),u--}if(l){if(r)return Gk(t),!0;if(s.snap)t.visibleWrites=cv(t.visibleWrites,s.path);else{const p=s.children;En(p,y=>{t.visibleWrites=cv(t.visibleWrites,Gt(s.path,y))})}return!0}else return!1}function Hk(t,e){if(t.snap)return ii(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ii(Gt(t.path,n),e))return!0;return!1}function Gk(t){t.visibleWrites=hE(t.allWrites,qk,gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qk(t){return t.visible}function hE(t,e,n){let s=gi.empty();for(let l=0;l<t.length;++l){const r=t[l];if(e(r)){const u=r.path;let p;if(r.snap)ii(n,u)?(p=Ln(n,u),s=Na(s,p,r.snap)):ii(u,n)&&(p=Ln(u,n),s=Na(s,gt(),r.snap.getChild(p)));else if(r.children){if(ii(n,u))p=Ln(n,u),s=sh(s,p,r.children);else if(ii(u,n))if(p=Ln(u,n),tt(p))s=sh(s,gt(),r.children);else{const y=ll(r.children,Xe(p));if(y){const m=y.getChild(Mt(p));s=Na(s,gt(),m)}}}else throw ml("WriteRecord should have .snap or .children")}}return s}function pE(t,e,n,s,l){if(!s&&!l){const r=fo(t.visibleWrites,e);if(r!=null)return r;{const u=ks(t.visibleWrites,e);if(lh(u))return n;if(n==null&&!oh(u,gt()))return null;{const p=n||He.EMPTY_NODE;return ul(u,p)}}}else{const r=ks(t.visibleWrites,e);if(!l&&lh(r))return n;if(!l&&n==null&&!oh(r,gt()))return null;{const u=function(m){return(m.visible||l)&&(!s||!~s.indexOf(m.writeId))&&(ii(m.path,e)||ii(e,m.path))},p=hE(t.allWrites,u,e),y=n||He.EMPTY_NODE;return ul(p,y)}}}function Vk(t,e,n){let s=He.EMPTY_NODE;const l=fo(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(qt,(r,u)=>{s=s.updateImmediateChild(r,u)}),s;if(n){const r=ks(t.visibleWrites,e);return n.forEachChild(qt,(u,p)=>{const y=ul(ks(r,new Tt(u)),p);s=s.updateImmediateChild(u,y)}),uv(r).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}else{const r=ks(t.visibleWrites,e);return uv(r).forEach(u=>{s=s.updateImmediateChild(u.name,u.node)}),s}}function Fk(t,e,n,s,l){de(s||l,"Either existingEventSnap or existingServerSnap must exist");const r=Gt(e,n);if(oh(t.visibleWrites,r))return null;{const u=ks(t.visibleWrites,r);return lh(u)?l.getChild(n):ul(u,l.getChild(n))}}function zk(t,e,n,s){const l=Gt(e,n),r=fo(t.visibleWrites,l);if(r!=null)return r;if(s.isCompleteForChild(n)){const u=ks(t.visibleWrites,l);return ul(u,s.getNode().getImmediateChild(n))}else return null}function jk(t,e){return fo(t.visibleWrites,e)}function Yk(t,e,n,s,l,r,u){let p;const y=ks(t.visibleWrites,e),m=fo(y,gt());if(m!=null)p=m;else if(n!=null)p=ul(y,n);else return[];if(p=p.withIndex(u),!p.isEmpty()&&!p.isLeafNode()){const v=[],_=u.getCompare(),E=r?p.getReverseIteratorFrom(s,u):p.getIteratorFrom(s,u);let T=E.getNext();for(;T&&v.length<l;)_(T,s)!==0&&v.push(T),T=E.getNext();return v}else return[]}function $k(){return{visibleWrites:gi.empty(),allWrites:[],lastWriteId:-1}}function Pc(t,e,n,s){return pE(t.writeTree,t.treePath,e,n,s)}function Fh(t,e){return Vk(t.writeTree,t.treePath,e)}function dv(t,e,n,s){return Fk(t.writeTree,t.treePath,e,n,s)}function Lc(t,e){return jk(t.writeTree,Gt(t.treePath,e))}function Jk(t,e,n,s,l,r){return Yk(t.writeTree,t.treePath,e,n,s,l,r)}function zh(t,e,n){return zk(t.writeTree,t.treePath,e,n)}function mE(t,e){return gE(Gt(t.treePath,e),t.writeTree)}function gE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;de(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),de(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const r=l.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,La(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,Pa(s,l.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,rl(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,La(s,e.snapshotNode,l.oldSnap));else throw ml("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const yE=new Qk;class jh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new ao(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ro(this.viewCache_),r=Jk(this.writes_,l,n,1,s,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){return{filter:t}}function Wk(t,e){de(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),de(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Zk(t,e,n,s,l){const r=new Kk;let u,p;if(n.type===hi.OVERWRITE){const m=n;m.source.fromUser?u=ah(t,e,m.path,m.snap,s,l,r):(de(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered()&&!tt(m.path),u=Uc(t,e,m.path,m.snap,s,l,p,r))}else if(n.type===hi.MERGE){const m=n;m.source.fromUser?u=t2(t,e,m.path,m.children,s,l,r):(de(m.source.fromServer,"Unknown source."),p=m.source.tagged||e.serverCache.isFiltered(),u=rh(t,e,m.path,m.children,s,l,p,r))}else if(n.type===hi.ACK_USER_WRITE){const m=n;m.revert?u=s2(t,e,m.path,s,l,r):u=n2(t,e,m.path,m.affectedTree,s,l,r)}else if(n.type===hi.LISTEN_COMPLETE)u=i2(t,e,n.path,s,r);else throw ml("Unknown operation type: "+n.type);const y=r.getChanges();return e2(e,u,y),{viewCache:u,changes:y}}function e2(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=ih(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(cE(ih(e)))}}function xE(t,e,n,s,l,r){const u=e.eventCache;if(Lc(s,n)!=null)return e;{let p,y;if(tt(n))if(de(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=ro(e),v=m instanceof He?m:He.EMPTY_NODE,_=Fh(s,v);p=t.filter.updateFullNode(e.eventCache.getNode(),_,r)}else{const m=Pc(s,ro(e));p=t.filter.updateFullNode(e.eventCache.getNode(),m,r)}else{const m=Xe(n);if(m===".priority"){de(Ps(n)===1,"Can't have a priority with additional path components");const v=u.getNode();y=e.serverCache.getNode();const _=dv(s,n,v,y);_!=null?p=t.filter.updatePriority(v,_):p=u.getNode()}else{const v=Mt(n);let _;if(u.isCompleteForChild(m)){y=e.serverCache.getNode();const E=dv(s,n,u.getNode(),y);E!=null?_=u.getNode().getImmediateChild(m).updateChild(v,E):_=u.getNode().getImmediateChild(m)}else _=zh(s,m,e.serverCache);_!=null?p=t.filter.updateChild(u.getNode(),m,_,v,l,r):p=u.getNode()}}return Sa(e,p,u.isFullyInitialized()||tt(n),t.filter.filtersNodes())}}function Uc(t,e,n,s,l,r,u,p){const y=e.serverCache;let m;const v=u?t.filter:t.filter.getIndexedFilter();if(tt(n))m=v.updateFullNode(y.getNode(),s,null);else if(v.filtersNodes()&&!y.isFiltered()){const T=y.getNode().updateChild(n,s);m=v.updateFullNode(y.getNode(),T,null)}else{const T=Xe(n);if(!y.isCompleteForPath(n)&&Ps(n)>1)return e;const N=Mt(n),k=y.getNode().getImmediateChild(T).updateChild(N,s);T===".priority"?m=v.updatePriority(y.getNode(),k):m=v.updateChild(y.getNode(),T,k,N,yE,null)}const _=dE(e,m,y.isFullyInitialized()||tt(n),v.filtersNodes()),E=new jh(l,_,r);return xE(t,_,n,l,E,p)}function ah(t,e,n,s,l,r,u){const p=e.eventCache;let y,m;const v=new jh(l,e,r);if(tt(n))m=t.filter.updateFullNode(e.eventCache.getNode(),s,u),y=Sa(e,m,!0,t.filter.filtersNodes());else{const _=Xe(n);if(_===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),s),y=Sa(e,m,p.isFullyInitialized(),p.isFiltered());else{const E=Mt(n),T=p.getNode().getImmediateChild(_);let N;if(tt(E))N=s;else{const D=v.getCompleteChild(_);D!=null?kh(E)===".priority"&&D.getChild(nE(E)).isEmpty()?N=D:N=D.updateChild(E,s):N=He.EMPTY_NODE}if(T.equals(N))y=e;else{const D=t.filter.updateChild(p.getNode(),_,N,E,v,u);y=Sa(e,D,p.isFullyInitialized(),t.filter.filtersNodes())}}}return y}function fv(t,e){return t.eventCache.isCompleteForChild(e)}function t2(t,e,n,s,l,r,u){let p=e;return s.foreach((y,m)=>{const v=Gt(n,y);fv(e,Xe(v))&&(p=ah(t,p,v,m,l,r,u))}),s.foreach((y,m)=>{const v=Gt(n,y);fv(e,Xe(v))||(p=ah(t,p,v,m,l,r,u))}),p}function hv(t,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function rh(t,e,n,s,l,r,u,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y=e,m;tt(n)?m=s:m=new It(null).setTree(n,s);const v=e.serverCache.getNode();return m.children.inorderTraversal((_,E)=>{if(v.hasChild(_)){const T=e.serverCache.getNode().getImmediateChild(_),N=hv(t,T,E);y=Uc(t,y,new Tt(_),N,l,r,u,p)}}),m.children.inorderTraversal((_,E)=>{const T=!e.serverCache.isCompleteForChild(_)&&E.value===null;if(!v.hasChild(_)&&!T){const N=e.serverCache.getNode().getImmediateChild(_),D=hv(t,N,E);y=Uc(t,y,new Tt(_),D,l,r,u,p)}}),y}function n2(t,e,n,s,l,r,u){if(Lc(l,n)!=null)return e;const p=e.serverCache.isFiltered(),y=e.serverCache;if(s.value!=null){if(tt(n)&&y.isFullyInitialized()||y.isCompleteForPath(n))return Uc(t,e,n,y.getNode().getChild(n),l,r,p,u);if(tt(n)){let m=new It(null);return y.getNode().forEachChild(sl,(v,_)=>{m=m.set(new Tt(v),_)}),rh(t,e,n,m,l,r,p,u)}else return e}else{let m=new It(null);return s.foreach((v,_)=>{const E=Gt(n,v);y.isCompleteForPath(E)&&(m=m.set(v,y.getNode().getChild(E)))}),rh(t,e,n,m,l,r,p,u)}}function i2(t,e,n,s,l){const r=e.serverCache,u=dE(e,r.getNode(),r.isFullyInitialized()||tt(n),r.isFiltered());return xE(t,u,n,s,yE,l)}function s2(t,e,n,s,l,r){let u;if(Lc(s,n)!=null)return e;{const p=new jh(s,e,l),y=e.eventCache.getNode();let m;if(tt(n)||Xe(n)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Pc(s,ro(e));else{const _=e.serverCache.getNode();de(_ instanceof He,"serverChildren would be complete if leaf node"),v=Fh(s,_)}v=v,m=t.filter.updateFullNode(y,v,r)}else{const v=Xe(n);let _=zh(s,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=y.getImmediateChild(v)),_!=null?m=t.filter.updateChild(y,v,_,Mt(n),p,r):e.eventCache.getNode().hasChild(v)?m=t.filter.updateChild(y,v,He.EMPTY_NODE,Mt(n),p,r):m=y,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Pc(s,ro(e)),u.isLeafNode()&&(m=t.filter.updateFullNode(m,u,r)))}return u=e.serverCache.isFullyInitialized()||Lc(s,gt())!=null,Sa(e,m,u,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new Bh(s.getIndex()),r=bk(s);this.processor_=Xk(r);const u=n.serverCache,p=n.eventCache,y=l.updateFullNode(He.EMPTY_NODE,u.getNode(),null),m=r.updateFullNode(He.EMPTY_NODE,p.getNode(),null),v=new ao(y,u.isFullyInitialized(),l.filtersNodes()),_=new ao(m,p.isFullyInitialized(),r.filtersNodes());this.viewCache_=Qc(_,v),this.eventGenerator_=new Rk(this.query_)}get query(){return this.query_}}function l2(t){return t.viewCache_.serverCache.getNode()}function a2(t,e){const n=ro(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!tt(e)&&!n.getImmediateChild(Xe(e)).isEmpty())?n.getChild(e):null}function pv(t){return t.eventRegistrations_.length===0}function r2(t,e){t.eventRegistrations_.push(e)}function mv(t,e,n){const s=[];if(n){de(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(r=>{const u=r.createCancelEvent(n,l);u&&s.push(u)})}if(e){let l=[];for(let r=0;r<t.eventRegistrations_.length;++r){const u=t.eventRegistrations_[r];if(!u.matches(e))l.push(u);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return s}function gv(t,e,n,s){e.type===hi.MERGE&&e.source.queryId!==null&&(de(ro(t.viewCache_),"We should always have a full cache before handling merges"),de(ih(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,r=Zk(t.processor_,l,e,n,s);return Wk(t.processor_,r.viewCache),de(r.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,vE(t,r.changes,r.viewCache.eventCache.getNode(),null)}function c2(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(qt,(r,u)=>{s.push(rl(r,u))}),n.isFullyInitialized()&&s.push(cE(n.getNode())),vE(t,s,n.getNode(),e)}function vE(t,e,n,s){const l=s?[s]:t.eventRegistrations_;return Mk(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc;class u2{constructor(){this.views=new Map}}function d2(t){de(!Bc,"__referenceConstructor has already been defined"),Bc=t}function f2(){return de(Bc,"Reference.ts has not been loaded"),Bc}function h2(t){return t.views.size===0}function Yh(t,e,n,s){const l=e.source.queryId;if(l!==null){const r=t.views.get(l);return de(r!=null,"SyncTree gave us an op for an invalid query."),gv(r,e,n,s)}else{let r=[];for(const u of t.views.values())r=r.concat(gv(u,e,n,s));return r}}function p2(t,e,n,s,l){const r=e._queryIdentifier,u=t.views.get(r);if(!u){let p=Pc(n,l?s:null),y=!1;p?y=!0:s instanceof He?(p=Fh(n,s),y=!1):(p=He.EMPTY_NODE,y=!1);const m=Qc(new ao(p,y,!1),new ao(s,l,!1));return new o2(e,m)}return u}function m2(t,e,n,s,l,r){const u=p2(t,e,s,l,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),r2(u,n),c2(u,n)}function g2(t,e,n,s){const l=e._queryIdentifier,r=[];let u=[];const p=Ls(t);if(l==="default")for(const[y,m]of t.views.entries())u=u.concat(mv(m,n,s)),pv(m)&&(t.views.delete(y),m.query._queryParams.loadsAllData()||r.push(m.query));else{const y=t.views.get(l);y&&(u=u.concat(mv(y,n,s)),pv(y)&&(t.views.delete(l),y.query._queryParams.loadsAllData()||r.push(y.query)))}return p&&!Ls(t)&&r.push(new(f2())(e._repo,e._path)),{removed:r,events:u}}function _E(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ol(t,e){let n=null;for(const s of t.views.values())n=n||a2(s,e);return n}function EE(t,e){if(e._queryParams.loadsAllData())return Xc(t);{const s=e._queryIdentifier;return t.views.get(s)}}function CE(t,e){return EE(t,e)!=null}function Ls(t){return Xc(t)!=null}function Xc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oc;function y2(t){de(!Oc,"__referenceConstructor has already been defined"),Oc=t}function x2(){return de(Oc,"Reference.ts has not been loaded"),Oc}let v2=1;class yv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new It(null),this.pendingWriteTree_=$k(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bE(t,e,n,s,l){return Lk(t.pendingWriteTree_,e,n,s,l),l?yl(t,new lo(Hh(),e,n)):[]}function _2(t,e,n,s){Uk(t.pendingWriteTree_,e,n,s);const l=It.fromObject(n);return yl(t,new cl(Hh(),e,l))}function Rs(t,e,n=!1){const s=Bk(t.pendingWriteTree_,e);if(Ok(t.pendingWriteTree_,e)){let r=new It(null);return s.snap!=null?r=r.set(gt(),!0):En(s.children,u=>{r=r.set(new Tt(u),!0)}),yl(t,new kc(s.path,r,n))}else return[]}function Wc(t,e,n){return yl(t,new lo(Gh(),e,n))}function E2(t,e,n){const s=It.fromObject(n);return yl(t,new cl(Gh(),e,s))}function C2(t,e){return yl(t,new Ba(Gh(),e))}function b2(t,e,n){const s=Jh(t,n);if(s){const l=Kh(s),r=l.path,u=l.queryId,p=Ln(r,e),y=new Ba(qh(u),p);return Qh(t,r,y)}else return[]}function ch(t,e,n,s,l=!1){const r=e._path,u=t.syncPointTree_.get(r);let p=[];if(u&&(e._queryIdentifier==="default"||CE(u,e))){const y=g2(u,e,n,s);h2(u)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const m=y.removed;if(p=y.events,!l){const v=m.findIndex(E=>E._queryParams.loadsAllData())!==-1,_=t.syncPointTree_.findOnPath(r,(E,T)=>Ls(T));if(v&&!_){const E=t.syncPointTree_.subtree(r);if(!E.isEmpty()){const T=N2(E);for(let N=0;N<T.length;++N){const D=T[N],k=D.query,G=NE(t,D);t.listenProvider_.startListening(Aa(k),Hc(t,k),G.hashFn,G.onComplete)}}}!_&&m.length>0&&!s&&(v?t.listenProvider_.stopListening(Aa(e),null):m.forEach(E=>{const T=t.queryToTagMap.get(Zc(E));t.listenProvider_.stopListening(Aa(E),T)}))}A2(t,m)}return p}function T2(t,e,n,s){const l=Jh(t,s);if(l!=null){const r=Kh(l),u=r.path,p=r.queryId,y=Ln(u,e),m=new lo(qh(p),y,n);return Qh(t,u,m)}else return[]}function S2(t,e,n,s){const l=Jh(t,s);if(l){const r=Kh(l),u=r.path,p=r.queryId,y=Ln(u,e),m=It.fromObject(n),v=new cl(qh(p),y,m);return Qh(t,u,v)}else return[]}function xv(t,e,n,s=!1){const l=e._path;let r=null,u=!1;t.syncPointTree_.foreachOnPath(l,(E,T)=>{const N=Ln(E,l);r=r||ol(T,N),u=u||Ls(T)});let p=t.syncPointTree_.get(l);p?(u=u||Ls(p),r=r||ol(p,gt())):(p=new u2,t.syncPointTree_=t.syncPointTree_.set(l,p));let y;r!=null?y=!0:(y=!1,r=He.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((T,N)=>{const D=ol(N,gt());D&&(r=r.updateImmediateChild(T,D))}));const m=CE(p,e);if(!m&&!e._queryParams.loadsAllData()){const E=Zc(e);de(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");const T=w2();t.queryToTagMap.set(E,T),t.tagToQueryMap.set(T,E)}const v=Vh(t.pendingWriteTree_,l);let _=m2(p,e,n,v,r,y);if(!m&&!u&&!s){const E=EE(p,e);_=_.concat(I2(t,e,E))}return _}function $h(t,e,n){const l=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(u,p)=>{const y=Ln(u,e),m=ol(p,y);if(m)return m});return pE(l,e,r,n,!0)}function yl(t,e){return TE(e,t.syncPointTree_,null,Vh(t.pendingWriteTree_,gt()))}function TE(t,e,n,s){if(tt(t.path))return SE(t,e,n,s);{const l=e.get(gt());n==null&&l!=null&&(n=ol(l,gt()));let r=[];const u=Xe(t.path),p=t.operationForChild(u),y=e.children.get(u);if(y&&p){const m=n?n.getImmediateChild(u):null,v=mE(s,u);r=r.concat(TE(p,y,m,v))}return l&&(r=r.concat(Yh(l,t,s,n))),r}}function SE(t,e,n,s){const l=e.get(gt());n==null&&l!=null&&(n=ol(l,gt()));let r=[];return e.children.inorderTraversal((u,p)=>{const y=n?n.getImmediateChild(u):null,m=mE(s,u),v=t.operationForChild(u);v&&(r=r.concat(SE(v,p,y,m)))}),l&&(r=r.concat(Yh(l,t,s,n))),r}function NE(t,e){const n=e.query,s=Hc(t,n);return{hashFn:()=>(l2(e)||He.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?b2(t,n._path,s):C2(t,n._path);{const r=ED(l,n);return ch(t,n,null,r)}}}}function Hc(t,e){const n=Zc(e);return t.queryToTagMap.get(n)}function Zc(t){return t._path.toString()+"$"+t._queryIdentifier}function Jh(t,e){return t.tagToQueryMap.get(e)}function Kh(t){const e=t.indexOf("$");return de(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Tt(t.substr(0,e))}}function Qh(t,e,n){const s=t.syncPointTree_.get(e);de(s,"Missing sync point for query tag that we're tracking");const l=Vh(t.pendingWriteTree_,e);return Yh(s,n,l,null)}function N2(t){return t.fold((e,n,s)=>{if(n&&Ls(n))return[Xc(n)];{let l=[];return n&&(l=_E(n)),En(s,(r,u)=>{l=l.concat(u)}),l}})}function Aa(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(x2())(t._repo,t._path):t}function A2(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const l=Zc(s),r=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(r)}}}function w2(){return v2++}function I2(t,e,n){const s=e._path,l=Hc(t,e),r=NE(t,n),u=t.listenProvider_.startListening(Aa(e),l,r.hashFn,r.onComplete),p=t.syncPointTree_.subtree(s);if(l)de(!Ls(p.value),"If we're adding a query, it shouldn't be shadowed");else{const y=p.fold((m,v,_)=>{if(!tt(m)&&v&&Ls(v))return[Xc(v).query];{let E=[];return v&&(E=E.concat(_E(v).map(T=>T.query))),En(_,(T,N)=>{E=E.concat(N)}),E}});for(let m=0;m<y.length;++m){const v=y[m];t.listenProvider_.stopListening(Aa(v),Hc(t,v))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Xh(n)}node(){return this.node_}}class Wh{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Gt(this.path_,e);return new Wh(this.syncTree_,n)}node(){return $h(this.syncTree_,this.path_)}}const R2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},vv=function(t,e,n){if(!t||typeof t!="object")return t;if(de(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return M2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return D2(t[".sv"],e);de(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},M2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:de(!1,"Unexpected server value: "+t)}},D2=function(t,e,n){t.hasOwnProperty("increment")||de(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&de(!1,"Unexpected increment value: "+s);const l=e.node();if(de(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const u=l.getValue();return typeof u!="number"?s:u+s},AE=function(t,e,n,s){return Zh(e,new Wh(n,t),s)},wE=function(t,e,n){return Zh(t,new Xh(e),n)};function Zh(t,e,n){const s=t.getPriority().val(),l=vv(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const u=t,p=vv(u.getValue(),e,n);return p!==u.getValue()||l!==u.getPriority().val()?new cn(p,dn(l)):t}else{const u=t;return r=u,l!==u.getPriority().val()&&(r=r.updatePriority(new cn(l))),u.forEachChild(qt,(p,y)=>{const m=Zh(y,e.getImmediateChild(p),n);m!==y&&(r=r.updateImmediateChild(p,m))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function tp(t,e){let n=e instanceof Tt?e:new Tt(e),s=t,l=Xe(n);for(;l!==null;){const r=ll(s.node.children,l)||{children:{},childCount:0};s=new ep(l,s,r),n=Mt(n),l=Xe(n)}return s}function xl(t){return t.node.value}function IE(t,e){t.node.value=e,uh(t)}function RE(t){return t.node.childCount>0}function k2(t){return xl(t)===void 0&&!RE(t)}function eu(t,e){En(t.node.children,(n,s)=>{e(new ep(n,t,s))})}function ME(t,e,n,s){n&&e(t),eu(t,l=>{ME(l,e,!0)})}function P2(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function za(t){return new Tt(t.parent===null?t.name:za(t.parent)+"/"+t.name)}function uh(t){t.parent!==null&&L2(t.parent,t.name,t)}function L2(t,e,n){const s=k2(n),l=Si(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,uh(t)):!s&&!l&&(t.node.children[e]=n.node,t.node.childCount++,uh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=/[\[\].#$\/\u0000-\u001F\u007F]/,B2=/[\[\].#$\u0000-\u001F\u007F]/,If=10*1024*1024,np=function(t){return typeof t=="string"&&t.length!==0&&!U2.test(t)},DE=function(t){return typeof t=="string"&&t.length!==0&&!B2.test(t)},O2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DE(t)},H2=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!wh(t)||t&&typeof t=="object"&&Si(t,".sv")},G2=function(t,e,n,s){tu($c(t,"value"),e,n)},tu=function(t,e,n){const s=n instanceof Tt?new tk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+io(s));if(typeof e=="function")throw new Error(t+"contains a function "+io(s)+" with contents = "+e.toString());if(wh(e))throw new Error(t+"contains "+e.toString()+" "+io(s));if(typeof e=="string"&&e.length>If/3&&Jc(e)>If)throw new Error(t+"contains a string greater than "+If+" utf8 bytes "+io(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,r=!1;if(En(e,(u,p)=>{if(u===".value")l=!0;else if(u!==".priority"&&u!==".sv"&&(r=!0,!np(u)))throw new Error(t+" contains an invalid key ("+u+") "+io(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nk(s,u),tu(t,p,s),ik(s)}),l&&r)throw new Error(t+' contains ".value" child '+io(s)+" in addition to actual children.")}},q2=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const r=ka(s);for(let u=0;u<r.length;u++)if(!(r[u]===".priority"&&u===r.length-1)){if(!np(r[u]))throw new Error(t+"contains an invalid key ("+r[u]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(ek);let l=null;for(n=0;n<e.length;n++){if(s=e[n],l!==null&&ii(l,s))throw new Error(t+"contains a path "+l.toString()+" that is ancestor of another path "+s.toString());l=s}},V2=function(t,e,n,s){const l=$c(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const r=[];En(e,(u,p)=>{const y=new Tt(u);if(tu(l,p,Gt(n,y)),kh(y)===".priority"&&!H2(p))throw new Error(l+"contains an invalid value for '"+y.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(y)}),q2(l,r)},kE=function(t,e,n,s){if(!DE(n))throw new Error($c(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},F2=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kE(t,e,n)},z2=function(t,e){if(Xe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},j2=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!np(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!O2(n))throw new Error($c(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nu(t,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],r=l.getPath();n!==null&&!Ph(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(l)}n&&t.eventLists_.push(n)}function PE(t,e,n){nu(t,n),LE(t,s=>Ph(s,e))}function yi(t,e,n){nu(t,n),LE(t,s=>ii(s,e)||ii(e,s))}function LE(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const r=l.path;e(r)?($2(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();ba&&_n("event: "+n.toString()),gl(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="repo_interrupt",K2=25;class Q2{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Y2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dc(),this.transactionQueueTree_=new ep,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X2(t,e,n){if(t.stats_=Mh(t.repoInfo_),t.forceRestClient_||SD())t.server_=new Mc(t.repoInfo_,(s,l,r,u)=>{_v(t,s,l,r,u)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ev(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{fn(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Xi(t.repoInfo_,e,(s,l,r,u)=>{_v(t,s,l,r,u)},s=>{Ev(t,s)},s=>{Z2(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=RD(t.repoInfo_,()=>new Ik(t.stats_,t.server_)),t.infoData_=new Tk,t.infoSyncTree_=new yv({startListening:(s,l,r,u)=>{let p=[];const y=t.infoData_.getNode(s._path);return y.isEmpty()||(p=Wc(t.infoSyncTree_,s._path,y),setTimeout(()=>{u("ok")},0)),p},stopListening:()=>{}}),ip(t,"connected",!1),t.serverSyncTree_=new yv({startListening:(s,l,r,u)=>(t.server_.listen(s,r,l,(p,y)=>{const m=u(p,y);yi(t.eventQueue_,s._path,m)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function W2(t){const n=t.infoData_.getNode(new Tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function iu(t){return R2({timestamp:W2(t)})}function _v(t,e,n,s,l){t.dataUpdateCount++;const r=new Tt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let u=[];if(l)if(s){const y=Tc(n,m=>dn(m));u=S2(t.serverSyncTree_,r,y,l)}else{const y=dn(n);u=T2(t.serverSyncTree_,r,y,l)}else if(s){const y=Tc(n,m=>dn(m));u=E2(t.serverSyncTree_,r,y)}else{const y=dn(n);u=Wc(t.serverSyncTree_,r,y)}let p=r;u.length>0&&(p=dl(t,r)),yi(t.eventQueue_,p,u)}function Ev(t,e){ip(t,"connected",e),e===!1&&nP(t)}function Z2(t,e){En(e,(n,s)=>{ip(t,n,s)})}function ip(t,e,n){const s=new Tt("/.info/"+e),l=dn(n);t.infoData_.updateSnapshot(s,l);const r=Wc(t.infoSyncTree_,s,l);yi(t.eventQueue_,s,r)}function sp(t){return t.nextWriteId_++}function eP(t,e,n,s,l){su(t,"set",{path:e.toString(),value:n,priority:s});const r=iu(t),u=dn(n,s),p=$h(t.serverSyncTree_,e),y=wE(u,p,r),m=sp(t),v=bE(t.serverSyncTree_,e,y,m,!0);nu(t.eventQueue_,v),t.server_.put(e.toString(),u.val(!0),(E,T)=>{const N=E==="ok";N||Nn("set at "+e+" failed: "+E);const D=Rs(t.serverSyncTree_,m,!N);yi(t.eventQueue_,e,D),dh(t,l,E,T)});const _=lp(t,e);dl(t,_),yi(t.eventQueue_,_,[])}function tP(t,e,n,s){su(t,"update",{path:e.toString(),value:n});let l=!0;const r=iu(t),u={};if(En(n,(p,y)=>{l=!1,u[p]=AE(Gt(e,p),dn(y),t.serverSyncTree_,r)}),l)_n("update() called with empty data.  Don't do anything."),dh(t,s,"ok",void 0);else{const p=sp(t),y=_2(t.serverSyncTree_,e,u,p);nu(t.eventQueue_,y),t.server_.merge(e.toString(),n,(m,v)=>{const _=m==="ok";_||Nn("update at "+e+" failed: "+m);const E=Rs(t.serverSyncTree_,p,!_),T=E.length>0?dl(t,e):e;yi(t.eventQueue_,T,E),dh(t,s,m,v)}),En(n,m=>{const v=lp(t,Gt(e,m));dl(t,v)}),yi(t.eventQueue_,e,[])}}function nP(t){su(t,"onDisconnectEvents");const e=iu(t),n=Dc();nh(t.onDisconnect_,gt(),(l,r)=>{const u=AE(l,r,t.serverSyncTree_,e);uE(n,l,u)});let s=[];nh(n,gt(),(l,r)=>{s=s.concat(Wc(t.serverSyncTree_,l,r));const u=lp(t,l);dl(t,u)}),t.onDisconnect_=Dc(),yi(t.eventQueue_,gt(),s)}function iP(t,e,n){let s;Xe(e._path)===".info"?s=xv(t.infoSyncTree_,e,n):s=xv(t.serverSyncTree_,e,n),PE(t.eventQueue_,e._path,s)}function sP(t,e,n){let s;Xe(e._path)===".info"?s=ch(t.infoSyncTree_,e,n):s=ch(t.serverSyncTree_,e,n),PE(t.eventQueue_,e._path,s)}function oP(t){t.persistentConnection_&&t.persistentConnection_.interrupt(J2)}function su(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_n(n,...e)}function dh(t,e,n,s){e&&gl(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let r=l;s&&(r+=": "+s);const u=new Error(r);u.code=l,e(u)}})}function UE(t,e,n){return $h(t.serverSyncTree_,e,n)||He.EMPTY_NODE}function op(t,e=t.transactionQueueTree_){if(e||ou(t,e),xl(e)){const n=OE(t,e);de(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&lP(t,za(e),n)}else RE(e)&&eu(e,n=>{op(t,n)})}function lP(t,e,n){const s=n.map(m=>m.currentWriteId),l=UE(t,e,s);let r=l;const u=l.hash();for(let m=0;m<n.length;m++){const v=n[m];de(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=Ln(e,v.path);r=r.updateChild(_,v.currentOutputSnapshotRaw)}const p=r.val(!0),y=e;t.server_.put(y.toString(),p,m=>{su(t,"transaction put response",{path:y.toString(),status:m});let v=[];if(m==="ok"){const _=[];for(let E=0;E<n.length;E++)n[E].status=2,v=v.concat(Rs(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&_.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();ou(t,tp(t.transactionQueueTree_,e)),op(t,t.transactionQueueTree_),yi(t.eventQueue_,e,v);for(let E=0;E<_.length;E++)gl(_[E])}else{if(m==="datastale")for(let _=0;_<n.length;_++)n[_].status===3?n[_].status=4:n[_].status=0;else{Nn("transaction at "+y.toString()+" failed: "+m);for(let _=0;_<n.length;_++)n[_].status=4,n[_].abortReason=m}dl(t,e)}},u)}function dl(t,e){const n=BE(t,e),s=za(n),l=OE(t,n);return aP(t,l,s),s}function aP(t,e,n){if(e.length===0)return;const s=[];let l=[];const u=e.filter(p=>p.status===0).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const y=e[p],m=Ln(n,y.path);let v=!1,_;if(de(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),y.status===4)v=!0,_=y.abortReason,l=l.concat(Rs(t.serverSyncTree_,y.currentWriteId,!0));else if(y.status===0)if(y.retryCount>=K2)v=!0,_="maxretry",l=l.concat(Rs(t.serverSyncTree_,y.currentWriteId,!0));else{const E=UE(t,y.path,u);y.currentInputSnapshot=E;const T=e[p].update(E.val());if(T!==void 0){tu("transaction failed: Data returned ",T,y.path);let N=dn(T);typeof T=="object"&&T!=null&&Si(T,".priority")||(N=N.updatePriority(E.getPriority()));const k=y.currentWriteId,G=iu(t),X=wE(N,E,G);y.currentOutputSnapshotRaw=N,y.currentOutputSnapshotResolved=X,y.currentWriteId=sp(t),u.splice(u.indexOf(k),1),l=l.concat(bE(t.serverSyncTree_,y.path,X,y.currentWriteId,y.applyLocally)),l=l.concat(Rs(t.serverSyncTree_,k,!0))}else v=!0,_="nodata",l=l.concat(Rs(t.serverSyncTree_,y.currentWriteId,!0))}yi(t.eventQueue_,n,l),l=[],v&&(e[p].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[p].unwatcher),e[p].onComplete&&(_==="nodata"?s.push(()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot)):s.push(()=>e[p].onComplete(new Error(_),!1,null))))}ou(t,t.transactionQueueTree_);for(let p=0;p<s.length;p++)gl(s[p]);op(t,t.transactionQueueTree_)}function BE(t,e){let n,s=t.transactionQueueTree_;for(n=Xe(e);n!==null&&xl(s)===void 0;)s=tp(s,n),e=Mt(e),n=Xe(e);return s}function OE(t,e){const n=[];return HE(t,e,n),n.sort((s,l)=>s.order-l.order),n}function HE(t,e,n){const s=xl(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);eu(e,l=>{HE(t,l,n)})}function ou(t,e){const n=xl(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,IE(e,n.length>0?n:void 0)}eu(e,s=>{ou(t,s)})}function lp(t,e){const n=za(BE(t,e)),s=tp(t.transactionQueueTree_,e);return P2(s,l=>{Rf(t,l)}),Rf(t,s),ME(s,l=>{Rf(t,l)}),n}function Rf(t,e){const n=xl(e);if(n){const s=[];let l=[],r=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(de(r===u-1,"All SENT items should be at beginning of queue."),r=u,n[u].status=3,n[u].abortReason="set"):(de(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),l=l.concat(Rs(t.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&s.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));r===-1?IE(e,void 0):n.length=r+1,yi(t.eventQueue_,za(e),l);for(let u=0;u<s.length;u++)gl(s[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function cP(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Nn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Cv=function(t,e){const n=uP(t),s=n.namespace;n.domain==="firebase.com"&&es(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&es("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||gD();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $_(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new Tt(n.pathString)}},uP=function(t){let e="",n="",s="",l="",r="",u=!0,p="https",y=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(p=t.substring(0,m-1),t=t.substring(m+2));let v=t.indexOf("/");v===-1&&(v=t.length);let _=t.indexOf("?");_===-1&&(_=t.length),e=t.substring(0,Math.min(v,_)),v<_&&(l=rP(t.substring(v,_)));const E=cP(t.substring(Math.min(t.length,_)));m=e.indexOf(":"),m>=0?(u=p==="https"||p==="wss",y=parseInt(e.substring(m+1),10)):m=e.length;const T=e.slice(0,m);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const N=e.indexOf(".");s=e.substring(0,N).toLowerCase(),n=e.substring(N+1),r=s}"ns"in E&&(r=E.ns)}return{host:e,port:y,domain:n,subdomain:s,secure:u,scheme:p,pathString:l,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n,s,l){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+fn(this.snapshot.exportVal())}}class fP{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return de(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return tt(this._path)?null:kh(this._path)}get ref(){return new Bs(this._repo,this._path)}get _queryIdentifier(){const e=av(this._queryParams),n=Ih(e);return n==="{}"?"default":n}get _queryObject(){return av(this._queryParams)}isEqual(e){if(e=Ga(e),!(e instanceof ap))return!1;const n=this._repo===e._repo,s=Ph(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+ZD(this._path)}}class Bs extends ap{constructor(e,n){super(e,n,new Oh,!1)}get parent(){const e=nE(this._path);return e===null?null:new Bs(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Gc{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Tt(e),s=fh(this.ref,e);return new Gc(this._node.getChild(n),s,qt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new Gc(l,fh(this.ref,s),qt)))}hasChild(e){const n=new Tt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function At(t,e){return t=Ga(t),t._checkNotDeleted("ref"),e!==void 0?fh(t._root,e):t._root}function fh(t,e){return t=Ga(t),Xe(t._path)===null?F2("child","path",e):kE("child","path",e),new Bs(t._repo,Gt(t._path,e))}function dc(t,e){t=Ga(t),z2("set",t._path),G2("set",e,t._path);const n=new Oa;return eP(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function $t(t,e){V2("update",e,t._path);const n=new Oa;return tP(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class rp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new dP("value",this,new Gc(e.snapshotNode,new Bs(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new fP(this,e,n):null}matches(e){return e instanceof rp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function pP(t,e,n,s,l){const r=new hP(n,void 0),u=new rp(r);return iP(t._repo,t,u),()=>sP(t._repo,t,u)}function mP(t,e,n,s){return pP(t,"value",e)}d2(Bs);y2(Bs);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP="FIREBASE_DATABASE_EMULATOR_HOST",hh={};let yP=!1;function xP(t,e,n,s){const l=e.lastIndexOf(":"),r=e.substring(0,l),u=Nh(r);t.repoInfo_=new $_(e,u,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function vP(t,e,n,s,l){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||es("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_n("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u=Cv(r,l),p=u.repoInfo,y;typeof process<"u"&&Fx&&(y=Fx[gP]),y?(r=`http://${y}?ns=${p.namespace}`,u=Cv(r,l),p=u.repoInfo):u.repoInfo.secure;const m=new AD(t.name,t.options,e);j2("Invalid Firebase Database URL",u),tt(u.path)||es("Database URL must point to the root of a Firebase Database (not including a child path).");const v=EP(p,t,m,new ND(t,n));return new CP(v,t)}function _P(t,e){const n=hh[e];(!n||n[t.key]!==t)&&es(`Database ${e}(${t.repoInfo_}) has already been deleted.`),oP(t),delete n[t.key]}function EP(t,e,n,s){let l=hh[e.name];l||(l={},hh[e.name]=l);let r=l[t.toURLString()];return r&&es("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new Q2(t,yP,n,s),l[t.toURLString()]=r,r}class CP{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bs(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_P(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&es("Cannot call "+e+" on a deleted database.")}}function bP(t=XM(),e){const n=YM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=MR("database");s&&TP(n,...s)}return n}function TP(t,e,n,s={}){t=Ga(t),t._checkNotDeleted("useEmulator");const l=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&Sc(s,r.repoInfo_.emulatorOptions))return;es("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&es('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new pc(pc.OWNER);else if(s.mockUserToken){const p=typeof s.mockUserToken=="string"?s.mockUserToken:kR(s.mockUserToken,t.app.options.projectId);u=new pc(p)}Nh(e)&&(DR(e),UR("Database",!0)),xP(r,l,s,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){uD(QM),Ac(new Ra("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return vP(s,l,r,n)},"PUBLIC").setMultipleInstances(!0)),nl(zx,jx,t),nl(zx,jx,"esm2020")}Xi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Xi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};SP();const NP={apiKey:"AIzaSyCW5DcLgmK4HSVF6BqRDMkz1k3Hjt-JaZ4",authDomain:"st-bernard-kofc-superbowl-grid.firebaseapp.com",projectId:"st-bernard-kofc-superbowl-grid",storageBucket:"st-bernard-kofc-superbowl-grid.appspot.com",messagingSenderId:"619277918232",appId:"1:619277918232:web:4cbdf203d06471d563636d",measurementId:"G-1P3RY5S27M"},AP=R_(NP),wt=bP(AP),mc=()=>Array.from({length:100},(t,e)=>({id:e,row:Math.floor(e/10),col:e%10,participantId:null,alias:"",paidAmount:0,autoApplyPayments:!0,assigned:!1})),gc={teamA:"NFC",teamB:"AFC",costPerBox:10,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null),isLocked:!1,notifyOnSquareChange:!1,notifyActionFilter:"any",notificationEmails:[],notificationPhones:[],payouts:{mode:"standard",standardPayoutType:"percent",charityPayoutType:"percent",charityPercent:50,charityFixedAmount:500,standardSplits:{q1:20,half:30,q3:20,final:30},scoreChangeMultiplier:3,scoreChangeAppliesTo:"perBox",scoreChangeInitialRefund:!0}},wP={adminPassword:"admin",charityName:"Super Bowl Charity Contest",zelleAccount:"",paypalAccount:"",venmoAccount:"",otherPaymentInfo:""},bv=(t,e=gc)=>({id:crypto.randomUUID(),name:t,squares:mc(),participants:[],scores:[],settings:{...e,isLocked:!1,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)},createdAt:Date.now()}),IP=()=>{var kt;const[t,e]=z.useState(null),[n,s]=z.useState(!1),[l,r]=z.useState("grid"),[u,p]=z.useState(null),[y,m]=z.useState([]),[v,_]=z.useState(!1),[E,T]=z.useState(!1),[N,D]=z.useState(""),[k,G]=z.useState(!1),[X,j]=z.useState(!1);z.useEffect(()=>{const L=At(wt,"state");return mP(L,ee=>{var le,he;const J=ee.val();if(J){const Te=pe=>{if(Array.isArray(pe)){const Me=pe.filter(Ne=>typeof Ne=="string").map(Ne=>Ne.trim()).filter(Boolean),je=Me.length!==pe.length||pe.some(Ne=>typeof Ne!="string"||Ne.trim()!==Ne);return{list:Me,changed:je}}return typeof pe=="string"?{list:pe.split(/[,;\n]/).map(Me=>Me.trim()).filter(Boolean),changed:!0}:pe==null?{list:[],changed:!1}:{list:[],changed:!0}},ae={};if(J.pools){const pe=Array.isArray(J.pools)?J.pools:Object.values(J.pools);J.pools=pe.map((Re,at)=>{var Be,Ft,wn,an,Yn;let ct=[];Array.isArray(Re.squares)?ct=Re.squares:Re.squares&&typeof Re.squares=="object"?ct=Array.from({length:100},(pn,vi)=>Re.squares[vi]||mc()[vi]):ct=mc();const Bn=pn=>Array.isArray(pn)?pn.length===10?pn:[...pn,...Array(10-pn.length).fill(null)]:pn&&typeof pn=="object"?Array.from({length:10},(vi,Ni)=>pn[Ni]??null):Array(10).fill(null),li=Te((Be=Re.settings)==null?void 0:Be.notificationEmails),ai=Te((Ft=Re.settings)==null?void 0:Ft.notificationPhones);return li.changed&&(ae[`state/pools/${at}/settings/notificationEmails`]=li.list),ai.changed&&(ae[`state/pools/${at}/settings/notificationPhones`]=ai.list),{...Re,squares:ct,participants:Re.participants||[],scores:Re.scores||[],settings:{...gc,...Re.settings,rowNumbers:Bn((wn=Re.settings)==null?void 0:wn.rowNumbers),colNumbers:Bn((an=Re.settings)==null?void 0:an.colNumbers),notificationEmails:li.list,notificationPhones:ai.list,payouts:{...gc.payouts,...(Yn=Re.settings)==null?void 0:Yn.payouts}}}});const Me=Te((le=J.globalSettings)==null?void 0:le.notificationEmails),je=Te((he=J.globalSettings)==null?void 0:he.notificationPhones);J.globalSettings&&(J.globalSettings={...J.globalSettings,notificationEmails:Me.list,notificationPhones:je.list}),Me.changed&&(ae["state/globalSettings/notificationEmails"]=Me.list),je.changed&&(ae["state/globalSettings/notificationPhones"]=je.list);const Ne=new Map;(Array.isArray(J.participants)?J.participants:[]).forEach(Re=>{Re!=null&&Re.id&&Ne.set(Re.id,Re)});let nt=!J.participants;if((J.pools||[]).forEach(Re=>{(Re.participants||[]).forEach(at=>{at!=null&&at.id&&(Ne.has(at.id)||(Ne.set(at.id,at),nt=!0))})}),nt){const Re=Array.from(Ne.values());J.participants=Re,$t(At(wt),{"state/participants":Re}).catch(at=>console.error("Failed to sync global participants:",at))}}Object.keys(ae).length>0&&$t(At(wt),ae).catch(pe=>console.error("Failed to normalize notifications:",pe)),e(J)}else{const Te=bv("Super Bowl Contest"),ae={pools:[Te],participants:[],activePoolId:Te.id,globalSettings:wP};dc(At(wt,"state"),ae),e(ae)}s(!0)})},[]);const M=z.useMemo(()=>!t||!t.pools?null:t.pools.find(L=>L.id===t.activePoolId)||t.pools[0],[t==null?void 0:t.activePoolId,t==null?void 0:t.pools]);z.useEffect(()=>{if(!t||!M)return;const L=t.pools.findIndex(ae=>ae.id===t.activePoolId);if(L===-1)return;const ee=M.settings.costPerBox||10,J=new Map((t.participants||[]).map(ae=>[ae.id,ae])),le={};let he=!1;const Te=new Map;(M.squares||[]).forEach((ae,pe)=>{if(!ae.participantId)return;const Me=Te.get(ae.participantId)||[];Me.push(pe),Te.set(ae.participantId,Me)}),Te.forEach((ae,pe)=>{const Me=J.get(pe)||(M.participants||[]).find(Ne=>Ne.id===pe);if(!Me)return;let je=(Me.paymentHistory||[]).reduce((Ne,Le)=>Ne+Le.amount,0);ae.forEach(Ne=>{const Le=M.squares[Ne],nt=Me.alias||Le.alias;if(Le.autoApplyPayments===!1){Le.alias!==nt&&(le[`state/pools/${L}/squares/${Ne}`]={...Le,alias:nt},he=!0);return}const Re=Math.min(je,ee);je=Math.max(0,je-Re),(Le.paidAmount!==Re||Le.alias!==nt)&&(le[`state/pools/${L}/squares/${Ne}`]={...Le,paidAmount:Re,alias:nt},he=!0)})}),he&&$t(At(wt),le).catch(ae=>console.error("Failed to sync paid amounts:",ae))},[t,M]);const fe=z.useMemo(()=>(t==null?void 0:t.participants)||[],[t==null?void 0:t.participants]),ie=z.useMemo(()=>{if(!M||!fe)return(M==null?void 0:M.participants)||[];const L=new Set((M.participants||[]).map(he=>he.id).concat((M.squares||[]).filter(he=>he.participantId).map(he=>he.participantId))),ee=fe.filter(he=>L.has(he.id)||(M.participants||[]).some(Te=>Te.id===he.id)),J=new Set(ee.map(he=>he.id)),le=(M.participants||[]).filter(he=>!J.has(he.id));return[...ee,...le]},[M,fe]),oe=z.useMemo(()=>{if(!t)return[];const L=new Map;return(t.pools||[]).forEach(ee=>{(ee.participants||[]).forEach(J=>{L.has(J.id)||L.set(J.id,ee.name||ee.id)})}),(fe||[]).map(ee=>({...ee,originPoolName:L.get(ee.id)}))},[t,fe]),xe=z.useCallback(L=>{if(!t||!M)return;const ee=t.pools.findIndex(pe=>pe.id===t.activePoolId),J=(t.participants||[]).find(pe=>{var Me;return pe.id===L.id||pe.email&&pe.email.toLowerCase()===((Me=L.email)==null?void 0:Me.toLowerCase())}),le={},he=J?{...J,...L}:L,Te=[...(t.participants||[]).filter(pe=>pe.id!==he.id),he];le["state/participants"]=Te;const ae=[...t.pools[ee].participants||[]];ae.find(pe=>pe.id===he.id)||ae.push(he),le[`state/pools/${ee}/participants`]=ae,$t(At(wt),le).catch(pe=>console.error(pe))},[t,M]),ce=z.useCallback(L=>{if(!t)return;const ee=t.pools.findIndex(J=>J.id===t.activePoolId);ee!==-1&&$t(At(wt,`state/pools/${ee}`),L)},[t]),Ie=z.useCallback(L=>{if(!t)return;const ee=t.pools.findIndex(J=>J.id===t.activePoolId);ee!==-1&&$t(At(wt,`state/pools/${ee}/settings`),L)},[t]),qe=z.useCallback(L=>{t&&$t(At(wt,"state/globalSettings"),L)},[t]),Ye=z.useCallback(L=>{if(!t)return;const ee=t.pools.findIndex(Te=>Te.id===L);if(ee===-1)return;const J=crypto.randomUUID(),le=Date.now(),he={[`state/notificationTests/${J}`]:{poolId:L,createdAt:le},[`state/pools/${ee}/settings/lastTestNotificationAt`]:le};$t(At(wt),he).catch(Te=>console.error("Failed to enqueue test notification:",Te))},[t]),ue=z.useCallback((L,ee,J)=>{if(!t||!M)return;const le=t.pools.findIndex(Ne=>Ne.id===t.activePoolId);if(le===-1)return;const he=ee.find(Ne=>Ne.id===L)||(J==null?void 0:J.find(Ne=>Ne.id===L));if(!he)return;const Te=(he.paymentHistory||[]).reduce((Ne,Le)=>Ne+Le.amount,0),ae=M.settings.costPerBox||10;let pe=Te;const Me={};(M.squares||[]).forEach((Ne,Le)=>{if(Ne.participantId===L){if(Ne.autoApplyPayments===!1){Me[`state/pools/${le}/squares/${Le}`]={...Ne,alias:he.alias};return}const nt=Math.min(pe,ae);pe=Math.max(0,pe-nt),Me[`state/pools/${le}/squares/${Le}`]={...Ne,paidAmount:nt,alias:he.alias}}});const je={...Me,"state/participants":ee,[`state/pools/${le}/participants`]:J??(M.participants||[])};$t(At(wt),je).catch(Ne=>console.error("Firebase atomic financial update failed:",Ne))},[t,M]),Je=z.useCallback((L,ee,J=!0)=>{var ai;if(!t||!M)return;if((ai=M.settings)!=null&&ai.isLocked&&!E){alert("This grid is locked. Only admins can assign boxes right now.");return}const le=t.pools.findIndex(Be=>Be.id===t.activePoolId);if(le===-1)return;const he=Be=>(Be||"").trim().toLowerCase(),Te=Be=>(Be||"").trim().toLowerCase(),ae=Be=>(Be||"").replace(/\D/g,""),pe=he(L.alias);if(!pe){alert("Alias is required when assigning boxes.");return}const Me=(t.participants||[]).find(Be=>he(Be.alias)===pe),je=(t.participants||[]).find(Be=>L.email&&Be.email&&Te(Be.email)===Te(L.email)||L.phone&&Be.phone&&ae(Be.phone)===ae(L.phone));if(Me&&je&&Me.id!==je.id){alert("Alias already exists for a different participant. Use a unique alias.");return}const Ne=J&&!!je;let Le=Me||(Ne?je:void 0),nt=[...M.participants||[]];const Re={};let at=[...t.participants||[]];const ct=L.alias.toUpperCase();Le?(nt.find(Be=>Be.id===Le.id)||(nt.push(Le),Re[`state/pools/${le}/participants`]=nt),Le.alias.toUpperCase()!==ct&&(at=at.map(Be=>Be.id===Le.id?{...Be,alias:ct}:Be),Re["state/participants"]=at,nt=nt.map(Be=>Be.id===Le.id?{...Be,alias:ct}:Be),Re[`state/pools/${le}/participants`]=nt,Le={...Le,alias:ct})):(Le={...L,alias:ct,id:crypto.randomUUID(),paymentHistory:[]},at=[...(t.participants||[]).filter(Be=>Be.id!==Le.id),Le],Re["state/participants"]=at,nt.push(Le),Re[`state/pools/${le}/participants`]=nt);const Bn=M.settings.costPerBox||10,li=(M.squares||[]).map((Be,Ft)=>ee.includes(Ft)?{...Be,participantId:Le.id,alias:ct,assigned:!0,autoApplyPayments:Ne}:Be);if(Ne){let Be=(Le.paymentHistory||[]).reduce((Ft,wn)=>Ft+wn.amount,0);li.forEach((Ft,wn)=>{if(Ft.participantId!==Le.id||Ft.autoApplyPayments===!1)return;const an=Math.min(Be,Bn);Be=Math.max(0,Be-an),Re[`state/pools/${le}/squares/${wn}`]={...Ft,paidAmount:an,alias:ct}})}else ee.forEach(Be=>{const Ft=li[Be];Ft&&(Re[`state/pools/${le}/squares/${Be}`]={...Ft,paidAmount:Ft.paidAmount||0,alias:ct,autoApplyPayments:!1})});$t(At(wt),Re).catch(Be=>console.error(Be)),m([]),p(null),_(!1)},[t,M,ue,E]),Fe=z.useCallback(()=>{if(!t||!M||!window.confirm("Reapply payment history to all assigned boxes in the active contest?"))return;const L=t.pools.findIndex(J=>J.id===t.activePoolId);if(L===-1)return;const ee={};(M.squares||[]).forEach((J,le)=>{J.participantId&&J.autoApplyPayments!==!0&&(ee[`state/pools/${L}/squares/${le}/autoApplyPayments`]=!0)}),Object.keys(ee).length!==0&&$t(At(wt),ee).catch(J=>console.error("Failed to reapply payments:",J))},[t,M]),O=z.useCallback(L=>{if(!t||!M)return;const ee=t.pools.findIndex(pe=>pe.id===t.activePoolId);if(ee===-1)return;const J=(t.participants||[]).find(pe=>pe.id===L)||(M.participants||[]).find(pe=>pe.id===L);if(!J)return;const le=M.settings.costPerBox||10;let he=(J.paymentHistory||[]).reduce((pe,Me)=>pe+Me.amount,0);const Te={};let ae=!1;(M.squares||[]).forEach((pe,Me)=>{if(pe.participantId!==L)return;const je=Math.min(he,le);he=Math.max(0,he-je),(pe.paidAmount!==je||pe.alias!==J.alias||pe.autoApplyPayments!==!0)&&(Te[`state/pools/${ee}/squares/${Me}`]={...pe,paidAmount:je,alias:J.alias,autoApplyPayments:!0},ae=!0)}),ae&&$t(At(wt),Te).catch(pe=>console.error("Failed to apply unapplied payments:",pe))},[t,M]),te=z.useCallback(()=>{if(!t||!M||!window.confirm("Apply unapplied payments to all assigned boxes in the active contest?"))return;const L=t.pools.findIndex(ae=>ae.id===t.activePoolId);if(L===-1)return;const ee=M.settings.costPerBox||10,J=new Map;(t.participants||[]).forEach(ae=>J.set(ae.id,ae)),(M.participants||[]).forEach(ae=>{J.has(ae.id)||J.set(ae.id,ae)});const le=new Map;(M.squares||[]).forEach((ae,pe)=>{if(!ae.participantId)return;const Me=le.get(ae.participantId)||[];Me.push(pe),le.set(ae.participantId,Me)});const he={};let Te=!1;le.forEach((ae,pe)=>{const Me=J.get(pe);if(!Me)return;let je=(Me.paymentHistory||[]).reduce((Ne,Le)=>Ne+Le.amount,0);ae.forEach(Ne=>{const Le=M.squares[Ne],nt=Math.min(je,ee);je=Math.max(0,je-nt);const Re=Me.alias||Le.alias;(Le.paidAmount!==nt||Le.alias!==Re||Le.autoApplyPayments!==!0)&&(he[`state/pools/${L}/squares/${Ne}`]={...Le,paidAmount:nt,alias:Re,autoApplyPayments:!0},Te=!0)})}),Te&&$t(At(wt),he).catch(ae=>console.error("Failed to apply unapplied payments (all):",ae))},[t,M]),ve=z.useCallback(()=>{if(!t||!window.confirm("Rebuild the global participant registry from all contests?"))return;const L=new Map;(t.participants||[]).forEach(J=>{J!=null&&J.id&&L.set(J.id,J)}),(t.pools||[]).forEach(J=>{(J.participants||[]).forEach(le=>{le!=null&&le.id&&(L.has(le.id)||L.set(le.id,le))})});const ee=Array.from(L.values());$t(At(wt),{"state/participants":ee}).catch(J=>console.error("Failed to rebuild global participants:",J))},[t]),Ce=z.useCallback(L=>{var J;if(!M)return;const ee=(M.squares||[])[L];ee!=null&&ee.assigned?(p(L),_(!0)):(!((J=M.settings)!=null&&J.isLocked)||E)&&m(le=>le.includes(L)?le.filter(he=>he!==L):[...le,L])},[M,E]),Ge=z.useCallback(L=>{var pe;if(!t||!M)return;if((pe=M.settings)!=null&&pe.isLocked&&!E){alert("This grid is locked. Only admins can remove claims right now.");return}const ee=M.squares[L];if(!ee||!ee.participantId||!window.confirm(`ARE YOU SURE?

This will remove the claim on Box #${L+1}.`))return;const J=t.pools.findIndex(Me=>Me.id===t.activePoolId);if(J===-1)return;const le=ee.participantId,he=(t.participants||[]).find(Me=>Me.id===le)||M.participants.find(Me=>Me.id===le),Te=M.settings.costPerBox||10,ae={};if(ae[`state/pools/${J}/squares/${L}`]={...ee,participantId:null,alias:"",assigned:!1,paidAmount:0,autoApplyPayments:!0},he){let je=(he.paymentHistory||[]).reduce((Ne,Le)=>Ne+Le.amount,0);M.squares.forEach((Ne,Le)=>{if(Le!==L&&Ne.participantId===le){const nt=Math.min(je,Te);je=Math.max(0,je-nt),ae[`state/pools/${J}/squares/${Le}`]={...Ne,paidAmount:nt}}})}$t(At(wt),ae).then(()=>{console.log(`Unassigned square ${L+1} and redistributed payments.`)}).catch(Me=>{console.error("Failed to unassign square:",Me),alert("Error removing name. Please try again.")}),_(!1),p(null)},[t,M,E]),w=z.useCallback(()=>{var L;if((L=M==null?void 0:M.settings)!=null&&L.isLocked&&!E){alert("This grid is locked. Only admins can claim boxes right now.");return}_(!0)},[(kt=M==null?void 0:M.settings)==null?void 0:kt.isLocked,E]),R=z.useCallback(L=>{if(!t||!M)return;const ee=t.pools.findIndex(le=>le.id===t.activePoolId),J={};M.squares.forEach((le,he)=>{le.participantId===L&&(J[`state/pools/${ee}/squares/${he}`]={...le,participantId:null,alias:"",assigned:!1,paidAmount:0,autoApplyPayments:!0})}),$t(At(wt),J)},[t,M]),F=z.useCallback((L,ee)=>{if(!t||!M)return;const J=t.participants||[],le=M.participants||[];let he=J.map(ae=>ae.id===L?ee(ae):ae);if(!he.find(ae=>ae.id===L)){const ae=le.find(pe=>pe.id===L);ae&&(he=[...he,ee(ae)])}let Te=le.map(ae=>ae.id===L?ee(ae):ae);if(!Te.find(ae=>ae.id===L)){const ae=he.find(pe=>pe.id===L);ae&&(Te=[...Te,ae])}ue(L,he,Te)},[t,M,ue]),W=z.useCallback((L,ee,J,le)=>{F(L,he=>({...he,paymentHistory:[...he.paymentHistory||[],{id:crypto.randomUUID(),amount:ee,method:J,timestamp:Date.now(),note:le}]}))},[F]),q=z.useCallback((L,ee,J,le,he)=>{F(L,Te=>({...Te,paymentHistory:(Te.paymentHistory||[]).map(ae=>ae.id===ee?{...ae,amount:J,method:le,note:he}:ae)}))},[F]),ne=z.useCallback((L,ee)=>{F(L,J=>({...J,paymentHistory:(J.paymentHistory||[]).filter(le=>le.id!==ee)}))},[F]),re=z.useCallback(L=>{if(!t)return;if((t.pools||[]).some(ae=>(ae.squares||[]).some(pe=>pe.participantId===L&&pe.assigned))){alert("Cannot delete a participant who has assigned boxes. Unassign boxes first.");return}const J={};let le=!1;(t.pools||[]).forEach((ae,pe)=>{(ae.squares||[]).forEach((Ne,Le)=>{Ne.participantId===L&&(J[`state/pools/${pe}/squares/${Le}`]={...Ne,participantId:null,alias:"",assigned:!1,paidAmount:0,autoApplyPayments:!0},le=!0)});const Me=ae.participants||[],je=Me.filter(Ne=>Ne.id!==L);je.length!==Me.length&&(J[`state/pools/${pe}/participants`]=je,le=!0)});const he=t.participants||[],Te=he.filter(ae=>ae.id!==L);Te.length!==he.length&&(J["state/participants"]=Te,le=!0),le&&$t(At(wt),J).catch(ae=>console.error("Failed to delete participant:",ae))},[t]),be=z.useCallback(L=>{if(!t)return;const ee={};let J=!1;(t.pools||[]).forEach((Te,ae)=>{(Te.squares||[]).forEach((je,Ne)=>{je.participantId===L&&(ee[`state/pools/${ae}/squares/${Ne}`]={...je,participantId:null,alias:"",assigned:!1,paidAmount:0,autoApplyPayments:!0},J=!0)});const pe=Te.participants||[],Me=pe.filter(je=>je.id!==L);Me.length!==pe.length&&(ee[`state/pools/${ae}/participants`]=Me,J=!0)});const le=t.participants||[],he=le.filter(Te=>Te.id!==L);he.length!==le.length&&(ee["state/participants"]=he,J=!0),J&&$t(At(wt),ee).catch(Te=>console.error("Failed to force delete participant:",Te))},[t]),Pe=z.useCallback((L,ee)=>{if(!t||!M)return;if(ee.alias!==void 0&&ee.alias.trim()===""&&(t.pools||[]).some(Te=>(Te.squares||[]).some(ae=>ae.participantId===L))){alert("Alias cannot be blank when a participant has assigned boxes.");return}const J=t.pools.findIndex(he=>he.id===t.activePoolId),le=M.participants.findIndex(he=>he.id===L);le!==-1&&$t(At(wt,`state/pools/${J}/participants/${le}`),ee)},[t,M]),rt=z.useCallback(()=>{const L=()=>Array.from({length:10},(ee,J)=>J).sort(()=>Math.random()-.5);Ie({rowNumbers:L(),colNumbers:L()})},[Ie]),yt=z.useCallback(L=>{if(!M)return;const ee=[...M.scores||[],L];ce({scores:ee})},[M,ce]),Jt=z.useCallback(L=>{if(!M)return;const ee=(M.scores||[]).map(J=>J.id===L.id?L:J);ce({scores:ee})},[M,ce]),Dt=z.useCallback(L=>{if(!M)return;const ee=(M.scores||[]).filter(J=>J.id!==L);ce({scores:ee})},[M,ce]),ln=z.useCallback(()=>{window.confirm("ARE YOU SURE? This will clear all boxes for the active grid.")&&ce({squares:mc(),participants:[],scores:[],settings:{...M.settings,isLocked:!1,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)}})},[M,ce]),Y=z.useCallback((L,ee)=>{if(!t)return;const J=bv(L,{...gc,...ee}),le=[...t.pools,J];dc(At(wt,"state"),{...t,pools:le,activePoolId:J.id})},[t]),ge=z.useCallback(L=>{t&&$t(At(wt,"state"),{activePoolId:L})},[t]),ke=z.useCallback(L=>{if(!(!t||t.pools.length<=1)&&window.confirm("Permanently delete this contest?")){const ee=t.pools.filter(J=>J.id!==L);dc(At(wt,"state"),{...t,pools:ee,activePoolId:ee[0].id})}},[t]),xt=z.useCallback(L=>{dc(At(wt,"state"),L)},[]),Vt=L=>{L.preventDefault(),N===(t==null?void 0:t.globalSettings.adminPassword)?(T(!0),G(!1)):G(!0)};return!n||!t||!M?h.jsxs("div",{className:"min-h-screen bg-indigo-950 flex flex-col items-center justify-center p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin mb-6"}),h.jsx("h2",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Initializing Charity Grid..."})]}):h.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans selection:bg-indigo-100",children:[h.jsx("header",{className:"bg-indigo-900 text-white p-6 md:p-8 shadow-2xl sticky top-0 z-50",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6",children:[h.jsxs("div",{className:"flex items-center gap-5 w-full md:w-auto",children:[h.jsx("div",{className:"w-24 h-24 md:w-16 md:h-16 bg-white rounded-2xl flex-shrink-0 flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>r("grid"),children:h.jsx("img",{src:"/charitysuperbowl/logo.png",alt:t.globalSettings.charityName,className:"w-20 h-20 md:w-14 md:h-14 object-contain",onError:L=>{L.currentTarget.src="/charitysuperbowl/kofc-logo.svg"}})}),h.jsxs("div",{className:"flex-grow min-w-0",children:[h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("select",{value:t.activePoolId,onChange:L=>ge(L.target.value),className:"bg-indigo-800 text-white border-none rounded-xl px-4 py-1.5 font-black uppercase text-sm md:text-xl tracking-tighter outline-none focus:ring-2 focus:ring-indigo-400 max-w-full cursor-pointer hover:bg-indigo-700 transition-colors",children:t.pools.map(L=>h.jsx("option",{value:L.id,children:L.name.toUpperCase()},L.id))})}),h.jsxs("p",{className:"text-[10px] md:text-xs text-indigo-300 font-bold uppercase tracking-widest mt-1 truncate",children:["Benefiting ",t.globalSettings.charityName]})]})]}),h.jsxs("nav",{className:"flex flex-wrap justify-center gap-1 bg-white/10 p-1.5 rounded-2xl backdrop-blur-md",children:[[{id:"grid",icon:"fa-th",label:"Board"},{id:"winners",icon:"fa-trophy",label:"Winners"},{id:"player",icon:"fa-user-check",label:"My Boxes"},{id:"admin",icon:"fa-lock",label:"Admin"}].map(L=>h.jsxs("button",{onClick:()=>r(L.id),className:`px-4 md:px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${l===L.id?"bg-white text-indigo-900 shadow-lg":"hover:bg-white/10 text-white/70"}`,children:[h.jsx("i",{className:`fas ${L.icon} text-[10px]`})," ",h.jsx("span",{className:"hidden sm:inline",children:L.label})]},L.id)),h.jsx("button",{onClick:()=>j(!0),className:"w-10 h-10 rounded-xl text-white/50 hover:text-white flex items-center justify-center",children:h.jsx("i",{className:"fas fa-question-circle"})})]})]})}),h.jsxs("main",{className:"flex-grow max-w-7xl mx-auto w-full p-4 md:p-8",children:[l==="grid"&&h.jsx(nT,{squares:M.squares,pendingSelection:y,settings:{...t.globalSettings,...M.settings},onSquareClick:Ce,participants:ie,onCheckout:w,onSetPendingSelection:m,activePool:M}),l==="winners"&&h.jsx(Sv,{activePool:M,settings:{...t.globalSettings,...M.settings},onAddScore:yt,onUpdateScore:Jt,onDeleteScore:Dt,isAdmin:!1}),l==="player"&&h.jsx(_R,{state:t}),l==="admin"&&(E?h.jsx(sT,{activePoolId:t.activePoolId,poolSettings:M.settings,globalSettings:t.globalSettings,onUpdatePoolSettings:Ie,onUpdateActivePool:ce,onUpdateGlobalSettings:qe,onResetGrid:ln,onDeletePool:ke,onGenerateNumbers:rt,squares:M.squares,participants:ie,allParticipants:fe,onCreateGlobalParticipant:xe,onUpdateSquare:(L,ee)=>$t(At(wt,`state/pools/${t.pools.findIndex(J=>J.id===t.activePoolId)}/squares/${L}`),ee),onUpdateParticipant:Pe,onUnassignSquare:Ge,onClearUserBoxes:R,onApplyPayment:W,onEditPayment:q,onDeletePayment:ne,onApplyUnappliedPayments:O,onApplyUnappliedPaymentsAll:te,onAddScore:yt,onUpdateScore:Jt,onDeleteScore:Dt,onReapplyPayments:Fe,onRebuildGlobalParticipants:ve,onDeleteParticipant:re,onForceDeleteParticipant:be,scores:M.scores,pools:t.pools,onSwitchPool:ge,onCreatePool:Y,fullState:t,onImportState:xt,onSendTestNotification:Ye}):h.jsxs("div",{className:"max-w-md mx-auto mt-20 p-10 bg-white rounded-[3rem] shadow-2xl text-center border border-indigo-50",children:[h.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:h.jsx("i",{className:"fas fa-lock"})}),h.jsx("h2",{className:"text-xl font-black text-indigo-900 uppercase mb-2",children:"Admin Authentication"}),h.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase mb-8",children:"Password required for management access"}),h.jsxs("form",{onSubmit:Vt,className:"space-y-4",children:[h.jsx("input",{autoFocus:!0,type:"password",value:N,onChange:L=>D(L.target.value),className:`w-full px-6 py-4 bg-gray-50 rounded-2xl text-center font-black outline-none border-2 transition-all ${k?"border-red-500 bg-red-50":"focus:border-indigo-500 border-transparent"}`,placeholder:""}),k&&h.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase",children:"Incorrect password"}),h.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Unlock Panel"})]})]}))]}),h.jsxs("footer",{className:"bg-white border-t border-gray-100 p-8 text-center text-gray-400 print:hidden",children:[h.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] mb-2",children:t.globalSettings.charityName}),h.jsxs("p",{className:"text-[9px] font-medium uppercase tracking-widest",children:["Powered by Charity Squares Engine  ",new Date().getFullYear()]})]}),h.jsx(oT,{isOpen:v,onClose:()=>{_(!1),p(null)},onSubmit:Je,onUnassign:Ge,onSetPendingSelection:m,selectedSquareIds:u!==null?[u]:y,activePool:M,existingParticipants:oe,settings:{...t.globalSettings,...M.settings},isAdmin:E}),h.jsx(lT,{isOpen:X,onClose:()=>j(!1)}),h.jsx(vR,{globalSettings:t.globalSettings,activePool:M})]})},GE=document.getElementById("root");if(!GE)throw new Error("Could not find root element to mount to");const RP=tT.createRoot(GE);RP.render(h.jsx(Mf.StrictMode,{children:h.jsx(IP,{})}));
