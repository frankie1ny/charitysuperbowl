(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function s_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Td={exports:{}},hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function YS(){if(Ey)return hl;Ey=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:a}}return hl.Fragment=e,hl.jsx=n,hl.jsxs=n,hl}var Cy;function JS(){return Cy||(Cy=1,Td.exports=YS()),Td.exports}var _=JS(),bd={exports:{}},Ee={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function KS(){if(Sy)return Ee;Sy=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function T(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function G(N,q,O){this.props=N,this.context=q,this.refs=I,this.updater=O||b}G.prototype.isReactComponent={},G.prototype.setState=function(N,q){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,q,"setState")},G.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Y(){}Y.prototype=G.prototype;function L(N,q,O){this.props=N,this.context=q,this.refs=I,this.updater=O||b}var H=L.prototype=new Y;H.constructor=L,M(H,G.prototype),H.isPureReactComponent=!0;var z=Array.isArray;function ee(){}var W={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function j(N,q,O){var Q=O.ref;return{$$typeof:t,type:N,key:q,ref:Q!==void 0?Q:null,props:O}}function fe(N,q){return j(N.type,q,N.props)}function ce(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function Te(N){var q={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(O){return q[O]})}var ye=/\/+/g;function oe(N,q){return typeof N=="object"&&N!==null&&N.key!=null?Te(""+N.key):q.toString(36)}function De(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ee,ee):(N.status="pending",N.then(function(q){N.status==="pending"&&(N.status="fulfilled",N.value=q)},function(q){N.status==="pending"&&(N.status="rejected",N.reason=q)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function R(N,q,O,Q,se){var pe=typeof N;(pe==="undefined"||pe==="boolean")&&(N=null);var $=!1;if(N===null)$=!0;else switch(pe){case"bigint":case"string":case"number":$=!0;break;case"object":switch(N.$$typeof){case t:case e:$=!0;break;case v:return $=N._init,R($(N._payload),q,O,Q,se)}}if($)return se=se(N),$=Q===""?"."+oe(N,0):Q,z(se)?(O="",$!=null&&(O=$.replace(ye,"$&/")+"/"),R(se,q,O,"",function(ve){return ve})):se!=null&&(ce(se)&&(se=fe(se,O+(se.key==null||N&&N.key===se.key?"":(""+se.key).replace(ye,"$&/")+"/")+$)),q.push(se)),1;$=0;var he=Q===""?".":Q+":";if(z(N))for(var le=0;le<N.length;le++)Q=N[le],pe=he+oe(Q,le),$+=R(Q,q,O,pe,se);else if(le=T(N),typeof le=="function")for(N=le.call(N),le=0;!(Q=N.next()).done;)Q=Q.value,pe=he+oe(Q,le++),$+=R(Q,q,O,pe,se);else if(pe==="object"){if(typeof N.then=="function")return R(De(N),q,O,Q,se);throw q=String(N),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return $}function B(N,q,O){if(N==null)return N;var Q=[],se=0;return R(N,Q,"","",function(pe){return q.call(O,pe,se++)}),Q}function Z(N){if(N._status===-1){var q=N._result;q=q(),q.then(function(O){(N._status===0||N._status===-1)&&(N._status=1,N._result=O)},function(O){(N._status===0||N._status===-1)&&(N._status=2,N._result=O)}),N._status===-1&&(N._status=0,N._result=q)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ue={map:B,forEach:function(N,q,O){B(N,function(){q.apply(this,arguments)},O)},count:function(N){var q=0;return B(N,function(){q++}),q},toArray:function(N){return B(N,function(q){return q})||[]},only:function(N){if(!ce(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ee.Activity=x,Ee.Children=ue,Ee.Component=G,Ee.Fragment=n,Ee.Profiler=l,Ee.PureComponent=L,Ee.StrictMode=s,Ee.Suspense=g,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(N){return W.H.useMemoCache(N)}},Ee.cache=function(N){return function(){return N.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(N,q,O){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var Q=M({},N.props),se=N.key;if(q!=null)for(pe in q.key!==void 0&&(se=""+q.key),q)!ae.call(q,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&q.ref===void 0||(Q[pe]=q[pe]);var pe=arguments.length-2;if(pe===1)Q.children=O;else if(1<pe){for(var $=Array(pe),he=0;he<pe;he++)$[he]=arguments[he+2];Q.children=$}return j(N.type,se,Q)},Ee.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},Ee.createElement=function(N,q,O){var Q,se={},pe=null;if(q!=null)for(Q in q.key!==void 0&&(pe=""+q.key),q)ae.call(q,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(se[Q]=q[Q]);var $=arguments.length-2;if($===1)se.children=O;else if(1<$){for(var he=Array($),le=0;le<$;le++)he[le]=arguments[le+2];se.children=he}if(N&&N.defaultProps)for(Q in $=N.defaultProps,$)se[Q]===void 0&&(se[Q]=$[Q]);return j(N,pe,se)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(N){return{$$typeof:h,render:N}},Ee.isValidElement=ce,Ee.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:Z}},Ee.memo=function(N,q){return{$$typeof:p,type:N,compare:q===void 0?null:q}},Ee.startTransition=function(N){var q=W.T,O={};W.T=O;try{var Q=N(),se=W.S;se!==null&&se(O,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(ee,X)}catch(pe){X(pe)}finally{q!==null&&O.types!==null&&(q.types=O.types),W.T=q}},Ee.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ee.use=function(N){return W.H.use(N)},Ee.useActionState=function(N,q,O){return W.H.useActionState(N,q,O)},Ee.useCallback=function(N,q){return W.H.useCallback(N,q)},Ee.useContext=function(N){return W.H.useContext(N)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(N,q){return W.H.useDeferredValue(N,q)},Ee.useEffect=function(N,q){return W.H.useEffect(N,q)},Ee.useEffectEvent=function(N){return W.H.useEffectEvent(N)},Ee.useId=function(){return W.H.useId()},Ee.useImperativeHandle=function(N,q,O){return W.H.useImperativeHandle(N,q,O)},Ee.useInsertionEffect=function(N,q){return W.H.useInsertionEffect(N,q)},Ee.useLayoutEffect=function(N,q){return W.H.useLayoutEffect(N,q)},Ee.useMemo=function(N,q){return W.H.useMemo(N,q)},Ee.useOptimistic=function(N,q){return W.H.useOptimistic(N,q)},Ee.useReducer=function(N,q,O){return W.H.useReducer(N,q,O)},Ee.useRef=function(N){return W.H.useRef(N)},Ee.useState=function(N){return W.H.useState(N)},Ee.useSyncExternalStore=function(N,q,O){return W.H.useSyncExternalStore(N,q,O)},Ee.useTransition=function(){return W.H.useTransition()},Ee.version="19.2.4",Ee}var Ty;function Af(){return Ty||(Ty=1,bd.exports=KS()),bd.exports}var ne=Af();const QS=s_(ne);var Ad={exports:{}},pl={},Nd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function $S(){return by||(by=1,(function(t){function e(R,B){var Z=R.length;R.push(B);e:for(;0<Z;){var X=Z-1>>>1,ue=R[X];if(0<l(ue,B))R[X]=B,R[Z]=ue,Z=X;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var B=R[0],Z=R.pop();if(Z!==B){R[0]=Z;e:for(var X=0,ue=R.length,N=ue>>>1;X<N;){var q=2*(X+1)-1,O=R[q],Q=q+1,se=R[Q];if(0>l(O,Z))Q<ue&&0>l(se,O)?(R[X]=se,R[Q]=Z,X=Q):(R[X]=O,R[q]=Z,X=q);else if(Q<ue&&0>l(se,Z))R[X]=se,R[Q]=Z,X=Q;else break e}}return B}function l(R,B){var Z=R.sortIndex-B.sortIndex;return Z!==0?Z:R.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,x=null,E=3,T=!1,b=!1,M=!1,I=!1,G=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function H(R){for(var B=n(p);B!==null;){if(B.callback===null)s(p);else if(B.startTime<=R)s(p),B.sortIndex=B.expirationTime,e(g,B);else break;B=n(p)}}function z(R){if(M=!1,H(R),!b)if(n(g)!==null)b=!0,ee||(ee=!0,Te());else{var B=n(p);B!==null&&De(z,B.startTime-R)}}var ee=!1,W=-1,ae=5,j=-1;function fe(){return I?!0:!(t.unstable_now()-j<ae)}function ce(){if(I=!1,ee){var R=t.unstable_now();j=R;var B=!0;try{e:{b=!1,M&&(M=!1,Y(W),W=-1),T=!0;var Z=E;try{t:{for(H(R),x=n(g);x!==null&&!(x.expirationTime>R&&fe());){var X=x.callback;if(typeof X=="function"){x.callback=null,E=x.priorityLevel;var ue=X(x.expirationTime<=R);if(R=t.unstable_now(),typeof ue=="function"){x.callback=ue,H(R),B=!0;break t}x===n(g)&&s(g),H(R)}else s(g);x=n(g)}if(x!==null)B=!0;else{var N=n(p);N!==null&&De(z,N.startTime-R),B=!1}}break e}finally{x=null,E=Z,T=!1}B=void 0}}finally{B?Te():ee=!1}}}var Te;if(typeof L=="function")Te=function(){L(ce)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,oe=ye.port2;ye.port1.onmessage=ce,Te=function(){oe.postMessage(null)}}else Te=function(){G(ce,0)};function De(R,B){W=G(function(){R(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(R){switch(E){case 1:case 2:case 3:var B=3;break;default:B=E}var Z=E;E=B;try{return R()}finally{E=Z}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Z=E;E=R;try{return B()}finally{E=Z}},t.unstable_scheduleCallback=function(R,B,Z){var X=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,R){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,R={id:v++,callback:B,priorityLevel:R,startTime:Z,expirationTime:ue,sortIndex:-1},Z>X?(R.sortIndex=Z,e(p,R),n(g)===null&&R===n(p)&&(M?(Y(W),W=-1):M=!0,De(z,Z-X))):(R.sortIndex=ue,e(g,R),b||T||(b=!0,ee||(ee=!0,Te()))),R},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(R){var B=E;return function(){var Z=E;E=B;try{return R.apply(this,arguments)}finally{E=Z}}}})(wd)),wd}var Ay;function XS(){return Ay||(Ay=1,Nd.exports=$S()),Nd.exports}var Rd={exports:{}},Nt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function WS(){if(Ny)return Nt;Ny=1;var t=Af();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:g,containerInfo:p,implementation:v}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Nt.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,v)},Nt.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},Nt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Nt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Nt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:T}):v==="script"&&s.d.X(g,{crossOrigin:x,integrity:E,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Nt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Nt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Nt.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Nt.requestFormReset=function(g){s.d.r(g)},Nt.unstable_batchedUpdates=function(g,p){return g(p)},Nt.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Nt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nt.version="19.2.4",Nt}var wy;function ZS(){if(wy)return Rd.exports;wy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rd.exports=WS(),Rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function jS(){if(Ry)return pl;Ry=1;var t=XS(),e=Af(),n=ZS();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,r=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(r=o.return),i=o.return;while(i)}return o.tag===3?r:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(a(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var r=i,u=o;;){var m=r.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===r)return g(m),i;if(y===u)return g(m),o;y=y.sibling}throw Error(s(188))}if(r.return!==u.return)r=m,u=y;else{for(var C=!1,S=m.child;S;){if(S===r){C=!0,r=m,u=y;break}if(S===u){C=!0,u=m,r=y;break}S=S.sibling}if(!C){for(S=y.child;S;){if(S===r){C=!0,r=y,u=m;break}if(S===u){C=!0,u=y,r=m;break}S=S.sibling}if(!C)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?i:o}function v(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=v(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),L=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),W=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function Te(i){return i===null||typeof i!="object"?null:(i=ce&&i[ce]||i["@@iterator"],typeof i=="function"?i:null)}var ye=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ye?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case G:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case ee:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case L:return i.displayName||"Context";case Y:return(i._context.displayName||"Context")+".Consumer";case H:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case W:return o=i.displayName||null,o!==null?o:oe(i.type)||"Memo";case ae:o=i._payload,i=i._init;try{return oe(i(o))}catch{}}return null}var De=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},X=[],ue=-1;function N(i){return{current:i}}function q(i){0>ue||(i.current=X[ue],X[ue]=null,ue--)}function O(i,o){ue++,X[ue]=i.current,i.current=o}var Q=N(null),se=N(null),pe=N(null),$=N(null);function he(i,o){switch(O(pe,o),O(se,i),O(Q,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?zg(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=zg(o),i=Yg(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(Q),O(Q,i)}function le(){q(Q),q(se),q(pe)}function ve(i){i.memoizedState!==null&&O($,i);var o=Q.current,r=Yg(o,i.type);o!==r&&(O(se,i),O(Q,r))}function Ze(i){se.current===i&&(q(Q),q(se)),$.current===i&&(q($),ul._currentValue=Z)}var Je,ct;function _t(i){if(Je===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);Je=o&&o[1]||"",ct=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+i+ct}var pn=!1;function ti(i,o){if(!i||pn)return"";pn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(V){var P=V}Reflect.construct(i,[],K)}else{try{K.call()}catch(V){P=V}i.call(K.prototype)}}else{try{throw Error()}catch(V){P=V}(K=i())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(V){if(V&&P&&typeof V.stack=="string")return[V.stack,P.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),C=y[0],S=y[1];if(C&&S){var A=C.split(`
`),U=S.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===U.length)for(u=A.length-1,m=U.length-1;1<=u&&0<=m&&A[u]!==U[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==U[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==U[m]){var F=`
`+A[u].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=u&&0<=m);break}}}finally{pn=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?_t(r):""}function CE(i,o){switch(i.tag){case 26:case 27:case 5:return _t(i.type);case 16:return _t("Lazy");case 13:return i.child!==o&&o!==null?_t("Suspense Fallback"):_t("Suspense");case 19:return _t("SuspenseList");case 0:case 15:return ti(i.type,!1);case 11:return ti(i.type.render,!1);case 1:return ti(i.type,!0);case 31:return _t("Activity");default:return""}}function Eh(i){try{var o="",r=null;do o+=CE(i,r),r=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var uu=Object.prototype.hasOwnProperty,cu=t.unstable_scheduleCallback,du=t.unstable_cancelCallback,SE=t.unstable_shouldYield,TE=t.unstable_requestPaint,qt=t.unstable_now,bE=t.unstable_getCurrentPriorityLevel,Ch=t.unstable_ImmediatePriority,Sh=t.unstable_UserBlockingPriority,Yl=t.unstable_NormalPriority,AE=t.unstable_LowPriority,Th=t.unstable_IdlePriority,NE=t.log,wE=t.unstable_setDisableYieldValue,Eo=null,Ft=null;function ni(i){if(typeof NE=="function"&&wE(i),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Eo,i)}catch{}}var zt=Math.clz32?Math.clz32:ME,RE=Math.log,IE=Math.LN2;function ME(i){return i>>>=0,i===0?32:31-(RE(i)/IE|0)|0}var Jl=256,Kl=262144,Ql=4194304;function Oi(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function $l(i,o,r){var u=i.pendingLanes;if(u===0)return 0;var m=0,y=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var S=u&134217727;return S!==0?(u=S&~y,u!==0?m=Oi(u):(C&=S,C!==0?m=Oi(C):r||(r=S&~i,r!==0&&(m=Oi(r))))):(S=u&~y,S!==0?m=Oi(S):C!==0?m=Oi(C):r||(r=u&~i,r!==0&&(m=Oi(r)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,r=o&-o,y>=r||y===32&&(r&4194048)!==0)?o:m}function Co(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function DE(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bh(){var i=Ql;return Ql<<=1,(Ql&62914560)===0&&(Ql=4194304),i}function fu(i){for(var o=[],r=0;31>r;r++)o.push(i);return o}function So(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function kE(i,o,r,u,m,y){var C=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var S=i.entanglements,A=i.expirationTimes,U=i.hiddenUpdates;for(r=C&~r;0<r;){var F=31-zt(r),K=1<<F;S[F]=0,A[F]=-1;var P=U[F];if(P!==null)for(U[F]=null,F=0;F<P.length;F++){var V=P[F];V!==null&&(V.lane&=-536870913)}r&=~K}u!==0&&Ah(i,u,0),y!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=y&~(C&~o))}function Ah(i,o,r){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-zt(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function Nh(i,o){var r=i.entangledLanes|=o;for(i=i.entanglements;r;){var u=31-zt(r),m=1<<u;m&o|i[u]&o&&(i[u]|=o),r&=~m}}function wh(i,o){var r=o&-o;return r=(r&42)!==0?1:hu(r),(r&(i.suspendedLanes|o))!==0?0:r}function hu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function pu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Rh(){var i=B.p;return i!==0?i:(i=window.event,i===void 0?32:py(i.type))}function Ih(i,o){var r=B.p;try{return B.p=i,o()}finally{B.p=r}}var ii=Math.random().toString(36).slice(2),xt="__reactFiber$"+ii,kt="__reactProps$"+ii,fs="__reactContainer$"+ii,mu="__reactEvents$"+ii,UE="__reactListeners$"+ii,PE="__reactHandles$"+ii,Mh="__reactResources$"+ii,To="__reactMarker$"+ii;function gu(i){delete i[xt],delete i[kt],delete i[mu],delete i[UE],delete i[PE]}function hs(i){var o=i[xt];if(o)return o;for(var r=i.parentNode;r;){if(o=r[fs]||r[xt]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(i=Zg(i);i!==null;){if(r=i[xt])return r;i=Zg(i)}return o}i=r,r=i.parentNode}return null}function ps(i){if(i=i[xt]||i[fs]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function bo(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function ms(i){var o=i[Mh];return o||(o=i[Mh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ft(i){i[To]=!0}var Dh=new Set,kh={};function Hi(i,o){gs(i,o),gs(i+"Capture",o)}function gs(i,o){for(kh[i]=o,i=0;i<o.length;i++)Dh.add(o[i])}var LE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uh={},Ph={};function OE(i){return uu.call(Ph,i)?!0:uu.call(Uh,i)?!1:LE.test(i)?Ph[i]=!0:(Uh[i]=!0,!1)}function Xl(i,o,r){if(OE(o))if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+r)}}function Wl(i,o,r){if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+r)}}function In(i,o,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(o,r,""+u)}}function en(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Lh(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function HE(i,o,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(C){r=""+C,y.call(this,C)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(C){r=""+C},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function yu(i){if(!i._valueTracker){var o=Lh(i)?"checked":"value";i._valueTracker=HE(i,o,""+i[o])}}function Oh(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return i&&(u=Lh(i)?i.checked?"true":"false":i.value),i=u,i!==r?(o.setValue(i),!0):!1}function Zl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var GE=/[\n"\\]/g;function tn(i){return i.replace(GE,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vu(i,o,r,u,m,y,C,S){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),o!=null?C==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+en(o)):i.value!==""+en(o)&&(i.value=""+en(o)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),o!=null?_u(i,C,en(o)):r!=null?_u(i,C,en(r)):u!=null&&i.removeAttribute("value"),m==null&&y!=null&&(i.defaultChecked=!!y),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+en(S):i.removeAttribute("name")}function Hh(i,o,r,u,m,y,C,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),o!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){yu(i);return}r=r!=null?""+en(r):"",o=o!=null?""+en(o):r,S||o===i.value||(i.value=o),i.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=S?i.checked:!!u,i.defaultChecked=!!u,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),yu(i)}function _u(i,o,r){o==="number"&&Zl(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function ys(i,o,r,u){if(i=i.options,o){o={};for(var m=0;m<r.length;m++)o["$"+r[m]]=!0;for(r=0;r<i.length;r++)m=o.hasOwnProperty("$"+i[r].value),i[r].selected!==m&&(i[r].selected=m),m&&u&&(i[r].defaultSelected=!0)}else{for(r=""+en(r),o=null,m=0;m<i.length;m++){if(i[m].value===r){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Gh(i,o,r){if(o!=null&&(o=""+en(o),o!==i.value&&(i.value=o),r==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=r!=null?""+en(r):""}function Bh(i,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(De(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=en(o),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),yu(i)}function vs(i,o){if(o){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=o;return}}i.textContent=o}var BE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vh(i,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,r):typeof r!="number"||r===0||BE.has(o)?o==="float"?i.cssFloat=r:i[o]=(""+r).trim():i[o]=r+"px"}function qh(i,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&r[m]!==u&&Vh(i,m,u)}else for(var y in o)o.hasOwnProperty(y)&&Vh(i,y,o[y])}function xu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(i){return qE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Mn(){}var Eu=null;function Cu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _s=null,xs=null;function Fh(i){var o=ps(i);if(o&&(i=o.stateNode)){var r=i[kt]||null;e:switch(i=o.stateNode,o.type){case"input":if(vu(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+tn(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==i&&u.form===i.form){var m=u[kt]||null;if(!m)throw Error(s(90));vu(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===i.form&&Oh(u)}break e;case"textarea":Gh(i,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&ys(i,!!r.multiple,o,!1)}}}var Su=!1;function zh(i,o,r){if(Su)return i(o,r);Su=!0;try{var u=i(o);return u}finally{if(Su=!1,(_s!==null||xs!==null)&&(Br(),_s&&(o=_s,i=xs,xs=_s=null,Fh(o),i)))for(o=0;o<i.length;o++)Fh(i[o])}}function Ao(i,o){var r=i.stateNode;if(r===null)return null;var u=r[kt]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(Dn)try{var No={};Object.defineProperty(No,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{Tu=!1}var si=null,bu=null,er=null;function Yh(){if(er)return er;var i,o=bu,r=o.length,u,m="value"in si?si.value:si.textContent,y=m.length;for(i=0;i<r&&o[i]===m[i];i++);var C=r-i;for(u=1;u<=C&&o[r-u]===m[y-u];u++);return er=m.slice(i,1<u?1-u:void 0)}function tr(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function nr(){return!0}function Jh(){return!1}function Ut(i){function o(r,u,m,y,C){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(r=i[S],this[S]=r?r(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?nr:Jh,this.isPropagationStopped=Jh,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nr)},persist:function(){},isPersistent:nr}),o}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ir=Ut(Gi),wo=x({},Gi,{view:0,detail:0}),FE=Ut(wo),Au,Nu,Ro,sr=x({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ro&&(Ro&&i.type==="mousemove"?(Au=i.screenX-Ro.screenX,Nu=i.screenY-Ro.screenY):Nu=Au=0,Ro=i),Au)},movementY:function(i){return"movementY"in i?i.movementY:Nu}}),Kh=Ut(sr),zE=x({},sr,{dataTransfer:0}),YE=Ut(zE),JE=x({},wo,{relatedTarget:0}),wu=Ut(JE),KE=x({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),QE=Ut(KE),$E=x({},Gi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),XE=Ut($E),WE=x({},Gi,{data:0}),Qh=Ut(WE),ZE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tC(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=eC[i])?!!o[i]:!1}function Ru(){return tC}var nC=x({},wo,{key:function(i){if(i.key){var o=ZE[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=tr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?jE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(i){return i.type==="keypress"?tr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?tr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),iC=Ut(nC),sC=x({},sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$h=Ut(sC),oC=x({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),lC=Ut(oC),rC=x({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),aC=Ut(rC),uC=x({},sr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),cC=Ut(uC),dC=x({},Gi,{newState:0,oldState:0}),fC=Ut(dC),hC=[9,13,27,32],Iu=Dn&&"CompositionEvent"in window,Io=null;Dn&&"documentMode"in document&&(Io=document.documentMode);var pC=Dn&&"TextEvent"in window&&!Io,Xh=Dn&&(!Iu||Io&&8<Io&&11>=Io),Wh=" ",Zh=!1;function jh(i,o){switch(i){case"keyup":return hC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ep(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Es=!1;function mC(i,o){switch(i){case"compositionend":return ep(o);case"keypress":return o.which!==32?null:(Zh=!0,Wh);case"textInput":return i=o.data,i===Wh&&Zh?null:i;default:return null}}function gC(i,o){if(Es)return i==="compositionend"||!Iu&&jh(i,o)?(i=Yh(),er=bu=si=null,Es=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Xh&&o.locale!=="ko"?null:o.data;default:return null}}var yC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!yC[i.type]:o==="textarea"}function np(i,o,r,u){_s?xs?xs.push(u):xs=[u]:_s=u,o=Kr(o,"onChange"),0<o.length&&(r=new ir("onChange","change",null,r,u),i.push({event:r,listeners:o}))}var Mo=null,Do=null;function vC(i){Hg(i,0)}function or(i){var o=bo(i);if(Oh(o))return i}function ip(i,o){if(i==="change")return o}var sp=!1;if(Dn){var Mu;if(Dn){var Du="oninput"in document;if(!Du){var op=document.createElement("div");op.setAttribute("oninput","return;"),Du=typeof op.oninput=="function"}Mu=Du}else Mu=!1;sp=Mu&&(!document.documentMode||9<document.documentMode)}function lp(){Mo&&(Mo.detachEvent("onpropertychange",rp),Do=Mo=null)}function rp(i){if(i.propertyName==="value"&&or(Do)){var o=[];np(o,Do,i,Cu(i)),zh(vC,o)}}function _C(i,o,r){i==="focusin"?(lp(),Mo=o,Do=r,Mo.attachEvent("onpropertychange",rp)):i==="focusout"&&lp()}function xC(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return or(Do)}function EC(i,o){if(i==="click")return or(o)}function CC(i,o){if(i==="input"||i==="change")return or(o)}function SC(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Yt=typeof Object.is=="function"?Object.is:SC;function ko(i,o){if(Yt(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var r=Object.keys(i),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!uu.call(o,m)||!Yt(i[m],o[m]))return!1}return!0}function ap(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function up(i,o){var r=ap(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=o&&u>=o)return{node:r,offset:o-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ap(r)}}function cp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?cp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function dp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Zl(i.document);o instanceof i.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)i=o.contentWindow;else break;o=Zl(i.document)}return o}function ku(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var TC=Dn&&"documentMode"in document&&11>=document.documentMode,Cs=null,Uu=null,Uo=null,Pu=!1;function fp(i,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pu||Cs==null||Cs!==Zl(u)||(u=Cs,"selectionStart"in u&&ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Uo&&ko(Uo,u)||(Uo=u,u=Kr(Uu,"onSelect"),0<u.length&&(o=new ir("onSelect","select",null,o,r),i.push({event:o,listeners:u}),o.target=Cs)))}function Bi(i,o){var r={};return r[i.toLowerCase()]=o.toLowerCase(),r["Webkit"+i]="webkit"+o,r["Moz"+i]="moz"+o,r}var Ss={animationend:Bi("Animation","AnimationEnd"),animationiteration:Bi("Animation","AnimationIteration"),animationstart:Bi("Animation","AnimationStart"),transitionrun:Bi("Transition","TransitionRun"),transitionstart:Bi("Transition","TransitionStart"),transitioncancel:Bi("Transition","TransitionCancel"),transitionend:Bi("Transition","TransitionEnd")},Lu={},hp={};Dn&&(hp=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function Vi(i){if(Lu[i])return Lu[i];if(!Ss[i])return i;var o=Ss[i],r;for(r in o)if(o.hasOwnProperty(r)&&r in hp)return Lu[i]=o[r];return i}var pp=Vi("animationend"),mp=Vi("animationiteration"),gp=Vi("animationstart"),bC=Vi("transitionrun"),AC=Vi("transitionstart"),NC=Vi("transitioncancel"),yp=Vi("transitionend"),vp=new Map,Ou="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ou.push("scrollEnd");function mn(i,o){vp.set(i,o),Hi(o,[i])}var lr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},nn=[],Ts=0,Hu=0;function rr(){for(var i=Ts,o=Hu=Ts=0;o<i;){var r=nn[o];nn[o++]=null;var u=nn[o];nn[o++]=null;var m=nn[o];nn[o++]=null;var y=nn[o];if(nn[o++]=null,u!==null&&m!==null){var C=u.pending;C===null?m.next=m:(m.next=C.next,C.next=m),u.pending=m}y!==0&&_p(r,m,y)}}function ar(i,o,r,u){nn[Ts++]=i,nn[Ts++]=o,nn[Ts++]=r,nn[Ts++]=u,Hu|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Gu(i,o,r,u){return ar(i,o,r,u),ur(i)}function qi(i,o){return ar(i,null,null,o),ur(i)}function _p(i,o,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var m=!1,y=i.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(m=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,m&&o!==null&&(m=31-zt(r),i=y.hiddenUpdates,u=i[m],u===null?i[m]=[o]:u.push(o),o.lane=r|536870912),y):null}function ur(i){if(50<nl)throw nl=0,Qc=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var bs={};function wC(i,o,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(i,o,r,u){return new wC(i,o,r,u)}function Bu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function kn(i,o){var r=i.alternate;return r===null?(r=Jt(i.tag,o,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=o,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,o=i.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function xp(i,o){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,o=r.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function cr(i,o,r,u,m,y){var C=0;if(u=i,typeof i=="function")Bu(i)&&(C=1);else if(typeof i=="string")C=kS(i,r,Q.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case j:return i=Jt(31,r,o,m),i.elementType=j,i.lanes=y,i;case M:return Fi(r.children,m,y,o);case I:C=8,m|=24;break;case G:return i=Jt(12,r,o,m|2),i.elementType=G,i.lanes=y,i;case z:return i=Jt(13,r,o,m),i.elementType=z,i.lanes=y,i;case ee:return i=Jt(19,r,o,m),i.elementType=ee,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case L:C=10;break e;case Y:C=9;break e;case H:C=11;break e;case W:C=14;break e;case ae:C=16,u=null;break e}C=29,r=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=Jt(C,r,o,m),o.elementType=i,o.type=u,o.lanes=y,o}function Fi(i,o,r,u){return i=Jt(7,i,u,o),i.lanes=r,i}function Vu(i,o,r){return i=Jt(6,i,null,o),i.lanes=r,i}function Ep(i){var o=Jt(18,null,null,0);return o.stateNode=i,o}function qu(i,o,r){return o=Jt(4,i.children!==null?i.children:[],i.key,o),o.lanes=r,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Cp=new WeakMap;function sn(i,o){if(typeof i=="object"&&i!==null){var r=Cp.get(i);return r!==void 0?r:(o={value:i,source:o,stack:Eh(o)},Cp.set(i,o),o)}return{value:i,source:o,stack:Eh(o)}}var As=[],Ns=0,dr=null,Po=0,on=[],ln=0,oi=null,bn=1,An="";function Un(i,o){As[Ns++]=Po,As[Ns++]=dr,dr=i,Po=o}function Sp(i,o,r){on[ln++]=bn,on[ln++]=An,on[ln++]=oi,oi=i;var u=bn;i=An;var m=32-zt(u)-1;u&=~(1<<m),r+=1;var y=32-zt(o)+m;if(30<y){var C=m-m%5;y=(u&(1<<C)-1).toString(32),u>>=C,m-=C,bn=1<<32-zt(o)+m|r<<m|u,An=y+i}else bn=1<<y|r<<m|u,An=i}function Fu(i){i.return!==null&&(Un(i,1),Sp(i,1,0))}function zu(i){for(;i===dr;)dr=As[--Ns],As[Ns]=null,Po=As[--Ns],As[Ns]=null;for(;i===oi;)oi=on[--ln],on[ln]=null,An=on[--ln],on[ln]=null,bn=on[--ln],on[ln]=null}function Tp(i,o){on[ln++]=bn,on[ln++]=An,on[ln++]=oi,bn=o.id,An=o.overflow,oi=i}var Et=null,Xe=null,ke=!1,li=null,rn=!1,Yu=Error(s(519));function ri(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Lo(sn(o,i)),Yu}function bp(i){var o=i.stateNode,r=i.type,u=i.memoizedProps;switch(o[xt]=i,o[kt]=u,r){case"dialog":we("cancel",o),we("close",o);break;case"iframe":case"object":case"embed":we("load",o);break;case"video":case"audio":for(r=0;r<sl.length;r++)we(sl[r],o);break;case"source":we("error",o);break;case"img":case"image":case"link":we("error",o),we("load",o);break;case"details":we("toggle",o);break;case"input":we("invalid",o),Hh(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":we("invalid",o);break;case"textarea":we("invalid",o),Bh(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||qg(o.textContent,r)?(u.popover!=null&&(we("beforetoggle",o),we("toggle",o)),u.onScroll!=null&&we("scroll",o),u.onScrollEnd!=null&&we("scrollend",o),u.onClick!=null&&(o.onclick=Mn),o=!0):o=!1,o||ri(i,!0)}function Ap(i){for(Et=i.return;Et;)switch(Et.tag){case 5:case 31:case 13:rn=!1;return;case 27:case 3:rn=!0;return;default:Et=Et.return}}function ws(i){if(i!==Et)return!1;if(!ke)return Ap(i),ke=!0,!1;var o=i.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||ud(i.type,i.memoizedProps)),r=!r),r&&Xe&&ri(i),Ap(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Xe=Wg(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Xe=Wg(i)}else o===27?(o=Xe,Ei(i.type)?(i=pd,pd=null,Xe=i):Xe=o):Xe=Et?un(i.stateNode.nextSibling):null;return!0}function zi(){Xe=Et=null,ke=!1}function Ju(){var i=li;return i!==null&&(Ht===null?Ht=i:Ht.push.apply(Ht,i),li=null),i}function Lo(i){li===null?li=[i]:li.push(i)}var Ku=N(null),Yi=null,Pn=null;function ai(i,o,r){O(Ku,o._currentValue),o._currentValue=r}function Ln(i){i._currentValue=Ku.current,q(Ku)}function Qu(i,o,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===r)break;i=i.return}}function $u(i,o,r,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var y=m.dependencies;if(y!==null){var C=m.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=m;for(var A=0;A<o.length;A++)if(S.context===o[A]){y.lanes|=r,S=y.alternate,S!==null&&(S.lanes|=r),Qu(y.return,r,i),u||(C=null);break e}y=S.next}}else if(m.tag===18){if(C=m.return,C===null)throw Error(s(341));C.lanes|=r,y=C.alternate,y!==null&&(y.lanes|=r),Qu(C,r,i),C=null}else C=m.child;if(C!==null)C.return=m;else for(C=m;C!==null;){if(C===i){C=null;break}if(m=C.sibling,m!==null){m.return=C.return,C=m;break}C=C.return}m=C}}function Rs(i,o,r,u){i=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var C=m.alternate;if(C===null)throw Error(s(387));if(C=C.memoizedProps,C!==null){var S=m.type;Yt(m.pendingProps.value,C.value)||(i!==null?i.push(S):i=[S])}}else if(m===$.current){if(C=m.alternate,C===null)throw Error(s(387));C.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(ul):i=[ul])}m=m.return}i!==null&&$u(o,i,r,u),o.flags|=262144}function fr(i){for(i=i.firstContext;i!==null;){if(!Yt(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ji(i){Yi=i,Pn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ct(i){return Np(Yi,i)}function hr(i,o){return Yi===null&&Ji(i),Np(i,o)}function Np(i,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},Pn===null){if(i===null)throw Error(s(308));Pn=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Pn=Pn.next=o;return r}var RC=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(r){return r()})}},IC=t.unstable_scheduleCallback,MC=t.unstable_NormalPriority,lt={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xu(){return{controller:new RC,data:new Map,refCount:0}}function Oo(i){i.refCount--,i.refCount===0&&IC(MC,function(){i.controller.abort()})}var Ho=null,Wu=0,Is=0,Ms=null;function DC(i,o){if(Ho===null){var r=Ho=[];Wu=0,Is=ed(),Ms={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Wu++,o.then(wp,wp),o}function wp(){if(--Wu===0&&Ho!==null){Ms!==null&&(Ms.status="fulfilled");var i=Ho;Ho=null,Is=0,Ms=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function kC(i,o){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<r.length;m++)(0,r[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var Rp=R.S;R.S=function(i,o){fg=qt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&DC(i,o),Rp!==null&&Rp(i,o)};var Ki=N(null);function Zu(){var i=Ki.current;return i!==null?i:Ye.pooledCache}function pr(i,o){o===null?O(Ki,Ki.current):O(Ki,o.pool)}function Ip(){var i=Zu();return i===null?null:{parent:lt._currentValue,pool:i}}var Ds=Error(s(460)),ju=Error(s(474)),mr=Error(s(542)),gr={then:function(){}};function Mp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Dp(i,o,r){switch(r=i[r],r===void 0?i.push(o):r!==o&&(o.then(Mn,Mn),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Up(i),i;default:if(typeof o.status=="string")o.then(Mn,Mn);else{if(i=Ye,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Up(i),i}throw $i=o,Ds}}function Qi(i){try{var o=i._init;return o(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?($i=r,Ds):r}}var $i=null;function kp(){if($i===null)throw Error(s(459));var i=$i;return $i=null,i}function Up(i){if(i===Ds||i===mr)throw Error(s(483))}var ks=null,Go=0;function yr(i){var o=Go;return Go+=1,ks===null&&(ks=[]),Dp(ks,i,o)}function Bo(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function vr(i,o){throw o.$$typeof===E?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Pp(i){function o(D,w){if(i){var k=D.deletions;k===null?(D.deletions=[w],D.flags|=16):k.push(w)}}function r(D,w){if(!i)return null;for(;w!==null;)o(D,w),w=w.sibling;return null}function u(D){for(var w=new Map;D!==null;)D.key!==null?w.set(D.key,D):w.set(D.index,D),D=D.sibling;return w}function m(D,w){return D=kn(D,w),D.index=0,D.sibling=null,D}function y(D,w,k){return D.index=k,i?(k=D.alternate,k!==null?(k=k.index,k<w?(D.flags|=67108866,w):k):(D.flags|=67108866,w)):(D.flags|=1048576,w)}function C(D){return i&&D.alternate===null&&(D.flags|=67108866),D}function S(D,w,k,J){return w===null||w.tag!==6?(w=Vu(k,D.mode,J),w.return=D,w):(w=m(w,k),w.return=D,w)}function A(D,w,k,J){var me=k.type;return me===M?F(D,w,k.props.children,J,k.key):w!==null&&(w.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ae&&Qi(me)===w.type)?(w=m(w,k.props),Bo(w,k),w.return=D,w):(w=cr(k.type,k.key,k.props,null,D.mode,J),Bo(w,k),w.return=D,w)}function U(D,w,k,J){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=qu(k,D.mode,J),w.return=D,w):(w=m(w,k.children||[]),w.return=D,w)}function F(D,w,k,J,me){return w===null||w.tag!==7?(w=Fi(k,D.mode,J,me),w.return=D,w):(w=m(w,k),w.return=D,w)}function K(D,w,k){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Vu(""+w,D.mode,k),w.return=D,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case T:return k=cr(w.type,w.key,w.props,null,D.mode,k),Bo(k,w),k.return=D,k;case b:return w=qu(w,D.mode,k),w.return=D,w;case ae:return w=Qi(w),K(D,w,k)}if(De(w)||Te(w))return w=Fi(w,D.mode,k,null),w.return=D,w;if(typeof w.then=="function")return K(D,yr(w),k);if(w.$$typeof===L)return K(D,hr(D,w),k);vr(D,w)}return null}function P(D,w,k,J){var me=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return me!==null?null:S(D,w,""+k,J);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return k.key===me?A(D,w,k,J):null;case b:return k.key===me?U(D,w,k,J):null;case ae:return k=Qi(k),P(D,w,k,J)}if(De(k)||Te(k))return me!==null?null:F(D,w,k,J,null);if(typeof k.then=="function")return P(D,w,yr(k),J);if(k.$$typeof===L)return P(D,w,hr(D,k),J);vr(D,k)}return null}function V(D,w,k,J,me){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return D=D.get(k)||null,S(w,D,""+J,me);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case T:return D=D.get(J.key===null?k:J.key)||null,A(w,D,J,me);case b:return D=D.get(J.key===null?k:J.key)||null,U(w,D,J,me);case ae:return J=Qi(J),V(D,w,k,J,me)}if(De(J)||Te(J))return D=D.get(k)||null,F(w,D,J,me,null);if(typeof J.then=="function")return V(D,w,k,yr(J),me);if(J.$$typeof===L)return V(D,w,k,hr(w,J),me);vr(w,J)}return null}function re(D,w,k,J){for(var me=null,Ue=null,de=w,Se=w=0,Me=null;de!==null&&Se<k.length;Se++){de.index>Se?(Me=de,de=null):Me=de.sibling;var Pe=P(D,de,k[Se],J);if(Pe===null){de===null&&(de=Me);break}i&&de&&Pe.alternate===null&&o(D,de),w=y(Pe,w,Se),Ue===null?me=Pe:Ue.sibling=Pe,Ue=Pe,de=Me}if(Se===k.length)return r(D,de),ke&&Un(D,Se),me;if(de===null){for(;Se<k.length;Se++)de=K(D,k[Se],J),de!==null&&(w=y(de,w,Se),Ue===null?me=de:Ue.sibling=de,Ue=de);return ke&&Un(D,Se),me}for(de=u(de);Se<k.length;Se++)Me=V(de,D,Se,k[Se],J),Me!==null&&(i&&Me.alternate!==null&&de.delete(Me.key===null?Se:Me.key),w=y(Me,w,Se),Ue===null?me=Me:Ue.sibling=Me,Ue=Me);return i&&de.forEach(function(Ai){return o(D,Ai)}),ke&&Un(D,Se),me}function ge(D,w,k,J){if(k==null)throw Error(s(151));for(var me=null,Ue=null,de=w,Se=w=0,Me=null,Pe=k.next();de!==null&&!Pe.done;Se++,Pe=k.next()){de.index>Se?(Me=de,de=null):Me=de.sibling;var Ai=P(D,de,Pe.value,J);if(Ai===null){de===null&&(de=Me);break}i&&de&&Ai.alternate===null&&o(D,de),w=y(Ai,w,Se),Ue===null?me=Ai:Ue.sibling=Ai,Ue=Ai,de=Me}if(Pe.done)return r(D,de),ke&&Un(D,Se),me;if(de===null){for(;!Pe.done;Se++,Pe=k.next())Pe=K(D,Pe.value,J),Pe!==null&&(w=y(Pe,w,Se),Ue===null?me=Pe:Ue.sibling=Pe,Ue=Pe);return ke&&Un(D,Se),me}for(de=u(de);!Pe.done;Se++,Pe=k.next())Pe=V(de,D,Se,Pe.value,J),Pe!==null&&(i&&Pe.alternate!==null&&de.delete(Pe.key===null?Se:Pe.key),w=y(Pe,w,Se),Ue===null?me=Pe:Ue.sibling=Pe,Ue=Pe);return i&&de.forEach(function(zS){return o(D,zS)}),ke&&Un(D,Se),me}function Fe(D,w,k,J){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case T:e:{for(var me=k.key;w!==null;){if(w.key===me){if(me=k.type,me===M){if(w.tag===7){r(D,w.sibling),J=m(w,k.props.children),J.return=D,D=J;break e}}else if(w.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===ae&&Qi(me)===w.type){r(D,w.sibling),J=m(w,k.props),Bo(J,k),J.return=D,D=J;break e}r(D,w);break}else o(D,w);w=w.sibling}k.type===M?(J=Fi(k.props.children,D.mode,J,k.key),J.return=D,D=J):(J=cr(k.type,k.key,k.props,null,D.mode,J),Bo(J,k),J.return=D,D=J)}return C(D);case b:e:{for(me=k.key;w!==null;){if(w.key===me)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){r(D,w.sibling),J=m(w,k.children||[]),J.return=D,D=J;break e}else{r(D,w);break}else o(D,w);w=w.sibling}J=qu(k,D.mode,J),J.return=D,D=J}return C(D);case ae:return k=Qi(k),Fe(D,w,k,J)}if(De(k))return re(D,w,k,J);if(Te(k)){if(me=Te(k),typeof me!="function")throw Error(s(150));return k=me.call(k),ge(D,w,k,J)}if(typeof k.then=="function")return Fe(D,w,yr(k),J);if(k.$$typeof===L)return Fe(D,w,hr(D,k),J);vr(D,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,w!==null&&w.tag===6?(r(D,w.sibling),J=m(w,k),J.return=D,D=J):(r(D,w),J=Vu(k,D.mode,J),J.return=D,D=J),C(D)):r(D,w)}return function(D,w,k,J){try{Go=0;var me=Fe(D,w,k,J);return ks=null,me}catch(de){if(de===Ds||de===mr)throw de;var Ue=Jt(29,de,null,D.mode);return Ue.lanes=J,Ue.return=D,Ue}finally{}}}var Xi=Pp(!0),Lp=Pp(!1),ui=!1;function ec(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function tc(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ci(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function di(i,o,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Oe&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=ur(i),_p(i,null,r),o}return ar(i,u,o,r),ur(i)}function Vo(i,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,Nh(i,r)}}function nc(i,o){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var C={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?m=y=C:y=y.next=C,r=r.next}while(r!==null);y===null?m=y=o:y=y.next=o}else m=y=o;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=o:i.next=o,r.lastBaseUpdate=o}var ic=!1;function qo(){if(ic){var i=Ms;if(i!==null)throw i}}function Fo(i,o,r,u){ic=!1;var m=i.updateQueue;ui=!1;var y=m.firstBaseUpdate,C=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var A=S,U=A.next;A.next=null,C===null?y=U:C.next=U,C=A;var F=i.alternate;F!==null&&(F=F.updateQueue,S=F.lastBaseUpdate,S!==C&&(S===null?F.firstBaseUpdate=U:S.next=U,F.lastBaseUpdate=A))}if(y!==null){var K=m.baseState;C=0,F=U=A=null,S=y;do{var P=S.lane&-536870913,V=P!==S.lane;if(V?(Ie&P)===P:(u&P)===P){P!==0&&P===Is&&(ic=!0),F!==null&&(F=F.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var re=i,ge=S;P=o;var Fe=r;switch(ge.tag){case 1:if(re=ge.payload,typeof re=="function"){K=re.call(Fe,K,P);break e}K=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ge.payload,P=typeof re=="function"?re.call(Fe,K,P):re,P==null)break e;K=x({},K,P);break e;case 2:ui=!0}}P=S.callback,P!==null&&(i.flags|=64,V&&(i.flags|=8192),V=m.callbacks,V===null?m.callbacks=[P]:V.push(P))}else V={lane:P,tag:S.tag,payload:S.payload,callback:S.callback,next:null},F===null?(U=F=V,A=K):F=F.next=V,C|=P;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;V=S,S=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(!0);F===null&&(A=K),m.baseState=A,m.firstBaseUpdate=U,m.lastBaseUpdate=F,y===null&&(m.shared.lanes=0),gi|=C,i.lanes=C,i.memoizedState=K}}function Op(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Hp(i,o){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Op(r[i],o)}var Us=N(null),_r=N(0);function Gp(i,o){i=Yn,O(_r,i),O(Us,o),Yn=i|o.baseLanes}function sc(){O(_r,Yn),O(Us,Us.current)}function oc(){Yn=_r.current,q(Us),q(_r)}var Kt=N(null),an=null;function fi(i){var o=i.alternate;O(st,st.current&1),O(Kt,i),an===null&&(o===null||Us.current!==null||o.memoizedState!==null)&&(an=i)}function lc(i){O(st,st.current),O(Kt,i),an===null&&(an=i)}function Bp(i){i.tag===22?(O(st,st.current),O(Kt,i),an===null&&(an=i)):hi()}function hi(){O(st,st.current),O(Kt,Kt.current)}function Qt(i){q(Kt),an===i&&(an=null),q(st)}var st=N(0);function xr(i){for(var o=i;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||fd(r)||hd(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var On=0,Ce=null,Ve=null,rt=null,Er=!1,Ps=!1,Wi=!1,Cr=0,zo=0,Ls=null,UC=0;function et(){throw Error(s(321))}function rc(i,o){if(o===null)return!1;for(var r=0;r<o.length&&r<i.length;r++)if(!Yt(i[r],o[r]))return!1;return!0}function ac(i,o,r,u,m,y){return On=y,Ce=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=i===null||i.memoizedState===null?Sm:Sc,Wi=!1,y=r(u,m),Wi=!1,Ps&&(y=qp(o,r,u,m)),Vp(i),y}function Vp(i){R.H=Ko;var o=Ve!==null&&Ve.next!==null;if(On=0,rt=Ve=Ce=null,Er=!1,zo=0,Ls=null,o)throw Error(s(300));i===null||at||(i=i.dependencies,i!==null&&fr(i)&&(at=!0))}function qp(i,o,r,u){Ce=i;var m=0;do{if(Ps&&(Ls=null),zo=0,Ps=!1,25<=m)throw Error(s(301));if(m+=1,rt=Ve=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}R.H=Tm,y=o(r,u)}while(Ps);return y}function PC(){var i=R.H,o=i.useState()[0];return o=typeof o.then=="function"?Yo(o):o,i=i.useState()[0],(Ve!==null?Ve.memoizedState:null)!==i&&(Ce.flags|=1024),o}function uc(){var i=Cr!==0;return Cr=0,i}function cc(i,o,r){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~r}function dc(i){if(Er){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Er=!1}On=0,rt=Ve=Ce=null,Ps=!1,zo=Cr=0,Ls=null}function Rt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Ce.memoizedState=rt=i:rt=rt.next=i,rt}function ot(){if(Ve===null){var i=Ce.alternate;i=i!==null?i.memoizedState:null}else i=Ve.next;var o=rt===null?Ce.memoizedState:rt.next;if(o!==null)rt=o,Ve=i;else{if(i===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Ve=i,i={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},rt===null?Ce.memoizedState=rt=i:rt=rt.next=i}return rt}function Sr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(i){var o=zo;return zo+=1,Ls===null&&(Ls=[]),i=Dp(Ls,i,o),o=Ce,(rt===null?o.memoizedState:rt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?Sm:Sc),i}function Tr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Yo(i);if(i.$$typeof===L)return Ct(i)}throw Error(s(438,String(i)))}function fc(i){var o=null,r=Ce.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Sr(),Ce.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(i),u=0;u<i;u++)r[u]=fe;return o.index++,r}function Hn(i,o){return typeof o=="function"?o(i):o}function br(i){var o=ot();return hc(o,Ve,i)}function hc(i,o,r){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var m=i.baseQueue,y=u.pending;if(y!==null){if(m!==null){var C=m.next;m.next=y.next,y.next=C}o.baseQueue=m=y,u.pending=null}if(y=i.baseState,m===null)i.memoizedState=y;else{o=m.next;var S=C=null,A=null,U=o,F=!1;do{var K=U.lane&-536870913;if(K!==U.lane?(Ie&K)===K:(On&K)===K){var P=U.revertLane;if(P===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),K===Is&&(F=!0);else if((On&P)===P){U=U.next,P===Is&&(F=!0);continue}else K={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},A===null?(S=A=K,C=y):A=A.next=K,Ce.lanes|=P,gi|=P;K=U.action,Wi&&r(y,K),y=U.hasEagerState?U.eagerState:r(y,K)}else P={lane:K,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},A===null?(S=A=P,C=y):A=A.next=P,Ce.lanes|=K,gi|=K;U=U.next}while(U!==null&&U!==o);if(A===null?C=y:A.next=S,!Yt(y,i.memoizedState)&&(at=!0,F&&(r=Ms,r!==null)))throw r;i.memoizedState=y,i.baseState=C,i.baseQueue=A,u.lastRenderedState=y}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function pc(i){var o=ot(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var u=r.dispatch,m=r.pending,y=o.memoizedState;if(m!==null){r.pending=null;var C=m=m.next;do y=i(y,C.action),C=C.next;while(C!==m);Yt(y,o.memoizedState)||(at=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),r.lastRenderedState=y}return[y,u]}function Fp(i,o,r){var u=Ce,m=ot(),y=ke;if(y){if(r===void 0)throw Error(s(407));r=r()}else r=o();var C=!Yt((Ve||m).memoizedState,r);if(C&&(m.memoizedState=r,at=!0),m=m.queue,yc(Jp.bind(null,u,m,i),[i]),m.getSnapshot!==o||C||rt!==null&&rt.memoizedState.tag&1){if(u.flags|=2048,Os(9,{destroy:void 0},Yp.bind(null,u,m,r,o),null),Ye===null)throw Error(s(349));y||(On&127)!==0||zp(u,o,r)}return r}function zp(i,o,r){i.flags|=16384,i={getSnapshot:o,value:r},o=Ce.updateQueue,o===null?(o=Sr(),Ce.updateQueue=o,o.stores=[i]):(r=o.stores,r===null?o.stores=[i]:r.push(i))}function Yp(i,o,r,u){o.value=r,o.getSnapshot=u,Kp(o)&&Qp(i)}function Jp(i,o,r){return r(function(){Kp(o)&&Qp(i)})}function Kp(i){var o=i.getSnapshot;i=i.value;try{var r=o();return!Yt(i,r)}catch{return!0}}function Qp(i){var o=qi(i,2);o!==null&&Gt(o,i,2)}function mc(i){var o=Rt();if(typeof i=="function"){var r=i;if(i=r(),Wi){ni(!0);try{r()}finally{ni(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:i},o}function $p(i,o,r,u){return i.baseState=r,hc(i,Ve,typeof u=="function"?u:Hn)}function LC(i,o,r,u,m){if(wr(i))throw Error(s(485));if(i=o.action,i!==null){var y={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){y.listeners.push(C)}};R.T!==null?r(!0):y.isTransition=!1,u(y),r=o.pending,r===null?(y.next=o.pending=y,Xp(o,y)):(y.next=r.next,o.pending=r.next=y)}}function Xp(i,o){var r=o.action,u=o.payload,m=i.state;if(o.isTransition){var y=R.T,C={};R.T=C;try{var S=r(m,u),A=R.S;A!==null&&A(C,S),Wp(i,o,S)}catch(U){gc(i,o,U)}finally{y!==null&&C.types!==null&&(y.types=C.types),R.T=y}}else try{y=r(m,u),Wp(i,o,y)}catch(U){gc(i,o,U)}}function Wp(i,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Zp(i,o,u)},function(u){return gc(i,o,u)}):Zp(i,o,r)}function Zp(i,o,r){o.status="fulfilled",o.value=r,jp(o),i.state=r,o=i.pending,o!==null&&(r=o.next,r===o?i.pending=null:(r=r.next,o.next=r,Xp(i,r)))}function gc(i,o,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,jp(o),o=o.next;while(o!==u)}i.action=null}function jp(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function em(i,o){return o}function tm(i,o){if(ke){var r=Ye.formState;if(r!==null){e:{var u=Ce;if(ke){if(Xe){t:{for(var m=Xe,y=rn;m.nodeType!==8;){if(!y){m=null;break t}if(m=un(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){Xe=un(m.nextSibling),u=m.data==="F!";break e}}ri(u)}u=!1}u&&(o=r[0])}}return r=Rt(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:o},r.queue=u,r=xm.bind(null,Ce,u),u.dispatch=r,u=mc(!1),y=Cc.bind(null,Ce,!1,u.queue),u=Rt(),m={state:o,dispatch:null,action:i,pending:null},u.queue=m,r=LC.bind(null,Ce,m,y,r),m.dispatch=r,u.memoizedState=i,[o,r,!1]}function nm(i){var o=ot();return im(o,Ve,i)}function im(i,o,r){if(o=hc(i,o,em)[0],i=br(Hn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Yo(o)}catch(C){throw C===Ds?mr:C}else u=o;o=ot();var m=o.queue,y=m.dispatch;return r!==o.memoizedState&&(Ce.flags|=2048,Os(9,{destroy:void 0},OC.bind(null,m,r),null)),[u,y,i]}function OC(i,o){i.action=o}function sm(i){var o=ot(),r=Ve;if(r!==null)return im(o,r,i);ot(),o=o.memoizedState,r=ot();var u=r.queue.dispatch;return r.memoizedState=i,[o,u,!1]}function Os(i,o,r,u){return i={tag:i,create:r,deps:u,inst:o,next:null},o=Ce.updateQueue,o===null&&(o=Sr(),Ce.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,o.lastEffect=i),i}function om(){return ot().memoizedState}function Ar(i,o,r,u){var m=Rt();Ce.flags|=i,m.memoizedState=Os(1|o,{destroy:void 0},r,u===void 0?null:u)}function Nr(i,o,r,u){var m=ot();u=u===void 0?null:u;var y=m.memoizedState.inst;Ve!==null&&u!==null&&rc(u,Ve.memoizedState.deps)?m.memoizedState=Os(o,y,r,u):(Ce.flags|=i,m.memoizedState=Os(1|o,y,r,u))}function lm(i,o){Ar(8390656,8,i,o)}function yc(i,o){Nr(2048,8,i,o)}function HC(i){Ce.flags|=4;var o=Ce.updateQueue;if(o===null)o=Sr(),Ce.updateQueue=o,o.events=[i];else{var r=o.events;r===null?o.events=[i]:r.push(i)}}function rm(i){var o=ot().memoizedState;return HC({ref:o,nextImpl:i}),function(){if((Oe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function am(i,o){return Nr(4,2,i,o)}function um(i,o){return Nr(4,4,i,o)}function cm(i,o){if(typeof o=="function"){i=i();var r=o(i);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function dm(i,o,r){r=r!=null?r.concat([i]):null,Nr(4,4,cm.bind(null,o,i),r)}function vc(){}function fm(i,o){var r=ot();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&rc(o,u[1])?u[0]:(r.memoizedState=[i,o],i)}function hm(i,o){var r=ot();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&rc(o,u[1]))return u[0];if(u=i(),Wi){ni(!0);try{i()}finally{ni(!1)}}return r.memoizedState=[u,o],u}function _c(i,o,r){return r===void 0||(On&1073741824)!==0&&(Ie&261930)===0?i.memoizedState=o:(i.memoizedState=r,i=pg(),Ce.lanes|=i,gi|=i,r)}function pm(i,o,r,u){return Yt(r,o)?r:Us.current!==null?(i=_c(i,r,u),Yt(i,o)||(at=!0),i):(On&42)===0||(On&1073741824)!==0&&(Ie&261930)===0?(at=!0,i.memoizedState=r):(i=pg(),Ce.lanes|=i,gi|=i,o)}function mm(i,o,r,u,m){var y=B.p;B.p=y!==0&&8>y?y:8;var C=R.T,S={};R.T=S,Cc(i,!1,o,r);try{var A=m(),U=R.S;if(U!==null&&U(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var F=kC(A,u);Jo(i,o,F,Wt(i))}else Jo(i,o,u,Wt(i))}catch(K){Jo(i,o,{then:function(){},status:"rejected",reason:K},Wt())}finally{B.p=y,C!==null&&S.types!==null&&(C.types=S.types),R.T=C}}function GC(){}function xc(i,o,r,u){if(i.tag!==5)throw Error(s(476));var m=gm(i).queue;mm(i,m,o,Z,r===null?GC:function(){return ym(i),r(u)})}function gm(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:Z},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:r},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function ym(i){var o=gm(i);o.next===null&&(o=i.alternate.memoizedState),Jo(i,o.next.queue,{},Wt())}function Ec(){return Ct(ul)}function vm(){return ot().memoizedState}function _m(){return ot().memoizedState}function BC(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var r=Wt();i=ci(r);var u=di(o,i,r);u!==null&&(Gt(u,o,r),Vo(u,o,r)),o={cache:Xu()},i.payload=o;return}o=o.return}}function VC(i,o,r){var u=Wt();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},wr(i)?Em(o,r):(r=Gu(i,o,r,u),r!==null&&(Gt(r,i,u),Cm(r,o,u)))}function xm(i,o,r){var u=Wt();Jo(i,o,r,u)}function Jo(i,o,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(wr(i))Em(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var C=o.lastRenderedState,S=y(C,r);if(m.hasEagerState=!0,m.eagerState=S,Yt(S,C))return ar(i,o,m,0),Ye===null&&rr(),!1}catch{}finally{}if(r=Gu(i,o,m,u),r!==null)return Gt(r,i,u),Cm(r,o,u),!0}return!1}function Cc(i,o,r,u){if(u={lane:2,revertLane:ed(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wr(i)){if(o)throw Error(s(479))}else o=Gu(i,r,u,2),o!==null&&Gt(o,i,2)}function wr(i){var o=i.alternate;return i===Ce||o!==null&&o===Ce}function Em(i,o){Ps=Er=!0;var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}function Cm(i,o,r){if((r&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,Nh(i,r)}}var Ko={readContext:Ct,use:Tr,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Ko.useEffectEvent=et;var Sm={readContext:Ct,use:Tr,useCallback:function(i,o){return Rt().memoizedState=[i,o===void 0?null:o],i},useContext:Ct,useEffect:lm,useImperativeHandle:function(i,o,r){r=r!=null?r.concat([i]):null,Ar(4194308,4,cm.bind(null,o,i),r)},useLayoutEffect:function(i,o){return Ar(4194308,4,i,o)},useInsertionEffect:function(i,o){Ar(4,2,i,o)},useMemo:function(i,o){var r=Rt();o=o===void 0?null:o;var u=i();if(Wi){ni(!0);try{i()}finally{ni(!1)}}return r.memoizedState=[u,o],u},useReducer:function(i,o,r){var u=Rt();if(r!==void 0){var m=r(o);if(Wi){ni(!0);try{r(o)}finally{ni(!1)}}}else m=o;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=VC.bind(null,Ce,i),[u.memoizedState,i]},useRef:function(i){var o=Rt();return i={current:i},o.memoizedState=i},useState:function(i){i=mc(i);var o=i.queue,r=xm.bind(null,Ce,o);return o.dispatch=r,[i.memoizedState,r]},useDebugValue:vc,useDeferredValue:function(i,o){var r=Rt();return _c(r,i,o)},useTransition:function(){var i=mc(!1);return i=mm.bind(null,Ce,i.queue,!0,!1),Rt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,r){var u=Ce,m=Rt();if(ke){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),Ye===null)throw Error(s(349));(Ie&127)!==0||zp(u,o,r)}m.memoizedState=r;var y={value:r,getSnapshot:o};return m.queue=y,lm(Jp.bind(null,u,y,i),[i]),u.flags|=2048,Os(9,{destroy:void 0},Yp.bind(null,u,y,r,o),null),r},useId:function(){var i=Rt(),o=Ye.identifierPrefix;if(ke){var r=An,u=bn;r=(u&~(1<<32-zt(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=Cr++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=UC++,o="_"+o+"r_"+r.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Ec,useFormState:tm,useActionState:tm,useOptimistic:function(i){var o=Rt();o.memoizedState=o.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=Cc.bind(null,Ce,!0,r),r.dispatch=o,[i,o]},useMemoCache:fc,useCacheRefresh:function(){return Rt().memoizedState=BC.bind(null,Ce)},useEffectEvent:function(i){var o=Rt(),r={impl:i};return o.memoizedState=r,function(){if((Oe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Sc={readContext:Ct,use:Tr,useCallback:fm,useContext:Ct,useEffect:yc,useImperativeHandle:dm,useInsertionEffect:am,useLayoutEffect:um,useMemo:hm,useReducer:br,useRef:om,useState:function(){return br(Hn)},useDebugValue:vc,useDeferredValue:function(i,o){var r=ot();return pm(r,Ve.memoizedState,i,o)},useTransition:function(){var i=br(Hn)[0],o=ot().memoizedState;return[typeof i=="boolean"?i:Yo(i),o]},useSyncExternalStore:Fp,useId:vm,useHostTransitionStatus:Ec,useFormState:nm,useActionState:nm,useOptimistic:function(i,o){var r=ot();return $p(r,Ve,i,o)},useMemoCache:fc,useCacheRefresh:_m};Sc.useEffectEvent=rm;var Tm={readContext:Ct,use:Tr,useCallback:fm,useContext:Ct,useEffect:yc,useImperativeHandle:dm,useInsertionEffect:am,useLayoutEffect:um,useMemo:hm,useReducer:pc,useRef:om,useState:function(){return pc(Hn)},useDebugValue:vc,useDeferredValue:function(i,o){var r=ot();return Ve===null?_c(r,i,o):pm(r,Ve.memoizedState,i,o)},useTransition:function(){var i=pc(Hn)[0],o=ot().memoizedState;return[typeof i=="boolean"?i:Yo(i),o]},useSyncExternalStore:Fp,useId:vm,useHostTransitionStatus:Ec,useFormState:sm,useActionState:sm,useOptimistic:function(i,o){var r=ot();return Ve!==null?$p(r,Ve,i,o):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:fc,useCacheRefresh:_m};Tm.useEffectEvent=rm;function Tc(i,o,r,u){o=i.memoizedState,r=r(u,o),r=r==null?o:x({},o,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var bc={enqueueSetState:function(i,o,r){i=i._reactInternals;var u=Wt(),m=ci(u);m.payload=o,r!=null&&(m.callback=r),o=di(i,m,u),o!==null&&(Gt(o,i,u),Vo(o,i,u))},enqueueReplaceState:function(i,o,r){i=i._reactInternals;var u=Wt(),m=ci(u);m.tag=1,m.payload=o,r!=null&&(m.callback=r),o=di(i,m,u),o!==null&&(Gt(o,i,u),Vo(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var r=Wt(),u=ci(r);u.tag=2,o!=null&&(u.callback=o),o=di(i,u,r),o!==null&&(Gt(o,i,r),Vo(o,i,r))}};function bm(i,o,r,u,m,y,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,C):o.prototype&&o.prototype.isPureReactComponent?!ko(r,u)||!ko(m,y):!0}function Am(i,o,r,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==i&&bc.enqueueReplaceState(o,o.state,null)}function Zi(i,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(i=i.defaultProps){r===o&&(r=x({},r));for(var m in i)r[m]===void 0&&(r[m]=i[m])}return r}function Nm(i){lr(i)}function wm(i){console.error(i)}function Rm(i){lr(i)}function Rr(i,o){try{var r=i.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Im(i,o,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Ac(i,o,r){return r=ci(r),r.tag=3,r.payload={element:null},r.callback=function(){Rr(i,o)},r}function Mm(i){return i=ci(i),i.tag=3,i}function Dm(i,o,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;i.payload=function(){return m(y)},i.callback=function(){Im(o,r,u)}}var C=r.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){Im(o,r,u),typeof m!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function qC(i,o,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&Rs(o,r,m,!0),r=Kt.current,r!==null){switch(r.tag){case 31:case 13:return an===null?Vr():r.alternate===null&&tt===0&&(tt=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===gr?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),Wc(i,u,m)),!1;case 22:return r.flags|=65536,u===gr?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),Wc(i,u,m)),!1}throw Error(s(435,r.tag))}return Wc(i,u,m),Vr(),!1}if(ke)return o=Kt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==Yu&&(i=Error(s(422),{cause:u}),Lo(sn(i,r)))):(u!==Yu&&(o=Error(s(423),{cause:u}),Lo(sn(o,r))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=sn(u,r),m=Ac(i.stateNode,u,m),nc(i,m),tt!==4&&(tt=2)),!1;var y=Error(s(520),{cause:u});if(y=sn(y,r),tl===null?tl=[y]:tl.push(y),tt!==4&&(tt=2),o===null)return!0;u=sn(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,i=m&-m,r.lanes|=i,i=Ac(r.stateNode,u,i),nc(r,i),!1;case 1:if(o=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(yi===null||!yi.has(y))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Mm(m),Dm(m,i,r,u),nc(r,m),!1}r=r.return}while(r!==null);return!1}var Nc=Error(s(461)),at=!1;function St(i,o,r,u){o.child=i===null?Lp(o,null,r,u):Xi(o,i.child,r,u)}function km(i,o,r,u,m){r=r.render;var y=o.ref;if("ref"in u){var C={};for(var S in u)S!=="ref"&&(C[S]=u[S])}else C=u;return Ji(o),u=ac(i,o,r,C,y,m),S=uc(),i!==null&&!at?(cc(i,o,m),Gn(i,o,m)):(ke&&S&&Fu(o),o.flags|=1,St(i,o,u,m),o.child)}function Um(i,o,r,u,m){if(i===null){var y=r.type;return typeof y=="function"&&!Bu(y)&&y.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=y,Pm(i,o,y,u,m)):(i=cr(r.type,null,u,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,!Pc(i,m)){var C=y.memoizedProps;if(r=r.compare,r=r!==null?r:ko,r(C,u)&&i.ref===o.ref)return Gn(i,o,m)}return o.flags|=1,i=kn(y,u),i.ref=o.ref,i.return=o,o.child=i}function Pm(i,o,r,u,m){if(i!==null){var y=i.memoizedProps;if(ko(y,u)&&i.ref===o.ref)if(at=!1,o.pendingProps=u=y,Pc(i,m))(i.flags&131072)!==0&&(at=!0);else return o.lanes=i.lanes,Gn(i,o,m)}return wc(i,o,r,u,m)}function Lm(i,o,r,u){var m=u.children,y=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,i!==null){for(u=o.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,o.child=null;return Om(i,o,y,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&pr(o,y!==null?y.cachePool:null),y!==null?Gp(o,y):sc(),Bp(o);else return u=o.lanes=536870912,Om(i,o,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(pr(o,y.cachePool),Gp(o,y),hi(),o.memoizedState=null):(i!==null&&pr(o,null),sc(),hi());return St(i,o,m,r),o.child}function Qo(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Om(i,o,r,u,m){var y=Zu();return y=y===null?null:{parent:lt._currentValue,pool:y},o.memoizedState={baseLanes:r,cachePool:y},i!==null&&pr(o,null),sc(),Bp(o),i!==null&&Rs(i,o,u,!0),o.childLanes=m,null}function Ir(i,o){return o=Dr({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Hm(i,o,r){return Xi(o,i.child,null,r),i=Ir(o,o.pendingProps),i.flags|=2,Qt(o),o.memoizedState=null,i}function FC(i,o,r){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(ke){if(u.mode==="hidden")return i=Ir(o,u),o.lanes=536870912,Qo(null,i);if(lc(o),(i=Xe)?(i=Xg(i,rn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:oi!==null?{id:bn,overflow:An}:null,retryLane:536870912,hydrationErrors:null},r=Ep(i),r.return=o,o.child=r,Et=o,Xe=null)):i=null,i===null)throw ri(o);return o.lanes=536870912,null}return Ir(o,u)}var y=i.memoizedState;if(y!==null){var C=y.dehydrated;if(lc(o),m)if(o.flags&256)o.flags&=-257,o=Hm(i,o,r);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(at||Rs(i,o,r,!1),m=(r&i.childLanes)!==0,at||m){if(u=Ye,u!==null&&(C=wh(u,r),C!==0&&C!==y.retryLane))throw y.retryLane=C,qi(i,C),Gt(u,i,C),Nc;Vr(),o=Hm(i,o,r)}else i=y.treeContext,Xe=un(C.nextSibling),Et=o,ke=!0,li=null,rn=!1,i!==null&&Tp(o,i),o=Ir(o,u),o.flags|=4096;return o}return i=kn(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Mr(i,o){var r=o.ref;if(r===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(i===null||i.ref!==r)&&(o.flags|=4194816)}}function wc(i,o,r,u,m){return Ji(o),r=ac(i,o,r,u,void 0,m),u=uc(),i!==null&&!at?(cc(i,o,m),Gn(i,o,m)):(ke&&u&&Fu(o),o.flags|=1,St(i,o,r,m),o.child)}function Gm(i,o,r,u,m,y){return Ji(o),o.updateQueue=null,r=qp(o,u,r,m),Vp(i),u=uc(),i!==null&&!at?(cc(i,o,y),Gn(i,o,y)):(ke&&u&&Fu(o),o.flags|=1,St(i,o,r,y),o.child)}function Bm(i,o,r,u,m){if(Ji(o),o.stateNode===null){var y=bs,C=r.contextType;typeof C=="object"&&C!==null&&(y=Ct(C)),y=new r(u,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=bc,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=u,y.state=o.memoizedState,y.refs={},ec(o),C=r.contextType,y.context=typeof C=="object"&&C!==null?Ct(C):bs,y.state=o.memoizedState,C=r.getDerivedStateFromProps,typeof C=="function"&&(Tc(o,r,C,u),y.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(C=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),C!==y.state&&bc.enqueueReplaceState(y,y.state,null),Fo(o,u,y,m),qo(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){y=o.stateNode;var S=o.memoizedProps,A=Zi(r,S);y.props=A;var U=y.context,F=r.contextType;C=bs,typeof F=="object"&&F!==null&&(C=Ct(F));var K=r.getDerivedStateFromProps;F=typeof K=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=o.pendingProps!==S,F||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||U!==C)&&Am(o,y,u,C),ui=!1;var P=o.memoizedState;y.state=P,Fo(o,u,y,m),qo(),U=o.memoizedState,S||P!==U||ui?(typeof K=="function"&&(Tc(o,r,K,u),U=o.memoizedState),(A=ui||bm(o,r,A,u,P,U,C))?(F||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=U),y.props=u,y.state=U,y.context=C,u=A):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{y=o.stateNode,tc(i,o),C=o.memoizedProps,F=Zi(r,C),y.props=F,K=o.pendingProps,P=y.context,U=r.contextType,A=bs,typeof U=="object"&&U!==null&&(A=Ct(U)),S=r.getDerivedStateFromProps,(U=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==K||P!==A)&&Am(o,y,u,A),ui=!1,P=o.memoizedState,y.state=P,Fo(o,u,y,m),qo();var V=o.memoizedState;C!==K||P!==V||ui||i!==null&&i.dependencies!==null&&fr(i.dependencies)?(typeof S=="function"&&(Tc(o,r,S,u),V=o.memoizedState),(F=ui||bm(o,r,F,u,P,V,A)||i!==null&&i.dependencies!==null&&fr(i.dependencies))?(U||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,V,A),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,V,A)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=V),y.props=u,y.state=V,y.context=A,u=F):(typeof y.componentDidUpdate!="function"||C===i.memoizedProps&&P===i.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&P===i.memoizedState||(o.flags|=1024),u=!1)}return y=u,Mr(i,o),u=(o.flags&128)!==0,y||u?(y=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,i!==null&&u?(o.child=Xi(o,i.child,null,m),o.child=Xi(o,null,r,m)):St(i,o,r,m),o.memoizedState=y.state,i=o.child):i=Gn(i,o,m),i}function Vm(i,o,r,u){return zi(),o.flags|=256,St(i,o,r,u),o.child}var Rc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ic(i){return{baseLanes:i,cachePool:Ip()}}function Mc(i,o,r){return i=i!==null?i.childLanes&~r:0,o&&(i|=Xt),i}function qm(i,o,r){var u=o.pendingProps,m=!1,y=(o.flags&128)!==0,C;if((C=y)||(C=i!==null&&i.memoizedState===null?!1:(st.current&2)!==0),C&&(m=!0,o.flags&=-129),C=(o.flags&32)!==0,o.flags&=-33,i===null){if(ke){if(m?fi(o):hi(),(i=Xe)?(i=Xg(i,rn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:oi!==null?{id:bn,overflow:An}:null,retryLane:536870912,hydrationErrors:null},r=Ep(i),r.return=o,o.child=r,Et=o,Xe=null)):i=null,i===null)throw ri(o);return hd(i)?o.lanes=32:o.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(hi(),m=o.mode,S=Dr({mode:"hidden",children:S},m),u=Fi(u,m,r,null),S.return=o,u.return=o,S.sibling=u,o.child=S,u=o.child,u.memoizedState=Ic(r),u.childLanes=Mc(i,C,r),o.memoizedState=Rc,Qo(null,u)):(fi(o),Dc(o,S))}var A=i.memoizedState;if(A!==null&&(S=A.dehydrated,S!==null)){if(y)o.flags&256?(fi(o),o.flags&=-257,o=kc(i,o,r)):o.memoizedState!==null?(hi(),o.child=i.child,o.flags|=128,o=null):(hi(),S=u.fallback,m=o.mode,u=Dr({mode:"visible",children:u.children},m),S=Fi(S,m,r,null),S.flags|=2,u.return=o,S.return=o,u.sibling=S,o.child=u,Xi(o,i.child,null,r),u=o.child,u.memoizedState=Ic(r),u.childLanes=Mc(i,C,r),o.memoizedState=Rc,o=Qo(null,u));else if(fi(o),hd(S)){if(C=S.nextSibling&&S.nextSibling.dataset,C)var U=C.dgst;C=U,u=Error(s(419)),u.stack="",u.digest=C,Lo({value:u,source:null,stack:null}),o=kc(i,o,r)}else if(at||Rs(i,o,r,!1),C=(r&i.childLanes)!==0,at||C){if(C=Ye,C!==null&&(u=wh(C,r),u!==0&&u!==A.retryLane))throw A.retryLane=u,qi(i,u),Gt(C,i,u),Nc;fd(S)||Vr(),o=kc(i,o,r)}else fd(S)?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,Xe=un(S.nextSibling),Et=o,ke=!0,li=null,rn=!1,i!==null&&Tp(o,i),o=Dc(o,u.children),o.flags|=4096);return o}return m?(hi(),S=u.fallback,m=o.mode,A=i.child,U=A.sibling,u=kn(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,U!==null?S=kn(U,S):(S=Fi(S,m,r,null),S.flags|=2),S.return=o,u.return=o,u.sibling=S,o.child=u,Qo(null,u),u=o.child,S=i.child.memoizedState,S===null?S=Ic(r):(m=S.cachePool,m!==null?(A=lt._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Ip(),S={baseLanes:S.baseLanes|r,cachePool:m}),u.memoizedState=S,u.childLanes=Mc(i,C,r),o.memoizedState=Rc,Qo(i.child,u)):(fi(o),r=i.child,i=r.sibling,r=kn(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,i!==null&&(C=o.deletions,C===null?(o.deletions=[i],o.flags|=16):C.push(i)),o.child=r,o.memoizedState=null,r)}function Dc(i,o){return o=Dr({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Dr(i,o){return i=Jt(22,i,null,o),i.lanes=0,i}function kc(i,o,r){return Xi(o,i.child,null,r),i=Dc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Fm(i,o,r){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),Qu(i.return,o,r)}function Uc(i,o,r,u,m,y){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:y}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=u,C.tail=r,C.tailMode=m,C.treeForkCount=y)}function zm(i,o,r){var u=o.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var C=st.current,S=(C&2)!==0;if(S?(C=C&1|2,o.flags|=128):C&=1,O(st,C),St(i,o,u,r),u=ke?Po:0,!S&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fm(i,r,o);else if(i.tag===19)Fm(i,r,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(r=o.child,m=null;r!==null;)i=r.alternate,i!==null&&xr(i)===null&&(m=r),r=r.sibling;r=m,r===null?(m=o.child,o.child=null):(m=r.sibling,r.sibling=null),Uc(o,!1,m,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&xr(i)===null){o.child=m;break}i=m.sibling,m.sibling=r,r=m,m=i}Uc(o,!0,r,null,y,u);break;case"together":Uc(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Gn(i,o,r){if(i!==null&&(o.dependencies=i.dependencies),gi|=o.lanes,(r&o.childLanes)===0)if(i!==null){if(Rs(i,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,r=kn(i,i.pendingProps),o.child=r,r.return=o;i.sibling!==null;)i=i.sibling,r=r.sibling=kn(i,i.pendingProps),r.return=o;r.sibling=null}return o.child}function Pc(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&fr(i)))}function zC(i,o,r){switch(o.tag){case 3:he(o,o.stateNode.containerInfo),ai(o,lt,i.memoizedState.cache),zi();break;case 27:case 5:ve(o);break;case 4:he(o,o.stateNode.containerInfo);break;case 10:ai(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,lc(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(fi(o),o.flags|=128,null):(r&o.child.childLanes)!==0?qm(i,o,r):(fi(o),i=Gn(i,o,r),i!==null?i.sibling:null);fi(o);break;case 19:var m=(i.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(Rs(i,o,r,!1),u=(r&o.childLanes)!==0),m){if(u)return zm(i,o,r);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),O(st,st.current),u)break;return null;case 22:return o.lanes=0,Lm(i,o,r,o.pendingProps);case 24:ai(o,lt,i.memoizedState.cache)}return Gn(i,o,r)}function Ym(i,o,r){if(i!==null)if(i.memoizedProps!==o.pendingProps)at=!0;else{if(!Pc(i,r)&&(o.flags&128)===0)return at=!1,zC(i,o,r);at=(i.flags&131072)!==0}else at=!1,ke&&(o.flags&1048576)!==0&&Sp(o,Po,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=Qi(o.elementType),o.type=i,typeof i=="function")Bu(i)?(u=Zi(i,u),o.tag=1,o=Bm(null,o,i,u,r)):(o.tag=0,o=wc(null,o,i,u,r));else{if(i!=null){var m=i.$$typeof;if(m===H){o.tag=11,o=km(null,o,i,u,r);break e}else if(m===W){o.tag=14,o=Um(null,o,i,u,r);break e}}throw o=oe(i)||i,Error(s(306,o,""))}}return o;case 0:return wc(i,o,o.type,o.pendingProps,r);case 1:return u=o.type,m=Zi(u,o.pendingProps),Bm(i,o,u,m,r);case 3:e:{if(he(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var y=o.memoizedState;m=y.element,tc(i,o),Fo(o,u,null,r);var C=o.memoizedState;if(u=C.cache,ai(o,lt,u),u!==y.cache&&$u(o,[lt],r,!0),qo(),u=C.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:C.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=Vm(i,o,u,r);break e}else if(u!==m){m=sn(Error(s(424)),o),Lo(m),o=Vm(i,o,u,r);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Xe=un(i.firstChild),Et=o,ke=!0,li=null,rn=!0,r=Lp(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(zi(),u===m){o=Gn(i,o,r);break e}St(i,o,u,r)}o=o.child}return o;case 26:return Mr(i,o),i===null?(r=ny(o.type,null,o.pendingProps,null))?o.memoizedState=r:ke||(r=o.type,i=o.pendingProps,u=Qr(pe.current).createElement(r),u[xt]=o,u[kt]=i,Tt(u,r,i),ft(u),o.stateNode=u):o.memoizedState=ny(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return ve(o),i===null&&ke&&(u=o.stateNode=jg(o.type,o.pendingProps,pe.current),Et=o,rn=!0,m=Xe,Ei(o.type)?(pd=m,Xe=un(u.firstChild)):Xe=m),St(i,o,o.pendingProps.children,r),Mr(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ke&&((m=u=Xe)&&(u=xS(u,o.type,o.pendingProps,rn),u!==null?(o.stateNode=u,Et=o,Xe=un(u.firstChild),rn=!1,m=!0):m=!1),m||ri(o)),ve(o),m=o.type,y=o.pendingProps,C=i!==null?i.memoizedProps:null,u=y.children,ud(m,y)?u=null:C!==null&&ud(m,C)&&(o.flags|=32),o.memoizedState!==null&&(m=ac(i,o,PC,null,null,r),ul._currentValue=m),Mr(i,o),St(i,o,u,r),o.child;case 6:return i===null&&ke&&((i=r=Xe)&&(r=ES(r,o.pendingProps,rn),r!==null?(o.stateNode=r,Et=o,Xe=null,i=!0):i=!1),i||ri(o)),null;case 13:return qm(i,o,r);case 4:return he(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=Xi(o,null,u,r):St(i,o,u,r),o.child;case 11:return km(i,o,o.type,o.pendingProps,r);case 7:return St(i,o,o.pendingProps,r),o.child;case 8:return St(i,o,o.pendingProps.children,r),o.child;case 12:return St(i,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,ai(o,o.type,u.value),St(i,o,u.children,r),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,Ji(o),m=Ct(m),u=u(m),o.flags|=1,St(i,o,u,r),o.child;case 14:return Um(i,o,o.type,o.pendingProps,r);case 15:return Pm(i,o,o.type,o.pendingProps,r);case 19:return zm(i,o,r);case 31:return FC(i,o,r);case 22:return Lm(i,o,r,o.pendingProps);case 24:return Ji(o),u=Ct(lt),i===null?(m=Zu(),m===null&&(m=Ye,y=Xu(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=r),m=y),o.memoizedState={parent:u,cache:m},ec(o),ai(o,lt,m)):((i.lanes&r)!==0&&(tc(i,o),Fo(o,null,null,r),qo()),m=i.memoizedState,y=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),ai(o,lt,u)):(u=y.cache,ai(o,lt,u),u!==m.cache&&$u(o,[lt],r,!0))),St(i,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Bn(i){i.flags|=4}function Lc(i,o,r,u,m){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(vg())i.flags|=8192;else throw $i=gr,ju}else i.flags&=-16777217}function Jm(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ry(o))if(vg())i.flags|=8192;else throw $i=gr,ju}function kr(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?bh():536870912,i.lanes|=o,Vs|=o)}function $o(i,o){if(!ke)switch(i.tailMode){case"hidden":o=i.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function We(i){var o=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(o)for(var m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=r,o}function YC(i,o,r){var u=o.pendingProps;switch(zu(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(o),null;case 1:return We(o),null;case 3:return r=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ln(lt),le(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(ws(o)?Bn(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ju())),We(o),null;case 26:var m=o.type,y=o.memoizedState;return i===null?(Bn(o),y!==null?(We(o),Jm(o,y)):(We(o),Lc(o,m,null,u,r))):y?y!==i.memoizedState?(Bn(o),We(o),Jm(o,y)):(We(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&Bn(o),We(o),Lc(o,m,i,u,r)),null;case 27:if(Ze(o),r=pe.current,m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Bn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return We(o),null}i=Q.current,ws(o)?bp(o):(i=jg(m,u,r),o.stateNode=i,Bn(o))}return We(o),null;case 5:if(Ze(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&Bn(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return We(o),null}if(y=Q.current,ws(o))bp(o);else{var C=Qr(pe.current);switch(y){case 1:y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=C.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=C.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=C.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?C.createElement("select",{is:u.is}):C.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?C.createElement(m,{is:u.is}):C.createElement(m)}}y[xt]=o,y[kt]=u;e:for(C=o.child;C!==null;){if(C.tag===5||C.tag===6)y.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===o)break e;for(;C.sibling===null;){if(C.return===null||C.return===o)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}o.stateNode=y;e:switch(Tt(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Bn(o)}}return We(o),Lc(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,r),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&Bn(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=pe.current,ws(o)){if(i=o.stateNode,r=o.memoizedProps,u=null,m=Et,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[xt]=o,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||qg(i.nodeValue,r)),i||ri(o,!0)}else i=Qr(i).createTextNode(u),i[xt]=o,o.stateNode=i}return We(o),null;case 31:if(r=o.memoizedState,i===null||i.memoizedState!==null){if(u=ws(o),r!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[xt]=o}else zi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;We(o),i=!1}else r=Ju(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return o.flags&256?(Qt(o),o):(Qt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return We(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=ws(o),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[xt]=o}else zi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;We(o),m=!1}else m=Ju(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Qt(o),o):(Qt(o),null)}return Qt(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),r!==i&&r&&(o.child.flags|=8192),kr(o,o.updateQueue),We(o),null);case 4:return le(),i===null&&sd(o.stateNode.containerInfo),We(o),null;case 10:return Ln(o.type),We(o),null;case 19:if(q(st),u=o.memoizedState,u===null)return We(o),null;if(m=(o.flags&128)!==0,y=u.rendering,y===null)if(m)$o(u,!1);else{if(tt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(y=xr(i),y!==null){for(o.flags|=128,$o(u,!1),i=y.updateQueue,o.updateQueue=i,kr(o,i),o.subtreeFlags=0,i=r,r=o.child;r!==null;)xp(r,i),r=r.sibling;return O(st,st.current&1|2),ke&&Un(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&qt()>Hr&&(o.flags|=128,m=!0,$o(u,!1),o.lanes=4194304)}else{if(!m)if(i=xr(y),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,kr(o,i),$o(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!ke)return We(o),null}else 2*qt()-u.renderingStartTime>Hr&&r!==536870912&&(o.flags|=128,m=!0,$o(u,!1),o.lanes=4194304);u.isBackwards?(y.sibling=o.child,o.child=y):(i=u.last,i!==null?i.sibling=y:o.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=qt(),i.sibling=null,r=st.current,O(st,m?r&1|2:r&1),ke&&Un(o,u.treeForkCount),i):(We(o),null);case 22:case 23:return Qt(o),oc(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(We(o),o.subtreeFlags&6&&(o.flags|=8192)):We(o),r=o.updateQueue,r!==null&&kr(o,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),i!==null&&q(Ki),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),Ln(lt),We(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function JC(i,o){switch(zu(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ln(lt),le(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ze(o),null;case 31:if(o.memoizedState!==null){if(Qt(o),o.alternate===null)throw Error(s(340));zi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(Qt(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));zi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return q(st),null;case 4:return le(),null;case 10:return Ln(o.type),null;case 22:case 23:return Qt(o),oc(),i!==null&&q(Ki),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ln(lt),null;case 25:return null;default:return null}}function Km(i,o){switch(zu(o),o.tag){case 3:Ln(lt),le();break;case 26:case 27:case 5:Ze(o);break;case 4:le();break;case 31:o.memoizedState!==null&&Qt(o);break;case 13:Qt(o);break;case 19:q(st);break;case 10:Ln(o.type);break;case 22:case 23:Qt(o),oc(),i!==null&&q(Ki);break;case 24:Ln(lt)}}function Xo(i,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&i)===i){u=void 0;var y=r.create,C=r.inst;u=y(),C.destroy=u}r=r.next}while(r!==m)}}catch(S){Be(o,o.return,S)}}function pi(i,o,r){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&i)===i){var C=u.inst,S=C.destroy;if(S!==void 0){C.destroy=void 0,m=o;var A=r,U=S;try{U()}catch(F){Be(m,A,F)}}}u=u.next}while(u!==y)}}catch(F){Be(o,o.return,F)}}function Qm(i){var o=i.updateQueue;if(o!==null){var r=i.stateNode;try{Hp(o,r)}catch(u){Be(i,i.return,u)}}}function $m(i,o,r){r.props=Zi(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Be(i,o,u)}}function Wo(i,o){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(m){Be(i,o,m)}}function Nn(i,o){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){Be(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Be(i,o,m)}else r.current=null}function Xm(i){var o=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){Be(i,i.return,m)}}function Oc(i,o,r){try{var u=i.stateNode;pS(u,i.type,r,o),u[kt]=o}catch(m){Be(i,i.return,m)}}function Wm(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ei(i.type)||i.tag===4}function Hc(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wm(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ei(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gc(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(i),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=Mn));else if(u!==4&&(u===27&&Ei(i.type)&&(r=i.stateNode,o=null),i=i.child,i!==null))for(Gc(i,o,r),i=i.sibling;i!==null;)Gc(i,o,r),i=i.sibling}function Ur(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?r.insertBefore(i,o):r.appendChild(i);else if(u!==4&&(u===27&&Ei(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(Ur(i,o,r),i=i.sibling;i!==null;)Ur(i,o,r),i=i.sibling}function Zm(i){var o=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Tt(o,u,r),o[xt]=i,o[kt]=r}catch(y){Be(i,i.return,y)}}var Vn=!1,ut=!1,Bc=!1,jm=typeof WeakSet=="function"?WeakSet:Set,ht=null;function KC(i,o){if(i=i.containerInfo,rd=ta,i=dp(i),ku(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var C=0,S=-1,A=-1,U=0,F=0,K=i,P=null;t:for(;;){for(var V;K!==r||m!==0&&K.nodeType!==3||(S=C+m),K!==y||u!==0&&K.nodeType!==3||(A=C+u),K.nodeType===3&&(C+=K.nodeValue.length),(V=K.firstChild)!==null;)P=K,K=V;for(;;){if(K===i)break t;if(P===r&&++U===m&&(S=C),P===y&&++F===u&&(A=C),(V=K.nextSibling)!==null)break;K=P,P=K.parentNode}K=V}r=S===-1||A===-1?null:{start:S,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(ad={focusedElem:i,selectionRange:r},ta=!1,ht=o;ht!==null;)if(o=ht,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ht=i;else for(;ht!==null;){switch(o=ht,y=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)m=i[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=o,m=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var re=Zi(r.type,m);i=u.getSnapshotBeforeUpdate(re,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(ge){Be(r,r.return,ge)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,r=i.nodeType,r===9)dd(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,ht=i;break}ht=o.return}}function eg(i,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Fn(i,r),u&4&&Xo(5,r);break;case 1:if(Fn(i,r),u&4)if(i=r.stateNode,o===null)try{i.componentDidMount()}catch(C){Be(r,r.return,C)}else{var m=Zi(r.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(C){Be(r,r.return,C)}}u&64&&Qm(r),u&512&&Wo(r,r.return);break;case 3:if(Fn(i,r),u&64&&(i=r.updateQueue,i!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Hp(i,o)}catch(C){Be(r,r.return,C)}}break;case 27:o===null&&u&4&&Zm(r);case 26:case 5:Fn(i,r),o===null&&u&4&&Xm(r),u&512&&Wo(r,r.return);break;case 12:Fn(i,r);break;case 31:Fn(i,r),u&4&&ig(i,r);break;case 13:Fn(i,r),u&4&&sg(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=nS.bind(null,r),CS(i,r))));break;case 22:if(u=r.memoizedState!==null||Vn,!u){o=o!==null&&o.memoizedState!==null||ut,m=Vn;var y=ut;Vn=u,(ut=o)&&!y?zn(i,r,(r.subtreeFlags&8772)!==0):Fn(i,r),Vn=m,ut=y}break;case 30:break;default:Fn(i,r)}}function tg(i){var o=i.alternate;o!==null&&(i.alternate=null,tg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&gu(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var je=null,Pt=!1;function qn(i,o,r){for(r=r.child;r!==null;)ng(i,o,r),r=r.sibling}function ng(i,o,r){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Eo,r)}catch{}switch(r.tag){case 26:ut||Nn(r,o),qn(i,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ut||Nn(r,o);var u=je,m=Pt;Ei(r.type)&&(je=r.stateNode,Pt=!1),qn(i,o,r),ll(r.stateNode),je=u,Pt=m;break;case 5:ut||Nn(r,o);case 6:if(u=je,m=Pt,je=null,qn(i,o,r),je=u,Pt=m,je!==null)if(Pt)try{(je.nodeType===9?je.body:je.nodeName==="HTML"?je.ownerDocument.body:je).removeChild(r.stateNode)}catch(y){Be(r,o,y)}else try{je.removeChild(r.stateNode)}catch(y){Be(r,o,y)}break;case 18:je!==null&&(Pt?(i=je,Qg(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),$s(i)):Qg(je,r.stateNode));break;case 4:u=je,m=Pt,je=r.stateNode.containerInfo,Pt=!0,qn(i,o,r),je=u,Pt=m;break;case 0:case 11:case 14:case 15:pi(2,r,o),ut||pi(4,r,o),qn(i,o,r);break;case 1:ut||(Nn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&$m(r,o,u)),qn(i,o,r);break;case 21:qn(i,o,r);break;case 22:ut=(u=ut)||r.memoizedState!==null,qn(i,o,r),ut=u;break;default:qn(i,o,r)}}function ig(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{$s(i)}catch(r){Be(o,o.return,r)}}}function sg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{$s(i)}catch(r){Be(o,o.return,r)}}function QC(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new jm),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new jm),o;default:throw Error(s(435,i.tag))}}function Pr(i,o){var r=QC(i);o.forEach(function(u){if(!r.has(u)){r.add(u);var m=iS.bind(null,i,u);u.then(m,m)}})}function Lt(i,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],y=i,C=o,S=C;e:for(;S!==null;){switch(S.tag){case 27:if(Ei(S.type)){je=S.stateNode,Pt=!1;break e}break;case 5:je=S.stateNode,Pt=!1;break e;case 3:case 4:je=S.stateNode.containerInfo,Pt=!0;break e}S=S.return}if(je===null)throw Error(s(160));ng(y,C,m),je=null,Pt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)og(o,i),o=o.sibling}var gn=null;function og(i,o){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Lt(o,i),Ot(i),u&4&&(pi(3,i,i.return),Xo(3,i),pi(5,i,i.return));break;case 1:Lt(o,i),Ot(i),u&512&&(ut||r===null||Nn(r,r.return)),u&64&&Vn&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=gn;if(Lt(o,i),Ot(i),u&512&&(ut||r===null||Nn(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[To]||y[xt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Tt(y,u,r),y[xt]=i,ft(y),u=y;break e;case"link":var C=oy("link","href",m).get(u+(r.href||""));if(C){for(var S=0;S<C.length;S++)if(y=C[S],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){C.splice(S,1);break t}}y=m.createElement(u),Tt(y,u,r),m.head.appendChild(y);break;case"meta":if(C=oy("meta","content",m).get(u+(r.content||""))){for(S=0;S<C.length;S++)if(y=C[S],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){C.splice(S,1);break t}}y=m.createElement(u),Tt(y,u,r),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[xt]=i,ft(y),u=y}i.stateNode=u}else ly(m,i.type,i.stateNode);else i.stateNode=sy(m,u,i.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?ly(m,i.type,i.stateNode):sy(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Oc(i,i.memoizedProps,r.memoizedProps)}break;case 27:Lt(o,i),Ot(i),u&512&&(ut||r===null||Nn(r,r.return)),r!==null&&u&4&&Oc(i,i.memoizedProps,r.memoizedProps);break;case 5:if(Lt(o,i),Ot(i),u&512&&(ut||r===null||Nn(r,r.return)),i.flags&32){m=i.stateNode;try{vs(m,"")}catch(re){Be(i,i.return,re)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Oc(i,m,r!==null?r.memoizedProps:m)),u&1024&&(Bc=!0);break;case 6:if(Lt(o,i),Ot(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(re){Be(i,i.return,re)}}break;case 3:if(Wr=null,m=gn,gn=$r(o.containerInfo),Lt(o,i),gn=m,Ot(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{$s(o.containerInfo)}catch(re){Be(i,i.return,re)}Bc&&(Bc=!1,lg(i));break;case 4:u=gn,gn=$r(i.stateNode.containerInfo),Lt(o,i),Ot(i),gn=u;break;case 12:Lt(o,i),Ot(i);break;case 31:Lt(o,i),Ot(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pr(i,u)));break;case 13:Lt(o,i),Ot(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Or=qt()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pr(i,u)));break;case 22:m=i.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,U=Vn,F=ut;if(Vn=U||m,ut=F||A,Lt(o,i),ut=F,Vn=U,Ot(i),u&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(r===null||A||Vn||ut||ji(i)),r=null,o=i;;){if(o.tag===5||o.tag===26){if(r===null){A=r=o;try{if(y=A.stateNode,m)C=y.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{S=A.stateNode;var K=A.memoizedProps.style,P=K!=null&&K.hasOwnProperty("display")?K.display:null;S.style.display=P==null||typeof P=="boolean"?"":(""+P).trim()}}catch(re){Be(A,A.return,re)}}}else if(o.tag===6){if(r===null){A=o;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(re){Be(A,A.return,re)}}}else if(o.tag===18){if(r===null){A=o;try{var V=A.stateNode;m?$g(V,!0):$g(A.stateNode,!1)}catch(re){Be(A,A.return,re)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Pr(i,r))));break;case 19:Lt(o,i),Ot(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Pr(i,u)));break;case 30:break;case 21:break;default:Lt(o,i),Ot(i)}}function Ot(i){var o=i.flags;if(o&2){try{for(var r,u=i.return;u!==null;){if(Wm(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var m=r.stateNode,y=Hc(i);Ur(i,y,m);break;case 5:var C=r.stateNode;r.flags&32&&(vs(C,""),r.flags&=-33);var S=Hc(i);Ur(i,S,C);break;case 3:case 4:var A=r.stateNode.containerInfo,U=Hc(i);Gc(i,U,A);break;default:throw Error(s(161))}}catch(F){Be(i,i.return,F)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function lg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;lg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Fn(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)eg(i,o.alternate,o),o=o.sibling}function ji(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:pi(4,o,o.return),ji(o);break;case 1:Nn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&$m(o,o.return,r),ji(o);break;case 27:ll(o.stateNode);case 26:case 5:Nn(o,o.return),ji(o);break;case 22:o.memoizedState===null&&ji(o);break;case 30:ji(o);break;default:ji(o)}i=i.sibling}}function zn(i,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=i,y=o,C=y.flags;switch(y.tag){case 0:case 11:case 15:zn(m,y,r),Xo(4,y);break;case 1:if(zn(m,y,r),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(U){Be(u,u.return,U)}if(u=y,m=u.updateQueue,m!==null){var S=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)Op(A[m],S)}catch(U){Be(u,u.return,U)}}r&&C&64&&Qm(y),Wo(y,y.return);break;case 27:Zm(y);case 26:case 5:zn(m,y,r),r&&u===null&&C&4&&Xm(y),Wo(y,y.return);break;case 12:zn(m,y,r);break;case 31:zn(m,y,r),r&&C&4&&ig(m,y);break;case 13:zn(m,y,r),r&&C&4&&sg(m,y);break;case 22:y.memoizedState===null&&zn(m,y,r),Wo(y,y.return);break;case 30:break;default:zn(m,y,r)}o=o.sibling}}function Vc(i,o){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&Oo(r))}function qc(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Oo(i))}function yn(i,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)rg(i,o,r,u),o=o.sibling}function rg(i,o,r,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:yn(i,o,r,u),m&2048&&Xo(9,o);break;case 1:yn(i,o,r,u);break;case 3:yn(i,o,r,u),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Oo(i)));break;case 12:if(m&2048){yn(i,o,r,u),i=o.stateNode;try{var y=o.memoizedProps,C=y.id,S=y.onPostCommit;typeof S=="function"&&S(C,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){Be(o,o.return,A)}}else yn(i,o,r,u);break;case 31:yn(i,o,r,u);break;case 13:yn(i,o,r,u);break;case 23:break;case 22:y=o.stateNode,C=o.alternate,o.memoizedState!==null?y._visibility&2?yn(i,o,r,u):Zo(i,o):y._visibility&2?yn(i,o,r,u):(y._visibility|=2,Hs(i,o,r,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&Vc(C,o);break;case 24:yn(i,o,r,u),m&2048&&qc(o.alternate,o);break;default:yn(i,o,r,u)}}function Hs(i,o,r,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=i,C=o,S=r,A=u,U=C.flags;switch(C.tag){case 0:case 11:case 15:Hs(y,C,S,A,m),Xo(8,C);break;case 23:break;case 22:var F=C.stateNode;C.memoizedState!==null?F._visibility&2?Hs(y,C,S,A,m):Zo(y,C):(F._visibility|=2,Hs(y,C,S,A,m)),m&&U&2048&&Vc(C.alternate,C);break;case 24:Hs(y,C,S,A,m),m&&U&2048&&qc(C.alternate,C);break;default:Hs(y,C,S,A,m)}o=o.sibling}}function Zo(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=i,u=o,m=u.flags;switch(u.tag){case 22:Zo(r,u),m&2048&&Vc(u.alternate,u);break;case 24:Zo(r,u),m&2048&&qc(u.alternate,u);break;default:Zo(r,u)}o=o.sibling}}var jo=8192;function Gs(i,o,r){if(i.subtreeFlags&jo)for(i=i.child;i!==null;)ag(i,o,r),i=i.sibling}function ag(i,o,r){switch(i.tag){case 26:Gs(i,o,r),i.flags&jo&&i.memoizedState!==null&&US(r,gn,i.memoizedState,i.memoizedProps);break;case 5:Gs(i,o,r);break;case 3:case 4:var u=gn;gn=$r(i.stateNode.containerInfo),Gs(i,o,r),gn=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=jo,jo=16777216,Gs(i,o,r),jo=u):Gs(i,o,r));break;default:Gs(i,o,r)}}function ug(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function el(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];ht=u,dg(u,i)}ug(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)cg(i),i=i.sibling}function cg(i){switch(i.tag){case 0:case 11:case 15:el(i),i.flags&2048&&pi(9,i,i.return);break;case 3:el(i);break;case 12:el(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Lr(i)):el(i);break;default:el(i)}}function Lr(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];ht=u,dg(u,i)}ug(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:pi(8,o,o.return),Lr(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,Lr(o));break;default:Lr(o)}i=i.sibling}}function dg(i,o){for(;ht!==null;){var r=ht;switch(r.tag){case 0:case 11:case 15:pi(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Oo(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ht=u;else e:for(r=i;ht!==null;){u=ht;var m=u.sibling,y=u.return;if(tg(u),u===r){ht=null;break e}if(m!==null){m.return=y,ht=m;break e}ht=y}}}var $C={getCacheForType:function(i){var o=Ct(lt),r=o.data.get(i);return r===void 0&&(r=i(),o.data.set(i,r)),r},cacheSignal:function(){return Ct(lt).controller.signal}},XC=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ye=null,Ne=null,Ie=0,Ge=0,$t=null,mi=!1,Bs=!1,Fc=!1,Yn=0,tt=0,gi=0,es=0,zc=0,Xt=0,Vs=0,tl=null,Ht=null,Yc=!1,Or=0,fg=0,Hr=1/0,Gr=null,yi=null,dt=0,vi=null,qs=null,Jn=0,Jc=0,Kc=null,hg=null,nl=0,Qc=null;function Wt(){return(Oe&2)!==0&&Ie!==0?Ie&-Ie:R.T!==null?ed():Rh()}function pg(){if(Xt===0)if((Ie&536870912)===0||ke){var i=Kl;Kl<<=1,(Kl&3932160)===0&&(Kl=262144),Xt=i}else Xt=536870912;return i=Kt.current,i!==null&&(i.flags|=32),Xt}function Gt(i,o,r){(i===Ye&&(Ge===2||Ge===9)||i.cancelPendingCommit!==null)&&(Fs(i,0),_i(i,Ie,Xt,!1)),So(i,r),((Oe&2)===0||i!==Ye)&&(i===Ye&&((Oe&2)===0&&(es|=r),tt===4&&_i(i,Ie,Xt,!1)),wn(i))}function mg(i,o,r){if((Oe&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&i.expiredLanes)===0||Co(i,o),m=u?jC(i,o):Xc(i,o,!0),y=u;do{if(m===0){Bs&&!u&&_i(i,o,0,!1);break}else{if(r=i.current.alternate,y&&!WC(r)){m=Xc(i,o,!1),y=!1;continue}if(m===2){if(y=o,i.errorRecoveryDisabledLanes&y)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){o=C;e:{var S=i;m=tl;var A=S.current.memoizedState.isDehydrated;if(A&&(Fs(S,C).flags|=256),C=Xc(S,C,!1),C!==2){if(Fc&&!A){S.errorRecoveryDisabledLanes|=y,es|=y,m=4;break e}y=Ht,Ht=m,y!==null&&(Ht===null?Ht=y:Ht.push.apply(Ht,y))}m=C}if(y=!1,m!==2)continue}}if(m===1){Fs(i,0),_i(i,o,0,!0);break}e:{switch(u=i,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:_i(u,o,Xt,!mi);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Or+300-qt(),10<m)){if(_i(u,o,Xt,!mi),$l(u,0,!0)!==0)break e;Jn=o,u.timeoutHandle=Jg(gg.bind(null,u,r,Ht,Gr,Yc,o,Xt,es,Vs,mi,y,"Throttled",-0,0),m);break e}gg(u,r,Ht,Gr,Yc,o,Xt,es,Vs,mi,y,null,-0,0)}}break}while(!0);wn(i)}function gg(i,o,r,u,m,y,C,S,A,U,F,K,P,V){if(i.timeoutHandle=-1,K=o.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mn},ag(o,y,K);var re=(y&62914560)===y?Or-qt():(y&4194048)===y?fg-qt():0;if(re=PS(K,re),re!==null){Jn=y,i.cancelPendingCommit=re(Tg.bind(null,i,o,y,r,u,m,C,S,A,F,K,null,P,V)),_i(i,y,C,!U);return}}Tg(i,o,y,r,u,m,C,S,A)}function WC(i){for(var o=i;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],y=m.getSnapshot;m=m.value;try{if(!Yt(y(),m))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _i(i,o,r,u){o&=~zc,o&=~es,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var m=o;0<m;){var y=31-zt(m),C=1<<y;u[y]=-1,m&=~C}r!==0&&Ah(i,r,o)}function Br(){return(Oe&6)===0?(il(0),!1):!0}function $c(){if(Ne!==null){if(Ge===0)var i=Ne.return;else i=Ne,Pn=Yi=null,dc(i),ks=null,Go=0,i=Ne;for(;i!==null;)Km(i.alternate,i),i=i.return;Ne=null}}function Fs(i,o){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,yS(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),Jn=0,$c(),Ye=i,Ne=r=kn(i.current,null),Ie=o,Ge=0,$t=null,mi=!1,Bs=Co(i,o),Fc=!1,Vs=Xt=zc=es=gi=tt=0,Ht=tl=null,Yc=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var m=31-zt(u),y=1<<m;o|=i[m],u&=~y}return Yn=o,rr(),r}function yg(i,o){Ce=null,R.H=Ko,o===Ds||o===mr?(o=kp(),Ge=3):o===ju?(o=kp(),Ge=4):Ge=o===Nc?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$t=o,Ne===null&&(tt=1,Rr(i,sn(o,i.current)))}function vg(){var i=Kt.current;return i===null?!0:(Ie&4194048)===Ie?an===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?i===an:!1}function _g(){var i=R.H;return R.H=Ko,i===null?Ko:i}function xg(){var i=R.A;return R.A=$C,i}function Vr(){tt=4,mi||(Ie&4194048)!==Ie&&Kt.current!==null||(Bs=!0),(gi&134217727)===0&&(es&134217727)===0||Ye===null||_i(Ye,Ie,Xt,!1)}function Xc(i,o,r){var u=Oe;Oe|=2;var m=_g(),y=xg();(Ye!==i||Ie!==o)&&(Gr=null,Fs(i,o)),o=!1;var C=tt;e:do try{if(Ge!==0&&Ne!==null){var S=Ne,A=$t;switch(Ge){case 8:$c(),C=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(o=!0);var U=Ge;if(Ge=0,$t=null,zs(i,S,A,U),r&&Bs){C=0;break e}break;default:U=Ge,Ge=0,$t=null,zs(i,S,A,U)}}ZC(),C=tt;break}catch(F){yg(i,F)}while(!0);return o&&i.shellSuspendCounter++,Pn=Yi=null,Oe=u,R.H=m,R.A=y,Ne===null&&(Ye=null,Ie=0,rr()),C}function ZC(){for(;Ne!==null;)Eg(Ne)}function jC(i,o){var r=Oe;Oe|=2;var u=_g(),m=xg();Ye!==i||Ie!==o?(Gr=null,Hr=qt()+500,Fs(i,o)):Bs=Co(i,o);e:do try{if(Ge!==0&&Ne!==null){o=Ne;var y=$t;t:switch(Ge){case 1:Ge=0,$t=null,zs(i,o,y,1);break;case 2:case 9:if(Mp(y)){Ge=0,$t=null,Cg(o);break}o=function(){Ge!==2&&Ge!==9||Ye!==i||(Ge=7),wn(i)},y.then(o,o);break e;case 3:Ge=7;break e;case 4:Ge=5;break e;case 7:Mp(y)?(Ge=0,$t=null,Cg(o)):(Ge=0,$t=null,zs(i,o,y,7));break;case 5:var C=null;switch(Ne.tag){case 26:C=Ne.memoizedState;case 5:case 27:var S=Ne;if(C?ry(C):S.stateNode.complete){Ge=0,$t=null;var A=S.sibling;if(A!==null)Ne=A;else{var U=S.return;U!==null?(Ne=U,qr(U)):Ne=null}break t}}Ge=0,$t=null,zs(i,o,y,5);break;case 6:Ge=0,$t=null,zs(i,o,y,6);break;case 8:$c(),tt=6;break e;default:throw Error(s(462))}}eS();break}catch(F){yg(i,F)}while(!0);return Pn=Yi=null,R.H=u,R.A=m,Oe=r,Ne!==null?0:(Ye=null,Ie=0,rr(),tt)}function eS(){for(;Ne!==null&&!SE();)Eg(Ne)}function Eg(i){var o=Ym(i.alternate,i,Yn);i.memoizedProps=i.pendingProps,o===null?qr(i):Ne=o}function Cg(i){var o=i,r=o.alternate;switch(o.tag){case 15:case 0:o=Gm(r,o,o.pendingProps,o.type,void 0,Ie);break;case 11:o=Gm(r,o,o.pendingProps,o.type.render,o.ref,Ie);break;case 5:dc(o);default:Km(r,o),o=Ne=xp(o,Yn),o=Ym(r,o,Yn)}i.memoizedProps=i.pendingProps,o===null?qr(i):Ne=o}function zs(i,o,r,u){Pn=Yi=null,dc(o),ks=null,Go=0;var m=o.return;try{if(qC(i,m,o,r,Ie)){tt=1,Rr(i,sn(r,i.current)),Ne=null;return}}catch(y){if(m!==null)throw Ne=m,y;tt=1,Rr(i,sn(r,i.current)),Ne=null;return}o.flags&32768?(ke||u===1?i=!0:Bs||(Ie&536870912)!==0?i=!1:(mi=i=!0,(u===2||u===9||u===3||u===6)&&(u=Kt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Sg(o,i)):qr(o)}function qr(i){var o=i;do{if((o.flags&32768)!==0){Sg(o,mi);return}i=o.return;var r=YC(o.alternate,o,Yn);if(r!==null){Ne=r;return}if(o=o.sibling,o!==null){Ne=o;return}Ne=o=i}while(o!==null);tt===0&&(tt=5)}function Sg(i,o){do{var r=JC(i.alternate,i);if(r!==null){r.flags&=32767,Ne=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(i=i.sibling,i!==null)){Ne=i;return}Ne=i=r}while(i!==null);tt=6,Ne=null}function Tg(i,o,r,u,m,y,C,S,A){i.cancelPendingCommit=null;do Fr();while(dt!==0);if((Oe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=Hu,kE(i,r,y,C,S,A),i===Ye&&(Ne=Ye=null,Ie=0),qs=o,vi=i,Jn=r,Jc=y,Kc=m,hg=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,sS(Yl,function(){return Rg(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=R.T,R.T=null,m=B.p,B.p=2,C=Oe,Oe|=4;try{KC(i,o,r)}finally{Oe=C,B.p=m,R.T=u}}dt=1,bg(),Ag(),Ng()}}function bg(){if(dt===1){dt=0;var i=vi,o=qs,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=R.T,R.T=null;var u=B.p;B.p=2;var m=Oe;Oe|=4;try{og(o,i);var y=ad,C=dp(i.containerInfo),S=y.focusedElem,A=y.selectionRange;if(C!==S&&S&&S.ownerDocument&&cp(S.ownerDocument.documentElement,S)){if(A!==null&&ku(S)){var U=A.start,F=A.end;if(F===void 0&&(F=U),"selectionStart"in S)S.selectionStart=U,S.selectionEnd=Math.min(F,S.value.length);else{var K=S.ownerDocument||document,P=K&&K.defaultView||window;if(P.getSelection){var V=P.getSelection(),re=S.textContent.length,ge=Math.min(A.start,re),Fe=A.end===void 0?ge:Math.min(A.end,re);!V.extend&&ge>Fe&&(C=Fe,Fe=ge,ge=C);var D=up(S,ge),w=up(S,Fe);if(D&&w&&(V.rangeCount!==1||V.anchorNode!==D.node||V.anchorOffset!==D.offset||V.focusNode!==w.node||V.focusOffset!==w.offset)){var k=K.createRange();k.setStart(D.node,D.offset),V.removeAllRanges(),ge>Fe?(V.addRange(k),V.extend(w.node,w.offset)):(k.setEnd(w.node,w.offset),V.addRange(k))}}}}for(K=[],V=S;V=V.parentNode;)V.nodeType===1&&K.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<K.length;S++){var J=K[S];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}ta=!!rd,ad=rd=null}finally{Oe=m,B.p=u,R.T=r}}i.current=o,dt=2}}function Ag(){if(dt===2){dt=0;var i=vi,o=qs,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=R.T,R.T=null;var u=B.p;B.p=2;var m=Oe;Oe|=4;try{eg(i,o.alternate,o)}finally{Oe=m,B.p=u,R.T=r}}dt=3}}function Ng(){if(dt===4||dt===3){dt=0,TE();var i=vi,o=qs,r=Jn,u=hg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?dt=5:(dt=0,qs=vi=null,wg(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(yi=null),pu(r),o=o.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Eo,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=R.T,m=B.p,B.p=2,R.T=null;try{for(var y=i.onRecoverableError,C=0;C<u.length;C++){var S=u[C];y(S.value,{componentStack:S.stack})}}finally{R.T=o,B.p=m}}(Jn&3)!==0&&Fr(),wn(i),m=i.pendingLanes,(r&261930)!==0&&(m&42)!==0?i===Qc?nl++:(nl=0,Qc=i):nl=0,il(0)}}function wg(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Oo(o)))}function Fr(){return bg(),Ag(),Ng(),Rg()}function Rg(){if(dt!==5)return!1;var i=vi,o=Jc;Jc=0;var r=pu(Jn),u=R.T,m=B.p;try{B.p=32>r?32:r,R.T=null,r=Kc,Kc=null;var y=vi,C=Jn;if(dt=0,qs=vi=null,Jn=0,(Oe&6)!==0)throw Error(s(331));var S=Oe;if(Oe|=4,cg(y.current),rg(y,y.current,C,r),Oe=S,il(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Eo,y)}catch{}return!0}finally{B.p=m,R.T=u,wg(i,o)}}function Ig(i,o,r){o=sn(r,o),o=Ac(i.stateNode,o,2),i=di(i,o,2),i!==null&&(So(i,2),wn(i))}function Be(i,o,r){if(i.tag===3)Ig(i,i,r);else for(;o!==null;){if(o.tag===3){Ig(o,i,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(yi===null||!yi.has(u))){i=sn(r,i),r=Mm(2),u=di(o,r,2),u!==null&&(Dm(r,u,o,i),So(u,2),wn(u));break}}o=o.return}}function Wc(i,o,r){var u=i.pingCache;if(u===null){u=i.pingCache=new XC;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(r)||(Fc=!0,m.add(r),i=tS.bind(null,i,o,r),o.then(i,i))}function tS(i,o,r){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,Ye===i&&(Ie&r)===r&&(tt===4||tt===3&&(Ie&62914560)===Ie&&300>qt()-Or?(Oe&2)===0&&Fs(i,0):zc|=r,Vs===Ie&&(Vs=0)),wn(i)}function Mg(i,o){o===0&&(o=bh()),i=qi(i,o),i!==null&&(So(i,o),wn(i))}function nS(i){var o=i.memoizedState,r=0;o!==null&&(r=o.retryLane),Mg(i,r)}function iS(i,o){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Mg(i,r)}function sS(i,o){return cu(i,o)}var zr=null,Ys=null,Zc=!1,Yr=!1,jc=!1,xi=0;function wn(i){i!==Ys&&i.next===null&&(Ys===null?zr=Ys=i:Ys=Ys.next=i),Yr=!0,Zc||(Zc=!0,lS())}function il(i,o){if(!jc&&Yr){jc=!0;do for(var r=!1,u=zr;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var C=u.suspendedLanes,S=u.pingedLanes;y=(1<<31-zt(42|i)+1)-1,y&=m&~(C&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,Pg(u,y))}else y=Ie,y=$l(u,u===Ye?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Co(u,y)||(r=!0,Pg(u,y));u=u.next}while(r);jc=!1}}function oS(){Dg()}function Dg(){Yr=Zc=!1;var i=0;xi!==0&&gS()&&(i=xi);for(var o=qt(),r=null,u=zr;u!==null;){var m=u.next,y=kg(u,o);y===0?(u.next=null,r===null?zr=m:r.next=m,m===null&&(Ys=r)):(r=u,(i!==0||(y&3)!==0)&&(Yr=!0)),u=m}dt!==0&&dt!==5||il(i),xi!==0&&(xi=0)}function kg(i,o){for(var r=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var C=31-zt(y),S=1<<C,A=m[C];A===-1?((S&r)===0||(S&u)!==0)&&(m[C]=DE(S,o)):A<=o&&(i.expiredLanes|=S),y&=~S}if(o=Ye,r=Ie,r=$l(i,i===o?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===o&&(Ge===2||Ge===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&du(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Co(i,r)){if(o=r&-r,o===i.callbackPriority)return o;switch(u!==null&&du(u),pu(r)){case 2:case 8:r=Sh;break;case 32:r=Yl;break;case 268435456:r=Th;break;default:r=Yl}return u=Ug.bind(null,i),r=cu(r,u),i.callbackPriority=o,i.callbackNode=r,o}return u!==null&&u!==null&&du(u),i.callbackPriority=2,i.callbackNode=null,2}function Ug(i,o){if(dt!==0&&dt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Fr()&&i.callbackNode!==r)return null;var u=Ie;return u=$l(i,i===Ye?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(mg(i,u,o),kg(i,qt()),i.callbackNode!=null&&i.callbackNode===r?Ug.bind(null,i):null)}function Pg(i,o){if(Fr())return null;mg(i,o,!0)}function lS(){vS(function(){(Oe&6)!==0?cu(Ch,oS):Dg()})}function ed(){if(xi===0){var i=Is;i===0&&(i=Jl,Jl<<=1,(Jl&261888)===0&&(Jl=256)),xi=i}return xi}function Lg(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:jl(""+i)}function Og(i,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,i.id&&r.setAttribute("form",i.id),o.parentNode.insertBefore(r,o),i=new FormData(i),r.parentNode.removeChild(r),i}function rS(i,o,r,u,m){if(o==="submit"&&r&&r.stateNode===m){var y=Lg((m[kt]||null).action),C=u.submitter;C&&(o=(o=C[kt]||null)?Lg(o.formAction):C.getAttribute("formAction"),o!==null&&(y=o,C=null));var S=new ir("action","action",null,u,m);i.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(xi!==0){var A=C?Og(m,C):new FormData(m);xc(r,{pending:!0,data:A,method:m.method,action:y},null,A)}}else typeof y=="function"&&(S.preventDefault(),A=C?Og(m,C):new FormData(m),xc(r,{pending:!0,data:A,method:m.method,action:y},y,A))},currentTarget:m}]})}}for(var td=0;td<Ou.length;td++){var nd=Ou[td],aS=nd.toLowerCase(),uS=nd[0].toUpperCase()+nd.slice(1);mn(aS,"on"+uS)}mn(pp,"onAnimationEnd"),mn(mp,"onAnimationIteration"),mn(gp,"onAnimationStart"),mn("dblclick","onDoubleClick"),mn("focusin","onFocus"),mn("focusout","onBlur"),mn(bC,"onTransitionRun"),mn(AC,"onTransitionStart"),mn(NC,"onTransitionCancel"),mn(yp,"onTransitionEnd"),gs("onMouseEnter",["mouseout","mouseover"]),gs("onMouseLeave",["mouseout","mouseover"]),gs("onPointerEnter",["pointerout","pointerover"]),gs("onPointerLeave",["pointerout","pointerover"]),Hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function Hg(i,o){o=(o&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],m=u.event;u=u.listeners;e:{var y=void 0;if(o)for(var C=u.length-1;0<=C;C--){var S=u[C],A=S.instance,U=S.currentTarget;if(S=S.listener,A!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=U;try{y(m)}catch(F){lr(F)}m.currentTarget=null,y=A}else for(C=0;C<u.length;C++){if(S=u[C],A=S.instance,U=S.currentTarget,S=S.listener,A!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=U;try{y(m)}catch(F){lr(F)}m.currentTarget=null,y=A}}}}function we(i,o){var r=o[mu];r===void 0&&(r=o[mu]=new Set);var u=i+"__bubble";r.has(u)||(Gg(o,i,2,!1),r.add(u))}function id(i,o,r){var u=0;o&&(u|=4),Gg(r,i,u,o)}var Jr="_reactListening"+Math.random().toString(36).slice(2);function sd(i){if(!i[Jr]){i[Jr]=!0,Dh.forEach(function(r){r!=="selectionchange"&&(cS.has(r)||id(r,!1,i),id(r,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Jr]||(o[Jr]=!0,id("selectionchange",!1,o))}}function Gg(i,o,r,u){switch(py(o)){case 2:var m=HS;break;case 8:m=GS;break;default:m=_d}r=m.bind(null,o,r,i),m=void 0,!Tu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(o,r,{capture:!0,passive:m}):i.addEventListener(o,r,!0):m!==void 0?i.addEventListener(o,r,{passive:m}):i.addEventListener(o,r,!1)}function od(i,o,r,u,m){var y=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var S=u.stateNode.containerInfo;if(S===m)break;if(C===4)for(C=u.return;C!==null;){var A=C.tag;if((A===3||A===4)&&C.stateNode.containerInfo===m)return;C=C.return}for(;S!==null;){if(C=hs(S),C===null)return;if(A=C.tag,A===5||A===6||A===26||A===27){u=y=C;continue e}S=S.parentNode}}u=u.return}zh(function(){var U=y,F=Cu(r),K=[];e:{var P=vp.get(i);if(P!==void 0){var V=ir,re=i;switch(i){case"keypress":if(tr(r)===0)break e;case"keydown":case"keyup":V=iC;break;case"focusin":re="focus",V=wu;break;case"focusout":re="blur",V=wu;break;case"beforeblur":case"afterblur":V=wu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Kh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=YE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=lC;break;case pp:case mp:case gp:V=QE;break;case yp:V=aC;break;case"scroll":case"scrollend":V=FE;break;case"wheel":V=cC;break;case"copy":case"cut":case"paste":V=XE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=$h;break;case"toggle":case"beforetoggle":V=fC}var ge=(o&4)!==0,Fe=!ge&&(i==="scroll"||i==="scrollend"),D=ge?P!==null?P+"Capture":null:P;ge=[];for(var w=U,k;w!==null;){var J=w;if(k=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||k===null||D===null||(J=Ao(w,D),J!=null&&ge.push(ol(w,J,k))),Fe)break;w=w.return}0<ge.length&&(P=new V(P,re,null,r,F),K.push({event:P,listeners:ge}))}}if((o&7)===0){e:{if(P=i==="mouseover"||i==="pointerover",V=i==="mouseout"||i==="pointerout",P&&r!==Eu&&(re=r.relatedTarget||r.fromElement)&&(hs(re)||re[fs]))break e;if((V||P)&&(P=F.window===F?F:(P=F.ownerDocument)?P.defaultView||P.parentWindow:window,V?(re=r.relatedTarget||r.toElement,V=U,re=re?hs(re):null,re!==null&&(Fe=a(re),ge=re.tag,re!==Fe||ge!==5&&ge!==27&&ge!==6)&&(re=null)):(V=null,re=U),V!==re)){if(ge=Kh,J="onMouseLeave",D="onMouseEnter",w="mouse",(i==="pointerout"||i==="pointerover")&&(ge=$h,J="onPointerLeave",D="onPointerEnter",w="pointer"),Fe=V==null?P:bo(V),k=re==null?P:bo(re),P=new ge(J,w+"leave",V,r,F),P.target=Fe,P.relatedTarget=k,J=null,hs(F)===U&&(ge=new ge(D,w+"enter",re,r,F),ge.target=k,ge.relatedTarget=Fe,J=ge),Fe=J,V&&re)t:{for(ge=dS,D=V,w=re,k=0,J=D;J;J=ge(J))k++;J=0;for(var me=w;me;me=ge(me))J++;for(;0<k-J;)D=ge(D),k--;for(;0<J-k;)w=ge(w),J--;for(;k--;){if(D===w||w!==null&&D===w.alternate){ge=D;break t}D=ge(D),w=ge(w)}ge=null}else ge=null;V!==null&&Bg(K,P,V,ge,!1),re!==null&&Fe!==null&&Bg(K,Fe,re,ge,!0)}}e:{if(P=U?bo(U):window,V=P.nodeName&&P.nodeName.toLowerCase(),V==="select"||V==="input"&&P.type==="file")var Ue=ip;else if(tp(P))if(sp)Ue=CC;else{Ue=xC;var de=_C}else V=P.nodeName,!V||V.toLowerCase()!=="input"||P.type!=="checkbox"&&P.type!=="radio"?U&&xu(U.elementType)&&(Ue=ip):Ue=EC;if(Ue&&(Ue=Ue(i,U))){np(K,Ue,r,F);break e}de&&de(i,P,U),i==="focusout"&&U&&P.type==="number"&&U.memoizedProps.value!=null&&_u(P,"number",P.value)}switch(de=U?bo(U):window,i){case"focusin":(tp(de)||de.contentEditable==="true")&&(Cs=de,Uu=U,Uo=null);break;case"focusout":Uo=Uu=Cs=null;break;case"mousedown":Pu=!0;break;case"contextmenu":case"mouseup":case"dragend":Pu=!1,fp(K,r,F);break;case"selectionchange":if(TC)break;case"keydown":case"keyup":fp(K,r,F)}var Se;if(Iu)e:{switch(i){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Es?jh(i,r)&&(Me="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Me="onCompositionStart");Me&&(Xh&&r.locale!=="ko"&&(Es||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Es&&(Se=Yh()):(si=F,bu="value"in si?si.value:si.textContent,Es=!0)),de=Kr(U,Me),0<de.length&&(Me=new Qh(Me,i,null,r,F),K.push({event:Me,listeners:de}),Se?Me.data=Se:(Se=ep(r),Se!==null&&(Me.data=Se)))),(Se=pC?mC(i,r):gC(i,r))&&(Me=Kr(U,"onBeforeInput"),0<Me.length&&(de=new Qh("onBeforeInput","beforeinput",null,r,F),K.push({event:de,listeners:Me}),de.data=Se)),rS(K,i,U,r,F)}Hg(K,o)})}function ol(i,o,r){return{instance:i,listener:o,currentTarget:r}}function Kr(i,o){for(var r=o+"Capture",u=[];i!==null;){var m=i,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Ao(i,r),m!=null&&u.unshift(ol(i,m,y)),m=Ao(i,o),m!=null&&u.push(ol(i,m,y))),i.tag===3)return u;i=i.return}return[]}function dS(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Bg(i,o,r,u,m){for(var y=o._reactName,C=[];r!==null&&r!==u;){var S=r,A=S.alternate,U=S.stateNode;if(S=S.tag,A!==null&&A===u)break;S!==5&&S!==26&&S!==27||U===null||(A=U,m?(U=Ao(r,y),U!=null&&C.unshift(ol(r,U,A))):m||(U=Ao(r,y),U!=null&&C.push(ol(r,U,A)))),r=r.return}C.length!==0&&i.push({event:o,listeners:C})}var fS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function Vg(i){return(typeof i=="string"?i:""+i).replace(fS,`
`).replace(hS,"")}function qg(i,o){return o=Vg(o),Vg(i)===o}function qe(i,o,r,u,m,y){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||vs(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&vs(i,""+u);break;case"className":Wl(i,"class",u);break;case"tabIndex":Wl(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(i,r,u);break;case"style":qh(i,u,y);break;case"data":if(o!=="object"){Wl(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=jl(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(o!=="input"&&qe(i,o,"name",m.name,m,null),qe(i,o,"formEncType",m.formEncType,m,null),qe(i,o,"formMethod",m.formMethod,m,null),qe(i,o,"formTarget",m.formTarget,m,null)):(qe(i,o,"encType",m.encType,m,null),qe(i,o,"method",m.method,m,null),qe(i,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=jl(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=Mn);break;case"onScroll":u!=null&&we("scroll",i);break;case"onScrollEnd":u!=null&&we("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=jl(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":we("beforetoggle",i),we("toggle",i),Xl(i,"popover",u);break;case"xlinkActuate":In(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":In(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":In(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":In(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":In(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":In(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":In(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":In(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":In(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xl(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=VE.get(r)||r,Xl(i,r,u))}}function ld(i,o,r,u,m,y){switch(r){case"style":qh(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"children":typeof u=="string"?vs(i,u):(typeof u=="number"||typeof u=="bigint")&&vs(i,""+u);break;case"onScroll":u!=null&&we("scroll",i);break;case"onScrollEnd":u!=null&&we("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!kh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),o=r.slice(2,m?r.length-7:void 0),y=i[kt]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(o,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(o,u,m);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Xl(i,r,u)}}}function Tt(i,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",i),we("load",i);var u=!1,m=!1,y;for(y in r)if(r.hasOwnProperty(y)){var C=r[y];if(C!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(i,o,y,C,r,null)}}m&&qe(i,o,"srcSet",r.srcSet,r,null),u&&qe(i,o,"src",r.src,r,null);return;case"input":we("invalid",i);var S=y=C=m=null,A=null,U=null;for(u in r)if(r.hasOwnProperty(u)){var F=r[u];if(F!=null)switch(u){case"name":m=F;break;case"type":C=F;break;case"checked":A=F;break;case"defaultChecked":U=F;break;case"value":y=F;break;case"defaultValue":S=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,o));break;default:qe(i,o,u,F,r,null)}}Hh(i,y,S,A,U,C,m,!1);return;case"select":we("invalid",i),u=C=y=null;for(m in r)if(r.hasOwnProperty(m)&&(S=r[m],S!=null))switch(m){case"value":y=S;break;case"defaultValue":C=S;break;case"multiple":u=S;default:qe(i,o,m,S,r,null)}o=y,r=C,i.multiple=!!u,o!=null?ys(i,!!u,o,!1):r!=null&&ys(i,!!u,r,!0);return;case"textarea":we("invalid",i),y=m=u=null;for(C in r)if(r.hasOwnProperty(C)&&(S=r[C],S!=null))switch(C){case"value":u=S;break;case"defaultValue":m=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:qe(i,o,C,S,r,null)}Bh(i,u,m,y);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(u=r[A],u!=null))switch(A){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:qe(i,o,A,u,r,null)}return;case"dialog":we("beforetoggle",i),we("toggle",i),we("cancel",i),we("close",i);break;case"iframe":case"object":we("load",i);break;case"video":case"audio":for(u=0;u<sl.length;u++)we(sl[u],i);break;case"image":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"embed":case"source":case"link":we("error",i),we("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(u=r[U],u!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(i,o,U,u,r,null)}return;default:if(xu(o)){for(F in r)r.hasOwnProperty(F)&&(u=r[F],u!==void 0&&ld(i,o,F,u,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(u=r[S],u!=null&&qe(i,o,S,u,r,null))}function pS(i,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,C=null,S=null,A=null,U=null,F=null;for(V in r){var K=r[V];if(r.hasOwnProperty(V)&&K!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=K;default:u.hasOwnProperty(V)||qe(i,o,V,null,u,K)}}for(var P in u){var V=u[P];if(K=r[P],u.hasOwnProperty(P)&&(V!=null||K!=null))switch(P){case"type":y=V;break;case"name":m=V;break;case"checked":U=V;break;case"defaultChecked":F=V;break;case"value":C=V;break;case"defaultValue":S=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,o));break;default:V!==K&&qe(i,o,P,V,u,K)}}vu(i,C,S,A,U,F,y,m);return;case"select":V=C=S=P=null;for(y in r)if(A=r[y],r.hasOwnProperty(y)&&A!=null)switch(y){case"value":break;case"multiple":V=A;default:u.hasOwnProperty(y)||qe(i,o,y,null,u,A)}for(m in u)if(y=u[m],A=r[m],u.hasOwnProperty(m)&&(y!=null||A!=null))switch(m){case"value":P=y;break;case"defaultValue":S=y;break;case"multiple":C=y;default:y!==A&&qe(i,o,m,y,u,A)}o=S,r=C,u=V,P!=null?ys(i,!!r,P,!1):!!u!=!!r&&(o!=null?ys(i,!!r,o,!0):ys(i,!!r,r?[]:"",!1));return;case"textarea":V=P=null;for(S in r)if(m=r[S],r.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:qe(i,o,S,null,u,m)}for(C in u)if(m=u[C],y=r[C],u.hasOwnProperty(C)&&(m!=null||y!=null))switch(C){case"value":P=m;break;case"defaultValue":V=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&qe(i,o,C,m,u,y)}Gh(i,P,V);return;case"option":for(var re in r)if(P=r[re],r.hasOwnProperty(re)&&P!=null&&!u.hasOwnProperty(re))switch(re){case"selected":i.selected=!1;break;default:qe(i,o,re,null,u,P)}for(A in u)if(P=u[A],V=r[A],u.hasOwnProperty(A)&&P!==V&&(P!=null||V!=null))switch(A){case"selected":i.selected=P&&typeof P!="function"&&typeof P!="symbol";break;default:qe(i,o,A,P,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in r)P=r[ge],r.hasOwnProperty(ge)&&P!=null&&!u.hasOwnProperty(ge)&&qe(i,o,ge,null,u,P);for(U in u)if(P=u[U],V=r[U],u.hasOwnProperty(U)&&P!==V&&(P!=null||V!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(137,o));break;default:qe(i,o,U,P,u,V)}return;default:if(xu(o)){for(var Fe in r)P=r[Fe],r.hasOwnProperty(Fe)&&P!==void 0&&!u.hasOwnProperty(Fe)&&ld(i,o,Fe,void 0,u,P);for(F in u)P=u[F],V=r[F],!u.hasOwnProperty(F)||P===V||P===void 0&&V===void 0||ld(i,o,F,P,u,V);return}}for(var D in r)P=r[D],r.hasOwnProperty(D)&&P!=null&&!u.hasOwnProperty(D)&&qe(i,o,D,null,u,P);for(K in u)P=u[K],V=r[K],!u.hasOwnProperty(K)||P===V||P==null&&V==null||qe(i,o,K,P,u,V)}function Fg(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mS(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],y=m.transferSize,C=m.initiatorType,S=m.duration;if(y&&S&&Fg(C)){for(C=0,S=m.responseEnd,u+=1;u<r.length;u++){var A=r[u],U=A.startTime;if(U>S)break;var F=A.transferSize,K=A.initiatorType;F&&Fg(K)&&(A=A.responseEnd,C+=F*(A<S?1:(S-U)/(A-U)))}if(--u,o+=8*(y+C)/(m.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var rd=null,ad=null;function Qr(i){return i.nodeType===9?i:i.ownerDocument}function zg(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yg(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function ud(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cd=null;function gS(){var i=window.event;return i&&i.type==="popstate"?i===cd?!1:(cd=i,!0):(cd=null,!1)}var Jg=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,Kg=typeof Promise=="function"?Promise:void 0,vS=typeof queueMicrotask=="function"?queueMicrotask:typeof Kg<"u"?function(i){return Kg.resolve(null).then(i).catch(_S)}:Jg;function _S(i){setTimeout(function(){throw i})}function Ei(i){return i==="head"}function Qg(i,o){var r=o,u=0;do{var m=r.nextSibling;if(i.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(m),$s(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")ll(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,ll(r);for(var y=r.firstChild;y;){var C=y.nextSibling,S=y.nodeName;y[To]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=C}}else r==="body"&&ll(i.ownerDocument.body);r=m}while(r);$s(o)}function $g(i,o){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function dd(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":dd(r),gu(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function xS(i,o,r,u){for(;i.nodeType===1;){var m=r;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[To])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=un(i.nextSibling),i===null)break}return null}function ES(i,o,r){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=un(i.nextSibling),i===null))return null;return i}function Xg(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=un(i.nextSibling),i===null))return null;return i}function fd(i){return i.data==="$?"||i.data==="$~"}function hd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function CS(i,o){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function un(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var pd=null;function Wg(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(o===0)return un(i.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}i=i.nextSibling}return null}function Zg(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return i;o--}else r!=="/$"&&r!=="/&"||o++}i=i.previousSibling}return null}function jg(i,o,r){switch(o=Qr(r),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function ll(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);gu(i)}var cn=new Map,ey=new Set;function $r(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Kn=B.d;B.d={f:SS,r:TS,D:bS,C:AS,L:NS,m:wS,X:IS,S:RS,M:MS};function SS(){var i=Kn.f(),o=Br();return i||o}function TS(i){var o=ps(i);o!==null&&o.tag===5&&o.type==="form"?ym(o):Kn.r(i)}var Js=typeof document>"u"?null:document;function ty(i,o,r){var u=Js;if(u&&typeof o=="string"&&o){var m=tn(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),ey.has(m)||(ey.add(m),i={rel:i,crossOrigin:r,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),Tt(o,"link",i),ft(o),u.head.appendChild(o)))}}function bS(i){Kn.D(i),ty("dns-prefetch",i,null)}function AS(i,o){Kn.C(i,o),ty("preconnect",i,o)}function NS(i,o,r){Kn.L(i,o,r);var u=Js;if(u&&i&&o){var m='link[rel="preload"][as="'+tn(o)+'"]';o==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+tn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+tn(r.imageSizes)+'"]')):m+='[href="'+tn(i)+'"]';var y=m;switch(o){case"style":y=Ks(i);break;case"script":y=Qs(i)}cn.has(y)||(i=x({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:i,as:o},r),cn.set(y,i),u.querySelector(m)!==null||o==="style"&&u.querySelector(rl(y))||o==="script"&&u.querySelector(al(y))||(o=u.createElement("link"),Tt(o,"link",i),ft(o),u.head.appendChild(o)))}}function wS(i,o){Kn.m(i,o);var r=Js;if(r&&i){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+tn(u)+'"][href="'+tn(i)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Qs(i)}if(!cn.has(y)&&(i=x({rel:"modulepreload",href:i},o),cn.set(y,i),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(al(y)))return}u=r.createElement("link"),Tt(u,"link",i),ft(u),r.head.appendChild(u)}}}function RS(i,o,r){Kn.S(i,o,r);var u=Js;if(u&&i){var m=ms(u).hoistableStyles,y=Ks(i);o=o||"default";var C=m.get(y);if(!C){var S={loading:0,preload:null};if(C=u.querySelector(rl(y)))S.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},r),(r=cn.get(y))&&md(i,r);var A=C=u.createElement("link");ft(A),Tt(A,"link",i),A._p=new Promise(function(U,F){A.onload=U,A.onerror=F}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Xr(C,o,u)}C={type:"stylesheet",instance:C,count:1,state:S},m.set(y,C)}}}function IS(i,o){Kn.X(i,o);var r=Js;if(r&&i){var u=ms(r).hoistableScripts,m=Qs(i),y=u.get(m);y||(y=r.querySelector(al(m)),y||(i=x({src:i,async:!0},o),(o=cn.get(m))&&gd(i,o),y=r.createElement("script"),ft(y),Tt(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function MS(i,o){Kn.M(i,o);var r=Js;if(r&&i){var u=ms(r).hoistableScripts,m=Qs(i),y=u.get(m);y||(y=r.querySelector(al(m)),y||(i=x({src:i,async:!0,type:"module"},o),(o=cn.get(m))&&gd(i,o),y=r.createElement("script"),ft(y),Tt(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function ny(i,o,r,u){var m=(m=pe.current)?$r(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=Ks(r.href),r=ms(m).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Ks(r.href);var y=ms(m).hoistableStyles,C=y.get(i);if(C||(m=m.ownerDocument||m,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,C),(y=m.querySelector(rl(i)))&&!y._p&&(C.instance=y,C.state.loading=5),cn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},cn.set(i,r),y||DS(m,i,r,C.state))),o&&u===null)throw Error(s(528,""));return C}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qs(r),r=ms(m).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Ks(i){return'href="'+tn(i)+'"'}function rl(i){return'link[rel="stylesheet"]['+i+"]"}function iy(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function DS(i,o,r,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Tt(o,"link",r),ft(o),i.head.appendChild(o))}function Qs(i){return'[src="'+tn(i)+'"]'}function al(i){return"script[async]"+i}function sy(i,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+tn(r.href)+'"]');if(u)return o.instance=u,ft(u),u;var m=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),ft(u),Tt(u,"style",m),Xr(u,r.precedence,i),o.instance=u;case"stylesheet":m=Ks(r.href);var y=i.querySelector(rl(m));if(y)return o.state.loading|=4,o.instance=y,ft(y),y;u=iy(r),(m=cn.get(m))&&md(u,m),y=(i.ownerDocument||i).createElement("link"),ft(y);var C=y;return C._p=new Promise(function(S,A){C.onload=S,C.onerror=A}),Tt(y,"link",u),o.state.loading|=4,Xr(y,r.precedence,i),o.instance=y;case"script":return y=Qs(r.src),(m=i.querySelector(al(y)))?(o.instance=m,ft(m),m):(u=r,(m=cn.get(y))&&(u=x({},r),gd(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),ft(m),Tt(m,"link",u),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Xr(u,r.precedence,i));return o.instance}function Xr(i,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,C=0;C<u.length;C++){var S=u[C];if(S.dataset.precedence===o)y=S;else if(y!==m)break}y?y.parentNode.insertBefore(i,y.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(i,o.firstChild))}function md(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function gd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Wr=null;function oy(i,o,r){if(Wr===null){var u=new Map,m=Wr=new Map;m.set(r,u)}else m=Wr,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),m=0;m<r.length;m++){var y=r[m];if(!(y[To]||y[xt]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var C=y.getAttribute(o)||"";C=i+C;var S=u.get(C);S?S.push(y):u.set(C,[y])}}return u}function ly(i,o,r){i=i.ownerDocument||i,i.head.insertBefore(r,o==="title"?i.querySelector("head > title"):null)}function kS(i,o,r){if(r===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function ry(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function US(i,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=Ks(u.href),y=o.querySelector(rl(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Zr.bind(i),o.then(i,i)),r.state.loading|=4,r.instance=y,ft(y);return}y=o.ownerDocument||o,u=iy(u),(m=cn.get(m))&&md(u,m),y=y.createElement("link"),ft(y);var C=y;C._p=new Promise(function(S,A){C.onload=S,C.onerror=A}),Tt(y,"link",u),r.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Zr.bind(i),o.addEventListener("load",r),o.addEventListener("error",r))}}var yd=0;function PS(i,o){return i.stylesheets&&i.count===0&&ea(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&ea(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+o);0<i.imgBytes&&yd===0&&(yd=62500*mS());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ea(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>yd?50:800)+o);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Zr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ea(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var jr=null;function ea(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,jr=new Map,o.forEach(LS,i),jr=null,Zr.call(i))}function LS(i,o){if(!(o.state.loading&4)){var r=jr.get(i);if(r)var u=r.get(null);else{r=new Map,jr.set(i,r);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var C=m[y];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(r.set(C.dataset.precedence,C),u=C)}u&&r.set(null,u)}m=o.instance,C=m.getAttribute("data-precedence"),y=r.get(C)||u,y===u&&r.set(null,m),r.set(C,m),this.count++,u=Zr.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var ul={$$typeof:L,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function OS(i,o,r,u,m,y,C,S,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.hiddenUpdates=fu(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function ay(i,o,r,u,m,y,C,S,A,U,F,K){return i=new OS(i,o,r,C,A,U,F,K,S),o=1,y===!0&&(o|=24),y=Jt(3,null,null,o),i.current=y,y.stateNode=i,o=Xu(),o.refCount++,i.pooledCache=o,o.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:o},ec(y),i}function uy(i){return i?(i=bs,i):bs}function cy(i,o,r,u,m,y){m=uy(m),u.context===null?u.context=m:u.pendingContext=m,u=ci(o),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=di(i,u,o),r!==null&&(Gt(r,i,o),Vo(r,i,o))}function dy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<o?r:o}}function vd(i,o){dy(i,o),(i=i.alternate)&&dy(i,o)}function fy(i){if(i.tag===13||i.tag===31){var o=qi(i,67108864);o!==null&&Gt(o,i,67108864),vd(i,67108864)}}function hy(i){if(i.tag===13||i.tag===31){var o=Wt();o=hu(o);var r=qi(i,o);r!==null&&Gt(r,i,o),vd(i,o)}}var ta=!0;function HS(i,o,r,u){var m=R.T;R.T=null;var y=B.p;try{B.p=2,_d(i,o,r,u)}finally{B.p=y,R.T=m}}function GS(i,o,r,u){var m=R.T;R.T=null;var y=B.p;try{B.p=8,_d(i,o,r,u)}finally{B.p=y,R.T=m}}function _d(i,o,r,u){if(ta){var m=xd(u);if(m===null)od(i,o,u,na,r),my(i,u);else if(VS(m,i,o,r,u))u.stopPropagation();else if(my(i,u),o&4&&-1<BS.indexOf(i)){for(;m!==null;){var y=ps(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var C=Oi(y.pendingLanes);if(C!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;C;){var A=1<<31-zt(C);S.entanglements[1]|=A,C&=~A}wn(y),(Oe&6)===0&&(Hr=qt()+500,il(0))}}break;case 31:case 13:S=qi(y,2),S!==null&&Gt(S,y,2),Br(),vd(y,2)}if(y=xd(u),y===null&&od(i,o,u,na,r),y===m)break;m=y}m!==null&&u.stopPropagation()}else od(i,o,u,null,r)}}function xd(i){return i=Cu(i),Ed(i)}var na=null;function Ed(i){if(na=null,i=hs(i),i!==null){var o=a(i);if(o===null)i=null;else{var r=o.tag;if(r===13){if(i=c(o),i!==null)return i;i=null}else if(r===31){if(i=h(o),i!==null)return i;i=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return na=i,null}function py(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bE()){case Ch:return 2;case Sh:return 8;case Yl:case AE:return 32;case Th:return 268435456;default:return 32}default:return 32}}var Cd=!1,Ci=null,Si=null,Ti=null,cl=new Map,dl=new Map,bi=[],BS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function my(i,o){switch(i){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Si=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":cl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(o.pointerId)}}function fl(i,o,r,u,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},o!==null&&(o=ps(o),o!==null&&fy(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function VS(i,o,r,u,m){switch(o){case"focusin":return Ci=fl(Ci,i,o,r,u,m),!0;case"dragenter":return Si=fl(Si,i,o,r,u,m),!0;case"mouseover":return Ti=fl(Ti,i,o,r,u,m),!0;case"pointerover":var y=m.pointerId;return cl.set(y,fl(cl.get(y)||null,i,o,r,u,m)),!0;case"gotpointercapture":return y=m.pointerId,dl.set(y,fl(dl.get(y)||null,i,o,r,u,m)),!0}return!1}function gy(i){var o=hs(i.target);if(o!==null){var r=a(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){i.blockedOn=o,Ih(i.priority,function(){hy(r)});return}}else if(o===31){if(o=h(r),o!==null){i.blockedOn=o,Ih(i.priority,function(){hy(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ia(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var r=xd(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);Eu=u,r.target.dispatchEvent(u),Eu=null}else return o=ps(r),o!==null&&fy(o),i.blockedOn=r,!1;o.shift()}return!0}function yy(i,o,r){ia(i)&&r.delete(o)}function qS(){Cd=!1,Ci!==null&&ia(Ci)&&(Ci=null),Si!==null&&ia(Si)&&(Si=null),Ti!==null&&ia(Ti)&&(Ti=null),cl.forEach(yy),dl.forEach(yy)}function sa(i,o){i.blockedOn===o&&(i.blockedOn=null,Cd||(Cd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qS)))}var oa=null;function vy(i){oa!==i&&(oa=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){oa===i&&(oa=null);for(var o=0;o<i.length;o+=3){var r=i[o],u=i[o+1],m=i[o+2];if(typeof u!="function"){if(Ed(u||r)===null)continue;break}var y=ps(r);y!==null&&(i.splice(o,3),o-=3,xc(y,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function $s(i){function o(A){return sa(A,i)}Ci!==null&&sa(Ci,i),Si!==null&&sa(Si,i),Ti!==null&&sa(Ti,i),cl.forEach(o),dl.forEach(o);for(var r=0;r<bi.length;r++){var u=bi[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<bi.length&&(r=bi[0],r.blockedOn===null);)gy(r),r.blockedOn===null&&bi.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],y=r[u+1],C=m[kt]||null;if(typeof y=="function")C||vy(r);else if(C){var S=null;if(y&&y.hasAttribute("formAction")){if(m=y,C=y[kt]||null)S=C.formAction;else if(Ed(m)!==null)continue}else S=C.action;typeof S=="function"?r[u+1]=S:(r.splice(u,3),u-=3),vy(r)}}}function _y(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(C){return m=C})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function Sd(i){this._internalRoot=i}la.prototype.render=Sd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=Wt();cy(r,u,i,o,null,null)},la.prototype.unmount=Sd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;cy(i.current,2,null,i,null,null),Br(),o[fs]=null}};function la(i){this._internalRoot=i}la.prototype.unstable_scheduleHydration=function(i){if(i){var o=Rh();i={blockedOn:null,target:i,priority:o};for(var r=0;r<bi.length&&o!==0&&o<bi[r].priority;r++);bi.splice(r,0,i),r===0&&gy(i)}};var xy=e.version;if(xy!=="19.2.4")throw Error(s(527,xy,"19.2.4"));B.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var FS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ra.isDisabled&&ra.supportsFiber)try{Eo=ra.inject(FS),Ft=ra}catch{}}return pl.createRoot=function(i,o){if(!l(i))throw Error(s(299));var r=!1,u="",m=Nm,y=wm,C=Rm;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError)),o=ay(i,1,!1,null,null,r,u,null,m,y,C,_y),i[fs]=o.current,sd(i),new Sd(o)},pl.hydrateRoot=function(i,o,r){if(!l(i))throw Error(s(299));var u=!1,m="",y=Nm,C=wm,S=Rm,A=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(C=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),o=ay(i,1,!0,o,r??null,u,m,A,y,C,S,_y),o.context=uy(null),r=o.current,u=Wt(),u=hu(u),m=ci(u),m.callback=null,di(r,m,u),r=u,o.current.lanes=r,So(o,r),wn(o),i[fs]=o.current,sd(i),new la(o)},pl.version="19.2.4",pl}var Iy;function eT(){if(Iy)return Ad.exports;Iy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ad.exports=jS(),Ad.exports}var tT=eT();const nT=s_(tT),iT=({squares:t,pendingSelection:e,settings:n,onSquareClick:s,participants:l,onCheckout:a})=>{const[c,h]=ne.useState(!1),g=ne.useRef(null),p=(L,H)=>{const z=L==="row"?n.rowNumbers:n.colNumbers;return z&&z.length>0?z[H]:"?"},v=ne.useMemo(()=>Array.from({length:10},(L,H)=>(t||[]).filter(z=>z.row===H)),[t]),x=ne.useMemo(()=>{const L=t.filter(W=>W.assigned).length,H=n.costPerBox||10,z=t.reduce((W,ae)=>W+(ae.paidAmount||0),0),ee=L*H;return{assigned:L,remaining:100-L,totalRaised:z,potentialTotal:ee}},[t,n.costPerBox]),E=()=>{window.print(),h(!1)},T=()=>{if(g.current){const L=g.current.innerHTML;window.openPrintWindow&&window.openPrintWindow(L)}h(!1)},b=()=>{const L=["Square #","Row Num","Col Num","Player Alias","Status"],H=t.map(j=>[j.id+1,p("row",j.row),p("col",j.col),j.assigned?j.alias:"Unassigned",j.paidAmount>=n.costPerBox?"Paid":j.assigned?"Pending":"Available"]),z=[L,...H].map(j=>j.join(",")).join(`
`),ee=new Blob([z],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(ee),ae=document.createElement("a");ae.setAttribute("href",W),ae.setAttribute("download",`grid_mapping_${new Date().toISOString().split("T")[0]}.csv`),ae.click(),h(!1)},M="w-12 md:w-28",I="w-12 md:w-24";return _.jsxs("div",{className:"flex flex-col items-center w-full relative",children:[_.jsx("div",{className:"w-full max-w-4xl mb-6 px-4 print-hidden",children:_.jsxs("div",{className:"bg-indigo-900 rounded-3xl p-6 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-4 border-b-4 border-indigo-950",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center text-white",children:_.jsx("i",{className:"fas fa-hand-holding-heart text-xl"})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-indigo-300 text-[9px] font-black uppercase tracking-widest",children:"Charity Impact Goal"}),_.jsxs("h3",{className:"text-xl font-black text-white uppercase leading-none mt-1",children:["$",x.totalRaised," ",_.jsxs("span",{className:"text-indigo-400",children:["/ $",x.potentialTotal," Raised"]})]})]})]}),_.jsx("div",{className:"flex gap-3",children:_.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-xl border border-white/10 flex flex-col items-center",children:[_.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase",children:"Per Box"}),_.jsxs("span",{className:"text-sm font-black text-white",children:["$",n.costPerBox]})]})})]})}),_.jsxs("div",{className:"grid-controls w-full max-w-5xl flex flex-col md:flex-row items-center justify-between mb-8 print-hidden px-4 gap-4 z-[90] relative",children:[_.jsxs("div",{className:"flex items-center gap-3 relative",children:[_.jsxs("button",{type:"button",onClick:()=>h(!c),className:"bg-white text-indigo-900 px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-all flex items-center gap-3 border-2 border-indigo-100 shadow-xl cursor-pointer active:scale-95 select-none",children:[_.jsx("i",{className:"fas fa-file-export text-indigo-600"})," Export & Print",_.jsx("i",{className:`fas fa-chevron-${c?"up":"down"} text-[8px] transition-transform`})]}),c&&_.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-indigo-50 p-2 animate-in slide-in-from-top-2 duration-200 z-[100]",children:[_.jsxs("button",{onClick:E,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[_.jsx("i",{className:"fas fa-desktop text-indigo-400 text-xs"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Browser Print"}),_.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Standard system dialog"})]})]}),_.jsxs("button",{onClick:T,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[_.jsx("i",{className:"fas fa-window-maximize text-indigo-400 text-xs"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Isolated Print View"}),_.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Best for mobile & tablets"})]})]}),_.jsx("div",{className:"h-[1px] bg-indigo-50 my-1"}),_.jsxs("button",{onClick:b,className:"w-full text-left px-4 py-3 hover:bg-green-50 rounded-xl flex items-center gap-3 transition-colors",children:[_.jsx("i",{className:"fas fa-file-csv text-green-500 text-xs"}),_.jsxs("div",{children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Export Grid CSV"}),_.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Download mapping data"})]})]})]})]}),e.length>0&&_.jsxs("button",{onClick:a,className:"bg-green-600 text-white px-10 py-4 rounded-2xl text-[12px] font-black uppercase tracking-[0.2em] hover:bg-black hover:scale-105 active:scale-95 transition-all flex items-center gap-3 shadow-2xl cursor-pointer border-none outline-none ring-4 ring-green-500/20 animate-in slide-in-from-right-4",children:[_.jsx("i",{className:"fas fa-shopping-cart"})," Claim ",e.length," Selected Box",e.length>1?"es":""]})]}),_.jsx("div",{ref:g,className:"w-full overflow-x-auto overflow-y-hidden pb-8 mb-4 touch-pan-x scrollbar-hide print:overflow-visible print:pb-0",children:_.jsx("div",{className:"inline-block p-4 print:p-0 min-w-max flex justify-center w-full",children:_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("div",{className:"flex items-end mb-1",children:[_.jsx("div",{className:"w-[85px] md:w-[154px] flex-shrink-0"}),_.jsxs("div",{className:"flex flex-col items-center",children:[_.jsx("div",{className:"bg-white border-2 border-indigo-900 px-8 py-2 rounded-full shadow-sm mb-3 print:border-indigo-900",children:_.jsxs("span",{className:"text-[10px] md:text-sm font-black text-indigo-900 uppercase tracking-widest whitespace-nowrap",children:[n.teamB||"AFC"," (Horizontal)"]})}),_.jsx("div",{className:"flex gap-[1px] md:gap-[2px]",children:Array.from({length:10}).map((L,H)=>_.jsx("div",{className:`${M} h-8 md:h-12 flex items-center justify-center font-black text-sm md:text-2xl text-indigo-900 bg-indigo-50 rounded-t-lg md:rounded-t-xl border-b border-indigo-200 print:rounded-none shadow-sm axis-label`,children:p("col",H)},H))})]})]}),_.jsxs("div",{className:"flex",children:[_.jsx("div",{className:"w-8 md:w-12 flex flex-col items-center justify-center bg-indigo-900 rounded-l-2xl shadow-lg mr-1 md:mr-2 print:bg-white print:border-2 print:border-indigo-900 flex-shrink-0",children:_.jsxs("span",{className:"text-[9px] md:text-xs font-black text-white print:text-indigo-900 uppercase tracking-[0.2em] whitespace-nowrap [writing-mode:vertical-lr] rotate-180",children:[n.teamA||"NFC"," (Vertical)"]})}),_.jsx("div",{className:"flex flex-col gap-[1px] md:gap-[2px] mr-[1px] md:mr-[2px] flex-shrink-0",children:Array.from({length:10}).map((L,H)=>_.jsx("div",{className:`axis-label h-12 md:h-20 ${I} flex items-center justify-center font-black text-sm md:text-2xl text-white bg-indigo-800 border-r border-indigo-900/50 print:bg-gray-50 print:text-indigo-900 shadow-sm`,children:p("row",H)},H))}),_.jsx("div",{className:"grid-body-container flex flex-col gap-[1px] md:gap-[2px] bg-indigo-900 border-2 md:border-4 border-indigo-900 rounded-tr-lg md:rounded-tr-2xl rounded-br-lg md:rounded-br-2xl overflow-hidden shadow-2xl print:shadow-none print:border-indigo-900 print:rounded-none",children:v.map((L,H)=>_.jsx("div",{className:"flex gap-[1px] md:gap-[2px]",children:L.map(z=>{const ee=(n==null?void 0:n.costPerBox)||10,W=z.paidAmount||0,ae=W>=ee&&ee>0,j=W>0&&!ae,fe=e.includes(z.id);return _.jsxs("div",{className:`square-box ${M} h-12 md:h-20 flex flex-col items-center justify-center p-0.5 transition-all duration-200 relative
                            ${z.assigned?ae?"bg-green-50":j?"bg-orange-50":"bg-indigo-50":fe?"bg-indigo-600 ring-2 md:ring-4 ring-indigo-400/50 scale-95 z-10 shadow-inner":n!=null&&n.isLocked?"bg-gray-100":"bg-white"}
                          `,onClick:()=>s(z.id),style:{cursor:n!=null&&n.isLocked&&!z.assigned?"default":"pointer"},children:[_.jsx("span",{className:`absolute top-0.5 left-0.5 text-[6px] md:text-[9px] font-black pointer-events-none ${fe?"text-white/60":"text-indigo-950/20"}`,children:z.id+1}),z.assigned?_.jsxs("div",{className:"flex flex-col items-center justify-center w-full px-1 overflow-hidden",children:[_.jsx("span",{className:"text-[7px] md:text-[11px] font-black text-indigo-950 uppercase leading-tight line-clamp-2 break-all w-full text-center",children:z.alias.toUpperCase()}),_.jsxs("div",{className:"mt-1 flex items-center gap-1 print:hidden",children:[ae&&_.jsx("i",{className:"fas fa-check-circle text-green-600 text-[7px] md:text-[12px]"}),j&&_.jsx("i",{className:"fas fa-dot-circle text-orange-500 text-[7px] md:text-[12px]"})]})]}):fe?_.jsx("div",{className:"animate-pulse no-print",children:_.jsx("i",{className:"fas fa-shopping-cart text-white text-[10px] md:text-[16px]"})}):null]},z.id)})},H))})]})]})})}),_.jsx("div",{className:"status-bar w-full max-w-2xl mb-6 px-4 print-hidden",children:_.jsxs("div",{className:"flex items-center justify-between bg-white border border-indigo-100 rounded-2xl p-4 shadow-sm",children:[_.jsxs("div",{className:"flex flex-col",children:[_.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Contest Availability"}),_.jsxs("p",{className:"text-xl font-black text-indigo-900 uppercase leading-none mt-1",children:[x.remaining," ",_.jsx("span",{className:"text-sm font-bold text-gray-400 ml-1",children:"Boxes Left"})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("div",{className:"h-2 w-32 bg-gray-100 rounded-full overflow-hidden self-center",children:_.jsx("div",{className:`h-full transition-all duration-1000 ${x.remaining<10?"bg-red-500":"bg-indigo-500"}`,style:{width:`${x.assigned}%`}})}),_.jsxs("span",{className:"text-[10px] font-black text-indigo-900",children:[x.assigned,"% Full"]})]})]})}),_.jsxs("div",{className:"legend-container w-full max-w-2xl bg-indigo-50/50 p-4 md:p-8 rounded-2xl md:rounded-[2.5rem] border border-indigo-100 backdrop-blur-sm print-hidden",children:[_.jsx("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-4",children:"Legend"}),_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-xs",children:[_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-xl border border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-600"}),_.jsx("span",{className:"font-black text-green-900 uppercase text-[9px]",children:"Fully Paid"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-xl border border-orange-100",children:[_.jsx("i",{className:"fas fa-dot-circle text-orange-500"}),_.jsx("span",{className:"font-black text-orange-900 uppercase text-[9px]",children:"Partial"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-50 rounded-xl border border-indigo-100",children:[_.jsx("i",{className:"fas fa-clock text-indigo-400"}),_.jsx("span",{className:"font-black text-indigo-900 uppercase text-[9px]",children:"Unpaid"})]}),_.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-600 rounded-xl border border-indigo-700",children:[_.jsx("i",{className:"fas fa-shopping-cart text-white"}),_.jsx("span",{className:"font-black text-white uppercase text-[9px]",children:"In Cart"})]})]})]})]})};var sT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let oT,lT;function rT(){return{geminiUrl:oT,vertexUrl:lT}}function aT(t,e,n,s){var l,a;if(!(t!=null&&t.baseUrl)){const c=rT();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:n:(a=c.geminiUrl)!==null&&a!==void 0?a:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn{}function ie(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const v=g[p];f(v,e.slice(a+1),n[p])}else for(const p of g)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],l=t[s];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const l=e[s];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>d(h,e.slice(s+1),n)):n}else return n}else t=t[l]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function uT(t,e){for(const[n,s]of Object.entries(e)){const l=n.split("."),a=s.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}Fd(t,l,a,0,c)}}function Fd(t,e,n,s,l){if(s>=e.length||typeof t!="object"||t===null)return;const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])Fd(g,e,n,s+1,l)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!l.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,v]of Object.entries(g)){const x=[];for(const E of n.slice(s))E==="*"?x.push(p):x.push(E);f(c,x,v)}for(const p of h)delete c[p]}}else{const c=t;a in c&&Fd(c[a],e,n,s+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cT(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function dT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],hT(c)),e}function fT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],pT(c)),e}function hT(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>mT(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function pT(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>gT(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function mT(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],CT(n)),e}function gT(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],ST(n)),e}function yT(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function vT(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function _T(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],xT(c)),e}function xT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function o_(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],ET(c)),e}function ET(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function CT(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Nf(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function ST(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Nf(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var My;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(My||(My={}));var Dy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Dy||(Dy={}));var ky;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ky||(ky={}));var wi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(wi||(wi={}));var Uy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Uy||(Uy={}));var Py;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Py||(Py={}));var Ly;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Ly||(Ly={}));var Oy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Oy||(Oy={}));var Hy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Hy||(Hy={}));var Gy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Gy||(Gy={}));var By;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(By||(By={}));var Vy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Vy||(Vy={}));var qy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(qy||(qy={}));var Fy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Fy||(Fy={}));var zy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(zy||(zy={}));var Yy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Yy||(Yy={}));var Jy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Jy||(Jy={}));var Ky;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ky||(Ky={}));var Qy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Qy||(Qy={}));var $y;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})($y||($y={}));var Xy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Xy||(Xy={}));var xa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(xa||(xa={}));var Wy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Wy||(Wy={}));var Zy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Zy||(Zy={}));var jy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(jy||(jy={}));var zd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zd||(zd={}));var ev;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ev||(ev={}));var tv;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(tv||(tv={}));var Yd;(function(t){t.COLLECTION="COLLECTION"})(Yd||(Yd={}));var nv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(nv||(nv={}));var iv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(iv||(iv={}));var sv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(sv||(sv={}));var ov;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(ov||(ov={}));var lv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(lv||(lv={}));var rv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(rv||(rv={}));var av;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(av||(av={}));var uv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(uv||(uv={}));var cv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cv||(cv={}));var dv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(dv||(dv={}));var fv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(fv||(fv={}));var hv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(hv||(hv={}));var pv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(pv||(pv={}));var mv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mv||(mv={}));var gv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(gv||(gv={}));var yv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yv||(yv={}));var vv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(vv||(vv={}));var _v;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_v||(_v={}));var xv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(xv||(xv={}));var Ev;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ev||(Ev={}));var Cv;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(Cv||(Cv={}));var Sv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Sv||(Sv={}));var Tv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Tv||(Tv={}));var bv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(bv||(bv={}));var Av;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Av||(Av={}));var Nv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Nv||(Nv={}));var wv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(wv||(wv={}));var Zs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Zs||(Zs={}));class Jd{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ml{get text(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",v=!1;const x=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,b]of Object.entries(E))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(b!==null||b!==void 0)&&x.push(T);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,p+=E.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?p:void 0}get data(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const v=[];for(const x of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,T]of Object.entries(x))E!=="inlineData"&&(T!==null||T!==void 0)&&v.push(E);x.inlineData&&typeof x.inlineData.data=="string"&&(p+=atob(x.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,l,a,c,h,g,p;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,l,a,c,h,g,p;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((v==null?void 0:v.length)!==0)return(p=v==null?void 0:v[0])===null||p===void 0?void 0:p.output}}class Rv{}class Iv{}class TT{}class bT{}class AT{}class NT{}class Mv{}class Dv{}class kv{}class wT{}class Ea{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Ea;let l;const a=e;return n?l=fT(a):l=dT(a),Object.assign(s,l),s}}class Uv{}class Pv{}class Lv{}class Ov{}class RT{}class IT{}class MT{}class wf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new wf,a=_T(e);return Object.assign(s,a),s}}class DT{}class kT{}class UT{}class Hv{}class PT{get text(){var e,n,s;let l="",a=!1;const c=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,n,s;let l="";const a=[];for(const c of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class LT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Rf,a=o_(e);return Object.assign(s,a),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function l_(t,e){const n=Le(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function r_(t){return Array.isArray(t)?t.map(e=>Ca(e)):[Ca(t)]}function Ca(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function a_(t){const e=Ca(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function u_(t){const e=Ca(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function c_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gv(e)):[Gv(t)]}function Kd(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Bv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function wt(t){if(t==null)throw new Error("ContentUnion is required");return Kd(t)?t:{role:"user",parts:c_(t)}}function If(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=wt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=wt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>wt(n)):[wt(e)]}function fn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Bv(t)||Vv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[wt(t)]}const e=[],n=[],s=Kd(t[0]);for(const l of t){const a=Kd(l);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(Bv(l)||Vv(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return s||e.push({role:"user",parts:c_(n)}),e}function OT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(wi).includes(n[0].toUpperCase())?n[0].toUpperCase():wi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(wi).includes(s.toUpperCase())?s.toUpperCase():wi.TYPE_UNSPECIFIED})}}function to(t){const e={},n=["items"],s=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&OT(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(wi).includes(h.toUpperCase())?h.toUpperCase():wi.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=to(h);else if(s.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(to(p))}e[c]=g}else if(l.includes(c)){const g={};for(const[p,v]of Object.entries(h))g[p]=to(v);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Mf(t){return to(t)}function Df(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function po(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=to(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=to(e.response));return t}function mo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function HT(t,e,n,s=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function ei(t,e){if(typeof e!="string")throw new Error("name must be a string");return HT(t,e,"cachedContents")}function d_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Pi(t){return Nf(t)}function GT(t){return t!=null&&typeof t=="object"&&"name"in t}function BT(t){return t!=null&&typeof t=="object"&&"video"in t}function VT(t){return t!=null&&typeof t=="object"&&"uri"in t}function f_(t){var e;let n;if(GT(t)&&(n=t.name),!(VT(t)&&(n=t.uri,n===void 0))&&!(BT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function h_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function p_(t){for(const e of["models","tunedModels","publisherModels"])if(qT(t,e))return t[e];return[]}function qT(t,e){return t!==null&&typeof t=="object"&&e in t}function FT(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function zT(t,e={}){const n=[],s=new Set;for(const l of t){const a=l.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const c=FT(l,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function m_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function YT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function g_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function go(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function y_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JT(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Ab(c))),f(e,["inlinedResponses"],a)}const l=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["inlinedEmbedContentResponses"],a)}return e}function KT(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigqueryDestination","outputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function QT(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigqueryDestination","outputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ga(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["metadata","state"]);l!=null&&f(e,["state"],y_(l));const a=d(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],JT(g_(p))),e}function Qd(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["state"]);l!=null&&f(e,["state"],y_(l));const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const v=d(t,["model"]);v!=null&&f(e,["model"],v);const x=d(t,["inputConfig"]);x!=null&&f(e,["src"],$T(x));const E=d(t,["outputConfig"]);E!=null&&f(e,["dest"],KT(g_(E)));const T=d(t,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function $T(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigquerySource","inputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function XT(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(n,["fileName"],s);const l=d(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>bb(t,c))),f(n,["requests","requests"],a)}return n}function WT(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigquerySource","inputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ZT(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function jT(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function eb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function tb(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],nb(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function nb(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function v_(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>kb(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function ib(t,e){const n={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function sb(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["dest"]);return e!==void 0&&l!=null&&f(e,["outputConfig"],QT(YT(l))),n}function qv(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],XT(t,m_(t,l)));const a=d(e,["config"]);return a!=null&&ib(a,n),n}function ob(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],Le(t,s));const l=d(e,["src"]);l!=null&&f(n,["inputConfig"],WT(m_(t,l)));const a=d(e,["config"]);return a!=null&&sb(a,n),n}function lb(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),n}function rb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],pb(t,l));const a=d(e,["config"]);return a!=null&&lb(a,n),n}function ab(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function ub(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function cb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function db(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function fb(t,e){const n={},s=d(e,["contents"]);if(s!=null){let a=If(t,s);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","request","content"],a)}const l=d(e,["config"]);return l!=null&&(f(n,["_self"],hb(l,n)),uT(n,{"requests[].*":"requests[].request.*"})),n}function hb(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function pb(t,e){const n={},s=d(e,["fileName"]);s!=null&&f(n,["file_name"],s);const l=d(e,["inlinedRequests"]);return l!=null&&f(n,["requests"],fb(t,l)),n}function mb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function gb(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function yb(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function vb(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],v_(wt(l)));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],Mf(G));const Y=d(e,["responseJsonSchema"]);if(Y!=null&&f(s,["responseJsonSchema"],Y),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(n!==void 0&&L!=null){let ye=L;Array.isArray(ye)&&(ye=ye.map(oe=>Ub(oe))),f(n,["safetySettings"],ye)}const H=d(e,["tools"]);if(n!==void 0&&H!=null){let ye=mo(H);Array.isArray(ye)&&(ye=ye.map(oe=>Lb(po(oe)))),f(n,["tools"],ye)}const z=d(e,["toolConfig"]);if(n!==void 0&&z!=null&&f(n,["toolConfig"],Pb(z)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=d(e,["cachedContent"]);n!==void 0&&ee!=null&&f(n,["cachedContent"],ei(t,ee));const W=d(e,["responseModalities"]);W!=null&&f(s,["responseModalities"],W);const ae=d(e,["mediaResolution"]);ae!=null&&f(s,["mediaResolution"],ae);const j=d(e,["speechConfig"]);if(j!=null&&f(s,["speechConfig"],Df(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const fe=d(e,["thinkingConfig"]);fe!=null&&f(s,["thinkingConfig"],fe);const ce=d(e,["imageConfig"]);ce!=null&&f(s,["imageConfig"],Tb(ce));const Te=d(e,["enableEnhancedCivicAnswers"]);if(Te!=null&&f(s,["enableEnhancedCivicAnswers"],Te),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function _b(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>tb(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function xb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function Eb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],go(t,s)),n}function Cb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Sb(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Tb(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function bb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["request","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let h=fn(l);Array.isArray(h)&&(h=h.map(g=>v_(g))),f(n,["request","contents"],h)}const a=d(e,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(e,["config"]);return c!=null&&f(n,["request","generationConfig"],vb(t,c,d(n,["request"],{}))),n}function Ab(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],_b(n));const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function Nb(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);if(e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function wb(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const a=d(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function Rb(t){const e={},n=d(t,["config"]);return n!=null&&Nb(n,e),e}function Ib(t){const e={},n=d(t,["config"]);return n!=null&&wb(n,e),e}function Mb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>ga(c))),f(e,["batchJobs"],a)}return e}function Db(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Qd(c))),f(e,["batchJobs"],a)}return e}function kb(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],mb(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],gb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],ZT(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function Ub(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function Pb(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],yb(s)),e}function Lb(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],Cb(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],Sb(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Xn||(Xn={}));class us{constructor(e,n,s,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,l)}init(e,n,s){var l,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ob extends jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Xn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=qv(this.apiClient,e),s=n._url,l=ie("{model}:batchGenerateContent",s),h=n.batch.inputConfig.requests,g=h.requests,p=[];for(const v of g){const x=Object.assign({},v);if(x.systemInstruction){const E=x.systemInstruction;delete x.systemInstruction;const T=x.request;T.systemInstruction=E,x.request=T}p.push(x)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},l=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${l}`),s.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?s.dest=`${a.slice(0,-6)}/dest`:s.dest=`${a}_dest_${l}`;else if(c)s.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ob(this.apiClient,e);return h=ie("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Qd(v))}else{const p=qv(this.apiClient,e);return h=ie("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>ga(v))}}async createEmbeddingsInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=rb(this.apiClient,e);return a=ie("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>ga(g))}}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Eb(this.apiClient,e);return h=ie("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Qd(v))}else{const p=xb(this.apiClient,e);return h=ie("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>ga(v))}}async cancel(e){var n,s,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=eb(this.apiClient,e);c=ie("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=jT(this.apiClient,e);c=ie("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Ib(e);return h=ie("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Db(v),E=new Hv;return Object.assign(E,x),E})}else{const p=Rb(e);return h=ie("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Mb(v),E=new Hv;return Object.assign(E,x),E})}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ub(this.apiClient,e);return h=ie("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>db(v))}else{const p=ab(this.apiClient,e);return h=ie("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>cb(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hb(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Fv(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>rA(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function Gb(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let v=fn(c);Array.isArray(v)&&(v=v.map(x=>Fv(x))),f(e,["contents"],v)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Fv(wt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(x=>uA(x))),f(e,["tools"],v)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],aA(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Bb(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let x=fn(c);Array.isArray(x)&&(x=x.map(E=>E)),f(e,["contents"],x)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],wt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(E=>cA(E))),f(e,["tools"],x)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const v=d(t,["kmsKeyName"]);return e!==void 0&&v!=null&&f(e,["encryption_spec","kmsKeyName"],v),n}function Vb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],l_(t,s));const l=d(e,["config"]);return l!=null&&Gb(l,n),n}function qb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],l_(t,s));const l=d(e,["config"]);return l!=null&&Bb(l,n),n}function Fb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ei(t,s)),n}function zb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ei(t,s)),n}function Yb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Jb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Kb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Qb(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function $b(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Xb(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Wb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ei(t,s)),n}function Zb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],ei(t,s)),n}function jb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function eA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function tA(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function nA(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function iA(t){const e={},n=d(t,["config"]);return n!=null&&tA(n,e),e}function sA(t){const e={},n=d(t,["config"]);return n!=null&&nA(n,e),e}function oA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function lA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function rA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],Kb(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Qb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Hb(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function aA(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],$b(s)),e}function uA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],jb(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],eA(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function cA(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>Xb(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function dA(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function fA(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function hA(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],ei(t,s));const l=d(e,["config"]);return l!=null&&dA(l,n),n}function pA(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],ei(t,s));const l=d(e,["config"]);return l!=null&&fA(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mA extends jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Xn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qb(this.apiClient,e);return h=ie("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Vb(this.apiClient,e);return h=ie("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Zb(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=Wb(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=zb(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Jb(v),E=new Lv;return Object.assign(E,x),E})}else{const p=Fb(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Yb(v),E=new Lv;return Object.assign(E,x),E})}}async update(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=pA(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const p=hA(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=sA(e);return h=ie("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=lA(v),E=new Ov;return Object.assign(E,x),E})}else{const p=iA(e);return h=ie("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=oA(v),E=new Ov;return Object.assign(E,x),E})}}}function Sa(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(n[s[l]]=t[s[l]]);return n}function zv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(t){return this instanceof xe?(this.v=t,this):new xe(t)}function xn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(T){return function(b){return Promise.resolve(b).then(T,x)}}function h(T,b){s[T]&&(l[T]=function(M){return new Promise(function(I,G){a.push([T,M,I,G])>1||g(T,M)})},b&&(l[T]=b(l[T])))}function g(T,b){try{p(s[T](b))}catch(M){E(a[0][3],M)}}function p(T){T.value instanceof xe?Promise.resolve(T.value.v).then(v,x):E(a[0][2],T)}function v(T){g("next",T)}function x(T){g("throw",T)}function E(T,b){T(b),a.shift(),a.length&&g(a[0][0],a[0][1])}}function En(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zv=="function"?zv(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gA(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:__(n)}function __(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function yA(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Yv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const l=[];let a=!0;for(;s<n&&t[s].role==="model";)l.push(t[s]),a&&!__(t[s])&&(a=!1),s++;a?e.push(...l):e.pop()}return e}class vA{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new _A(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class _A{constructor(e,n,s,l={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),yA(a)}async sendMessage(e){var n;await this.sendPromise;const s=wt(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,p=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,v=g.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let E=[];v!=null&&(E=(h=v.slice(x))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(s,T,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const s=wt(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,s)}getHistory(e=!1){const n=e?Yv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return xn(this,arguments,function*(){var l,a,c,h,g,p;const v=[];try{for(var x=!0,E=En(e),T;T=yield xe(E.next()),l=T.done,!l;x=!0){h=T.value,x=!1;const b=h;if(gA(b)){const M=(p=(g=b.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;M!==void 0&&v.push(M)}yield yield xe(b)}}catch(b){a={error:b}}finally{try{!x&&!l&&(c=E.return)&&(yield xe(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,v)})}recordHistory(e,n,s){let l=[];n.length>0&&n.every(a=>a.role!==void 0)?l=n:l.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...Yv(s)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,wl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xA(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function EA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function CA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],f_(n)),e}function SA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function TA(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],f_(n)),e}function bA(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function AA(t){const e={},n=d(t,["config"]);return n!=null&&bA(n,e),e}function NA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wA extends jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Xn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=AA(e);return a=ie("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=NA(g),v=new DT;return Object.assign(v,p),v})}}async createInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=xA(e);return a=ie("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=EA(g),v=new kT;return Object.assign(v,p),v})}}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=TA(e);return a=ie("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=CA(e);return a=ie("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=SA(g),v=new UT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ya(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function RA(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>YA(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function IA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function MA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DA(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kA(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const b=d(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const G=d(t,["seed"]);G!=null&&f(e,["seed"],G);const Y=d(t,["speechConfig"]);Y!=null&&f(e,["speechConfig"],Y);const L=d(t,["stopSequences"]);L!=null&&f(e,["stopSequences"],L);const H=d(t,["temperature"]);H!=null&&f(e,["temperature"],H);const z=d(t,["thinkingConfig"]);z!=null&&f(e,["thinkingConfig"],z);const ee=d(t,["topK"]);ee!=null&&f(e,["topK"],ee);const W=d(t,["topP"]);if(W!=null&&f(e,["topP"],W),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function UA(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function PA(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function LA(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],RA(wt(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let ee=mo(M);Array.isArray(ee)&&(ee=ee.map(W=>KA(po(W)))),f(e,["setup","tools"],ee)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],JA(I));const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const Y=d(t,["outputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","outputAudioTranscription"],Y);const L=d(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const z=d(t,["proactivity"]);if(e!==void 0&&z!=null&&f(e,["setup","proactivity"],z),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function OA(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],kA(s));const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],wt(b));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let W=mo(M);Array.isArray(W)&&(W=W.map(ae=>QA(po(ae)))),f(e,["setup","tools"],W)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],I);const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const Y=d(t,["outputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","outputAudioTranscription"],Y);const L=d(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const z=d(t,["proactivity"]);e!==void 0&&z!=null&&f(e,["setup","proactivity"],z);const ee=d(t,["explicitVadSignal"]);return e!==void 0&&ee!=null&&f(e,["setup","explicitVadSignal"],ee),n}function HA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Le(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],LA(l,n)),n}function GA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Le(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],OA(l,n)),n}function BA(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function VA(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["weightedPrompts"],s)}return e}function qA(t){const e={},n=d(t,["media"]);if(n!=null){let p=r_(n);Array.isArray(p)&&(p=p.map(v=>ya(v))),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],ya(u_(s)));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],ya(a_(a)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function FA(t){const e={},n=d(t,["media"]);if(n!=null){let p=r_(n);Array.isArray(p)&&(p=p.map(v=>v)),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],u_(s));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],a_(a));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function zA(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const l=d(t,["toolCall"]);l!=null&&f(e,["toolCall"],l);const a=d(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],$A(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const v=d(t,["voiceActivity"]);return v!=null&&f(e,["voiceActivity"],XA(v)),e}function YA(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],IA(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],MA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],ya(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function JA(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KA(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],UA(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],PA(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function QA(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>DA(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function $A(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const l=d(t,["candidatesTokenCount"]);l!=null&&f(e,["responseTokenCount"],l);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(b=>b)),f(e,["promptTokensDetails"],T)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(b=>b)),f(e,["cacheTokensDetails"],T)}const v=d(t,["candidatesTokensDetails"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(b=>b)),f(e,["responseTokensDetails"],T)}const x=d(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(b=>b)),f(e,["toolUsePromptTokensDetails"],T)}const E=d(t,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}function XA(t){const e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function ZA(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],jA(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const v=d(t,["safetyRatings"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function jA(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function eN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let a=fn(l);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["contents"],a)}return n}function tN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["tokensInfo"],l)}return e}function nN(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const s=d(t,["statistics"]);return s!=null&&f(e,["statistics"],iN(s)),e}function iN(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const s=d(t,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function za(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>fw(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function sN(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const s=d(t,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function oN(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lN(t,e){const n={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],wt(s));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>S_(h))),f(e,["tools"],c)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],WN(a)),n}function rN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let c=fn(l);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&oN(a),n}function aN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let c=fn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&lN(a,n),n}function uN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const l=d(t,["cachedContentTokenCount"]);return l!=null&&f(e,["cachedContentTokenCount"],l),e}function cN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function dN(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],Le(t,s)),n}function fN(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],Le(t,s)),n}function hN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function pN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function mN(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const G=d(t,["labels"]);e!==void 0&&G!=null&&f(e,["labels"],G);const Y=d(t,["editMode"]);e!==void 0&&Y!=null&&f(e,["parameters","editMode"],Y);const L=d(t,["baseSteps"]);return e!==void 0&&L!=null&&f(e,["parameters","editConfig","baseSteps"],L),n}function gN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>vw(g))),f(n,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&mN(c,n),n}function yN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ya(a))),f(e,["generatedImages"],l)}return e}function vN(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _N(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function xN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let h=If(t,l);Array.isArray(h)&&(h=h.map(g=>g)),f(n,["requests[]","content"],h)}const a=d(e,["config"]);a!=null&&vN(a,n);const c=d(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],Le(t,c)),n}function EN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let c=If(t,l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["instances[]","content"],c)}const a=d(e,["config"]);return a!=null&&_N(a,n),n}function CN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function SN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>nN(c))),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function TN(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const s=d(t,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function bN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function AN(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NN(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wN(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function RN(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],za(wt(l)));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],Mf(G));const Y=d(e,["responseJsonSchema"]);if(Y!=null&&f(s,["responseJsonSchema"],Y),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const L=d(e,["safetySettings"]);if(n!==void 0&&L!=null){let ye=L;Array.isArray(ye)&&(ye=ye.map(oe=>_w(oe))),f(n,["safetySettings"],ye)}const H=d(e,["tools"]);if(n!==void 0&&H!=null){let ye=mo(H);Array.isArray(ye)&&(ye=ye.map(oe=>Aw(po(oe)))),f(n,["tools"],ye)}const z=d(e,["toolConfig"]);if(n!==void 0&&z!=null&&f(n,["toolConfig"],bw(z)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ee=d(e,["cachedContent"]);n!==void 0&&ee!=null&&f(n,["cachedContent"],ei(t,ee));const W=d(e,["responseModalities"]);W!=null&&f(s,["responseModalities"],W);const ae=d(e,["mediaResolution"]);ae!=null&&f(s,["mediaResolution"],ae);const j=d(e,["speechConfig"]);if(j!=null&&f(s,["speechConfig"],Df(j)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const fe=d(e,["thinkingConfig"]);fe!=null&&f(s,["thinkingConfig"],fe);const ce=d(e,["imageConfig"]);ce!=null&&f(s,["imageConfig"],nw(ce));const Te=d(e,["enableEnhancedCivicAnswers"]);if(Te!=null&&f(s,["enableEnhancedCivicAnswers"],Te),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function IN(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],wt(l));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const v=d(e,["stopSequences"]);v!=null&&f(s,["stopSequences"],v);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const b=d(e,["frequencyPenalty"]);b!=null&&f(s,["frequencyPenalty"],b);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const G=d(e,["responseSchema"]);G!=null&&f(s,["responseSchema"],Mf(G));const Y=d(e,["responseJsonSchema"]);Y!=null&&f(s,["responseJsonSchema"],Y);const L=d(e,["routingConfig"]);L!=null&&f(s,["routingConfig"],L);const H=d(e,["modelSelectionConfig"]);H!=null&&f(s,["modelConfig"],H);const z=d(e,["safetySettings"]);if(n!==void 0&&z!=null){let B=z;Array.isArray(B)&&(B=B.map(Z=>Z)),f(n,["safetySettings"],B)}const ee=d(e,["tools"]);if(n!==void 0&&ee!=null){let B=mo(ee);Array.isArray(B)&&(B=B.map(Z=>S_(po(Z)))),f(n,["tools"],B)}const W=d(e,["toolConfig"]);n!==void 0&&W!=null&&f(n,["toolConfig"],W);const ae=d(e,["labels"]);n!==void 0&&ae!=null&&f(n,["labels"],ae);const j=d(e,["cachedContent"]);n!==void 0&&j!=null&&f(n,["cachedContent"],ei(t,j));const fe=d(e,["responseModalities"]);fe!=null&&f(s,["responseModalities"],fe);const ce=d(e,["mediaResolution"]);ce!=null&&f(s,["mediaResolution"],ce);const Te=d(e,["speechConfig"]);Te!=null&&f(s,["speechConfig"],Df(Te));const ye=d(e,["audioTimestamp"]);ye!=null&&f(s,["audioTimestamp"],ye);const oe=d(e,["thinkingConfig"]);oe!=null&&f(s,["thinkingConfig"],oe);const De=d(e,["imageConfig"]);if(De!=null&&f(s,["imageConfig"],iw(De)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const R=d(e,["modelArmorConfig"]);return n!==void 0&&R!=null&&f(n,["modelArmorConfig"],R),s}function Jv(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let c=fn(l);Array.isArray(c)&&(c=c.map(h=>za(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],RN(t,a,n)),n}function Kv(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["contents"]);if(l!=null){let c=fn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],IN(t,a,n)),n}function Qv(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>ZA(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function $v(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(v=>v)),f(e,["candidates"],p)}const l=d(t,["createTime"]);l!=null&&f(e,["createTime"],l);const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function MN(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const v=d(t,["language"]);e!==void 0&&v!=null&&f(e,["parameters","language"],v);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function DN(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const b=d(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const G=d(t,["labels"]);e!==void 0&&G!=null&&f(e,["labels"],G);const Y=d(t,["imageSize"]);e!==void 0&&Y!=null&&f(e,["parameters","sampleImageSize"],Y);const L=d(t,["enhancePrompt"]);return e!==void 0&&L!=null&&f(e,["parameters","enhancePrompt"],L),n}function kN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&MN(a,n),n}function UN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&DN(a,n),n}function PN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>KN(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],E_(l)),e}function LN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Ya(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],C_(l)),e}function ON(t,e){const n={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(t,["lastFrame"]);e!==void 0&&v!=null&&f(e,["instances[0]","lastFrame"],Ja(v));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let E=x;Array.isArray(E)&&(E=E.map(T=>Gw(T))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function HN(t,e){const n={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const a=d(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const v=d(t,["personGeneration"]);e!==void 0&&v!=null&&f(e,["parameters","personGeneration"],v);const x=d(t,["pubsubTopic"]);e!==void 0&&x!=null&&f(e,["parameters","pubsubTopic"],x);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const b=d(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&f(e,["instances[0]","lastFrame"],Tn(M));const I=d(t,["referenceImages"]);if(e!==void 0&&I!=null){let L=I;Array.isArray(L)&&(L=L.map(H=>Bw(H))),f(e,["instances[0]","referenceImages"],L)}const G=d(t,["mask"]);e!==void 0&&G!=null&&f(e,["instances[0]","mask"],Hw(G));const Y=d(t,["compressionQuality"]);return e!==void 0&&Y!=null&&f(e,["parameters","compressionQuality"],Y),n}function GN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],FN(c)),e}function BN(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],zN(c)),e}function VN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],Ja(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],T_(c));const h=d(e,["source"]);h!=null&&YN(h,n);const g=d(e,["config"]);return g!=null&&ON(g,n),n}function qN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],Tn(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],b_(c));const h=d(e,["source"]);h!=null&&JN(h,n);const g=d(e,["config"]);return g!=null&&HN(g,n),n}function FN(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>$N(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function zN(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>XN(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function YN(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Ja(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],T_(a)),n}function JN(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Tn(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],b_(a)),n}function KN(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],sw(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);return l!=null&&f(e,["safetyAttributes"],E_(l)),e}function Ya(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],x_(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);l!=null&&f(e,["safetyAttributes"],C_(l));const a=d(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function QN(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],x_(n));const s=d(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["labels"],l)}return e}function $N(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],Lw(n)),e}function XN(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],Ow(n)),e}function WN(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const v=d(t,["mediaResolution"]);v!=null&&f(e,["mediaResolution"],v);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const b=d(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const G=d(t,["seed"]);G!=null&&f(e,["seed"],G);const Y=d(t,["speechConfig"]);Y!=null&&f(e,["speechConfig"],Y);const L=d(t,["stopSequences"]);L!=null&&f(e,["stopSequences"],L);const H=d(t,["temperature"]);H!=null&&f(e,["temperature"],H);const z=d(t,["thinkingConfig"]);z!=null&&f(e,["thinkingConfig"],z);const ee=d(t,["topK"]);ee!=null&&f(e,["topK"],ee);const W=d(t,["topP"]);if(W!=null&&f(e,["topP"],W),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function ZN(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],Le(t,s)),n}function jN(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],Le(t,s)),n}function ew(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function tw(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function nw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function iw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);s!=null&&f(e,["imageSize"],s);const l=d(t,["personGeneration"]);l!=null&&f(e,["personGeneration"],l);const a=d(t,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const c=d(t,["outputCompressionQuality"]);return c!=null&&f(e,["imageOutputOptions","compressionQuality"],c),e}function sw(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Pi(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function x_(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],Pi(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Ja(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Pi(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Tn(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Pi(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function ow(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],h_(t,h)),s}function lw(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],h_(t,h)),s}function rw(t,e){const n={},s=d(e,["config"]);return s!=null&&ow(t,s,n),n}function aw(t,e){const n={},s=d(e,["config"]);return s!=null&&lw(t,s,n),n}function uw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let a=p_(l);Array.isArray(a)&&(a=a.map(c=>$d(c))),f(e,["models"],a)}return e}function cw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let a=p_(l);Array.isArray(a)&&(a=a.map(c=>Xd(c))),f(e,["models"],a)}return e}function dw(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const s=d(t,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const l=d(t,["maskDilation"]);return l!=null&&f(e,["dilation"],l),e}function $d(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["version"]);a!=null&&f(e,["version"],a);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],Nw(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const v=d(t,["temperature"]);v!=null&&f(e,["temperature"],v);const x=d(t,["maxTemperature"]);x!=null&&f(e,["maxTemperature"],x);const E=d(t,["topP"]);E!=null&&f(e,["topP"],E);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const b=d(t,["thinking"]);return b!=null&&f(e,["thinking"],b),e}function Xd(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["versionId"]);a!=null&&f(e,["version"],a);const c=d(t,["deployedModels"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>TN(E))),f(e,["endpoints"],x)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],ww(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const v=d(t,["checkpoints"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(E=>E)),f(e,["checkpoints"],x)}return e}function fw(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],bN(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],AN(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],WA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function hw(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],Tn(n)),e}function pw(t,e){const n={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const v=d(t,["outputMimeType"]);e!==void 0&&v!=null&&f(e,["parameters","outputOptions","mimeType"],v);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const T=d(t,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),n}function mw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["source"]);l!=null&&yw(l,n);const a=d(e,["config"]);return a!=null&&pw(a,n),n}function gw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>Ya(l))),f(e,["generatedImages"],s)}return e}function yw(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],Tn(l));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>hw(h))),f(e,["instances[0]","productImages"],c)}return n}function vw(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Tn(n));const s=d(t,["referenceId"]);s!=null&&f(e,["referenceId"],s);const l=d(t,["referenceType"]);l!=null&&f(e,["referenceType"],l);const a=d(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],dw(a));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],sN(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function E_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function C_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function _w(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function xw(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],Tn(n)),e}function Ew(t,e){const n={},s=d(t,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","confidenceThreshold"],a);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),n}function Cw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["source"]);l!=null&&Tw(l,n);const a=d(e,["config"]);return a!=null&&Ew(a,n),n}function Sw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>QN(l))),f(e,["generatedMasks"],s)}return e}function Tw(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Tn(l));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&f(e,["instances[0]","scribble"],xw(a)),n}function bw(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],NN(s)),e}function Aw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],ew(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],tw(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function S_(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>wN(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const v=d(t,["urlContext"]);return v!=null&&f(e,["urlContext"],v),e}function Nw(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function ww(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Rw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Iw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Mw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","name"],Le(t,s));const l=d(e,["config"]);return l!=null&&Rw(l,n),n}function Dw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["config"]);return l!=null&&Iw(l,n),n}function kw(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const v=d(t,["imagePreservationFactor"]);e!==void 0&&v!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const T=d(t,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),n}function Uw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],Le(t,s));const l=d(e,["image"]);l!=null&&f(n,["instances[0]","image"],Tn(l));const a=d(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=d(e,["config"]);return c!=null&&kw(c,n),n}function Pw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>Ya(a))),f(e,["generatedImages"],l)}return e}function Lw(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],Pi(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function Ow(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],Pi(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Hw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],Tn(n));const s=d(t,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function Gw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Ja(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function Bw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Tn(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function T_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["encodedVideo"],Pi(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["encoding"],l),e}function b_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],Pi(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vw(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),n}function qw(t){const e={},n=d(t,["config"]);return n!=null&&Vw(n,e),e}function Fw(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function zw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&Fw(s,e),e}function Yw(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Jw(t,e){const n={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["customMetadata"],a)}const l=d(t,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),n}function Kw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],$w(c)),e}function Qw(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const l=d(t,["config"]);return l!=null&&Jw(l,e),e}function $w(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function Xw(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function Ww(t){const e={},n=d(t,["config"]);return n!=null&&Xw(n,e),e}function Zw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["fileSearchStores"],a)}return e}function A_(t,e){const n={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),n}function jw(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["config"]);return s!=null&&A_(s,e),e}function eR(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tR="Content-Type",nR="X-Server-Timeout",iR="User-Agent",Wd="x-goog-api-client",sR="1.38.0",oR=`google-genai-sdk/${sR}`,lR="v1beta1",rR="v1beta";class aR{constructor(e){var n,s,l;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:lR}else{if(!this.clientOptions.apiKey)throw new wl({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:rR,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const l=[this.getRequestUrlInternal(n)];return s&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===Yd.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(n))typeof a=="object"?s[l]=Object.assign(Object.assign({},s[l]),a):a!==void 0&&(s[l]=a);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,l){if(n&&n.timeout||l){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&uR(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await Xv(l),new Jd(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await Xv(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return xn(this,arguments,function*(){var s;const l=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:v}=yield xe(l.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=a.decode(v,{stream:!0});try{const b=JSON.parse(x);if("error"in b){const M=JSON.parse(JSON.stringify(b.error)),I=M.status,G=M.code,Y=`got status: ${I}. ${JSON.stringify(b)}`;if(G>=400&&G<600)throw new wl({message:Y,status:G})}}catch(b){if(b.name==="ApiError")throw b}c+=x;let E=-1,T=0;for(;;){E=-1,T=0;for(const I of g){const G=c.indexOf(I);G!==-1&&(E===-1||G<E)&&(E=G,T=I.length)}if(E===-1)break;const b=c.substring(0,E);c=c.substring(E+T);const M=b.trim();if(M.startsWith(h)){const I=M.substring(h.length).trim();try{const G=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xe(new Jd(G))}catch(G){throw new Error(`exception parsing stream chunk ${I}. ${G}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=oR+" "+this.clientOptions.userAgentExtra;return e[iR]=n,e[Wd]=n,e[tR]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))s.append(l,a);e.timeout&&e.timeout>0&&s.append(nR,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},p=this.getFileName(e),v=ie("upload/v1beta/files",g._url),x=await this.fetchUploadUrl(v,l.sizeBytes,l.mimeType,p,g,n==null?void 0:n.httpOptions);return a.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,s){var l;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(l=s==null?void 0:s.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(n),x={};s!=null&&A_(s,x);const E=await this.fetchUploadUrl(p,h,g,v,x,s==null?void 0:s.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},l?{"X-Goog-Upload-File-Name":l}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Xv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(s);throw n>=400&&n<600?new wl({message:l,status:n}):new Error(l)}}function uR(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],v=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&v&&typeof v=="object"&&!Array.isArray(v)?h[g]=s(v,p):(v&&p&&typeof v!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof v}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const l=s(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cR="mcp_used/unknown";let dR=!1;function N_(t){for(const e of t)if(fR(e)||typeof e=="object"&&"inputSchema"in e)return!0;return dR}function w_(t){var e;const n=(e=t[Wd])!==null&&e!==void 0?e:"";t[Wd]=(n+` ${cR}`).trimStart()}function fR(t){return t!==null&&typeof t=="object"&&t instanceof Uf}function hR(t){return xn(this,arguments,function*(n,s=100){let l,a=0;for(;a<s;){const c=yield xe(n.listTools({cursor:l}));for(const h of c.tools)yield yield xe(h),a++;if(!c.nextCursor)break;l=c.nextCursor}})}class Uf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Uf(e,n)}async initialize(){var e,n,s,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const v of this.mcpClients)try{for(var h=!0,g=(n=void 0,En(hR(v))),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const x=l;c.push(x);const E=x.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=v}}catch(x){n={error:x}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),zT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:s.name,arguments:s.args},void 0,a);n.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function pR(t,e,n){const s=new LT;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(s,l),e(s)}class mR{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=vR(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const v=new Promise(L=>{p=L}),x=e.callbacks,E=function(){p({})},T=this.apiClient,b={onopen:E,onmessage:L=>{pR(T,x.onmessage,L)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(L){},onclose:(s=x==null?void 0:x.onclose)!==null&&s!==void 0?s:function(L){}},M=this.webSocketFactory.create(g,yR(c),b);M.connect(),await v;const Y={setup:{model:Le(this.apiClient,e.model)}};return M.send(JSON.stringify(Y)),new gR(M,this.apiClient)}}class gR{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=VA(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=BA(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Zs.PLAY)}pause(){this.sendPlaybackControl(Zs.PAUSE)}stop(){this.sendPlaybackControl(Zs.STOP)}resetContext(){this.sendPlaybackControl(Zs.RESET_CONTEXT)}close(){this.conn.close()}}function yR(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function vR(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _R="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xR(t,e,n){const s=new PT;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const a=JSON.parse(l);if(t.isVertexAI()){const c=zA(a);Object.assign(s,c)}else Object.assign(s,a);e(s)}class ER{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new mR(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let v;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&N_(e.config.tools)&&w_(x);const E=bR(x);if(this.apiClient.isVertexAI()){const j=this.apiClient.getProject(),fe=this.apiClient.getLocation(),ce=this.apiClient.getApiKey(),Te=!!j&&!!fe||!!ce;this.apiClient.getCustomBaseUrl()&&!Te?v=g:(v=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,v))}else{const j=this.apiClient.getApiKey();let fe="BidiGenerateContent",ce="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),fe="BidiGenerateContentConstrained",ce="access_token"),v=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${fe}?${ce}=${j}`}let T=()=>{};const b=new Promise(j=>{T=j}),M=e.callbacks,I=function(){var j;(j=M==null?void 0:M.onopen)===null||j===void 0||j.call(M),T({})},G=this.apiClient,Y={onopen:I,onmessage:j=>{xR(G,M.onmessage,j)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(j){},onclose:(s=M==null?void 0:M.onclose)!==null&&s!==void 0?s:function(j){}},L=this.webSocketFactory.create(v,TR(E),Y);L.connect(),await b;let H=Le(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&H.startsWith("publishers/")){const j=this.apiClient.getProject(),fe=this.apiClient.getLocation();j&&fe&&(H=`projects/${j}/locations/${fe}/`+H)}let z={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[xa.AUDIO]}:e.config.responseModalities=[xa.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ee=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],W=[];for(const j of ee)if(this.isCallableTool(j)){const fe=j;W.push(await fe.tool())}else W.push(j);W.length>0&&(e.config.tools=W);const ae={model:H,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=GA(this.apiClient,ae):z=HA(this.apiClient,ae),delete z.config,L.send(JSON.stringify(z)),new SR(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const CR={turnComplete:!0};class SR{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=fn(n.turns),e.isVertexAI()||(s=s.map(l=>za(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(_R)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},CR),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:FA(e)}:n={realtimeInput:qA(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function TR(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function bR(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wv=10;function Zv(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(no(c)){l=!0;break}if(!l)return!0;const a=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function no(t){return"callTool"in t&&typeof t.callTool=="function"}function AR(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>no(l)))!==null&&s!==void 0?s:!1}function jv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,l)=>{if(no(s))return;const a=s;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(l)}),n}function e0(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NR extends jn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!AR(n)||Zv(n.config))return await this.generateContentInternal(g);const p=jv(n);if(p.length>0){const M=p.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let v,x;const E=fn(g.contents),T=(a=(l=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:Wv;let b=0;for(;b<T&&(v=await this.generateContentInternal(g),!(!v.functionCalls||v.functionCalls.length===0));){const M=v.candidates[0].content,I=[];for(const G of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(no(G)){const L=await G.callTool(v.functionCalls);I.push(...L)}b++,x={role:"user",parts:I},g.contents=fn(g.contents),g.contents.push(M),g.contents.push(x),e0(g.config)&&(E.push(M),E.push(x))}return e0(g.config)&&(v.automaticFunctionCallingHistory=E),v},this.generateContentStream=async n=>{var s,l,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),Zv(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const g=jv(n);if(g.length>0){const x=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var l;let a;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async n=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new us(Xn.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var s,l,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,l;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>no(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&N_(e.config.tools)){const g=(l=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&l!==void 0?l:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),w_(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,s,l;const a=new Map;for(const c of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(no(c)){const h=c,g=await h.tool();for(const p of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,s,l;const a=(l=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:Wv;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,v,x){return xn(this,arguments,function*(){for(var E,T,b,M,I,G;h<a;){c&&(h++,c=!1);const z=yield xe(p.processParamsMaybeAddMcpUsage(x)),ee=yield xe(p.generateContentStreamInternal(z)),W=[],ae=[];try{for(var Y=!0,L=(T=void 0,En(ee)),H;H=yield xe(L.next()),E=H.done,!E;Y=!0){M=H.value,Y=!1;const j=M;if(yield yield xe(j),j.candidates&&(!((I=j.candidates[0])===null||I===void 0)&&I.content)){ae.push(j.candidates[0].content);for(const fe of(G=j.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(h<a&&fe.functionCall){if(!fe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(fe.functionCall.name)){const ce=yield xe(v.get(fe.functionCall.name).callTool([fe.functionCall]));W.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${fe.functionCall.name}`)}}}}catch(j){T={error:j}}finally{try{!Y&&!E&&(b=L.return)&&(yield xe(b.call(L)))}finally{if(T)throw T.error}}if(W.length>0){c=!0;const j=new ml;j.candidates=[{content:{role:"user",parts:W}}],yield yield xe(j);const fe=[];fe.push(...ae),fe.push({role:"user",parts:W});const ce=fn(x.contents).concat(fe);x.contents=ce}else break}})})(this,g,e)}async generateContentInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Kv(this.apiClient,e);return h=ie("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=$v(v),E=new ml;return Object.assign(E,x),E})}else{const p=Jv(this.apiClient,e);return h=ie("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Qv(v),E=new ml;return Object.assign(E,x),E})}}async generateContentStreamInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Kv(this.apiClient,e);return h=ie("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(x){return xn(this,arguments,function*(){var E,T,b,M;try{for(var I=!0,G=En(x),Y;Y=yield xe(G.next()),E=Y.done,!E;I=!0){M=Y.value,I=!1;const L=M,H=$v(yield xe(L.json()));H.sdkHttpResponse={headers:L.headers};const z=new ml;Object.assign(z,H),yield yield xe(z)}}catch(L){T={error:L}}finally{try{!I&&!E&&(b=G.return)&&(yield xe(b.call(G)))}finally{if(T)throw T.error}}})})}else{const p=Jv(this.apiClient,e);return h=ie("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(x){return xn(this,arguments,function*(){var E,T,b,M;try{for(var I=!0,G=En(x),Y;Y=yield xe(G.next()),E=Y.done,!E;I=!0){M=Y.value,I=!1;const L=M,H=Qv(yield xe(L.json()));H.sdkHttpResponse={headers:L.headers};const z=new ml;Object.assign(z,H),yield yield xe(z)}}catch(L){T={error:L}}finally{try{!I&&!E&&(b=G.return)&&(yield xe(b.call(G)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=EN(this.apiClient,e);return h=ie("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=SN(v),E=new Rv;return Object.assign(E,x),E})}else{const p=xN(this.apiClient,e);return h=ie("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=CN(v),E=new Rv;return Object.assign(E,x),E})}}async generateImagesInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=UN(this.apiClient,e);return h=ie("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=LN(v),E=new Iv;return Object.assign(E,x),E})}else{const p=kN(this.apiClient,e);return h=ie("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=PN(v),E=new Iv;return Object.assign(E,x),E})}}async editImageInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=gN(this.apiClient,e);return a=ie("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=yN(g),v=new TT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Uw(this.apiClient,e);return a=ie("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=Pw(g),v=new bT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=mw(this.apiClient,e);return a=ie("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=gw(g),v=new AT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Cw(this.apiClient,e);return a=ie("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Sw(g),v=new NT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jN(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xd(v))}else{const p=ZN(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$d(v))}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=aw(this.apiClient,e);return h=ie("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=cw(v),E=new Mv;return Object.assign(E,x),E})}else{const p=rw(this.apiClient,e);return h=ie("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=uw(v),E=new Mv;return Object.assign(E,x),E})}}async update(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Dw(this.apiClient,e);return h=ie("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>Xd(v))}else{const p=Mw(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>$d(v))}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=fN(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=pN(v),E=new Dv;return Object.assign(E,x),E})}else{const p=dN(this.apiClient,e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=hN(v),E=new Dv;return Object.assign(E,x),E})}}async countTokens(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=aN(this.apiClient,e);return h=ie("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=cN(v),E=new kv;return Object.assign(E,x),E})}else{const p=rN(this.apiClient,e);return h=ie("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=uN(v),E=new kv;return Object.assign(E,x),E})}}async computeTokens(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=eN(this.apiClient,e);return a=ie("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>{const p=tN(g),v=new wT;return Object.assign(v,p),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=qN(this.apiClient,e);return h=ie("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c.then(v=>{const x=BN(v),E=new Ea;return Object.assign(E,x),E})}else{const p=VN(this.apiClient,e);return h=ie("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c.then(v=>{const x=GN(v),E=new Ea;return Object.assign(E,x),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wR extends jn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vT(e);return h=ie("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),c}else{const p=yT(e);return h=ie("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=cT(e);return a=ie("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RR(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function IR(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>GR(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function MR(t,e,n){const s={},l=d(e,["expireTime"]);n!==void 0&&l!=null&&f(n,["expireTime"],l);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=d(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=d(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],HR(t,h));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&f(n,["fieldMask"],g),s}function DR(t,e){const n={},s=d(e,["config"]);return s!=null&&f(n,["config"],MR(t,s,n)),n}function kR(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function UR(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PR(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function LR(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function OR(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const v=d(t,["seed"]);e!==void 0&&v!=null&&f(e,["setup","generationConfig","seed"],v);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],kf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const b=d(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],IR(wt(b)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let ee=mo(M);Array.isArray(ee)&&(ee=ee.map(W=>VR(po(W)))),f(e,["setup","tools"],ee)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],BR(I));const G=d(t,["inputAudioTranscription"]);e!==void 0&&G!=null&&f(e,["setup","inputAudioTranscription"],G);const Y=d(t,["outputAudioTranscription"]);e!==void 0&&Y!=null&&f(e,["setup","outputAudioTranscription"],Y);const L=d(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&f(e,["setup","realtimeInputConfig"],L);const H=d(t,["contextWindowCompression"]);e!==void 0&&H!=null&&f(e,["setup","contextWindowCompression"],H);const z=d(t,["proactivity"]);if(e!==void 0&&z!=null&&f(e,["setup","proactivity"],z),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function HR(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],Le(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],OR(l,n)),n}function GR(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],kR(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],UR(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],RR(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const v=d(t,["thought"]);v!=null&&f(e,["thought"],v);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function BR(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VR(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let v=a;Array.isArray(v)&&(v=v.map(x=>x)),f(e,["functionDeclarations"],v)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],PR(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],LR(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qR(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const l=Object.keys(s).map(a=>`${n}.${a}`);e.push(...l)}else e.push(n)}return e.join(",")}function FR(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const a=qR(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class zR extends jn{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=DR(this.apiClient,e);a=ie("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=FR(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YR(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function JR(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&YR(s,e),e}function KR(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function QR(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function $R(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const s=d(t,["config"]);return s!=null&&QR(s,e),e}function XR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WR extends jn{constructor(e){super(),this.apiClient=e,this.list=async n=>new us(Xn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=KR(e);return a=ie("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=JR(e);l=ie("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$R(e);return a=ie("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=XR(g),v=new RT;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZR extends jn{constructor(e,n=new WR(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new us(Xn.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=qw(e);return a=ie("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Yw(e);return a=ie("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zw(e);l=ie("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ww(e);return a=ie("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Zw(g),v=new IT;return Object.assign(v,p),v})}}async uploadToFileSearchStoreInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jw(e);return a=ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=eR(g),v=new MT;return Object.assign(v,p),v})}}async importFile(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Qw(e);return a=ie("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Kw(g),v=new wf;return Object.assign(v,p),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let R_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return R_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const jR=()=>R_();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zd(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const jd=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hn extends Error{}class Dt extends hn{constructor(e,n,s,l){super(`${Dt.makeMessage(e,n,s)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,s){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,s,l){if(!e||!l)return new Ka({message:s,cause:jd(n)});const a=n;return e===400?new M_(e,a,s,l):e===401?new D_(e,a,s,l):e===403?new k_(e,a,s,l):e===404?new U_(e,a,s,l):e===409?new P_(e,a,s,l):e===422?new L_(e,a,s,l):e===429?new O_(e,a,s,l):e>=500?new H_(e,a,s,l):new Dt(e,a,s,l)}}class ef extends Dt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ka extends Dt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class I_ extends Ka{constructor({message:e}={}){super({message:e??"Request timed out."})}}class M_ extends Dt{}class D_ extends Dt{}class k_ extends Dt{}class U_ extends Dt{}class P_ extends Dt{}class L_ extends Dt{}class O_ extends Dt{}class H_ extends Dt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e1=/^[a-z][a-z0-9+.-]*:/i,t1=t=>e1.test(t);let tf=t=>(tf=Array.isArray,tf(t));const n1=tf;let i1=n1;const t0=i1;function s1(t){if(!t)return!0;for(const e in t)return!1;return!0}function o1(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const l1=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new hn(`${t} must be an integer`);if(e<0)throw new hn(`${t} must be a positive integer`);return e},r1=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a1=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ws="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const c1=()=>{var t,e,n,s,l;const a=u1();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ws,"X-Stainless-OS":i0(Deno.build.os),"X-Stainless-Arch":n0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ws,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ws,"X-Stainless-OS":i0((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":n0((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const c=d1();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ws,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ws,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function d1(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const l=s[1]||0,a=s[2]||0,c=s[3]||0;return{browser:e,version:`${l}.${a}.${c}`}}}return null}const n0=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",i0=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let aa;const f1=()=>aa??(aa=c1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function G_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function p1(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return G_({start(){},async pull(n){const{done:s,value:l}=await e.next();s?n.close():n.enqueue(l)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function B_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function m1(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),l=s.cancel();s.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const g1=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Id(t,e,n){return V_(),new File(t,e??"unknown_file",n)}function y1(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const v1=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q_=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",_1=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&q_(t),x1=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function E1(t,e,n){if(V_(),t=await t,_1(t))return t instanceof File?t:Id([await t.arrayBuffer()],t.name);if(x1(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Id(await nf(l),e,n)}const s=await nf(t);if(e||(e=y1(t)),!(n!=null&&n.type)){const l=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof l=="string"&&(n=Object.assign(Object.assign({},n),{type:l}))}return Id(s,e,n)}async function nf(t){var e,n,s,l,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(q_(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(v1(t))try{for(var h=!0,g=En(t),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const v=l;c.push(...await nf(v))}}catch(v){n={error:v}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}else{const v=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${v?`; constructor: ${v}`:""}${C1(t)}`)}return c}function C1(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F_{constructor(e){this._client=e}}F_._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z_(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const s0=Object.freeze(Object.create(null)),S1=(t=z_)=>(function(n,...s){if(n.length===1)return n[0];let l=!1;const a=[],c=n.reduce((v,x,E)=>{var T,b,M;/[?#]/.test(x)&&(l=!0);const I=s[E];let G=(l?encodeURIComponent:t)(""+I);return E!==s.length&&(I==null||typeof I=="object"&&I.toString===((M=Object.getPrototypeOf((b=Object.getPrototypeOf((T=I.hasOwnProperty)!==null&&T!==void 0?T:s0))!==null&&b!==void 0?b:s0))===null||M===void 0?void 0:M.toString))&&(G=I+"",a.push({start:v.length+x.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),v+x+(E===s.length?"":G)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((v,x)=>v.start-x.start),a.length>0){let v=0;const x=a.reduce((E,T)=>{const b=" ".repeat(T.start-v),M="^".repeat(T.length);return v=T.start+T.length,E+b+M},"");throw new hn(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${x}`)}return c}),ua=S1(z_);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y_ extends F_{create(e,n){var s;const{api_version:l=this._client.apiVersion}=e,a=Sa(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ua`/${l}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.delete(ua`/${l}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.post(ua`/${l}/interactions/${e}/cancel`,s)}get(e,n={},s){var l;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=Sa(a,["api_version"]);return this._client.get(ua`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(l=n==null?void 0:n.stream)!==null&&l!==void 0?l:!1}))}}Y_._key=Object.freeze(["interactions"]);class J_ extends Y_{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T1(t){let e=0;for(const l of t)e+=l.length;const n=new Uint8Array(e);let s=0;for(const l of t)n.set(l,s),s+=l.length;return n}let ca;function Pf(t){let e;return(ca??(e=new globalThis.TextEncoder,ca=e.encode.bind(e)))(t)}let da;function o0(t){let e;return(da??(e=new globalThis.TextDecoder,da=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qa{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pf(e):e;this.buffer=T1([this.buffer,n]);const s=[];let l;for(;(l=b1(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){s.push(o0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,c=o0(this.buffer.subarray(0,a));s.push(c),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Qa.NEWLINE_CHARS=new Set([`
`,"\r"]);Qa.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function b1(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function A1(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ta={off:0,error:200,warn:300,info:400,debug:500},l0=(t,e,n)=>{if(t){if(o1(Ta,t))return t;It(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ta))}`)}};function El(){}function fa(t,e,n){return!e||Ta[t]>Ta[n]?El:e[t].bind(e)}const N1={error:El,warn:El,info:El,debug:El};let r0=new WeakMap;function It(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return N1;const l=r0.get(n);if(l&&l[0]===s)return l[1];const a={error:fa("error",n,s),warn:fa("warn",n,s),info:fa("info",n,s),debug:fa("debug",n,s)};return r0.set(n,[s,a]),a}const ts=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class js{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let l=!1;const a=s?It(s):console;function c(){return xn(this,arguments,function*(){var g,p,v,x;if(l)throw new hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,b=En(w1(e,n)),M;M=yield xe(b.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;if(!E)if(I.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield xe(JSON.parse(I.data))}catch(G){throw a.error("Could not parse message into JSON:",I.data),a.error("From chunk:",I.raw),G}}}catch(I){p={error:I}}finally{try{!T&&!g&&(v=b.return)&&(yield xe(v.call(b)))}finally{if(p)throw p.error}}E=!0}catch(I){if(Zd(I))return yield xe(void 0);throw I}finally{E||n.abort()}})}return new js(c,n,s)}static fromReadableStream(e,n,s){let l=!1;function a(){return xn(this,arguments,function*(){var g,p,v,x;const E=new Qa,T=B_(e);try{for(var b=!0,M=En(T),I;I=yield xe(M.next()),g=I.done,!g;b=!0){x=I.value,b=!1;const G=x;for(const Y of E.decode(G))yield yield xe(Y)}}catch(G){p={error:G}}finally{try{!b&&!g&&(v=M.return)&&(yield xe(v.call(M)))}finally{if(p)throw p.error}}for(const G of E.flush())yield yield xe(G)})}function c(){return xn(this,arguments,function*(){var g,p,v,x;if(l)throw new hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,b=En(a()),M;M=yield xe(b.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;E||I&&(yield yield xe(JSON.parse(I)))}}catch(I){p={error:I}}finally{try{!T&&!g&&(v=b.return)&&(yield xe(v.call(b)))}finally{if(p)throw p.error}}E=!0}catch(I){if(Zd(I))return yield xe(void 0);throw I}finally{E||n.abort()}})}return new js(c,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),l=a=>({next:()=>{if(a.length===0){const c=s.next();e.push(c),n.push(c)}return a.shift()}});return[new js(()=>l(e),this.controller,this.client),new js(()=>l(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return G_({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:l,done:a}=await n.next();if(a)return s.close();const c=Pf(JSON.stringify(l)+`
`);s.enqueue(c)}catch(l){s.error(l)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function w1(t,e){return xn(this,arguments,function*(){var s,l,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new hn("Attempted to iterate over a response with no body");const h=new I1,g=new Qa,p=B_(t.body);try{for(var v=!0,x=En(R1(p)),E;E=yield xe(x.next()),s=E.done,!s;v=!0){c=E.value,v=!1;const T=c;for(const b of g.decode(T)){const M=h.decode(b);M&&(yield yield xe(M))}}}catch(T){l={error:T}}finally{try{!v&&!s&&(a=x.return)&&(yield xe(a.call(x)))}finally{if(l)throw l.error}}for(const T of g.flush()){const b=h.decode(T);b&&(yield yield xe(b))}})}function R1(t){return xn(this,arguments,function*(){var n,s,l,a;let c=new Uint8Array;try{for(var h=!0,g=En(t),p;p=yield xe(g.next()),n=p.done,!n;h=!0){a=p.value,h=!1;const v=a;if(v==null)continue;const x=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Pf(v):v;let E=new Uint8Array(c.length+x.length);E.set(c),E.set(x,c.length),c=E;let T;for(;(T=A1(c))!==-1;)yield yield xe(c.slice(0,T)),c=c.slice(T)}}catch(v){s={error:v}}finally{try{!h&&!n&&(l=g.return)&&(yield xe(l.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield xe(c))})}class I1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,l]=M1(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}function M1(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function D1(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:l,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return It(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):js.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return It(t).debug(`[${s}] response parsed`,ts({retryOfRequestLogID:l,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends Promise{constructor(e,n,s=D1){super(l=>{l(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Lf(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K_=Symbol("brand.privateNullableHeaders");function*k1(t){if(!t)return;if(K_ in t){const{values:s,nulls:l}=t;yield*s.entries();for(const a of l)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():t0(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const l=s[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const a=t0(s[1])?s[1]:[s[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[l,null]),yield[l,h])}}const gl=t=>{const e=new Headers,n=new Set;for(const s of t){const l=new Set;for(const[a,c]of k1(s)){const h=a.toLowerCase();l.has(h)||(e.delete(a),l.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[K_]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Md=t=>{var e,n,s,l,a,c;if(typeof globalThis.process<"u")return(s=(n=(e=sT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||a===void 0?void 0:a.call(l,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Q_;class $a{constructor(e){var n,s,l,a,c,h,g,{baseURL:p=Md("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(n=Md("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:x="v1beta"}=e,E=Sa(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:v,apiVersion:x},E),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(s=T.timeout)!==null&&s!==void 0?s:$a.DEFAULT_TIMEOUT,this.logger=(l=T.logger)!==null&&l!==void 0?l:console;const b="warn";this.logLevel=b,this.logLevel=(c=(a=l0(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:l0(Md("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:b,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:h1(),this.encoder=g1,this._options=T,this.apiKey=v,this.apiVersion=x,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=gl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return gl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new hn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ws}`}defaultIdempotencyKey(){return`stainless-node-retry-${jR()}`}makeStatusError(e,n,s,l){return Dt.generate(e,n,s,l)}buildURL(e,n,s){const l=!this.baseURLOverridden()&&s||this.baseURL,a=t1(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return s1(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(l=>Object.assign({method:e,path:n},l)))}request(e,n=null){return new Lf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var l,a,c;const h=await e,g=(l=h.maxRetries)!==null&&l!==void 0?l:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:p,url:v,timeout:x}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(p,{url:v,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,b=Date.now();if(It(this).debug(`[${E}] sending request`,ts({retryOfRequestLogID:s,method:h.method,url:v,options:h,headers:p.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new ef;const M=new AbortController,I=await this.fetchWithTimeout(v,p,x,M).catch(jd),G=Date.now();if(I instanceof globalThis.Error){const L=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new ef;const H=Zd(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(n)return It(this).info(`[${E}] connection ${H?"timed out":"failed"} - ${L}`),It(this).debug(`[${E}] connection ${H?"timed out":"failed"} (${L})`,ts({retryOfRequestLogID:s,url:v,durationMs:G-b,message:I.message})),this.retryRequest(h,n,s??E);throw It(this).info(`[${E}] connection ${H?"timed out":"failed"} - error; no more retries left`),It(this).debug(`[${E}] connection ${H?"timed out":"failed"} (error; no more retries left)`,ts({retryOfRequestLogID:s,url:v,durationMs:G-b,message:I.message})),H?new I_:new Ka({cause:I})}const Y=`[${E}${T}] ${p.method} ${v} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${G-b}ms`;if(!I.ok){const L=await this.shouldRetry(I);if(n&&L){const j=`retrying, ${n} attempts remaining`;return await m1(I.body),It(this).info(`${Y} - ${j}`),It(this).debug(`[${E}] response error (${j})`,ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:G-b})),this.retryRequest(h,n,s??E,I.headers)}const H=L?"error; no more retries left":"error; not retryable";It(this).info(`${Y} - ${H}`);const z=await I.text().catch(j=>jd(j).message),ee=r1(z),W=ee?void 0:z;throw It(this).debug(`[${E}] response error (${H})`,ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,message:W,durationMs:Date.now()-b})),this.makeStatusError(I.status,ee,W,I.headers)}return It(this).info(Y),It(this).debug(`[${E}] response start`,ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:G-b})),{response:I,options:h,controller:M,requestLogID:E,retryOfRequestLogID:s,startTime:b}}async fetchWithTimeout(e,n,s,l){const a=n||{},{signal:c,method:h}=a,g=Sa(a,["signal","method"]);c&&c.addEventListener("abort",()=>l.abort());const p=setTimeout(()=>l.abort(),s),v=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,x=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),g);h&&(x.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,l){var a;let c;const h=l==null?void 0:l.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=l==null?void 0:l.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,p)}return await a1(c),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,l,a;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:v}=c,x=this.buildURL(g,p,v);"timeout"in c&&l1("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:E,body:T}=this.buildBody({options:c}),b=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:b},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:l}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=gl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),f1()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=gl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:p1(e)}:this.encoder({body:e,headers:s})}}$a.DEFAULT_TIMEOUT=6e4;class vt extends $a{constructor(){super(...arguments),this.interactions=new J_(this)}}Q_=vt;vt.GeminiNextGenAPIClient=Q_;vt.GeminiNextGenAPIClientError=hn;vt.APIError=Dt;vt.APIConnectionError=Ka;vt.APIConnectionTimeoutError=I_;vt.APIUserAbortError=ef;vt.NotFoundError=U_;vt.ConflictError=P_;vt.RateLimitError=O_;vt.BadRequestError=M_;vt.AuthenticationError=D_;vt.InternalServerError=H_;vt.PermissionDeniedError=k_;vt.UnprocessableEntityError=L_;vt.toFile=E1;vt.Interactions=J_;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U1(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function P1(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function L1(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function O1(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function H1(t,e,n){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=d(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&f(e,["displayName"],l),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function G1(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],a0(T))}else if(l==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],a0(T))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let v=d(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(v==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function B1(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&W1(a);const c=d(t,["config"]);return c!=null&&H1(c,n),n}function V1(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&Z1(a,n,e);const c=d(t,["config"]);return c!=null&&G1(c,n,e),n}function q1(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function F1(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function z1(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function Y1(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function J1(t,e){const n={},s=d(t,["config"]);return s!=null&&z1(s,n),n}function K1(t,e){const n={},s=d(t,["config"]);return s!=null&&Y1(s,n),n}function Q1(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>$_(h))),f(n,["tuningJobs"],c)}return n}function $1(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>sf(h))),f(n,["tuningJobs"],c)}return n}function X1(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["model"],s);const l=d(t,["name"]);return l!=null&&f(n,["endpoint"],l),n}function W1(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(n,["examples","examples"],l)}return n}function Z1(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function $_(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],d_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["description"]);v!=null&&f(n,["description"],v);const x=d(t,["baseModel"]);x!=null&&f(n,["baseModel"],x);const E=d(t,["_self"]);return E!=null&&f(n,["tunedModel"],X1(E)),n}function sf(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],d_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const v=d(t,["error"]);v!=null&&f(n,["error"],v);const x=d(t,["description"]);x!=null&&f(n,["description"],x);const E=d(t,["baseModel"]);E!=null&&f(n,["baseModel"],E);const T=d(t,["tunedModel"]);T!=null&&f(n,["tunedModel"],T);const b=d(t,["preTunedModel"]);b!=null&&f(n,["preTunedModel"],b);const M=d(t,["supervisedTuningSpec"]);M!=null&&f(n,["supervisedTuningSpec"],M);const I=d(t,["preferenceOptimizationSpec"]);I!=null&&f(n,["preferenceOptimizationSpec"],I);const G=d(t,["tuningDataStats"]);G!=null&&f(n,["tuningDataStats"],G);const Y=d(t,["encryptionSpec"]);Y!=null&&f(n,["encryptionSpec"],Y);const L=d(t,["partnerModelTuningSpec"]);L!=null&&f(n,["partnerModelTuningSpec"],L);const H=d(t,["customBaseModel"]);H!=null&&f(n,["customBaseModel"],H);const z=d(t,["experiment"]);z!=null&&f(n,["experiment"],z);const ee=d(t,["labels"]);ee!=null&&f(n,["labels"],ee);const W=d(t,["outputUri"]);W!=null&&f(n,["outputUri"],W);const ae=d(t,["pipelineJob"]);ae!=null&&f(n,["pipelineJob"],ae);const j=d(t,["serviceAccount"]);j!=null&&f(n,["serviceAccount"],j);const fe=d(t,["tunedModelDisplayName"]);fe!=null&&f(n,["tunedModelDisplayName"],fe);const ce=d(t,["veoTuningSpec"]);return ce!=null&&f(n,["veoTuningSpec"],ce),n}function j1(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(t,["done"]);c!=null&&f(n,["done"],c);const h=d(t,["error"]);return h!=null&&f(n,["error"],h),n}function a0(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["validationDatasetUri"],s);const l=d(t,["vertexDatasetResource"]);return l!=null&&f(n,["validationDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eI extends jn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new us(Xn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:zd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=F1(e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>sf(v))}else{const p=q1(e);return h=ie("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>$_(v))}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=K1(e);return h=ie("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=$1(v),E=new Uv;return Object.assign(E,x),E})}else{const p=J1(e);return h=ie("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=Q1(v),E=new Uv;return Object.assign(E,x),E})}}async cancel(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=P1(e);return h=ie("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=O1(v),E=new Pv;return Object.assign(E,x),E})}else{const p=U1(e);return h=ie("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:v.headers},E})),c.then(v=>{const x=L1(v),E=new Pv;return Object.assign(E,x),E})}}async tuneInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=V1(e,e);return a=ie("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>sf(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=B1(e);return a=ie("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const v=p;return v.sdkHttpResponse={headers:g.headers},v})),l.then(g=>j1(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tI{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nI=1024*1024*8,iI=3,sI=1e3,oI=2,ba="x-goog-upload-status";async function lI(t,e,n){var s;const l=await X_(t,e,n),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function rI(t,e,n){var s;const l=await X_(t,e,n),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[ba])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=o_(a),h=new Rf;return Object.assign(h,c),h}async function X_(t,e,n){var s,l;let a=0,c=0,h=new Jd(new Response),g="upload";for(a=t.size;c<a;){const p=Math.min(nI,a-c),v=t.slice(c,c+p);c+p>=a&&(g+=", finalize");let x=0,E=sI;for(;x<iI&&(h=await n.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[ba]));)x++,await uI(E),E=E*oI;if(c+=p,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[ba])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function aI(t){return{size:t.size,type:t.type}}function uI(t){return new Promise(e=>setTimeout(e,t))}class cI{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lI(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rI(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dI{create(e,n,s){return new fI(e,n,s)}}class fI{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const u0="x-goog-api-key";class hI{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(u0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(u0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pI="gl-node/";class W_{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new vt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=aT(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new hI(this.apiKey);this.apiClient=new aR({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pI+"web",uploader:new cI,downloader:new tI}),this.models=new NR(this.apiClient),this.live=new ER(this.apiClient,l,new dI),this.batches=new Ob(this.apiClient),this.chats=new vA(this.models,this.apiClient),this.caches=new mA(this.apiClient),this.files=new wA(this.apiClient),this.operations=new wR(this.apiClient),this.authTokens=new zR(this.apiClient),this.tunings=new eI(this.apiClient),this.fileSearchStores=new ZR(this.apiClient)}}const mI=({squares:t,participants:e,settings:n,onUpdateSquare:s,onUpdateParticipant:l,onApplyPayment:a,onEditPayment:c,onDeletePayment:h})=>{const[g,p]=ne.useState(""),[v,x]=ne.useState(null),[E,T]=ne.useState(null),[b,M]=ne.useState(null),[I,G]=ne.useState(""),[Y,L]=ne.useState("Cash"),H=(n==null?void 0:n.costPerBox)||10,z=ne.useMemo(()=>e||[],[e]),ee=ne.useMemo(()=>t||[],[t]),W=ne.useMemo(()=>z.map(R=>{const B=ee.filter(ue=>ue.participantId===R.id),Z=(R.paymentHistory||[]).reduce((ue,N)=>ue+N.amount,0),X=B.length*H;return{...R,boxCount:B.length,totalPaid:Z,totalOwed:X,squareIds:B.map(ue=>ue.id)}}).sort((R,B)=>(B.boxCount||0)-(R.boxCount||0)),[ee,z,H]),ae=ne.useMemo(()=>{const R=[];return W.forEach(B=>{(B.paymentHistory||[]).forEach(Z=>{R.push({pAlias:B.alias,pName:B.name,pEmail:B.email,pPhone:B.phone,pId:B.id,t:Z})})}),R.sort((B,Z)=>Z.t.timestamp-B.t.timestamp)},[W]),j=ne.useMemo(()=>{const R=ee.filter(Z=>Z.assigned).length*H,B=W.reduce((Z,X)=>Z+(X.totalPaid||0),0);return{totalDue:R,totalCollected:B,outstanding:Math.max(0,R-B),percentCollected:R>0?B/R*100:0}},[ee,H,W]),fe=W.filter(R=>(R.name||"").toLowerCase().includes(g.toLowerCase())||(R.alias||"").toLowerCase().includes(g.toLowerCase())),ce=()=>{if(ae.length===0)return;const R=["Timestamp","Alias","Full Name","Email","Phone","Amount","Method"],B=ae.map(({pAlias:q,pName:O,pEmail:Q,pPhone:se,t:pe})=>[new Date(pe.timestamp).toLocaleString().replace(",",""),q,O,Q,se,pe.amount.toFixed(2),pe.method]),Z=[R,...B].map(q=>q.join(",")).join(`
`),X=new Blob([Z],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(X),N=document.createElement("a");N.setAttribute("href",ue),N.setAttribute("download",`payouts_audit_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(N),N.click(),document.body.removeChild(N)},Te=R=>{const B=Math.max(0,(R.totalOwed||0)-(R.totalPaid||0));x(R),M(null),G(B>0?B.toString():""),L("Cash")},ye=(R,B)=>{x(R),M(B.id),G(B.amount.toString()),L(B.method)},oe=R=>{if(R.preventDefault(),!v)return;const B=parseFloat(I);!isNaN(B)&&B>0&&(b?c(v.id,b,B,Y):a(v.id,B,Y),x(null),M(null))},De=()=>{if(!v||!b)return;const R=parseFloat(I);window.confirm(`Permanently delete this $${R.toFixed(2)} payment entry for ${v.alias}?`)&&(h(v.id,b),x(null),M(null))};return _.jsxs("div",{className:"space-y-6 md:space-y-12 pb-24",children:[_.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6",children:[_.jsxs("div",{className:"bg-indigo-900 p-4 md:p-6 rounded-2xl md:rounded-3xl text-white shadow-xl",children:[_.jsx("p",{className:"text-indigo-300 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Total Pledged"}),_.jsxs("p",{className:"text-xl md:text-4xl font-black",children:["$",j.totalDue]})]}),_.jsxs("div",{className:"bg-white border-2 border-green-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[_.jsx("p",{className:"text-green-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Collected"}),_.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",j.totalCollected]})]}),_.jsxs("div",{className:"bg-white border-2 border-orange-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[_.jsx("p",{className:"text-orange-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Outstanding"}),_.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",j.outstanding]})]}),_.jsxs("div",{className:"bg-indigo-50 p-4 md:p-6 rounded-2xl md:rounded-3xl flex items-center justify-center gap-2",children:[_.jsxs("span",{className:"text-xl md:text-2xl font-black text-indigo-900",children:[Math.round(j.percentCollected),"%"]}),_.jsxs("span",{className:"text-[7px] md:text-[9px] font-black text-gray-400 uppercase leading-none",children:["Goal",_.jsx("br",{}),"Progress"]})]})]}),_.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl md:rounded-[2.5rem] overflow-hidden shadow-xl",children:[_.jsxs("div",{className:"p-4 md:p-8 border-b bg-gray-50 flex flex-col md:flex-row justify-between items-center gap-4",children:[_.jsx("h3",{className:"text-lg md:text-xl font-black text-gray-900 uppercase",children:"Participant Roster"}),_.jsx("div",{className:"relative w-full md:w-64",children:_.jsx("input",{type:"text",placeholder:"Filter names...",value:g,onChange:R=>p(R.target.value),className:"w-full pl-4 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-sm outline-none focus:border-indigo-500"})})]}),_.jsx("div",{className:"overflow-x-auto",children:_.jsxs("table",{className:"w-full text-left",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-gray-50 text-[8px] md:text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100",children:[_.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Player"}),_.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Money Status"}),_.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5 text-right",children:"Actions"})]})}),_.jsx("tbody",{className:"divide-y divide-gray-50",children:fe.map(R=>{const B=Math.max(0,(R.totalOwed||0)-(R.totalPaid||0));return _.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors",children:[_.jsxs("td",{className:"px-4 md:px-8 py-4",children:[_.jsx("p",{className:"font-black text-xs md:text-sm text-gray-900 truncate max-w-[120px]",children:R.alias.toUpperCase()||"GUEST"}),_.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:[R.boxCount||0," Boxes"]})]}),_.jsx("td",{className:"px-4 md:px-8 py-4",children:_.jsxs("div",{className:"flex flex-col",children:[_.jsxs("span",{className:`text-xs md:text-sm font-black ${B===0?"text-green-600":"text-indigo-900"}`,children:["$",R.totalPaid||0]}),B>0&&_.jsxs("span",{className:"text-[8px] text-red-500 font-bold uppercase",children:["Due: $",B]})]})}),_.jsx("td",{className:"px-4 md:px-8 py-4 text-right",children:_.jsxs("div",{className:"flex justify-end gap-2",children:[_.jsx("button",{onClick:()=>T(R),className:"bg-indigo-50 text-indigo-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-sm",title:"Payment History",children:_.jsx("i",{className:"fas fa-history text-xs"})}),_.jsxs("button",{onClick:()=>Te(R),className:"bg-green-600 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase shadow-lg shadow-green-100",children:[_.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]})})]},R.id)})})]})})]}),_.jsxs("section",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between px-4",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center",children:_.jsx("i",{className:"fas fa-receipt text-xs"})}),_.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Global Audit Trail"})]}),_.jsxs("button",{type:"button",onClick:ce,disabled:ae.length===0,className:"bg-indigo-900 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("i",{className:"fas fa-file-csv"})," Export CSV"]})]}),_.jsx("div",{className:"bg-white border border-gray-100 rounded-[2rem] md:rounded-[2.5rem] shadow-xl overflow-hidden",children:ae.length===0?_.jsxs("div",{className:"py-20 text-center",children:[_.jsx("i",{className:"fas fa-receipt text-gray-200 text-4xl mb-4"}),_.jsx("p",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No transactions recorded"})]}):_.jsx("div",{className:"divide-y divide-gray-50 max-h-[500px] overflow-y-auto scrollbar-hide",children:ae.map(({pAlias:R,pId:B,t:Z})=>_.jsxs("div",{className:"p-5 md:p-6 flex items-center justify-between hover:bg-indigo-50 transition-all group cursor-pointer",onClick:()=>{const X=W.find(ue=>ue.id===B);X&&ye(X,Z)},children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm ${Z.method==="Venmo"?"bg-blue-50 text-blue-500":Z.method==="PayPal"?"bg-[#003087] text-white":Z.method==="Cash"?"bg-green-50 text-green-600":"bg-indigo-50 text-indigo-600"}`,children:_.jsx("i",{className:`fas ${Z.method==="Venmo"?"fa-vimeo-v":Z.method==="PayPal"?"fa-paypal":Z.method==="Cash"?"fa-money-bill-wave":"fa-credit-card"} text-xs`})}),_.jsxs("div",{children:[_.jsx("p",{className:"text-xs font-black text-indigo-900 uppercase",children:R.toUpperCase()}),_.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:[Z.method,"  ",new Date(Z.timestamp).toLocaleString()]})]})]}),_.jsxs("div",{className:"text-right flex items-center gap-4",children:[_.jsxs("div",{className:"flex flex-col items-end",children:[_.jsxs("p",{className:"text-sm md:text-base font-black text-indigo-900",children:["$",Z.amount.toFixed(2)]}),_.jsx("span",{className:"text-[8px] font-black uppercase text-indigo-400 opacity-0 group-hover:opacity-100 transition-opacity",children:"Click to Edit"})]}),_.jsx("i",{className:"fas fa-chevron-right text-gray-200 text-xs"})]})]},Z.id))})})]}),E&&_.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:_.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[_.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[_.jsxs("div",{children:[_.jsxs("h3",{className:"font-black uppercase text-sm",children:[E.alias,"'s History"]}),_.jsxs("p",{className:"text-[9px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:["Total Contributions: $",E.totalPaid]})]}),_.jsx("button",{onClick:()=>T(null),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-3 scrollbar-hide",children:!E.paymentHistory||E.paymentHistory.length===0?_.jsx("div",{className:"py-12 text-center text-gray-400 italic font-medium text-xs",children:"No transactions recorded."}):E.paymentHistory.slice().reverse().map(R=>_.jsxs("div",{onClick:()=>{T(null),ye(E,R)},className:"bg-gray-50 border border-gray-100 p-4 rounded-2xl flex items-center justify-between group cursor-pointer hover:border-indigo-200 transition-all",children:[_.jsxs("div",{children:[_.jsxs("p",{className:"text-sm font-black text-indigo-900",children:["$",R.amount.toFixed(2)]}),_.jsxs("div",{className:"flex gap-2 mt-1",children:[_.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:R.method}),_.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:new Date(R.timestamp).toLocaleDateString()})]})]}),_.jsx("i",{className:"fas fa-edit text-indigo-200 group-hover:text-indigo-500 transition-colors"})]},R.id))}),_.jsx("div",{className:"p-6 border-t border-gray-100",children:_.jsx("button",{onClick:()=>T(null),className:"w-full py-4 bg-gray-50 rounded-2xl font-black text-[10px] uppercase text-gray-400 tracking-widest hover:bg-gray-100 transition-all",children:"Close"})})]})}),v&&_.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:_.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in slide-in-from-bottom-6",children:[_.jsxs("div",{className:`p-6 text-white flex justify-between items-center ${b?"bg-orange-500":"bg-indigo-900"}`,children:[_.jsx("h3",{className:"font-black uppercase text-sm",children:b?"Edit Entry":"Add Entry"}),_.jsx("button",{onClick:()=>{x(null),M(null)},children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsxs("form",{onSubmit:oe,className:"p-6 space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Amount ($)"}),_.jsx("input",{required:!0,autoFocus:!0,type:"number",step:"0.01",value:I,onChange:R=>G(R.target.value),className:"w-full p-4 bg-gray-50 rounded-xl font-black text-lg outline-none focus:ring-2 focus:ring-indigo-500"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Method"}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Cash","Venmo","PayPal","Zelle","Other"].map(R=>_.jsx("button",{type:"button",onClick:()=>L(R),className:`py-3 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${Y===R?"bg-indigo-900 border-indigo-900 text-white":"bg-white border-gray-100 text-gray-400"}`,children:R},R))})]}),_.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[_.jsx("button",{type:"submit",className:`w-full text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs shadow-xl ${b?"bg-orange-500":"bg-green-600"}`,children:b?"Save Changes":"Log Payment"}),b&&_.jsx("button",{type:"button",onClick:De,className:"w-full bg-red-50 text-red-500 py-4 rounded-xl font-black uppercase tracking-widest text-[10px] hover:bg-red-500 hover:text-white transition-all border border-red-100",children:"Delete Entry"})]})]})]})})]})},gI=({activePoolId:t,poolSettings:e,globalSettings:n,onUpdatePoolSettings:s,onUpdateActivePool:l,onUpdateGlobalSettings:a,onResetGrid:c,onDeletePool:h,onGenerateNumbers:g,squares:p,participants:v,onUpdateSquare:x,onUpdateParticipant:E,onApplyPayment:T,onEditPayment:b,onDeletePayment:M,pools:I,onSwitchPool:G,onCreatePool:Y,fullState:L,onImportState:H})=>{const[z,ee]=ne.useState(""),[W,ae]=ne.useState(!1),[j,fe]=ne.useState(!1),[ce,Te]=ne.useState({name:"",teamA:"NFC",teamB:"AFC",costPerBox:10}),ye=(I||[]).find(X=>X.id===t);ne.useEffect(()=>{ye&&(ee(ye.name),Te(X=>({...X,teamA:ye.settings.teamA,teamB:ye.settings.teamB,costPerBox:ye.settings.costPerBox,name:`${ye.name} Copy`})))},[t,ye]);const oe=X=>{X.preventDefault(),ce.name.trim()&&(Y(ce.name,{teamA:ce.teamA,teamB:ce.teamB,costPerBox:ce.costPerBox}),fe(!1))},De=async()=>{ae(!0);try{const ue=await new W_({apiKey:"PLACEHOLDER_API_KEY"}).models.generateContent({model:"gemini-3-flash-preview",contents:`Generate 3 catchy, professional one-liner slogans for a Super Bowl Squares contest that benefits the charity "${(n==null?void 0:n.charityName)||"Charity"}". Make them feel exciting and community-focused. Format as a bulleted list.`});alert(ue.text)}catch{alert("Failed to generate slogan.")}finally{ae(!1)}},R=()=>{const X=JSON.stringify(L,null,2),ue="data:application/json;charset=utf-8,"+encodeURIComponent(X),N=document.createElement("a");N.setAttribute("href",ue),N.setAttribute("download",`squares_backup_${new Date().toISOString().split("T")[0]}.json`),N.click()},B=(X,ue,N)=>{var pe,$;const q=X.target.value.replace(/[^0-9]/g,""),O=q===""?NaN:parseInt(q,10),Q=ue==="row"?"rowNumbers":"colNumbers",se=[...(e==null?void 0:e[Q])||Array(10).fill(null)];if(se[N]=isNaN(O)?null:O,s({[Q]:se}),q!==""&&N<9){const he=(pe=X.target.parentElement)==null?void 0:pe.querySelectorAll("input");($=he==null?void 0:he[N+1])==null||$.focus()}},Z=X=>{s({payouts:{...e.payouts,...X}})};return _.jsxs("div",{className:"space-y-6 md:space-y-12 max-w-4xl mx-auto pb-12",children:[_.jsx("section",{className:"bg-indigo-900 text-white p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-2xl overflow-hidden",children:_.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 relative z-10",children:[_.jsx("div",{className:"flex items-center gap-4 text-center md:text-left",children:_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight",children:"Admin Control Panel"}),_.jsx("p",{className:"text-[10px] text-indigo-300 font-bold uppercase tracking-widest",children:"Global & Contest Settings"})]})}),_.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[_.jsx("button",{onClick:R,className:"flex-1 md:flex-none bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-black uppercase text-[9px] tracking-widest border border-white/10 transition-all",children:"Backup JSON"}),_.jsx("button",{onClick:De,disabled:W,className:"flex-1 md:flex-none bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl font-black uppercase text-[9px] tracking-widest border border-white/10 transition-all",children:"AI Slogan"})]})]})}),_.jsxs("section",{className:"bg-white border-2 border-green-500/20 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm space-y-8",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[_.jsx("div",{className:"w-12 h-12 bg-green-500 text-white rounded-2xl flex items-center justify-center shadow-lg shadow-green-100",children:_.jsx("i",{className:"fas fa-dollar-sign"})}),_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight leading-none",children:"Box Pricing"}),_.jsx("p",{className:"text-[9px] font-black text-green-600 uppercase tracking-widest mt-1",children:"Set the donation amount for this contest"})]})]}),_.jsxs("div",{className:"flex flex-col md:flex-row items-end gap-6",children:[_.jsxs("div",{className:"flex-grow w-full",children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Donation Amount per Square ($)"}),_.jsxs("div",{className:"relative",children:[_.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-2xl font-black text-indigo-300",children:"$"}),_.jsx("input",{type:"number",min:"1",value:(e==null?void 0:e.costPerBox)||10,onChange:X=>s({costPerBox:Number(X.target.value)}),className:"w-full pl-12 pr-6 py-6 bg-gray-50 border-none rounded-3xl font-black text-4xl text-indigo-900 outline-none focus:ring-4 focus:ring-green-500/10 transition-all"})]})]}),_.jsxs("div",{className:"bg-indigo-50 p-6 rounded-3xl border border-indigo-100 min-w-[200px] text-center",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1",children:"Total Potential Charity"}),_.jsxs("p",{className:"text-3xl font-black text-indigo-900",children:["$",((e==null?void 0:e.costPerBox)||10)*100]})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm space-y-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Contest Management"}),!j&&_.jsxs("button",{onClick:()=>fe(!0),className:"bg-green-600 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg hover:bg-green-700 transition-all",children:[_.jsx("i",{className:"fas fa-plus mr-2"})," Create New Contest"]})]}),j&&_.jsxs("form",{onSubmit:oe,className:"bg-indigo-50/50 p-6 md:p-8 rounded-[2rem] border border-indigo-100 animate-in slide-in-from-top-4 duration-300",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[_.jsxs("div",{className:"md:col-span-2",children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Contest Name"}),_.jsx("input",{required:!0,value:ce.name,onChange:X=>Te({...ce,name:X.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"NFC (Vertical Axis)"}),_.jsx("input",{required:!0,value:ce.teamA,onChange:X=>Te({...ce,teamA:X.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-bold text-gray-700 text-sm outline-none",placeholder:"e.g. NFC"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"AFC (Horizontal Axis)"}),_.jsx("input",{required:!0,value:ce.teamB,onChange:X=>Te({...ce,teamB:X.target.value}),className:"w-full px-5 py-4 bg-white border border-indigo-100 rounded-2xl font-bold text-gray-700 text-sm outline-none",placeholder:"e.g. AFC"})]})]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsx("button",{type:"submit",className:"flex-1 bg-indigo-900 text-white py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl",children:"Launch New Contest"}),_.jsx("button",{type:"button",onClick:()=>fe(!1),className:"px-8 bg-white text-gray-400 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest border border-gray-100",children:"Cancel"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-2 px-1",children:"All Active Contests"}),_.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(X=>_.jsxs("div",{className:`p-6 rounded-[2rem] border-2 transition-all flex justify-between items-center ${X.id===t?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-indigo-50 hover:border-indigo-100"}`,children:[_.jsxs("div",{className:"min-w-0 flex-1",children:[_.jsx("h4",{className:"font-black uppercase text-xs tracking-tight truncate",children:X.name}),_.jsxs("p",{className:`text-[8px] font-bold uppercase mt-1 truncate ${X.id===t?"text-indigo-300":"text-gray-400"}`,children:[X.settings.teamA," vs ",X.settings.teamB,"  $",X.settings.costPerBox,"/box"]})]}),_.jsx("div",{className:"flex gap-2 ml-4",children:X.id!==t?_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>G(X.id),className:"bg-indigo-50 text-indigo-600 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-white transition-all",children:_.jsx("i",{className:"fas fa-exchange-alt text-[10px]"})}),_.jsx("button",{onClick:()=>{window.confirm(`Delete ${X.name}?`)&&h(X.id)},className:"bg-red-50 text-red-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-white transition-all",children:_.jsx("i",{className:"fas fa-trash-alt text-[10px]"})})]}):_.jsx("div",{className:"bg-white/20 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest whitespace-nowrap",children:"Active"})})]},X.id))})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm space-y-8",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Global Organization Settings"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Organization / Charity Name"}),_.jsx("input",{value:(n==null?void 0:n.charityName)||"",onChange:X=>a({charityName:X.target.value}),className:"w-full px-5 py-4 bg-indigo-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none transition-all"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Admin Access Password"}),_.jsx("input",{type:"text",value:(n==null?void 0:n.adminPassword)||"",onChange:X=>a({adminPassword:X.target.value}),className:"w-full px-5 py-4 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-2xl font-black text-indigo-900 uppercase text-sm outline-none transition-all"})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight mb-8",children:"Payout Configuration"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-3 block",children:"Payout Mode"}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsx("button",{onClick:()=>Z({mode:"standard"}),className:`py-4 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${e.payouts.mode==="standard"?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-gray-100 text-gray-400"}`,children:"Standard Quarters"}),_.jsx("button",{onClick:()=>Z({mode:"scoreChange"}),className:`py-4 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${e.payouts.mode==="scoreChange"?"bg-indigo-900 border-indigo-900 text-white shadow-xl":"bg-white border-gray-100 text-gray-400"}`,children:"Score Change"})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-3 block",children:"Charity Donation %"}),_.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl",children:[_.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[_.jsx("input",{type:"range",min:"0",max:"100",value:e.payouts.charityPercent,onChange:X=>Z({charityPercent:parseInt(X.target.value)}),className:"flex-grow accent-indigo-900"}),_.jsxs("span",{className:"font-black text-indigo-900 w-12 text-right text-xl",children:[e.payouts.charityPercent,"%"]})]}),_.jsxs("p",{className:"text-[8px] font-black text-indigo-400 uppercase text-center",children:["Remaining ",100-e.payouts.charityPercent,"% to Players"]})]})]})]}),e.payouts.mode==="standard"?_.jsxs("div",{className:"p-6 bg-indigo-50 rounded-[2rem]",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest mb-4",children:"Quarterly Splits (%)"}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(e.payouts.standardSplits).map(([X,ue])=>_.jsxs("div",{children:[_.jsx("label",{className:"text-[8px] font-black text-indigo-300 uppercase block mb-1",children:X.toUpperCase()}),_.jsx("input",{type:"number",value:ue,onChange:N=>{const q={...e.payouts.standardSplits,[X]:parseInt(N.target.value)||0};Z({standardSplits:q})},className:"w-full p-3 bg-white border border-indigo-100 rounded-xl font-black text-indigo-900 text-sm focus:border-indigo-500 outline-none"})]},X))})]}):_.jsxs("div",{className:"p-6 bg-green-50 rounded-[2rem] flex flex-col md:flex-row items-center justify-between gap-4 border border-green-100",children:[_.jsxs("div",{className:"flex-grow",children:[_.jsx("h4",{className:"font-black text-green-900 uppercase text-xs",children:"Score Change Multiplier"}),_.jsxs("p",{className:"text-[10px] text-green-600 font-bold uppercase mt-1",children:["Every unique score pays Entry Fee x ",e.payouts.scoreChangeMultiplier]})]}),_.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-sm border border-green-100",children:[_.jsx("button",{onClick:()=>Z({scoreChangeMultiplier:Math.max(1,e.payouts.scoreChangeMultiplier-1)}),className:"w-12 h-12 bg-gray-50 hover:bg-green-500 text-gray-400 hover:text-white rounded-xl font-black transition-all",children:"-"}),_.jsx("div",{className:"flex flex-col items-center min-w-[60px]",children:_.jsxs("span",{className:"font-black text-green-900 text-2xl leading-none",children:[e.payouts.scoreChangeMultiplier,"x"]})}),_.jsx("button",{onClick:()=>Z({scoreChangeMultiplier:e.payouts.scoreChangeMultiplier+1}),className:"w-12 h-12 bg-gray-50 hover:bg-green-500 text-gray-400 hover:text-white rounded-xl font-black transition-all",children:"+"})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsx("h3",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-8",children:"Global Payment Methods"}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"PayPal Username"}),_.jsx("input",{value:(n==null?void 0:n.paypalAccount)||"",onChange:X=>a({paypalAccount:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Venmo Username"}),_.jsx("input",{value:(n==null?void 0:n.venmoAccount)||"",onChange:X=>a({venmoAccount:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Zelle ID / Phone / Email"}),_.jsx("input",{value:(n==null?void 0:n.zelleAccount)||"",onChange:X=>a({zelleAccount:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-1 block ml-1",children:"Custom Payment Instructions"}),_.jsx("input",{value:(n==null?void 0:n.otherPaymentInfo)||"",onChange:X=>a({otherPaymentInfo:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-2 border-transparent focus:border-indigo-500 rounded-xl font-bold text-sm"})]})]})]})]}),_.jsxs("section",{className:"bg-white border-2 border-indigo-50 p-6 md:p-10 rounded-[2rem] md:rounded-[3rem] shadow-sm",children:[_.jsxs("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight mb-8",children:["Current Match Details: ",ye==null?void 0:ye.name]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-10",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"Rename Current Pool"}),_.jsx("input",{value:z,onChange:X=>ee(X.target.value),onBlur:()=>l({name:z}),className:"w-full px-5 py-3 bg-indigo-50 border-none rounded-xl font-black text-indigo-900"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"NFC Team (Vertical Axis)"}),_.jsx("input",{value:(e==null?void 0:e.teamA)||"",onChange:X=>s({teamA:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-none rounded-xl font-bold text-indigo-900",placeholder:"e.g. NFC"})]})]}),_.jsx("div",{className:"space-y-4",children:_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1 block ml-1",children:"AFC Team (Horizontal Axis)"}),_.jsx("input",{value:(e==null?void 0:e.teamB)||"",onChange:X=>s({teamB:X.target.value}),className:"w-full px-5 py-3 bg-gray-50 border-none rounded-xl font-bold text-indigo-900",placeholder:"e.g. AFC"})]})})]}),_.jsxs("div",{className:"space-y-6 pt-6 border-t border-gray-100",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:"Score Assignments"}),_.jsx("button",{onClick:g,className:"bg-indigo-900 text-white px-4 py-2 rounded-lg text-[9px] font-black uppercase",children:"Shuffle Numbers"})]}),_.jsx(c0,{title:(e==null?void 0:e.teamA)||"NFC",type:"row",values:e==null?void 0:e.rowNumbers,onChange:B}),_.jsx(c0,{title:(e==null?void 0:e.teamB)||"AFC",type:"col",values:e==null?void 0:e.colNumbers,onChange:B})]})]}),_.jsxs("section",{className:"pt-12 border-t-2 border-indigo-50",children:[_.jsxs("div",{className:"mb-8 px-4",children:[_.jsx("h2",{className:"text-2xl font-black text-indigo-900 uppercase tracking-tight",children:"Financials & Roster"}),_.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase tracking-widest",children:"Payment tracking & participant audit"})]}),_.jsx(mI,{squares:p,participants:v,settings:{...n,...e},onUpdateSquare:x,onUpdateParticipant:E,onApplyPayment:T,onEditPayment:b,onDeletePayment:M})]}),_.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:_.jsx("button",{onClick:c,className:"flex-1 py-4 text-red-500 font-black uppercase tracking-widest text-[10px] hover:bg-red-50 rounded-2xl transition-all border-2 border-dashed border-red-100",children:"Clear Active Grid Data"})})]})},c0=({title:t,type:e,values:n,onChange:s})=>_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest truncate block max-w-full",children:[t," Numbers"]}),_.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 scrollbar-hide",children:Array.from({length:10}).map((l,a)=>_.jsx("input",{maxLength:1,value:(n||[])[a]??"",onChange:c=>s(c,e,a),className:"w-9 h-9 md:w-11 md:h-11 flex-shrink-0 text-center bg-gray-50 border border-gray-100 rounded-lg focus:border-indigo-500 font-black text-indigo-900 text-sm"},a))})]}),yI=({isOpen:t,onClose:e,onSubmit:n,onUnassign:s,onSetPendingSelection:l,selectedSquareIds:a,activePool:c,existingParticipants:h,settings:g})=>{const[p,v]=ne.useState(!1),[x,E]=ne.useState(!1),[T,b]=ne.useState(""),[M,I]=ne.useState(!1),[G,Y]=ne.useState(null),[L,H]=ne.useState({name:"",email:"",phone:"",alias:""}),z=ne.useMemo(()=>(a||[]).map(O=>(c.squares||[])[O]).filter(Boolean),[a,c.squares]),ee=ne.useMemo(()=>{const O=L.phone.replace(/\D/g,"");return h.find(Q=>Q.email.toLowerCase()===L.email.toLowerCase()||O&&Q.phone.replace(/\D/g,"")===O)},[L.email,L.phone,h]),W=ne.useMemo(()=>!ee||!L.alias?!1:ee.alias.toUpperCase()!==L.alias.toUpperCase(),[ee,L.alias]),ae=ne.useMemo(()=>ee?(c.squares||[]).filter(O=>O.participantId===ee.id&&!(a||[]).includes(O.id)&&(O.paidAmount||0)<g.costPerBox):[],[ee,c.squares,a,g.costPerBox]),j=ne.useMemo(()=>[...z,...ae],[z,ae]),fe=z.length>0&&z.every(O=>O.assigned),ce=ne.useMemo(()=>{if(!x||z.length===0)return null;const O=z[0],Q=h.find(le=>le.id===(O==null?void 0:O.participantId));if(!Q)return null;const se=(c.squares||[]).filter(le=>le.participantId===Q.id),pe=se.length*g.costPerBox,$=(Q.paymentHistory||[]).reduce((le,ve)=>le+ve.amount,0);return{balance:Math.max(0,pe-$),totalPaid:$,boxCount:se.length,p:Q}},[x,z,h,c.squares,g.costPerBox]),Te=ne.useMemo(()=>j.length*g.costPerBox-j.reduce((O,Q)=>O+(Q.paidAmount||0),0),[j,g.costPerBox]);if(ne.useEffect(()=>{if(t)if(v(!1),E(!1),b(""),I(!1),Y(null),z.length===1&&z[0].assigned){const O=h.find(Q=>Q.id===z[0].participantId);O&&H({name:O.name,email:O.email,phone:O.phone,alias:O.alias.toUpperCase()})}else H({name:"",email:"",phone:"",alias:""})},[t,z,h]),!t||z.length===0)return null;const ye=O=>{const Q=(a||[]).filter(se=>se!==O);l(Q),Q.length===0&&e()},oe=O=>{window.confirm("Relinquish this square and make it available for others?")&&(s(O),l((a||[]).filter(Q=>Q!==O)),e())},De=O=>{if(!O)return O;const Q=O.replace(/[^\d]/g,""),se=Q.length;return se<4?Q:se<7?`(${Q.slice(0,3)}) ${Q.slice(3)}`:`(${Q.slice(0,3)}) ${Q.slice(3,6)}-${Q.slice(6,10)}`},R=O=>{const Q=De(O.target.value);H({...L,phone:Q})},B=O=>{const Q=O.target.value;if(!Q)return;const se=h.find(pe=>pe.id===Q);se&&H({name:se.name,email:se.email,phone:se.phone,alias:se.alias.toUpperCase()})},Z=O=>{O.preventDefault();const Q=j.map(se=>se.id);n({...L,alias:L.alias.toUpperCase()},Q),v(!0)},X=O=>{O.preventDefault();const Q=z[0],se=h.find(pe=>pe.id===Q.participantId);se&&se.email.toLowerCase()===T.toLowerCase()?(E(!0),I(!1)):I(!0)},ue=O=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(O)}&margin=10`,N=g.zelleAccount||g.paypalAccount||g.venmoAccount||g.otherPaymentInfo,q=({currentAlias:O,amount:Q})=>{var he;const se=`https://www.paypal.com/paypalme/${g.paypalAccount}/${Q}`,pe=`https://venmo.com/${(he=g.venmoAccount)==null?void 0:he.replace("@","")}?txn=pay&amount=${Q}&note=${encodeURIComponent(`Squares: ${O.toUpperCase()}`)}`,$=g.zelleAccount||"";return _.jsxs("div",{className:"space-y-4",children:[g.paypalAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("a",{href:se,target:"_blank",className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#003087] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx("i",{className:"fab fa-paypal"})," PayPal: $",Q]}),_.jsx("button",{type:"button",onClick:le=>{le.preventDefault(),Y(G==="paypal"?null:"paypal")},className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"Scan QR"})]}),G==="paypal"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ue(se),alt:"PayPal QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan with Camera to Pay"})]})]}),g.venmoAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("a",{href:pe,target:"_blank",className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#3d95ce] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("span",{className:"flex items-center gap-2",children:[_.jsx("i",{className:"fab fa-vimeo-v"})," Venmo: $",Q]}),_.jsx("button",{type:"button",onClick:le=>{le.preventDefault(),Y(G==="venmo"?null:"venmo")},className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"Scan QR"})]}),G==="venmo"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ue(pe),alt:"Venmo QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan with Camera to Pay"})]})]}),g.zelleAccount&&_.jsxs("div",{className:"flex flex-col gap-2",children:[_.jsxs("div",{className:"flex items-center justify-between gap-3 px-5 py-3 bg-[#6d1ed4] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:[_.jsxs("button",{onClick:()=>{navigator.clipboard.writeText($),alert("Zelle info copied!")},className:"flex items-center gap-2 text-left",children:[_.jsx("i",{className:"fas fa-university"})," Zelle: ",$," ($",Q,")"]}),_.jsx("button",{type:"button",onClick:()=>Y(G==="zelle"?null:"zelle"),className:"bg-white/20 px-2 py-1 rounded text-[8px] hover:bg-white/30 transition-colors",children:"QR Code"})]}),G==="zelle"&&_.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:[_.jsx("img",{src:ue($),alt:"Zelle QR",className:"w-32 h-32"}),_.jsx("p",{className:"text-[8px] font-black uppercase text-gray-400 mt-2",children:"Scan to Copy Info"})]})]}),g.otherPaymentInfo&&_.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-xl text-center",children:[_.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase mb-1",children:"Other Instructions"}),_.jsx("p",{className:"text-xs font-bold text-gray-700",children:g.otherPaymentInfo})]}),_.jsxs("p",{className:"text-[9px] text-gray-400 italic text-center uppercase font-black",children:['Memo: "',O.toUpperCase(),'"']})]})};return _.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4 bg-indigo-950/40 backdrop-blur-md",children:_.jsxs("div",{className:"bg-white rounded-t-[2rem] md:rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-in slide-in-from-bottom-full md:slide-in-from-bottom-6 duration-300",children:[_.jsxs("div",{className:"p-6 md:p-8 bg-indigo-900 text-white flex justify-between items-center relative overflow-hidden",children:[_.jsxs("div",{className:"relative z-10",children:[_.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight leading-none",children:fe?"Manage Reservation":`Claiming ${z.length} Boxes`}),_.jsx("p",{className:"text-indigo-300 text-[9px] font-bold uppercase tracking-widest mt-2",children:fe?"Account Details":`Support ${g.charityName}`})]}),_.jsx("button",{onClick:e,className:"bg-white/10 w-10 h-10 rounded-full flex items-center justify-center transition-all z-10",children:_.jsx("i",{className:"fas fa-times"})})]}),_.jsx("div",{className:"p-6 md:p-8 space-y-6 max-h-[80vh] overflow-y-auto scrollbar-hide",children:!fe&&!p?_.jsxs("form",{onSubmit:Z,className:"space-y-5",children:[h.length>0&&_.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-indigo-400 mb-1 block",children:"Quick Select Player"}),_.jsxs("select",{onChange:B,className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[_.jsx("option",{value:"",children:"-- New Player --"}),h.sort((O,Q)=>O.alias.localeCompare(Q.alias)).map(O=>_.jsxs("option",{value:O.id,children:[O.alias.toUpperCase()," (",O.name,")"]},O.id))]})]}),_.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Items in checkout"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(O=>_.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-white text-indigo-900 font-black text-[10px] rounded-lg shadow-sm border border-indigo-100 group",children:[_.jsxs("span",{children:["#",O.id+1]}),_.jsx("button",{type:"button",onClick:()=>ye(O.id),className:"w-4 h-4 rounded-full bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-colors",children:_.jsx("i",{className:"fas fa-times text-[8px]"})})]},O.id))}),_.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-100/50 flex justify-between items-center",children:[_.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-900",children:"Amount Due"}),_.jsxs("span",{className:"text-lg font-black text-indigo-900",children:["$",Te]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Full Name"}),_.jsx("input",{required:!0,value:L.name,onChange:O=>H({...L,name:O.target.value}),className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"John Doe"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Email Address"}),_.jsx("input",{required:!0,type:"email",value:L.email,onChange:O=>H({...L,email:O.target.value}),className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm",placeholder:"email@example.com"})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Cell Number"}),_.jsx("input",{required:!0,type:"tel",value:L.phone,onChange:R,className:"w-full p-4 bg-gray-50 border-none rounded-xl font-bold text-sm",placeholder:"(123) 456-7890",maxLength:14})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 mb-1 block ml-1",children:"Alias (Visible on Grid)"}),_.jsx("input",{required:!0,value:L.alias,onChange:O=>H({...L,alias:O.target.value.toUpperCase()}),className:"w-full p-4 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm",placeholder:"e.g. CHAMP_2025"})]}),ee&&_.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-100 rounded-2xl animate-in fade-in duration-300",children:[_.jsx("p",{className:"text-[9px] font-black text-blue-600 uppercase mb-1",children:"Returning Player Detected"}),_.jsxs("p",{className:"text-[11px] text-blue-900 font-bold leading-tight",children:["Welcome back! We found an account for ",_.jsx("span",{className:"underline",children:ee.name}),".",W&&_.jsxs("span",{className:"block mt-1 text-red-500 font-black",children:['WARNING: This will change your Alias from "',ee.alias,'" to "',L.alias,'".']})]})]}),_.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl",children:"Confirm & Register"})]}):p?_.jsxs("div",{className:"text-center space-y-6",children:[_.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl border-2 border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-500 text-4xl mb-3"}),_.jsx("h3",{className:"font-black text-indigo-900 uppercase text-sm",children:"Successfully Claimed!"}),_.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase mt-1",children:"Please finish the process by paying below."})]}),_.jsxs("div",{className:"space-y-1",children:[_.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",Te]}),_.jsx("p",{className:"text-[9px] font-black uppercase text-indigo-300 tracking-widest",children:"Total Donation Amount"})]}),N?_.jsx(q,{currentAlias:L.alias,amount:Te}):_.jsx("p",{className:"text-xs text-gray-400 italic",children:"Contact admin for payment info."}),_.jsx("button",{onClick:e,className:"text-xs font-black uppercase text-indigo-500 py-2",children:"Return to Board"})]}):_.jsxs("div",{className:"space-y-6",children:[x&&ce&&_.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border-2 border-orange-200 text-center animate-in zoom-in-95",children:[_.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase tracking-widest mb-1",children:"Total Account Balance"}),_.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",ce.balance.toFixed(2)]}),_.jsxs("p",{className:"text-[8px] font-bold text-indigo-400 uppercase mt-2",children:[ce.boxCount," Total Squares / $",ce.totalPaid," Contributed"]})]}),_.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsx("p",{className:"text-[9px] font-black uppercase text-gray-400",children:"Account Alias"}),_.jsx("p",{className:"font-black text-indigo-900 text-sm",children:z[0].alias.toUpperCase()})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("p",{className:"text-[9px] font-black uppercase text-gray-400",children:"Reserved Squares"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(O=>_.jsxs("div",{className:"flex-1 min-w-[120px] bg-white p-3 rounded-xl border border-indigo-100 flex justify-between items-center",children:[_.jsxs("span",{className:"text-[10px] font-black text-indigo-400",children:["Box #",O.id+1]}),_.jsxs("span",{className:`text-[10px] font-black ${O.paidAmount>=g.costPerBox?"text-green-600":"text-orange-600"}`,children:["$",O.paidAmount," Paid"]})]},O.id))})]})]}),x?_.jsxs("div",{className:"space-y-6",children:[_.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest text-center",children:"Donate to Settle Balance"}),_.jsx(q,{currentAlias:z[0].alias,amount:(ce==null?void 0:ce.balance)||0}),_.jsx("div",{className:"pt-6 border-t border-gray-100",children:_.jsx("button",{onClick:()=>oe(z[0].id),className:"w-full bg-red-50 text-red-500 py-4 rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-red-100 transition-colors",children:"Cancel Selection & Relinquish Box"})})]}):_.jsxs("form",{onSubmit:X,className:"space-y-4",children:[_.jsx("p",{className:"text-xs text-center font-bold text-gray-500",children:"Enter your email to verify ownership & view balance."}),_.jsx("input",{required:!0,type:"email",value:T,onChange:O=>b(O.target.value),className:"w-full p-4 bg-gray-50 border-none rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Confirm Account Email"}),M&&_.jsx("p",{className:"text-red-500 text-[10px] font-bold text-center uppercase",children:"Email does not match this reservation."}),_.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:"Verify Ownership"})]})]})})]})})},vI=({isOpen:t,onClose:e,appState:n})=>{const[s,l]=ne.useState(!1),a=ne.useMemo(()=>{try{const p=btoa(JSON.stringify(n)),v=new URL(window.location.origin+window.location.pathname);return v.searchParams.set("data",p),v.toString()}catch(p){return console.error("Error generating share URL",p),window.location.href}},[n,t]),c=ne.useMemo(()=>`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(a)}&margin=10`,[a]);if(!t)return null;const h=()=>{navigator.clipboard.writeText(a).then(()=>{l(!0),setTimeout(()=>l(!1),3e3)})},g=a.length>7e3;return _.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md animate-in fade-in duration-300",children:_.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in-95 duration-300",children:[_.jsxs("div",{className:"bg-green-600 p-8 text-white flex justify-between items-center relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:_.jsx("i",{className:"fas fa-share-alt text-8xl rotate-12"})}),_.jsxs("div",{className:"relative z-10",children:[_.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"Share Your Board"}),_.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-widest",children:"Snapshot Sharing Enabled"})]}),_.jsx("button",{onClick:e,className:"bg-white/10 hover:bg-white/20 w-12 h-12 rounded-full flex items-center justify-center transition-all z-10",children:_.jsx("i",{className:"fas fa-times text-xl"})})]}),_.jsxs("div",{className:"p-10 space-y-8 text-center max-h-[80vh] overflow-y-auto scrollbar-hide",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"bg-gray-50 p-6 rounded-[2.5rem] border-2 border-dashed border-gray-200 inline-block",children:_.jsx("img",{src:c,alt:"Share QR Code",className:"w-56 h-56 mx-auto rounded-xl shadow-inner"})}),_.jsxs("p",{className:"text-gray-500 text-sm font-medium px-4",children:["Ask participants to ",_.jsx("span",{className:"font-black text-indigo-900",children:"scan this code"})," with their phone to instantly see the current board state."]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"relative group",children:[_.jsx("input",{readOnly:!0,value:a,className:"w-full pl-6 pr-32 py-5 bg-gray-50 border-2 border-gray-100 rounded-3xl font-mono text-xs text-gray-400 outline-none truncate"}),_.jsx("button",{onClick:h,className:`absolute right-2 top-2 bottom-2 px-6 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${s?"bg-green-600 text-white":"bg-indigo-900 text-white hover:bg-black shadow-lg shadow-indigo-100"}`,children:s?"Copied!":"Copy Link"})]}),g&&_.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50 border border-orange-200 rounded-2xl text-left",children:[_.jsx("i",{className:"fas fa-exclamation-triangle text-orange-500 mt-1"}),_.jsx("p",{className:"text-[10px] text-orange-800 font-bold uppercase leading-relaxed",children:'Notice: This board has a lot of data. Snapshot links may not work in older browsers. If problems occur, use the "Export JSON" backup feature in Admin.'})]})]}),_.jsxs("div",{className:"pt-6 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-info-circle"}),"How it works"]}),_.jsx("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:'Your data is stored "inside" the link. When someone opens it, their browser saves a copy. No login or database required!'})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-sync-alt"}),"Updates"]}),_.jsxs("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:["If you change the board later, you must ",_.jsx("span",{className:"text-indigo-600 font-bold",children:"generate a new link"})," for others to see the changes."]})]})]}),_.jsx("button",{onClick:e,className:"w-full py-4 text-indigo-400 font-black uppercase text-[10px] tracking-widest hover:text-indigo-900 transition-colors",children:"Back to Grid"})]})]})})},_I=({globalSettings:t,activePool:e})=>{const[n,s]=ne.useState(!1),[l,a]=ne.useState([]),[c,h]=ne.useState(""),[g,p]=ne.useState(!1),v=ne.useRef(null);ne.useEffect(()=>{v.current&&(v.current.scrollTop=v.current.scrollHeight)},[l]);const x=async()=>{if(!c.trim()||g)return;const E=c.trim();a(T=>[...T,{role:"user",text:E}]),h(""),p(!0);try{const T=new W_({apiKey:"PLACEHOLDER_API_KEY"}),b=`
        You are the "Charity Squares Assistant" for a Super Bowl squares contest.
        Current Charity: ${t.charityName}.
        Current Matchup: ${e.settings.teamA} vs ${e.settings.teamB}.
        Cost per square: $${e.settings.costPerBox}.
        Board Name: ${e.name}.
        Rules: Participants pick a square. Once the board is full, axes (0-9) are randomized. 
        Winning square is determined by the last digit of the score for each team at various intervals (usually quarters).
        Keep responses helpful, enthusiastic about charity, and concise.
      `,M=await T.models.generateContent({model:"gemini-3-flash-preview",contents:`${b}

User Question: ${E}`});a(I=>[...I,{role:"ai",text:M.text||"I'm sorry, I couldn't process that."}])}catch{a(b=>[...b,{role:"ai",text:"Error connecting to AI. Please try again later."}])}finally{p(!1)}};return _.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:()=>s(!n),className:"fixed bottom-8 right-8 w-16 h-16 bg-indigo-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-[100] border-4 border-white animate-bounce-slow",children:_.jsx("i",{className:`fas ${n?"fa-times":"fa-magic"} text-xl`})}),n&&_.jsxs("div",{className:"fixed bottom-28 right-8 w-80 md:w-96 bg-white rounded-[2rem] shadow-2xl z-[100] border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[_.jsxs("div",{className:"bg-indigo-600 p-6 text-white",children:[_.jsxs("h3",{className:"font-black uppercase tracking-tight flex items-center gap-2",children:[_.jsx("i",{className:"fas fa-robot"}),"Contest Assistant"]}),_.jsx("p",{className:"text-[10px] text-indigo-200 font-bold uppercase tracking-widest mt-1",children:"Ask me anything about the rules!"})]}),_.jsxs("div",{ref:v,className:"flex-grow p-4 h-80 overflow-y-auto space-y-4 scrollbar-hide",children:[l.length===0&&_.jsx("div",{className:"text-center py-10",children:_.jsx("p",{className:"text-gray-400 text-xs italic",children:`"How do I win?" or "What's the charity for?"`})}),l.map((E,T)=>_.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:_.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-xs leading-relaxed ${E.role==="user"?"bg-indigo-100 text-indigo-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:E.text})},T)),g&&_.jsx("div",{className:"flex justify-start",children:_.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl rounded-bl-none",children:_.jsxs("div",{className:"flex gap-1",children:[_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"}),_.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})})})]}),_.jsxs("div",{className:"p-4 border-t border-gray-50 flex gap-2",children:[_.jsx("input",{type:"text",value:c,onChange:E=>h(E.target.value),onKeyDown:E=>E.key==="Enter"&&x(),placeholder:"Type a message...",className:"flex-grow bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none"}),_.jsx("button",{onClick:x,className:"w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-black transition-colors",children:_.jsx("i",{className:"fas fa-paper-plane text-xs"})})]})]})]})},xI=({activePool:t,settings:e,onAddScore:n,onUpdateScore:s,onDeleteScore:l,isAdmin:a})=>{const[c,h]=ne.useState(""),[g,p]=ne.useState(""),[v,x]=ne.useState("Score Change"),[E,T]=ne.useState(null),[b,M]=ne.useState(null),{scores:I=[],squares:G=[]}=t,{payouts:Y,costPerBox:L,rowNumbers:H,colNumbers:z}=e,ee=ne.useMemo(()=>G.length*L,[G.length,L]),W=ne.useMemo(()=>ee*(Y.charityPercent/100),[ee,Y.charityPercent]),ae=ee-W,j=(oe,De)=>{const R=oe%10,B=De%10,Z=(H||[]).indexOf(R),X=(z||[]).indexOf(B);if(Z===-1||X===-1)return null;const ue=G.find(N=>N.row===Z&&N.col===X);return ue?{alias:ue.assigned?ue.alias:"Unassigned",id:ue.id,assigned:ue.assigned}:null},fe=ne.useMemo(()=>(I||[]).map((oe,De)=>{const R=j(oe.teamAScore,oe.teamBScore);let B=0;if(Y.mode==="standard"){const Z=Y.standardSplits[oe.label.toLowerCase()]||0;B=ae*(Z/100)}else{const Z=oe.teamAScore===0&&oe.teamBScore===0,X=I.slice(0,De).some(ue=>ue.teamAScore===0&&ue.teamBScore===0);Z&&!X?B=L:B=L*(Y.scoreChangeMultiplier||3)}return{...oe,winner:R,payout:B}}),[I,Y,ae,L,H,z,G]),ce=oe=>{oe.preventDefault(),M(null);const De=parseInt(c),R=parseInt(g);if(isNaN(De)||isNaN(R)){M("Scores must be valid numbers.");return}if(De<0||R<0){M("Scores cannot be negative.");return}if(Y.mode==="standard"&&!["Kickoff","Q1","Half","Q3","Final"].includes(v)){M(`Label "${v}" is not supported in Standard mode.`);return}E?(s({id:E,teamAScore:De,teamBScore:R,label:v,timestamp:Date.now()}),T(null)):n({id:crypto.randomUUID(),teamAScore:De,teamBScore:R,label:v,timestamp:Date.now()}),h(""),p("")},Te=oe=>{T(oe.id),h(oe.teamAScore.toString()),p(oe.teamBScore.toString()),x(oe.label),M(null),window.scrollTo({top:0,behavior:"smooth"})},ye=()=>{T(null),h(""),p(""),M(null)};return _.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-12",children:[_.jsxs("div",{className:"bg-indigo-900 text-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:_.jsx("i",{className:"fas fa-sack-dollar text-[120px] rotate-12"})}),_.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[_.jsxs("div",{className:"space-y-4",children:[_.jsx("div",{className:"inline-block px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-indigo-300",children:"Live Payout Analytics"}),_.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black tracking-tighter truncate leading-tight",children:["Total Pot: $",ee]}),_.jsxs("p",{className:"text-indigo-300 text-sm font-medium uppercase tracking-widest italic opacity-80 truncate",children:["Supporting ",e.charityName]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("div",{className:"flex justify-between items-end",children:[_.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-400",children:"Pot Distribution"}),_.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest text-white",children:[Y.charityPercent,"% Charity / ",100-Y.charityPercent,"% Players"]})]}),_.jsxs("div",{className:"h-4 bg-white/5 rounded-full overflow-hidden flex border border-white/10",children:[_.jsx("div",{className:"h-full bg-indigo-500",style:{width:`${Y.charityPercent}%`}}),_.jsx("div",{className:"h-full bg-green-500",style:{width:`${100-Y.charityPercent}%`}})]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[_.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase mb-1",children:"Charity Portion"}),_.jsxs("p",{className:"text-xl font-black",children:["$",W.toFixed(2)]})]}),_.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[_.jsx("p",{className:"text-[9px] font-black text-green-400 uppercase mb-1",children:"Player Pot"}),_.jsxs("p",{className:"text-xl font-black",children:["$",ae.toFixed(2)]})]})]})]})]})]}),a&&_.jsxs("section",{className:`bg-white border-2 p-8 rounded-[3rem] shadow-xl relative transition-all duration-300 ${E?"border-orange-500 ring-4 ring-orange-50":"border-indigo-100"}`,children:[_.jsx("div",{className:`absolute -top-4 left-10 text-white px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg ${E?"bg-orange-500":"bg-indigo-600"}`,children:E?"Editing Entry":"Add New Score"}),_.jsxs("form",{onSubmit:ce,className:"space-y-6 mt-4",children:[b&&_.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-600 px-4 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 animate-pulse",children:[_.jsx("i",{className:"fas fa-exclamation-triangle"}),b]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 items-end",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1 truncate block",children:[e.teamA||"NFC"," Score"]}),_.jsx("input",{type:"number",required:!0,value:c,onChange:oe=>h(oe.target.value),className:"w-full p-5 bg-gray-50 rounded-2xl font-black text-3xl outline-none focus:ring-4 focus:ring-indigo-500/10 border border-gray-100",placeholder:"0",min:"0"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsxs("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1 truncate block",children:[e.teamB||"AFC"," Score"]}),_.jsx("input",{type:"number",required:!0,value:g,onChange:oe=>p(oe.target.value),className:"w-full p-5 bg-gray-50 rounded-2xl font-black text-3xl outline-none focus:ring-4 focus:ring-indigo-500/10 border border-gray-100",placeholder:"0",min:"0"})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Event Label"}),_.jsx("select",{value:v,onChange:oe=>x(oe.target.value),className:"w-full p-5 bg-indigo-50 rounded-2xl font-black text-indigo-900 outline-none border border-indigo-100 appearance-none",children:Y.mode==="standard"?_.jsxs(_.Fragment,{children:[_.jsx("option",{value:"Kickoff",children:"Kickoff (0-0)"}),_.jsx("option",{value:"Q1",children:"End of Q1"}),_.jsx("option",{value:"Half",children:"Halftime"}),_.jsx("option",{value:"Q3",children:"End of Q3"}),_.jsx("option",{value:"Final",children:"Final Score"})]}):_.jsxs(_.Fragment,{children:[_.jsx("option",{value:"Kickoff",children:"Kickoff (0-0)"}),_.jsx("option",{value:"Score Change",children:"Score Update"}),_.jsx("option",{value:"End of Quarter",children:"End of Quarter"}),_.jsx("option",{value:"Final",children:"Final Score"})]})})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{type:"submit",className:`flex-grow py-6 rounded-2xl font-black uppercase text-[11px] tracking-widest shadow-2xl transition-all transform hover:-translate-y-1 active:translate-y-0 ${E?"bg-orange-500 text-white hover:bg-orange-600":"bg-indigo-900 text-white hover:bg-black"}`,children:E?"Save Edit":"Log Score"}),E&&_.jsx("button",{type:"button",onClick:ye,className:"px-6 bg-gray-100 text-gray-500 rounded-2xl font-black uppercase text-[11px] tracking-widest hover:bg-gray-200",children:"Cancel"})]})]})]})]}),_.jsxs("div",{className:"space-y-6",children:[_.jsxs("div",{className:"flex items-center justify-between px-4",children:[_.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-[0.2em]",children:"Match Timeline"}),Y.mode==="scoreChange"&&_.jsxs("span",{className:"text-[9px] font-bold text-orange-500 uppercase bg-orange-50 px-3 py-1 rounded-full border border-orange-100 animate-pulse",children:[Y.scoreChangeMultiplier,"x Multiplier Active"]})]}),fe.length===0?_.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-[3rem] py-24 text-center",children:[_.jsx("div",{className:"bg-gray-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-trophy text-gray-200 text-3xl"})}),_.jsx("h4",{className:"text-gray-400 font-black uppercase text-xs tracking-widest",children:"Awaiting Kickoff..."})]}):_.jsx("div",{className:"grid grid-cols-1 gap-4",children:fe.slice().reverse().map((oe,De)=>{var ue;const R=Y.mode==="scoreChange"&&oe.teamAScore===0&&oe.teamBScore===0&&oe.payout===L,B=oe.winner!==null,Z=oe.winner&&oe.winner.assigned,X=E===oe.id;return _.jsxs("div",{className:`bg-white border rounded-[2.5rem] p-6 md:p-8 flex flex-col md:flex-row items-center justify-between gap-6 transition-all shadow-sm hover:shadow-xl ${X?"border-orange-500 ring-4 ring-orange-50 bg-orange-50/10":De===0?"border-indigo-500 ring-4 ring-indigo-500/5":"border-gray-100"}`,children:[_.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[_.jsxs("div",{className:`text-center px-6 py-4 rounded-[2rem] border min-w-[100px] ${De===0?"bg-indigo-900 text-white border-indigo-900":"bg-gray-50 border-gray-100 text-indigo-900"}`,children:[_.jsx("p",{className:`text-[8px] font-black uppercase tracking-widest mb-1 ${De===0?"text-indigo-300":"text-gray-400"}`,children:oe.label}),_.jsxs("p",{className:"text-2xl font-black tabular-nums",children:[oe.teamAScore," - ",oe.teamBScore]})]}),_.jsxs("div",{className:"flex-grow min-w-0",children:[_.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Square Holder"}),_.jsx("h4",{className:`text-lg font-black uppercase truncate max-w-[200px] ${Z?"text-gray-900":"text-gray-400 italic"}`,children:((ue=oe.winner)==null?void 0:ue.alias)||"Missing Axis #s"}),B&&_.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_.jsxs("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-black uppercase",children:["Box #",oe.winner.id+1]}),!Z&&_.jsx("span",{className:"text-[8px] font-black text-red-500 uppercase bg-red-50 px-2 py-0.5 rounded-full",children:"Not Purchased"}),R&&_.jsx("span",{className:"text-[8px] font-black text-orange-600 uppercase",children:"Money Back Trigger"})]})]})]}),_.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[_.jsxs("div",{className:"flex-grow md:flex-none text-center md:text-right",children:[_.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Payout"}),_.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["$",oe.payout.toFixed(2)]})]}),a&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>Te(oe),className:"w-12 h-12 bg-indigo-50 text-indigo-500 rounded-2xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-sm",children:_.jsx("i",{className:"fas fa-edit text-sm"})}),_.jsx("button",{onClick:()=>l(oe.id),className:"w-12 h-12 bg-red-50 text-red-500 rounded-2xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all shadow-sm",children:_.jsx("i",{className:"fas fa-trash-alt text-sm"})})]})]})]},oe.id)})})]}),_.jsxs("div",{className:"bg-white border-2 border-indigo-50 p-8 rounded-[3rem] grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[_.jsxs("div",{children:[_.jsxs("h4",{className:"font-black text-indigo-900 uppercase text-xs mb-3",children:["Payout Mode: ",Y.mode==="standard"?"Traditional":"Score Change"]}),_.jsx("p",{className:"text-[11px] text-gray-500 font-medium leading-relaxed",children:Y.mode==="standard"?"Quarter-based payouts. Percentages for each interval are configurable in the Admin tab.":`Payout of ${Y.scoreChangeMultiplier}x the box cost ($${L*Y.scoreChangeMultiplier}) for every unique score update.`})]}),_.jsx("div",{className:"flex flex-col gap-3",children:_.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 rounded-2xl border border-green-100",children:[_.jsx("i",{className:"fas fa-check-circle text-green-600"}),_.jsxs("span",{className:"text-[10px] font-black text-green-900 uppercase truncate",children:["Supporting ",e.charityName]})]})})]})]})},EI=({state:t})=>{const[e,n]=ne.useState(""),[s,l]=ne.useState(""),[a,c]=ne.useState(null),h=ne.useMemo(()=>{if(!s)return null;const x=[];if(t.pools.forEach(I=>{const G=(I.participants||[]).find(Y=>Y.email.toLowerCase()===s.toLowerCase());if(G){const Y=(I.squares||[]).filter(L=>L.participantId===G.id);if(Y.length>0){const L=Y.length*I.settings.costPerBox,H=(G.paymentHistory||[]).reduce((z,ee)=>z+ee.amount,0);x.push({pool:I,participant:G,squares:Y,due:L,paid:H})}}}),x.length===0)return null;const E=x.reduce((I,G)=>I+G.squares.length,0),T=x.reduce((I,G)=>I+G.due,0),b=x.reduce((I,G)=>I+G.paid,0),M=Math.max(0,T-b);return{results:x,totalBoxes:E,totalDue:T,totalPaid:b,netBalance:M,alias:x[0].participant.alias}},[s,t.pools]),g=x=>{x.preventDefault(),l(e.trim()),c(null)},p=x=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(x)}&margin=10`,v=({amount:x,alias:E})=>{var G;const T=t.globalSettings,b=`https://www.paypal.com/paypalme/${T.paypalAccount}/${x}`,M=`https://venmo.com/${(G=T.venmoAccount)==null?void 0:G.replace("@","")}?txn=pay&amount=${x}&note=${encodeURIComponent(`Balance: ${E.toUpperCase()}`)}`,I=T.zelleAccount||"";return _.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-2xl mx-auto",children:[T.paypalAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("a",{href:b,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#003087] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("i",{className:"fab fa-paypal"})," PayPal"]}),_.jsx("button",{type:"button",onClick:Y=>{Y.preventDefault(),c(a==="paypal"?null:"paypal")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="paypal"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(b),alt:"PayPal QR",className:"w-20 h-20"})})]}),T.venmoAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("a",{href:M,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#3d95ce] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx("i",{className:"fab fa-vimeo-v"})," Venmo"]}),_.jsx("button",{type:"button",onClick:Y=>{Y.preventDefault(),c(a==="venmo"?null:"venmo")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="venmo"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(M),alt:"Venmo QR",className:"w-20 h-20"})})]}),T.zelleAccount&&_.jsxs("div",{className:"flex flex-col gap-1",children:[_.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#6d1ed4] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow",children:[_.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(I),alert("Zelle info copied!")},className:"flex items-center gap-1 text-left truncate",children:[_.jsx("i",{className:"fas fa-university"})," Zelle"]}),_.jsx("button",{type:"button",onClick:()=>c(a==="zelle"?null:"zelle"),className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="zelle"&&_.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:_.jsx("img",{src:p(I),alt:"Zelle QR",className:"w-20 h-20"})})]})]})};return _.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-8 animate-in fade-in duration-500",children:[_.jsxs("section",{className:"bg-indigo-900 text-white rounded-2xl p-4 md:p-6 shadow-xl relative overflow-hidden",children:[_.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-5 pointer-events-none",children:_.jsx("i",{className:"fas fa-user-shield text-[60px] rotate-12"})}),_.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[_.jsxs("div",{children:[_.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Status Check"}),_.jsx("p",{className:"text-indigo-300 text-[8px] font-bold uppercase tracking-widest",children:"Verify account balances"})]}),_.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[_.jsx("input",{required:!0,type:"email",value:e,onChange:x=>n(x.target.value),placeholder:"Enter your email...",className:"w-full sm:w-56 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-bold outline-none focus:border-white focus:bg-white/20 transition-all placeholder:text-indigo-400 text-xs"}),_.jsx("button",{type:"submit",className:"bg-white text-indigo-900 px-4 py-2 rounded-lg font-black uppercase text-[9px] tracking-widest shadow-lg hover:bg-indigo-50 active:scale-95 transition-all",children:"Go"})]})]})]}),h?_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg overflow-hidden",children:[_.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100",children:[_.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[_.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Squares"}),_.jsx("p",{className:"text-2xl font-black text-indigo-900 leading-none",children:h.totalBoxes})]}),_.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[_.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Contributed"}),_.jsxs("p",{className:"text-2xl font-black text-gray-900 leading-none",children:["$",h.totalPaid]})]}),_.jsxs("div",{className:`p-4 flex flex-col items-center text-center transition-all ${h.netBalance>0?"bg-orange-50/30":"bg-green-50/30"}`,children:[_.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest mb-1 ${h.netBalance>0?"text-orange-600":"text-green-600"}`,children:"Balance"}),h.netBalance>0?_.jsxs("p",{className:"text-2xl font-black text-orange-600 leading-none",children:["$",h.netBalance]}):_.jsx("p",{className:"text-xl font-black text-green-600 leading-none uppercase tracking-tighter",children:"PAID"})]})]}),h.netBalance>0&&_.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-50 bg-orange-50/20 animate-in slide-in-from-top-2 duration-300",children:[_.jsx("div",{className:"text-center mb-3",children:_.jsxs("h3",{className:"text-[8px] font-black text-orange-600 uppercase tracking-widest",children:["Settle Outstanding: $",h.netBalance]})}),_.jsx(v,{amount:h.netBalance,alias:h.alias})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("h3",{className:"text-[9px] font-black text-indigo-900 uppercase tracking-widest px-2",children:"History Breakdown"}),_.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden",children:_.jsx("div",{className:"divide-y divide-gray-50",children:h.results.map((x,E)=>_.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-4 hover:bg-indigo-50/30 transition-colors",children:[_.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[_.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex-shrink-0 flex items-center justify-center text-indigo-600",children:_.jsx("i",{className:"fas fa-football-ball text-[10px]"})}),_.jsxs("div",{className:"truncate",children:[_.jsx("h4",{className:"font-black text-xs text-indigo-900 uppercase truncate",children:x.pool.name}),_.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase",children:[x.squares.length," Box",x.squares.length>1?"es":"","  (",x.squares.map(T=>`#${T.id+1}`).join(", "),")"]})]})]}),_.jsxs("div",{className:"flex-shrink-0 text-right",children:[_.jsxs("p",{className:`text-xs font-black ${x.paid>=x.due?"text-green-600":"text-orange-600"}`,children:["$",x.paid,"/$",x.due]}),_.jsx("span",{className:`text-[6px] font-black uppercase ${x.paid>=x.due?"text-green-500":"text-orange-500"}`,children:x.paid>=x.due?"Paid":"Pending"})]})]},E))})})]})]}):s&&_.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-2xl py-12 text-center animate-in zoom-in-95",children:[_.jsx("i",{className:"fas fa-search-minus text-gray-200 text-2xl mb-2"}),_.jsx("h4",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No squares for this email"})]})]})},CI=()=>{};var d0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te=function(t,e){if(!t)throw yo(e)},yo=function(t){return new Error("Firebase Database ("+Z_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},SI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[n++];e[s++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[n++],c=t[n++],h=t[n++],g=((l&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},Of={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const a=t[l],c=l+1<t.length,h=c?t[l+1]:0,g=l+2<t.length,p=g?t[l+2]:0,v=a>>2,x=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,T=p&63;g||(T=64,c||(E=64)),s.push(n[v],n[x],n[E],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(j_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const a=n[t.charAt(l++)],h=l<t.length?n[t.charAt(l)]:0;++l;const p=l<t.length?n[t.charAt(l)]:64;++l;const x=l<t.length?n[t.charAt(l)]:64;if(++l,a==null||h==null||p==null||x==null)throw new TI;const E=a<<2|h>>4;if(s.push(E),p!==64){const T=h<<4&240|p>>2;if(s.push(T),x!==64){const b=p<<6&192|x;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ex=function(t){const e=j_(t);return Of.encodeByteArray(e,!0)},Aa=function(t){return ex(t).replace(/\./g,"")},of=function(t){try{return Of.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return tx(void 0,t)}function tx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!AI(n)||(t[n]=tx(t[n],e[n]));return t}function AI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=()=>NI().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof d0>"u")return;const t=d0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},II=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&of(t[1]);return e&&JSON.parse(e)},nx=()=>{try{return CI()||wI()||RI()||II()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MI=t=>{var e,n;return(n=(e=nx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},DI=t=>{const e=MI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ix=()=>{var t;return(t=nx())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Aa(JSON.stringify(n)),Aa(JSON.stringify(c)),""].join(".")}const Cl={};function PI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?t.emulator.push(e):t.prod.push(e);return t}function LI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let f0=!1;function OI(t,e){if(typeof window>"u"||typeof document>"u"||!Hf(window.location.host)||Cl[t]===e||Cl[t]||f0)return;Cl[t]=e;function n(E){return`__firebase__banner__${E}`}const s="__firebase__banner",a=PI().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{f0=!0,c()},E}function v(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=LI(s),T=n("text"),b=document.getElementById(T)||document.createElement("span"),M=n("learnmore"),I=document.getElementById(M)||document.createElement("a"),G=n("preprendIcon"),Y=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const L=E.element;h(L),v(I,M);const H=p();g(Y,G),L.append(Y,b,I,H),document.body.appendChild(L)}a?(b.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(HI())}function GI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BI(){return Z_.NODE_ADMIN===!0}function VI(){try{return typeof indexedDB=="object"}catch{return!1}}function qI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="FirebaseError";class Gl extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=FI,Object.setPrototypeOf(this,Gl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ox.prototype.create)}}class ox{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?zI(a,s):"Error",h=`${this.serviceName}: ${c} (${l}).`;return new Gl(l,h,s)}}function zI(t,e){return t.replace(YI,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const YI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(t){return JSON.parse(t)}function yt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=function(t){let e={},n={},s={},l="";try{const a=t.split(".");e=Rl(of(a[0])||""),n=Rl(of(a[1])||""),l=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},JI=function(t){const e=lx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},KI=function(t){const e=lx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ro(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function h0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Na(t,e,n){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(n,t[l],l,t));return s}function wa(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const a=t[l],c=e[l];if(p0(a)&&p0(c)){if(!wa(a,c))return!1}else if(a!==c)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function p0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QI(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let x=0;x<16;x++)s[x]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let x=0;x<16;x++)s[x]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let x=16;x<80;x++){const E=s[x-3]^s[x-8]^s[x-14]^s[x-16];s[x]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],p,v;for(let x=0;x<80;x++){x<40?x<20?(p=h^a&(c^h),v=1518500249):(p=a^c^h,v=1859775393):x<60?(p=a&c|h&(a|c),v=2400959708):(p=a^c^h,v=3395469782);const E=(l<<5|l>>>27)+p+g+v+s[x]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<n;){if(c===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<n;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[l]>>a&255,++s;return e}}function Xa(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const a=l-55296;s++,te(s<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(s)-56320;l=65536+(a<<10)+c}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},Wa=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t){return t&&t._delegate?t._delegate:t}class Il{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Hl;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jI(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});s.resolve(a)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const a=this.instances.get(s);return a&&e(a,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ZI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZI(t){return t===ns?void 0:t}function jI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Qe||(Qe={}));const tM={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},nM=Qe.INFO,iM={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},sM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=iM[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rx{constructor(e){this.name=e,this._logLevel=nM,this._logHandler=sM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...e),this._logHandler(this,Qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...e),this._logHandler(this,Qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...e),this._logHandler(this,Qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...e),this._logHandler(this,Qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...e),this._logHandler(this,Qe.ERROR,...e)}}const oM=(t,e)=>e.some(n=>t instanceof n);let m0,g0;function lM(){return m0||(m0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rM(){return g0||(g0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ax=new WeakMap,lf=new WeakMap,ux=new WeakMap,Dd=new WeakMap,Gf=new WeakMap;function aM(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Ii(t.result)),l()},c=()=>{s(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&ax.set(n,t)}).catch(()=>{}),Gf.set(e,t),e}function uM(t){if(lf.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),l()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});lf.set(t,e)}let rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ux.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cM(t){rf=t(rf)}function dM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(kd(this),e,...n);return ux.set(s,e.sort?e.sort():[e]),Ii(s)}:rM().includes(t)?function(...e){return t.apply(kd(this),e),Ii(ax.get(this))}:function(...e){return Ii(t.apply(kd(this),e))}}function fM(t){return typeof t=="function"?dM(t):(t instanceof IDBTransaction&&uM(t),oM(t,lM())?new Proxy(t,rf):t)}function Ii(t){if(t instanceof IDBRequest)return aM(t);if(Dd.has(t))return Dd.get(t);const e=fM(t);return e!==t&&(Dd.set(t,e),Gf.set(e,t)),e}const kd=t=>Gf.get(t);function hM(t,e,{blocked:n,upgrade:s,blocking:l,terminated:a}={}){const c=indexedDB.open(t,e),h=Ii(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Ii(c.result),g.oldVersion,g.newVersion,Ii(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),l&&g.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const pM=["get","getKey","getAll","getAllKeys","count"],mM=["put","add","delete","clear"],Ud=new Map;function y0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=mM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||pM.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,l?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),l&&g.done]))[0]};return Ud.set(e,a),a}cM(t=>({...t,get:(e,n,s)=>y0(e,n)||t.get(e,n,s),has:(e,n)=>!!y0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",v0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new rx("@firebase/app"),vM="@firebase/app-compat",_M="@firebase/analytics-compat",xM="@firebase/analytics",EM="@firebase/app-check-compat",CM="@firebase/app-check",SM="@firebase/auth",TM="@firebase/auth-compat",bM="@firebase/database",AM="@firebase/data-connect",NM="@firebase/database-compat",wM="@firebase/functions",RM="@firebase/functions-compat",IM="@firebase/installations",MM="@firebase/installations-compat",DM="@firebase/messaging",kM="@firebase/messaging-compat",UM="@firebase/performance",PM="@firebase/performance-compat",LM="@firebase/remote-config",OM="@firebase/remote-config-compat",HM="@firebase/storage",GM="@firebase/storage-compat",BM="@firebase/firestore",VM="@firebase/ai",qM="@firebase/firestore-compat",FM="firebase",zM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",YM={[af]:"fire-core",[vM]:"fire-core-compat",[xM]:"fire-analytics",[_M]:"fire-analytics-compat",[CM]:"fire-app-check",[EM]:"fire-app-check-compat",[SM]:"fire-auth",[TM]:"fire-auth-compat",[bM]:"fire-rtdb",[AM]:"fire-data-connect",[NM]:"fire-rtdb-compat",[wM]:"fire-fn",[RM]:"fire-fn-compat",[IM]:"fire-iid",[MM]:"fire-iid-compat",[DM]:"fire-fcm",[kM]:"fire-fcm-compat",[UM]:"fire-perf",[PM]:"fire-perf-compat",[LM]:"fire-rc",[OM]:"fire-rc-compat",[HM]:"fire-gcs",[GM]:"fire-gcs-compat",[BM]:"fire-fst",[qM]:"fire-fst-compat",[VM]:"fire-vertex","fire-js":"fire-js",[FM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Map,JM=new Map,cf=new Map;function _0(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ia(t){const e=t.name;if(cf.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,t);for(const n of Ra.values())_0(n,t);for(const n of JM.values())_0(n,t);return!0}function KM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function QM(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new ox("app","Firebase",$M);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Il("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=zM;function cx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:uf,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw Mi.create("bad-app-name",{appName:String(l)});if(n||(n=ix()),!n)throw Mi.create("no-options");const a=Ra.get(l);if(a){if(wa(n,a.options)&&wa(s,a.config))return a;throw Mi.create("duplicate-app",{appName:l})}const c=new eM(l);for(const g of cf.values())c.addComponent(g);const h=new XM(n,s,c);return Ra.set(l,h),h}function ZM(t=uf){const e=Ra.get(t);if(!e&&t===uf&&ix())return cx();if(!e)throw Mi.create("no-app",{appName:t});return e}function io(t,e,n){let s=YM[t]??t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),a=e.match(/\s|\//);if(l||a){const c=[`Unable to register library "${s}" with version "${e}":`];l&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(c.join(" "));return}Ia(new Il(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firebase-heartbeat-database",eD=1,Ml="firebase-heartbeat-store";let Pd=null;function dx(){return Pd||(Pd=hM(jM,eD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mi.create("idb-open",{originalErrorMessage:t.message})})),Pd}async function tD(t){try{const n=(await dx()).transaction(Ml),s=await n.objectStore(Ml).get(fx(t));return await n.done,s}catch(e){if(e instanceof Gl)Wn.warn(e.message);else{const n=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wn.warn(n.message)}}}async function x0(t,e){try{const s=(await dx()).transaction(Ml,"readwrite");await s.objectStore(Ml).put(e,fx(t)),await s.done}catch(n){if(n instanceof Gl)Wn.warn(n.message);else{const s=Mi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(s.message)}}}function fx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=1024,iD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=E0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>iD){const c=rD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Wn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=E0(),{heartbeatsToSend:s,unsentEntries:l}=oD(this._heartbeatsCache.heartbeats),a=Aa(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Wn.warn(n),""}}}function E0(){return new Date().toISOString().substring(0,10)}function oD(t,e=nD){const n=[];let s=t.slice();for(const l of t){const a=n.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),C0(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),C0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VI()?qI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return x0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function C0(t){return Aa(JSON.stringify({version:2,heartbeats:t})).length}function rD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){Ia(new Il("platform-logger",e=>new gM(e),"PRIVATE")),Ia(new Il("heartbeat",e=>new sD(e),"PRIVATE")),io(af,v0,t),io(af,v0,"esm2020"),io("fire-js","")}aD("");var uD="firebase",cD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */io(uD,cD,"app");var S0={};const T0="@firebase/database",b0="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx="";function dD(t){hx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Rl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Rn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fD(e)}}catch{}return new hD},ss=px("localStorage"),pD=px("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new rx("@firebase/database"),mD=(function(){let t=1;return function(){return t++}})(),mx=function(t){const e=XI(t),n=new $I;n.update(e);const s=n.digest();return Of.encodeByteArray(s)},Vl=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Vl.apply(null,s):typeof s=="object"?e+=yt(s):e+=s,e+=" "}return e};let Sl=null,A0=!0;const gD=function(t,e){te(!0,"Can't turn on custom loggers persistently."),so.logLevel=Qe.VERBOSE,Sl=so.log.bind(so)},bt=function(...t){if(A0===!0&&(A0=!1,Sl===null&&pD.get("logging_enabled")===!0&&gD()),Sl){const e=Vl.apply(null,t);Sl(e)}},ql=function(t){return function(...e){bt(t,...e)}},df=function(...t){const e="FIREBASE INTERNAL ERROR: "+Vl(...t);so.error(e)},Zn=function(...t){const e=`FIREBASE FATAL ERROR: ${Vl(...t)}`;throw so.error(e),new Error(e)},Mt=function(...t){const e="FIREBASE WARNING: "+Vl(...t);so.warn(e)},yD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Bf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ao="[MIN_NAME]",os="[MAX_NAME]",cs=function(t,e){if(t===e)return 0;if(t===ao||e===os)return-1;if(e===ao||t===os)return 1;{const n=N0(t),s=N0(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},_D=function(t,e){return t===e?0:t<e?-1:1},yl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+yt(e))},Vf=function(t){if(typeof t!="object"||t===null)return yt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=yt(e[s]),n+=":",n+=Vf(t[e[s]]);return n+="}",n},gx=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(t.substring(l,n)):s.push(t.substring(l,l+e));return s};function At(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const yx=function(t){te(!Bf(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,a,c,h,g;t===0?(a=0,c=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=h+s,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-s-n))));const p=[];for(g=n;g;g-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(l?1:0),p.reverse();const v=p.join("");let x="";for(g=0;g<64;g+=8){let E=parseInt(v.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),x=x+E}return x.toLowerCase()},xD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ED=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function CD(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const SD=new RegExp("^-?(0*)\\d{1,10}$"),TD=-2147483648,bD=2147483647,N0=function(t){if(SD.test(t)){const e=Number(t);if(e>=TD&&e<=bD)return e}return null},vo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Mt("Exception was thrown by user callback.",n),e},Math.floor(0))}},AD=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,QM(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Mt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mt(e)}}class va{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}va.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="5",vx="v",_x="s",xx="r",Ex="f",Cx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Sx="ls",Tx="p",ff="ac",bx="websocket",Ax="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n,s,l,a=!1,c="",h=!1,g=!1,p=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ss.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ss.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function RD(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function wx(t,e,n){te(typeof e=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let s;if(e===bx)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ax)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);RD(t)&&(n.ns=t.namespace);const l=[];return At(n,(a,c)=>{l.push(a+"="+c)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.counters_={}}incrementCounter(e,n=1){Rn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld={},Od={};function Ff(t){const e=t.toString();return Ld[e]||(Ld[e]=new ID),Ld[e]}function MD(t,e){const n=t.toString();return Od[n]||(Od[n]=e()),Od[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&vo(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="start",kD="close",UD="pLPCommand",PD="pRTLPCB",Rx="id",Ix="pw",Mx="ser",LD="cb",OD="seg",HD="ts",GD="d",BD="dframe",Dx=1870,kx=30,VD=Dx-kx,qD=25e3,FD=3e4;class eo{constructor(e,n,s,l,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ql(e),this.stats_=Ff(n),this.urlFn=g=>(this.appCheckToken&&(g[ff]=this.appCheckToken),wx(n,Ax,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new DD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(FD)),vD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zf((...a)=>{const[c,h,g,p,v]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===w0)this.id=h,this.password=g;else if(c===kD)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[w0]="t",s[Mx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[LD]=this.scriptTagHolder.uniqueCallbackIdentifier),s[vx]=qf,this.transportSessionId&&(s[_x]=this.transportSessionId),this.lastSessionId&&(s[Sx]=this.lastSessionId),this.applicationId&&(s[Tx]=this.applicationId),this.appCheckToken&&(s[ff]=this.appCheckToken),typeof location<"u"&&location.hostname&&Cx.test(location.hostname)&&(s[xx]=Ex);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){eo.forceAllow_=!0}static forceDisallow(){eo.forceDisallow_=!0}static isAvailable(){return eo.forceAllow_?!0:!eo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xD()&&!ED()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ex(n),l=gx(s,VD);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[BD]="t",s[Rx]=e,s[Ix]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=yt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class zf{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mD(),window[UD+this.uniqueCallbackIdentifier]=e,window[PD+this.uniqueCallbackIdentifier]=n,this.myIFrame=zf.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){bt("frame writing exception"),h.stack&&bt(h.stack),bt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Rx]=this.myID,e[Ix]=this.myPW,e[Mx]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kx+s.length<=Dx;){const c=this.pendingSegs.shift();s=s+"&"+OD+l+"="+c.seg+"&"+HD+l+"="+c.ts+"&"+GD+l+"="+c.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(qD)),a=()=>{clearTimeout(l),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=16384,YD=45e3;let Ma=null;typeof MozWebSocket<"u"?Ma=MozWebSocket:typeof WebSocket<"u"&&(Ma=WebSocket);class vn{constructor(e,n,s,l,a,c,h){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ql(this.connId),this.stats_=Ff(n),this.connURL=vn.connectionURL_(n,c,h,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,a){const c={};return c[vx]=qf,typeof location<"u"&&location.hostname&&Cx.test(location.hostname)&&(c[xx]=Ex),n&&(c[_x]=n),s&&(c[Sx]=s),l&&(c[ff]=l),a&&(c[Tx]=a),wx(e,bx,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ss.set("previous_websocket_failure",!0);try{let s;BI(),this.mySock=new Ma(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){vn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Ma!==null&&!vn.forceDisallow_}static previouslyFailed(){return ss.isInMemoryStorage||ss.get("previous_websocket_failure")===!0}markConnectionHealthy(){ss.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Rl(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(te(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=yt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=gx(n,zD);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}vn.responsesRequiredToBeHealthy=2;vn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{static get ALL_TRANSPORTS(){return[eo,vn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=vn&&vn.isAvailable();let s=n&&!vn.previouslyFailed();if(e.webSocketOnly&&(n||Mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[vn];else{const l=this.transports_=[];for(const a of Dl.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);Dl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Dl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=6e4,KD=5e3,QD=10*1024,$D=100*1024,Hd="t",R0="d",XD="s",I0="r",WD="e",M0="o",D0="a",k0="n",U0="p",ZD="h";class jD{constructor(e,n,s,l,a,c,h,g,p,v){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ql("c:"+this.id+":"),this.transportManager_=new Dl(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$D?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QD?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Hd in e){const n=e[Hd];n===D0?this.upgradeIfSecondaryHealthy_():n===I0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===M0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=yl("t",e),s=yl("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:U0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:k0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=yl("t",e),s=yl("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=yl(Hd,e);if(R0 in e){const s=e[R0];if(n===ZD){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===k0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===XD?this.onConnectionShutdown_(s):n===I0?this.onReset_(s):n===WD?df("Server Error: "+s):n===M0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):df("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),qf!==s&&Mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(JD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:U0,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ss.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.allowedEvents_=e,this.listeners_={},te(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!s||s===l[a].context)){l.splice(a,1);return}}validateEventType_(e){te(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Px{static getInstance(){return new Da}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!sx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return te(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=32,L0=768;class ze{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function He(){return new ze("")}function be(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ki(t){return t.pieces_.length-t.pieceNum_}function $e(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ze(t.pieces_,e)}function Yf(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ek(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function kl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Lx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ze(e,0)}function nt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof ze)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new ze(n,0)}function Re(t){return t.pieceNum_>=t.pieces_.length}function Bt(t,e){const n=be(t),s=be(e);if(n===null)return e;if(n===s)return Bt($e(t),$e(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tk(t,e){const n=kl(t,0),s=kl(e,0);for(let l=0;l<n.length&&l<s.length;l++){const a=cs(n[l],s[l]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function Jf(t,e){if(ki(t)!==ki(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function dn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ki(t)>ki(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class nk{constructor(e,n){this.errorPrefix_=n,this.parts_=kl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Wa(this.parts_[s]);Ox(this)}}function ik(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Wa(e),Ox(t)}function sk(t){const e=t.parts_.pop();t.byteLength_-=Wa(e),t.parts_.length>0&&(t.byteLength_-=1)}function Ox(t){if(t.byteLength_>L0)throw new Error(t.errorPrefix_+"has a key path longer than "+L0+" bytes ("+t.byteLength_+").");if(t.parts_.length>P0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+P0+") or object contains a cycle "+is(t))}function is(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends Px{static getInstance(){return new Kf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return te(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vl=1e3,ok=300*1e3,O0=30*1e3,lk=1.3,rk=3e4,ak="server_kill",H0=3;class $n extends Ux{constructor(e,n,s,l,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=$n.nextPersistentConnectionId_++,this.log_=ql("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vl,this.maxReconnectDelay_=ok,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Kf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Da.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(yt(a)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new Hl,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const a={p:s},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,p=h.s;$n.warnOnListenWarnings_(g,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Rn(e,"w")){const s=ro(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||KI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=O0)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=JI(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),te(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";l&&(a.q=s,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,a){this.initConnection_();const c={p:n,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):df("Unrecognized action received from server: "+yt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rk&&(this.reconnectDelay_=vl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+$n.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,s())},p=function(x){te(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(x)};this.realtime_={close:g,sendRequest:p};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[x,E]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);c?bt("getToken() completed but was canceled"):(bt("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=E&&E.token,h=new jD(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,T=>{Mt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(ak)},a))}catch(x){this.log_("Failed to get token: "+x),c||(this.repoInfo_.nodeAdmin&&Mt(x),g())}}}interrupt(e){bt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],h0(this.interruptReasons_)&&(this.reconnectDelay_=vl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>Vf(a)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new ze(e).toString();let l;if(this.listens.has(s)){const a=this.listens.get(s);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){bt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=H0&&(this.reconnectDelay_=O0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){bt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=H0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+hx.replace(/\./g,"-")]=1,sx()?e["framework.cordova"]=1:GI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Da.getInstance().currentlyOnline();return h0(this.interruptReasons_)&&e}}$n.nextPersistentConnectionId_=0;$n.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ae(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Ae(ao,e),l=new Ae(ao,n);return this.compare(s,l)!==0}minPost(){return Ae.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ha;class Hx extends Za{static get __EMPTY_NODE(){return ha}static set __EMPTY_NODE(e){ha=e}compare(e,n){return cs(e.name,n.name)}isDefinedOn(e){throw yo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(os,ha)}makePost(e,n){return te(typeof e=="string","KeyIndex indexValue must always be a string."),new Ae(e,ha)}toString(){return".key"}}const oo=new Hx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,s,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?s(e.key,n):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class mt{constructor(e,n,s,l,a){this.key=e,this.value=n,this.color=s??mt.RED,this.left=l??Vt.EMPTY_NODE,this.right=a??Vt.EMPTY_NODE}copy(e,n,s,l,a){return new mt(e??this.key,n??this.value,s??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const a=s(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Vt.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}mt.RED=!0;mt.BLACK=!1;class uk{copy(e,n,s,l,a){return this}insert(e,n,s){return new mt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Vt{constructor(e,n=Vt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Vt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mt.BLACK,null,null))}remove(e){return new Vt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new pa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new pa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new pa(this.root_,null,this.comparator_,!0,e)}}Vt.EMPTY_NODE=new uk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){return cs(t.name,e.name)}function Qf(t,e){return cs(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf;function dk(t){hf=t}const Gx=function(t){return typeof t=="number"?"number:"+yx(t):"string:"+t},Bx=function(t){if(t.isLeafNode()){const e=t.val();te(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Rn(e,".sv"),"Priority must be a string or number.")}else te(t===hf||t.isEmpty(),"priority of unexpected type.");te(t===hf||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G0;class pt{static set __childrenNodeConstructor(e){G0=e}static get __childrenNodeConstructor(){return G0}constructor(e,n=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Re(e)?this:be(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=be(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(te(s!==".priority"||ki(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild($e(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Gx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=yx(this.value_):e+=this.value_,this.lazyHash_=mx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(te(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=pt.VALUE_TYPE_ORDER.indexOf(n),a=pt.VALUE_TYPE_ORDER.indexOf(s);return te(l>=0,"Unknown leaf type: "+n),te(a>=0,"Unknown leaf type: "+s),l===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vx,qx;function fk(t){Vx=t}function hk(t){qx=t}class pk extends Za{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),a=s.compareTo(l);return a===0?cs(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(os,new pt("[PRIORITY-POST]",qx))}makePost(e,n){const s=Vx(e);return new Ae(n,new pt("[PRIORITY-POST]",s))}toString(){return".priority"}}const it=new pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=Math.log(2);class gk{constructor(e){const n=a=>parseInt(Math.log(a)/mk,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ka=function(t,e,n,s){t.sort(e);const l=function(g,p){const v=p-g;let x,E;if(v===0)return null;if(v===1)return x=t[g],E=n?n(x):x,new mt(E,x.node,mt.BLACK,null,null);{const T=parseInt(v/2,10)+g,b=l(g,T),M=l(T+1,p);return x=t[T],E=n?n(x):x,new mt(E,x.node,mt.BLACK,b,M)}},a=function(g){let p=null,v=null,x=t.length;const E=function(b,M){const I=x-b,G=x;x-=b;const Y=l(I+1,G),L=t[I],H=n?n(L):L;T(new mt(H,L.node,M,null,Y))},T=function(b){p?(p.left=b,p=b):(v=b,p=b)};for(let b=0;b<g.count;++b){const M=g.nextBitIsOne(),I=Math.pow(2,g.count-(b+1));M?E(I,mt.BLACK):(E(I,mt.BLACK),E(I,mt.RED))}return v},c=new gk(t.length),h=a(c);return new Vt(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd;const Xs={};class Qn{static get Default(){return te(Xs&&it,"ChildrenNode.ts has not been loaded"),Gd=Gd||new Qn({".priority":Xs},{".priority":it}),Gd}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=ro(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Vt?n:null}hasIndex(e){return Rn(this.indexSet_,e.toString())}addIndex(e,n){te(e!==oo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const a=n.getIterator(Ae.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let h;l?h=ka(s,e.getCompare()):h=Xs;const g=e.toString(),p={...this.indexSet_};p[g]=e;const v={...this.indexes_};return v[g]=h,new Qn(v,p)}addToIndexes(e,n){const s=Na(this.indexes_,(l,a)=>{const c=ro(this.indexSet_,a);if(te(c,"Missing index implementation for "+a),l===Xs)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(Ae.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&h.push(p),p=g.getNext();return h.push(e),ka(h,c.getCompare())}else return Xs;else{const h=n.get(e.name);let g=l;return h&&(g=g.remove(new Ae(e.name,h))),g.insert(e,e.node)}});return new Qn(s,this.indexSet_)}removeFromIndexes(e,n){const s=Na(this.indexes_,l=>{if(l===Xs)return l;{const a=n.get(e.name);return a?l.remove(new Ae(e.name,a)):l}});return new Qn(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l;class _e{static get EMPTY_NODE(){return _l||(_l=new _e(new Vt(Qf),null,Qn.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Bx(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_l}updatePriority(e){return this.children_.isEmpty()?this:new _e(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?_l:n}}getChild(e){const n=be(e);return n===null?this:this.getImmediateChild(n).getChild($e(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(te(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Ae(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const c=l.isEmpty()?_l:this.priorityNode_;return new _e(l,c,a)}}updateChild(e,n){const s=be(e);if(s===null)return n;{te(be(e)!==".priority"||ki(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild($e(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,a=!0;if(this.forEachChild(it,(c,h)=>{n[c]=h.val(e),s++,a&&_e.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*s){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Gx(this.getPriority().val())+":"),this.forEachChild(it,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":mx(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const a=l.getPredecessorKey(new Ae(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ae(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ae(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Ae.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Ae.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Fl?-1:0}withIndex(e){if(e===oo||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new _e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===oo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(it),l=n.getIterator(it);let a=s.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===oo?null:this.indexMap_.get(e.toString())}}_e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yk extends _e{constructor(){super(new Vt(Qf),_e.EMPTY_NODE,Qn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _e.EMPTY_NODE}isEmpty(){return!1}}const Fl=new yk;Object.defineProperties(Ae,{MIN:{value:new Ae(ao,_e.EMPTY_NODE)},MAX:{value:new Ae(os,Fl)}});Hx.__EMPTY_NODE=_e.EMPTY_NODE;pt.__childrenNodeConstructor=_e;dk(Fl);hk(Fl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=!0;function gt(t,e=null){if(t===null)return _e.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),te(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new pt(n,gt(e))}if(!(t instanceof Array)&&vk){const n=[];let s=!1;if(At(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=gt(h);g.isEmpty()||(s=s||!g.getPriority().isEmpty(),n.push(new Ae(c,g)))}}),n.length===0)return _e.EMPTY_NODE;const a=ka(n,ck,c=>c.name,Qf);if(s){const c=ka(n,it.getCompare());return new _e(a,gt(e),new Qn({".priority":c},{".priority":it}))}else return new _e(a,gt(e),Qn.Default)}else{let n=_e.EMPTY_NODE;return At(t,(s,l)=>{if(Rn(t,s)&&s.substring(0,1)!=="."){const a=gt(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(gt(e))}}fk(gt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends Za{constructor(e){super(),this.indexPath_=e,te(!Re(e)&&be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),a=s.compareTo(l);return a===0?cs(e.name,n.name):a}makePost(e,n){const s=gt(e),l=_e.EMPTY_NODE.updateChild(this.indexPath_,s);return new Ae(n,l)}maxPost(){const e=_e.EMPTY_NODE.updateChild(this.indexPath_,Fl);return new Ae(os,e)}toString(){return kl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk extends Za{compare(e,n){const s=e.node.compareTo(n.node);return s===0?cs(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,n){const s=gt(e);return new Ae(n,s)}toString(){return".value"}}const Ek=new xk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){return{type:"value",snapshotNode:t}}function uo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ul(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pl(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Ck(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.index_=e}updateChild(e,n,s,l,a,c){te(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(l).equals(s.getChild(l))&&h.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(n)?c.trackChildChange(Ul(n,h)):te(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(uo(n,s)):c.trackChildChange(Pl(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(it,(l,a)=>{n.hasChild(l)||s.trackChildChange(Ul(l,a))}),n.isLeafNode()||n.forEachChild(it,(l,a)=>{if(e.hasChild(l)){const c=e.getImmediateChild(l);c.equals(a)||s.trackChildChange(Pl(l,a,c))}else s.trackChildChange(uo(l,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?_e.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.indexedFilter_=new $f(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ll.getStartPost_(e),this.endPost_=Ll.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,l,a,c){return this.matches(new Ae(n,s))||(s=_e.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,l,a,c)}updateFullNode(e,n,s){n.isLeafNode()&&(n=_e.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(_e.EMPTY_NODE);const a=this;return n.forEachChild(it,(c,h)=>{a.matches(new Ae(c,h))||(l=l.updateImmediateChild(c,_e.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new Ll(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,l,a,c){return this.rangedFilter_.matches(new Ae(n,s))||(s=_e.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,l,a,c):this.fullLimitUpdateChild_(e,n,s,a,c)}updateFullNode(e,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=_e.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=_e.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(_e.EMPTY_NODE);let a;this.reverse_?a=l.getReverseIterator(this.index_):a=l.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:l=l.updateImmediateChild(h.name,_e.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,l,a){let c;if(this.reverse_){const x=this.index_.getCompare();c=(E,T)=>x(T,E)}else c=this.index_.getCompare();const h=e;te(h.numChildren()===this.limit_,"");const g=new Ae(n,s),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),v=this.rangedFilter_.matches(g);if(h.hasChild(n)){const x=h.getImmediateChild(n);let E=l.getChildAfterChild(this.index_,p,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=l.getChildAfterChild(this.index_,E,this.reverse_);const T=E==null?1:c(E,g);if(v&&!s.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(Pl(n,s,x)),h.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(Ul(n,x));const M=h.updateImmediateChild(n,_e.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(uo(E.name,E.node)),M.updateImmediateChild(E.name,E.node)):M}}else return s.isEmpty()?e:v&&c(p,g)>=0?(a!=null&&(a.trackChildChange(Ul(p.name,p.node)),a.trackChildChange(uo(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(p.name,_e.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=it}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ao}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===it}copy(){const e=new Xf;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tk(t){return t.loadsAllData()?new $f(t.getIndex()):t.hasLimit()?new Sk(t):new Ll(t)}function B0(t){const e={};if(t.isDefault())return e;let n;if(t.index_===it?n="$priority":t.index_===Ek?n="$value":t.index_===oo?n="$key":(te(t.index_ instanceof _k,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=yt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=yt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+yt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=yt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+yt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function V0(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==it&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua extends Ux{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(te(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=ql("p:rest:"),this.listens_={}}listen(e,n,s,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=Ua.getListenId_(e,s),h={};this.listens_[c]=h;const g=B0(e._queryParams);this.restRequest_(a+".json",g,(p,v)=>{let x=v;if(p===404&&(x=null,p=null),p===null&&this.onDataUpdate_(a,x,!1,s),ro(this.listens_,c)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",l(E,null)}})}unlisten(e,n){const s=Ua.getListenId_(e,n);delete this.listens_[s]}get(e){const n=B0(e._queryParams),s=e._path.toString(),l=new Hl;return this.restRequest_(s+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(s,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+QI(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Rl(h.responseText)}catch{Mt("Failed to parse JSON response for "+c+": "+h.responseText)}s(null,g)}else h.status!==401&&h.status!==404&&Mt("Got unsuccessful REST response for "+c+" Status: "+h.status),s(h.status);s=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.rootNode_=_e.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(){return{value:null,children:new Map}}function zx(t,e,n){if(Re(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=be(e);t.children.has(s)||t.children.set(s,Pa());const l=t.children.get(s);e=$e(e),zx(l,e,n)}}function pf(t,e,n){t.value!==null?n(e,t.value):Ak(t,(s,l)=>{const a=new ze(e.toString()+"/"+s);pf(l,a,n)})}function Ak(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&At(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=10*1e3,wk=30*1e3,Rk=300*1e3;class Ik{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Nk(e);const s=q0+(wk-q0)*Math.random();Tl(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;At(e,(l,a)=>{a>0&&Rn(this.statsToReport_,l)&&(n[l]=a,s=!0)}),s&&this.server_.reportStats(n),Tl(this.reportStats_.bind(this),Math.floor(Math.random()*2*Rk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_n||(_n={}));function Wf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=_n.ACK_USER_WRITE,this.source=Wf()}operationForChild(e){if(Re(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ze(e));return new La(He(),n,this.revert)}}else return te(be(this.path)===e,"operationForChild called for unrelated child."),new La($e(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n){this.source=e,this.path=n,this.type=_n.LISTEN_COMPLETE}operationForChild(e){return Re(this.path)?new Ol(this.source,He()):new Ol(this.source,$e(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=_n.OVERWRITE}operationForChild(e){return Re(this.path)?new ls(this.source,He(),this.snap.getImmediateChild(e)):new ls(this.source,$e(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=_n.MERGE}operationForChild(e){if(Re(this.path)){const n=this.children.subtree(new ze(e));return n.isEmpty()?null:n.value?new ls(this.source,He(),n.value):new co(this.source,He(),n)}else return te(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new co(this.source,$e(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Re(e))return this.isFullyInitialized()&&!this.filtered_;const n=be(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Dk(t,e,n,s){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Ck(c.childName,c.snapshotNode))}),xl(t,l,"child_removed",e,s,n),xl(t,l,"child_added",e,s,n),xl(t,l,"child_moved",a,s,n),xl(t,l,"child_changed",e,s,n),xl(t,l,"value",e,s,n),l}function xl(t,e,n,s,l,a){const c=s.filter(h=>h.type===n);c.sort((h,g)=>Uk(t,h,g)),c.forEach(h=>{const g=kk(t,h,a);l.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(g,t.query_))})})}function kk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Uk(t,e,n){if(e.childName==null||n.childName==null)throw yo("Should only compare child_ events.");const s=new Ae(e.childName,e.snapshotNode),l=new Ae(n.childName,n.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t,e){return{eventCache:t,serverCache:e}}function bl(t,e,n,s){return ja(new rs(e,n,s),t.serverCache)}function Yx(t,e,n,s){return ja(t.eventCache,new rs(e,n,s))}function mf(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function as(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd;const Pk=()=>(Bd||(Bd=new Vt(_D)),Bd);class Ke{static fromObject(e){let n=new Ke(null);return At(e,(s,l)=>{n=n.set(new ze(s),l)}),n}constructor(e,n=Pk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:He(),value:this.value};if(Re(e))return null;{const s=be(e),l=this.children.get(s);if(l!==null){const a=l.findRootMostMatchingPathAndValue($e(e),n);return a!=null?{path:nt(new ze(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Re(e))return this;{const n=be(e),s=this.children.get(n);return s!==null?s.subtree($e(e)):new Ke(null)}}set(e,n){if(Re(e))return new Ke(n,this.children);{const s=be(e),a=(this.children.get(s)||new Ke(null)).set($e(e),n),c=this.children.insert(s,a);return new Ke(this.value,c)}}remove(e){if(Re(e))return this.children.isEmpty()?new Ke(null):new Ke(null,this.children);{const n=be(e),s=this.children.get(n);if(s){const l=s.remove($e(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new Ke(null):new Ke(this.value,a)}else return this}}get(e){if(Re(e))return this.value;{const n=be(e),s=this.children.get(n);return s?s.get($e(e)):null}}setTree(e,n){if(Re(e))return n;{const s=be(e),a=(this.children.get(s)||new Ke(null)).setTree($e(e),n);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new Ke(this.value,c)}}fold(e){return this.fold_(He(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,a)=>{s[l]=a.fold_(nt(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,He(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(Re(e))return null;{const a=be(e),c=this.children.get(a);return c?c.findOnPath_($e(e),nt(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,He(),n)}foreachOnPath_(e,n,s){if(Re(e))return this;{this.value&&s(n,this.value);const l=be(e),a=this.children.get(l);return a?a.foreachOnPath_($e(e),nt(n,l),s):new Ke(null)}}foreach(e){this.foreach_(He(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(nt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.writeTree_=e}static empty(){return new Cn(new Ke(null))}}function Al(t,e,n){if(Re(e))return new Cn(new Ke(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let a=s.value;const c=Bt(l,e);return a=a.updateChild(c,n),new Cn(t.writeTree_.set(l,a))}else{const l=new Ke(n),a=t.writeTree_.setTree(e,l);return new Cn(a)}}}function gf(t,e,n){let s=t;return At(n,(l,a)=>{s=Al(s,nt(e,l),a)}),s}function F0(t,e){if(Re(e))return Cn.empty();{const n=t.writeTree_.setTree(e,new Ke(null));return new Cn(n)}}function yf(t,e){return ds(t,e)!=null}function ds(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Bt(n.path,e)):null}function z0(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(it,(s,l)=>{e.push(new Ae(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new Ae(s,l.value))}),e}function Di(t,e){if(Re(e))return t;{const n=ds(t,e);return n!=null?new Cn(new Ke(n)):new Cn(t.writeTree_.subtree(e))}}function vf(t){return t.writeTree_.isEmpty()}function fo(t,e){return Jx(He(),t.writeTree_,e)}function Jx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(te(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=Jx(nt(t,l),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(nt(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e){return Xx(e,t)}function Lk(t,e,n,s,l){te(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(t.visibleWrites=Al(t.visibleWrites,e,n)),t.lastWriteId=s}function Ok(t,e,n,s){te(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=gf(t.visibleWrites,e,n),t.lastWriteId=s}function Hk(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Gk(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);te(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let l=s.visible,a=!1,c=t.allWrites.length-1;for(;l&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&Bk(h,s.path)?l=!1:dn(s.path,h.path)&&(a=!0)),c--}if(l){if(a)return Vk(t),!0;if(s.snap)t.visibleWrites=F0(t.visibleWrites,s.path);else{const h=s.children;At(h,g=>{t.visibleWrites=F0(t.visibleWrites,nt(s.path,g))})}return!0}else return!1}function Bk(t,e){if(t.snap)return dn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&dn(nt(t.path,n),e))return!0;return!1}function Vk(t){t.visibleWrites=Kx(t.allWrites,qk,He()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function qk(t){return t.visible}function Kx(t,e,n){let s=Cn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const c=a.path;let h;if(a.snap)dn(n,c)?(h=Bt(n,c),s=Al(s,h,a.snap)):dn(c,n)&&(h=Bt(c,n),s=Al(s,He(),a.snap.getChild(h)));else if(a.children){if(dn(n,c))h=Bt(n,c),s=gf(s,h,a.children);else if(dn(c,n))if(h=Bt(c,n),Re(h))s=gf(s,He(),a.children);else{const g=ro(a.children,be(h));if(g){const p=g.getChild($e(h));s=Al(s,He(),p)}}}else throw yo("WriteRecord should have .snap or .children")}}return s}function Qx(t,e,n,s,l){if(!s&&!l){const a=ds(t.visibleWrites,e);if(a!=null)return a;{const c=Di(t.visibleWrites,e);if(vf(c))return n;if(n==null&&!yf(c,He()))return null;{const h=n||_e.EMPTY_NODE;return fo(c,h)}}}else{const a=Di(t.visibleWrites,e);if(!l&&vf(a))return n;if(!l&&n==null&&!yf(a,He()))return null;{const c=function(p){return(p.visible||l)&&(!s||!~s.indexOf(p.writeId))&&(dn(p.path,e)||dn(e,p.path))},h=Kx(t.allWrites,c,e),g=n||_e.EMPTY_NODE;return fo(h,g)}}}function Fk(t,e,n){let s=_e.EMPTY_NODE;const l=ds(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(it,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(n){const a=Di(t.visibleWrites,e);return n.forEachChild(it,(c,h)=>{const g=fo(Di(a,new ze(c)),h);s=s.updateImmediateChild(c,g)}),z0(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=Di(t.visibleWrites,e);return z0(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function zk(t,e,n,s,l){te(s||l,"Either existingEventSnap or existingServerSnap must exist");const a=nt(e,n);if(yf(t.visibleWrites,a))return null;{const c=Di(t.visibleWrites,a);return vf(c)?l.getChild(n):fo(c,l.getChild(n))}}function Yk(t,e,n,s){const l=nt(e,n),a=ds(t.visibleWrites,l);if(a!=null)return a;if(s.isCompleteForChild(n)){const c=Di(t.visibleWrites,l);return fo(c,s.getNode().getImmediateChild(n))}else return null}function Jk(t,e){return ds(t.visibleWrites,e)}function Kk(t,e,n,s,l,a,c){let h;const g=Di(t.visibleWrites,e),p=ds(g,He());if(p!=null)h=p;else if(n!=null)h=fo(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const v=[],x=c.getCompare(),E=a?h.getReverseIteratorFrom(s,c):h.getIteratorFrom(s,c);let T=E.getNext();for(;T&&v.length<l;)x(T,s)!==0&&v.push(T),T=E.getNext();return v}else return[]}function Qk(){return{visibleWrites:Cn.empty(),allWrites:[],lastWriteId:-1}}function Oa(t,e,n,s){return Qx(t.writeTree,t.treePath,e,n,s)}function th(t,e){return Fk(t.writeTree,t.treePath,e)}function Y0(t,e,n,s){return zk(t.writeTree,t.treePath,e,n,s)}function Ha(t,e){return Jk(t.writeTree,nt(t.treePath,e))}function $k(t,e,n,s,l,a){return Kk(t.writeTree,t.treePath,e,n,s,l,a)}function nh(t,e,n){return Yk(t.writeTree,t.treePath,e,n)}function $x(t,e){return Xx(nt(t.treePath,e),t.writeTree)}function Xx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,Pl(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,Ul(s,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,uo(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,Pl(s,e.snapshotNode,l.oldSnap));else throw yo("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Wx=new Wk;class ih{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return nh(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:as(this.viewCache_),a=$k(this.writes_,l,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return{filter:t}}function jk(t,e){te(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),te(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function e2(t,e,n,s,l){const a=new Xk;let c,h;if(n.type===_n.OVERWRITE){const p=n;p.source.fromUser?c=_f(t,e,p.path,p.snap,s,l,a):(te(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Re(p.path),c=Ga(t,e,p.path,p.snap,s,l,h,a))}else if(n.type===_n.MERGE){const p=n;p.source.fromUser?c=n2(t,e,p.path,p.children,s,l,a):(te(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),c=xf(t,e,p.path,p.children,s,l,h,a))}else if(n.type===_n.ACK_USER_WRITE){const p=n;p.revert?c=o2(t,e,p.path,s,l,a):c=i2(t,e,p.path,p.affectedTree,s,l,a)}else if(n.type===_n.LISTEN_COMPLETE)c=s2(t,e,n.path,s,a);else throw yo("Unknown operation type: "+n.type);const g=a.getChanges();return t2(e,c,g),{viewCache:c,changes:g}}function t2(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=mf(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(Fx(mf(e)))}}function Zx(t,e,n,s,l,a){const c=e.eventCache;if(Ha(s,n)!=null)return e;{let h,g;if(Re(n))if(te(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=as(e),v=p instanceof _e?p:_e.EMPTY_NODE,x=th(s,v);h=t.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const p=Oa(s,as(e));h=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=be(n);if(p===".priority"){te(ki(n)===1,"Can't have a priority with additional path components");const v=c.getNode();g=e.serverCache.getNode();const x=Y0(s,n,v,g);x!=null?h=t.filter.updatePriority(v,x):h=c.getNode()}else{const v=$e(n);let x;if(c.isCompleteForChild(p)){g=e.serverCache.getNode();const E=Y0(s,n,c.getNode(),g);E!=null?x=c.getNode().getImmediateChild(p).updateChild(v,E):x=c.getNode().getImmediateChild(p)}else x=nh(s,p,e.serverCache);x!=null?h=t.filter.updateChild(c.getNode(),p,x,v,l,a):h=c.getNode()}}return bl(e,h,c.isFullyInitialized()||Re(n),t.filter.filtersNodes())}}function Ga(t,e,n,s,l,a,c,h){const g=e.serverCache;let p;const v=c?t.filter:t.filter.getIndexedFilter();if(Re(n))p=v.updateFullNode(g.getNode(),s,null);else if(v.filtersNodes()&&!g.isFiltered()){const T=g.getNode().updateChild(n,s);p=v.updateFullNode(g.getNode(),T,null)}else{const T=be(n);if(!g.isCompleteForPath(n)&&ki(n)>1)return e;const b=$e(n),I=g.getNode().getImmediateChild(T).updateChild(b,s);T===".priority"?p=v.updatePriority(g.getNode(),I):p=v.updateChild(g.getNode(),T,I,b,Wx,null)}const x=Yx(e,p,g.isFullyInitialized()||Re(n),v.filtersNodes()),E=new ih(l,x,a);return Zx(t,x,n,l,E,h)}function _f(t,e,n,s,l,a,c){const h=e.eventCache;let g,p;const v=new ih(l,e,a);if(Re(n))p=t.filter.updateFullNode(e.eventCache.getNode(),s,c),g=bl(e,p,!0,t.filter.filtersNodes());else{const x=be(n);if(x===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),s),g=bl(e,p,h.isFullyInitialized(),h.isFiltered());else{const E=$e(n),T=h.getNode().getImmediateChild(x);let b;if(Re(E))b=s;else{const M=v.getCompleteChild(x);M!=null?Yf(E)===".priority"&&M.getChild(Lx(E)).isEmpty()?b=M:b=M.updateChild(E,s):b=_e.EMPTY_NODE}if(T.equals(b))g=e;else{const M=t.filter.updateChild(h.getNode(),x,b,E,v,c);g=bl(e,M,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function J0(t,e){return t.eventCache.isCompleteForChild(e)}function n2(t,e,n,s,l,a,c){let h=e;return s.foreach((g,p)=>{const v=nt(n,g);J0(e,be(v))&&(h=_f(t,h,v,p,l,a,c))}),s.foreach((g,p)=>{const v=nt(n,g);J0(e,be(v))||(h=_f(t,h,v,p,l,a,c))}),h}function K0(t,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function xf(t,e,n,s,l,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;Re(n)?p=s:p=new Ke(null).setTree(n,s);const v=e.serverCache.getNode();return p.children.inorderTraversal((x,E)=>{if(v.hasChild(x)){const T=e.serverCache.getNode().getImmediateChild(x),b=K0(t,T,E);g=Ga(t,g,new ze(x),b,l,a,c,h)}}),p.children.inorderTraversal((x,E)=>{const T=!e.serverCache.isCompleteForChild(x)&&E.value===null;if(!v.hasChild(x)&&!T){const b=e.serverCache.getNode().getImmediateChild(x),M=K0(t,b,E);g=Ga(t,g,new ze(x),M,l,a,c,h)}}),g}function i2(t,e,n,s,l,a,c){if(Ha(l,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(s.value!=null){if(Re(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return Ga(t,e,n,g.getNode().getChild(n),l,a,h,c);if(Re(n)){let p=new Ke(null);return g.getNode().forEachChild(oo,(v,x)=>{p=p.set(new ze(v),x)}),xf(t,e,n,p,l,a,h,c)}else return e}else{let p=new Ke(null);return s.foreach((v,x)=>{const E=nt(n,v);g.isCompleteForPath(E)&&(p=p.set(v,g.getNode().getChild(E)))}),xf(t,e,n,p,l,a,h,c)}}function s2(t,e,n,s,l){const a=e.serverCache,c=Yx(e,a.getNode(),a.isFullyInitialized()||Re(n),a.isFiltered());return Zx(t,c,n,s,Wx,l)}function o2(t,e,n,s,l,a){let c;if(Ha(s,n)!=null)return e;{const h=new ih(s,e,l),g=e.eventCache.getNode();let p;if(Re(n)||be(n)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Oa(s,as(e));else{const x=e.serverCache.getNode();te(x instanceof _e,"serverChildren would be complete if leaf node"),v=th(s,x)}v=v,p=t.filter.updateFullNode(g,v,a)}else{const v=be(n);let x=nh(s,v,e.serverCache);x==null&&e.serverCache.isCompleteForChild(v)&&(x=g.getImmediateChild(v)),x!=null?p=t.filter.updateChild(g,v,x,$e(n),h,a):e.eventCache.getNode().hasChild(v)?p=t.filter.updateChild(g,v,_e.EMPTY_NODE,$e(n),h,a):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=Oa(s,as(e)),c.isLeafNode()&&(p=t.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||Ha(s,He())!=null,bl(e,p,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new $f(s.getIndex()),a=Tk(s);this.processor_=Zk(a);const c=n.serverCache,h=n.eventCache,g=l.updateFullNode(_e.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(_e.EMPTY_NODE,h.getNode(),null),v=new rs(g,c.isFullyInitialized(),l.filtersNodes()),x=new rs(p,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=ja(x,v),this.eventGenerator_=new Mk(this.query_)}get query(){return this.query_}}function r2(t){return t.viewCache_.serverCache.getNode()}function a2(t,e){const n=as(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Re(e)&&!n.getImmediateChild(be(e)).isEmpty())?n.getChild(e):null}function Q0(t){return t.eventRegistrations_.length===0}function u2(t,e){t.eventRegistrations_.push(e)}function $0(t,e,n){const s=[];if(n){te(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,l);c&&s.push(c)})}if(e){let l=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))l.push(c);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return s}function X0(t,e,n,s){e.type===_n.MERGE&&e.source.queryId!==null&&(te(as(t.viewCache_),"We should always have a full cache before handling merges"),te(mf(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=e2(t.processor_,l,e,n,s);return jk(t.processor_,a.viewCache),te(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,jx(t,a.changes,a.viewCache.eventCache.getNode(),null)}function c2(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(it,(a,c)=>{s.push(uo(a,c))}),n.isFullyInitialized()&&s.push(Fx(n.getNode())),jx(t,s,n.getNode(),e)}function jx(t,e,n,s){const l=s?[s]:t.eventRegistrations_;return Dk(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba;class d2{constructor(){this.views=new Map}}function f2(t){te(!Ba,"__referenceConstructor has already been defined"),Ba=t}function h2(){return te(Ba,"Reference.ts has not been loaded"),Ba}function p2(t){return t.views.size===0}function sh(t,e,n,s){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return te(a!=null,"SyncTree gave us an op for an invalid query."),X0(a,e,n,s)}else{let a=[];for(const c of t.views.values())a=a.concat(X0(c,e,n,s));return a}}function m2(t,e,n,s,l){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let h=Oa(n,l?s:null),g=!1;h?g=!0:s instanceof _e?(h=th(n,s),g=!1):(h=_e.EMPTY_NODE,g=!1);const p=ja(new rs(h,g,!1),new rs(s,l,!1));return new l2(e,p)}return c}function g2(t,e,n,s,l,a){const c=m2(t,e,s,l,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),u2(c,n),c2(c,n)}function y2(t,e,n,s){const l=e._queryIdentifier,a=[];let c=[];const h=Ui(t);if(l==="default")for(const[g,p]of t.views.entries())c=c.concat($0(p,n,s)),Q0(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||a.push(p.query));else{const g=t.views.get(l);g&&(c=c.concat($0(g,n,s)),Q0(g)&&(t.views.delete(l),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!Ui(t)&&a.push(new(h2())(e._repo,e._path)),{removed:a,events:c}}function eE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function lo(t,e){let n=null;for(const s of t.views.values())n=n||a2(s,e);return n}function tE(t,e){if(e._queryParams.loadsAllData())return eu(t);{const s=e._queryIdentifier;return t.views.get(s)}}function nE(t,e){return tE(t,e)!=null}function Ui(t){return eu(t)!=null}function eu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Va;function v2(t){te(!Va,"__referenceConstructor has already been defined"),Va=t}function _2(){return te(Va,"Reference.ts has not been loaded"),Va}let x2=1;class W0{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ke(null),this.pendingWriteTree_=Qk(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function iE(t,e,n,s,l){return Lk(t.pendingWriteTree_,e,n,s,l),l?_o(t,new ls(Wf(),e,n)):[]}function E2(t,e,n,s){Ok(t.pendingWriteTree_,e,n,s);const l=Ke.fromObject(n);return _o(t,new co(Wf(),e,l))}function Ri(t,e,n=!1){const s=Hk(t.pendingWriteTree_,e);if(Gk(t.pendingWriteTree_,e)){let a=new Ke(null);return s.snap!=null?a=a.set(He(),!0):At(s.children,c=>{a=a.set(new ze(c),!0)}),_o(t,new La(s.path,a,n))}else return[]}function tu(t,e,n){return _o(t,new ls(Zf(),e,n))}function C2(t,e,n){const s=Ke.fromObject(n);return _o(t,new co(Zf(),e,s))}function S2(t,e){return _o(t,new Ol(Zf(),e))}function T2(t,e,n){const s=lh(t,n);if(s){const l=rh(s),a=l.path,c=l.queryId,h=Bt(a,e),g=new Ol(jf(c),h);return ah(t,a,g)}else return[]}function Ef(t,e,n,s,l=!1){const a=e._path,c=t.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||nE(c,e))){const g=y2(c,e,n,s);p2(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const p=g.removed;if(h=g.events,!l){const v=p.findIndex(E=>E._queryParams.loadsAllData())!==-1,x=t.syncPointTree_.findOnPath(a,(E,T)=>Ui(T));if(v&&!x){const E=t.syncPointTree_.subtree(a);if(!E.isEmpty()){const T=N2(E);for(let b=0;b<T.length;++b){const M=T[b],I=M.query,G=lE(t,M);t.listenProvider_.startListening(Nl(I),qa(t,I),G.hashFn,G.onComplete)}}}!x&&p.length>0&&!s&&(v?t.listenProvider_.stopListening(Nl(e),null):p.forEach(E=>{const T=t.queryToTagMap.get(nu(E));t.listenProvider_.stopListening(Nl(E),T)}))}w2(t,p)}return h}function b2(t,e,n,s){const l=lh(t,s);if(l!=null){const a=rh(l),c=a.path,h=a.queryId,g=Bt(c,e),p=new ls(jf(h),g,n);return ah(t,c,p)}else return[]}function A2(t,e,n,s){const l=lh(t,s);if(l){const a=rh(l),c=a.path,h=a.queryId,g=Bt(c,e),p=Ke.fromObject(n),v=new co(jf(h),g,p);return ah(t,c,v)}else return[]}function Z0(t,e,n,s=!1){const l=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(l,(E,T)=>{const b=Bt(E,l);a=a||lo(T,b),c=c||Ui(T)});let h=t.syncPointTree_.get(l);h?(c=c||Ui(h),a=a||lo(h,He())):(h=new d2,t.syncPointTree_=t.syncPointTree_.set(l,h));let g;a!=null?g=!0:(g=!1,a=_e.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((T,b)=>{const M=lo(b,He());M&&(a=a.updateImmediateChild(T,M))}));const p=nE(h,e);if(!p&&!e._queryParams.loadsAllData()){const E=nu(e);te(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");const T=R2();t.queryToTagMap.set(E,T),t.tagToQueryMap.set(T,E)}const v=eh(t.pendingWriteTree_,l);let x=g2(h,e,n,v,a,g);if(!p&&!c&&!s){const E=tE(h,e);x=x.concat(I2(t,e,E))}return x}function oh(t,e,n){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=Bt(c,e),p=lo(h,g);if(p)return p});return Qx(l,e,a,n,!0)}function _o(t,e){return sE(e,t.syncPointTree_,null,eh(t.pendingWriteTree_,He()))}function sE(t,e,n,s){if(Re(t.path))return oE(t,e,n,s);{const l=e.get(He());n==null&&l!=null&&(n=lo(l,He()));let a=[];const c=be(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const p=n?n.getImmediateChild(c):null,v=$x(s,c);a=a.concat(sE(h,g,p,v))}return l&&(a=a.concat(sh(l,t,s,n))),a}}function oE(t,e,n,s){const l=e.get(He());n==null&&l!=null&&(n=lo(l,He()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,p=$x(s,c),v=t.operationForChild(c);v&&(a=a.concat(oE(v,h,g,p)))}),l&&(a=a.concat(sh(l,t,s,n))),a}function lE(t,e){const n=e.query,s=qa(t,n);return{hashFn:()=>(r2(e)||_e.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?T2(t,n._path,s):S2(t,n._path);{const a=CD(l,n);return Ef(t,n,null,a)}}}}function qa(t,e){const n=nu(e);return t.queryToTagMap.get(n)}function nu(t){return t._path.toString()+"$"+t._queryIdentifier}function lh(t,e){return t.tagToQueryMap.get(e)}function rh(t){const e=t.indexOf("$");return te(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ze(t.substr(0,e))}}function ah(t,e,n){const s=t.syncPointTree_.get(e);te(s,"Missing sync point for query tag that we're tracking");const l=eh(t.pendingWriteTree_,e);return sh(s,n,l,null)}function N2(t){return t.fold((e,n,s)=>{if(n&&Ui(n))return[eu(n)];{let l=[];return n&&(l=eE(n)),At(s,(a,c)=>{l=l.concat(c)}),l}})}function Nl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_2())(t._repo,t._path):t}function w2(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const l=nu(s),a=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(a)}}}function R2(){return x2++}function I2(t,e,n){const s=e._path,l=qa(t,e),a=lE(t,n),c=t.listenProvider_.startListening(Nl(e),l,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(s);if(l)te(!Ui(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((p,v,x)=>{if(!Re(p)&&v&&Ui(v))return[eu(v).query];{let E=[];return v&&(E=E.concat(eE(v).map(T=>T.query))),At(x,(T,b)=>{E=E.concat(b)}),E}});for(let p=0;p<g.length;++p){const v=g[p];t.listenProvider_.stopListening(Nl(v),qa(t,v))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new uh(n)}node(){return this.node_}}class ch{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=nt(this.path_,e);return new ch(this.syncTree_,n)}node(){return oh(this.syncTree_,this.path_)}}const M2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},j0=function(t,e,n){if(!t||typeof t!="object")return t;if(te(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return D2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return k2(t[".sv"],e);te(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},D2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+t)}},k2=function(t,e,n){t.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&te(!1,"Unexpected increment value: "+s);const l=e.node();if(te(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const c=l.getValue();return typeof c!="number"?s:c+s},rE=function(t,e,n,s){return dh(e,new ch(n,t),s)},aE=function(t,e,n){return dh(t,new uh(e),n)};function dh(t,e,n){const s=t.getPriority().val(),l=j0(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=j0(c.getValue(),e,n);return h!==c.getValue()||l!==c.getPriority().val()?new pt(h,gt(l)):t}else{const c=t;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new pt(l))),c.forEachChild(it,(h,g)=>{const p=dh(g,e.getImmediateChild(h),n);p!==g&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function hh(t,e){let n=e instanceof ze?e:new ze(e),s=t,l=be(n);for(;l!==null;){const a=ro(s.node.children,l)||{children:{},childCount:0};s=new fh(l,s,a),n=$e(n),l=be(n)}return s}function xo(t){return t.node.value}function uE(t,e){t.node.value=e,Cf(t)}function cE(t){return t.node.childCount>0}function U2(t){return xo(t)===void 0&&!cE(t)}function iu(t,e){At(t.node.children,(n,s)=>{e(new fh(n,t,s))})}function dE(t,e,n,s){n&&e(t),iu(t,l=>{dE(l,e,!0)})}function P2(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function zl(t){return new ze(t.parent===null?t.name:zl(t.parent)+"/"+t.name)}function Cf(t){t.parent!==null&&L2(t.parent,t.name,t)}function L2(t,e,n){const s=U2(n),l=Rn(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,Cf(t)):!s&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Cf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=/[\[\].#$\/\u0000-\u001F\u007F]/,H2=/[\[\].#$\u0000-\u001F\u007F]/,Vd=10*1024*1024,ph=function(t){return typeof t=="string"&&t.length!==0&&!O2.test(t)},fE=function(t){return typeof t=="string"&&t.length!==0&&!H2.test(t)},G2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fE(t)},B2=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Bf(t)||t&&typeof t=="object"&&Rn(t,".sv")},V2=function(t,e,n,s){su(Xa(t,"value"),e,n)},su=function(t,e,n){const s=n instanceof ze?new nk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+is(s));if(typeof e=="function")throw new Error(t+"contains a function "+is(s)+" with contents = "+e.toString());if(Bf(e))throw new Error(t+"contains "+e.toString()+" "+is(s));if(typeof e=="string"&&e.length>Vd/3&&Wa(e)>Vd)throw new Error(t+"contains a string greater than "+Vd+" utf8 bytes "+is(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(At(e,(c,h)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!ph(c)))throw new Error(t+" contains an invalid key ("+c+") "+is(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ik(s,c),su(t,h,s),sk(s)}),l&&a)throw new Error(t+' contains ".value" child '+is(s)+" in addition to actual children.")}},q2=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=kl(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!ph(a[c]))throw new Error(t+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tk);let l=null;for(n=0;n<e.length;n++){if(s=e[n],l!==null&&dn(l,s))throw new Error(t+"contains a path "+l.toString()+" that is ancestor of another path "+s.toString());l=s}},F2=function(t,e,n,s){const l=Xa(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const a=[];At(e,(c,h)=>{const g=new ze(c);if(su(l,h,nt(n,g)),Yf(g)===".priority"&&!B2(h))throw new Error(l+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),q2(l,a)},hE=function(t,e,n,s){if(!fE(n))throw new Error(Xa(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z2=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hE(t,e,n)},Y2=function(t,e){if(be(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},J2=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!ph(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!G2(n))throw new Error(Xa(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ou(t,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],a=l.getPath();n!==null&&!Jf(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&t.eventLists_.push(n)}function pE(t,e,n){ou(t,n),mE(t,s=>Jf(s,e))}function Sn(t,e,n){ou(t,n),mE(t,s=>dn(s,e)||dn(e,s))}function mE(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const a=l.path;e(a)?(Q2(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Q2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Sl&&bt("event: "+n.toString()),vo(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="repo_interrupt",X2=25;class W2{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new K2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pa(),this.transactionQueueTree_=new fh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Z2(t,e,n){if(t.stats_=Ff(t.repoInfo_),t.forceRestClient_||AD())t.server_=new Ua(t.repoInfo_,(s,l,a,c)=>{e_(t,s,l,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>t_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new $n(t.repoInfo_,e,(s,l,a,c)=>{e_(t,s,l,a,c)},s=>{t_(t,s)},s=>{eU(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=MD(t.repoInfo_,()=>new Ik(t.stats_,t.server_)),t.infoData_=new bk,t.infoSyncTree_=new W0({startListening:(s,l,a,c)=>{let h=[];const g=t.infoData_.getNode(s._path);return g.isEmpty()||(h=tu(t.infoSyncTree_,s._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),mh(t,"connected",!1),t.serverSyncTree_=new W0({startListening:(s,l,a,c)=>(t.server_.listen(s,a,l,(h,g)=>{const p=c(h,g);Sn(t.eventQueue_,s._path,p)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function j2(t){const n=t.infoData_.getNode(new ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function lu(t){return M2({timestamp:j2(t)})}function e_(t,e,n,s,l){t.dataUpdateCount++;const a=new ze(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(l)if(s){const g=Na(n,p=>gt(p));c=A2(t.serverSyncTree_,a,g,l)}else{const g=gt(n);c=b2(t.serverSyncTree_,a,g,l)}else if(s){const g=Na(n,p=>gt(p));c=C2(t.serverSyncTree_,a,g)}else{const g=gt(n);c=tu(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=ho(t,a)),Sn(t.eventQueue_,h,c)}function t_(t,e){mh(t,"connected",e),e===!1&&iU(t)}function eU(t,e){At(e,(n,s)=>{mh(t,n,s)})}function mh(t,e,n){const s=new ze("/.info/"+e),l=gt(n);t.infoData_.updateSnapshot(s,l);const a=tu(t.infoSyncTree_,s,l);Sn(t.eventQueue_,s,a)}function gh(t){return t.nextWriteId_++}function tU(t,e,n,s,l){ru(t,"set",{path:e.toString(),value:n,priority:s});const a=lu(t),c=gt(n,s),h=oh(t.serverSyncTree_,e),g=aE(c,h,a),p=gh(t),v=iE(t.serverSyncTree_,e,g,p,!0);ou(t.eventQueue_,v),t.server_.put(e.toString(),c.val(!0),(E,T)=>{const b=E==="ok";b||Mt("set at "+e+" failed: "+E);const M=Ri(t.serverSyncTree_,p,!b);Sn(t.eventQueue_,e,M),Sf(t,l,E,T)});const x=vh(t,e);ho(t,x),Sn(t.eventQueue_,x,[])}function nU(t,e,n,s){ru(t,"update",{path:e.toString(),value:n});let l=!0;const a=lu(t),c={};if(At(n,(h,g)=>{l=!1,c[h]=rE(nt(e,h),gt(g),t.serverSyncTree_,a)}),l)bt("update() called with empty data.  Don't do anything."),Sf(t,s,"ok",void 0);else{const h=gh(t),g=E2(t.serverSyncTree_,e,c,h);ou(t.eventQueue_,g),t.server_.merge(e.toString(),n,(p,v)=>{const x=p==="ok";x||Mt("update at "+e+" failed: "+p);const E=Ri(t.serverSyncTree_,h,!x),T=E.length>0?ho(t,e):e;Sn(t.eventQueue_,T,E),Sf(t,s,p,v)}),At(n,p=>{const v=vh(t,nt(e,p));ho(t,v)}),Sn(t.eventQueue_,e,[])}}function iU(t){ru(t,"onDisconnectEvents");const e=lu(t),n=Pa();pf(t.onDisconnect_,He(),(l,a)=>{const c=rE(l,a,t.serverSyncTree_,e);zx(n,l,c)});let s=[];pf(n,He(),(l,a)=>{s=s.concat(tu(t.serverSyncTree_,l,a));const c=vh(t,l);ho(t,c)}),t.onDisconnect_=Pa(),Sn(t.eventQueue_,He(),s)}function sU(t,e,n){let s;be(e._path)===".info"?s=Z0(t.infoSyncTree_,e,n):s=Z0(t.serverSyncTree_,e,n),pE(t.eventQueue_,e._path,s)}function oU(t,e,n){let s;be(e._path)===".info"?s=Ef(t.infoSyncTree_,e,n):s=Ef(t.serverSyncTree_,e,n),pE(t.eventQueue_,e._path,s)}function lU(t){t.persistentConnection_&&t.persistentConnection_.interrupt($2)}function ru(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),bt(n,...e)}function Sf(t,e,n,s){e&&vo(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let a=l;s&&(a+=": "+s);const c=new Error(a);c.code=l,e(c)}})}function gE(t,e,n){return oh(t.serverSyncTree_,e,n)||_e.EMPTY_NODE}function yh(t,e=t.transactionQueueTree_){if(e||au(t,e),xo(e)){const n=vE(t,e);te(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&rU(t,zl(e),n)}else cE(e)&&iu(e,n=>{yh(t,n)})}function rU(t,e,n){const s=n.map(p=>p.currentWriteId),l=gE(t,e,s);let a=l;const c=l.hash();for(let p=0;p<n.length;p++){const v=n[p];te(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const x=Bt(e,v.path);a=a.updateChild(x,v.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,p=>{ru(t,"transaction put response",{path:g.toString(),status:p});let v=[];if(p==="ok"){const x=[];for(let E=0;E<n.length;E++)n[E].status=2,v=v.concat(Ri(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&x.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();au(t,hh(t.transactionQueueTree_,e)),yh(t,t.transactionQueueTree_),Sn(t.eventQueue_,e,v);for(let E=0;E<x.length;E++)vo(x[E])}else{if(p==="datastale")for(let x=0;x<n.length;x++)n[x].status===3?n[x].status=4:n[x].status=0;else{Mt("transaction at "+g.toString()+" failed: "+p);for(let x=0;x<n.length;x++)n[x].status=4,n[x].abortReason=p}ho(t,e)}},c)}function ho(t,e){const n=yE(t,e),s=zl(n),l=vE(t,n);return aU(t,l,s),s}function aU(t,e,n){if(e.length===0)return;const s=[];let l=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],p=Bt(n,g.path);let v=!1,x;if(te(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)v=!0,x=g.abortReason,l=l.concat(Ri(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=X2)v=!0,x="maxretry",l=l.concat(Ri(t.serverSyncTree_,g.currentWriteId,!0));else{const E=gE(t,g.path,c);g.currentInputSnapshot=E;const T=e[h].update(E.val());if(T!==void 0){su("transaction failed: Data returned ",T,g.path);let b=gt(T);typeof T=="object"&&T!=null&&Rn(T,".priority")||(b=b.updatePriority(E.getPriority()));const I=g.currentWriteId,G=lu(t),Y=aE(b,E,G);g.currentOutputSnapshotRaw=b,g.currentOutputSnapshotResolved=Y,g.currentWriteId=gh(t),c.splice(c.indexOf(I),1),l=l.concat(iE(t.serverSyncTree_,g.path,Y,g.currentWriteId,g.applyLocally)),l=l.concat(Ri(t.serverSyncTree_,I,!0))}else v=!0,x="nodata",l=l.concat(Ri(t.serverSyncTree_,g.currentWriteId,!0))}Sn(t.eventQueue_,n,l),l=[],v&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(x==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(x),!1,null))))}au(t,t.transactionQueueTree_);for(let h=0;h<s.length;h++)vo(s[h]);yh(t,t.transactionQueueTree_)}function yE(t,e){let n,s=t.transactionQueueTree_;for(n=be(e);n!==null&&xo(s)===void 0;)s=hh(s,n),e=$e(e),n=be(e);return s}function vE(t,e){const n=[];return _E(t,e,n),n.sort((s,l)=>s.order-l.order),n}function _E(t,e,n){const s=xo(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);iu(e,l=>{_E(t,l,n)})}function au(t,e){const n=xo(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,uE(e,n.length>0?n:void 0)}iu(e,s=>{au(t,s)})}function vh(t,e){const n=zl(yE(t,e)),s=hh(t.transactionQueueTree_,e);return P2(s,l=>{qd(t,l)}),qd(t,s),dE(s,l=>{qd(t,l)}),n}function qd(t,e){const n=xo(e);if(n){const s=[];let l=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(te(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(te(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),l=l.concat(Ri(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&s.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?uE(e,void 0):n.length=a+1,Sn(t.eventQueue_,zl(e),l);for(let c=0;c<s.length;c++)vo(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function cU(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Mt(`Invalid query segment '${n}' in query '${t}'`)}return e}const n_=function(t,e){const n=dU(t),s=n.namespace;n.domain==="firebase.com"&&Zn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yD();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Nx(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new ze(n.pathString)}},dU=function(t){let e="",n="",s="",l="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(h=t.substring(0,p-1),t=t.substring(p+2));let v=t.indexOf("/");v===-1&&(v=t.length);let x=t.indexOf("?");x===-1&&(x=t.length),e=t.substring(0,Math.min(v,x)),v<x&&(l=uU(t.substring(v,x)));const E=cU(t.substring(Math.min(t.length,x)));p=e.indexOf(":"),p>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const b=e.indexOf(".");s=e.substring(0,b).toLowerCase(),n=e.substring(b+1),a=s}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:n,subdomain:s,secure:c,scheme:h,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,s,l){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yt(this.snapshot.exportVal())}}class hU{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return te(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return Re(this._path)?null:Yf(this._path)}get ref(){return new Li(this._repo,this._path)}get _queryIdentifier(){const e=V0(this._queryParams),n=Vf(e);return n==="{}"?"default":n}get _queryObject(){return V0(this._queryParams)}isEqual(e){if(e=Bl(e),!(e instanceof _h))return!1;const n=this._repo===e._repo,s=Jf(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+ek(this._path)}}class Li extends _h{constructor(e,n){super(e,n,new Xf,!1)}get parent(){const e=Lx(this._path);return e===null?null:new Li(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Fa{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ze(e),s=Tf(this.ref,e);return new Fa(this._node.getChild(n),s,it)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new Fa(l,Tf(this.ref,s),it)))}hasChild(e){const n=new ze(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zt(t,e){return t=Bl(t),t._checkNotDeleted("ref"),e!==void 0?Tf(t._root,e):t._root}function Tf(t,e){return t=Bl(t),be(t._path)===null?z2("child","path",e):hE("child","path",e),new Li(t._repo,nt(t._path,e))}function ma(t,e){t=Bl(t),Y2("set",t._path),V2("set",e,t._path);const n=new Hl;return tU(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ni(t,e){F2("update",e,t._path);const n=new Hl;return nU(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class xh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new fU("value",this,new Fa(e.snapshotNode,new Li(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new hU(this,e,n):null}matches(e){return e instanceof xh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mU(t,e,n,s,l){const a=new pU(n,void 0),c=new xh(a);return sU(t._repo,t,c),()=>oU(t._repo,t,c)}function gU(t,e,n,s){return mU(t,"value",e)}f2(Li);v2(Li);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU="FIREBASE_DATABASE_EMULATOR_HOST",bf={};let vU=!1;function _U(t,e,n,s){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=Hf(a);t.repoInfo_=new Nx(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function xU(t,e,n,s,l){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||Zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=n_(a,l),h=c.repoInfo,g;typeof process<"u"&&S0&&(g=S0[yU]),g?(a=`http://${g}?ns=${h.namespace}`,c=n_(a,l),h=c.repoInfo):c.repoInfo.secure;const p=new wD(t.name,t.options,e);J2("Invalid Firebase Database URL",c),Re(c.path)||Zn("Database URL must point to the root of a Firebase Database (not including a child path).");const v=CU(h,t,p,new ND(t,n));return new SU(v,t)}function EU(t,e){const n=bf[e];(!n||n[t.key]!==t)&&Zn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),lU(t),delete n[t.key]}function CU(t,e,n,s){let l=bf[e.name];l||(l={},bf[e.name]=l);let a=l[t.toURLString()];return a&&Zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new W2(t,vU,n,s),l[t.toURLString()]=a,a}class SU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Z2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Li(this._repo,He())),this._rootInternal}_delete(){return this._rootInternal!==null&&(EU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Zn("Cannot call "+e+" on a deleted database.")}}function TU(t=ZM(),e){const n=KM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=DI("database");s&&bU(n,...s)}return n}function bU(t,e,n,s={}){t=Bl(t),t._checkNotDeleted("useEmulator");const l=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&wa(s,a.repoInfo_.emulatorOptions))return;Zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new va(va.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:UI(s.mockUserToken,t.app.options.projectId);c=new va(h)}Hf(e)&&(kI(e),OI("Database",!0)),_U(a,l,s,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){dD(WM),Ia(new Il("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return xU(s,l,a,n)},"PUBLIC").setMultipleInstances(!0)),io(T0,b0,t),io(T0,b0,"esm2020")}$n.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$n.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};AU();const NU={apiKey:"AIzaSyAZF464USpdS6rQNUL1w_-715Rv29GHMw8",authDomain:"st-bernard-kofc-superbowl-grid.firebaseapp.com",databaseURL:"https://st-bernard-kofc-superbowl-grid-default-rtdb.firebaseio.com",projectId:"st-bernard-kofc-superbowl-grid",storageBucket:"st-bernard-kofc-superbowl-grid.appspot.com",messagingSenderId:"619277918232",appId:"1:619277918232:web:4cbdf203d06471d563636d",measurementId:"G-1P3RY5S27M"},wU=cx(NU),jt=TU(wU),xE=()=>Array.from({length:100},(t,e)=>({id:e,row:Math.floor(e/10),col:e%10,participantId:null,alias:"",paidAmount:0,assigned:!1})),_a={teamA:"NFC",teamB:"AFC",costPerBox:10,rowNumbers:[],colNumbers:[],isLocked:!1,payouts:{mode:"standard",charityPercent:50,standardSplits:{q1:20,half:30,q3:20,final:30},scoreChangeMultiplier:3}},RU={adminPassword:"admin",charityName:"Super Bowl Charity Contest",zelleAccount:"",paypalAccount:"",venmoAccount:"",otherPaymentInfo:""},i_=(t,e=_a)=>({id:crypto.randomUUID(),name:t,squares:xE(),participants:[],scores:[],settings:{...e,isLocked:!1,rowNumbers:[],colNumbers:[]},createdAt:Date.now()}),IU=()=>{const[t,e]=ne.useState(null),[n,s]=ne.useState(!1),[l,a]=ne.useState("grid"),[c,h]=ne.useState(null),[g,p]=ne.useState([]),[v,x]=ne.useState(!1),[E,T]=ne.useState(!1),[b,M]=ne.useState(""),[I,G]=ne.useState(!1),[Y,L]=ne.useState(!1);ne.useEffect(()=>{const $=Zt(jt,"state");return gU($,he=>{const le=he.val();if(le)le.pools&&(le.pools=le.pools.map(ve=>{var Ze,Je,ct;return{...ve,participants:ve.participants||[],scores:ve.scores||[],settings:{..._a,...ve.settings,rowNumbers:((Ze=ve.settings)==null?void 0:Ze.rowNumbers)||[],colNumbers:((Je=ve.settings)==null?void 0:Je.colNumbers)||[],payouts:((ct=ve.settings)==null?void 0:ct.payouts)||_a.payouts}}})),e(le);else{const ve=i_("Super Bowl Contest"),Ze={pools:[ve],activePoolId:ve.id,globalSettings:RU};ma(Zt(jt,"state"),Ze),e(Ze)}s(!0)})},[]);const H=ne.useMemo(()=>!t||!t.pools?null:t.pools.find($=>$.id===t.activePoolId)||t.pools[0],[t==null?void 0:t.activePoolId,t==null?void 0:t.pools]),z=ne.useMemo(()=>!t||!t.pools?-1:t.pools.findIndex($=>$.id===t.activePoolId),[t==null?void 0:t.activePoolId,t==null?void 0:t.pools]),ee=ne.useCallback($=>{!t||z===-1||Ni(Zt(jt,`state/pools/${z}`),$)},[t,z]),W=ne.useCallback($=>{!t||z===-1||Ni(Zt(jt,`state/pools/${z}/settings`),$)},[t,z]),ae=ne.useCallback($=>{t&&Ni(Zt(jt,"state/globalSettings"),$)},[t]),j=($,he)=>{if(!t||!H||z===-1)return;const le=$.phone.replace(/\D/g,"");let ve=(H.participants||[]).find(ct=>ct.email.toLowerCase()===$.email.toLowerCase()||ct.phone.replace(/\D/g,"")===le);const Ze=[...H.participants||[]];if(!ve)ve={...$,id:crypto.randomUUID(),paymentHistory:[]},Ze.push(ve);else{const ct=Ze.findIndex(_t=>_t.id===ve.id);Ze[ct]={...ve,...$}}const Je={};Je[`state/pools/${z}/participants`]=Ze,he.forEach(ct=>{Je[`state/pools/${z}/squares/${ct}`]={...H.squares[ct]||{},participantId:ve.id,alias:$.alias.toUpperCase(),assigned:!0}}),Ni(Zt(jt),Je),p([]),h(null),x(!1)},fe=$=>{var le;if(!H)return;const he=(H.squares||[])[$];he!=null&&he.assigned?(h($),x(!0)):(le=H.settings)!=null&&le.isLocked||p(ve=>ve.includes($)?ve.filter(Ze=>Ze!==$):[...ve,$])},ce=ne.useCallback(($,he)=>{if(!t||!H||z===-1)return;const le=he.find(pn=>pn.id===$);if(!le)return;const ve=(le.paymentHistory||[]).reduce((pn,ti)=>pn+ti.amount,0),Ze=H.settings.costPerBox||10;let Je=ve;const ct=(H.squares||[]).map(pn=>{if(pn.participantId!==$)return pn;const ti=Math.min(Je,Ze);return Je=Math.max(0,Je-ti),{...pn,paidAmount:ti}}),_t={};_t[`state/pools/${z}/participants`]=he,_t[`state/pools/${z}/squares`]=ct,Ni(Zt(jt),_t)},[t,H,z]),Te=ne.useCallback(($,he,le)=>{if(!H)return;const ve={id:crypto.randomUUID(),amount:he,method:le,timestamp:Date.now()},Ze=(H.participants||[]).map(Je=>Je.id===$?{...Je,paymentHistory:[...Je.paymentHistory||[],ve]}:Je);ce($,Ze)},[H,ce]),ye=ne.useCallback(($,he,le,ve)=>{if(!H)return;const Ze=(H.participants||[]).map(Je=>{if(Je.id===$){const ct=(Je.paymentHistory||[]).map(_t=>_t.id===he?{..._t,amount:le,method:ve}:_t);return{...Je,paymentHistory:ct}}return Je});ce($,Ze)},[H,ce]),oe=ne.useCallback(($,he)=>{if(!H||!t||z===-1)return;const le=(H.participants||[]).map(ve=>{if(ve.id===$){const Je=(ve.paymentHistory||[]).filter(ct=>ct.id!==he);return{...ve,paymentHistory:Je}}return ve});ce($,le)},[H,t,z,ce]),De=$=>{!t||z===-1||Ni(Zt(jt,`state/pools/${z}/squares/${$}`),{participantId:null,alias:"",paidAmount:0,assigned:!1})},R=$=>{if(!H)return;const he=[...H.scores||[],$];ee({scores:he})},B=$=>{if(!H)return;const he=(H.scores||[]).map(le=>le.id===$.id?$:le);ee({scores:he})},Z=$=>{if(!H)return;const he=(H.scores||[]).filter(le=>le.id!==$);ee({scores:he})},X=()=>{window.confirm("Are you sure you want to clear all data in this pool?")&&ee({squares:xE(),participants:[],scores:[]})},ue=$=>{if(!t||t.pools.length<=1)return;const he=t.pools.filter(ve=>ve.id!==$),le=$===t.activePoolId?he[0].id:t.activePoolId;ma(Zt(jt,"state"),{...t,pools:he,activePoolId:le})},N=()=>{const $=()=>Array.from({length:10},(he,le)=>le).sort(()=>Math.random()-.5);W({rowNumbers:$(),colNumbers:$()})},q=$=>{Ni(Zt(jt,"state/activePoolId"),$)},O=($,he)=>{const le=i_($,{..._a,...he}),ve=[...(t==null?void 0:t.pools)||[],le];ma(Zt(jt,"state"),{...t,pools:ve,activePoolId:le.id})},Q=($,he)=>{z!==-1&&Ni(Zt(jt,`state/pools/${z}/squares/${$}`),he)},se=($,he)=>{if(!H)return;const le=(H.participants||[]).map(ve=>ve.id===$?{...ve,...he}:ve);ee({participants:le})},pe=$=>{$.preventDefault(),b===((t==null?void 0:t.globalSettings.adminPassword)||"admin")?(T(!0),G(!1)):G(!0)};return!n||!t||!H?_.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-indigo-900 text-white p-4",children:[_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white mb-4"}),_.jsx("p",{className:"font-black uppercase tracking-widest text-[10px]",children:"Syncing with Grid..."})]}):_.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-900 font-sans selection:bg-indigo-100 selection:text-indigo-900 overflow-x-hidden",children:[_.jsx("nav",{className:"fixed top-0 left-0 right-0 z-[80] bg-white/80 backdrop-blur-lg border-b border-indigo-50 px-4 py-3 print:hidden",children:_.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 bg-indigo-900 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-100",children:_.jsx("i",{className:"fas fa-football-ball text-sm"})}),_.jsxs("div",{className:"hidden md:block",children:[_.jsx("h1",{className:"text-sm font-black uppercase tracking-tight text-indigo-950 leading-none",children:"Charity Squares"}),_.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.2em] text-indigo-400 mt-1",children:t.globalSettings.charityName})]})]}),_.jsx("div",{className:"flex bg-indigo-50/50 p-1 rounded-2xl border border-indigo-100/50",children:[{id:"grid",icon:"fa-th-large",label:"Grid"},{id:"winners",icon:"fa-trophy",label:"Winners"},{id:"player",icon:"fa-user",label:"My Boxes"},{id:"admin",icon:"fa-lock",label:"Admin"}].map($=>_.jsxs("button",{onClick:()=>a($.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all duration-300 ${l===$.id?"bg-white text-indigo-900 shadow-sm border border-indigo-100/50 scale-105":"text-indigo-400 hover:text-indigo-600"}`,children:[_.jsx("i",{className:`fas ${$.icon} text-xs`}),_.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest hidden sm:inline",children:$.label})]},$.id))}),_.jsx("button",{onClick:()=>L(!0),className:"w-10 h-10 bg-green-500 text-white rounded-xl flex items-center justify-center hover:bg-green-600 transition-all shadow-lg shadow-green-100",children:_.jsx("i",{className:"fas fa-share-alt"})})]})}),_.jsxs("main",{className:"max-w-7xl mx-auto px-4 pt-28 pb-24",children:[l==="grid"&&_.jsx(iT,{squares:H.squares,pendingSelection:g,settings:{...t.globalSettings,...H.settings},onSquareClick:fe,participants:H.participants,onCheckout:()=>x(!0)}),l==="winners"&&_.jsx(xI,{activePool:H,settings:{...t.globalSettings,...H.settings},onAddScore:R,onUpdateScore:B,onDeleteScore:Z,isAdmin:E}),l==="player"&&_.jsx(EI,{state:t}),l==="admin"&&(E?_.jsx(gI,{activePoolId:t.activePoolId,poolSettings:H.settings,globalSettings:t.globalSettings,onUpdatePoolSettings:W,onUpdateActivePool:ee,onUpdateGlobalSettings:ae,onResetGrid:X,onDeletePool:ue,onGenerateNumbers:N,squares:H.squares,participants:H.participants,onUpdateSquare:Q,onUpdateParticipant:se,onApplyPayment:Te,onEditPayment:ye,onDeletePayment:oe,pools:t.pools,onSwitchPool:q,onCreatePool:O,fullState:t,onImportState:$=>ma(Zt(jt,"state"),$)}):_.jsx("div",{className:"max-w-md mx-auto py-12",children:_.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-indigo-50 text-center",children:[_.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:_.jsx("i",{className:"fas fa-user-shield text-2xl"})}),_.jsx("h3",{className:"text-xl font-black uppercase text-indigo-950 mb-2",children:"Admin Entry"}),_.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase mb-8 tracking-widest",children:"Restricted Access Area"}),_.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[_.jsx("input",{autoFocus:!0,type:"password",value:b,onChange:$=>M($.target.value),placeholder:"Enter Admin Password",className:"w-full p-4 bg-gray-50 border-none rounded-2xl text-center font-black text-indigo-900 outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all"}),I&&_.jsx("p",{className:"text-red-500 text-[10px] font-black uppercase",children:"Invalid Credentials"}),_.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Authenticate"})]})]})}))]}),_.jsx(_I,{globalSettings:t.globalSettings,activePool:H}),_.jsx(vI,{isOpen:Y,onClose:()=>L(!1),appState:t}),_.jsx(yI,{isOpen:v,onClose:()=>{h(null),p([]),x(!1)},onSubmit:j,onUnassign:De,onSetPendingSelection:p,selectedSquareIds:c!==null?[c]:g,activePool:H,existingParticipants:H.participants,settings:{...t.globalSettings,...H.settings}}),_.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white/50 backdrop-blur-md border-t border-indigo-50/50 p-4 text-center print:hidden",children:_.jsx("p",{className:"text-[8px] font-black text-indigo-300 uppercase tracking-[0.4em]",children:"Charity Squares Engine"})})]})},EE=document.getElementById("root");if(!EE)throw new Error("Could not find root element to mount to");const MU=nT.createRoot(EE);MU.render(_.jsx(QS.StrictMode,{children:_.jsx(IU,{})}));
