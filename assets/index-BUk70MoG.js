(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();function m_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qd={exports:{}},Ll={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function zC(){if(ky)return Ll;ky=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,l,a){var c=null;if(a!==void 0&&(c=""+a),l.key!==void 0&&(c=""+l.key),"key"in l){a={};for(var h in l)h!=="key"&&(a[h]=l[h])}else a=l;return l=a.ref,{$$typeof:t,type:s,key:c,ref:l!==void 0?l:null,props:a}}return Ll.Fragment=e,Ll.jsx=n,Ll.jsxs=n,Ll}var Uy;function YC(){return Uy||(Uy=1,qd.exports=zC()),qd.exports}var y=YC(),Vd={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Py;function jC(){if(Py)return Ne;Py=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function T(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,I={};function H(b,D,z){this.props=b,this.context=D,this.refs=I,this.updater=z||N}H.prototype.isReactComponent={},H.prototype.setState=function(b,D){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,D,"setState")},H.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function F(){}F.prototype=H.prototype;function q(b,D,z){this.props=b,this.context=D,this.refs=I,this.updater=z||N}var J=q.prototype=new F;J.constructor=q,M(J,H.prototype),J.isPureReactComponent=!0;var se=Array.isArray;function B(){}var X={H:null,A:null,T:null,S:null},ve=Object.prototype.hasOwnProperty;function oe(b,D,z){var te=z.ref;return{$$typeof:t,type:b,key:D,ref:te!==void 0?te:null,props:z}}function de(b,D){return oe(b.type,D,b.props)}function ge(b){return typeof b=="object"&&b!==null&&b.$$typeof===t}function Se(b){var D={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(z){return D[z]})}var ie=/\/+/g;function be(b,D){return typeof b=="object"&&b!==null&&b.key!=null?Se(""+b.key):D.toString(36)}function Ge(b){switch(b.status){case"fulfilled":return b.value;case"rejected":throw b.reason;default:switch(typeof b.status=="string"?b.then(B,B):(b.status="pending",b.then(function(D){b.status==="pending"&&(b.status="fulfilled",b.value=D)},function(D){b.status==="pending"&&(b.status="rejected",b.reason=D)})),b.status){case"fulfilled":return b.value;case"rejected":throw b.reason}}throw b}function U(b,D,z,te,ae){var ce=typeof b;(ce==="undefined"||ce==="boolean")&&(b=null);var fe=!1;if(b===null)fe=!0;else switch(ce){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(b.$$typeof){case t:case e:fe=!0;break;case _:return fe=b._init,U(fe(b._payload),D,z,te,ae)}}if(fe)return ae=ae(b),fe=te===""?"."+be(b,0):te,se(ae)?(z="",fe!=null&&(z=fe.replace(ie,"$&/")+"/"),U(ae,D,z,"",function(j){return j})):ae!=null&&(ge(ae)&&(ae=de(ae,z+(ae.key==null||b&&b.key===ae.key?"":(""+ae.key).replace(ie,"$&/")+"/")+fe)),D.push(ae)),1;fe=0;var Ae=te===""?".":te+":";if(se(b))for(var w=0;w<b.length;w++)te=b[w],ce=Ae+be(te,w),fe+=U(te,D,z,ce,ae);else if(w=T(b),typeof w=="function")for(b=w.call(b),w=0;!(te=b.next()).done;)te=te.value,ce=Ae+be(te,w++),fe+=U(te,D,z,ce,ae);else if(ce==="object"){if(typeof b.then=="function")return U(Ge(b),D,z,te,ae);throw D=String(b),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return fe}function K(b,D,z){if(b==null)return b;var te=[],ae=0;return U(b,te,"","",function(ce){return D.call(z,ce,ae++)}),te}function le(b){if(b._status===-1){var D=b._result;D=D(),D.then(function(z){(b._status===0||b._status===-1)&&(b._status=1,b._result=z)},function(z){(b._status===0||b._status===-1)&&(b._status=2,b._result=z)}),b._status===-1&&(b._status=0,b._result=D)}if(b._status===1)return b._result.default;throw b._result}var Q=typeof reportError=="function"?reportError:function(b){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof b=="object"&&b!==null&&typeof b.message=="string"?String(b.message):String(b),error:b});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",b);return}console.error(b)},re={map:K,forEach:function(b,D,z){K(b,function(){D.apply(this,arguments)},z)},count:function(b){var D=0;return K(b,function(){D++}),D},toArray:function(b){return K(b,function(D){return D})||[]},only:function(b){if(!ge(b))throw Error("React.Children.only expected to receive a single React element child.");return b}};return Ne.Activity=x,Ne.Children=re,Ne.Component=H,Ne.Fragment=n,Ne.Profiler=l,Ne.PureComponent=q,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(b){return X.H.useMemoCache(b)}},Ne.cache=function(b){return function(){return b.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(b,D,z){if(b==null)throw Error("The argument must be a React element, but you passed "+b+".");var te=M({},b.props),ae=b.key;if(D!=null)for(ce in D.key!==void 0&&(ae=""+D.key),D)!ve.call(D,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&D.ref===void 0||(te[ce]=D[ce]);var ce=arguments.length-2;if(ce===1)te.children=z;else if(1<ce){for(var fe=Array(ce),Ae=0;Ae<ce;Ae++)fe[Ae]=arguments[Ae+2];te.children=fe}return oe(b.type,ae,te)},Ne.createContext=function(b){return b={$$typeof:c,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null},b.Provider=b,b.Consumer={$$typeof:a,_context:b},b},Ne.createElement=function(b,D,z){var te,ae={},ce=null;if(D!=null)for(te in D.key!==void 0&&(ce=""+D.key),D)ve.call(D,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ae[te]=D[te]);var fe=arguments.length-2;if(fe===1)ae.children=z;else if(1<fe){for(var Ae=Array(fe),w=0;w<fe;w++)Ae[w]=arguments[w+2];ae.children=Ae}if(b&&b.defaultProps)for(te in fe=b.defaultProps,fe)ae[te]===void 0&&(ae[te]=fe[te]);return oe(b,ce,ae)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(b){return{$$typeof:h,render:b}},Ne.isValidElement=ge,Ne.lazy=function(b){return{$$typeof:_,_payload:{_status:-1,_result:b},_init:le}},Ne.memo=function(b,D){return{$$typeof:p,type:b,compare:D===void 0?null:D}},Ne.startTransition=function(b){var D=X.T,z={};X.T=z;try{var te=b(),ae=X.S;ae!==null&&ae(z,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(B,Q)}catch(ce){Q(ce)}finally{D!==null&&z.types!==null&&(D.types=z.types),X.T=D}},Ne.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ne.use=function(b){return X.H.use(b)},Ne.useActionState=function(b,D,z){return X.H.useActionState(b,D,z)},Ne.useCallback=function(b,D){return X.H.useCallback(b,D)},Ne.useContext=function(b){return X.H.useContext(b)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(b,D){return X.H.useDeferredValue(b,D)},Ne.useEffect=function(b,D){return X.H.useEffect(b,D)},Ne.useEffectEvent=function(b){return X.H.useEffectEvent(b)},Ne.useId=function(){return X.H.useId()},Ne.useImperativeHandle=function(b,D,z){return X.H.useImperativeHandle(b,D,z)},Ne.useInsertionEffect=function(b,D){return X.H.useInsertionEffect(b,D)},Ne.useLayoutEffect=function(b,D){return X.H.useLayoutEffect(b,D)},Ne.useMemo=function(b,D){return X.H.useMemo(b,D)},Ne.useOptimistic=function(b,D){return X.H.useOptimistic(b,D)},Ne.useReducer=function(b,D,z){return X.H.useReducer(b,D,z)},Ne.useRef=function(b){return X.H.useRef(b)},Ne.useState=function(b){return X.H.useState(b)},Ne.useSyncExternalStore=function(b,D,z){return X.H.useSyncExternalStore(b,D,z)},Ne.useTransition=function(){return X.H.useTransition()},Ne.version="19.2.4",Ne}var Ly;function Ff(){return Ly||(Ly=1,Vd.exports=jC()),Vd.exports}var W=Ff();const JC=m_(W);var Fd={exports:{}},Ol={},zd={exports:{}},Yd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function $C(){return Oy||(Oy=1,(function(t){function e(U,K){var le=U.length;U.push(K);e:for(;0<le;){var Q=le-1>>>1,re=U[Q];if(0<l(re,K))U[Q]=K,U[le]=re,le=Q;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var K=U[0],le=U.pop();if(le!==K){U[0]=le;e:for(var Q=0,re=U.length,b=re>>>1;Q<b;){var D=2*(Q+1)-1,z=U[D],te=D+1,ae=U[te];if(0>l(z,le))te<re&&0>l(ae,z)?(U[Q]=ae,U[te]=le,Q=te):(U[Q]=z,U[D]=le,Q=D);else if(te<re&&0>l(ae,le))U[Q]=ae,U[te]=le,Q=te;else break e}}return K}function l(U,K){var le=U.sortIndex-K.sortIndex;return le!==0?le:U.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();t.unstable_now=function(){return c.now()-h}}var g=[],p=[],_=1,x=null,E=3,T=!1,N=!1,M=!1,I=!1,H=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function J(U){for(var K=n(p);K!==null;){if(K.callback===null)s(p);else if(K.startTime<=U)s(p),K.sortIndex=K.expirationTime,e(g,K);else break;K=n(p)}}function se(U){if(M=!1,J(U),!N)if(n(g)!==null)N=!0,B||(B=!0,Se());else{var K=n(p);K!==null&&Ge(se,K.startTime-U)}}var B=!1,X=-1,ve=5,oe=-1;function de(){return I?!0:!(t.unstable_now()-oe<ve)}function ge(){if(I=!1,B){var U=t.unstable_now();oe=U;var K=!0;try{e:{N=!1,M&&(M=!1,F(X),X=-1),T=!0;var le=E;try{t:{for(J(U),x=n(g);x!==null&&!(x.expirationTime>U&&de());){var Q=x.callback;if(typeof Q=="function"){x.callback=null,E=x.priorityLevel;var re=Q(x.expirationTime<=U);if(U=t.unstable_now(),typeof re=="function"){x.callback=re,J(U),K=!0;break t}x===n(g)&&s(g),J(U)}else s(g);x=n(g)}if(x!==null)K=!0;else{var b=n(p);b!==null&&Ge(se,b.startTime-U),K=!1}}break e}finally{x=null,E=le,T=!1}K=void 0}}finally{K?Se():B=!1}}}var Se;if(typeof q=="function")Se=function(){q(ge)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,be=ie.port2;ie.port1.onmessage=ge,Se=function(){be.postMessage(null)}}else Se=function(){H(ge,0)};function Ge(U,K){X=H(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(U){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var le=E;E=K;try{return U()}finally{E=le}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=E;E=U;try{return K()}finally{E=le}},t.unstable_scheduleCallback=function(U,K,le){var Q=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Q+le:Q):le=Q,U){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=le+re,U={id:_++,callback:K,priorityLevel:U,startTime:le,expirationTime:re,sortIndex:-1},le>Q?(U.sortIndex=le,e(p,U),n(g)===null&&U===n(p)&&(M?(F(X),X=-1):M=!0,Ge(se,le-Q))):(U.sortIndex=re,e(g,U),N||T||(N=!0,B||(B=!0,Se()))),U},t.unstable_shouldYield=de,t.unstable_wrapCallback=function(U){var K=E;return function(){var le=E;E=K;try{return U.apply(this,arguments)}finally{E=le}}}})(Yd)),Yd}var By;function KC(){return By||(By=1,zd.exports=$C()),zd.exports}var jd={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function QC(){if(Hy)return zt;Hy=1;var t=Ff();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function a(g,p,_){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:g,containerInfo:p,implementation:_}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,zt.createPortal=function(g,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(g,p,null,_)},zt.flushSync=function(g){var p=c.T,_=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=_,s.d.f()}},zt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},zt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},zt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var _=p.as,x=h(_,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:T}):_==="script"&&s.d.X(g,{crossOrigin:x,integrity:E,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},zt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},zt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,x=h(_,p.crossOrigin);s.d.L(g,_,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},zt.preloadModule=function(g,p){if(typeof g=="string")if(p){var _=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},zt.requestFormReset=function(g){s.d.r(g)},zt.unstable_batchedUpdates=function(g,p){return g(p)},zt.useFormState=function(g,p,_){return c.H.useFormState(g,p,_)},zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},zt.version="19.2.4",zt}var Gy;function XC(){if(Gy)return jd.exports;Gy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),jd.exports=QC(),jd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function WC(){if(qy)return Ol;qy=1;var t=KC(),e=Ff(),n=XC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)o+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,r=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(r=o.return),i=o.return;while(i)}return o.tag===3?r:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(a(i)!==i)throw Error(s(188))}function p(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var r=i,u=o;;){var m=r.return;if(m===null)break;var v=m.alternate;if(v===null){if(u=m.return,u!==null){r=u;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===r)return g(m),i;if(v===u)return g(m),o;v=v.sibling}throw Error(s(188))}if(r.return!==u.return)r=m,u=v;else{for(var S=!1,C=m.child;C;){if(C===r){S=!0,r=m,u=v;break}if(C===u){S=!0,u=m,r=v;break}C=C.sibling}if(!S){for(C=v.child;C;){if(C===r){S=!0,r=v,u=m;break}if(C===u){S=!0,u=v,r=m;break}C=C.sibling}if(!S)throw Error(s(189))}}if(r.alternate!==u)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?i:o}function _(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=_(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),q=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function Se(i){return i===null||typeof i!="object"?null:(i=ge&&i[ge]||i["@@iterator"],typeof i=="function"?i:null)}var ie=Symbol.for("react.client.reference");function be(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===ie?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case H:return"Profiler";case I:return"StrictMode";case se:return"Suspense";case B:return"SuspenseList";case oe:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case q:return i.displayName||"Context";case F:return(i._context.displayName||"Context")+".Consumer";case J:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return o=i.displayName||null,o!==null?o:be(i.type)||"Memo";case ve:o=i._payload,i=i._init;try{return be(i(o))}catch{}}return null}var Ge=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Q=[],re=-1;function b(i){return{current:i}}function D(i){0>re||(i.current=Q[re],Q[re]=null,re--)}function z(i,o){re++,Q[re]=i.current,i.current=o}var te=b(null),ae=b(null),ce=b(null),fe=b(null);function Ae(i,o){switch(z(ce,o),z(ae,i),z(te,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?ny(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=ny(o),i=iy(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}D(te),z(te,i)}function w(){D(te),D(ae),D(ce)}function j(i){i.memoizedState!==null&&z(fe,i);var o=te.current,r=iy(o,i.type);o!==r&&(z(ae,i),z(te,r))}function ee(i){ae.current===i&&(D(te),D(ae)),fe.current===i&&(D(fe),Dl._currentValue=le)}var pe,ye;function De(i){if(pe===void 0)try{throw Error()}catch(r){var o=r.stack.trim().match(/\n( *(at )?)/);pe=o&&o[1]||"",ye=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+i+ye}var Re=!1;function Ve(i,o){if(!i||Re)return"";Re=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(G){var O=G}Reflect.construct(i,[],$)}else{try{$.call()}catch(G){O=G}i.call($.prototype)}}else{try{throw Error()}catch(G){O=G}($=i())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(G){if(G&&O&&typeof G.stack=="string")return[G.stack,O.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=u.DetermineComponentFrameRoot(),S=v[0],C=v[1];if(S&&C){var A=S.split(`
`),L=C.split(`
`);for(m=u=0;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;for(;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;if(u===A.length||m===L.length)for(u=A.length-1,m=L.length-1;1<=u&&0<=m&&A[u]!==L[m];)m--;for(;1<=u&&0<=m;u--,m--)if(A[u]!==L[m]){if(u!==1||m!==1)do if(u--,m--,0>m||A[u]!==L[m]){var V=`
`+A[u].replace(" at new "," at ");return i.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",i.displayName)),V}while(1<=u&&0<=m);break}}}finally{Re=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?De(r):""}function dt(i,o){switch(i.tag){case 26:case 27:case 5:return De(i.type);case 16:return De("Lazy");case 13:return i.child!==o&&o!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return Ve(i.type,!1);case 11:return Ve(i.type.render,!1);case 1:return Ve(i.type,!0);case 31:return De("Activity");default:return""}}function We(i){try{var o="",r=null;do o+=dt(i,r),r=i,i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Fe=Object.prototype.hasOwnProperty,Vt=t.unstable_scheduleCallback,Ti=t.unstable_cancelCallback,pr=t.unstable_shouldYield,mr=t.unstable_requestPaint,Ft=t.unstable_now,Z=t.unstable_getCurrentPriorityLevel,Ie=t.unstable_ImmediatePriority,Ke=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,jt=t.unstable_LowPriority,vn=t.unstable_IdlePriority,yt=t.log,Ps=t.unstable_setDisableYieldValue,_n=null,Ce=null;function ut(i){if(typeof yt=="function"&&Ps(i),Ce&&typeof Ce.setStrictMode=="function")try{Ce.setStrictMode(_n,i)}catch{}}var ft=Math.clz32?Math.clz32:Ni,Xn=Math.log,bi=Math.LN2;function Ni(i){return i>>>=0,i===0?32:31-(Xn(i)/bi|0)|0}var vt=256,Wn=262144,Ut=4194304;function cn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fn(i,o,r){var u=i.pendingLanes;if(u===0)return 0;var m=0,v=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~v,u!==0?m=cn(u):(S&=C,S!==0?m=cn(S):r||(r=C&~i,r!==0&&(m=cn(r))))):(C=u&~v,C!==0?m=cn(C):S!==0?m=cn(S):r||(r=u&~i,r!==0&&(m=cn(r)))),m===0?0:o!==0&&o!==m&&(o&v)===0&&(v=m&-m,r=o&-o,v>=r||v===32&&(r&4194048)!==0)?o:m}function Zt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Yo(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var i=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),i}function ls(i){for(var o=[],r=0;31>r;r++)o.push(i);return o}function jo(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function DE(i,o,r,u,m,v){var S=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var C=i.entanglements,A=i.expirationTimes,L=i.hiddenUpdates;for(r=S&~r;0<r;){var V=31-ft(r),$=1<<V;C[V]=0,A[V]=-1;var O=L[V];if(O!==null)for(L[V]=null,V=0;V<O.length;V++){var G=O[V];G!==null&&(G.lane&=-536870913)}r&=~$}u!==0&&Bh(i,u,0),v!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=v&~(S&~o))}function Bh(i,o,r){i.pendingLanes|=o,i.suspendedLanes&=~o;var u=31-ft(o);i.entangledLanes|=o,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function Hh(i,o){var r=i.entangledLanes|=o;for(i=i.entanglements;r;){var u=31-ft(r),m=1<<u;m&o|i[u]&o&&(i[u]|=o),r&=~m}}function Gh(i,o){var r=o&-o;return r=(r&42)!==0?1:Iu(r),(r&(i.suspendedLanes|o))!==0?0:r}function Iu(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Mu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function qh(){var i=K.p;return i!==0?i:(i=window.event,i===void 0?32:Ny(i.type))}function Vh(i,o){var r=K.p;try{return K.p=i,o()}finally{K.p=r}}var Ai=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Ai,en="__reactProps$"+Ai,Ls="__reactContainer$"+Ai,Du="__reactEvents$"+Ai,kE="__reactListeners$"+Ai,UE="__reactHandles$"+Ai,Fh="__reactResources$"+Ai,Jo="__reactMarker$"+Ai;function ku(i){delete i[Pt],delete i[en],delete i[Du],delete i[kE],delete i[UE]}function Os(i){var o=i[Pt];if(o)return o;for(var r=i.parentNode;r;){if(o=r[Ls]||r[Pt]){if(r=o.alternate,o.child!==null||r!==null&&r.child!==null)for(i=cy(i);i!==null;){if(r=i[Pt])return r;i=cy(i)}return o}i=r,r=i.parentNode}return null}function Bs(i){if(i=i[Pt]||i[Ls]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function $o(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Hs(i){var o=i[Fh];return o||(o=i[Fh]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function At(i){i[Jo]=!0}var zh=new Set,Yh={};function rs(i,o){Gs(i,o),Gs(i+"Capture",o)}function Gs(i,o){for(Yh[i]=o,i=0;i<o.length;i++)zh.add(o[i])}var PE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jh={},Jh={};function LE(i){return Fe.call(Jh,i)?!0:Fe.call(jh,i)?!1:PE.test(i)?Jh[i]=!0:(jh[i]=!0,!1)}function gr(i,o,r){if(LE(o))if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+r)}}function yr(i,o,r){if(r===null)i.removeAttribute(o);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+r)}}function Zn(i,o,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(o,r,""+u)}}function xn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function $h(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function OE(i,o,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){r=""+S,v.call(this,S)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(S){r=""+S},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Uu(i){if(!i._valueTracker){var o=$h(i)?"checked":"value";i._valueTracker=OE(i,o,""+i[o])}}function Kh(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var r=o.getValue(),u="";return i&&(u=$h(i)?i.checked?"true":"false":i.value),i=u,i!==r?(o.setValue(i),!0):!1}function vr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var BE=/[\n"\\]/g;function En(i){return i.replace(BE,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Pu(i,o,r,u,m,v,S,C){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),o!=null?S==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+xn(o)):i.value!==""+xn(o)&&(i.value=""+xn(o)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),o!=null?Lu(i,S,xn(o)):r!=null?Lu(i,S,xn(r)):u!=null&&i.removeAttribute("value"),m==null&&v!=null&&(i.defaultChecked=!!v),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+xn(C):i.removeAttribute("name")}function Qh(i,o,r,u,m,v,S,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||r!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Uu(i);return}r=r!=null?""+xn(r):"",o=o!=null?""+xn(o):r,C||o===i.value||(i.value=o),i.defaultValue=o}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Uu(i)}function Lu(i,o,r){o==="number"&&vr(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function qs(i,o,r,u){if(i=i.options,o){o={};for(var m=0;m<r.length;m++)o["$"+r[m]]=!0;for(r=0;r<i.length;r++)m=o.hasOwnProperty("$"+i[r].value),i[r].selected!==m&&(i[r].selected=m),m&&u&&(i[r].defaultSelected=!0)}else{for(r=""+xn(r),o=null,m=0;m<i.length;m++){if(i[m].value===r){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Xh(i,o,r){if(o!=null&&(o=""+xn(o),o!==i.value&&(i.value=o),r==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=r!=null?""+xn(r):""}function Wh(i,o,r,u){if(o==null){if(u!=null){if(r!=null)throw Error(s(92));if(Ge(u)){if(1<u.length)throw Error(s(93));u=u[0]}r=u}r==null&&(r=""),o=r}r=xn(o),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),Uu(i)}function Vs(i,o){if(o){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=o;return}}i.textContent=o}var HE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zh(i,o,r){var u=o.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":u?i.setProperty(o,r):typeof r!="number"||r===0||HE.has(o)?o==="float"?i.cssFloat=r:i[o]=(""+r).trim():i[o]=r+"px"}function ep(i,o,r){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in o)u=o[m],o.hasOwnProperty(m)&&r[m]!==u&&Zh(i,m,u)}else for(var v in o)o.hasOwnProperty(v)&&Zh(i,v,o[v])}function Ou(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var GE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(i){return qE.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ei(){}var Bu=null;function Hu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,zs=null;function tp(i){var o=Bs(i);if(o&&(i=o.stateNode)){var r=i[en]||null;e:switch(i=o.stateNode,o.type){case"input":if(Pu(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),o=r.name,r.type==="radio"&&o!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+En(""+o)+'"][type="radio"]'),o=0;o<r.length;o++){var u=r[o];if(u!==i&&u.form===i.form){var m=u[en]||null;if(!m)throw Error(s(90));Pu(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<r.length;o++)u=r[o],u.form===i.form&&Kh(u)}break e;case"textarea":Xh(i,r.value,r.defaultValue);break e;case"select":o=r.value,o!=null&&qs(i,!!r.multiple,o,!1)}}}var Gu=!1;function np(i,o,r){if(Gu)return i(o,r);Gu=!0;try{var u=i(o);return u}finally{if(Gu=!1,(Fs!==null||zs!==null)&&(la(),Fs&&(o=Fs,i=zs,zs=Fs=null,tp(o),i)))for(o=0;o<i.length;o++)tp(i[o])}}function Ko(i,o){var r=i.stateNode;if(r===null)return null;var u=r[en]||null;if(u===null)return null;r=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(s(231,o,typeof r));return r}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qu=!1;if(ti)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){qu=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{qu=!1}var wi=null,Vu=null,xr=null;function ip(){if(xr)return xr;var i,o=Vu,r=o.length,u,m="value"in wi?wi.value:wi.textContent,v=m.length;for(i=0;i<r&&o[i]===m[i];i++);var S=r-i;for(u=1;u<=S&&o[r-u]===m[v-u];u++);return xr=m.slice(i,1<u?1-u:void 0)}function Er(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Sr(){return!0}function sp(){return!1}function tn(i){function o(r,u,m,v,S){this._reactName=r,this._targetInst=m,this.type=u,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(r=i[C],this[C]=r?r(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Sr:sp,this.isPropagationStopped=sp,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),o}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cr=tn(as),Xo=x({},as,{view:0,detail:0}),VE=tn(Xo),Fu,zu,Wo,Tr=x({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wo&&(Wo&&i.type==="mousemove"?(Fu=i.screenX-Wo.screenX,zu=i.screenY-Wo.screenY):zu=Fu=0,Wo=i),Fu)},movementY:function(i){return"movementY"in i?i.movementY:zu}}),op=tn(Tr),FE=x({},Tr,{dataTransfer:0}),zE=tn(FE),YE=x({},Xo,{relatedTarget:0}),Yu=tn(YE),jE=x({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),JE=tn(jE),$E=x({},as,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),KE=tn($E),QE=x({},as,{data:0}),lp=tn(QE),XE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eS(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ZE[i])?!!o[i]:!1}function ju(){return eS}var tS=x({},Xo,{key:function(i){if(i.key){var o=XE[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Er(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?WE[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(i){return i.type==="keypress"?Er(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Er(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),nS=tn(tS),iS=x({},Tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=tn(iS),sS=x({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),oS=tn(sS),lS=x({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),rS=tn(lS),aS=x({},Tr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),uS=tn(aS),cS=x({},as,{newState:0,oldState:0}),dS=tn(cS),fS=[9,13,27,32],Ju=ti&&"CompositionEvent"in window,Zo=null;ti&&"documentMode"in document&&(Zo=document.documentMode);var hS=ti&&"TextEvent"in window&&!Zo,ap=ti&&(!Ju||Zo&&8<Zo&&11>=Zo),up=" ",cp=!1;function dp(i,o){switch(i){case"keyup":return fS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ys=!1;function pS(i,o){switch(i){case"compositionend":return fp(o);case"keypress":return o.which!==32?null:(cp=!0,up);case"textInput":return i=o.data,i===up&&cp?null:i;default:return null}}function mS(i,o){if(Ys)return i==="compositionend"||!Ju&&dp(i,o)?(i=ip(),xr=Vu=wi=null,Ys=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ap&&o.locale!=="ko"?null:o.data;default:return null}}var gS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!gS[i.type]:o==="textarea"}function pp(i,o,r,u){Fs?zs?zs.push(u):zs=[u]:Fs=u,o=ha(o,"onChange"),0<o.length&&(r=new Cr("onChange","change",null,r,u),i.push({event:r,listeners:o}))}var el=null,tl=null;function yS(i){Qg(i,0)}function br(i){var o=$o(i);if(Kh(o))return i}function mp(i,o){if(i==="change")return o}var gp=!1;if(ti){var $u;if(ti){var Ku="oninput"in document;if(!Ku){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),Ku=typeof yp.oninput=="function"}$u=Ku}else $u=!1;gp=$u&&(!document.documentMode||9<document.documentMode)}function vp(){el&&(el.detachEvent("onpropertychange",_p),tl=el=null)}function _p(i){if(i.propertyName==="value"&&br(tl)){var o=[];pp(o,tl,i,Hu(i)),np(yS,o)}}function vS(i,o,r){i==="focusin"?(vp(),el=o,tl=r,el.attachEvent("onpropertychange",_p)):i==="focusout"&&vp()}function _S(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return br(tl)}function xS(i,o){if(i==="click")return br(o)}function ES(i,o){if(i==="input"||i==="change")return br(o)}function SS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var dn=typeof Object.is=="function"?Object.is:SS;function nl(i,o){if(dn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var r=Object.keys(i),u=Object.keys(o);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var m=r[u];if(!Fe.call(o,m)||!dn(i[m],o[m]))return!1}return!0}function xp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ep(i,o){var r=xp(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=o&&u>=o)return{node:r,offset:o-i};i=u}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=xp(r)}}function Sp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Sp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Cp(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=vr(i.document);o instanceof i.HTMLIFrameElement;){try{var r=typeof o.contentWindow.location.href=="string"}catch{r=!1}if(r)i=o.contentWindow;else break;o=vr(i.document)}return o}function Qu(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var CS=ti&&"documentMode"in document&&11>=document.documentMode,js=null,Xu=null,il=null,Wu=!1;function Tp(i,o,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wu||js==null||js!==vr(u)||(u=js,"selectionStart"in u&&Qu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),il&&nl(il,u)||(il=u,u=ha(Xu,"onSelect"),0<u.length&&(o=new Cr("onSelect","select",null,o,r),i.push({event:o,listeners:u}),o.target=js)))}function us(i,o){var r={};return r[i.toLowerCase()]=o.toLowerCase(),r["Webkit"+i]="webkit"+o,r["Moz"+i]="moz"+o,r}var Js={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Zu={},bp={};ti&&(bp=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function cs(i){if(Zu[i])return Zu[i];if(!Js[i])return i;var o=Js[i],r;for(r in o)if(o.hasOwnProperty(r)&&r in bp)return Zu[i]=o[r];return i}var Np=cs("animationend"),Ap=cs("animationiteration"),wp=cs("animationstart"),TS=cs("transitionrun"),bS=cs("transitionstart"),NS=cs("transitioncancel"),Rp=cs("transitionend"),Ip=new Map,ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ec.push("scrollEnd");function kn(i,o){Ip.set(i,o),rs(o,[i])}var Nr=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Sn=[],$s=0,tc=0;function Ar(){for(var i=$s,o=tc=$s=0;o<i;){var r=Sn[o];Sn[o++]=null;var u=Sn[o];Sn[o++]=null;var m=Sn[o];Sn[o++]=null;var v=Sn[o];if(Sn[o++]=null,u!==null&&m!==null){var S=u.pending;S===null?m.next=m:(m.next=S.next,S.next=m),u.pending=m}v!==0&&Mp(r,m,v)}}function wr(i,o,r,u){Sn[$s++]=i,Sn[$s++]=o,Sn[$s++]=r,Sn[$s++]=u,tc|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function nc(i,o,r,u){return wr(i,o,r,u),Rr(i)}function ds(i,o){return wr(i,null,null,o),Rr(i)}function Mp(i,o,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var m=!1,v=i.return;v!==null;)v.childLanes|=r,u=v.alternate,u!==null&&(u.childLanes|=r),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(m=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,m&&o!==null&&(m=31-ft(r),i=v.hiddenUpdates,u=i[m],u===null?i[m]=[o]:u.push(o),o.lane=r|536870912),v):null}function Rr(i){if(50<bl)throw bl=0,dd=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Ks={};function AS(i,o,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(i,o,r,u){return new AS(i,o,r,u)}function ic(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ni(i,o){var r=i.alternate;return r===null?(r=fn(i.tag,o,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=o,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,o=i.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function Dp(i,o){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,o=r.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Ir(i,o,r,u,m,v){var S=0;if(u=i,typeof i=="function")ic(i)&&(S=1);else if(typeof i=="string")S=DC(i,r,te.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case oe:return i=fn(31,r,o,m),i.elementType=oe,i.lanes=v,i;case M:return fs(r.children,m,v,o);case I:S=8,m|=24;break;case H:return i=fn(12,r,o,m|2),i.elementType=H,i.lanes=v,i;case se:return i=fn(13,r,o,m),i.elementType=se,i.lanes=v,i;case B:return i=fn(19,r,o,m),i.elementType=B,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case q:S=10;break e;case F:S=9;break e;case J:S=11;break e;case X:S=14;break e;case ve:S=16,u=null;break e}S=29,r=Error(s(130,i===null?"null":typeof i,"")),u=null}return o=fn(S,r,o,m),o.elementType=i,o.type=u,o.lanes=v,o}function fs(i,o,r,u){return i=fn(7,i,u,o),i.lanes=r,i}function sc(i,o,r){return i=fn(6,i,null,o),i.lanes=r,i}function kp(i){var o=fn(18,null,null,0);return o.stateNode=i,o}function oc(i,o,r){return o=fn(4,i.children!==null?i.children:[],i.key,o),o.lanes=r,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Up=new WeakMap;function Cn(i,o){if(typeof i=="object"&&i!==null){var r=Up.get(i);return r!==void 0?r:(o={value:i,source:o,stack:We(o)},Up.set(i,o),o)}return{value:i,source:o,stack:We(o)}}var Qs=[],Xs=0,Mr=null,sl=0,Tn=[],bn=0,Ri=null,Yn=1,jn="";function ii(i,o){Qs[Xs++]=sl,Qs[Xs++]=Mr,Mr=i,sl=o}function Pp(i,o,r){Tn[bn++]=Yn,Tn[bn++]=jn,Tn[bn++]=Ri,Ri=i;var u=Yn;i=jn;var m=32-ft(u)-1;u&=~(1<<m),r+=1;var v=32-ft(o)+m;if(30<v){var S=m-m%5;v=(u&(1<<S)-1).toString(32),u>>=S,m-=S,Yn=1<<32-ft(o)+m|r<<m|u,jn=v+i}else Yn=1<<v|r<<m|u,jn=i}function lc(i){i.return!==null&&(ii(i,1),Pp(i,1,0))}function rc(i){for(;i===Mr;)Mr=Qs[--Xs],Qs[Xs]=null,sl=Qs[--Xs],Qs[Xs]=null;for(;i===Ri;)Ri=Tn[--bn],Tn[bn]=null,jn=Tn[--bn],Tn[bn]=null,Yn=Tn[--bn],Tn[bn]=null}function Lp(i,o){Tn[bn++]=Yn,Tn[bn++]=jn,Tn[bn++]=Ri,Yn=o.id,jn=o.overflow,Ri=i}var Lt=null,rt=null,qe=!1,Ii=null,Nn=!1,ac=Error(s(519));function Mi(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ol(Cn(o,i)),ac}function Op(i){var o=i.stateNode,r=i.type,u=i.memoizedProps;switch(o[Pt]=i,o[en]=u,r){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(r=0;r<Al.length;r++)Le(Al[r],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),Qh(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),Wh(o,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||o.textContent===""+r||u.suppressHydrationWarning===!0||ey(o.textContent,r)?(u.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),u.onScroll!=null&&Le("scroll",o),u.onScrollEnd!=null&&Le("scrollend",o),u.onClick!=null&&(o.onclick=ei),o=!0):o=!1,o||Mi(i,!0)}function Bp(i){for(Lt=i.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Lt=Lt.return}}function Ws(i){if(i!==Lt)return!1;if(!qe)return Bp(i),qe=!0,!1;var o=i.tag,r;if((r=o!==3&&o!==27)&&((r=o===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Nd(i.type,i.memoizedProps)),r=!r),r&&rt&&Mi(i),Bp(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=uy(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));rt=uy(i)}else o===27?(o=rt,Yi(i.type)?(i=Md,Md=null,rt=i):rt=o):rt=Lt?wn(i.stateNode.nextSibling):null;return!0}function hs(){rt=Lt=null,qe=!1}function uc(){var i=Ii;return i!==null&&(ln===null?ln=i:ln.push.apply(ln,i),Ii=null),i}function ol(i){Ii===null?Ii=[i]:Ii.push(i)}var cc=b(null),ps=null,si=null;function Di(i,o,r){z(cc,o._currentValue),o._currentValue=r}function oi(i){i._currentValue=cc.current,D(cc)}function dc(i,o,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),i===r)break;i=i.return}}function fc(i,o,r,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var v=m.dependencies;if(v!==null){var S=m.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=m;for(var A=0;A<o.length;A++)if(C.context===o[A]){v.lanes|=r,C=v.alternate,C!==null&&(C.lanes|=r),dc(v.return,r,i),u||(S=null);break e}v=C.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(s(341));S.lanes|=r,v=S.alternate,v!==null&&(v.lanes|=r),dc(S,r,i),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===i){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Zs(i,o,r,u){i=null;for(var m=o,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var C=m.type;dn(m.pendingProps.value,S.value)||(i!==null?i.push(C):i=[C])}}else if(m===fe.current){if(S=m.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Dl):i=[Dl])}m=m.return}i!==null&&fc(o,i,r,u),o.flags|=262144}function Dr(i){for(i=i.firstContext;i!==null;){if(!dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ms(i){ps=i,si=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ot(i){return Hp(ps,i)}function kr(i,o){return ps===null&&ms(i),Hp(i,o)}function Hp(i,o){var r=o._currentValue;if(o={context:o,memoizedValue:r,next:null},si===null){if(i===null)throw Error(s(308));si=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else si=si.next=o;return r}var wS=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){o.aborted=!0,i.forEach(function(r){return r()})}},RS=t.unstable_scheduleCallback,IS=t.unstable_NormalPriority,St={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hc(){return{controller:new wS,data:new Map,refCount:0}}function ll(i){i.refCount--,i.refCount===0&&RS(IS,function(){i.controller.abort()})}var rl=null,pc=0,eo=0,to=null;function MS(i,o){if(rl===null){var r=rl=[];pc=0,eo=yd(),to={status:"pending",value:void 0,then:function(u){r.push(u)}}}return pc++,o.then(Gp,Gp),o}function Gp(){if(--pc===0&&rl!==null){to!==null&&(to.status="fulfilled");var i=rl;rl=null,eo=0,to=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function DS(i,o){var r=[],u={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return i.then(function(){u.status="fulfilled",u.value=o;for(var m=0;m<r.length;m++)(0,r[m])(o)},function(m){for(u.status="rejected",u.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),u}var qp=U.S;U.S=function(i,o){Tg=Ft(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&MS(i,o),qp!==null&&qp(i,o)};var gs=b(null);function mc(){var i=gs.current;return i!==null?i:it.pooledCache}function Ur(i,o){o===null?z(gs,gs.current):z(gs,o.pool)}function Vp(){var i=mc();return i===null?null:{parent:St._currentValue,pool:i}}var no=Error(s(460)),gc=Error(s(474)),Pr=Error(s(542)),Lr={then:function(){}};function Fp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zp(i,o,r){switch(r=i[r],r===void 0?i.push(o):r!==o&&(o.then(ei,ei),o=r),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,jp(i),i;default:if(typeof o.status=="string")o.then(ei,ei);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(u){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=u}},function(u){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,jp(i),i}throw vs=o,no}}function ys(i){try{var o=i._init;return o(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(vs=r,no):r}}var vs=null;function Yp(){if(vs===null)throw Error(s(459));var i=vs;return vs=null,i}function jp(i){if(i===no||i===Pr)throw Error(s(483))}var io=null,al=0;function Or(i){var o=al;return al+=1,io===null&&(io=[]),zp(io,i,o)}function ul(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Br(i,o){throw o.$$typeof===E?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Jp(i){function o(k,R){if(i){var P=k.deletions;P===null?(k.deletions=[R],k.flags|=16):P.push(R)}}function r(k,R){if(!i)return null;for(;R!==null;)o(k,R),R=R.sibling;return null}function u(k){for(var R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function m(k,R){return k=ni(k,R),k.index=0,k.sibling=null,k}function v(k,R,P){return k.index=P,i?(P=k.alternate,P!==null?(P=P.index,P<R?(k.flags|=67108866,R):P):(k.flags|=67108866,R)):(k.flags|=1048576,R)}function S(k){return i&&k.alternate===null&&(k.flags|=67108866),k}function C(k,R,P,Y){return R===null||R.tag!==6?(R=sc(P,k.mode,Y),R.return=k,R):(R=m(R,P),R.return=k,R)}function A(k,R,P,Y){var _e=P.type;return _e===M?V(k,R,P.props.children,Y,P.key):R!==null&&(R.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===ve&&ys(_e)===R.type)?(R=m(R,P.props),ul(R,P),R.return=k,R):(R=Ir(P.type,P.key,P.props,null,k.mode,Y),ul(R,P),R.return=k,R)}function L(k,R,P,Y){return R===null||R.tag!==4||R.stateNode.containerInfo!==P.containerInfo||R.stateNode.implementation!==P.implementation?(R=oc(P,k.mode,Y),R.return=k,R):(R=m(R,P.children||[]),R.return=k,R)}function V(k,R,P,Y,_e){return R===null||R.tag!==7?(R=fs(P,k.mode,Y,_e),R.return=k,R):(R=m(R,P),R.return=k,R)}function $(k,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=sc(""+R,k.mode,P),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return P=Ir(R.type,R.key,R.props,null,k.mode,P),ul(P,R),P.return=k,P;case N:return R=oc(R,k.mode,P),R.return=k,R;case ve:return R=ys(R),$(k,R,P)}if(Ge(R)||Se(R))return R=fs(R,k.mode,P,null),R.return=k,R;if(typeof R.then=="function")return $(k,Or(R),P);if(R.$$typeof===q)return $(k,kr(k,R),P);Br(k,R)}return null}function O(k,R,P,Y){var _e=R!==null?R.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return _e!==null?null:C(k,R,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case T:return P.key===_e?A(k,R,P,Y):null;case N:return P.key===_e?L(k,R,P,Y):null;case ve:return P=ys(P),O(k,R,P,Y)}if(Ge(P)||Se(P))return _e!==null?null:V(k,R,P,Y,null);if(typeof P.then=="function")return O(k,R,Or(P),Y);if(P.$$typeof===q)return O(k,R,kr(k,P),Y);Br(k,P)}return null}function G(k,R,P,Y,_e){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(P)||null,C(R,k,""+Y,_e);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return k=k.get(Y.key===null?P:Y.key)||null,A(R,k,Y,_e);case N:return k=k.get(Y.key===null?P:Y.key)||null,L(R,k,Y,_e);case ve:return Y=ys(Y),G(k,R,P,Y,_e)}if(Ge(Y)||Se(Y))return k=k.get(P)||null,V(R,k,Y,_e,null);if(typeof Y.then=="function")return G(k,R,P,Or(Y),_e);if(Y.$$typeof===q)return G(k,R,P,kr(R,Y),_e);Br(R,Y)}return null}function he(k,R,P,Y){for(var _e=null,ze=null,me=R,Me=R=0,He=null;me!==null&&Me<P.length;Me++){me.index>Me?(He=me,me=null):He=me.sibling;var Ye=O(k,me,P[Me],Y);if(Ye===null){me===null&&(me=He);break}i&&me&&Ye.alternate===null&&o(k,me),R=v(Ye,R,Me),ze===null?_e=Ye:ze.sibling=Ye,ze=Ye,me=He}if(Me===P.length)return r(k,me),qe&&ii(k,Me),_e;if(me===null){for(;Me<P.length;Me++)me=$(k,P[Me],Y),me!==null&&(R=v(me,R,Me),ze===null?_e=me:ze.sibling=me,ze=me);return qe&&ii(k,Me),_e}for(me=u(me);Me<P.length;Me++)He=G(me,k,Me,P[Me],Y),He!==null&&(i&&He.alternate!==null&&me.delete(He.key===null?Me:He.key),R=v(He,R,Me),ze===null?_e=He:ze.sibling=He,ze=He);return i&&me.forEach(function(Qi){return o(k,Qi)}),qe&&ii(k,Me),_e}function xe(k,R,P,Y){if(P==null)throw Error(s(151));for(var _e=null,ze=null,me=R,Me=R=0,He=null,Ye=P.next();me!==null&&!Ye.done;Me++,Ye=P.next()){me.index>Me?(He=me,me=null):He=me.sibling;var Qi=O(k,me,Ye.value,Y);if(Qi===null){me===null&&(me=He);break}i&&me&&Qi.alternate===null&&o(k,me),R=v(Qi,R,Me),ze===null?_e=Qi:ze.sibling=Qi,ze=Qi,me=He}if(Ye.done)return r(k,me),qe&&ii(k,Me),_e;if(me===null){for(;!Ye.done;Me++,Ye=P.next())Ye=$(k,Ye.value,Y),Ye!==null&&(R=v(Ye,R,Me),ze===null?_e=Ye:ze.sibling=Ye,ze=Ye);return qe&&ii(k,Me),_e}for(me=u(me);!Ye.done;Me++,Ye=P.next())Ye=G(me,k,Me,Ye.value,Y),Ye!==null&&(i&&Ye.alternate!==null&&me.delete(Ye.key===null?Me:Ye.key),R=v(Ye,R,Me),ze===null?_e=Ye:ze.sibling=Ye,ze=Ye);return i&&me.forEach(function(FC){return o(k,FC)}),qe&&ii(k,Me),_e}function tt(k,R,P,Y){if(typeof P=="object"&&P!==null&&P.type===M&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case T:e:{for(var _e=P.key;R!==null;){if(R.key===_e){if(_e=P.type,_e===M){if(R.tag===7){r(k,R.sibling),Y=m(R,P.props.children),Y.return=k,k=Y;break e}}else if(R.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===ve&&ys(_e)===R.type){r(k,R.sibling),Y=m(R,P.props),ul(Y,P),Y.return=k,k=Y;break e}r(k,R);break}else o(k,R);R=R.sibling}P.type===M?(Y=fs(P.props.children,k.mode,Y,P.key),Y.return=k,k=Y):(Y=Ir(P.type,P.key,P.props,null,k.mode,Y),ul(Y,P),Y.return=k,k=Y)}return S(k);case N:e:{for(_e=P.key;R!==null;){if(R.key===_e)if(R.tag===4&&R.stateNode.containerInfo===P.containerInfo&&R.stateNode.implementation===P.implementation){r(k,R.sibling),Y=m(R,P.children||[]),Y.return=k,k=Y;break e}else{r(k,R);break}else o(k,R);R=R.sibling}Y=oc(P,k.mode,Y),Y.return=k,k=Y}return S(k);case ve:return P=ys(P),tt(k,R,P,Y)}if(Ge(P))return he(k,R,P,Y);if(Se(P)){if(_e=Se(P),typeof _e!="function")throw Error(s(150));return P=_e.call(P),xe(k,R,P,Y)}if(typeof P.then=="function")return tt(k,R,Or(P),Y);if(P.$$typeof===q)return tt(k,R,kr(k,P),Y);Br(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,R!==null&&R.tag===6?(r(k,R.sibling),Y=m(R,P),Y.return=k,k=Y):(r(k,R),Y=sc(P,k.mode,Y),Y.return=k,k=Y),S(k)):r(k,R)}return function(k,R,P,Y){try{al=0;var _e=tt(k,R,P,Y);return io=null,_e}catch(me){if(me===no||me===Pr)throw me;var ze=fn(29,me,null,k.mode);return ze.lanes=Y,ze.return=k,ze}finally{}}}var _s=Jp(!0),$p=Jp(!1),ki=!1;function yc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vc(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ui(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pi(i,o,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Je&2)!==0){var m=u.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),u.pending=o,o=Rr(i),Mp(i,null,r),o}return wr(i,u,o,r),Rr(i)}function cl(i,o,r){if(o=o.updateQueue,o!==null&&(o=o.shared,(r&4194048)!==0)){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,Hh(i,r)}}function _c(i,o){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var m=null,v=null;if(r=r.firstBaseUpdate,r!==null){do{var S={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};v===null?m=v=S:v=v.next=S,r=r.next}while(r!==null);v===null?m=v=o:v=v.next=o}else m=v=o;r={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=o:i.next=o,r.lastBaseUpdate=o}var xc=!1;function dl(){if(xc){var i=to;if(i!==null)throw i}}function fl(i,o,r,u){xc=!1;var m=i.updateQueue;ki=!1;var v=m.firstBaseUpdate,S=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var A=C,L=A.next;A.next=null,S===null?v=L:S.next=L,S=A;var V=i.alternate;V!==null&&(V=V.updateQueue,C=V.lastBaseUpdate,C!==S&&(C===null?V.firstBaseUpdate=L:C.next=L,V.lastBaseUpdate=A))}if(v!==null){var $=m.baseState;S=0,V=L=A=null,C=v;do{var O=C.lane&-536870913,G=O!==C.lane;if(G?(Be&O)===O:(u&O)===O){O!==0&&O===eo&&(xc=!0),V!==null&&(V=V.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var he=i,xe=C;O=o;var tt=r;switch(xe.tag){case 1:if(he=xe.payload,typeof he=="function"){$=he.call(tt,$,O);break e}$=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=xe.payload,O=typeof he=="function"?he.call(tt,$,O):he,O==null)break e;$=x({},$,O);break e;case 2:ki=!0}}O=C.callback,O!==null&&(i.flags|=64,G&&(i.flags|=8192),G=m.callbacks,G===null?m.callbacks=[O]:G.push(O))}else G={lane:O,tag:C.tag,payload:C.payload,callback:C.callback,next:null},V===null?(L=V=G,A=$):V=V.next=G,S|=O;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;G=C,C=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);V===null&&(A=$),m.baseState=A,m.firstBaseUpdate=L,m.lastBaseUpdate=V,v===null&&(m.shared.lanes=0),Gi|=S,i.lanes=S,i.memoizedState=$}}function Kp(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Qp(i,o){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)Kp(r[i],o)}var so=b(null),Hr=b(0);function Xp(i,o){i=pi,z(Hr,i),z(so,o),pi=i|o.baseLanes}function Ec(){z(Hr,pi),z(so,so.current)}function Sc(){pi=Hr.current,D(so),D(Hr)}var hn=b(null),An=null;function Li(i){var o=i.alternate;z(_t,_t.current&1),z(hn,i),An===null&&(o===null||so.current!==null||o.memoizedState!==null)&&(An=i)}function Cc(i){z(_t,_t.current),z(hn,i),An===null&&(An=i)}function Wp(i){i.tag===22?(z(_t,_t.current),z(hn,i),An===null&&(An=i)):Oi()}function Oi(){z(_t,_t.current),z(hn,hn.current)}function pn(i){D(hn),An===i&&(An=null),D(_t)}var _t=b(0);function Gr(i){for(var o=i;o!==null;){if(o.tag===13){var r=o.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Rd(r)||Id(r)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var li=0,we=null,Ze=null,Ct=null,qr=!1,oo=!1,xs=!1,Vr=0,hl=0,lo=null,kS=0;function ht(){throw Error(s(321))}function Tc(i,o){if(o===null)return!1;for(var r=0;r<o.length&&r<i.length;r++)if(!dn(i[r],o[r]))return!1;return!0}function bc(i,o,r,u,m,v){return li=v,we=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=i===null||i.memoizedState===null?Pm:Gc,xs=!1,v=r(u,m),xs=!1,oo&&(v=em(o,r,u,m)),Zp(i),v}function Zp(i){U.H=gl;var o=Ze!==null&&Ze.next!==null;if(li=0,Ct=Ze=we=null,qr=!1,hl=0,lo=null,o)throw Error(s(300));i===null||Tt||(i=i.dependencies,i!==null&&Dr(i)&&(Tt=!0))}function em(i,o,r,u){we=i;var m=0;do{if(oo&&(lo=null),hl=0,oo=!1,25<=m)throw Error(s(301));if(m+=1,Ct=Ze=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}U.H=Lm,v=o(r,u)}while(oo);return v}function US(){var i=U.H,o=i.useState()[0];return o=typeof o.then=="function"?pl(o):o,i=i.useState()[0],(Ze!==null?Ze.memoizedState:null)!==i&&(we.flags|=1024),o}function Nc(){var i=Vr!==0;return Vr=0,i}function Ac(i,o,r){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~r}function wc(i){if(qr){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}qr=!1}li=0,Ct=Ze=we=null,oo=!1,hl=Vr=0,lo=null}function Jt(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?we.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function xt(){if(Ze===null){var i=we.alternate;i=i!==null?i.memoizedState:null}else i=Ze.next;var o=Ct===null?we.memoizedState:Ct.next;if(o!==null)Ct=o,Ze=i;else{if(i===null)throw we.alternate===null?Error(s(467)):Error(s(310));Ze=i,i={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Ct===null?we.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pl(i){var o=hl;return hl+=1,lo===null&&(lo=[]),i=zp(lo,i,o),o=we,(Ct===null?o.memoizedState:Ct.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?Pm:Gc),i}function zr(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return pl(i);if(i.$$typeof===q)return Ot(i)}throw Error(s(438,String(i)))}function Rc(i){var o=null,r=we.updateQueue;if(r!==null&&(o=r.memoCache),o==null){var u=we.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),r===null&&(r=Fr(),we.updateQueue=r),r.memoCache=o,r=o.data[o.index],r===void 0)for(r=o.data[o.index]=Array(i),u=0;u<i;u++)r[u]=de;return o.index++,r}function ri(i,o){return typeof o=="function"?o(i):o}function Yr(i){var o=xt();return Ic(o,Ze,i)}function Ic(i,o,r){var u=i.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var m=i.baseQueue,v=u.pending;if(v!==null){if(m!==null){var S=m.next;m.next=v.next,v.next=S}o.baseQueue=m=v,u.pending=null}if(v=i.baseState,m===null)i.memoizedState=v;else{o=m.next;var C=S=null,A=null,L=o,V=!1;do{var $=L.lane&-536870913;if($!==L.lane?(Be&$)===$:(li&$)===$){var O=L.revertLane;if(O===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),$===eo&&(V=!0);else if((li&O)===O){L=L.next,O===eo&&(V=!0);continue}else $={lane:0,revertLane:L.revertLane,gesture:null,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},A===null?(C=A=$,S=v):A=A.next=$,we.lanes|=O,Gi|=O;$=L.action,xs&&r(v,$),v=L.hasEagerState?L.eagerState:r(v,$)}else O={lane:$,revertLane:L.revertLane,gesture:L.gesture,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},A===null?(C=A=O,S=v):A=A.next=O,we.lanes|=$,Gi|=$;L=L.next}while(L!==null&&L!==o);if(A===null?S=v:A.next=C,!dn(v,i.memoizedState)&&(Tt=!0,V&&(r=to,r!==null)))throw r;i.memoizedState=v,i.baseState=S,i.baseQueue=A,u.lastRenderedState=v}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function Mc(i){var o=xt(),r=o.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var u=r.dispatch,m=r.pending,v=o.memoizedState;if(m!==null){r.pending=null;var S=m=m.next;do v=i(v,S.action),S=S.next;while(S!==m);dn(v,o.memoizedState)||(Tt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),r.lastRenderedState=v}return[v,u]}function tm(i,o,r){var u=we,m=xt(),v=qe;if(v){if(r===void 0)throw Error(s(407));r=r()}else r=o();var S=!dn((Ze||m).memoizedState,r);if(S&&(m.memoizedState=r,Tt=!0),m=m.queue,Uc(sm.bind(null,u,m,i),[i]),m.getSnapshot!==o||S||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,ro(9,{destroy:void 0},im.bind(null,u,m,r,o),null),it===null)throw Error(s(349));v||(li&127)!==0||nm(u,o,r)}return r}function nm(i,o,r){i.flags|=16384,i={getSnapshot:o,value:r},o=we.updateQueue,o===null?(o=Fr(),we.updateQueue=o,o.stores=[i]):(r=o.stores,r===null?o.stores=[i]:r.push(i))}function im(i,o,r,u){o.value=r,o.getSnapshot=u,om(o)&&lm(i)}function sm(i,o,r){return r(function(){om(o)&&lm(i)})}function om(i){var o=i.getSnapshot;i=i.value;try{var r=o();return!dn(i,r)}catch{return!0}}function lm(i){var o=ds(i,2);o!==null&&rn(o,i,2)}function Dc(i){var o=Jt();if(typeof i=="function"){var r=i;if(i=r(),xs){ut(!0);try{r()}finally{ut(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:i},o}function rm(i,o,r,u){return i.baseState=r,Ic(i,Ze,typeof u=="function"?u:ri)}function PS(i,o,r,u,m){if($r(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};U.T!==null?r(!0):v.isTransition=!1,u(v),r=o.pending,r===null?(v.next=o.pending=v,am(o,v)):(v.next=r.next,o.pending=r.next=v)}}function am(i,o){var r=o.action,u=o.payload,m=i.state;if(o.isTransition){var v=U.T,S={};U.T=S;try{var C=r(m,u),A=U.S;A!==null&&A(S,C),um(i,o,C)}catch(L){kc(i,o,L)}finally{v!==null&&S.types!==null&&(v.types=S.types),U.T=v}}else try{v=r(m,u),um(i,o,v)}catch(L){kc(i,o,L)}}function um(i,o,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){cm(i,o,u)},function(u){return kc(i,o,u)}):cm(i,o,r)}function cm(i,o,r){o.status="fulfilled",o.value=r,dm(o),i.state=r,o=i.pending,o!==null&&(r=o.next,r===o?i.pending=null:(r=r.next,o.next=r,am(i,r)))}function kc(i,o,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=r,dm(o),o=o.next;while(o!==u)}i.action=null}function dm(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function fm(i,o){return o}function hm(i,o){if(qe){var r=it.formState;if(r!==null){e:{var u=we;if(qe){if(rt){t:{for(var m=rt,v=Nn;m.nodeType!==8;){if(!v){m=null;break t}if(m=wn(m.nextSibling),m===null){m=null;break t}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){rt=wn(m.nextSibling),u=m.data==="F!";break e}}Mi(u)}u=!1}u&&(o=r[0])}}return r=Jt(),r.memoizedState=r.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fm,lastRenderedState:o},r.queue=u,r=Dm.bind(null,we,u),u.dispatch=r,u=Dc(!1),v=Hc.bind(null,we,!1,u.queue),u=Jt(),m={state:o,dispatch:null,action:i,pending:null},u.queue=m,r=PS.bind(null,we,m,v,r),m.dispatch=r,u.memoizedState=i,[o,r,!1]}function pm(i){var o=xt();return mm(o,Ze,i)}function mm(i,o,r){if(o=Ic(i,o,fm)[0],i=Yr(ri)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=pl(o)}catch(S){throw S===no?Pr:S}else u=o;o=xt();var m=o.queue,v=m.dispatch;return r!==o.memoizedState&&(we.flags|=2048,ro(9,{destroy:void 0},LS.bind(null,m,r),null)),[u,v,i]}function LS(i,o){i.action=o}function gm(i){var o=xt(),r=Ze;if(r!==null)return mm(o,r,i);xt(),o=o.memoizedState,r=xt();var u=r.queue.dispatch;return r.memoizedState=i,[o,u,!1]}function ro(i,o,r,u){return i={tag:i,create:r,deps:u,inst:o,next:null},o=we.updateQueue,o===null&&(o=Fr(),we.updateQueue=o),r=o.lastEffect,r===null?o.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,o.lastEffect=i),i}function ym(){return xt().memoizedState}function jr(i,o,r,u){var m=Jt();we.flags|=i,m.memoizedState=ro(1|o,{destroy:void 0},r,u===void 0?null:u)}function Jr(i,o,r,u){var m=xt();u=u===void 0?null:u;var v=m.memoizedState.inst;Ze!==null&&u!==null&&Tc(u,Ze.memoizedState.deps)?m.memoizedState=ro(o,v,r,u):(we.flags|=i,m.memoizedState=ro(1|o,v,r,u))}function vm(i,o){jr(8390656,8,i,o)}function Uc(i,o){Jr(2048,8,i,o)}function OS(i){we.flags|=4;var o=we.updateQueue;if(o===null)o=Fr(),we.updateQueue=o,o.events=[i];else{var r=o.events;r===null?o.events=[i]:r.push(i)}}function _m(i){var o=xt().memoizedState;return OS({ref:o,nextImpl:i}),function(){if((Je&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function xm(i,o){return Jr(4,2,i,o)}function Em(i,o){return Jr(4,4,i,o)}function Sm(i,o){if(typeof o=="function"){i=i();var r=o(i);return function(){typeof r=="function"?r():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Cm(i,o,r){r=r!=null?r.concat([i]):null,Jr(4,4,Sm.bind(null,o,i),r)}function Pc(){}function Tm(i,o){var r=xt();o=o===void 0?null:o;var u=r.memoizedState;return o!==null&&Tc(o,u[1])?u[0]:(r.memoizedState=[i,o],i)}function bm(i,o){var r=xt();o=o===void 0?null:o;var u=r.memoizedState;if(o!==null&&Tc(o,u[1]))return u[0];if(u=i(),xs){ut(!0);try{i()}finally{ut(!1)}}return r.memoizedState=[u,o],u}function Lc(i,o,r){return r===void 0||(li&1073741824)!==0&&(Be&261930)===0?i.memoizedState=o:(i.memoizedState=r,i=Ng(),we.lanes|=i,Gi|=i,r)}function Nm(i,o,r,u){return dn(r,o)?r:so.current!==null?(i=Lc(i,r,u),dn(i,o)||(Tt=!0),i):(li&42)===0||(li&1073741824)!==0&&(Be&261930)===0?(Tt=!0,i.memoizedState=r):(i=Ng(),we.lanes|=i,Gi|=i,o)}function Am(i,o,r,u,m){var v=K.p;K.p=v!==0&&8>v?v:8;var S=U.T,C={};U.T=C,Hc(i,!1,o,r);try{var A=m(),L=U.S;if(L!==null&&L(C,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var V=DS(A,u);ml(i,o,V,yn(i))}else ml(i,o,u,yn(i))}catch($){ml(i,o,{then:function(){},status:"rejected",reason:$},yn())}finally{K.p=v,S!==null&&C.types!==null&&(S.types=C.types),U.T=S}}function BS(){}function Oc(i,o,r,u){if(i.tag!==5)throw Error(s(476));var m=wm(i).queue;Am(i,m,o,le,r===null?BS:function(){return Rm(i),r(u)})}function wm(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:le},next:null};var r={};return o.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:r},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Rm(i){var o=wm(i);o.next===null&&(o=i.alternate.memoizedState),ml(i,o.next.queue,{},yn())}function Bc(){return Ot(Dl)}function Im(){return xt().memoizedState}function Mm(){return xt().memoizedState}function HS(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var r=yn();i=Ui(r);var u=Pi(o,i,r);u!==null&&(rn(u,o,r),cl(u,o,r)),o={cache:hc()},i.payload=o;return}o=o.return}}function GS(i,o,r){var u=yn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},$r(i)?km(o,r):(r=nc(i,o,r,u),r!==null&&(rn(r,i,u),Um(r,o,u)))}function Dm(i,o,r){var u=yn();ml(i,o,r,u)}function ml(i,o,r,u){var m={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if($r(i))km(o,m);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var S=o.lastRenderedState,C=v(S,r);if(m.hasEagerState=!0,m.eagerState=C,dn(C,S))return wr(i,o,m,0),it===null&&Ar(),!1}catch{}finally{}if(r=nc(i,o,m,u),r!==null)return rn(r,i,u),Um(r,o,u),!0}return!1}function Hc(i,o,r,u){if(u={lane:2,revertLane:yd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},$r(i)){if(o)throw Error(s(479))}else o=nc(i,r,u,2),o!==null&&rn(o,i,2)}function $r(i){var o=i.alternate;return i===we||o!==null&&o===we}function km(i,o){oo=qr=!0;var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}function Um(i,o,r){if((r&4194048)!==0){var u=o.lanes;u&=i.pendingLanes,r|=u,o.lanes=r,Hh(i,r)}}var gl={readContext:Ot,use:zr,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};gl.useEffectEvent=ht;var Pm={readContext:Ot,use:zr,useCallback:function(i,o){return Jt().memoizedState=[i,o===void 0?null:o],i},useContext:Ot,useEffect:vm,useImperativeHandle:function(i,o,r){r=r!=null?r.concat([i]):null,jr(4194308,4,Sm.bind(null,o,i),r)},useLayoutEffect:function(i,o){return jr(4194308,4,i,o)},useInsertionEffect:function(i,o){jr(4,2,i,o)},useMemo:function(i,o){var r=Jt();o=o===void 0?null:o;var u=i();if(xs){ut(!0);try{i()}finally{ut(!1)}}return r.memoizedState=[u,o],u},useReducer:function(i,o,r){var u=Jt();if(r!==void 0){var m=r(o);if(xs){ut(!0);try{r(o)}finally{ut(!1)}}}else m=o;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=GS.bind(null,we,i),[u.memoizedState,i]},useRef:function(i){var o=Jt();return i={current:i},o.memoizedState=i},useState:function(i){i=Dc(i);var o=i.queue,r=Dm.bind(null,we,o);return o.dispatch=r,[i.memoizedState,r]},useDebugValue:Pc,useDeferredValue:function(i,o){var r=Jt();return Lc(r,i,o)},useTransition:function(){var i=Dc(!1);return i=Am.bind(null,we,i.queue,!0,!1),Jt().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,r){var u=we,m=Jt();if(qe){if(r===void 0)throw Error(s(407));r=r()}else{if(r=o(),it===null)throw Error(s(349));(Be&127)!==0||nm(u,o,r)}m.memoizedState=r;var v={value:r,getSnapshot:o};return m.queue=v,vm(sm.bind(null,u,v,i),[i]),u.flags|=2048,ro(9,{destroy:void 0},im.bind(null,u,v,r,o),null),r},useId:function(){var i=Jt(),o=it.identifierPrefix;if(qe){var r=jn,u=Yn;r=(u&~(1<<32-ft(u)-1)).toString(32)+r,o="_"+o+"R_"+r,r=Vr++,0<r&&(o+="H"+r.toString(32)),o+="_"}else r=kS++,o="_"+o+"r_"+r.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Bc,useFormState:hm,useActionState:hm,useOptimistic:function(i){var o=Jt();o.memoizedState=o.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=r,o=Hc.bind(null,we,!0,r),r.dispatch=o,[i,o]},useMemoCache:Rc,useCacheRefresh:function(){return Jt().memoizedState=HS.bind(null,we)},useEffectEvent:function(i){var o=Jt(),r={impl:i};return o.memoizedState=r,function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Gc={readContext:Ot,use:zr,useCallback:Tm,useContext:Ot,useEffect:Uc,useImperativeHandle:Cm,useInsertionEffect:xm,useLayoutEffect:Em,useMemo:bm,useReducer:Yr,useRef:ym,useState:function(){return Yr(ri)},useDebugValue:Pc,useDeferredValue:function(i,o){var r=xt();return Nm(r,Ze.memoizedState,i,o)},useTransition:function(){var i=Yr(ri)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:pl(i),o]},useSyncExternalStore:tm,useId:Im,useHostTransitionStatus:Bc,useFormState:pm,useActionState:pm,useOptimistic:function(i,o){var r=xt();return rm(r,Ze,i,o)},useMemoCache:Rc,useCacheRefresh:Mm};Gc.useEffectEvent=_m;var Lm={readContext:Ot,use:zr,useCallback:Tm,useContext:Ot,useEffect:Uc,useImperativeHandle:Cm,useInsertionEffect:xm,useLayoutEffect:Em,useMemo:bm,useReducer:Mc,useRef:ym,useState:function(){return Mc(ri)},useDebugValue:Pc,useDeferredValue:function(i,o){var r=xt();return Ze===null?Lc(r,i,o):Nm(r,Ze.memoizedState,i,o)},useTransition:function(){var i=Mc(ri)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:pl(i),o]},useSyncExternalStore:tm,useId:Im,useHostTransitionStatus:Bc,useFormState:gm,useActionState:gm,useOptimistic:function(i,o){var r=xt();return Ze!==null?rm(r,Ze,i,o):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:Rc,useCacheRefresh:Mm};Lm.useEffectEvent=_m;function qc(i,o,r,u){o=i.memoizedState,r=r(u,o),r=r==null?o:x({},o,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var Vc={enqueueSetState:function(i,o,r){i=i._reactInternals;var u=yn(),m=Ui(u);m.payload=o,r!=null&&(m.callback=r),o=Pi(i,m,u),o!==null&&(rn(o,i,u),cl(o,i,u))},enqueueReplaceState:function(i,o,r){i=i._reactInternals;var u=yn(),m=Ui(u);m.tag=1,m.payload=o,r!=null&&(m.callback=r),o=Pi(i,m,u),o!==null&&(rn(o,i,u),cl(o,i,u))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var r=yn(),u=Ui(r);u.tag=2,o!=null&&(u.callback=o),o=Pi(i,u,r),o!==null&&(rn(o,i,r),cl(o,i,r))}};function Om(i,o,r,u,m,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,v,S):o.prototype&&o.prototype.isPureReactComponent?!nl(r,u)||!nl(m,v):!0}function Bm(i,o,r,u){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(r,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(r,u),o.state!==i&&Vc.enqueueReplaceState(o,o.state,null)}function Es(i,o){var r=o;if("ref"in o){r={};for(var u in o)u!=="ref"&&(r[u]=o[u])}if(i=i.defaultProps){r===o&&(r=x({},r));for(var m in i)r[m]===void 0&&(r[m]=i[m])}return r}function Hm(i){Nr(i)}function Gm(i){console.error(i)}function qm(i){Nr(i)}function Kr(i,o){try{var r=i.onUncaughtError;r(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Vm(i,o,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Fc(i,o,r){return r=Ui(r),r.tag=3,r.payload={element:null},r.callback=function(){Kr(i,o)},r}function Fm(i){return i=Ui(i),i.tag=3,i}function zm(i,o,r,u){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var v=u.value;i.payload=function(){return m(v)},i.callback=function(){Vm(o,r,u)}}var S=r.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Vm(o,r,u),typeof m!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function qS(i,o,r,u,m){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=r.alternate,o!==null&&Zs(o,r,m,!0),r=hn.current,r!==null){switch(r.tag){case 31:case 13:return An===null?ra():r.alternate===null&&pt===0&&(pt=3),r.flags&=-257,r.flags|=65536,r.lanes=m,u===Lr?r.flags|=16384:(o=r.updateQueue,o===null?r.updateQueue=new Set([u]):o.add(u),pd(i,u,m)),!1;case 22:return r.flags|=65536,u===Lr?r.flags|=16384:(o=r.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=o):(r=o.retryQueue,r===null?o.retryQueue=new Set([u]):r.add(u)),pd(i,u,m)),!1}throw Error(s(435,r.tag))}return pd(i,u,m),ra(),!1}if(qe)return o=hn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,u!==ac&&(i=Error(s(422),{cause:u}),ol(Cn(i,r)))):(u!==ac&&(o=Error(s(423),{cause:u}),ol(Cn(o,r))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Cn(u,r),m=Fc(i.stateNode,u,m),_c(i,m),pt!==4&&(pt=2)),!1;var v=Error(s(520),{cause:u});if(v=Cn(v,r),Tl===null?Tl=[v]:Tl.push(v),pt!==4&&(pt=2),o===null)return!0;u=Cn(u,r),r=o;do{switch(r.tag){case 3:return r.flags|=65536,i=m&-m,r.lanes|=i,i=Fc(r.stateNode,u,i),_c(r,i),!1;case 1:if(o=r.type,v=r.stateNode,(r.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qi===null||!qi.has(v))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Fm(m),zm(m,i,r,u),_c(r,m),!1}r=r.return}while(r!==null);return!1}var zc=Error(s(461)),Tt=!1;function Bt(i,o,r,u){o.child=i===null?$p(o,null,r,u):_s(o,i.child,r,u)}function Ym(i,o,r,u,m){r=r.render;var v=o.ref;if("ref"in u){var S={};for(var C in u)C!=="ref"&&(S[C]=u[C])}else S=u;return ms(o),u=bc(i,o,r,S,v,m),C=Nc(),i!==null&&!Tt?(Ac(i,o,m),ai(i,o,m)):(qe&&C&&lc(o),o.flags|=1,Bt(i,o,u,m),o.child)}function jm(i,o,r,u,m){if(i===null){var v=r.type;return typeof v=="function"&&!ic(v)&&v.defaultProps===void 0&&r.compare===null?(o.tag=15,o.type=v,Jm(i,o,v,u,m)):(i=Ir(r.type,null,u,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!Wc(i,m)){var S=v.memoizedProps;if(r=r.compare,r=r!==null?r:nl,r(S,u)&&i.ref===o.ref)return ai(i,o,m)}return o.flags|=1,i=ni(v,u),i.ref=o.ref,i.return=o,o.child=i}function Jm(i,o,r,u,m){if(i!==null){var v=i.memoizedProps;if(nl(v,u)&&i.ref===o.ref)if(Tt=!1,o.pendingProps=u=v,Wc(i,m))(i.flags&131072)!==0&&(Tt=!0);else return o.lanes=i.lanes,ai(i,o,m)}return Yc(i,o,r,u,m)}function $m(i,o,r,u){var m=u.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|r:r,i!==null){for(u=o.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~v}else u=0,o.child=null;return Km(i,o,v,r,u)}if((r&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ur(o,v!==null?v.cachePool:null),v!==null?Xp(o,v):Ec(),Wp(o);else return u=o.lanes=536870912,Km(i,o,v!==null?v.baseLanes|r:r,r,u)}else v!==null?(Ur(o,v.cachePool),Xp(o,v),Oi(),o.memoizedState=null):(i!==null&&Ur(o,null),Ec(),Oi());return Bt(i,o,m,r),o.child}function yl(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Km(i,o,r,u,m){var v=mc();return v=v===null?null:{parent:St._currentValue,pool:v},o.memoizedState={baseLanes:r,cachePool:v},i!==null&&Ur(o,null),Ec(),Wp(o),i!==null&&Zs(i,o,u,!0),o.childLanes=m,null}function Qr(i,o){return o=Wr({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Qm(i,o,r){return _s(o,i.child,null,r),i=Qr(o,o.pendingProps),i.flags|=2,pn(o),o.memoizedState=null,i}function VS(i,o,r){var u=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(qe){if(u.mode==="hidden")return i=Qr(o,u),o.lanes=536870912,yl(null,i);if(Cc(o),(i=rt)?(i=ay(i,Nn),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ri!==null?{id:Yn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},r=kp(i),r.return=o,o.child=r,Lt=o,rt=null)):i=null,i===null)throw Mi(o);return o.lanes=536870912,null}return Qr(o,u)}var v=i.memoizedState;if(v!==null){var S=v.dehydrated;if(Cc(o),m)if(o.flags&256)o.flags&=-257,o=Qm(i,o,r);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Tt||Zs(i,o,r,!1),m=(r&i.childLanes)!==0,Tt||m){if(u=it,u!==null&&(S=Gh(u,r),S!==0&&S!==v.retryLane))throw v.retryLane=S,ds(i,S),rn(u,i,S),zc;ra(),o=Qm(i,o,r)}else i=v.treeContext,rt=wn(S.nextSibling),Lt=o,qe=!0,Ii=null,Nn=!1,i!==null&&Lp(o,i),o=Qr(o,u),o.flags|=4096;return o}return i=ni(i.child,{mode:u.mode,children:u.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Xr(i,o){var r=o.ref;if(r===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(i===null||i.ref!==r)&&(o.flags|=4194816)}}function Yc(i,o,r,u,m){return ms(o),r=bc(i,o,r,u,void 0,m),u=Nc(),i!==null&&!Tt?(Ac(i,o,m),ai(i,o,m)):(qe&&u&&lc(o),o.flags|=1,Bt(i,o,r,m),o.child)}function Xm(i,o,r,u,m,v){return ms(o),o.updateQueue=null,r=em(o,u,r,m),Zp(i),u=Nc(),i!==null&&!Tt?(Ac(i,o,v),ai(i,o,v)):(qe&&u&&lc(o),o.flags|=1,Bt(i,o,r,v),o.child)}function Wm(i,o,r,u,m){if(ms(o),o.stateNode===null){var v=Ks,S=r.contextType;typeof S=="object"&&S!==null&&(v=Ot(S)),v=new r(u,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Vc,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=u,v.state=o.memoizedState,v.refs={},yc(o),S=r.contextType,v.context=typeof S=="object"&&S!==null?Ot(S):Ks,v.state=o.memoizedState,S=r.getDerivedStateFromProps,typeof S=="function"&&(qc(o,r,S,u),v.state=o.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Vc.enqueueReplaceState(v,v.state,null),fl(o,u,v,m),dl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(i===null){v=o.stateNode;var C=o.memoizedProps,A=Es(r,C);v.props=A;var L=v.context,V=r.contextType;S=Ks,typeof V=="object"&&V!==null&&(S=Ot(V));var $=r.getDerivedStateFromProps;V=typeof $=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,V||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||L!==S)&&Bm(o,v,u,S),ki=!1;var O=o.memoizedState;v.state=O,fl(o,u,v,m),dl(),L=o.memoizedState,C||O!==L||ki?(typeof $=="function"&&(qc(o,r,$,u),L=o.memoizedState),(A=ki||Om(o,r,A,u,O,L,S))?(V||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=L),v.props=u,v.state=L,v.context=S,u=A):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{v=o.stateNode,vc(i,o),S=o.memoizedProps,V=Es(r,S),v.props=V,$=o.pendingProps,O=v.context,L=r.contextType,A=Ks,typeof L=="object"&&L!==null&&(A=Ot(L)),C=r.getDerivedStateFromProps,(L=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||O!==A)&&Bm(o,v,u,A),ki=!1,O=o.memoizedState,v.state=O,fl(o,u,v,m),dl();var G=o.memoizedState;S!==$||O!==G||ki||i!==null&&i.dependencies!==null&&Dr(i.dependencies)?(typeof C=="function"&&(qc(o,r,C,u),G=o.memoizedState),(V=ki||Om(o,r,V,u,O,G,A)||i!==null&&i.dependencies!==null&&Dr(i.dependencies))?(L||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(u,G,A),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(u,G,A)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=G),v.props=u,v.state=G,v.context=A,u=V):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&O===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&O===i.memoizedState||(o.flags|=1024),u=!1)}return v=u,Xr(i,o),u=(o.flags&128)!==0,v||u?(v=o.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&u?(o.child=_s(o,i.child,null,m),o.child=_s(o,null,r,m)):Bt(i,o,r,m),o.memoizedState=v.state,i=o.child):i=ai(i,o,m),i}function Zm(i,o,r,u){return hs(),o.flags|=256,Bt(i,o,r,u),o.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jc(i){return{baseLanes:i,cachePool:Vp()}}function $c(i,o,r){return i=i!==null?i.childLanes&~r:0,o&&(i|=gn),i}function eg(i,o,r){var u=o.pendingProps,m=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(_t.current&2)!==0),S&&(m=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,i===null){if(qe){if(m?Li(o):Oi(),(i=rt)?(i=ay(i,Nn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ri!==null?{id:Yn,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},r=kp(i),r.return=o,o.child=r,Lt=o,rt=null)):i=null,i===null)throw Mi(o);return Id(i)?o.lanes=32:o.lanes=536870912,null}var C=u.children;return u=u.fallback,m?(Oi(),m=o.mode,C=Wr({mode:"hidden",children:C},m),u=fs(u,m,r,null),C.return=o,u.return=o,C.sibling=u,o.child=C,u=o.child,u.memoizedState=Jc(r),u.childLanes=$c(i,S,r),o.memoizedState=jc,yl(null,u)):(Li(o),Kc(o,C))}var A=i.memoizedState;if(A!==null&&(C=A.dehydrated,C!==null)){if(v)o.flags&256?(Li(o),o.flags&=-257,o=Qc(i,o,r)):o.memoizedState!==null?(Oi(),o.child=i.child,o.flags|=128,o=null):(Oi(),C=u.fallback,m=o.mode,u=Wr({mode:"visible",children:u.children},m),C=fs(C,m,r,null),C.flags|=2,u.return=o,C.return=o,u.sibling=C,o.child=u,_s(o,i.child,null,r),u=o.child,u.memoizedState=Jc(r),u.childLanes=$c(i,S,r),o.memoizedState=jc,o=yl(null,u));else if(Li(o),Id(C)){if(S=C.nextSibling&&C.nextSibling.dataset,S)var L=S.dgst;S=L,u=Error(s(419)),u.stack="",u.digest=S,ol({value:u,source:null,stack:null}),o=Qc(i,o,r)}else if(Tt||Zs(i,o,r,!1),S=(r&i.childLanes)!==0,Tt||S){if(S=it,S!==null&&(u=Gh(S,r),u!==0&&u!==A.retryLane))throw A.retryLane=u,ds(i,u),rn(S,i,u),zc;Rd(C)||ra(),o=Qc(i,o,r)}else Rd(C)?(o.flags|=192,o.child=i.child,o=null):(i=A.treeContext,rt=wn(C.nextSibling),Lt=o,qe=!0,Ii=null,Nn=!1,i!==null&&Lp(o,i),o=Kc(o,u.children),o.flags|=4096);return o}return m?(Oi(),C=u.fallback,m=o.mode,A=i.child,L=A.sibling,u=ni(A,{mode:"hidden",children:u.children}),u.subtreeFlags=A.subtreeFlags&65011712,L!==null?C=ni(L,C):(C=fs(C,m,r,null),C.flags|=2),C.return=o,u.return=o,u.sibling=C,o.child=u,yl(null,u),u=o.child,C=i.child.memoizedState,C===null?C=Jc(r):(m=C.cachePool,m!==null?(A=St._currentValue,m=m.parent!==A?{parent:A,pool:A}:m):m=Vp(),C={baseLanes:C.baseLanes|r,cachePool:m}),u.memoizedState=C,u.childLanes=$c(i,S,r),o.memoizedState=jc,yl(i.child,u)):(Li(o),r=i.child,i=r.sibling,r=ni(r,{mode:"visible",children:u.children}),r.return=o,r.sibling=null,i!==null&&(S=o.deletions,S===null?(o.deletions=[i],o.flags|=16):S.push(i)),o.child=r,o.memoizedState=null,r)}function Kc(i,o){return o=Wr({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Wr(i,o){return i=fn(22,i,null,o),i.lanes=0,i}function Qc(i,o,r){return _s(o,i.child,null,r),i=Kc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function tg(i,o,r){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o),dc(i.return,o,r)}function Xc(i,o,r,u,m,v){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:m,treeForkCount:v}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=r,S.tailMode=m,S.treeForkCount=v)}function ng(i,o,r){var u=o.pendingProps,m=u.revealOrder,v=u.tail;u=u.children;var S=_t.current,C=(S&2)!==0;if(C?(S=S&1|2,o.flags|=128):S&=1,z(_t,S),Bt(i,o,u,r),u=qe?sl:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&tg(i,r,o);else if(i.tag===19)tg(i,r,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(r=o.child,m=null;r!==null;)i=r.alternate,i!==null&&Gr(i)===null&&(m=r),r=r.sibling;r=m,r===null?(m=o.child,o.child=null):(m=r.sibling,r.sibling=null),Xc(o,!1,m,r,v,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Gr(i)===null){o.child=m;break}i=m.sibling,m.sibling=r,r=m,m=i}Xc(o,!0,r,null,v,u);break;case"together":Xc(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function ai(i,o,r){if(i!==null&&(o.dependencies=i.dependencies),Gi|=o.lanes,(r&o.childLanes)===0)if(i!==null){if(Zs(i,o,r,!1),(r&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,r=ni(i,i.pendingProps),o.child=r,r.return=o;i.sibling!==null;)i=i.sibling,r=r.sibling=ni(i,i.pendingProps),r.return=o;r.sibling=null}return o.child}function Wc(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Dr(i)))}function FS(i,o,r){switch(o.tag){case 3:Ae(o,o.stateNode.containerInfo),Di(o,St,i.memoizedState.cache),hs();break;case 27:case 5:j(o);break;case 4:Ae(o,o.stateNode.containerInfo);break;case 10:Di(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Cc(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Li(o),o.flags|=128,null):(r&o.child.childLanes)!==0?eg(i,o,r):(Li(o),i=ai(i,o,r),i!==null?i.sibling:null);Li(o);break;case 19:var m=(i.flags&128)!==0;if(u=(r&o.childLanes)!==0,u||(Zs(i,o,r,!1),u=(r&o.childLanes)!==0),m){if(u)return ng(i,o,r);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),z(_t,_t.current),u)break;return null;case 22:return o.lanes=0,$m(i,o,r,o.pendingProps);case 24:Di(o,St,i.memoizedState.cache)}return ai(i,o,r)}function ig(i,o,r){if(i!==null)if(i.memoizedProps!==o.pendingProps)Tt=!0;else{if(!Wc(i,r)&&(o.flags&128)===0)return Tt=!1,FS(i,o,r);Tt=(i.flags&131072)!==0}else Tt=!1,qe&&(o.flags&1048576)!==0&&Pp(o,sl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(i=ys(o.elementType),o.type=i,typeof i=="function")ic(i)?(u=Es(i,u),o.tag=1,o=Wm(null,o,i,u,r)):(o.tag=0,o=Yc(null,o,i,u,r));else{if(i!=null){var m=i.$$typeof;if(m===J){o.tag=11,o=Ym(null,o,i,u,r);break e}else if(m===X){o.tag=14,o=jm(null,o,i,u,r);break e}}throw o=be(i)||i,Error(s(306,o,""))}}return o;case 0:return Yc(i,o,o.type,o.pendingProps,r);case 1:return u=o.type,m=Es(u,o.pendingProps),Wm(i,o,u,m,r);case 3:e:{if(Ae(o,o.stateNode.containerInfo),i===null)throw Error(s(387));u=o.pendingProps;var v=o.memoizedState;m=v.element,vc(i,o),fl(o,u,null,r);var S=o.memoizedState;if(u=S.cache,Di(o,St,u),u!==v.cache&&fc(o,[St],r,!0),dl(),u=S.element,v.isDehydrated)if(v={element:u,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Zm(i,o,u,r);break e}else if(u!==m){m=Cn(Error(s(424)),o),ol(m),o=Zm(i,o,u,r);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(rt=wn(i.firstChild),Lt=o,qe=!0,Ii=null,Nn=!0,r=$p(o,null,u,r),o.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(hs(),u===m){o=ai(i,o,r);break e}Bt(i,o,u,r)}o=o.child}return o;case 26:return Xr(i,o),i===null?(r=py(o.type,null,o.pendingProps,null))?o.memoizedState=r:qe||(r=o.type,i=o.pendingProps,u=pa(ce.current).createElement(r),u[Pt]=o,u[en]=i,Ht(u,r,i),At(u),o.stateNode=u):o.memoizedState=py(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return j(o),i===null&&qe&&(u=o.stateNode=dy(o.type,o.pendingProps,ce.current),Lt=o,Nn=!0,m=rt,Yi(o.type)?(Md=m,rt=wn(u.firstChild)):rt=m),Bt(i,o,o.pendingProps.children,r),Xr(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&qe&&((m=u=rt)&&(u=_C(u,o.type,o.pendingProps,Nn),u!==null?(o.stateNode=u,Lt=o,rt=wn(u.firstChild),Nn=!1,m=!0):m=!1),m||Mi(o)),j(o),m=o.type,v=o.pendingProps,S=i!==null?i.memoizedProps:null,u=v.children,Nd(m,v)?u=null:S!==null&&Nd(m,S)&&(o.flags|=32),o.memoizedState!==null&&(m=bc(i,o,US,null,null,r),Dl._currentValue=m),Xr(i,o),Bt(i,o,u,r),o.child;case 6:return i===null&&qe&&((i=r=rt)&&(r=xC(r,o.pendingProps,Nn),r!==null?(o.stateNode=r,Lt=o,rt=null,i=!0):i=!1),i||Mi(o)),null;case 13:return eg(i,o,r);case 4:return Ae(o,o.stateNode.containerInfo),u=o.pendingProps,i===null?o.child=_s(o,null,u,r):Bt(i,o,u,r),o.child;case 11:return Ym(i,o,o.type,o.pendingProps,r);case 7:return Bt(i,o,o.pendingProps,r),o.child;case 8:return Bt(i,o,o.pendingProps.children,r),o.child;case 12:return Bt(i,o,o.pendingProps.children,r),o.child;case 10:return u=o.pendingProps,Di(o,o.type,u.value),Bt(i,o,u.children,r),o.child;case 9:return m=o.type._context,u=o.pendingProps.children,ms(o),m=Ot(m),u=u(m),o.flags|=1,Bt(i,o,u,r),o.child;case 14:return jm(i,o,o.type,o.pendingProps,r);case 15:return Jm(i,o,o.type,o.pendingProps,r);case 19:return ng(i,o,r);case 31:return VS(i,o,r);case 22:return $m(i,o,r,o.pendingProps);case 24:return ms(o),u=Ot(St),i===null?(m=mc(),m===null&&(m=it,v=hc(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=r),m=v),o.memoizedState={parent:u,cache:m},yc(o),Di(o,St,m)):((i.lanes&r)!==0&&(vc(i,o),fl(o,null,null,r),dl()),m=i.memoizedState,v=o.memoizedState,m.parent!==u?(m={parent:u,cache:u},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Di(o,St,u)):(u=v.cache,Di(o,St,u),u!==m.cache&&fc(o,[St],r,!0))),Bt(i,o,o.pendingProps.children,r),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ui(i){i.flags|=4}function Zc(i,o,r,u,m){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(Ig())i.flags|=8192;else throw vs=Lr,gc}else i.flags&=-16777217}function sg(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!_y(o))if(Ig())i.flags|=8192;else throw vs=Lr,gc}function Zr(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?zn():536870912,i.lanes|=o,fo|=o)}function vl(i,o){if(!qe)switch(i.tailMode){case"hidden":o=i.tail;for(var r=null;o!==null;)o.alternate!==null&&(r=o),o=o.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function at(i){var o=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(o)for(var m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)r|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=r,o}function zS(i,o,r){var u=o.pendingProps;switch(rc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(o),null;case 1:return at(o),null;case 3:return r=o.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),oi(St),w(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(Ws(o)?ui(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,uc())),at(o),null;case 26:var m=o.type,v=o.memoizedState;return i===null?(ui(o),v!==null?(at(o),sg(o,v)):(at(o),Zc(o,m,null,u,r))):v?v!==i.memoizedState?(ui(o),at(o),sg(o,v)):(at(o),o.flags&=-16777217):(i=i.memoizedProps,i!==u&&ui(o),at(o),Zc(o,m,i,u,r)),null;case 27:if(ee(o),r=ce.current,m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&ui(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return at(o),null}i=te.current,Ws(o)?Op(o):(i=dy(m,u,r),o.stateNode=i,ui(o))}return at(o),null;case 5:if(ee(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==u&&ui(o);else{if(!u){if(o.stateNode===null)throw Error(s(166));return at(o),null}if(v=te.current,Ws(o))Op(o);else{var S=pa(ce.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?v.multiple=!0:u.size&&(v.size=u.size);break;default:v=typeof u.is=="string"?S.createElement(m,{is:u.is}):S.createElement(m)}}v[Pt]=o,v[en]=u;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=v;e:switch(Ht(v,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ui(o)}}return at(o),Zc(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,r),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==u&&ui(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(s(166));if(i=ce.current,Ws(o)){if(i=o.stateNode,r=o.memoizedProps,u=null,m=Lt,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[Pt]=o,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||ey(i.nodeValue,r)),i||Mi(o,!0)}else i=pa(i).createTextNode(u),i[Pt]=o,o.stateNode=i}return at(o),null;case 31:if(r=o.memoizedState,i===null||i.memoizedState!==null){if(u=Ws(o),r!==null){if(i===null){if(!u)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Pt]=o}else hs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;at(o),i=!1}else r=uc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return o.flags&256?(pn(o),o):(pn(o),null);if((o.flags&128)!==0)throw Error(s(558))}return at(o),null;case 13:if(u=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Ws(o),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Pt]=o}else hs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;at(o),m=!1}else m=uc(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(pn(o),o):(pn(o),null)}return pn(o),(o.flags&128)!==0?(o.lanes=r,o):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=o.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==m&&(u.flags|=2048)),r!==i&&r&&(o.child.flags|=8192),Zr(o,o.updateQueue),at(o),null);case 4:return w(),i===null&&Ed(o.stateNode.containerInfo),at(o),null;case 10:return oi(o.type),at(o),null;case 19:if(D(_t),u=o.memoizedState,u===null)return at(o),null;if(m=(o.flags&128)!==0,v=u.rendering,v===null)if(m)vl(u,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Gr(i),v!==null){for(o.flags|=128,vl(u,!1),i=v.updateQueue,o.updateQueue=i,Zr(o,i),o.subtreeFlags=0,i=r,r=o.child;r!==null;)Dp(r,i),r=r.sibling;return z(_t,_t.current&1|2),qe&&ii(o,u.treeForkCount),o.child}i=i.sibling}u.tail!==null&&Ft()>sa&&(o.flags|=128,m=!0,vl(u,!1),o.lanes=4194304)}else{if(!m)if(i=Gr(v),i!==null){if(o.flags|=128,m=!0,i=i.updateQueue,o.updateQueue=i,Zr(o,i),vl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!v.alternate&&!qe)return at(o),null}else 2*Ft()-u.renderingStartTime>sa&&r!==536870912&&(o.flags|=128,m=!0,vl(u,!1),o.lanes=4194304);u.isBackwards?(v.sibling=o.child,o.child=v):(i=u.last,i!==null?i.sibling=v:o.child=v,u.last=v)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Ft(),i.sibling=null,r=_t.current,z(_t,m?r&1|2:r&1),qe&&ii(o,u.treeForkCount),i):(at(o),null);case 22:case 23:return pn(o),Sc(),u=o.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(r&536870912)!==0&&(o.flags&128)===0&&(at(o),o.subtreeFlags&6&&(o.flags|=8192)):at(o),r=o.updateQueue,r!==null&&Zr(o,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==r&&(o.flags|=2048),i!==null&&D(gs),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),o.memoizedState.cache!==r&&(o.flags|=2048),oi(St),at(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function YS(i,o){switch(rc(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return oi(St),w(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ee(o),null;case 31:if(o.memoizedState!==null){if(pn(o),o.alternate===null)throw Error(s(340));hs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(pn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));hs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return D(_t),null;case 4:return w(),null;case 10:return oi(o.type),null;case 22:case 23:return pn(o),Sc(),i!==null&&D(gs),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return oi(St),null;case 25:return null;default:return null}}function og(i,o){switch(rc(o),o.tag){case 3:oi(St),w();break;case 26:case 27:case 5:ee(o);break;case 4:w();break;case 31:o.memoizedState!==null&&pn(o);break;case 13:pn(o);break;case 19:D(_t);break;case 10:oi(o.type);break;case 22:case 23:pn(o),Sc(),i!==null&&D(gs);break;case 24:oi(St)}}function _l(i,o){try{var r=o.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var m=u.next;r=m;do{if((r.tag&i)===i){u=void 0;var v=r.create,S=r.inst;u=v(),S.destroy=u}r=r.next}while(r!==m)}}catch(C){Xe(o,o.return,C)}}function Bi(i,o,r){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&i)===i){var S=u.inst,C=S.destroy;if(C!==void 0){S.destroy=void 0,m=o;var A=r,L=C;try{L()}catch(V){Xe(m,A,V)}}}u=u.next}while(u!==v)}}catch(V){Xe(o,o.return,V)}}function lg(i){var o=i.updateQueue;if(o!==null){var r=i.stateNode;try{Qp(o,r)}catch(u){Xe(i,i.return,u)}}}function rg(i,o,r){r.props=Es(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Xe(i,o,u)}}function xl(i,o){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(m){Xe(i,o,m)}}function Jn(i,o){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(m){Xe(i,o,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){Xe(i,o,m)}else r.current=null}function ag(i){var o=i.type,r=i.memoizedProps,u=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break e;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(m){Xe(i,i.return,m)}}function ed(i,o,r){try{var u=i.stateNode;hC(u,i.type,r,o),u[en]=o}catch(m){Xe(i,i.return,m)}}function ug(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Yi(i.type)||i.tag===4}function td(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||ug(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Yi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nd(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,o):(o=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.appendChild(i),r=r._reactRootContainer,r!=null||o.onclick!==null||(o.onclick=ei));else if(u!==4&&(u===27&&Yi(i.type)&&(r=i.stateNode,o=null),i=i.child,i!==null))for(nd(i,o,r),i=i.sibling;i!==null;)nd(i,o,r),i=i.sibling}function ea(i,o,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,o?r.insertBefore(i,o):r.appendChild(i);else if(u!==4&&(u===27&&Yi(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(ea(i,o,r),i=i.sibling;i!==null;)ea(i,o,r),i=i.sibling}function cg(i){var o=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Ht(o,u,r),o[Pt]=i,o[en]=r}catch(v){Xe(i,i.return,v)}}var ci=!1,bt=!1,id=!1,dg=typeof WeakSet=="function"?WeakSet:Set,wt=null;function jS(i,o){if(i=i.containerInfo,Td=Ea,i=Cp(i),Qu(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else e:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var m=u.anchorOffset,v=u.focusNode;u=u.focusOffset;try{r.nodeType,v.nodeType}catch{r=null;break e}var S=0,C=-1,A=-1,L=0,V=0,$=i,O=null;t:for(;;){for(var G;$!==r||m!==0&&$.nodeType!==3||(C=S+m),$!==v||u!==0&&$.nodeType!==3||(A=S+u),$.nodeType===3&&(S+=$.nodeValue.length),(G=$.firstChild)!==null;)O=$,$=G;for(;;){if($===i)break t;if(O===r&&++L===m&&(C=S),O===v&&++V===u&&(A=S),(G=$.nextSibling)!==null)break;$=O,O=$.parentNode}$=G}r=C===-1||A===-1?null:{start:C,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(bd={focusedElem:i,selectionRange:r},Ea=!1,wt=o;wt!==null;)if(o=wt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,wt=i;else for(;wt!==null;){switch(o=wt,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)m=i[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,r=o,m=v.memoizedProps,v=v.memoizedState,u=r.stateNode;try{var he=Es(r.type,m);i=u.getSnapshotBeforeUpdate(he,v),u.__reactInternalSnapshotBeforeUpdate=i}catch(xe){Xe(r,r.return,xe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,r=i.nodeType,r===9)wd(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":wd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,wt=i;break}wt=o.return}}function fg(i,o,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:fi(i,r),u&4&&_l(5,r);break;case 1:if(fi(i,r),u&4)if(i=r.stateNode,o===null)try{i.componentDidMount()}catch(S){Xe(r,r.return,S)}else{var m=Es(r.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(m,o,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Xe(r,r.return,S)}}u&64&&lg(r),u&512&&xl(r,r.return);break;case 3:if(fi(i,r),u&64&&(i=r.updateQueue,i!==null)){if(o=null,r.child!==null)switch(r.child.tag){case 27:case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}try{Qp(i,o)}catch(S){Xe(r,r.return,S)}}break;case 27:o===null&&u&4&&cg(r);case 26:case 5:fi(i,r),o===null&&u&4&&ag(r),u&512&&xl(r,r.return);break;case 12:fi(i,r);break;case 31:fi(i,r),u&4&&mg(i,r);break;case 13:fi(i,r),u&4&&gg(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=tC.bind(null,r),EC(i,r))));break;case 22:if(u=r.memoizedState!==null||ci,!u){o=o!==null&&o.memoizedState!==null||bt,m=ci;var v=bt;ci=u,(bt=o)&&!v?hi(i,r,(r.subtreeFlags&8772)!==0):fi(i,r),ci=m,bt=v}break;case 30:break;default:fi(i,r)}}function hg(i){var o=i.alternate;o!==null&&(i.alternate=null,hg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ku(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ct=null,nn=!1;function di(i,o,r){for(r=r.child;r!==null;)pg(i,o,r),r=r.sibling}function pg(i,o,r){if(Ce&&typeof Ce.onCommitFiberUnmount=="function")try{Ce.onCommitFiberUnmount(_n,r)}catch{}switch(r.tag){case 26:bt||Jn(r,o),di(i,o,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:bt||Jn(r,o);var u=ct,m=nn;Yi(r.type)&&(ct=r.stateNode,nn=!1),di(i,o,r),Rl(r.stateNode),ct=u,nn=m;break;case 5:bt||Jn(r,o);case 6:if(u=ct,m=nn,ct=null,di(i,o,r),ct=u,nn=m,ct!==null)if(nn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(r.stateNode)}catch(v){Xe(r,o,v)}else try{ct.removeChild(r.stateNode)}catch(v){Xe(r,o,v)}break;case 18:ct!==null&&(nn?(i=ct,ly(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),xo(i)):ly(ct,r.stateNode));break;case 4:u=ct,m=nn,ct=r.stateNode.containerInfo,nn=!0,di(i,o,r),ct=u,nn=m;break;case 0:case 11:case 14:case 15:Bi(2,r,o),bt||Bi(4,r,o),di(i,o,r);break;case 1:bt||(Jn(r,o),u=r.stateNode,typeof u.componentWillUnmount=="function"&&rg(r,o,u)),di(i,o,r);break;case 21:di(i,o,r);break;case 22:bt=(u=bt)||r.memoizedState!==null,di(i,o,r),bt=u;break;default:di(i,o,r)}}function mg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{xo(i)}catch(r){Xe(o,o.return,r)}}}function gg(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xo(i)}catch(r){Xe(o,o.return,r)}}function JS(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new dg),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new dg),o;default:throw Error(s(435,i.tag))}}function ta(i,o){var r=JS(i);o.forEach(function(u){if(!r.has(u)){r.add(u);var m=nC.bind(null,i,u);u.then(m,m)}})}function sn(i,o){var r=o.deletions;if(r!==null)for(var u=0;u<r.length;u++){var m=r[u],v=i,S=o,C=S;e:for(;C!==null;){switch(C.tag){case 27:if(Yi(C.type)){ct=C.stateNode,nn=!1;break e}break;case 5:ct=C.stateNode,nn=!1;break e;case 3:case 4:ct=C.stateNode.containerInfo,nn=!0;break e}C=C.return}if(ct===null)throw Error(s(160));pg(v,S,m),ct=null,nn=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)yg(o,i),o=o.sibling}var Un=null;function yg(i,o){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:sn(o,i),on(i),u&4&&(Bi(3,i,i.return),_l(3,i),Bi(5,i,i.return));break;case 1:sn(o,i),on(i),u&512&&(bt||r===null||Jn(r,r.return)),u&64&&ci&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var m=Un;if(sn(o,i),on(i),u&512&&(bt||r===null||Jn(r,r.return)),u&4){var v=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){e:{u=i.type,r=i.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Jo]||v[Pt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(u),m.head.insertBefore(v,m.querySelector("head > title"))),Ht(v,u,r),v[Pt]=i,At(v),u=v;break e;case"link":var S=yy("link","href",m).get(u+(r.href||""));if(S){for(var C=0;C<S.length;C++)if(v=S[C],v.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&v.getAttribute("rel")===(r.rel==null?null:r.rel)&&v.getAttribute("title")===(r.title==null?null:r.title)&&v.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){S.splice(C,1);break t}}v=m.createElement(u),Ht(v,u,r),m.head.appendChild(v);break;case"meta":if(S=yy("meta","content",m).get(u+(r.content||""))){for(C=0;C<S.length;C++)if(v=S[C],v.getAttribute("content")===(r.content==null?null:""+r.content)&&v.getAttribute("name")===(r.name==null?null:r.name)&&v.getAttribute("property")===(r.property==null?null:r.property)&&v.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&v.getAttribute("charset")===(r.charSet==null?null:r.charSet)){S.splice(C,1);break t}}v=m.createElement(u),Ht(v,u,r),m.head.appendChild(v);break;default:throw Error(s(468,u))}v[Pt]=i,At(v),u=v}i.stateNode=u}else vy(m,i.type,i.stateNode);else i.stateNode=gy(m,u,i.memoizedProps);else v!==u?(v===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):v.count--,u===null?vy(m,i.type,i.stateNode):gy(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&ed(i,i.memoizedProps,r.memoizedProps)}break;case 27:sn(o,i),on(i),u&512&&(bt||r===null||Jn(r,r.return)),r!==null&&u&4&&ed(i,i.memoizedProps,r.memoizedProps);break;case 5:if(sn(o,i),on(i),u&512&&(bt||r===null||Jn(r,r.return)),i.flags&32){m=i.stateNode;try{Vs(m,"")}catch(he){Xe(i,i.return,he)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,ed(i,m,r!==null?r.memoizedProps:m)),u&1024&&(id=!0);break;case 6:if(sn(o,i),on(i),u&4){if(i.stateNode===null)throw Error(s(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(he){Xe(i,i.return,he)}}break;case 3:if(ya=null,m=Un,Un=ma(o.containerInfo),sn(o,i),Un=m,on(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{xo(o.containerInfo)}catch(he){Xe(i,i.return,he)}id&&(id=!1,vg(i));break;case 4:u=Un,Un=ma(i.stateNode.containerInfo),sn(o,i),on(i),Un=u;break;case 12:sn(o,i),on(i);break;case 31:sn(o,i),on(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 13:sn(o,i),on(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ia=Ft()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 22:m=i.memoizedState!==null;var A=r!==null&&r.memoizedState!==null,L=ci,V=bt;if(ci=L||m,bt=V||A,sn(o,i),bt=V,ci=L,on(i),u&8192)e:for(o=i.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(r===null||A||ci||bt||Ss(i)),r=null,o=i;;){if(o.tag===5||o.tag===26){if(r===null){A=r=o;try{if(v=A.stateNode,m)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{C=A.stateNode;var $=A.memoizedProps.style,O=$!=null&&$.hasOwnProperty("display")?$.display:null;C.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(he){Xe(A,A.return,he)}}}else if(o.tag===6){if(r===null){A=o;try{A.stateNode.nodeValue=m?"":A.memoizedProps}catch(he){Xe(A,A.return,he)}}}else if(o.tag===18){if(r===null){A=o;try{var G=A.stateNode;m?ry(G,!0):ry(A.stateNode,!1)}catch(he){Xe(A,A.return,he)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;r===o&&(r=null),o=o.return}r===o&&(r=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,ta(i,r))));break;case 19:sn(o,i),on(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,ta(i,u)));break;case 30:break;case 21:break;default:sn(o,i),on(i)}}function on(i){var o=i.flags;if(o&2){try{for(var r,u=i.return;u!==null;){if(ug(u)){r=u;break}u=u.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var m=r.stateNode,v=td(i);ea(i,v,m);break;case 5:var S=r.stateNode;r.flags&32&&(Vs(S,""),r.flags&=-33);var C=td(i);ea(i,C,S);break;case 3:case 4:var A=r.stateNode.containerInfo,L=td(i);nd(i,L,A);break;default:throw Error(s(161))}}catch(V){Xe(i,i.return,V)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function vg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;vg(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function fi(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)fg(i,o.alternate,o),o=o.sibling}function Ss(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Bi(4,o,o.return),Ss(o);break;case 1:Jn(o,o.return);var r=o.stateNode;typeof r.componentWillUnmount=="function"&&rg(o,o.return,r),Ss(o);break;case 27:Rl(o.stateNode);case 26:case 5:Jn(o,o.return),Ss(o);break;case 22:o.memoizedState===null&&Ss(o);break;case 30:Ss(o);break;default:Ss(o)}i=i.sibling}}function hi(i,o,r){for(r=r&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,m=i,v=o,S=v.flags;switch(v.tag){case 0:case 11:case 15:hi(m,v,r),_l(4,v);break;case 1:if(hi(m,v,r),u=v,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(L){Xe(u,u.return,L)}if(u=v,m=u.updateQueue,m!==null){var C=u.stateNode;try{var A=m.shared.hiddenCallbacks;if(A!==null)for(m.shared.hiddenCallbacks=null,m=0;m<A.length;m++)Kp(A[m],C)}catch(L){Xe(u,u.return,L)}}r&&S&64&&lg(v),xl(v,v.return);break;case 27:cg(v);case 26:case 5:hi(m,v,r),r&&u===null&&S&4&&ag(v),xl(v,v.return);break;case 12:hi(m,v,r);break;case 31:hi(m,v,r),r&&S&4&&mg(m,v);break;case 13:hi(m,v,r),r&&S&4&&gg(m,v);break;case 22:v.memoizedState===null&&hi(m,v,r),xl(v,v.return);break;case 30:break;default:hi(m,v,r)}o=o.sibling}}function sd(i,o){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&ll(r))}function od(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ll(i))}function Pn(i,o,r,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)_g(i,o,r,u),o=o.sibling}function _g(i,o,r,u){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Pn(i,o,r,u),m&2048&&_l(9,o);break;case 1:Pn(i,o,r,u);break;case 3:Pn(i,o,r,u),m&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ll(i)));break;case 12:if(m&2048){Pn(i,o,r,u),i=o.stateNode;try{var v=o.memoizedProps,S=v.id,C=v.onPostCommit;typeof C=="function"&&C(S,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(A){Xe(o,o.return,A)}}else Pn(i,o,r,u);break;case 31:Pn(i,o,r,u);break;case 13:Pn(i,o,r,u);break;case 23:break;case 22:v=o.stateNode,S=o.alternate,o.memoizedState!==null?v._visibility&2?Pn(i,o,r,u):El(i,o):v._visibility&2?Pn(i,o,r,u):(v._visibility|=2,ao(i,o,r,u,(o.subtreeFlags&10256)!==0||!1)),m&2048&&sd(S,o);break;case 24:Pn(i,o,r,u),m&2048&&od(o.alternate,o);break;default:Pn(i,o,r,u)}}function ao(i,o,r,u,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,S=o,C=r,A=u,L=S.flags;switch(S.tag){case 0:case 11:case 15:ao(v,S,C,A,m),_l(8,S);break;case 23:break;case 22:var V=S.stateNode;S.memoizedState!==null?V._visibility&2?ao(v,S,C,A,m):El(v,S):(V._visibility|=2,ao(v,S,C,A,m)),m&&L&2048&&sd(S.alternate,S);break;case 24:ao(v,S,C,A,m),m&&L&2048&&od(S.alternate,S);break;default:ao(v,S,C,A,m)}o=o.sibling}}function El(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var r=i,u=o,m=u.flags;switch(u.tag){case 22:El(r,u),m&2048&&sd(u.alternate,u);break;case 24:El(r,u),m&2048&&od(u.alternate,u);break;default:El(r,u)}o=o.sibling}}var Sl=8192;function uo(i,o,r){if(i.subtreeFlags&Sl)for(i=i.child;i!==null;)xg(i,o,r),i=i.sibling}function xg(i,o,r){switch(i.tag){case 26:uo(i,o,r),i.flags&Sl&&i.memoizedState!==null&&kC(r,Un,i.memoizedState,i.memoizedProps);break;case 5:uo(i,o,r);break;case 3:case 4:var u=Un;Un=ma(i.stateNode.containerInfo),uo(i,o,r),Un=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Sl,Sl=16777216,uo(i,o,r),Sl=u):uo(i,o,r));break;default:uo(i,o,r)}}function Eg(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function Cl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];wt=u,Cg(u,i)}Eg(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sg(i),i=i.sibling}function Sg(i){switch(i.tag){case 0:case 11:case 15:Cl(i),i.flags&2048&&Bi(9,i,i.return);break;case 3:Cl(i);break;case 12:Cl(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,na(i)):Cl(i);break;default:Cl(i)}}function na(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var r=0;r<o.length;r++){var u=o[r];wt=u,Cg(u,i)}Eg(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Bi(8,o,o.return),na(o);break;case 22:r=o.stateNode,r._visibility&2&&(r._visibility&=-3,na(o));break;default:na(o)}i=i.sibling}}function Cg(i,o){for(;wt!==null;){var r=wt;switch(r.tag){case 0:case 11:case 15:Bi(8,r,o);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ll(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,wt=u;else e:for(r=i;wt!==null;){u=wt;var m=u.sibling,v=u.return;if(hg(u),u===r){wt=null;break e}if(m!==null){m.return=v,wt=m;break e}wt=v}}}var $S={getCacheForType:function(i){var o=Ot(St),r=o.data.get(i);return r===void 0&&(r=i(),o.data.set(i,r)),r},cacheSignal:function(){return Ot(St).controller.signal}},KS=typeof WeakMap=="function"?WeakMap:Map,Je=0,it=null,Pe=null,Be=0,Qe=0,mn=null,Hi=!1,co=!1,ld=!1,pi=0,pt=0,Gi=0,Cs=0,rd=0,gn=0,fo=0,Tl=null,ln=null,ad=!1,ia=0,Tg=0,sa=1/0,oa=null,qi=null,Nt=0,Vi=null,ho=null,mi=0,ud=0,cd=null,bg=null,bl=0,dd=null;function yn(){return(Je&2)!==0&&Be!==0?Be&-Be:U.T!==null?yd():qh()}function Ng(){if(gn===0)if((Be&536870912)===0||qe){var i=Wn;Wn<<=1,(Wn&3932160)===0&&(Wn=262144),gn=i}else gn=536870912;return i=hn.current,i!==null&&(i.flags|=32),gn}function rn(i,o,r){(i===it&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)&&(po(i,0),Fi(i,Be,gn,!1)),jo(i,r),((Je&2)===0||i!==it)&&(i===it&&((Je&2)===0&&(Cs|=r),pt===4&&Fi(i,Be,gn,!1)),$n(i))}function Ag(i,o,r){if((Je&6)!==0)throw Error(s(327));var u=!r&&(o&127)===0&&(o&i.expiredLanes)===0||Zt(i,o),m=u?WS(i,o):hd(i,o,!0),v=u;do{if(m===0){co&&!u&&Fi(i,o,0,!1);break}else{if(r=i.current.alternate,v&&!QS(r)){m=hd(i,o,!1),v=!1;continue}if(m===2){if(v=o,i.errorRecoveryDisabledLanes&v)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var C=i;m=Tl;var A=C.current.memoizedState.isDehydrated;if(A&&(po(C,S).flags|=256),S=hd(C,S,!1),S!==2){if(ld&&!A){C.errorRecoveryDisabledLanes|=v,Cs|=v,m=4;break e}v=ln,ln=m,v!==null&&(ln===null?ln=v:ln.push.apply(ln,v))}m=S}if(v=!1,m!==2)continue}}if(m===1){po(i,0),Fi(i,o,0,!0);break}e:{switch(u=i,v=m,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Fi(u,o,gn,!Hi);break e;case 2:ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=ia+300-Ft(),10<m)){if(Fi(u,o,gn,!Hi),Fn(u,0,!0)!==0)break e;mi=o,u.timeoutHandle=sy(wg.bind(null,u,r,ln,oa,ad,o,gn,Cs,fo,Hi,v,"Throttled",-0,0),m);break e}wg(u,r,ln,oa,ad,o,gn,Cs,fo,Hi,v,null,-0,0)}}break}while(!0);$n(i)}function wg(i,o,r,u,m,v,S,C,A,L,V,$,O,G){if(i.timeoutHandle=-1,$=o.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},xg(o,v,$);var he=(v&62914560)===v?ia-Ft():(v&4194048)===v?Tg-Ft():0;if(he=UC($,he),he!==null){mi=v,i.cancelPendingCommit=he(Lg.bind(null,i,o,v,r,u,m,S,C,A,V,$,null,O,G)),Fi(i,v,S,!L);return}}Lg(i,o,v,r,u,m,S,C,A)}function QS(i){for(var o=i;;){var r=o.tag;if((r===0||r===11||r===15)&&o.flags&16384&&(r=o.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var m=r[u],v=m.getSnapshot;m=m.value;try{if(!dn(v(),m))return!1}catch{return!1}}if(r=o.child,o.subtreeFlags&16384&&r!==null)r.return=o,o=r;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Fi(i,o,r,u){o&=~rd,o&=~Cs,i.suspendedLanes|=o,i.pingedLanes&=~o,u&&(i.warmLanes|=o),u=i.expirationTimes;for(var m=o;0<m;){var v=31-ft(m),S=1<<v;u[v]=-1,m&=~S}r!==0&&Bh(i,r,o)}function la(){return(Je&6)===0?(Nl(0),!1):!0}function fd(){if(Pe!==null){if(Qe===0)var i=Pe.return;else i=Pe,si=ps=null,wc(i),io=null,al=0,i=Pe;for(;i!==null;)og(i.alternate,i),i=i.return;Pe=null}}function po(i,o){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,gC(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),mi=0,fd(),it=i,Pe=r=ni(i.current,null),Be=o,Qe=0,mn=null,Hi=!1,co=Zt(i,o),ld=!1,fo=gn=rd=Cs=Gi=pt=0,ln=Tl=null,ad=!1,(o&8)!==0&&(o|=o&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=o;0<u;){var m=31-ft(u),v=1<<m;o|=i[m],u&=~v}return pi=o,Ar(),r}function Rg(i,o){we=null,U.H=gl,o===no||o===Pr?(o=Yp(),Qe=3):o===gc?(o=Yp(),Qe=4):Qe=o===zc?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,mn=o,Pe===null&&(pt=1,Kr(i,Cn(o,i.current)))}function Ig(){var i=hn.current;return i===null?!0:(Be&4194048)===Be?An===null:(Be&62914560)===Be||(Be&536870912)!==0?i===An:!1}function Mg(){var i=U.H;return U.H=gl,i===null?gl:i}function Dg(){var i=U.A;return U.A=$S,i}function ra(){pt=4,Hi||(Be&4194048)!==Be&&hn.current!==null||(co=!0),(Gi&134217727)===0&&(Cs&134217727)===0||it===null||Fi(it,Be,gn,!1)}function hd(i,o,r){var u=Je;Je|=2;var m=Mg(),v=Dg();(it!==i||Be!==o)&&(oa=null,po(i,o)),o=!1;var S=pt;e:do try{if(Qe!==0&&Pe!==null){var C=Pe,A=mn;switch(Qe){case 8:fd(),S=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(o=!0);var L=Qe;if(Qe=0,mn=null,mo(i,C,A,L),r&&co){S=0;break e}break;default:L=Qe,Qe=0,mn=null,mo(i,C,A,L)}}XS(),S=pt;break}catch(V){Rg(i,V)}while(!0);return o&&i.shellSuspendCounter++,si=ps=null,Je=u,U.H=m,U.A=v,Pe===null&&(it=null,Be=0,Ar()),S}function XS(){for(;Pe!==null;)kg(Pe)}function WS(i,o){var r=Je;Je|=2;var u=Mg(),m=Dg();it!==i||Be!==o?(oa=null,sa=Ft()+500,po(i,o)):co=Zt(i,o);e:do try{if(Qe!==0&&Pe!==null){o=Pe;var v=mn;t:switch(Qe){case 1:Qe=0,mn=null,mo(i,o,v,1);break;case 2:case 9:if(Fp(v)){Qe=0,mn=null,Ug(o);break}o=function(){Qe!==2&&Qe!==9||it!==i||(Qe=7),$n(i)},v.then(o,o);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Fp(v)?(Qe=0,mn=null,Ug(o)):(Qe=0,mn=null,mo(i,o,v,7));break;case 5:var S=null;switch(Pe.tag){case 26:S=Pe.memoizedState;case 5:case 27:var C=Pe;if(S?_y(S):C.stateNode.complete){Qe=0,mn=null;var A=C.sibling;if(A!==null)Pe=A;else{var L=C.return;L!==null?(Pe=L,aa(L)):Pe=null}break t}}Qe=0,mn=null,mo(i,o,v,5);break;case 6:Qe=0,mn=null,mo(i,o,v,6);break;case 8:fd(),pt=6;break e;default:throw Error(s(462))}}ZS();break}catch(V){Rg(i,V)}while(!0);return si=ps=null,U.H=u,U.A=m,Je=r,Pe!==null?0:(it=null,Be=0,Ar(),pt)}function ZS(){for(;Pe!==null&&!pr();)kg(Pe)}function kg(i){var o=ig(i.alternate,i,pi);i.memoizedProps=i.pendingProps,o===null?aa(i):Pe=o}function Ug(i){var o=i,r=o.alternate;switch(o.tag){case 15:case 0:o=Xm(r,o,o.pendingProps,o.type,void 0,Be);break;case 11:o=Xm(r,o,o.pendingProps,o.type.render,o.ref,Be);break;case 5:wc(o);default:og(r,o),o=Pe=Dp(o,pi),o=ig(r,o,pi)}i.memoizedProps=i.pendingProps,o===null?aa(i):Pe=o}function mo(i,o,r,u){si=ps=null,wc(o),io=null,al=0;var m=o.return;try{if(qS(i,m,o,r,Be)){pt=1,Kr(i,Cn(r,i.current)),Pe=null;return}}catch(v){if(m!==null)throw Pe=m,v;pt=1,Kr(i,Cn(r,i.current)),Pe=null;return}o.flags&32768?(qe||u===1?i=!0:co||(Be&536870912)!==0?i=!1:(Hi=i=!0,(u===2||u===9||u===3||u===6)&&(u=hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Pg(o,i)):aa(o)}function aa(i){var o=i;do{if((o.flags&32768)!==0){Pg(o,Hi);return}i=o.return;var r=zS(o.alternate,o,pi);if(r!==null){Pe=r;return}if(o=o.sibling,o!==null){Pe=o;return}Pe=o=i}while(o!==null);pt===0&&(pt=5)}function Pg(i,o){do{var r=YS(i.alternate,i);if(r!==null){r.flags&=32767,Pe=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!o&&(i=i.sibling,i!==null)){Pe=i;return}Pe=i=r}while(i!==null);pt=6,Pe=null}function Lg(i,o,r,u,m,v,S,C,A){i.cancelPendingCommit=null;do ua();while(Nt!==0);if((Je&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=tc,DE(i,r,v,S,C,A),i===it&&(Pe=it=null,Be=0),ho=o,Vi=i,mi=r,ud=v,cd=m,bg=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,iC(Et,function(){return qg(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=U.T,U.T=null,m=K.p,K.p=2,S=Je,Je|=4;try{jS(i,o,r)}finally{Je=S,K.p=m,U.T=u}}Nt=1,Og(),Bg(),Hg()}}function Og(){if(Nt===1){Nt=0;var i=Vi,o=ho,r=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||r){r=U.T,U.T=null;var u=K.p;K.p=2;var m=Je;Je|=4;try{yg(o,i);var v=bd,S=Cp(i.containerInfo),C=v.focusedElem,A=v.selectionRange;if(S!==C&&C&&C.ownerDocument&&Sp(C.ownerDocument.documentElement,C)){if(A!==null&&Qu(C)){var L=A.start,V=A.end;if(V===void 0&&(V=L),"selectionStart"in C)C.selectionStart=L,C.selectionEnd=Math.min(V,C.value.length);else{var $=C.ownerDocument||document,O=$&&$.defaultView||window;if(O.getSelection){var G=O.getSelection(),he=C.textContent.length,xe=Math.min(A.start,he),tt=A.end===void 0?xe:Math.min(A.end,he);!G.extend&&xe>tt&&(S=tt,tt=xe,xe=S);var k=Ep(C,xe),R=Ep(C,tt);if(k&&R&&(G.rangeCount!==1||G.anchorNode!==k.node||G.anchorOffset!==k.offset||G.focusNode!==R.node||G.focusOffset!==R.offset)){var P=$.createRange();P.setStart(k.node,k.offset),G.removeAllRanges(),xe>tt?(G.addRange(P),G.extend(R.node,R.offset)):(P.setEnd(R.node,R.offset),G.addRange(P))}}}}for($=[],G=C;G=G.parentNode;)G.nodeType===1&&$.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<$.length;C++){var Y=$[C];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ea=!!Td,bd=Td=null}finally{Je=m,K.p=u,U.T=r}}i.current=o,Nt=2}}function Bg(){if(Nt===2){Nt=0;var i=Vi,o=ho,r=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||r){r=U.T,U.T=null;var u=K.p;K.p=2;var m=Je;Je|=4;try{fg(i,o.alternate,o)}finally{Je=m,K.p=u,U.T=r}}Nt=3}}function Hg(){if(Nt===4||Nt===3){Nt=0,mr();var i=Vi,o=ho,r=mi,u=bg;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Nt=5:(Nt=0,ho=Vi=null,Gg(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(qi=null),Mu(r),o=o.stateNode,Ce&&typeof Ce.onCommitFiberRoot=="function")try{Ce.onCommitFiberRoot(_n,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=U.T,m=K.p,K.p=2,U.T=null;try{for(var v=i.onRecoverableError,S=0;S<u.length;S++){var C=u[S];v(C.value,{componentStack:C.stack})}}finally{U.T=o,K.p=m}}(mi&3)!==0&&ua(),$n(i),m=i.pendingLanes,(r&261930)!==0&&(m&42)!==0?i===dd?bl++:(bl=0,dd=i):bl=0,Nl(0)}}function Gg(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ll(o)))}function ua(){return Og(),Bg(),Hg(),qg()}function qg(){if(Nt!==5)return!1;var i=Vi,o=ud;ud=0;var r=Mu(mi),u=U.T,m=K.p;try{K.p=32>r?32:r,U.T=null,r=cd,cd=null;var v=Vi,S=mi;if(Nt=0,ho=Vi=null,mi=0,(Je&6)!==0)throw Error(s(331));var C=Je;if(Je|=4,Sg(v.current),_g(v,v.current,S,r),Je=C,Nl(0,!1),Ce&&typeof Ce.onPostCommitFiberRoot=="function")try{Ce.onPostCommitFiberRoot(_n,v)}catch{}return!0}finally{K.p=m,U.T=u,Gg(i,o)}}function Vg(i,o,r){o=Cn(r,o),o=Fc(i.stateNode,o,2),i=Pi(i,o,2),i!==null&&(jo(i,2),$n(i))}function Xe(i,o,r){if(i.tag===3)Vg(i,i,r);else for(;o!==null;){if(o.tag===3){Vg(o,i,r);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qi===null||!qi.has(u))){i=Cn(r,i),r=Fm(2),u=Pi(o,r,2),u!==null&&(zm(r,u,o,i),jo(u,2),$n(u));break}}o=o.return}}function pd(i,o,r){var u=i.pingCache;if(u===null){u=i.pingCache=new KS;var m=new Set;u.set(o,m)}else m=u.get(o),m===void 0&&(m=new Set,u.set(o,m));m.has(r)||(ld=!0,m.add(r),i=eC.bind(null,i,o,r),o.then(i,i))}function eC(i,o,r){var u=i.pingCache;u!==null&&u.delete(o),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,it===i&&(Be&r)===r&&(pt===4||pt===3&&(Be&62914560)===Be&&300>Ft()-ia?(Je&2)===0&&po(i,0):rd|=r,fo===Be&&(fo=0)),$n(i)}function Fg(i,o){o===0&&(o=zn()),i=ds(i,o),i!==null&&(jo(i,o),$n(i))}function tC(i){var o=i.memoizedState,r=0;o!==null&&(r=o.retryLane),Fg(i,r)}function nC(i,o){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(r=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(o),Fg(i,r)}function iC(i,o){return Vt(i,o)}var ca=null,go=null,md=!1,da=!1,gd=!1,zi=0;function $n(i){i!==go&&i.next===null&&(go===null?ca=go=i:go=go.next=i),da=!0,md||(md=!0,oC())}function Nl(i,o){if(!gd&&da){gd=!0;do for(var r=!1,u=ca;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var v=0;else{var S=u.suspendedLanes,C=u.pingedLanes;v=(1<<31-ft(42|i)+1)-1,v&=m&~(S&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(r=!0,Jg(u,v))}else v=Be,v=Fn(u,u===it?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(v&3)===0||Zt(u,v)||(r=!0,Jg(u,v));u=u.next}while(r);gd=!1}}function sC(){zg()}function zg(){da=md=!1;var i=0;zi!==0&&mC()&&(i=zi);for(var o=Ft(),r=null,u=ca;u!==null;){var m=u.next,v=Yg(u,o);v===0?(u.next=null,r===null?ca=m:r.next=m,m===null&&(go=r)):(r=u,(i!==0||(v&3)!==0)&&(da=!0)),u=m}Nt!==0&&Nt!==5||Nl(i),zi!==0&&(zi=0)}function Yg(i,o){for(var r=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var S=31-ft(v),C=1<<S,A=m[S];A===-1?((C&r)===0||(C&u)!==0)&&(m[S]=Yo(C,o)):A<=o&&(i.expiredLanes|=C),v&=~C}if(o=it,r=Be,r=Fn(i,i===o?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===o&&(Qe===2||Qe===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Ti(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||Zt(i,r)){if(o=r&-r,o===i.callbackPriority)return o;switch(u!==null&&Ti(u),Mu(r)){case 2:case 8:r=Ke;break;case 32:r=Et;break;case 268435456:r=vn;break;default:r=Et}return u=jg.bind(null,i),r=Vt(r,u),i.callbackPriority=o,i.callbackNode=r,o}return u!==null&&u!==null&&Ti(u),i.callbackPriority=2,i.callbackNode=null,2}function jg(i,o){if(Nt!==0&&Nt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(ua()&&i.callbackNode!==r)return null;var u=Be;return u=Fn(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(Ag(i,u,o),Yg(i,Ft()),i.callbackNode!=null&&i.callbackNode===r?jg.bind(null,i):null)}function Jg(i,o){if(ua())return null;Ag(i,o,!0)}function oC(){yC(function(){(Je&6)!==0?Vt(Ie,sC):zg()})}function yd(){if(zi===0){var i=eo;i===0&&(i=vt,vt<<=1,(vt&261888)===0&&(vt=256)),zi=i}return zi}function $g(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:_r(""+i)}function Kg(i,o){var r=o.ownerDocument.createElement("input");return r.name=o.name,r.value=o.value,i.id&&r.setAttribute("form",i.id),o.parentNode.insertBefore(r,o),i=new FormData(i),r.parentNode.removeChild(r),i}function lC(i,o,r,u,m){if(o==="submit"&&r&&r.stateNode===m){var v=$g((m[en]||null).action),S=u.submitter;S&&(o=(o=S[en]||null)?$g(o.formAction):S.getAttribute("formAction"),o!==null&&(v=o,S=null));var C=new Cr("action","action",null,u,m);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(zi!==0){var A=S?Kg(m,S):new FormData(m);Oc(r,{pending:!0,data:A,method:m.method,action:v},null,A)}}else typeof v=="function"&&(C.preventDefault(),A=S?Kg(m,S):new FormData(m),Oc(r,{pending:!0,data:A,method:m.method,action:v},v,A))},currentTarget:m}]})}}for(var vd=0;vd<ec.length;vd++){var _d=ec[vd],rC=_d.toLowerCase(),aC=_d[0].toUpperCase()+_d.slice(1);kn(rC,"on"+aC)}kn(Np,"onAnimationEnd"),kn(Ap,"onAnimationIteration"),kn(wp,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(TS,"onTransitionRun"),kn(bS,"onTransitionStart"),kn(NS,"onTransitionCancel"),kn(Rp,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Al));function Qg(i,o){o=(o&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],m=u.event;u=u.listeners;e:{var v=void 0;if(o)for(var S=u.length-1;0<=S;S--){var C=u[S],A=C.instance,L=C.currentTarget;if(C=C.listener,A!==v&&m.isPropagationStopped())break e;v=C,m.currentTarget=L;try{v(m)}catch(V){Nr(V)}m.currentTarget=null,v=A}else for(S=0;S<u.length;S++){if(C=u[S],A=C.instance,L=C.currentTarget,C=C.listener,A!==v&&m.isPropagationStopped())break e;v=C,m.currentTarget=L;try{v(m)}catch(V){Nr(V)}m.currentTarget=null,v=A}}}}function Le(i,o){var r=o[Du];r===void 0&&(r=o[Du]=new Set);var u=i+"__bubble";r.has(u)||(Xg(o,i,2,!1),r.add(u))}function xd(i,o,r){var u=0;o&&(u|=4),Xg(r,i,u,o)}var fa="_reactListening"+Math.random().toString(36).slice(2);function Ed(i){if(!i[fa]){i[fa]=!0,zh.forEach(function(r){r!=="selectionchange"&&(uC.has(r)||xd(r,!1,i),xd(r,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[fa]||(o[fa]=!0,xd("selectionchange",!1,o))}}function Xg(i,o,r,u){switch(Ny(o)){case 2:var m=OC;break;case 8:m=BC;break;default:m=Ld}r=m.bind(null,o,r,i),m=void 0,!qu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(o,r,{capture:!0,passive:m}):i.addEventListener(o,r,!0):m!==void 0?i.addEventListener(o,r,{passive:m}):i.addEventListener(o,r,!1)}function Sd(i,o,r,u,m){var v=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var C=u.stateNode.containerInfo;if(C===m)break;if(S===4)for(S=u.return;S!==null;){var A=S.tag;if((A===3||A===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;C!==null;){if(S=Os(C),S===null)return;if(A=S.tag,A===5||A===6||A===26||A===27){u=v=S;continue e}C=C.parentNode}}u=u.return}np(function(){var L=v,V=Hu(r),$=[];e:{var O=Ip.get(i);if(O!==void 0){var G=Cr,he=i;switch(i){case"keypress":if(Er(r)===0)break e;case"keydown":case"keyup":G=nS;break;case"focusin":he="focus",G=Yu;break;case"focusout":he="blur",G=Yu;break;case"beforeblur":case"afterblur":G=Yu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=zE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=oS;break;case Np:case Ap:case wp:G=JE;break;case Rp:G=rS;break;case"scroll":case"scrollend":G=VE;break;case"wheel":G=uS;break;case"copy":case"cut":case"paste":G=KE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=rp;break;case"toggle":case"beforetoggle":G=dS}var xe=(o&4)!==0,tt=!xe&&(i==="scroll"||i==="scrollend"),k=xe?O!==null?O+"Capture":null:O;xe=[];for(var R=L,P;R!==null;){var Y=R;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||k===null||(Y=Ko(R,k),Y!=null&&xe.push(wl(R,Y,P))),tt)break;R=R.return}0<xe.length&&(O=new G(O,he,null,r,V),$.push({event:O,listeners:xe}))}}if((o&7)===0){e:{if(O=i==="mouseover"||i==="pointerover",G=i==="mouseout"||i==="pointerout",O&&r!==Bu&&(he=r.relatedTarget||r.fromElement)&&(Os(he)||he[Ls]))break e;if((G||O)&&(O=V.window===V?V:(O=V.ownerDocument)?O.defaultView||O.parentWindow:window,G?(he=r.relatedTarget||r.toElement,G=L,he=he?Os(he):null,he!==null&&(tt=a(he),xe=he.tag,he!==tt||xe!==5&&xe!==27&&xe!==6)&&(he=null)):(G=null,he=L),G!==he)){if(xe=op,Y="onMouseLeave",k="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(xe=rp,Y="onPointerLeave",k="onPointerEnter",R="pointer"),tt=G==null?O:$o(G),P=he==null?O:$o(he),O=new xe(Y,R+"leave",G,r,V),O.target=tt,O.relatedTarget=P,Y=null,Os(V)===L&&(xe=new xe(k,R+"enter",he,r,V),xe.target=P,xe.relatedTarget=tt,Y=xe),tt=Y,G&&he)t:{for(xe=cC,k=G,R=he,P=0,Y=k;Y;Y=xe(Y))P++;Y=0;for(var _e=R;_e;_e=xe(_e))Y++;for(;0<P-Y;)k=xe(k),P--;for(;0<Y-P;)R=xe(R),Y--;for(;P--;){if(k===R||R!==null&&k===R.alternate){xe=k;break t}k=xe(k),R=xe(R)}xe=null}else xe=null;G!==null&&Wg($,O,G,xe,!1),he!==null&&tt!==null&&Wg($,tt,he,xe,!0)}}e:{if(O=L?$o(L):window,G=O.nodeName&&O.nodeName.toLowerCase(),G==="select"||G==="input"&&O.type==="file")var ze=mp;else if(hp(O))if(gp)ze=ES;else{ze=_S;var me=vS}else G=O.nodeName,!G||G.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?L&&Ou(L.elementType)&&(ze=mp):ze=xS;if(ze&&(ze=ze(i,L))){pp($,ze,r,V);break e}me&&me(i,O,L),i==="focusout"&&L&&O.type==="number"&&L.memoizedProps.value!=null&&Lu(O,"number",O.value)}switch(me=L?$o(L):window,i){case"focusin":(hp(me)||me.contentEditable==="true")&&(js=me,Xu=L,il=null);break;case"focusout":il=Xu=js=null;break;case"mousedown":Wu=!0;break;case"contextmenu":case"mouseup":case"dragend":Wu=!1,Tp($,r,V);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":Tp($,r,V)}var Me;if(Ju)e:{switch(i){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Ys?dp(i,r)&&(He="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(He="onCompositionStart");He&&(ap&&r.locale!=="ko"&&(Ys||He!=="onCompositionStart"?He==="onCompositionEnd"&&Ys&&(Me=ip()):(wi=V,Vu="value"in wi?wi.value:wi.textContent,Ys=!0)),me=ha(L,He),0<me.length&&(He=new lp(He,i,null,r,V),$.push({event:He,listeners:me}),Me?He.data=Me:(Me=fp(r),Me!==null&&(He.data=Me)))),(Me=hS?pS(i,r):mS(i,r))&&(He=ha(L,"onBeforeInput"),0<He.length&&(me=new lp("onBeforeInput","beforeinput",null,r,V),$.push({event:me,listeners:He}),me.data=Me)),lC($,i,L,r,V)}Qg($,o)})}function wl(i,o,r){return{instance:i,listener:o,currentTarget:r}}function ha(i,o){for(var r=o+"Capture",u=[];i!==null;){var m=i,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Ko(i,r),m!=null&&u.unshift(wl(i,m,v)),m=Ko(i,o),m!=null&&u.push(wl(i,m,v))),i.tag===3)return u;i=i.return}return[]}function cC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Wg(i,o,r,u,m){for(var v=o._reactName,S=[];r!==null&&r!==u;){var C=r,A=C.alternate,L=C.stateNode;if(C=C.tag,A!==null&&A===u)break;C!==5&&C!==26&&C!==27||L===null||(A=L,m?(L=Ko(r,v),L!=null&&S.unshift(wl(r,L,A))):m||(L=Ko(r,v),L!=null&&S.push(wl(r,L,A)))),r=r.return}S.length!==0&&i.push({event:o,listeners:S})}var dC=/\r\n?/g,fC=/\u0000|\uFFFD/g;function Zg(i){return(typeof i=="string"?i:""+i).replace(dC,`
`).replace(fC,"")}function ey(i,o){return o=Zg(o),Zg(i)===o}function et(i,o,r,u,m,v){switch(r){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Vs(i,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Vs(i,""+u);break;case"className":yr(i,"class",u);break;case"tabIndex":yr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(i,r,u);break;case"style":ep(i,u,v);break;case"data":if(o!=="object"){yr(i,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=_r(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(r==="formAction"?(o!=="input"&&et(i,o,"name",m.name,m,null),et(i,o,"formEncType",m.formEncType,m,null),et(i,o,"formMethod",m.formMethod,m,null),et(i,o,"formTarget",m.formTarget,m,null)):(et(i,o,"encType",m.encType,m,null),et(i,o,"method",m.method,m,null),et(i,o,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=_r(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=ei);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=_r(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":Le("beforetoggle",i),Le("toggle",i),gr(i,"popover",u);break;case"xlinkActuate":Zn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":gr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=GE.get(r)||r,gr(i,r,u))}}function Cd(i,o,r,u,m,v){switch(r){case"style":ep(i,u,v);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(r=u.__html,r!=null){if(m.children!=null)throw Error(s(60));i.innerHTML=r}}break;case"children":typeof u=="string"?Vs(i,u):(typeof u=="number"||typeof u=="bigint")&&Vs(i,""+u);break;case"onScroll":u!=null&&Le("scroll",i);break;case"onScrollEnd":u!=null&&Le("scrollend",i);break;case"onClick":u!=null&&(i.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yh.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),o=r.slice(2,m?r.length-7:void 0),v=i[en]||null,v=v!=null?v[r]:null,typeof v=="function"&&i.removeEventListener(o,v,m),typeof u=="function")){typeof v!="function"&&v!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(o,u,m);break e}r in i?i[r]=u:u===!0?i.setAttribute(r,""):gr(i,r,u)}}}function Ht(i,o,r){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var u=!1,m=!1,v;for(v in r)if(r.hasOwnProperty(v)){var S=r[v];if(S!=null)switch(v){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:et(i,o,v,S,r,null)}}m&&et(i,o,"srcSet",r.srcSet,r,null),u&&et(i,o,"src",r.src,r,null);return;case"input":Le("invalid",i);var C=v=S=m=null,A=null,L=null;for(u in r)if(r.hasOwnProperty(u)){var V=r[u];if(V!=null)switch(u){case"name":m=V;break;case"type":S=V;break;case"checked":A=V;break;case"defaultChecked":L=V;break;case"value":v=V;break;case"defaultValue":C=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,o));break;default:et(i,o,u,V,r,null)}}Qh(i,v,C,A,L,S,m,!1);return;case"select":Le("invalid",i),u=S=v=null;for(m in r)if(r.hasOwnProperty(m)&&(C=r[m],C!=null))switch(m){case"value":v=C;break;case"defaultValue":S=C;break;case"multiple":u=C;default:et(i,o,m,C,r,null)}o=v,r=S,i.multiple=!!u,o!=null?qs(i,!!u,o,!1):r!=null&&qs(i,!!u,r,!0);return;case"textarea":Le("invalid",i),v=m=u=null;for(S in r)if(r.hasOwnProperty(S)&&(C=r[S],C!=null))switch(S){case"value":u=C;break;case"defaultValue":m=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:et(i,o,S,C,r,null)}Wh(i,u,m,v);return;case"option":for(A in r)if(r.hasOwnProperty(A)&&(u=r[A],u!=null))switch(A){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(i,o,A,u,r,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(u=0;u<Al.length;u++)Le(Al[u],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in r)if(r.hasOwnProperty(L)&&(u=r[L],u!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:et(i,o,L,u,r,null)}return;default:if(Ou(o)){for(V in r)r.hasOwnProperty(V)&&(u=r[V],u!==void 0&&Cd(i,o,V,u,r,void 0));return}}for(C in r)r.hasOwnProperty(C)&&(u=r[C],u!=null&&et(i,o,C,u,r,null))}function hC(i,o,r,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,S=null,C=null,A=null,L=null,V=null;for(G in r){var $=r[G];if(r.hasOwnProperty(G)&&$!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":A=$;default:u.hasOwnProperty(G)||et(i,o,G,null,u,$)}}for(var O in u){var G=u[O];if($=r[O],u.hasOwnProperty(O)&&(G!=null||$!=null))switch(O){case"type":v=G;break;case"name":m=G;break;case"checked":L=G;break;case"defaultChecked":V=G;break;case"value":S=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,o));break;default:G!==$&&et(i,o,O,G,u,$)}}Pu(i,S,C,A,L,V,v,m);return;case"select":G=S=C=O=null;for(v in r)if(A=r[v],r.hasOwnProperty(v)&&A!=null)switch(v){case"value":break;case"multiple":G=A;default:u.hasOwnProperty(v)||et(i,o,v,null,u,A)}for(m in u)if(v=u[m],A=r[m],u.hasOwnProperty(m)&&(v!=null||A!=null))switch(m){case"value":O=v;break;case"defaultValue":C=v;break;case"multiple":S=v;default:v!==A&&et(i,o,m,v,u,A)}o=C,r=S,u=G,O!=null?qs(i,!!r,O,!1):!!u!=!!r&&(o!=null?qs(i,!!r,o,!0):qs(i,!!r,r?[]:"",!1));return;case"textarea":G=O=null;for(C in r)if(m=r[C],r.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:et(i,o,C,null,u,m)}for(S in u)if(m=u[S],v=r[S],u.hasOwnProperty(S)&&(m!=null||v!=null))switch(S){case"value":O=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==v&&et(i,o,S,m,u,v)}Xh(i,O,G);return;case"option":for(var he in r)if(O=r[he],r.hasOwnProperty(he)&&O!=null&&!u.hasOwnProperty(he))switch(he){case"selected":i.selected=!1;break;default:et(i,o,he,null,u,O)}for(A in u)if(O=u[A],G=r[A],u.hasOwnProperty(A)&&O!==G&&(O!=null||G!=null))switch(A){case"selected":i.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:et(i,o,A,O,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in r)O=r[xe],r.hasOwnProperty(xe)&&O!=null&&!u.hasOwnProperty(xe)&&et(i,o,xe,null,u,O);for(L in u)if(O=u[L],G=r[L],u.hasOwnProperty(L)&&O!==G&&(O!=null||G!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(137,o));break;default:et(i,o,L,O,u,G)}return;default:if(Ou(o)){for(var tt in r)O=r[tt],r.hasOwnProperty(tt)&&O!==void 0&&!u.hasOwnProperty(tt)&&Cd(i,o,tt,void 0,u,O);for(V in u)O=u[V],G=r[V],!u.hasOwnProperty(V)||O===G||O===void 0&&G===void 0||Cd(i,o,V,O,u,G);return}}for(var k in r)O=r[k],r.hasOwnProperty(k)&&O!=null&&!u.hasOwnProperty(k)&&et(i,o,k,null,u,O);for($ in u)O=u[$],G=r[$],!u.hasOwnProperty($)||O===G||O==null&&G==null||et(i,o,$,O,u,G)}function ty(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var m=r[u],v=m.transferSize,S=m.initiatorType,C=m.duration;if(v&&C&&ty(S)){for(S=0,C=m.responseEnd,u+=1;u<r.length;u++){var A=r[u],L=A.startTime;if(L>C)break;var V=A.transferSize,$=A.initiatorType;V&&ty($)&&(A=A.responseEnd,S+=V*(A<C?1:(C-L)/(A-L)))}if(--u,o+=8*(v+S)/(m.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Td=null,bd=null;function pa(i){return i.nodeType===9?i:i.ownerDocument}function ny(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iy(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Nd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ad=null;function mC(){var i=window.event;return i&&i.type==="popstate"?i===Ad?!1:(Ad=i,!0):(Ad=null,!1)}var sy=typeof setTimeout=="function"?setTimeout:void 0,gC=typeof clearTimeout=="function"?clearTimeout:void 0,oy=typeof Promise=="function"?Promise:void 0,yC=typeof queueMicrotask=="function"?queueMicrotask:typeof oy<"u"?function(i){return oy.resolve(null).then(i).catch(vC)}:sy;function vC(i){setTimeout(function(){throw i})}function Yi(i){return i==="head"}function ly(i,o){var r=o,u=0;do{var m=r.nextSibling;if(i.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(m),xo(o);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Rl(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,Rl(r);for(var v=r.firstChild;v;){var S=v.nextSibling,C=v.nodeName;v[Jo]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||r.removeChild(v),v=S}}else r==="body"&&Rl(i.ownerDocument.body);r=m}while(r);xo(o)}function ry(i,o){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?o?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(o?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function wd(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var r=o;switch(o=o.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":wd(r),ku(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function _C(i,o,r,u){for(;i.nodeType===1;){var m=r;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Jo])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=wn(i.nextSibling),i===null)break}return null}function xC(i,o,r){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=wn(i.nextSibling),i===null))return null;return i}function ay(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=wn(i.nextSibling),i===null))return null;return i}function Rd(i){return i.data==="$?"||i.data==="$~"}function Id(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function EC(i,o){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||r.readyState!=="loading")o();else{var u=function(){o(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function wn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Md=null;function uy(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(o===0)return wn(i.nextSibling);o--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||o++}i=i.nextSibling}return null}function cy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(o===0)return i;o--}else r!=="/$"&&r!=="/&"||o++}i=i.previousSibling}return null}function dy(i,o,r){switch(o=pa(r),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Rl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ku(i)}var Rn=new Map,fy=new Set;function ma(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var gi=K.d;K.d={f:SC,r:CC,D:TC,C:bC,L:NC,m:AC,X:RC,S:wC,M:IC};function SC(){var i=gi.f(),o=la();return i||o}function CC(i){var o=Bs(i);o!==null&&o.tag===5&&o.type==="form"?Rm(o):gi.r(i)}var yo=typeof document>"u"?null:document;function hy(i,o,r){var u=yo;if(u&&typeof o=="string"&&o){var m=En(o);m='link[rel="'+i+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),fy.has(m)||(fy.add(m),i={rel:i,crossOrigin:r,href:o},u.querySelector(m)===null&&(o=u.createElement("link"),Ht(o,"link",i),At(o),u.head.appendChild(o)))}}function TC(i){gi.D(i),hy("dns-prefetch",i,null)}function bC(i,o){gi.C(i,o),hy("preconnect",i,o)}function NC(i,o,r){gi.L(i,o,r);var u=yo;if(u&&i&&o){var m='link[rel="preload"][as="'+En(o)+'"]';o==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+En(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+En(r.imageSizes)+'"]')):m+='[href="'+En(i)+'"]';var v=m;switch(o){case"style":v=vo(i);break;case"script":v=_o(i)}Rn.has(v)||(i=x({rel:"preload",href:o==="image"&&r&&r.imageSrcSet?void 0:i,as:o},r),Rn.set(v,i),u.querySelector(m)!==null||o==="style"&&u.querySelector(Il(v))||o==="script"&&u.querySelector(Ml(v))||(o=u.createElement("link"),Ht(o,"link",i),At(o),u.head.appendChild(o)))}}function AC(i,o){gi.m(i,o);var r=yo;if(r&&i){var u=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+En(u)+'"][href="'+En(i)+'"]',v=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=_o(i)}if(!Rn.has(v)&&(i=x({rel:"modulepreload",href:i},o),Rn.set(v,i),r.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Ml(v)))return}u=r.createElement("link"),Ht(u,"link",i),At(u),r.head.appendChild(u)}}}function wC(i,o,r){gi.S(i,o,r);var u=yo;if(u&&i){var m=Hs(u).hoistableStyles,v=vo(i);o=o||"default";var S=m.get(v);if(!S){var C={loading:0,preload:null};if(S=u.querySelector(Il(v)))C.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},r),(r=Rn.get(v))&&Dd(i,r);var A=S=u.createElement("link");At(A),Ht(A,"link",i),A._p=new Promise(function(L,V){A.onload=L,A.onerror=V}),A.addEventListener("load",function(){C.loading|=1}),A.addEventListener("error",function(){C.loading|=2}),C.loading|=4,ga(S,o,u)}S={type:"stylesheet",instance:S,count:1,state:C},m.set(v,S)}}}function RC(i,o){gi.X(i,o);var r=yo;if(r&&i){var u=Hs(r).hoistableScripts,m=_o(i),v=u.get(m);v||(v=r.querySelector(Ml(m)),v||(i=x({src:i,async:!0},o),(o=Rn.get(m))&&kd(i,o),v=r.createElement("script"),At(v),Ht(v,"link",i),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function IC(i,o){gi.M(i,o);var r=yo;if(r&&i){var u=Hs(r).hoistableScripts,m=_o(i),v=u.get(m);v||(v=r.querySelector(Ml(m)),v||(i=x({src:i,async:!0,type:"module"},o),(o=Rn.get(m))&&kd(i,o),v=r.createElement("script"),At(v),Ht(v,"link",i),r.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},u.set(m,v))}}function py(i,o,r,u){var m=(m=ce.current)?ma(m):null;if(!m)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(o=vo(r.href),r=Hs(m).hoistableStyles,u=r.get(o),u||(u={type:"style",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=vo(r.href);var v=Hs(m).hoistableStyles,S=v.get(i);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,S),(v=m.querySelector(Il(i)))&&!v._p&&(S.instance=v,S.state.loading=5),Rn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Rn.set(i,r),v||MC(m,i,r,S.state))),o&&u===null)throw Error(s(528,""));return S}if(o&&u!==null)throw Error(s(529,""));return null;case"script":return o=r.async,r=r.src,typeof r=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=_o(r),r=Hs(m).hoistableScripts,u=r.get(o),u||(u={type:"script",instance:null,count:0,state:null},r.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function vo(i){return'href="'+En(i)+'"'}function Il(i){return'link[rel="stylesheet"]['+i+"]"}function my(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function MC(i,o,r,u){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=i.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),Ht(o,"link",r),At(o),i.head.appendChild(o))}function _o(i){return'[src="'+En(i)+'"]'}function Ml(i){return"script[async]"+i}function gy(i,o,r){if(o.count++,o.instance===null)switch(o.type){case"style":var u=i.querySelector('style[data-href~="'+En(r.href)+'"]');if(u)return o.instance=u,At(u),u;var m=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),At(u),Ht(u,"style",m),ga(u,r.precedence,i),o.instance=u;case"stylesheet":m=vo(r.href);var v=i.querySelector(Il(m));if(v)return o.state.loading|=4,o.instance=v,At(v),v;u=my(r),(m=Rn.get(m))&&Dd(u,m),v=(i.ownerDocument||i).createElement("link"),At(v);var S=v;return S._p=new Promise(function(C,A){S.onload=C,S.onerror=A}),Ht(v,"link",u),o.state.loading|=4,ga(v,r.precedence,i),o.instance=v;case"script":return v=_o(r.src),(m=i.querySelector(Ml(v)))?(o.instance=m,At(m),m):(u=r,(m=Rn.get(v))&&(u=x({},r),kd(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),At(m),Ht(m,"link",u),i.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,ga(u,r.precedence,i));return o.instance}function ga(i,o,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,v=m,S=0;S<u.length;S++){var C=u[S];if(C.dataset.precedence===o)v=C;else if(v!==m)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=r.nodeType===9?r.head:r,o.insertBefore(i,o.firstChild))}function Dd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function kd(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var ya=null;function yy(i,o,r){if(ya===null){var u=new Map,m=ya=new Map;m.set(r,u)}else m=ya,u=m.get(r),u||(u=new Map,m.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),m=0;m<r.length;m++){var v=r[m];if(!(v[Jo]||v[Pt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(o)||"";S=i+S;var C=u.get(S);C?C.push(v):u.set(S,[v])}}return u}function vy(i,o,r){i=i.ownerDocument||i,i.head.insertBefore(r,o==="title"?i.querySelector("head > title"):null)}function DC(i,o,r){if(r===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function _y(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function kC(i,o,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=vo(u.href),v=o.querySelector(Il(m));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=va.bind(i),o.then(i,i)),r.state.loading|=4,r.instance=v,At(v);return}v=o.ownerDocument||o,u=my(u),(m=Rn.get(m))&&Dd(u,m),v=v.createElement("link"),At(v);var S=v;S._p=new Promise(function(C,A){S.onload=C,S.onerror=A}),Ht(v,"link",u),r.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,o),(o=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=va.bind(i),o.addEventListener("load",r),o.addEventListener("error",r))}}var Ud=0;function UC(i,o){return i.stylesheets&&i.count===0&&xa(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&xa(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&Ud===0&&(Ud=62500*pC());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&xa(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Ud?50:800)+o);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function va(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xa(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var _a=null;function xa(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,_a=new Map,o.forEach(PC,i),_a=null,va.call(i))}function PC(i,o){if(!(o.state.loading&4)){var r=_a.get(i);if(r)var u=r.get(null);else{r=new Map,_a.set(i,r);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var S=m[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(r.set(S.dataset.precedence,S),u=S)}u&&r.set(null,u)}m=o.instance,S=m.getAttribute("data-precedence"),v=r.get(S)||u,v===u&&r.set(null,m),r.set(S,m),this.count++,u=va.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),v?v.parentNode.insertBefore(m,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),o.state.loading|=4}}var Dl={$$typeof:q,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function LC(i,o,r,u,m,v,S,C,A){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function xy(i,o,r,u,m,v,S,C,A,L,V,$){return i=new LC(i,o,r,S,A,L,V,$,C),o=1,v===!0&&(o|=24),v=fn(3,null,null,o),i.current=v,v.stateNode=i,o=hc(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:u,isDehydrated:r,cache:o},yc(v),i}function Ey(i){return i?(i=Ks,i):Ks}function Sy(i,o,r,u,m,v){m=Ey(m),u.context===null?u.context=m:u.pendingContext=m,u=Ui(o),u.payload={element:r},v=v===void 0?null:v,v!==null&&(u.callback=v),r=Pi(i,u,o),r!==null&&(rn(r,i,o),cl(r,i,o))}function Cy(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<o?r:o}}function Pd(i,o){Cy(i,o),(i=i.alternate)&&Cy(i,o)}function Ty(i){if(i.tag===13||i.tag===31){var o=ds(i,67108864);o!==null&&rn(o,i,67108864),Pd(i,67108864)}}function by(i){if(i.tag===13||i.tag===31){var o=yn();o=Iu(o);var r=ds(i,o);r!==null&&rn(r,i,o),Pd(i,o)}}var Ea=!0;function OC(i,o,r,u){var m=U.T;U.T=null;var v=K.p;try{K.p=2,Ld(i,o,r,u)}finally{K.p=v,U.T=m}}function BC(i,o,r,u){var m=U.T;U.T=null;var v=K.p;try{K.p=8,Ld(i,o,r,u)}finally{K.p=v,U.T=m}}function Ld(i,o,r,u){if(Ea){var m=Od(u);if(m===null)Sd(i,o,u,Sa,r),Ay(i,u);else if(GC(m,i,o,r,u))u.stopPropagation();else if(Ay(i,u),o&4&&-1<HC.indexOf(i)){for(;m!==null;){var v=Bs(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=cn(v.pendingLanes);if(S!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;S;){var A=1<<31-ft(S);C.entanglements[1]|=A,S&=~A}$n(v),(Je&6)===0&&(sa=Ft()+500,Nl(0))}}break;case 31:case 13:C=ds(v,2),C!==null&&rn(C,v,2),la(),Pd(v,2)}if(v=Od(u),v===null&&Sd(i,o,u,Sa,r),v===m)break;m=v}m!==null&&u.stopPropagation()}else Sd(i,o,u,null,r)}}function Od(i){return i=Hu(i),Bd(i)}var Sa=null;function Bd(i){if(Sa=null,i=Os(i),i!==null){var o=a(i);if(o===null)i=null;else{var r=o.tag;if(r===13){if(i=c(o),i!==null)return i;i=null}else if(r===31){if(i=h(o),i!==null)return i;i=null}else if(r===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Sa=i,null}function Ny(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Z()){case Ie:return 2;case Ke:return 8;case Et:case jt:return 32;case vn:return 268435456;default:return 32}default:return 32}}var Hd=!1,ji=null,Ji=null,$i=null,kl=new Map,Ul=new Map,Ki=[],HC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ay(i,o){switch(i){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":kl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(o.pointerId)}}function Pl(i,o,r,u,m,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:r,eventSystemFlags:u,nativeEvent:v,targetContainers:[m]},o!==null&&(o=Bs(o),o!==null&&Ty(o)),i):(i.eventSystemFlags|=u,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function GC(i,o,r,u,m){switch(o){case"focusin":return ji=Pl(ji,i,o,r,u,m),!0;case"dragenter":return Ji=Pl(Ji,i,o,r,u,m),!0;case"mouseover":return $i=Pl($i,i,o,r,u,m),!0;case"pointerover":var v=m.pointerId;return kl.set(v,Pl(kl.get(v)||null,i,o,r,u,m)),!0;case"gotpointercapture":return v=m.pointerId,Ul.set(v,Pl(Ul.get(v)||null,i,o,r,u,m)),!0}return!1}function wy(i){var o=Os(i.target);if(o!==null){var r=a(o);if(r!==null){if(o=r.tag,o===13){if(o=c(r),o!==null){i.blockedOn=o,Vh(i.priority,function(){by(r)});return}}else if(o===31){if(o=h(r),o!==null){i.blockedOn=o,Vh(i.priority,function(){by(r)});return}}else if(o===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ca(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var r=Od(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);Bu=u,r.target.dispatchEvent(u),Bu=null}else return o=Bs(r),o!==null&&Ty(o),i.blockedOn=r,!1;o.shift()}return!0}function Ry(i,o,r){Ca(i)&&r.delete(o)}function qC(){Hd=!1,ji!==null&&Ca(ji)&&(ji=null),Ji!==null&&Ca(Ji)&&(Ji=null),$i!==null&&Ca($i)&&($i=null),kl.forEach(Ry),Ul.forEach(Ry)}function Ta(i,o){i.blockedOn===o&&(i.blockedOn=null,Hd||(Hd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qC)))}var ba=null;function Iy(i){ba!==i&&(ba=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ba===i&&(ba=null);for(var o=0;o<i.length;o+=3){var r=i[o],u=i[o+1],m=i[o+2];if(typeof u!="function"){if(Bd(u||r)===null)continue;break}var v=Bs(r);v!==null&&(i.splice(o,3),o-=3,Oc(v,{pending:!0,data:m,method:r.method,action:u},u,m))}}))}function xo(i){function o(A){return Ta(A,i)}ji!==null&&Ta(ji,i),Ji!==null&&Ta(Ji,i),$i!==null&&Ta($i,i),kl.forEach(o),Ul.forEach(o);for(var r=0;r<Ki.length;r++){var u=Ki[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Ki.length&&(r=Ki[0],r.blockedOn===null);)wy(r),r.blockedOn===null&&Ki.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var m=r[u],v=r[u+1],S=m[en]||null;if(typeof v=="function")S||Iy(r);else if(S){var C=null;if(v&&v.hasAttribute("formAction")){if(m=v,S=v[en]||null)C=S.formAction;else if(Bd(m)!==null)continue}else C=S.action;typeof C=="function"?r[u+1]=C:(r.splice(u,3),u-=3),Iy(r)}}}function My(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return m=S})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function Gd(i){this._internalRoot=i}Na.prototype.render=Gd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var r=o.current,u=yn();Sy(r,u,i,o,null,null)},Na.prototype.unmount=Gd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Sy(i.current,2,null,i,null,null),la(),o[Ls]=null}};function Na(i){this._internalRoot=i}Na.prototype.unstable_scheduleHydration=function(i){if(i){var o=qh();i={blockedOn:null,target:i,priority:o};for(var r=0;r<Ki.length&&o!==0&&o<Ki[r].priority;r++);Ki.splice(r,0,i),r===0&&wy(i)}};var Dy=e.version;if(Dy!=="19.2.4")throw Error(s(527,Dy,"19.2.4"));K.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=p(o),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var VC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Aa.isDisabled&&Aa.supportsFiber)try{_n=Aa.inject(VC),Ce=Aa}catch{}}return Ol.createRoot=function(i,o){if(!l(i))throw Error(s(299));var r=!1,u="",m=Hm,v=Gm,S=qm;return o!=null&&(o.unstable_strictMode===!0&&(r=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=xy(i,1,!1,null,null,r,u,null,m,v,S,My),i[Ls]=o.current,Ed(i),new Gd(o)},Ol.hydrateRoot=function(i,o,r){if(!l(i))throw Error(s(299));var u=!1,m="",v=Hm,S=Gm,C=qm,A=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(S=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError),r.formState!==void 0&&(A=r.formState)),o=xy(i,1,!0,o,r??null,u,m,A,v,S,C,My),o.context=Ey(null),r=o.current,u=yn(),u=Iu(u),m=Ui(u),m.callback=null,Pi(r,m,u),r=u,o.current.lanes=r,jo(o,r),$n(o),i[Ls]=o.current,Ed(i),new Na(o)},Ol.version="19.2.4",Ol}var Vy;function ZC(){if(Vy)return Fd.exports;Vy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fd.exports=WC(),Fd.exports}var eT=ZC();const tT=m_(eT),nT=({squares:t,pendingSelection:e,settings:n,onSquareClick:s,participants:l,onCheckout:a,onSetPendingSelection:c,activePool:h})=>{var Ge,U,K,le,Q,re;const[g,p]=W.useState(!1),[_,x]=W.useState(1),E=W.useRef(null),T=W.useRef(null);W.useEffect(()=>{const b=()=>{if(E.current){const z=E.current,te=z.querySelector(".grid-inner-content");if(te){const ae=z.clientWidth-40,ce=te.offsetWidth;if(ce>0){const fe=ae/ce;x(Math.min(1,parseFloat(fe.toFixed(2))))}}}},D=setTimeout(b,300);return window.addEventListener("resize",b),()=>{clearTimeout(D),window.removeEventListener("resize",b)}},[]);const N=W.useMemo(()=>{const b={};return(l||[]).forEach(D=>{b[D.id]=D}),b},[l]),M=(b,D)=>{const z=b==="row"?n.rowNumbers:n.colNumbers;return z&&z.length>0?z[D]:"?"},I=W.useMemo(()=>Array.from({length:10},(b,D)=>(t||[]).filter(z=>z.row===D)),[t]),H=W.useMemo(()=>{const b=new Set,{scores:D=[]}=h,{rowNumbers:z,colNumbers:te}=n;return(D||[]).forEach(ae=>{const ce=ae.teamAScore%10,fe=ae.teamBScore%10,Ae=(z||[]).indexOf(ce),w=(te||[]).indexOf(fe);if(Ae!==-1&&w!==-1){const j=t.find(ee=>ee.row===Ae&&ee.col===w);j&&b.add(j.id)}}),b},[h.scores,t,n.rowNumbers,n.colNumbers]),F=W.useMemo(()=>{const b=t.filter(ce=>ce.assigned).length,D=n.costPerBox||10,z=t.reduce((ce,fe)=>ce+(fe.paidAmount||0),0),te=100*D,ae=b*D;return{assigned:b,remaining:100-b,totalRaised:z,totalCommitted:ae,potentialTotal:te}},[t,n.costPerBox]),q=W.useMemo(()=>{const{payouts:b,costPerBox:D}=n,z=100*D;if(b.mode==="scoreChange")return{isScoreChange:!0,multiplier:b.scoreChangeMultiplier,perChange:D*b.scoreChangeMultiplier,charity:b.charityPayoutType==="fixed"?b.charityFixedAmount:z*(b.charityPercent/100)};let te=0;b.charityPayoutType==="fixed"?te=b.charityFixedAmount||0:te=z*(b.charityPercent/100);const ae=z-te,ce=fe=>b.standardPayoutType==="fixed"?fe:ae*(fe/100);return{isScoreChange:!1,q1:ce(b.standardSplits.q1),half:ce(b.standardSplits.half),q3:ce(b.standardSplits.q3),final:ce(b.standardSplits.final),charity:te}},[n]),J=W.useMemo(()=>{const{scores:b=[]}=h,{payouts:D,costPerBox:z,rowNumbers:te,colNumbers:ae}=n,ce=100*z;let fe=0;D.charityPayoutType==="fixed"?fe=D.charityFixedAmount||0:fe=ce*(D.charityPercent/100);const Ae=ce-fe;return(b||[]).map((w,j)=>{const ee=w.teamAScore%10,pe=w.teamBScore%10,ye=(te||[]).indexOf(ee),De=(ae||[]).indexOf(pe),Re=t.find(dt=>dt.row===ye&&dt.col===De);let Ve=0;if(D.mode==="standard")if(D.standardPayoutType==="fixed")Ve=D.standardSplits[w.label.toLowerCase()]||0;else{const dt=D.standardSplits[w.label.toLowerCase()]||0;Ve=Ae*(dt/100)}else{const dt=w.teamAScore===0&&w.teamBScore===0,We=b.slice(0,j).some(Fe=>Fe.teamAScore===0&&Fe.teamBScore===0);Ve=dt&&!We?z:z*(D.scoreChangeMultiplier||3)}return{label:w.label,score:`${w.teamAScore}-${w.teamBScore}`,winner:Re!=null&&Re.assigned?Re.alias:Re?"UNCLAIMED":"PENDING",payout:Ve}}).reverse()},[h.scores,n,t]),se=()=>{window.print(),p(!1)},B=()=>{if(E.current){const b=E.current.innerHTML;window.openPrintWindow&&window.openPrintWindow(b)}p(!1)},X=()=>{const b=["Square #","Row Num","Col Num","Player Alias","Real Name","Email","Phone","Status"],D=(t||[]).map(fe=>{const Ae=fe.participantId?N[fe.participantId]:null;return[fe.id+1,M("row",fe.row),M("col",fe.col),fe.assigned?fe.alias:"Unassigned",Ae?Ae.name:"",Ae?Ae.email:"",Ae?Ae.phone:"",fe.paidAmount>=n.costPerBox?"Paid":fe.assigned?"Pending":"Available"]});D.sort((fe,Ae)=>{const w=String(fe[6]||"").replace(/\D/g,""),j=String(Ae[6]||"").replace(/\D/g,"");return!w&&j?1:w&&!j?-1:w.localeCompare(j)});const z=[b,...D].map(fe=>fe.map(Ae=>`"${String(Ae).replace(/"/g,'""')}"`).join(",")).join(`
`),te=new Blob([z],{type:"text/csv;charset=utf-8;"}),ae=URL.createObjectURL(te),ce=document.createElement("a");ce.setAttribute("href",ae),ce.setAttribute("download",`grid_mapping_${new Date().toISOString().split("T")[0]}.csv`),ce.click(),p(!1)},ve=b=>{if(b.touches.length===2){const D=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY);T.current=D}},oe=b=>{if(b.touches.length===2&&T.current!==null){const D=Math.hypot(b.touches[0].pageX-b.touches[1].pageX,b.touches[0].pageY-b.touches[1].pageY),z=D/T.current;x(te=>{const ae=Math.min(Math.max(.1,te*z),2.5);return parseFloat(ae.toFixed(2))}),T.current=D}},de=()=>{T.current=null},ge="w-28 md:w-40",Se="w-14 md:w-28";return y.jsxs("div",{className:"flex flex-col items-center w-full relative",children:[y.jsx("div",{ref:E,className:"w-full overflow-auto max-h-[85vh] pb-8 mb-4 touch-pan-x touch-pan-y custom-scrollbar print:overflow-visible relative flex justify-center",onTouchStart:ve,onTouchMove:oe,onTouchEnd:de,children:y.jsx("div",{className:"inline-block p-4 print:p-0 min-w-max transition-transform duration-300 origin-top",style:{transform:`scale(${_})`},children:y.jsxs("div",{className:"grid-inner-content flex flex-col",children:[y.jsxs("div",{className:"flex items-end",children:[y.jsx("div",{className:"min-w-[136px] md:min-w-[272px] flex-shrink-0"}),y.jsxs("div",{className:"flex flex-col items-center w-full",children:[y.jsxs("div",{className:"bg-indigo-900 border-2 border-indigo-900 py-6 rounded-t-[3rem] shadow-sm mb-0 w-full flex items-center justify-center gap-12",children:[n.teamBLogo?y.jsx("img",{src:n.teamBLogo,className:"h-8 md:h-16 w-auto object-contain drop-shadow-lg",alt:"Team B Logo"}):y.jsx("i",{className:"fas fa-helmet-safety text-white/50 text-xl md:text-3xl"}),y.jsx("span",{className:"text-2xl md:text-5xl lg:text-6xl font-black text-white uppercase tracking-[0.2em] whitespace-nowrap leading-tight text-center max-w-[50%]",children:n.teamB||"AFC"}),n.teamBLogo?y.jsx("img",{src:n.teamBLogo,className:"h-8 md:h-16 w-auto object-contain drop-shadow-lg",alt:"Team B Logo"}):y.jsx("i",{className:"fas fa-helmet-safety text-white/50 text-xl md:text-3xl"})]}),y.jsx("div",{className:"flex gap-[1px] md:gap-[2px] w-full",children:Array.from({length:10}).map((b,D)=>y.jsx("div",{className:`${ge} h-10 md:h-14 flex items-center justify-center font-black text-sm md:text-2xl text-indigo-900 bg-indigo-50 rounded-t-lg border-b border-indigo-200`,children:M("col",D)},D))})]})]}),y.jsxs("div",{className:"flex",children:[y.jsxs("div",{className:"w-20 md:w-40 flex flex-col items-center justify-center bg-indigo-900 rounded-l-[3rem] shadow-lg mr-1 md:mr-2 flex-shrink-0 py-24 px-1",children:[n.teamALogo?y.jsx("img",{src:n.teamALogo,className:"w-18 md:w-36 h-auto object-contain drop-shadow-lg mb-16 -rotate-90",alt:"Team A Logo"}):y.jsx("i",{className:"fas fa-helmet-safety text-white/30 text-lg md:text-3xl mb-16"}),y.jsx("span",{className:"text-xl md:text-4xl lg:text-5xl font-black text-white uppercase tracking-[0.15em] whitespace-nowrap [writing-mode:vertical-lr] rotate-180 leading-none",children:n.teamA||"NFC"}),n.teamALogo?y.jsx("img",{src:n.teamALogo,className:"w-18 md:w-36 h-auto object-contain drop-shadow-lg mt-16 -rotate-90",alt:"Team A Logo"}):y.jsx("i",{className:"fas fa-helmet-safety text-white/30 text-lg md:text-3xl mt-16"})]}),y.jsx("div",{className:"flex flex-col gap-[1px] md:gap-[2px] mr-[1px] md:mr-[2px] flex-shrink-0",children:Array.from({length:10}).map((b,D)=>y.jsx("div",{className:`axis-label h-24 md:h-36 ${Se} flex items-center justify-center font-black text-sm md:text-2xl text-white bg-indigo-800 border-r border-indigo-900/50`,children:M("row",D)},D))}),y.jsx("div",{className:"grid-body-container flex flex-col gap-[1px] md:gap-[2px] bg-indigo-900 border-2 md:border-4 border-indigo-900 rounded-tr-lg rounded-br-lg overflow-hidden shadow-2xl",children:I.map((b,D)=>y.jsx("div",{className:"flex gap-[1px] md:gap-[2px]",children:b.map(z=>{const te=(n==null?void 0:n.costPerBox)||10,ae=z.paidAmount||0,ce=ae>=te&&te>0,fe=ae>0&&!ce,Ae=e.includes(z.id),w=z.alias.slice(0,16).toUpperCase(),j=z.participantId?N[z.participantId]:null,ee=j?j.name:"",pe=H.has(z.id);return y.jsxs("div",{title:z.assigned?`Player: ${ee}
Alias: ${w}`:`Box #${z.id+1}`,className:`group square-box cursor-pointer ${ge} h-24 md:h-36 flex flex-col items-center justify-center p-2 transition-all relative ${pe?"bg-yellow-100 !border-yellow-300":z.assigned?ce?"bg-green-50":fe?"bg-orange-50":"bg-indigo-50":Ae?"bg-indigo-600 ring-4 ring-indigo-400/50 scale-95 z-10 shadow-inner":n!=null&&n.isLocked?"bg-gray-100":"bg-white"}`,onClick:()=>s(z.id),children:[y.jsx("span",{className:`absolute inset-0 flex items-center justify-center text-[24px] md:text-[48px] font-black pointer-events-none transition-opacity ${Ae?"text-white/10":"text-indigo-950/10"} ${z.assigned?"opacity-20":""}`,children:z.id+1}),z.assigned?y.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full relative z-10 text-center overflow-hidden",children:[y.jsx("span",{className:`text-[10px] md:text-[14px] font-black ${ce?"text-green-600":"text-indigo-950"} uppercase leading-tight line-clamp-3 break-words w-full group-hover:hidden px-1`,children:w}),y.jsx("span",{className:`hidden group-hover:block text-[9px] md:text-[12px] font-black ${ce?"text-green-700":"text-indigo-800"} uppercase leading-tight line-clamp-3 break-words w-full animate-in fade-in duration-200 px-1 italic`,children:ee})]}):Ae?y.jsx("div",{className:"animate-pulse no-print relative z-10",children:y.jsx("i",{className:"fas fa-shopping-cart text-white text-[12px] md:text-[18px]"})}):null]},z.id)})},D))})]})]})})}),y.jsxs("div",{className:"grid-controls w-full max-w-5xl flex flex-col md:flex-row items-center justify-between mb-8 print-hidden px-4 gap-4 z-[90] relative",children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[y.jsxs("div",{className:"flex items-center gap-2 relative",children:[y.jsxs("button",{type:"button",onClick:()=>p(!g),className:"bg-white text-indigo-900 px-6 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-indigo-50 transition-all flex items-center gap-3 border-2 border-indigo-100 shadow-xl cursor-pointer active:scale-95 select-none",children:[y.jsx("i",{className:"fas fa-file-export text-indigo-600"})," Export & Print",y.jsx("i",{className:`fas fa-chevron-${g?"up":"down"} text-[8px] transition-transform`})]}),g&&y.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white rounded-2xl shadow-2xl border border-indigo-50 p-2 animate-in slide-in-from-top-2 duration-200 z-[100]",children:[y.jsxs("button",{onClick:se,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[y.jsx("i",{className:"fas fa-desktop text-indigo-400 text-xs"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Browser Print"}),y.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Standard system dialog"})]})]}),y.jsxs("button",{onClick:B,className:"w-full text-left px-4 py-3 hover:bg-indigo-50 rounded-xl flex items-center gap-3 transition-colors",children:[y.jsx("i",{className:"fas fa-window-maximize text-indigo-400 text-xs"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Isolated Print View"}),y.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Best for mobile & tablets"})]})]}),y.jsx("div",{className:"h-[1px] bg-indigo-50 my-1"}),y.jsxs("button",{onClick:X,className:"w-full text-left px-4 py-3 hover:bg-green-50 rounded-xl flex items-center gap-3 transition-colors",children:[y.jsx("i",{className:"fas fa-file-csv text-green-500 text-xs"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase",children:"Export Grid CSV"}),y.jsx("p",{className:"text-[8px] text-gray-400 font-bold uppercase",children:"Download mapping data"})]})]})]})]}),y.jsxs("div",{className:"flex items-center gap-1 bg-white p-2 rounded-2xl border-2 border-indigo-50 shadow-sm print-hidden",children:[y.jsx("button",{onClick:()=>x(b=>Math.max(.1,b-.1)),className:"w-10 h-10 flex items-center justify-center bg-gray-50 rounded-xl text-indigo-900 hover:bg-indigo-50",children:y.jsx("i",{className:"fas fa-minus text-[10px]"})}),y.jsx("div",{className:"px-3 min-w-[60px] text-center",children:y.jsxs("span",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[Math.round(_*100),"%"]})}),y.jsx("button",{onClick:()=>x(b=>Math.min(2.5,b+.1)),className:"w-10 h-10 flex items-center justify-center bg-gray-50 rounded-xl text-indigo-900 hover:bg-indigo-50",children:y.jsx("i",{className:"fas fa-plus text-[10px]"})}),y.jsx("button",{onClick:()=>x(1),className:"ml-1 px-3 py-2 text-[8px] font-black uppercase text-indigo-400",children:"1:1"})]})]}),e.length>0&&y.jsxs("button",{onClick:a,className:"bg-green-600 text-white px-10 py-4 rounded-2xl text-[12px] font-black uppercase tracking-[0.2em] hover:scale-105 active:scale-95 transition-all flex items-center gap-3 shadow-2xl",children:[y.jsx("i",{className:"fas fa-shopping-cart"})," Claim ",e.length," Box",e.length>1?"es":""]})]}),y.jsx("div",{className:"w-full max-w-6xl mb-6 px-4 print-hidden",children:y.jsxs("div",{className:"bg-indigo-900 rounded-[2rem] p-6 shadow-2xl flex flex-col lg:flex-row items-center justify-between gap-6 border-b-4 border-indigo-950 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 pointer-events-none",children:y.jsx("i",{className:"fas fa-football-ball text-[120px] rotate-12"})}),y.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto z-10",children:[y.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center text-white flex-shrink-0",children:y.jsx("i",{className:"fas fa-hand-holding-heart text-xl"})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-indigo-300 text-[9px] font-black uppercase tracking-widest",children:"Charity Impact Goal"}),y.jsxs("h3",{className:"text-xl font-black text-white uppercase leading-none mt-1 whitespace-nowrap",children:["$",F.totalRaised," ",y.jsxs("span",{className:"text-indigo-400",children:["/ $",F.potentialTotal," Raised"]})]})]})]}),y.jsx("div",{className:"flex-grow flex flex-wrap justify-center gap-2 md:gap-4 px-4 border-l border-r border-white/5 z-10",children:q.isScoreChange?y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"px-4 py-2 bg-green-500/10 rounded-xl border border-green-500/20 text-center",children:[y.jsx("span",{className:"text-[8px] font-black text-green-400 uppercase block",children:"Score Change Prize"}),y.jsxs("span",{className:"text-sm font-black text-white",children:["$",q.perChange," ",y.jsxs("span",{className:"text-[10px] text-green-400",children:["(",q.multiplier,"x)"]})]})]}),y.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Charity"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(Ge=q.charity)==null?void 0:Ge.toFixed(0)]})]})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Q1"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(U=q.q1)==null?void 0:U.toFixed(0)]})]}),y.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Half"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(K=q.half)==null?void 0:K.toFixed(0)]})]}),y.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Q3"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(le=q.q3)==null?void 0:le.toFixed(0)]})]}),y.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-indigo-400 uppercase tracking-widest",children:"Final"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-white",children:["$",(Q=q.final)==null?void 0:Q.toFixed(0)]})]}),y.jsx("div",{className:"w-[1px] h-6 bg-white/10 self-center"}),y.jsxs("div",{className:"flex flex-col items-center",children:[y.jsx("span",{className:"text-[7px] font-black text-green-400 uppercase tracking-widest",children:"Charity"}),y.jsxs("span",{className:"text-xs md:text-sm font-black text-green-400",children:["$",(re=q.charity)==null?void 0:re.toFixed(0)]})]})]})}),y.jsxs("div",{className:"flex flex-wrap justify-center md:justify-end gap-3 flex-shrink-0 z-10",children:[y.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[y.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Money Committed"}),y.jsxs("span",{className:"text-base font-black text-indigo-200",children:["$",F.totalCommitted]})]}),y.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[y.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Raised So Far"}),y.jsxs("span",{className:"text-base font-black text-white",children:["$",F.totalRaised]})]}),y.jsxs("div",{className:"px-4 py-2 bg-white/5 rounded-2xl border border-white/10 flex flex-col items-center min-w-[90px] backdrop-blur-sm",children:[y.jsx("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-widest",children:"Boxes Left"}),y.jsx("span",{className:"text-base font-black text-white",children:F.remaining})]}),y.jsxs("div",{className:"px-4 py-2 bg-white/10 rounded-2xl border border-white/20 flex flex-col items-center min-w-[90px] backdrop-blur-sm bg-indigo-500/10",children:[y.jsx("span",{className:"text-[8px] font-black text-indigo-200 uppercase tracking-widest",children:"Cost/Box"}),y.jsxs("span",{className:"text-base font-black text-white",children:["$",n.costPerBox]})]})]})]})}),y.jsx("div",{className:"status-bar w-full max-w-2xl mb-6 px-4 print-hidden",children:y.jsxs("div",{className:"flex items-center justify-between bg-white border border-indigo-100 rounded-2xl p-4 shadow-sm",children:[y.jsxs("div",{className:"flex flex-col",children:[y.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Contest Availability"}),y.jsxs("p",{className:"text-xl font-black text-indigo-900 uppercase leading-none mt-1",children:[F.remaining," ",y.jsx("span",{className:"text-sm font-bold text-gray-400 ml-1",children:"Boxes Left"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("div",{className:"h-2 w-32 bg-gray-100 rounded-full overflow-hidden self-center",children:y.jsx("div",{className:`h-full transition-all duration-1000 ${F.remaining<10?"bg-red-500":"bg-indigo-500"}`,style:{width:`${F.assigned}%`}})}),y.jsxs("span",{className:"text-[10px] font-black text-indigo-900",children:[F.assigned,"% Full"]})]})]})}),y.jsx("div",{className:"w-full max-w-4xl space-y-6 px-4 mb-12",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"bg-indigo-50/50 p-6 md:p-8 rounded-[2rem] border border-indigo-100 backdrop-blur-sm print-hidden",children:[y.jsxs("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-6 flex items-center gap-2",children:[y.jsx("i",{className:"fas fa-info-circle text-indigo-400"})," Box Status Legend"]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 rounded-xl border border-green-100",children:[y.jsx("i",{className:"fas fa-check-circle text-green-600"}),y.jsx("span",{className:"font-black text-green-900 uppercase text-[9px]",children:"Fully Paid"})]}),y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-orange-50 rounded-xl border border-orange-100",children:[y.jsx("i",{className:"fas fa-dot-circle text-orange-500"}),y.jsx("span",{className:"font-black text-orange-900 uppercase text-[9px]",children:"Partial"})]}),y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-100 rounded-xl border border-yellow-200",children:[y.jsx("i",{className:"fas fa-trophy text-yellow-600"}),y.jsx("span",{className:"font-black text-yellow-900 uppercase text-[9px]",children:"Winner"})]}),y.jsxs("div",{className:"flex items-center gap-2 p-3 bg-indigo-600 rounded-xl border border-indigo-700",children:[y.jsx("i",{className:"fas fa-shopping-cart text-white"}),y.jsx("span",{className:"font-black text-white uppercase text-[9px]",children:"In Cart"})]})]})]}),y.jsxs("div",{className:"bg-white border-2 border-green-100 p-6 md:p-8 rounded-[2rem] shadow-sm relative overflow-hidden",children:[y.jsx("div",{className:"absolute -top-4 -right-4 opacity-5 rotate-12",children:y.jsx("i",{className:"fas fa-trophy text-6xl text-green-600"})}),y.jsxs("h3",{className:"font-black text-indigo-900 uppercase tracking-tight text-xs md:text-sm mb-6 flex items-center gap-2 relative z-10",children:[y.jsx("i",{className:"fas fa-trophy text-green-500"})," Live Winner Breakdown"]}),J.length===0?y.jsx("div",{className:"h-24 flex flex-col items-center justify-center border-2 border-dashed border-gray-100 rounded-2xl",children:y.jsx("p",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Awaiting Kickoff"})}):y.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto scrollbar-hide",children:J.map((b,D)=>y.jsxs("div",{className:`p-3 rounded-xl flex items-center justify-between border-b last:border-0 ${D===0?"bg-green-50 border-green-200":"bg-gray-50 border-gray-100"}`,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("span",{className:"text-[8px] font-black uppercase text-indigo-400 w-12",children:b.label}),y.jsx("span",{className:"text-xs font-black text-indigo-900",children:b.winner})]}),y.jsxs("div",{className:"text-right",children:[y.jsxs("p",{className:"text-[10px] font-black text-gray-950",children:["$",b.payout.toFixed(0)]}),y.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase leading-none mt-0.5",children:["Score: ",b.score]})]})]},D))})]})]})})]})},iT=({squares:t,participants:e,settings:n,onUpdateSquare:s,onUpdateParticipant:l,onUnassignSquare:a,onClearUserBoxes:c,onApplyPayment:h,onEditPayment:g,onDeletePayment:p})=>{const[_,x]=W.useState(""),[E,T]=W.useState(null),[N,M]=W.useState(null),[I,H]=W.useState(null),[F,q]=W.useState(null),[J,se]=W.useState(null),[B,X]=W.useState(""),[ve,oe]=W.useState("Cash"),[de,ge]=W.useState(""),[Se,ie]=W.useState({name:"",email:"",phone:"",alias:""}),be=(n==null?void 0:n.costPerBox)||10,Ge=W.useMemo(()=>e||[],[e]),U=W.useMemo(()=>t||[],[t]),K=W.useMemo(()=>Ge.map(w=>{const j=U.filter(ye=>ye.participantId===w.id),ee=(w.paymentHistory||[]).reduce((ye,De)=>ye+De.amount,0),pe=j.length*be;return{...w,boxCount:j.length,totalPaid:ee,totalOwed:pe,squareIds:j.map(ye=>ye.id)}}).sort((w,j)=>(w.alias||"").localeCompare(j.alias||"")),[U,Ge,be]),le=W.useMemo(()=>{const w=[];return K.forEach(j=>{(j.paymentHistory||[]).forEach(ee=>{w.push({pAlias:j.alias,pName:j.name,pEmail:j.email,pPhone:j.phone,pId:j.id,t:ee})})}),w.sort((j,ee)=>ee.t.timestamp-j.t.timestamp)},[K]),Q=W.useMemo(()=>{const w=U.filter(ee=>ee.assigned).length*be,j=K.reduce((ee,pe)=>ee+(pe.totalPaid||0),0);return{totalDue:w,totalCollected:j,outstanding:Math.max(0,w-j),percentCollected:w>0?j/w*100:0}},[U,be,K]),re=K.filter(w=>(w.name||"").toLowerCase().includes(_.toLowerCase())||(w.alias||"").toLowerCase().includes(_.toLowerCase())),b=()=>{if(le.length===0)return;const w=["Timestamp","Alias","Full Name","Email","Phone","Amount","Method"],j=le.map(({pAlias:Re,pName:Ve,pEmail:dt,pPhone:We,t:Fe})=>[new Date(Fe.timestamp).toLocaleString().replace(",",""),Re,Ve,dt,We,Fe.amount.toFixed(2),Fe.method]),ee=[w,...j].map(Re=>Re.join(",")).join(`
`),pe=new Blob([ee],{type:"text/csv;charset=utf-8;"}),ye=URL.createObjectURL(pe),De=document.createElement("a");De.setAttribute("href",ye),De.setAttribute("download",`payouts_audit_${new Date().toISOString().split("T")[0]}.csv`),De.click()},D=w=>{const j=Math.max(0,(w.totalOwed||0)-(w.totalPaid||0));T(w),se(null),X(j>0?j.toString():""),oe("Cash"),ge("")},z=(w,j)=>{T(w),se(j.id),X(j.amount.toString()),oe(j.method),ge(j.note||"")},te=w=>{q(w),ie({name:w.name,email:w.email,phone:w.phone,alias:w.alias.toUpperCase()})},ae=w=>{if(w.preventDefault(),!E)return;const j=parseFloat(B);!isNaN(j)&&j>=0&&(J?g(E.id,J,j,ve,de):h(E.id,j,ve,de),T(null),se(null),ge(""))},ce=w=>{w.preventDefault(),F&&(l(F.id,{...Se,alias:Se.alias.toUpperCase()}),q(null))},fe=()=>{!E||!J||window.confirm(`Delete this $${B} entry for ${E.alias}?`)&&(p(E.id,J),T(null),se(null))},Ae=w=>{const j=w.replace(/[^\d]/g,""),ee=j.length;return ee<4?j:ee<7?`(${j.slice(0,3)}) ${j.slice(3)}`:`(${j.slice(0,3)}) ${j.slice(3,6)}-${j.slice(6,10)}`};return y.jsxs("div",{className:"space-y-6 md:space-y-12 pb-24",children:[y.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6",children:[y.jsxs("div",{className:"bg-indigo-900 p-4 md:p-6 rounded-2xl md:rounded-3xl text-white shadow-xl",children:[y.jsx("p",{className:"text-indigo-300 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Total Pledged"}),y.jsxs("p",{className:"text-xl md:text-4xl font-black",children:["$",Q.totalDue]})]}),y.jsxs("div",{className:"bg-white border-2 border-green-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[y.jsx("p",{className:"text-green-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Collected"}),y.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",Q.totalCollected]})]}),y.jsxs("div",{className:"bg-white border-2 border-orange-500/10 p-4 md:p-6 rounded-2xl md:rounded-3xl shadow-lg",children:[y.jsx("p",{className:"text-orange-600 text-[8px] md:text-xs font-black uppercase tracking-widest mb-1",children:"Outstanding"}),y.jsxs("p",{className:"text-xl md:text-4xl font-black text-gray-900",children:["$",Q.outstanding]})]}),y.jsxs("div",{className:"bg-indigo-50 p-4 md:p-6 rounded-2xl md:rounded-3xl flex items-center justify-center gap-2",children:[y.jsxs("span",{className:"text-xl md:text-2xl font-black text-indigo-900",children:[Math.round(Q.percentCollected),"%"]}),y.jsxs("span",{className:"text-[7px] md:text-[9px] font-black text-gray-400 uppercase leading-none",children:["Goal",y.jsx("br",{}),"Progress"]})]})]}),y.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl md:rounded-[2.5rem] overflow-hidden shadow-xl",children:[y.jsxs("div",{className:"p-4 md:p-8 border-b bg-gray-50 flex flex-col md:flex-row justify-between items-center gap-4",children:[y.jsx("h3",{className:"text-lg md:text-xl font-black text-gray-900 uppercase",children:"Participant Roster"}),y.jsx("div",{className:"relative w-full md:w-64",children:y.jsx("input",{type:"text",placeholder:"Filter names...",value:_,onChange:w=>x(w.target.value),className:"w-full pl-4 pr-4 py-2 bg-white border border-gray-200 rounded-xl text-sm outline-none focus:border-indigo-500"})})]}),y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-left",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-gray-50 text-[8px] md:text-[10px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100",children:[y.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Player"}),y.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5",children:"Money Status"}),y.jsx("th",{className:"px-4 md:px-8 py-3 md:py-5 text-right",children:"Actions"})]})}),y.jsx("tbody",{className:"divide-y divide-gray-50",children:re.map(w=>{const j=Math.max(0,(w.totalOwed||0)-(w.totalPaid||0));return y.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors",children:[y.jsxs("td",{className:"px-4 md:px-8 py-4",children:[y.jsx("p",{className:"font-black text-xs md:text-sm text-gray-900 truncate max-w-[120px]",children:w.alias.toUpperCase()||"GUEST"}),y.jsxs("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:[w.boxCount||0," Boxes"]})]}),y.jsx("td",{className:"px-4 md:px-8 py-4",children:y.jsxs("div",{className:"flex flex-col",children:[y.jsxs("span",{className:`text-xs md:text-sm font-black ${j===0?"text-green-600":"text-indigo-900"}`,children:["$",w.totalPaid||0]}),j>0&&y.jsxs("span",{className:"text-[8px] text-red-500 font-bold uppercase",children:["Due: $",j]})]})}),y.jsx("td",{className:"px-4 md:px-8 py-4 text-right",children:y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:()=>H(w),className:"bg-orange-50 text-orange-600 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-orange-500 hover:text-white transition-all shadow-sm",title:"Manage Boxes",children:y.jsx("i",{className:"fas fa-th text-xs"})}),y.jsx("button",{onClick:()=>te(w),className:"bg-gray-100 text-gray-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-indigo-900 hover:text-white transition-all shadow-sm",title:"Edit Profile",children:y.jsx("i",{className:"fas fa-user-edit text-xs"})}),y.jsx("button",{onClick:()=>M(w),className:"bg-indigo-50 text-indigo-500 w-10 h-10 rounded-xl flex items-center justify-center hover:bg-indigo-500 hover:text-white transition-all shadow-sm",title:"Payment History",children:y.jsx("i",{className:"fas fa-history text-xs"})}),y.jsxs("button",{onClick:()=>D(w),className:"bg-green-600 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase shadow-lg shadow-green-100",children:[y.jsx("i",{className:"fas fa-plus mr-1"})," Add"]})]})})]},w.id)})})]})})]}),y.jsxs("section",{className:"space-y-6",children:[y.jsxs("div",{className:"flex items-center justify-between px-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-lg flex items-center justify-center",children:y.jsx("i",{className:"fas fa-receipt text-xs"})}),y.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Global Audit Trail"})]}),y.jsxs("button",{type:"button",onClick:b,disabled:le.length===0,className:"bg-indigo-900 text-white px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all flex items-center gap-2 disabled:opacity-50",children:[y.jsx("i",{className:"fas fa-file-csv"})," Export CSV"]})]}),y.jsx("div",{className:"bg-white border border-gray-100 rounded-[2rem] md:rounded-[2.5rem] shadow-xl overflow-hidden",children:le.length===0?y.jsxs("div",{className:"py-20 text-center",children:[y.jsx("i",{className:"fas fa-receipt text-gray-200 text-4xl mb-4"}),y.jsx("p",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No transactions recorded"})]}):y.jsx("div",{className:"divide-y divide-gray-50 max-h-[500px] overflow-y-auto scrollbar-hide",children:le.map(({pAlias:w,pId:j,t:ee})=>y.jsxs("div",{className:"p-5 md:p-6 flex flex-col hover:bg-indigo-50 transition-all group cursor-pointer",onClick:()=>{const pe=K.find(ye=>ye.id===j);pe&&z(pe,ee)},children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-4 flex-grow",children:[y.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-sm flex-shrink-0 ${ee.method==="Venmo"?"bg-blue-50 text-blue-500":ee.method==="PayPal"?"bg-[#003087] text-white":ee.method==="Cash"?"bg-green-50 text-green-600":"bg-indigo-50 text-indigo-600"}`,children:y.jsx("i",{className:`fas ${ee.method==="Venmo"?"fa-vimeo-v":ee.method==="PayPal"?"fa-paypal":ee.method==="Cash"?"fa-money-bill-wave":"fa-credit-card"} text-xs`})}),y.jsxs("div",{className:"min-w-0",children:[y.jsx("p",{className:"text-xs font-black text-indigo-900 uppercase",children:w.toUpperCase()}),y.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:[ee.method,"  ",new Date(ee.timestamp).toLocaleString()]})]})]}),y.jsxs("div",{className:"text-right flex items-center gap-4 flex-shrink-0",children:[y.jsx("div",{className:"flex flex-col items-end",children:y.jsxs("p",{className:"text-sm md:text-base font-black text-indigo-900",children:["$",ee.amount.toFixed(2)]})}),y.jsx("i",{className:"fas fa-chevron-right text-gray-200 text-xs"})]})]}),ee.note&&y.jsx("p",{className:"text-[9px] text-gray-500 italic mt-2 ml-14",children:ee.note})]},ee.id))})})]}),N&&y.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:y.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[y.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"font-black uppercase text-sm",children:[N.alias,"'s History"]}),y.jsxs("p",{className:"text-[9px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:["Total: $",N.totalPaid]})]}),y.jsx("button",{onClick:()=>M(null),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("i",{className:"fas fa-times"})})]}),y.jsx("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-3 scrollbar-hide",children:!N.paymentHistory||N.paymentHistory.length===0?y.jsx("div",{className:"py-12 text-center text-gray-400 italic text-xs",children:"No transactions."}):N.paymentHistory.slice().reverse().map(w=>y.jsxs("div",{onClick:()=>{M(null),z(N,w)},className:"bg-gray-50 border border-gray-100 p-4 rounded-2xl flex flex-col group cursor-pointer hover:border-indigo-200 transition-all",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-black text-indigo-900",children:["$",w.amount.toFixed(2)]}),y.jsxs("div",{className:"flex gap-2 mt-1",children:[y.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:w.method}),y.jsx("span",{className:"text-[8px] font-black uppercase text-gray-400 px-2 py-0.5 bg-gray-200 rounded-md",children:new Date(w.timestamp).toLocaleDateString()})]})]}),y.jsx("i",{className:"fas fa-edit text-indigo-200 group-hover:text-indigo-500 transition-colors"})]}),w.note&&y.jsx("p",{className:"text-[9px] text-gray-600 italic mt-2 pt-2 border-t border-gray-200",children:w.note})]},w.id))}),y.jsx("div",{className:"p-6 border-t border-gray-100",children:y.jsx("button",{onClick:()=>M(null),className:"w-full py-4 bg-gray-50 rounded-2xl font-black text-[10px] uppercase text-gray-400 tracking-widest hover:bg-gray-100 transition-all",children:"Close"})})]})}),I&&y.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:y.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95",children:[y.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"font-black uppercase text-sm",children:["Manage ",I.alias,"'s Boxes"]}),y.jsxs("p",{className:"text-[9px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:[I.boxCount," box",I.boxCount!==1?"es":""]})]}),y.jsx("button",{onClick:()=>H(null),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center",children:y.jsx("i",{className:"fas fa-times"})})]}),y.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto space-y-3 scrollbar-hide",children:[y.jsx("div",{className:"flex justify-end mb-2",children:y.jsxs("button",{onClick:()=>{c(I.id),H(null)},className:"px-4 py-2 bg-red-50 text-red-500 font-black uppercase text-[8px] rounded-lg hover:bg-red-500 hover:text-white transition-all border border-red-100",children:[y.jsx("i",{className:"fas fa-trash-alt mr-2"})," Remove All Boxes"]})}),!I.squareIds||I.squareIds.length===0?y.jsx("div",{className:"py-12 text-center text-gray-400 italic text-xs",children:"No boxes assigned."}):I.squareIds.map(w=>{const j=U[w];return y.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-4 rounded-2xl flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm font-black text-indigo-900 uppercase",children:["Box #",w+1]}),y.jsx("div",{className:"flex gap-2 mt-1",children:y.jsxs("span",{className:`text-[8px] font-black uppercase px-2 py-0.5 rounded-md ${j.paidAmount>=n.costPerBox?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:["$",j.paidAmount," Paid"]})})]}),y.jsx("button",{onClick:()=>a(w),className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center hover:bg-red-500 hover:text-white transition-all shadow-sm",children:y.jsx("i",{className:"fas fa-trash-alt text-xs"})})]},w)})]}),y.jsx("div",{className:"p-6 border-t border-gray-100",children:y.jsx("button",{onClick:()=>H(null),className:"w-full py-4 bg-gray-50 rounded-2xl font-black text-[10px] uppercase text-gray-400 tracking-widest hover:bg-gray-100 transition-all",children:"Close"})})]})}),F&&y.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:y.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in zoom-in-95",children:[y.jsxs("div",{className:"bg-indigo-900 p-6 text-white flex justify-between items-center",children:[y.jsx("h3",{className:"font-black uppercase text-sm",children:"Edit Participant"}),y.jsx("button",{onClick:()=>q(null),children:y.jsx("i",{className:"fas fa-times"})})]}),y.jsxs("form",{onSubmit:ce,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Full Name"}),y.jsx("input",{required:!0,onFocus:w=>w.target.select(),value:Se.name,onChange:w=>ie({...Se,name:w.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Email"}),y.jsx("input",{required:!0,type:"email",onFocus:w=>w.target.select(),value:Se.email,onChange:w=>ie({...Se,email:w.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Phone"}),y.jsx("input",{required:!0,type:"tel",onFocus:w=>w.target.select(),value:Se.phone,onChange:w=>ie({...Se,phone:Ae(w.target.value)}),className:"w-full p-3 bg-gray-50 rounded-xl font-bold text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-1",children:"Alias"}),y.jsx("input",{required:!0,maxLength:16,onFocus:w=>w.target.select(),value:Se.alias,onChange:w=>ie({...Se,alias:w.target.value.toUpperCase()}),className:"w-full p-3 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs shadow-xl mt-4",children:"Update Profile"})]})]})}),E&&y.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md",children:y.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-in slide-in-from-bottom-6 max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:`p-6 text-white flex justify-between items-center sticky top-0 ${J?"bg-orange-500":"bg-indigo-900"}`,children:[y.jsx("h3",{className:"font-black uppercase text-sm",children:J?"Edit Entry":"Add Entry"}),y.jsx("button",{onClick:()=>{T(null),se(null),ge("")},children:y.jsx("i",{className:"fas fa-times"})})]}),y.jsxs("form",{onSubmit:ae,className:"p-6 space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Amount ($)"}),y.jsx("input",{required:!0,autoFocus:!0,type:"number",step:"0.01",value:B,onChange:w=>X(w.target.value),className:"w-full p-4 bg-gray-50 rounded-xl font-black text-lg outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Method"}),y.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Cash","Venmo","PayPal","Zelle","Other"].map(w=>y.jsx("button",{type:"button",onClick:()=>oe(w),className:`py-3 rounded-xl font-black uppercase text-[10px] border-2 transition-all ${ve===w?"bg-indigo-900 border-indigo-900 text-white":"bg-white border-gray-100 text-gray-400"}`,children:w},w))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-gray-400 block mb-2",children:"Note (optional)"}),y.jsx("textarea",{value:de,onChange:w=>ge(w.target.value),placeholder:"e.g., 'Cash payment during meeting'",className:"w-full p-3 bg-gray-50 rounded-xl font-medium text-sm outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:3})]}),y.jsxs("div",{className:"flex flex-col gap-3 pt-4",children:[y.jsx("button",{type:"submit",className:`w-full text-white py-4 rounded-xl font-black uppercase tracking-widest text-xs shadow-xl ${J?"bg-orange-500":"bg-green-600"}`,children:J?"Save Changes":"Log Payment"}),J&&y.jsx("button",{type:"button",onClick:fe,className:"w-full bg-red-50 text-red-500 py-4 rounded-xl font-black uppercase tracking-widest text-[10px] hover:bg-red-500 hover:text-white transition-all border border-red-100",children:"Delete Entry"})]})]})]})})]})},g_=({activePool:t,settings:e,onAddScore:n,onUpdateScore:s,onDeleteScore:l,isAdmin:a})=>{const[c,h]=W.useState(""),[g,p]=W.useState(""),[_,x]=W.useState("Score Update"),[E,T]=W.useState(null),[N,M]=W.useState(null),{scores:I=[],squares:H=[]}=t,{payouts:F,costPerBox:q,rowNumbers:J,colNumbers:se}=e,B=W.useMemo(()=>H.length*q,[H.length,q]),X=W.useMemo(()=>F.charityPayoutType==="fixed"?F.charityFixedAmount||0:B*(F.charityPercent/100),[B,F.charityPercent,F.charityPayoutType,F.charityFixedAmount]),ve=B-X,oe=(ie,be)=>{const Ge=ie%10,U=be%10,K=(J||[]).indexOf(Ge),le=(se||[]).indexOf(U);if(K===-1||le===-1)return null;const Q=H.find(re=>re.row===K&&re.col===le);return Q?{alias:Q.assigned?Q.alias:"Unassigned",id:Q.id,assigned:Q.assigned}:null},de=W.useMemo(()=>(I||[]).map((ie,be)=>{const Ge=oe(ie.teamAScore,ie.teamBScore);let U=0;if(F.mode==="standard")if(F.standardPayoutType==="fixed")U=F.standardSplits[ie.label.toLowerCase()]||0;else{const K=F.standardSplits[ie.label.toLowerCase()]||0;U=ve*(K/100)}else{const K=ie.teamAScore===0&&ie.teamBScore===0,le=I.slice(0,be).some(Q=>Q.teamAScore===0&&Q.teamBScore===0);if(K&&!le&&F.scoreChangeInitialRefund!==!1)U=q;else if(ie.label==="Final")U=ve;else{const Q=F.scoreChangeMultiplier||3;F.scoreChangeAppliesTo==="totalPot"?U=B*Q:U=q*Q}}return{...ie,winner:Ge,payout:U}}),[I,F,ve,q,J,se,H,B]),ge=ie=>{ie.preventDefault(),M(null);const be=parseInt(c),Ge=parseInt(g);if(isNaN(be)||isNaN(Ge)){M("Invalid scores.");return}E?(s({id:E,teamAScore:be,teamBScore:Ge,label:_,timestamp:Date.now()}),T(null)):n({id:crypto.randomUUID(),teamAScore:be,teamBScore:Ge,label:_,timestamp:Date.now()}),h(""),p("")},Se=ie=>{T(ie.id),h(ie.teamAScore.toString()),p(ie.teamBScore.toString()),x(ie.label),M(null)};return y.jsxs("div",{className:"space-y-8 pb-12",children:[!a&&y.jsxs("div",{className:"bg-indigo-900 text-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:y.jsx("i",{className:"fas fa-sack-dollar text-[120px] rotate-12"})}),y.jsxs("div",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"inline-block px-3 py-1 bg-white/10 rounded-full text-[10px] font-black uppercase tracking-widest text-indigo-300",children:"Live Contest Standings"}),y.jsxs("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-black tracking-tighter truncate leading-tight",children:["Pot: $",B]}),y.jsxs("p",{className:"text-indigo-300 text-sm font-medium uppercase tracking-widest italic opacity-80 truncate",children:["Supporting ",e.charityName]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[y.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase mb-1",children:"Charity"}),y.jsxs("p",{className:"text-xl font-black",children:["$",X.toFixed(0)]})]}),y.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/5",children:[y.jsx("p",{className:"text-[9px] font-black text-green-400 uppercase mb-1",children:"Players"}),y.jsxs("p",{className:"text-xl font-black",children:["$",ve.toFixed(0)]})]})]})]})]}),a&&y.jsxs("section",{className:`bg-indigo-50/50 p-8 rounded-[3rem] border-2 transition-all ${E?"border-orange-500 bg-orange-50/20":"border-indigo-100"}`,children:[y.jsx("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest mb-6",children:"Log Live Score Change"}),y.jsxs("form",{onSubmit:ge,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1",children:[y.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:[e.teamA," Score"]}),y.jsx("input",{type:"number",required:!0,value:c,onChange:ie=>h(ie.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-2xl outline-none",placeholder:"0"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsxs("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:[e.teamB," Score"]}),y.jsx("input",{type:"number",required:!0,value:g,onChange:ie=>p(ie.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-2xl outline-none",placeholder:"0"})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Label"}),y.jsxs("select",{value:_,onChange:ie=>x(ie.target.value),className:"w-full p-4 bg-white rounded-xl font-black text-sm outline-none",children:[y.jsx("option",{value:"Score Update",children:"Score Update"}),y.jsx("option",{value:"Q1",children:"End of Q1"}),y.jsx("option",{value:"Half",children:"Halftime"}),y.jsx("option",{value:"Q3",children:"End of Q3"}),y.jsx("option",{value:"Final",children:"Final Score"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{type:"submit",className:`flex-grow py-4 rounded-xl font-black uppercase text-[10px] text-white ${E?"bg-orange-500":"bg-indigo-900"}`,children:E?"Save":"Log"}),E&&y.jsx("button",{onClick:()=>T(null),className:"px-4 py-4 bg-white text-gray-400 rounded-xl font-black text-[10px] uppercase",children:"X"})]})]})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsx("h3",{className:"text-sm font-black text-indigo-900 uppercase tracking-[0.2em] px-4",children:"Match Timeline"}),de.length===0?y.jsx("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-[3rem] py-24 text-center",children:y.jsx("p",{className:"text-gray-400 font-black uppercase text-xs tracking-widest italic",children:"Game in progress... Waiting for first score."})}):y.jsx("div",{className:"grid grid-cols-1 gap-4",children:de.slice().reverse().map(ie=>{var be;return y.jsxs("div",{className:"bg-white border border-gray-100 rounded-[2.5rem] p-6 flex flex-col md:flex-row items-center justify-between gap-6 shadow-sm",children:[y.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[y.jsxs("div",{className:"text-center px-6 py-4 rounded-[2rem] bg-indigo-50 border border-indigo-100 min-w-[100px]",children:[y.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest mb-1 text-gray-400",children:ie.label}),y.jsxs("p",{className:"text-2xl font-black tabular-nums",children:[ie.teamAScore," - ",ie.teamBScore]})]}),y.jsxs("div",{className:"flex-grow min-w-0",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Square Holder"}),y.jsx("h4",{className:"text-lg font-black uppercase truncate text-indigo-950",children:((be=ie.winner)==null?void 0:be.alias)||"Missing Axis #s"}),ie.winner&&y.jsxs("span",{className:"text-[9px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded-full font-black uppercase",children:["Box #",ie.winner.id+1]})]})]}),y.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto",children:[y.jsxs("div",{className:"text-right",children:[y.jsx("p",{className:"text-[10px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Payout"}),y.jsxs("p",{className:"text-3xl font-black text-gray-900",children:["$",ie.payout.toFixed(0)]})]}),a&&y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>Se(ie),className:"w-10 h-10 bg-indigo-50 text-indigo-600 rounded-xl flex items-center justify-center",children:y.jsx("i",{className:"fas fa-edit"})}),y.jsx("button",{onClick:()=>l(ie.id),className:"w-10 h-10 bg-red-50 text-red-500 rounded-xl flex items-center justify-center",children:y.jsx("i",{className:"fas fa-trash"})})]})]})]},ie.id)})})]})]})},sT=({activePoolId:t,poolSettings:e,globalSettings:n,onUpdatePoolSettings:s,onUpdateActivePool:l,onUpdateGlobalSettings:a,onResetGrid:c,onDeletePool:h,onGenerateNumbers:g,squares:p,participants:_,onUpdateSquare:x,onUpdateParticipant:E,onUnassignSquare:T,onClearUserBoxes:N,onApplyPayment:M,onEditPayment:I,onDeletePayment:H,onAddScore:F,onUpdateScore:q,onDeleteScore:J,scores:se,pools:B,onSwitchPool:X,onCreatePool:ve,fullState:oe,onImportState:de})=>{var Ae,w,j,ee,pe,ye,De,Re,Ve,dt,We,Fe,Vt,Ti,pr,mr,Ft;const[ge,Se]=W.useState("overview"),[ie,be]=W.useState(!1),Ge=W.useRef(null),[U,K]=W.useState({name:"",teamA:"NFC",teamB:"AFC",costPerBox:10}),le=(B||[]).find(Z=>Z.id===t),Q=Z=>{const Ie=new Set,Ke=new Set,Et=(Z||[]).filter(yt=>yt!==null&&!isNaN(yt));Et.forEach(yt=>{Ie.has(yt)&&Ke.add(yt),Ie.add(yt)});const jt=[];for(let yt=0;yt<=9;yt++)Ie.has(yt)||jt.push(yt);return{isValid:jt.length===0&&Ke.size===0&&Et.length===10,missing:jt,duplicates:Array.from(Ke),count:Et.length}},re=W.useMemo(()=>Q(e.rowNumbers),[e.rowNumbers]),b=W.useMemo(()=>Q(e.colNumbers),[e.colNumbers]),D=W.useMemo(()=>{const Ie=((e==null?void 0:e.costPerBox)||0)*100,Ke=e.payouts;let Et=Ke.charityPayoutType==="fixed"?Ke.charityFixedAmount||0:Ke.charityPercent/100*Ie,jt=Ie-Et;return{totalPot:Ie,charityAmount:Et,playerPot:jt}},[e]),z=Z=>{Z.preventDefault(),U.name.trim()&&(ve(U.name,{teamA:U.teamA,teamB:U.teamB,costPerBox:U.costPerBox}),be(!1))},te=(Z,Ie,Ke)=>{var Ps;const Et=Z.target.value.replace(/[^0-9]/g,""),jt=Et===""?null:parseInt(Et,10),vn=Ie==="row"?"rowNumbers":"colNumbers",yt=[...e[vn]||Array(10).fill(null)];if(yt[Ke]=jt,s({[vn]:yt}),Et!==""&&Ke<9){const _n=Z.target.closest(".axis-row"),Ce=_n==null?void 0:_n.querySelectorAll("input");(Ps=Ce==null?void 0:Ce[Ke+1])==null||Ps.focus()}},ae=Z=>{s({[Z==="row"?"rowNumbers":"colNumbers"]:Array(10).fill(null)})},ce=({status:Z})=>Z.isValid?y.jsx("span",{className:"text-[8px] font-black text-green-500 uppercase bg-green-50 px-2 py-0.5 rounded-full border border-green-100",children:"Ready"}):y.jsxs("div",{className:"flex flex-wrap gap-2",children:[Z.duplicates.length>0&&y.jsxs("span",{className:"text-[8px] font-black text-red-500 uppercase bg-red-50 px-2 py-0.5 rounded-full border border-red-100",children:["Dupes: ",Z.duplicates.join(",")]}),Z.missing.length>0&&y.jsxs("span",{className:"text-[8px] font-black text-orange-500 uppercase bg-orange-50 px-2 py-0.5 rounded-full border border-orange-100",children:["Missing: ",Z.missing.join(",")]})]}),fe=[{id:"overview",label:"Overview",icon:"fa-th-large"},{id:"pools",label:"Contests",icon:"fa-gamepad"},{id:"settings",label:"Grid Settings",icon:"fa-sliders-h"},{id:"axis",label:"Axis Numbers",icon:"fa-th"},{id:"winners",label:"Winners",icon:"fa-trophy"},{id:"stats",label:"Stats",icon:"fa-chart-bar"},{id:"global",label:"Organization",icon:"fa-cog"},{id:"danger",label:"Danger Zone",icon:"fa-exclamation-triangle"}];return y.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[y.jsx("header",{className:"bg-indigo-900 text-white sticky top-0 z-40 shadow-xl",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-6 py-4 md:py-6",children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight",children:"Admin Control Panel"}),y.jsx("p",{className:"text-[10px] text-indigo-300 font-bold uppercase tracking-widest",children:"Master Grid Management"})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{onClick:()=>{const Z=JSON.stringify(oe,null,2),Ie="data:application/json;charset=utf-8,"+encodeURIComponent(Z),Ke=document.createElement("a");Ke.setAttribute("href",Ie),Ke.setAttribute("download","grid-backup.json"),Ke.click()},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[y.jsx("i",{className:"fas fa-download mr-2"}),"Backup"]}),y.jsxs("button",{onClick:()=>{var Z;return(Z=Ge.current)==null?void 0:Z.click()},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[y.jsx("i",{className:"fas fa-upload mr-2"}),"Restore"]}),y.jsxs("button",{onClick:()=>{try{const Z=oe,Ie=(Ce,ut)=>{const ft=Xn=>`"${String(Xn??"").replace(/"/g,'""')}"`;return[Ce.join(","),...ut.map(Xn=>Xn.map(ft).join(","))].join(`
`)},Et=(Ce=>Ce?Ce.pools&&Array.isArray(Ce.pools)?Ce.pools:Ce.pools&&typeof Ce.pools=="object"?Object.values(Ce.pools).map(ut=>({...ut,squares:Array.isArray(ut.squares)?ut.squares:ut.squares?Object.values(ut.squares):[],participants:ut.participants||[],settings:ut.settings||{costPerBox:10,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)}})):Array.isArray(Ce)?Ce:[Ce]:[])(Z),jt=[],vn=[];Et.forEach(Ce=>{const ut=Ce.name||Ce.id||"Unnamed Pool",ft=Ce.settings&&Ce.settings.costPerBox||10,Xn=Ce.squares||[],bi=Ce.participants||[],Ni={};(Xn||[]).forEach((vt,Wn)=>{const Ut=vt&&vt.participantId?vt.participantId:null;Ut&&(Ni[Ut]=Ni[Ut]||[],Ni[Ut].push(typeof vt.id=="number"?vt.id:vt.id||Wn))}),bi.forEach(vt=>{const Wn=vt.id,Ut=(Ni[Wn]||[]).slice().sort((zn,ls)=>zn-ls).map(zn=>typeof zn=="number"?zn+1:zn),cn=Ut.length,Fn=cn*ft,Zt=(vt.paymentHistory||[]).reduce((zn,ls)=>zn+(ls.amount||0),0),Yo=Math.max(0,Fn-Zt);jt.push([ut,vt.alias||"",vt.name||"",vt.email||"",vt.phone||"",cn,Ut.join(";"),ft,Fn,Zt,Yo])}),Object.keys(Ni).forEach(vt=>{if(!(bi||[]).find(Ut=>Ut.id===vt)){const Ut=(Ni[vt]||[]).slice().sort((Zt,Yo)=>Zt-Yo).map(Zt=>typeof Zt=="number"?Zt+1:Zt),cn=Ut.length,Fn=cn*ft;jt.push([ut,"","","","",cn,Ut.join(";"),ft,Fn,0,Fn])}}),vn.push([ut,Ce.settings&&Ce.settings.rowNumbers?Ce.settings.rowNumbers.join(";"):"",Ce.settings&&Ce.settings.colNumbers?Ce.settings.colNumbers.join(";"):""])});const yt=Ie(["Pool","Alias","Name","Email","Phone","BoxesPlayed","BoxIDs","CostPerBox","TotalDue","TotalPaid","Outstanding"],jt),Ps=Ie(["Pool","RowNumbers","ColNumbers"],vn),_n=(Ce,ut,ft="text/csv")=>{const Xn="data:"+ft+";charset=utf-8,"+encodeURIComponent(ut),bi=document.createElement("a");bi.setAttribute("href",Xn),bi.setAttribute("download",Ce),bi.click()};_n("aging_report.csv",yt),_n("grid_numbers.csv",Ps)}catch(Z){console.error(Z),alert("Failed to generate aging report.")}},className:"hidden md:inline-flex bg-white/10 text-white px-4 py-2 rounded-xl font-black uppercase text-[9px] hover:bg-white/20 transition-all",children:[y.jsx("i",{className:"fas fa-file-csv mr-2"}),"Aging Report"]}),y.jsx("input",{type:"file",ref:Ge,onChange:Z=>{var Et;const Ie=(Et=Z.target.files)==null?void 0:Et[0];if(!Ie)return;const Ke=new FileReader;Ke.onload=jt=>{var vn;try{const yt=JSON.parse((vn=jt.target)==null?void 0:vn.result);window.confirm("Overwrite ALL data with this backup?")&&de(yt)}catch{alert("Invalid JSON file.")}Z.target.value=""},Ke.readAsText(Ie)},accept:".json",className:"hidden"})]})]})})}),y.jsxs("div",{className:"flex flex-col md:flex-row max-w-7xl mx-auto gap-6 p-4 md:p-6",children:[y.jsx("nav",{className:"w-full md:w-48 flex-shrink-0",children:y.jsx("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:fe.map(Z=>y.jsxs("button",{onClick:()=>Se(Z.id),className:`w-full text-left px-6 py-4 font-black uppercase text-[11px] tracking-wide transition-all flex items-center gap-3 ${ge===Z.id?"bg-indigo-900 text-white":"text-indigo-900 hover:bg-indigo-50"}`,children:[y.jsx("i",{className:`fas ${Z.icon} w-4 text-center`}),Z.label]},Z.id))})}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6 md:p-10",children:[ge==="overview"&&y.jsx("div",{className:"space-y-8",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase mb-6",children:"Financial Summary"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{className:"bg-indigo-50 p-6 rounded-3xl text-center flex flex-col justify-center",children:[y.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1",children:"Projected Total Pot"}),y.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",D.totalPot]})]}),y.jsxs("div",{className:"bg-indigo-900 p-6 rounded-3xl text-center text-white flex flex-col justify-center shadow-xl",children:[y.jsx("p",{className:"text-[9px] font-black text-indigo-300 uppercase tracking-widest mb-1",children:"Charity Portion"}),y.jsxs("p",{className:"text-4xl font-black",children:["$",D.charityAmount.toFixed(0)]})]}),y.jsxs("div",{className:"bg-green-50 p-6 rounded-3xl text-center flex flex-col justify-center border border-green-100",children:[y.jsx("p",{className:"text-[9px] font-black text-green-600 uppercase tracking-widest mb-1",children:"Player Pool"}),y.jsxs("p",{className:"text-4xl font-black text-green-700",children:["$",D.playerPot.toFixed(0)]})]})]})]})}),ge==="pools"&&y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Active Contests"}),y.jsxs("button",{onClick:()=>be(!ie),className:"bg-indigo-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100",children:[y.jsx("i",{className:`fas ${ie?"fa-times":"fa-plus"} mr-2`})," ",ie?"Cancel":"New Contest"]})]}),ie?y.jsxs("form",{onSubmit:z,className:"bg-indigo-50 p-8 rounded-3xl border border-indigo-100 space-y-6 animate-in slide-in-from-top-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Grid Name"}),y.jsx("input",{required:!0,value:U.name,onChange:Z=>K({...U,name:Z.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none",placeholder:"e.g. 2025 Big Game"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Cost Per Box ($)"}),y.jsx("input",{type:"number",required:!0,value:U.costPerBox,onChange:Z=>K({...U,costPerBox:Number(Z.target.value)}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Vertical Team (Rows)"}),y.jsx("input",{required:!0,value:U.teamA,onChange:Z=>K({...U,teamA:Z.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Horizontal Team (Cols)"}),y.jsx("input",{required:!0,value:U.teamB,onChange:Z=>K({...U,teamB:Z.target.value}),className:"w-full p-4 bg-white rounded-xl font-bold outline-none"})]})]}),y.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Initialize Contest Grid"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(Z=>y.jsxs("div",{className:`p-4 rounded-2xl border-2 flex items-center justify-between transition-all ${Z.id===t?"bg-indigo-50 border-indigo-200 ring-2 ring-indigo-500/20":"bg-gray-50 border-gray-100"}`,children:[y.jsxs("div",{className:"truncate pr-4",children:[y.jsx("p",{className:"font-black text-indigo-900 uppercase text-xs truncate",children:Z.name}),y.jsxs("p",{className:"text-[9px] font-bold text-gray-400 uppercase truncate",children:[Z.settings.teamA," vs ",Z.settings.teamB,"  $",Z.settings.costPerBox,"/Box"]})]}),y.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[Z.id!==t&&y.jsx("button",{onClick:()=>X(Z.id),className:"px-4 py-2 bg-indigo-900 text-white rounded-lg text-[8px] font-black uppercase",children:"Select"}),y.jsx("button",{onClick:()=>h(Z.id),className:"w-8 h-8 bg-red-50 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all",children:y.jsx("i",{className:"fas fa-trash-alt text-[10px]"})})]})]},Z.id))})]}),ge==="settings"&&y.jsxs("div",{className:"space-y-8",children:[y.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Selected Contest Settings"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Grid Display Name"}),y.jsx("input",{value:(le==null?void 0:le.name)||"",onChange:Z=>l({name:Z.target.value}),className:"w-full p-4 bg-indigo-50 border-none rounded-xl font-black text-indigo-900 uppercase text-sm md:text-lg outline-none focus:ring-4 focus:ring-indigo-500/10"})]}),y.jsxs("div",{className:"bg-green-50/50 p-6 rounded-3xl border border-green-100",children:[y.jsx("label",{className:"text-[9px] font-black text-green-600 uppercase block mb-2",children:"Cost Per Box ($)"}),y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 text-xl font-black text-green-300",children:"$"}),y.jsx("input",{type:"number",value:e.costPerBox,onChange:Z=>s({costPerBox:Number(Z.target.value)}),className:"w-full pl-6 pr-4 py-2 bg-transparent border-none font-black text-3xl text-green-700 outline-none"})]}),y.jsx("p",{className:"text-[8px] font-bold text-green-600 uppercase mt-2",children:"Adjusting this updates all prize/payout estimates."})]}),y.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Vertical Team (Rows)"}),y.jsx("input",{value:e.teamA,onChange:Z=>s({teamA:Z.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-indigo-900 uppercase text-xs outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-1",children:"Horizontal Team (Cols)"}),y.jsx("input",{value:e.teamB,onChange:Z=>s({teamB:Z.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-indigo-900 uppercase text-xs outline-none focus:ring-2 focus:ring-indigo-500"})]}),y.jsxs("div",{className:"md:col-span-2 bg-white p-4 rounded-xl border mt-2",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block mb-2",children:"Payout Mode"}),y.jsx("div",{className:"flex gap-2 items-center mb-3",children:y.jsxs("select",{value:((Ae=e.payouts)==null?void 0:Ae.mode)||"standard",onChange:Z=>s({payouts:{...e.payouts||{},mode:Z.target.value}}),className:"p-3 rounded-lg bg-gray-50 border-none font-black",children:[y.jsx("option",{value:"standard",children:"Standard (by Quarter)"}),y.jsx("option",{value:"scoreChange",children:"Score Change (per change)"})]})}),((w=e.payouts)==null?void 0:w.mode)==="scoreChange"?y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block",children:"Score Change Multiplier"}),y.jsx("input",{type:"number",value:((j=e.payouts)==null?void 0:j.scoreChangeMultiplier)||3,onChange:Z=>s({payouts:{...e.payouts||{},scoreChangeMultiplier:Number(Z.target.value)}}),className:"w-40 p-3 rounded-lg bg-gray-50"}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Applies To"}),y.jsxs("select",{value:((ee=e.payouts)==null?void 0:ee.scoreChangeAppliesTo)||"perBox",onChange:Z=>s({payouts:{...e.payouts||{},scoreChangeAppliesTo:Z.target.value}}),className:"p-2 rounded-lg bg-gray-50",children:[y.jsx("option",{value:"perBox",children:"Per Box (legacy)"}),y.jsx("option",{value:"totalPot",children:"Full Pool (total pot)"})]})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"0-0 Initial Refund"}),y.jsx("input",{type:"checkbox",checked:!!((pe=e.payouts)!=null&&pe.scoreChangeInitialRefund),onChange:Z=>s({payouts:{...e.payouts||{},scoreChangeInitialRefund:Z.target.checked}})})]}),y.jsx("p",{className:"text-[10px] text-gray-500",children:'Payout multiplier applied each time the score changes. When set to Full Pool, each change pays `totalPot * multiplier`. The final/"Final" entry receives the player pot remaining after charity.'})]}):y.jsxs("div",{className:"space-y-3",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase block",children:"Standard Splits"}),y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsx("input",{type:"number",value:((De=(ye=e.payouts)==null?void 0:ye.standardSplits)==null?void 0:De.q1)||0,onChange:Z=>{var Ie;return s({payouts:{...e.payouts||{},standardSplits:{...((Ie=e.payouts)==null?void 0:Ie.standardSplits)||{},q1:Number(Z.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Q1 %"}),y.jsx("input",{type:"number",value:((Ve=(Re=e.payouts)==null?void 0:Re.standardSplits)==null?void 0:Ve.half)||0,onChange:Z=>{var Ie;return s({payouts:{...e.payouts||{},standardSplits:{...((Ie=e.payouts)==null?void 0:Ie.standardSplits)||{},half:Number(Z.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Half %"}),y.jsx("input",{type:"number",value:((We=(dt=e.payouts)==null?void 0:dt.standardSplits)==null?void 0:We.q3)||0,onChange:Z=>{var Ie;return s({payouts:{...e.payouts||{},standardSplits:{...((Ie=e.payouts)==null?void 0:Ie.standardSplits)||{},q3:Number(Z.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Q3 %"}),y.jsx("input",{type:"number",value:((Vt=(Fe=e.payouts)==null?void 0:Fe.standardSplits)==null?void 0:Vt.final)||0,onChange:Z=>{var Ie;return s({payouts:{...e.payouts||{},standardSplits:{...((Ie=e.payouts)==null?void 0:Ie.standardSplits)||{},final:Number(Z.target.value)}}})},className:"p-3 rounded-lg bg-gray-50",placeholder:"Final %"})]}),y.jsxs("div",{className:"flex gap-2 items-center",children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Charity"}),y.jsxs("select",{value:((Ti=e.payouts)==null?void 0:Ti.charityPayoutType)||"percent",onChange:Z=>s({payouts:{...e.payouts||{},charityPayoutType:Z.target.value}}),className:"p-2 rounded-lg bg-gray-50",children:[y.jsx("option",{value:"percent",children:"Percent"}),y.jsx("option",{value:"fixed",children:"Fixed"})]}),((pr=e.payouts)==null?void 0:pr.charityPayoutType)==="fixed"?y.jsx("input",{type:"number",value:((mr=e.payouts)==null?void 0:mr.charityFixedAmount)||0,onChange:Z=>s({payouts:{...e.payouts||{},charityFixedAmount:Number(Z.target.value)}}),className:"p-2 rounded-lg bg-gray-50 w-32"}):y.jsx("input",{type:"number",value:((Ft=e.payouts)==null?void 0:Ft.charityPercent)||0,onChange:Z=>s({payouts:{...e.payouts||{},charityPercent:Number(Z.target.value)}}),className:"p-2 rounded-lg bg-gray-50 w-32"})]})]})]})]})]})]}),ge==="axis"&&y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-4",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase tracking-tight",children:"Grid Axis Numbers"}),y.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase",children:"Values 0-9 for grid coordinates"})]}),y.jsxs("button",{onClick:g,className:"w-full md:w-auto bg-indigo-900 text-white px-6 py-3 rounded-xl font-black uppercase text-[10px] shadow-lg shadow-indigo-100 hover:bg-black transition-all",children:[y.jsx("i",{className:"fas fa-random mr-2"})," Randomize Numbers"]})]}),y.jsxs("div",{className:"space-y-10",children:[y.jsxs("div",{className:"axis-row",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("label",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[e.teamA," (Vertical)"]}),y.jsx(ce,{status:re})]}),y.jsxs("button",{onClick:()=>ae("row"),className:"text-[8px] font-black text-red-400 uppercase",children:[y.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]}),y.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:Array.from({length:10}).map((Z,Ie)=>y.jsx("input",{type:"text",maxLength:1,onFocus:Ke=>Ke.target.select(),value:e.rowNumbers[Ie]??"",onChange:Ke=>te(Ke,"row",Ie),className:"w-full h-12 text-center bg-gray-50 border-2 border-gray-100 rounded-xl font-black text-indigo-900 outline-none focus:border-indigo-500",placeholder:"?"},`row-${Ie}`))})]}),y.jsxs("div",{className:"axis-row",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("label",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest",children:[e.teamB," (Horizontal)"]}),y.jsx(ce,{status:b})]}),y.jsxs("button",{onClick:()=>ae("col"),className:"text-[8px] font-black text-red-400 uppercase",children:[y.jsx("i",{className:"fas fa-eraser mr-1"})," Clear"]})]}),y.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:Array.from({length:10}).map((Z,Ie)=>y.jsx("input",{type:"text",maxLength:1,onFocus:Ke=>Ke.target.select(),value:e.colNumbers[Ie]??"",onChange:Ke=>te(Ke,"col",Ie),className:"w-full h-12 text-center bg-gray-50 border-2 border-gray-100 rounded-xl font-black text-indigo-900 outline-none focus:border-indigo-500",placeholder:"?"},`col-${Ie}`))})]})]})]}),ge==="winners"&&y.jsx(g_,{activePool:le,settings:{...n,...e},onAddScore:F,onUpdateScore:q,onDeleteScore:J,isAdmin:!0}),ge==="stats"&&y.jsx(iT,{squares:p,participants:_,settings:{...n,...e},onUpdateSquare:x,onUpdateParticipant:E,onUnassignSquare:T,onClearUserBoxes:N,onApplyPayment:M,onEditPayment:I,onDeletePayment:H}),ge==="global"&&y.jsxs("div",{className:"space-y-8",children:[y.jsx("h3",{className:"text-xl font-black text-indigo-900 uppercase",children:"Global Organization Settings"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Main Organization/Charity Name"}),y.jsx("input",{onFocus:Z=>Z.target.select(),value:(n==null?void 0:n.charityName)||"",onChange:Z=>a({charityName:Z.target.value}),className:"w-full px-5 py-4 bg-indigo-50 border-none rounded-2xl font-black text-indigo-900 uppercase text-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Administrative Password"}),y.jsx("input",{type:"text",onFocus:Z=>Z.target.select(),value:(n==null?void 0:n.adminPassword)||"",onChange:Z=>a({adminPassword:Z.target.value}),className:"w-full px-5 py-4 bg-gray-50 border-none rounded-2xl font-black text-indigo-900 uppercase text-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Venmo Link/Username"}),y.jsx("input",{type:"text",value:(n==null?void 0:n.venmoAccount)||"",onChange:Z=>a({venmoAccount:Z.target.value}),className:"w-full px-5 py-4 bg-blue-50/50 rounded-2xl font-black text-indigo-900 text-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1 block",children:"Zelle Account Info"}),y.jsx("input",{type:"text",value:(n==null?void 0:n.zelleAccount)||"",onChange:Z=>a({zelleAccount:Z.target.value}),className:"w-full px-5 py-4 bg-purple-50 rounded-2xl font-black text-indigo-900 text-sm"})]})]})]}),ge==="danger"&&y.jsx("div",{className:"space-y-8",children:y.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-6 rounded-r-2xl",children:[y.jsx("h3",{className:"text-lg font-black text-red-700 uppercase mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-red-600 mb-6",children:"These actions are irreversible. Proceed with caution."}),y.jsx("button",{onClick:c,className:"w-full py-4 text-red-500 font-black uppercase text-[10px] hover:bg-red-100 rounded-2xl border-2 border-dashed border-red-300 transition-all",children:"Reset All Boxes for Active Grid"})]})})]})})]})]})},oT=({isOpen:t,onClose:e,onSubmit:n,onUnassign:s,onSetPendingSelection:l,selectedSquareIds:a,activePool:c,existingParticipants:h,settings:g,isAdmin:p=!1})=>{const[_,x]=W.useState(!1),[E,T]=W.useState(!1),[N,M]=W.useState(""),[I,H]=W.useState(!1),[F,q]=W.useState(null),[J,se]=W.useState({name:"",email:"",phone:"",alias:""}),B=W.useMemo(()=>(a||[]).map(Q=>(c.squares||[])[Q]).filter(Boolean),[a,c.squares]),X=W.useMemo(()=>h.find(Q=>Q.alias.toLowerCase()===J.alias.toLowerCase()),[J.alias,h]),ve=W.useMemo(()=>{const Q=X==null?void 0:X.id;if(!Q)return B;const re=(c.squares||[]).filter(b=>b.participantId===Q&&!(a||[]).includes(b.id)&&(b.paidAmount||0)<g.costPerBox);return[...B,...re]},[X,c.squares,a,B,g.costPerBox]),oe=B.length>0&&B.every(Q=>Q.assigned),de=W.useMemo(()=>{if(!E&&!p||B.length===0)return null;const Q=B[0],re=h.find(ae=>ae.id===(Q==null?void 0:Q.participantId));if(!re)return null;const b=(c.squares||[]).filter(ae=>ae.participantId===re.id),D=b.length*g.costPerBox,z=(re.paymentHistory||[]).reduce((ae,ce)=>ae+ce.amount,0);return{balance:Math.max(0,D-z),totalPaid:z,boxCount:b.length,p:re}},[E,p,B,h,c.squares,g.costPerBox]),ge=W.useMemo(()=>ve.length*g.costPerBox-ve.reduce((Q,re)=>Q+(re.paidAmount||0),0),[ve,g.costPerBox]);if(W.useEffect(()=>{if(t)if(x(!1),T(!1),M(""),H(!1),q(null),B.length===1&&B[0].assigned){const Q=h.find(re=>re.id===B[0].participantId);Q&&se({name:Q.name,email:Q.email,phone:Q.phone,alias:Q.alias.toUpperCase()})}else se({name:"",email:"",phone:"",alias:""})},[t,B,h]),!t||B.length===0)return null;const Se=Q=>{const re=(a||[]).filter(b=>b!==Q);l(re),re.length===0&&e()},ie=Q=>{const re=Q.target.value.replace(/[^\d]/g,""),b=re.length;let D=re;b>=4&&b<7?D=`(${re.slice(0,3)}) ${re.slice(3)}`:b>=7&&(D=`(${re.slice(0,3)}) ${re.slice(3,6)}-${re.slice(6,10)}`),se({...J,phone:D})},be=Q=>{const re=Q.target.value;if(!re)return;const b=h.find(D=>D.id===re);b&&se({name:b.name,email:b.email,phone:b.phone,alias:b.alias.toUpperCase()})},Ge=Q=>{Q.preventDefault(),!(!J.email&&!J.phone)&&(n({...J,alias:J.alias.toUpperCase()},ve.map(re=>re.id)),x(!0))},U=Q=>{Q.preventDefault();const re=B[0],b=h.find(D=>D.id===re.participantId);b&&b.email.toLowerCase()===N.toLowerCase()?(T(!0),H(!1)):H(!0)},K=g.zelleAccount||g.paypalAccount||g.paypalLink||g.venmoAccount||g.otherPaymentInfo,le=({currentAlias:Q,amount:re})=>{const b=g.paypalLink||(g.paypalAccount?`https://www.paypal.com/paypalme/${g.paypalAccount}/${re}`:null),D=g.venmoAccount?`https://venmo.com/${g.venmoAccount.replace("@","")}?txn=pay&amount=${re}&note=${encodeURIComponent(`Squares: ${Q.toUpperCase()}`)}`:null;return y.jsxs("div",{className:"space-y-4",children:[b&&y.jsx("a",{href:b,target:"_blank",className:"flex items-center justify-between px-5 py-3 bg-[#003087] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:y.jsxs("span",{children:[y.jsx("i",{className:"fab fa-paypal mr-2"})," PayPal: $",re]})}),D&&y.jsx("a",{href:D,target:"_blank",className:"flex items-center justify-between px-5 py-3 bg-[#3d95ce] text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:y.jsxs("span",{children:[y.jsx("i",{className:"fab fa-vimeo-v mr-2"})," Venmo: $",re]})}),g.zelleAccount&&y.jsxs("div",{className:"px-5 py-3 bg-[#6d1ed4] text-white rounded-xl font-black uppercase text-[10px] tracking-widest text-center",children:["Zelle: ",g.zelleAccount]}),y.jsxs("p",{className:"text-[9px] text-gray-400 italic text-center uppercase font-black",children:['Memo: "',Q.toUpperCase(),'"']})]})};return y.jsx("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4 bg-indigo-950/40 backdrop-blur-md",children:y.jsxs("div",{className:"bg-white rounded-t-[2rem] md:rounded-[2.5rem] shadow-2xl w-full max-w-md overflow-hidden animate-in slide-in-from-bottom-full md:slide-in-from-bottom-6 duration-300",children:[y.jsxs("div",{className:"p-6 md:p-8 bg-indigo-900 text-white flex justify-between items-center relative overflow-hidden",children:[y.jsxs("div",{className:"relative z-10",children:[y.jsx("h2",{className:"text-xl md:text-2xl font-black uppercase tracking-tight leading-none",children:oe?"Manage Box":`Claiming ${B.length} Boxes`}),y.jsx("p",{className:"text-indigo-300 text-[9px] font-bold uppercase tracking-widest mt-2 uppercase",children:p?"ADMIN CONTROL ENABLED":`Support ${g.charityName}`})]}),y.jsx("button",{onClick:e,className:"bg-white/10 w-10 h-10 rounded-full flex items-center justify-center z-10",children:y.jsx("i",{className:"fas fa-times text-xl"})})]}),y.jsx("div",{className:"p-6 md:p-8 space-y-6 max-h-[80vh] overflow-y-auto scrollbar-hide",children:!oe&&!_?y.jsxs("form",{onSubmit:Ge,className:"space-y-5",children:[h.length>0&&y.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100",children:[y.jsx("label",{className:"text-[9px] font-black uppercase text-indigo-400 mb-1 block",children:"Quick Select Player"}),y.jsxs("select",{onChange:be,className:"w-full bg-white border border-gray-200 rounded-lg p-2 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-500",children:[y.jsx("option",{value:"",children:"-- New Player --"}),h.sort((Q,re)=>Q.alias.localeCompare(re.alias)).map(Q=>y.jsxs("option",{value:Q.id,children:[Q.alias.toUpperCase()," (",Q.name,")"]},Q.id))]})]}),y.jsxs("div",{className:"bg-indigo-50 p-4 rounded-2xl border border-indigo-100",children:[y.jsx("p",{className:"text-[9px] font-black text-indigo-400 uppercase mb-1",children:"Items in checkout"}),y.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(Q=>y.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2 py-1 bg-white text-indigo-900 font-black text-[10px] rounded-lg shadow-sm border border-indigo-100",children:[y.jsxs("span",{children:["#",Q.id+1]}),y.jsx("button",{type:"button",onClick:()=>Se(Q.id),className:"w-4 h-4 rounded-full bg-red-50 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white",children:y.jsx("i",{className:"fas fa-times text-[8px]"})})]},Q.id))}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-indigo-100/50 flex justify-between items-center",children:[y.jsx("span",{className:"text-[10px] font-black uppercase text-indigo-900",children:"Amount Due"}),y.jsxs("span",{className:"text-lg font-black text-indigo-900",children:["$",ge]})]})]}),y.jsx("input",{required:!0,onFocus:Q=>Q.target.select(),value:J.name,onChange:Q=>se({...J,name:Q.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Full Name"}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("input",{type:"email",value:J.email,onChange:Q=>se({...J,email:Q.target.value}),className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Email Address (optional)"}),y.jsx("input",{type:"tel",value:J.phone,onChange:ie,className:"w-full p-4 bg-gray-50 rounded-xl font-bold text-sm outline-none",placeholder:"Cell Number (optional)",maxLength:14}),!J.email&&!J.phone&&y.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase",children:"Require either email or phone"})]}),y.jsx("input",{required:!0,maxLength:16,value:J.alias,onChange:Q=>se({...J,alias:Q.target.value.toUpperCase()}),className:"w-full p-4 bg-indigo-50 rounded-xl font-black text-indigo-900 uppercase text-sm outline-none",placeholder:"Alias (Visible on Grid)"}),y.jsx("button",{type:"submit",disabled:!J.name||!J.email&&!J.phone||!J.alias,className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50",children:"Confirm & Register"})]}):_?y.jsxs("div",{className:"text-center space-y-6",children:[y.jsx("i",{className:"fas fa-check-circle text-green-500 text-4xl mb-3"}),y.jsx("h3",{className:"font-black text-indigo-900 uppercase text-sm",children:"Successfully Claimed!"}),y.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",ge]}),K?y.jsx(le,{currentAlias:J.alias,amount:ge}):y.jsx("p",{className:"text-xs text-gray-400",children:"Contact admin to pay."}),y.jsx("button",{onClick:e,className:"text-xs font-black uppercase text-indigo-500",children:"Return to Board"})]}):y.jsxs("div",{className:"space-y-6",children:[(E||p)&&de&&y.jsxs("div",{className:"bg-orange-50 p-6 rounded-3xl border-2 border-orange-200 text-center animate-in zoom-in-95",children:[y.jsx("p",{className:"text-[9px] font-black text-orange-600 uppercase mb-1",children:"Balance Due"}),y.jsxs("p",{className:"text-4xl font-black text-indigo-900",children:["$",de.balance.toFixed(0)]})]}),!E&&!p?y.jsxs("form",{onSubmit:U,className:"space-y-4",children:[y.jsx("p",{className:"text-xs text-center font-bold text-gray-500",children:"Enter account email to manage this box."}),y.jsx("input",{required:!0,onFocus:Q=>Q.target.select(),type:"email",value:N,onChange:Q=>M(Q.target.value),className:"w-full p-4 bg-gray-50 border-none rounded-xl text-sm outline-none",placeholder:"Verify Email"}),I&&y.jsx("p",{className:"text-red-500 text-[10px] font-bold text-center uppercase",children:"Email does not match."}),y.jsx("button",{type:"submit",className:"w-full bg-indigo-900 text-white py-4 rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg",children:"Verify Ownership"})]}):y.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[de&&y.jsx(le,{currentAlias:de.p.alias,amount:de.balance}),y.jsxs("div",{className:"pt-8 border-t border-gray-100 space-y-4",children:[y.jsx("h4",{className:"text-[10px] font-black text-red-600 uppercase tracking-widest",children:p?"ADMIN CONTROL: REMOVE CLAIM":"RELINQUISH BOX"}),y.jsx("p",{className:"text-[10px] text-gray-400 font-bold leading-tight px-1 uppercase italic",children:"Removing the name will make this box available for others. Funds will be redistributed to other boxes if applicable."}),y.jsx("button",{type:"button",onClick:()=>s(B[0].id),className:"w-full bg-red-600 text-white py-5 rounded-2xl font-black uppercase text-[12px] tracking-widest shadow-xl hover:bg-black transition-all active:scale-95",children:"Remove Name (Relinquish)"})]})]})]})})]})})},lT=({isOpen:t,onClose:e,appState:n})=>{const[s,l]=W.useState(!1),a=W.useMemo(()=>{try{const p=btoa(JSON.stringify(n)),_=new URL(window.location.origin+window.location.pathname);return _.searchParams.set("data",p),_.toString()}catch(p){return console.error("Error generating share URL",p),window.location.href}},[n,t]),c=W.useMemo(()=>`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(a)}&margin=10`,[a]);if(!t)return null;const h=()=>{navigator.clipboard.writeText(a).then(()=>{l(!0),setTimeout(()=>l(!1),3e3)})},g=a.length>7e3;return y.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-xl overflow-hidden animate-in zoom-in-95 duration-300",children:[y.jsxs("div",{className:"bg-green-600 p-8 text-white flex justify-between items-center relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:y.jsx("i",{className:"fas fa-share-alt text-8xl rotate-12"})}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"Share Your Board"}),y.jsx("p",{className:"text-green-100 text-xs font-bold uppercase tracking-widest",children:"Snapshot Sharing Enabled"})]}),y.jsx("button",{onClick:e,className:"bg-white/10 hover:bg-white/20 w-12 h-12 rounded-full flex items-center justify-center transition-all z-10",children:y.jsx("i",{className:"fas fa-times text-xl"})})]}),y.jsxs("div",{className:"p-10 space-y-8 text-center max-h-[80vh] overflow-y-auto scrollbar-hide",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"bg-gray-50 p-6 rounded-[2.5rem] border-2 border-dashed border-gray-200 inline-block",children:y.jsx("img",{src:c,alt:"Share QR Code",className:"w-56 h-56 mx-auto rounded-xl shadow-inner"})}),y.jsxs("p",{className:"text-gray-500 text-sm font-medium px-4",children:["Ask participants to ",y.jsx("span",{className:"font-black text-indigo-900",children:"scan this code"})," with their phone to instantly see the current board state."]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"relative group",children:[y.jsx("input",{readOnly:!0,value:a,className:"w-full pl-6 pr-32 py-5 bg-gray-50 border-2 border-gray-100 rounded-3xl font-mono text-xs text-gray-400 outline-none truncate"}),y.jsx("button",{onClick:h,className:`absolute right-2 top-2 bottom-2 px-6 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${s?"bg-green-600 text-white":"bg-indigo-900 text-white hover:bg-black shadow-lg shadow-indigo-100"}`,children:s?"Copied!":"Copy Link"})]}),g&&y.jsxs("div",{className:"flex items-start gap-3 p-4 bg-orange-50 border border-orange-200 rounded-2xl text-left",children:[y.jsx("i",{className:"fas fa-exclamation-triangle text-orange-500 mt-1"}),y.jsx("p",{className:"text-[10px] text-orange-800 font-bold uppercase leading-relaxed",children:'Notice: This board has a lot of data. Snapshot links may not work in older browsers. If problems occur, use the "Export JSON" backup feature in Admin.'})]})]}),y.jsxs("div",{className:"pt-6 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[y.jsx("i",{className:"fas fa-info-circle"}),"How it works"]}),y.jsx("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:'Your data is stored "inside" the link. When someone opens it, their browser saves a copy. No login or database required!'})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("h4",{className:"text-[10px] font-black text-indigo-900 uppercase tracking-widest flex items-center gap-2",children:[y.jsx("i",{className:"fas fa-sync-alt"}),"Updates"]}),y.jsxs("p",{className:"text-[10px] text-gray-500 leading-relaxed font-medium",children:["If you change the board later, you must ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"generate a new link"})," for others to see the changes."]})]})]}),y.jsx("button",{onClick:e,className:"w-full py-4 text-indigo-400 font-black uppercase text-[10px] tracking-widest hover:text-indigo-900 transition-colors",children:"Back to Grid"})]})]})})},rT=({isOpen:t,onClose:e})=>t?y.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-indigo-950/60 backdrop-blur-md animate-in fade-in duration-300",children:y.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-2xl overflow-hidden animate-in zoom-in-95 duration-300 flex flex-col max-h-[90vh]",children:[y.jsxs("div",{className:"bg-indigo-600 p-8 text-white flex justify-between items-center relative overflow-hidden flex-shrink-0",children:[y.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:y.jsx("i",{className:"fas fa-question-circle text-8xl rotate-12"})}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("h2",{className:"text-3xl font-black uppercase tracking-tight",children:"How it Works"}),y.jsx("p",{className:"text-indigo-100 text-xs font-bold uppercase tracking-widest",children:"Platform Guide & Documentation"})]}),y.jsx("button",{onClick:e,className:"bg-white/10 hover:bg-white/20 w-12 h-12 rounded-full flex items-center justify-center transition-all z-10",children:y.jsx("i",{className:"fas fa-times text-xl"})})]}),y.jsxs("div",{className:"p-8 md:p-10 overflow-y-auto space-y-10 scrollbar-hide",children:[y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center",children:y.jsx("i",{className:"fas fa-rocket text-sm"})}),y.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"Getting Started"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"p-5 bg-blue-50 border border-blue-100 rounded-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Welcome to the Board"}),y.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Click the ",y.jsx("span",{className:"font-bold",children:"logo in the header"})," to jump to the Board. Use the ",y.jsx("span",{className:"font-bold",children:"Pool Selector"})," to switch between contests. This app supports multiple simultaneous pools."]})]}),y.jsxs("div",{className:"p-5 bg-blue-50 border border-blue-100 rounded-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Navigation Tabs"}),y.jsxs("ul",{className:"text-xs text-gray-600 space-y-2",children:[y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-th text-indigo-400 mt-0.5"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"Board:"})," View and claim squares"]})]}),y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-trophy text-indigo-400 mt-0.5"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"Winners:"})," Live score tracking and payouts"]})]}),y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-user-check text-indigo-400 mt-0.5"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"My Boxes:"})," Check your status and balance"]})]}),y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-lock text-indigo-400 mt-0.5"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"Admin:"})," Management tools (password protected)"]})]})]})]})]})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-green-100 text-green-600 rounded-xl flex items-center justify-center",children:y.jsx("i",{className:"fas fa-user text-sm"})}),y.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"For Contest Players"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Claiming Squares"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click any white square on the board to select it (they'll highlight in blue). Select as many as you want, then press ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"Claim Selected"})," to register with your name, email, and alias."]})]}),y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Making Payments"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["After registering, use the payment buttons in ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"My Boxes"})," to send funds via Venmo, PayPal, or Zelle. Always include your ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"Alias"})," in the memo."]})]}),y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Checking Your Status"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Go to ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"My Boxes"}),", enter your email, and see your claimed squares, payment history, and current balance at a glance."]})]}),y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Winning & Payouts"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["The ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"Winners"})," tab shows live scores and calculates payouts in real-time. Winners are determined by matching the last digit of each team's score to the grid coordinates."]})]}),y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Sharing the Contest"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click the ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"Share"})," button to get a shareable link. Recipients can see the board and join without needing special access."]})]}),y.jsxs("div",{className:"p-5 bg-gray-50 rounded-2xl border border-gray-100",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-2",children:"Get Help"}),y.jsxs("p",{className:"text-xs text-gray-500 font-medium leading-relaxed",children:["Click the ",y.jsx("span",{className:"text-indigo-600 font-bold",children:"?"})," icon in the header anytime to revisit this guide."]})]})]})]}),y.jsxs("section",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-indigo-100 text-indigo-600 rounded-xl flex items-center justify-center",children:y.jsx("i",{className:"fas fa-lock text-sm"})}),y.jsx("h3",{className:"text-lg font-black text-indigo-900 uppercase",children:"For Administrators"})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Pool & Grid Settings"}),y.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Create new pools, set team names, configure the cost per box, and manage grid locks. Use ",y.jsx("span",{className:"font-bold",children:"Generate Numbers"})," to randomly populate the X and Y axis numbers for winner calculations."]})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Financial Configuration"}),y.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Set the ",y.jsx("span",{className:"font-bold",children:"Charity Share"})," as a fixed amount or percentage. Configure payment accounts (Venmo, PayPal, Zelle, or custom). Track and record all participant payments."]})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Payout Modes"}),y.jsxs("ul",{className:"text-xs text-gray-600 space-y-2 mt-2",children:[y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-check text-indigo-400 mt-1"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"Standard:"})," Split payouts across Q1, Halftime, Q3, and Final."]})]}),y.jsxs("li",{className:"flex gap-2",children:[y.jsx("i",{className:"fas fa-check text-indigo-400 mt-1"})," ",y.jsxs("span",{children:[y.jsx("strong",{children:"Score Change:"})," Award a multiplier payout each time the score changes."]})]})]})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Live Scoring & Winners"}),y.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Enter scores in the ",y.jsx("span",{className:"font-bold",children:"Admin Panel  Winners"})," tab. The system instantly calculates winners by matching score last digits to grid coordinates and applies payouts based on your configuration."]})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Participant & Payment Management"}),y.jsxs("p",{className:"text-xs text-gray-600 font-medium",children:["Manage all participants, edit aliases, log manual payments, and redistribute funds. Unassign squares to reclaim them, and use ",y.jsx("span",{className:"font-bold",children:"Clear All Boxes"})," for bulk resets."]})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Export & Data Management"}),y.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Export the full grid as CSV (with player names and contact info), payment audit logs, or the entire pool state as JSON. Import previously exported states to restore or clone contests."})]}),y.jsxs("div",{className:"p-5 border-l-4 border-indigo-600 bg-indigo-50/50 rounded-r-2xl",children:[y.jsx("p",{className:"text-[10px] font-black text-indigo-900 uppercase mb-1",children:"Multi-Pool Support"}),y.jsx("p",{className:"text-xs text-gray-600 font-medium",children:"Run multiple contests in a single app instance. Create new pools, switch between them using the dropdown, and manage each independently with separate grids, participants, and payouts."})]})]})]})]}),y.jsx("div",{className:"p-8 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:y.jsx("button",{onClick:e,className:"w-full py-4 bg-indigo-900 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Got it, Let's Go!"})})]})}):null;var aT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uT,cT;function dT(){return{geminiUrl:uT,vertexUrl:cT}}function fT(t,e,n,s){var l,a;if(!(t!=null&&t.baseUrl)){const c=dT();return e?(l=c.vertexUrl)!==null&&l!==void 0?l:n:(a=c.geminiUrl)!==null&&a!==void 0?a:s}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Si{}function ue(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(s,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const a=e[l];return a!=null?String(a):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function f(t,e,n){for(let a=0;a<e.length-1;a++){const c=e[a];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in t))if(Array.isArray(n))t[h]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(t[h])){const g=t[h];if(Array.isArray(n))for(let p=0;p<g.length;p++){const _=g[p];f(_,e.slice(a+1),n[p])}else for(const p of g)f(p,e.slice(a+1),n)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in t||(t[h]=[{}]);const g=t[h];f(g[0],e.slice(a+1),n);return}(!t[c]||typeof t[c]!="object")&&(t[c]={}),t=t[c]}const s=e[e.length-1],l=t[s];if(l!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===l)return;if(typeof l=="object"&&typeof n=="object"&&l!==null&&n!==null)Object.assign(l,n);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[s]=n}function d(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let s=0;s<e.length;s++){if(typeof t!="object"||t===null)return n;const l=e[s];if(l.endsWith("[]")){const a=l.slice(0,-2);if(a in t){const c=t[a];return Array.isArray(c)?c.map(h=>d(h,e.slice(s+1),n)):n}else return n}else t=t[l]}return t}catch(s){if(s instanceof TypeError)return n;throw s}}function hT(t,e){for(const[n,s]of Object.entries(e)){const l=n.split("."),a=s.split("."),c=new Set;let h=-1;for(let g=0;g<l.length;g++)if(l[g]==="*"){h=g;break}if(h!==-1&&a.length>h)for(let g=h;g<a.length;g++){const p=a[g];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&c.add(p)}rf(t,l,a,0,c)}}function rf(t,e,n,s,l){if(s>=e.length||typeof t!="object"||t===null)return;const a=e[s];if(a.endsWith("[]")){const c=a.slice(0,-2),h=t;if(c in h&&Array.isArray(h[c]))for(const g of h[c])rf(g,e,n,s+1,l)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const c=t,h=Object.keys(c).filter(p=>!p.startsWith("_")&&!l.has(p)),g={};for(const p of h)g[p]=c[p];for(const[p,_]of Object.entries(g)){const x=[];for(const E of n.slice(s))E==="*"?x.push(p):x.push(E);f(c,x,_)}for(const p of h)delete c[p]}}else{const c=t;a in c&&rf(c[a],e,n,s+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pT(t){const e={},n=d(t,["operationName"]);n!=null&&f(e,["operationName"],n);const s=d(t,["resourceName"]);return s!=null&&f(e,["_url","resourceName"],s),e}function mT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],yT(c)),e}function gT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],vT(c)),e}function yT(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>_T(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function vT(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>xT(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function _T(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],NT(n)),e}function xT(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],AT(n)),e}function ET(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function ST(t){const e={},n=d(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function CT(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],TT(c)),e}function TT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function y_(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],bT(c)),e}function bT(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function NT(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],zf(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function AT(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],zf(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fy||(Fy={}));var zy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(zy||(zy={}));var Yy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Yy||(Yy={}));var Xi;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Xi||(Xi={}));var jy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(jy||(jy={}));var Jy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Jy||(Jy={}));var $y;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($y||($y={}));var Ky;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ky||(Ky={}));var Qy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Qy||(Qy={}));var Xy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Xy||(Xy={}));var Wy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Wy||(Wy={}));var Zy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Zy||(Zy={}));var e0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(e0||(e0={}));var t0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(t0||(t0={}));var n0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(n0||(n0={}));var i0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(i0||(i0={}));var s0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(s0||(s0={}));var o0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(o0||(o0={}));var l0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(l0||(l0={}));var r0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(r0||(r0={}));var a0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(a0||(a0={}));var qa;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(qa||(qa={}));var u0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(u0||(u0={}));var c0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(c0||(c0={}));var d0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(d0||(d0={}));var af;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(af||(af={}));var f0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(f0||(f0={}));var h0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(h0||(h0={}));var uf;(function(t){t.COLLECTION="COLLECTION"})(uf||(uf={}));var p0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(p0||(p0={}));var m0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(m0||(m0={}));var g0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(g0||(g0={}));var y0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(y0||(y0={}));var v0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(v0||(v0={}));var _0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_0||(_0={}));var x0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(x0||(x0={}));var E0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(E0||(E0={}));var S0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(S0||(S0={}));var C0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(C0||(C0={}));var T0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(T0||(T0={}));var b0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(b0||(b0={}));var N0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(N0||(N0={}));var A0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(A0||(A0={}));var w0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(w0||(w0={}));var R0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(R0||(R0={}));var I0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(I0||(I0={}));var M0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(M0||(M0={}));var D0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(D0||(D0={}));var k0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(k0||(k0={}));var U0;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(U0||(U0={}));var P0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(P0||(P0={}));var L0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(L0||(L0={}));var O0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(O0||(O0={}));var B0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(B0||(B0={}));var H0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(H0||(H0={}));var G0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(G0||(G0={}));var Co;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Co||(Co={}));class cf{constructor(e){const n={};for(const s of e.headers.entries())n[s[0]]=s[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bl{get text(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const x=[];for(const E of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[T,N]of Object.entries(E))T!=="text"&&T!=="thought"&&T!=="thoughtSignature"&&(N!==null||N!==void 0)&&x.push(T);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;_=!0,p+=E.text}}return x.length>0&&console.warn(`there are non-text parts ${x} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const x of(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&g!==void 0?g:[]){for(const[E,T]of Object.entries(x))E!=="inlineData"&&(T!==null||T!==void 0)&&_.push(E);x.inlineData&&typeof x.inlineData.data=="string"&&(p+=atob(x.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,n,s,l,a,c,h,g;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,n,s,l,a,c,h,g,p;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.executableCode).map(x=>x.executableCode).filter(x=>x!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,n,s,l,a,c,h,g,p;if(((l=(s=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(h=(c=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||g===void 0?void 0:g.filter(x=>x.codeExecutionResult).map(x=>x.codeExecutionResult).filter(x=>x!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class q0{}class V0{}class wT{}class RT{}class IT{}class MT{}class F0{}class z0{}class Y0{}class DT{}class Va{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Va;let l;const a=e;return n?l=gT(a):l=mT(a),Object.assign(s,l),s}}class j0{}class J0{}class $0{}class K0{}class kT{}class UT{}class PT{}class Yf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new Yf,a=CT(e);return Object.assign(s,a),s}}class LT{}class OT{}class BT{}class Q0{}class HT{get text(){var e,n,s;let l="",a=!1;const c=[];for(const h of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[g,p]of Object.entries(h))g!=="text"&&g!=="thought"&&p!==null&&c.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;a=!0,l+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?l:void 0}get data(){var e,n,s;let l="";const a=[];for(const c of(s=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&s!==void 0?s:[]){for(const[h,g]of Object.entries(c))h!=="inlineData"&&g!==null&&a.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(l+=atob(c.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class GT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const s=new jf,a=y_(e);return Object.assign(s,a),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function v_(t,e){const n=je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function __(t){return Array.isArray(t)?t.map(e=>Fa(e)):[Fa(t)]}function Fa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function x_(t){const e=Fa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function E_(t){const e=Fa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function S_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>X0(e)):[X0(t)]}function df(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function W0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Z0(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Yt(t){if(t==null)throw new Error("ContentUnion is required");return df(t)?t:{role:"user",parts:S_(t)}}function Jf(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const s=Yt(n);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(t.isVertexAI()){const n=Yt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Yt(n)):[Yt(e)]}function Mn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(W0(t)||Z0(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(t)]}const e=[],n=[],s=df(t[0]);for(const l of t){const a=df(l);if(a!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(l);else{if(W0(l)||Z0(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(l)}}return s||e.push({role:"user",parts:S_(n)}),e}function qT(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(s=>s!=="null");if(n.length===1)e.type=Object.values(Xi).includes(n[0].toUpperCase())?n[0].toUpperCase():Xi.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of n)e.anyOf.push({type:Object.values(Xi).includes(s.toUpperCase())?s.toUpperCase():Xi.TYPE_UNSPECIFIED})}}function No(t){const e={},n=["items"],s=["anyOf"],l=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&qT(t.type,e);for(const[c,h]of Object.entries(t))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(Xi).includes(h.toUpperCase())?h.toUpperCase():Xi.TYPE_UNSPECIFIED}else if(n.includes(c))e[c]=No(h);else if(s.includes(c)){const g=[];for(const p of h){if(p.type=="null"){e.nullable=!0;continue}g.push(No(p))}e[c]=g}else if(l.includes(c)){const g={};for(const[p,_]of Object.entries(h))g[p]=No(_);e[c]=g}else{if(c==="additionalProperties")continue;e[c]=h}return e}function $f(t){return No(t)}function Kf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Qf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=No(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=No(e.response));return t}function Ho(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function VT(t,e,n,s=1){const l=!e.startsWith(`${n}/`)&&e.split("/").length===s;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:l?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:l?`${n}/${e}`:e}function Ci(t,e){if(typeof e!="string")throw new Error("name must be a string");return VT(t,e,"cachedContents")}function C_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ss(t){return zf(t)}function FT(t){return t!=null&&typeof t=="object"&&"name"in t}function zT(t){return t!=null&&typeof t=="object"&&"video"in t}function YT(t){return t!=null&&typeof t=="object"&&"uri"in t}function T_(t){var e;let n;if(FT(t)&&(n=t.name),!(YT(t)&&(n=t.uri,n===void 0))&&!(zT(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const l=n.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${n}`);n=l[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function b_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function N_(t){for(const e of["models","tunedModels","publisherModels"])if(jT(t,e))return t[e];return[]}function jT(t,e){return t!==null&&typeof t=="object"&&e in t}function JT(t,e={}){const n=t,s={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(s.responseJsonSchema=n.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function $T(t,e={}){const n=[],s=new Set;for(const l of t){const a=l.name;if(s.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);s.add(a);const c=JT(l,e);c.functionDeclarations&&n.push(...c.functionDeclarations)}return{functionDeclarations:n}}function A_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const s=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,l=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(l>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function KT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function w_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const l=n.inlinedResponses;if(!Array.isArray(l)||l.length===0)return t;let a=!1;for(const c of l){if(typeof c!="object"||c===null)continue;const g=c.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Go(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function R_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QT(t){const e={},n=d(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const s=d(t,["inlinedResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>Ib(c))),f(e,["inlinedResponses"],a)}const l=d(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["inlinedEmbedContentResponses"],a)}return e}function XT(t){const e={},n=d(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsDestination","outputUriPrefix"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigqueryDestination","outputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function WT(t){const e={},n=d(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsDestination","outputUriPrefix"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigqueryDestination","outputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function La(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata","displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["metadata","state"]);l!=null&&f(e,["state"],R_(l));const a=d(t,["metadata","createTime"]);a!=null&&f(e,["createTime"],a);const c=d(t,["metadata","endTime"]);c!=null&&f(e,["endTime"],c);const h=d(t,["metadata","updateTime"]);h!=null&&f(e,["updateTime"],h);const g=d(t,["metadata","model"]);g!=null&&f(e,["model"],g);const p=d(t,["metadata","output"]);return p!=null&&f(e,["dest"],QT(w_(p))),e}function ff(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["state"]);l!=null&&f(e,["state"],R_(l));const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["createTime"]);c!=null&&f(e,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(e,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(e,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(e,["updateTime"],p);const _=d(t,["model"]);_!=null&&f(e,["model"],_);const x=d(t,["inputConfig"]);x!=null&&f(e,["src"],ZT(x));const E=d(t,["outputConfig"]);E!=null&&f(e,["dest"],XT(w_(E)));const T=d(t,["completionStats"]);return T!=null&&f(e,["completionStats"],T),e}function ZT(t){const e={},n=d(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const s=d(t,["gcsSource","uris"]);s!=null&&f(e,["gcsUri"],s);const l=d(t,["bigquerySource","inputUri"]);return l!=null&&f(e,["bigqueryUri"],l),e}function eb(t,e){const n={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&f(n,["fileName"],s);const l=d(e,["inlinedRequests"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>Rb(t,c))),f(n,["requests","requests"],a)}return n}function tb(t){const e={},n=d(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const s=d(t,["gcsUri"]);s!=null&&f(e,["gcsSource","uris"],s);const l=d(t,["bigqueryUri"]);if(l!=null&&f(e,["bigquerySource","inputUri"],l),d(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function nb(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function ib(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function sb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function ob(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],lb(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function lb(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function I_(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>Ob(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function rb(t,e){const n={},s=d(t,["displayName"]);if(e!==void 0&&s!=null&&f(e,["batch","displayName"],s),d(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ab(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["dest"]);return e!==void 0&&l!=null&&f(e,["outputConfig"],WT(KT(l))),n}function ev(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],eb(t,A_(t,l)));const a=d(e,["config"]);return a!=null&&rb(a,n),n}function ub(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],je(t,s));const l=d(e,["src"]);l!=null&&f(n,["inputConfig"],tb(A_(t,l)));const a=d(e,["config"]);return a!=null&&ab(a,n),n}function cb(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["batch","displayName"],s),n}function db(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["src"]);l!=null&&f(n,["batch","inputConfig"],vb(t,l));const a=d(e,["config"]);return a!=null&&cb(a,n),n}function fb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function hb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function pb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function mb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);return a!=null&&f(e,["error"],a),e}function gb(t,e){const n={},s=d(e,["contents"]);if(s!=null){let a=Jf(t,s);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["requests[]","request","content"],a)}const l=d(e,["config"]);return l!=null&&(f(n,["_self"],yb(l,n)),hT(n,{"requests[].*":"requests[].request.*"})),n}function yb(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function vb(t,e){const n={},s=d(e,["fileName"]);s!=null&&f(n,["file_name"],s);const l=d(e,["inlinedRequests"]);return l!=null&&f(n,["requests"],gb(t,l)),n}function _b(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function xb(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Eb(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Sb(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],I_(Yt(l)));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(s,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(s,["responseSchema"],$f(H));const F=d(e,["responseJsonSchema"]);if(F!=null&&f(s,["responseJsonSchema"],F),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=d(e,["safetySettings"]);if(n!==void 0&&q!=null){let ie=q;Array.isArray(ie)&&(ie=ie.map(be=>Bb(be))),f(n,["safetySettings"],ie)}const J=d(e,["tools"]);if(n!==void 0&&J!=null){let ie=Ho(J);Array.isArray(ie)&&(ie=ie.map(be=>Gb(Bo(be)))),f(n,["tools"],ie)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],Hb(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],Ci(t,B));const X=d(e,["responseModalities"]);X!=null&&f(s,["responseModalities"],X);const ve=d(e,["mediaResolution"]);ve!=null&&f(s,["mediaResolution"],ve);const oe=d(e,["speechConfig"]);if(oe!=null&&f(s,["speechConfig"],Kf(oe)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=d(e,["thinkingConfig"]);de!=null&&f(s,["thinkingConfig"],de);const ge=d(e,["imageConfig"]);ge!=null&&f(s,["imageConfig"],wb(ge));const Se=d(e,["enableEnhancedCivicAnswers"]);if(Se!=null&&f(s,["enableEnhancedCivicAnswers"],Se),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function Cb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>ob(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function Tb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function bb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Go(t,s)),n}function Nb(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Ab(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function wb(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Rb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["request","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let h=Mn(l);Array.isArray(h)&&(h=h.map(g=>I_(g))),f(n,["request","contents"],h)}const a=d(e,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(e,["config"]);return c!=null&&f(n,["request","generationConfig"],Sb(t,c,d(n,["request"],{}))),n}function Ib(t){const e={},n=d(t,["response"]);n!=null&&f(e,["response"],Cb(n));const s=d(t,["error"]);return s!=null&&f(e,["error"],s),e}function Mb(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);if(e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),d(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Db(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);e!==void 0&&l!=null&&f(e,["_query","pageToken"],l);const a=d(t,["filter"]);return e!==void 0&&a!=null&&f(e,["_query","filter"],a),n}function kb(t){const e={},n=d(t,["config"]);return n!=null&&Mb(n,e),e}function Ub(t){const e={},n=d(t,["config"]);return n!=null&&Db(n,e),e}function Pb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["operations"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>La(c))),f(e,["batchJobs"],a)}return e}function Lb(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["batchPredictionJobs"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>ff(c))),f(e,["batchJobs"],a)}return e}function Ob(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],_b(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],xb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],nb(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function Bb(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function Hb(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],Eb(s)),e}function Gb(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],Nb(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],Ab(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _i;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(_i||(_i={}));class Ds{constructor(e,n,s,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,s,l)}init(e,n,s){var l,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!s||Object.keys(s).length===0?c={config:{}}:typeof s=="object"?c=Object.assign({},s):c=s,c.config&&(c.config.pageToken=n.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(a=(l=c.config)===null||l===void 0?void 0:l.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qb extends Si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(_i.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=ev(this.apiClient,e),s=n._url,l=ue("{model}:batchGenerateContent",s),h=n.batch.inputConfig.requests,g=h.requests,p=[];for(const _ of g){const x=Object.assign({},_);if(x.systemInstruction){const E=x.systemInstruction;delete x.systemInstruction;const T=x.request;T.systemInstruction=E,x.request=T}p.push(x)}return h.requests=p,delete n.config,delete n._url,delete n._query,{path:l,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const s=n?Object.assign({},n):{},l=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${l}`),s.dest===void 0){const a=this.getGcsUri(e),c=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?s.dest=`${a.slice(0,-6)}/dest`:s.dest=`${a}_dest_${l}`;else if(c)s.dest=`${c}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ub(this.apiClient,e);return h=ue("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>ff(_))}else{const p=ev(this.apiClient,e);return h=ue("{model}:batchGenerateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>La(_))}}async createEmbeddingsInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=db(this.apiClient,e);return a=ue("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>La(g))}}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=bb(this.apiClient,e);return h=ue("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>ff(_))}else{const p=Tb(this.apiClient,e);return h=ue("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>La(_))}}async cancel(e){var n,s,l,a;let c="",h={};if(this.apiClient.isVertexAI()){const g=sb(this.apiClient,e);c=ue("batchPredictionJobs/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=ib(this.apiClient,e);c=ue("batches/{name}:cancel",g._url),h=g._query,delete g._url,delete g._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Ub(e);return h=ue("batchPredictionJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=Lb(_),E=new Q0;return Object.assign(E,x),E})}else{const p=kb(e);return h=ue("batches",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=Pb(_),E=new Q0;return Object.assign(E,x),E})}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=hb(this.apiClient,e);return h=ue("batchPredictionJobs/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>mb(_))}else{const p=fb(this.apiClient,e);return h=ue("batches/{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>pb(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vb(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function tv(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>dN(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function Fb(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let _=Mn(c);Array.isArray(_)&&(_=_.map(x=>tv(x))),f(e,["contents"],_)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],tv(Yt(h)));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(x=>hN(x))),f(e,["tools"],_)}const p=d(t,["toolConfig"]);if(e!==void 0&&p!=null&&f(e,["toolConfig"],fN(p)),d(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function zb(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);e!==void 0&&l!=null&&f(e,["expireTime"],l);const a=d(t,["displayName"]);e!==void 0&&a!=null&&f(e,["displayName"],a);const c=d(t,["contents"]);if(e!==void 0&&c!=null){let x=Mn(c);Array.isArray(x)&&(x=x.map(E=>E)),f(e,["contents"],x)}const h=d(t,["systemInstruction"]);e!==void 0&&h!=null&&f(e,["systemInstruction"],Yt(h));const g=d(t,["tools"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(E=>pN(E))),f(e,["tools"],x)}const p=d(t,["toolConfig"]);e!==void 0&&p!=null&&f(e,["toolConfig"],p);const _=d(t,["kmsKeyName"]);return e!==void 0&&_!=null&&f(e,["encryption_spec","kmsKeyName"],_),n}function Yb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],v_(t,s));const l=d(e,["config"]);return l!=null&&Fb(l,n),n}function jb(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["model"],v_(t,s));const l=d(e,["config"]);return l!=null&&zb(l,n),n}function Jb(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ci(t,s)),n}function $b(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ci(t,s)),n}function Kb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Qb(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function Xb(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Wb(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zb(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function eN(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function tN(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ci(t,s)),n}function nN(t,e){const n={},s=d(e,["name"]);return s!=null&&f(n,["_url","name"],Ci(t,s)),n}function iN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function sN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function oN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function lN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function rN(t){const e={},n=d(t,["config"]);return n!=null&&oN(n,e),e}function aN(t){const e={},n=d(t,["config"]);return n!=null&&lN(n,e),e}function uN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function cN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["cachedContents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["cachedContents"],a)}return e}function dN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],Xb(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],Wb(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Vb(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function fN(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],Zb(s)),e}function hN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],iN(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],sN(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function pN(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>eN(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function mN(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function gN(t,e){const n={},s=d(t,["ttl"]);e!==void 0&&s!=null&&f(e,["ttl"],s);const l=d(t,["expireTime"]);return e!==void 0&&l!=null&&f(e,["expireTime"],l),n}function yN(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],Ci(t,s));const l=d(e,["config"]);return l!=null&&mN(l,n),n}function vN(t,e){const n={},s=d(e,["name"]);s!=null&&f(n,["_url","name"],Ci(t,s));const l=d(e,["config"]);return l!=null&&gN(l,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _N extends Si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(_i.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(n),n)}async create(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jb(this.apiClient,e);return h=ue("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=Yb(this.apiClient,e);return h=ue("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=nN(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=tN(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=$b(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=Qb(_),E=new $0;return Object.assign(E,x),E})}else{const p=Jb(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=Kb(_),E=new $0;return Object.assign(E,x),E})}}async update(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=vN(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>_)}else{const p=yN(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>_)}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=aN(e);return h=ue("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=cN(_),E=new K0;return Object.assign(E,x),E})}else{const p=rN(e);return h=ue("cachedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=uN(_),E=new K0;return Object.assign(E,x),E})}}}function za(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(t);l<s.length;l++)e.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(t,s[l])&&(n[s[l]]=t[s[l]]);return n}function nv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],s=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Te(t){return this instanceof Te?(this.v=t,this):new Te(t)}function Bn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=n.apply(t,e||[]),l,a=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),l[Symbol.asyncIterator]=function(){return this},l;function c(T){return function(N){return Promise.resolve(N).then(T,x)}}function h(T,N){s[T]&&(l[T]=function(M){return new Promise(function(I,H){a.push([T,M,I,H])>1||g(T,M)})},N&&(l[T]=N(l[T])))}function g(T,N){try{p(s[T](N))}catch(M){E(a[0][3],M)}}function p(T){T.value instanceof Te?Promise.resolve(T.value.v).then(_,x):E(a[0][2],T)}function _(T){g("next",T)}function x(T){g("throw",T)}function E(T,N){T(N),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Hn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nv=="function"?nv(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(a){n[a]=t[a]&&function(c){return new Promise(function(h,g){c=t[a](c),l(h,g,c.done,c.value)})}}function l(a,c,h,g){Promise.resolve(g).then(function(p){a({value:p,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xN(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:M_(n)}function M_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function EN(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let s=0;for(;s<n;)if(t[s].role==="user")e.push(t[s]),s++;else{const l=[];let a=!0;for(;s<n&&t[s].role==="model";)l.push(t[s]),a&&!M_(t[s])&&(a=!1),s++;a?e.push(...l):e.pop()}return e}class SN{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new CN(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class CN{constructor(e,n,s,l={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=s,this.config=l,this.history=a,this.sendPromise=Promise.resolve(),EN(a)}async sendMessage(e){var n;await this.sendPromise;const s=Yt(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,c,h;const g=await l,p=(c=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||c===void 0?void 0:c.content,_=g.automaticFunctionCallingHistory,x=this.getHistory(!0).length;let E=[];_!=null&&(E=(h=_.slice(x))!==null&&h!==void 0?h:[]);const T=p?[p]:[];this.recordHistory(s,T,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var n;await this.sendPromise;const s=Yt(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const a=await l;return this.processStreamResponse(a,s)}getHistory(e=!1){const n=e?iv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Bn(this,arguments,function*(){var l,a,c,h,g,p;const _=[];try{for(var x=!0,E=Hn(e),T;T=yield Te(E.next()),l=T.done,!l;x=!0){h=T.value,x=!1;const N=h;if(xN(N)){const M=(p=(g=N.candidates)===null||g===void 0?void 0:g[0])===null||p===void 0?void 0:p.content;M!==void 0&&_.push(M)}yield yield Te(N)}}catch(N){a={error:N}}finally{try{!x&&!l&&(c=E.return)&&(yield Te(c.call(E)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,s){let l=[];n.length>0&&n.every(a=>a.role!==void 0)?l=n:l.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...iv(s)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xl extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Xl.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TN(t){const e={},n=d(t,["file"]);return n!=null&&f(e,["file"],n),e}function bN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function NN(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],T_(n)),e}function AN(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function wN(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","file"],T_(n)),e}function RN(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function IN(t){const e={},n=d(t,["config"]);return n!=null&&RN(n,e),e}function MN(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["files"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends Si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(_i.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=IN(e);return a=ue("files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const p=MN(g),_=new LT;return Object.assign(_,p),_})}}async createInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=TN(e);return a=ue("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=bN(g),_=new OT;return Object.assign(_,p),_})}}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=wN(e);return a=ue("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=NN(e);return a=ue("files/{file}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const p=AN(g),_=new BT;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oa(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function kN(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>KN(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function UN(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function PN(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function LN(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function ON(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(t,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const H=d(t,["seed"]);H!=null&&f(e,["seed"],H);const F=d(t,["speechConfig"]);F!=null&&f(e,["speechConfig"],F);const q=d(t,["stopSequences"]);q!=null&&f(e,["stopSequences"],q);const J=d(t,["temperature"]);J!=null&&f(e,["temperature"],J);const se=d(t,["thinkingConfig"]);se!=null&&f(e,["thinkingConfig"],se);const B=d(t,["topK"]);B!=null&&f(e,["topK"],B);const X=d(t,["topP"]);if(X!=null&&f(e,["topP"],X),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BN(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function HN(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function GN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],kN(Yt(N)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let B=Ho(M);Array.isArray(B)&&(B=B.map(X=>XN(Bo(X)))),f(e,["setup","tools"],B)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],QN(I));const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const F=d(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","outputAudioTranscription"],F);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const se=d(t,["proactivity"]);if(e!==void 0&&se!=null&&f(e,["setup","proactivity"],se),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function qN(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],ON(s));const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],Yt(N));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let X=Ho(M);Array.isArray(X)&&(X=X.map(ve=>WN(Bo(ve)))),f(e,["setup","tools"],X)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],I);const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const F=d(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","outputAudioTranscription"],F);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const se=d(t,["proactivity"]);e!==void 0&&se!=null&&f(e,["setup","proactivity"],se);const B=d(t,["explicitVadSignal"]);return e!==void 0&&B!=null&&f(e,["setup","explicitVadSignal"],B),n}function VN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],je(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],GN(l,n)),n}function FN(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],je(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],qN(l,n)),n}function zN(t){const e={},n=d(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function YN(t){const e={},n=d(t,["weightedPrompts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["weightedPrompts"],s)}return e}function jN(t){const e={},n=d(t,["media"]);if(n!=null){let p=__(n);Array.isArray(p)&&(p=p.map(_=>Oa(_))),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],Oa(E_(s)));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],Oa(x_(a)));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function JN(t){const e={},n=d(t,["media"]);if(n!=null){let p=__(n);Array.isArray(p)&&(p=p.map(_=>_)),f(e,["mediaChunks"],p)}const s=d(t,["audio"]);s!=null&&f(e,["audio"],E_(s));const l=d(t,["audioStreamEnd"]);l!=null&&f(e,["audioStreamEnd"],l);const a=d(t,["video"]);a!=null&&f(e,["video"],x_(a));const c=d(t,["text"]);c!=null&&f(e,["text"],c);const h=d(t,["activityStart"]);h!=null&&f(e,["activityStart"],h);const g=d(t,["activityEnd"]);return g!=null&&f(e,["activityEnd"],g),e}function $N(t){const e={},n=d(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const s=d(t,["serverContent"]);s!=null&&f(e,["serverContent"],s);const l=d(t,["toolCall"]);l!=null&&f(e,["toolCall"],l);const a=d(t,["toolCallCancellation"]);a!=null&&f(e,["toolCallCancellation"],a);const c=d(t,["usageMetadata"]);c!=null&&f(e,["usageMetadata"],ZN(c));const h=d(t,["goAway"]);h!=null&&f(e,["goAway"],h);const g=d(t,["sessionResumptionUpdate"]);g!=null&&f(e,["sessionResumptionUpdate"],g);const p=d(t,["voiceActivityDetectionSignal"]);p!=null&&f(e,["voiceActivityDetectionSignal"],p);const _=d(t,["voiceActivity"]);return _!=null&&f(e,["voiceActivity"],eA(_)),e}function KN(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],UN(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],PN(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],Oa(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function QN(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function XN(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],BN(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],HN(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function WN(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>LN(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function ZN(t){const e={},n=d(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const s=d(t,["cachedContentTokenCount"]);s!=null&&f(e,["cachedContentTokenCount"],s);const l=d(t,["candidatesTokenCount"]);l!=null&&f(e,["responseTokenCount"],l);const a=d(t,["toolUsePromptTokenCount"]);a!=null&&f(e,["toolUsePromptTokenCount"],a);const c=d(t,["thoughtsTokenCount"]);c!=null&&f(e,["thoughtsTokenCount"],c);const h=d(t,["totalTokenCount"]);h!=null&&f(e,["totalTokenCount"],h);const g=d(t,["promptTokensDetails"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["promptTokensDetails"],T)}const p=d(t,["cacheTokensDetails"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["cacheTokensDetails"],T)}const _=d(t,["candidatesTokensDetails"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["responseTokensDetails"],T)}const x=d(t,["toolUsePromptTokensDetails"]);if(x!=null){let T=x;Array.isArray(T)&&(T=T.map(N=>N)),f(e,["toolUsePromptTokensDetails"],T)}const E=d(t,["trafficType"]);return E!=null&&f(e,["trafficType"],E),e}function eA(t){const e={},n=d(t,["type"]);return n!=null&&f(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tA(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function nA(t){const e={},n=d(t,["content"]);n!=null&&f(e,["content"],n);const s=d(t,["citationMetadata"]);s!=null&&f(e,["citationMetadata"],iA(s));const l=d(t,["tokenCount"]);l!=null&&f(e,["tokenCount"],l);const a=d(t,["finishReason"]);a!=null&&f(e,["finishReason"],a);const c=d(t,["avgLogprobs"]);c!=null&&f(e,["avgLogprobs"],c);const h=d(t,["groundingMetadata"]);h!=null&&f(e,["groundingMetadata"],h);const g=d(t,["index"]);g!=null&&f(e,["index"],g);const p=d(t,["logprobsResult"]);p!=null&&f(e,["logprobsResult"],p);const _=d(t,["safetyRatings"]);if(_!=null){let E=_;Array.isArray(E)&&(E=E.map(T=>T)),f(e,["safetyRatings"],E)}const x=d(t,["urlContextMetadata"]);return x!=null&&f(e,["urlContextMetadata"],x),e}function iA(t){const e={},n=d(t,["citationSources"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>l)),f(e,["citations"],s)}return e}function sA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let a=Mn(l);Array.isArray(a)&&(a=a.map(c=>c)),f(n,["contents"],a)}return n}function oA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["tokensInfo"],l)}return e}function lA(t){const e={},n=d(t,["values"]);n!=null&&f(e,["values"],n);const s=d(t,["statistics"]);return s!=null&&f(e,["statistics"],rA(s)),e}function rA(t){const e={},n=d(t,["truncated"]);n!=null&&f(e,["truncated"],n);const s=d(t,["token_count"]);return s!=null&&f(e,["tokenCount"],s),e}function du(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>gw(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function aA(t){const e={},n=d(t,["controlType"]);n!=null&&f(e,["controlType"],n);const s=d(t,["enableControlImageComputation"]);return s!=null&&f(e,["computeControl"],s),e}function uA(t){const e={};if(d(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function cA(t,e){const n={},s=d(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],Yt(s));const l=d(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>P_(h))),f(e,["tools"],c)}const a=d(t,["generationConfig"]);return e!==void 0&&a!=null&&f(e,["generationConfig"],tw(a)),n}function dA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let c=Mn(l);Array.isArray(c)&&(c=c.map(h=>du(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&uA(a),n}function fA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let c=Mn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&cA(a,n),n}function hA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);s!=null&&f(e,["totalTokens"],s);const l=d(t,["cachedContentTokenCount"]);return l!=null&&f(e,["cachedContentTokenCount"],l),e}function pA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["totalTokens"]);return s!=null&&f(e,["totalTokens"],s),e}function mA(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],je(t,s)),n}function gA(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],je(t,s)),n}function yA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function vA(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function _A(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const H=d(t,["labels"]);e!==void 0&&H!=null&&f(e,["labels"],H);const F=d(t,["editMode"]);e!==void 0&&F!=null&&f(e,["parameters","editMode"],F);const q=d(t,["baseSteps"]);return e!==void 0&&q!=null&&f(e,["parameters","editConfig","baseSteps"],q),n}function xA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["referenceImages"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>Sw(g))),f(n,["instances[0]","referenceImages"],h)}const c=d(e,["config"]);return c!=null&&_A(c,n),n}function EA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>fu(a))),f(e,["generatedImages"],l)}return e}function SA(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["requests[]","taskType"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["requests[]","title"],l);const a=d(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&f(e,["requests[]","outputDimensionality"],a),d(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CA(t,e){const n={},s=d(t,["taskType"]);e!==void 0&&s!=null&&f(e,["instances[]","task_type"],s);const l=d(t,["title"]);e!==void 0&&l!=null&&f(e,["instances[]","title"],l);const a=d(t,["outputDimensionality"]);e!==void 0&&a!=null&&f(e,["parameters","outputDimensionality"],a);const c=d(t,["mimeType"]);e!==void 0&&c!=null&&f(e,["instances[]","mimeType"],c);const h=d(t,["autoTruncate"]);return e!==void 0&&h!=null&&f(e,["parameters","autoTruncate"],h),n}function TA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let h=Jf(t,l);Array.isArray(h)&&(h=h.map(g=>g)),f(n,["requests[]","content"],h)}const a=d(e,["config"]);a!=null&&SA(a,n);const c=d(e,["model"]);return c!==void 0&&f(n,["requests[]","model"],je(t,c)),n}function bA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let c=Jf(t,l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["instances[]","content"],c)}const a=d(e,["config"]);return a!=null&&CA(a,n),n}function NA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function AA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions[]","embeddings"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>lA(c))),f(e,["embeddings"],a)}const l=d(t,["metadata"]);return l!=null&&f(e,["metadata"],l),e}function wA(t){const e={},n=d(t,["endpoint"]);n!=null&&f(e,["name"],n);const s=d(t,["deployedModelId"]);return s!=null&&f(e,["deployedModelId"],s),e}function RA(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function IA(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MA(t){const e={},n=d(t,["allowedFunctionNames"]);n!=null&&f(e,["allowedFunctionNames"],n);const s=d(t,["mode"]);if(s!=null&&f(e,["mode"],s),d(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DA(t){const e={},n=d(t,["description"]);n!=null&&f(e,["description"],n);const s=d(t,["name"]);s!=null&&f(e,["name"],s);const l=d(t,["parameters"]);l!=null&&f(e,["parameters"],l);const a=d(t,["parametersJsonSchema"]);a!=null&&f(e,["parametersJsonSchema"],a);const c=d(t,["response"]);c!=null&&f(e,["response"],c);const h=d(t,["responseJsonSchema"]);if(h!=null&&f(e,["responseJsonSchema"],h),d(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function kA(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],du(Yt(l)));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(s,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(s,["responseSchema"],$f(H));const F=d(e,["responseJsonSchema"]);if(F!=null&&f(s,["responseJsonSchema"],F),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=d(e,["safetySettings"]);if(n!==void 0&&q!=null){let ie=q;Array.isArray(ie)&&(ie=ie.map(be=>Cw(be))),f(n,["safetySettings"],ie)}const J=d(e,["tools"]);if(n!==void 0&&J!=null){let ie=Ho(J);Array.isArray(ie)&&(ie=ie.map(be=>Iw(Bo(be)))),f(n,["tools"],ie)}const se=d(e,["toolConfig"]);if(n!==void 0&&se!=null&&f(n,["toolConfig"],Rw(se)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=d(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],Ci(t,B));const X=d(e,["responseModalities"]);X!=null&&f(s,["responseModalities"],X);const ve=d(e,["mediaResolution"]);ve!=null&&f(s,["mediaResolution"],ve);const oe=d(e,["speechConfig"]);if(oe!=null&&f(s,["speechConfig"],Kf(oe)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const de=d(e,["thinkingConfig"]);de!=null&&f(s,["thinkingConfig"],de);const ge=d(e,["imageConfig"]);ge!=null&&f(s,["imageConfig"],lw(ge));const Se=d(e,["enableEnhancedCivicAnswers"]);if(Se!=null&&f(s,["enableEnhancedCivicAnswers"],Se),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function UA(t,e,n){const s={},l=d(e,["systemInstruction"]);n!==void 0&&l!=null&&f(n,["systemInstruction"],Yt(l));const a=d(e,["temperature"]);a!=null&&f(s,["temperature"],a);const c=d(e,["topP"]);c!=null&&f(s,["topP"],c);const h=d(e,["topK"]);h!=null&&f(s,["topK"],h);const g=d(e,["candidateCount"]);g!=null&&f(s,["candidateCount"],g);const p=d(e,["maxOutputTokens"]);p!=null&&f(s,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&f(s,["stopSequences"],_);const x=d(e,["responseLogprobs"]);x!=null&&f(s,["responseLogprobs"],x);const E=d(e,["logprobs"]);E!=null&&f(s,["logprobs"],E);const T=d(e,["presencePenalty"]);T!=null&&f(s,["presencePenalty"],T);const N=d(e,["frequencyPenalty"]);N!=null&&f(s,["frequencyPenalty"],N);const M=d(e,["seed"]);M!=null&&f(s,["seed"],M);const I=d(e,["responseMimeType"]);I!=null&&f(s,["responseMimeType"],I);const H=d(e,["responseSchema"]);H!=null&&f(s,["responseSchema"],$f(H));const F=d(e,["responseJsonSchema"]);F!=null&&f(s,["responseJsonSchema"],F);const q=d(e,["routingConfig"]);q!=null&&f(s,["routingConfig"],q);const J=d(e,["modelSelectionConfig"]);J!=null&&f(s,["modelConfig"],J);const se=d(e,["safetySettings"]);if(n!==void 0&&se!=null){let K=se;Array.isArray(K)&&(K=K.map(le=>le)),f(n,["safetySettings"],K)}const B=d(e,["tools"]);if(n!==void 0&&B!=null){let K=Ho(B);Array.isArray(K)&&(K=K.map(le=>P_(Bo(le)))),f(n,["tools"],K)}const X=d(e,["toolConfig"]);n!==void 0&&X!=null&&f(n,["toolConfig"],X);const ve=d(e,["labels"]);n!==void 0&&ve!=null&&f(n,["labels"],ve);const oe=d(e,["cachedContent"]);n!==void 0&&oe!=null&&f(n,["cachedContent"],Ci(t,oe));const de=d(e,["responseModalities"]);de!=null&&f(s,["responseModalities"],de);const ge=d(e,["mediaResolution"]);ge!=null&&f(s,["mediaResolution"],ge);const Se=d(e,["speechConfig"]);Se!=null&&f(s,["speechConfig"],Kf(Se));const ie=d(e,["audioTimestamp"]);ie!=null&&f(s,["audioTimestamp"],ie);const be=d(e,["thinkingConfig"]);be!=null&&f(s,["thinkingConfig"],be);const Ge=d(e,["imageConfig"]);if(Ge!=null&&f(s,["imageConfig"],rw(Ge)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const U=d(e,["modelArmorConfig"]);return n!==void 0&&U!=null&&f(n,["modelArmorConfig"],U),s}function sv(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let c=Mn(l);Array.isArray(c)&&(c=c.map(h=>du(h))),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],kA(t,a,n)),n}function ov(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["contents"]);if(l!=null){let c=Mn(l);Array.isArray(c)&&(c=c.map(h=>h)),f(n,["contents"],c)}const a=d(e,["config"]);return a!=null&&f(n,["generationConfig"],UA(t,a,n)),n}function lv(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(p=>nA(p))),f(e,["candidates"],g)}const l=d(t,["modelVersion"]);l!=null&&f(e,["modelVersion"],l);const a=d(t,["promptFeedback"]);a!=null&&f(e,["promptFeedback"],a);const c=d(t,["responseId"]);c!=null&&f(e,["responseId"],c);const h=d(t,["usageMetadata"]);return h!=null&&f(e,["usageMetadata"],h),e}function rv(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(_=>_)),f(e,["candidates"],p)}const l=d(t,["createTime"]);l!=null&&f(e,["createTime"],l);const a=d(t,["modelVersion"]);a!=null&&f(e,["modelVersion"],a);const c=d(t,["promptFeedback"]);c!=null&&f(e,["promptFeedback"],c);const h=d(t,["responseId"]);h!=null&&f(e,["responseId"],h);const g=d(t,["usageMetadata"]);return g!=null&&f(e,["usageMetadata"],g),e}function PA(t,e){const n={};if(d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const a=d(t,["guidanceScale"]);if(e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=d(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=d(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const g=d(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&f(e,["parameters","includeSafetyAttributes"],g);const p=d(t,["includeRaiReason"]);e!==void 0&&p!=null&&f(e,["parameters","includeRaiReason"],p);const _=d(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const x=d(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const E=d(t,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&f(e,["parameters","outputOptions","compressionQuality"],E),d(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const T=d(t,["imageSize"]);if(e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T),d(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function LA(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const a=d(t,["numberOfImages"]);e!==void 0&&a!=null&&f(e,["parameters","sampleCount"],a);const c=d(t,["aspectRatio"]);e!==void 0&&c!=null&&f(e,["parameters","aspectRatio"],c);const h=d(t,["guidanceScale"]);e!==void 0&&h!=null&&f(e,["parameters","guidanceScale"],h);const g=d(t,["seed"]);e!==void 0&&g!=null&&f(e,["parameters","seed"],g);const p=d(t,["safetyFilterLevel"]);e!==void 0&&p!=null&&f(e,["parameters","safetySetting"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(t,["includeSafetyAttributes"]);e!==void 0&&x!=null&&f(e,["parameters","includeSafetyAttributes"],x);const E=d(t,["includeRaiReason"]);e!==void 0&&E!=null&&f(e,["parameters","includeRaiReason"],E);const T=d(t,["language"]);e!==void 0&&T!=null&&f(e,["parameters","language"],T);const N=d(t,["outputMimeType"]);e!==void 0&&N!=null&&f(e,["parameters","outputOptions","mimeType"],N);const M=d(t,["outputCompressionQuality"]);e!==void 0&&M!=null&&f(e,["parameters","outputOptions","compressionQuality"],M);const I=d(t,["addWatermark"]);e!==void 0&&I!=null&&f(e,["parameters","addWatermark"],I);const H=d(t,["labels"]);e!==void 0&&H!=null&&f(e,["labels"],H);const F=d(t,["imageSize"]);e!==void 0&&F!=null&&f(e,["parameters","sampleImageSize"],F);const q=d(t,["enhancePrompt"]);return e!==void 0&&q!=null&&f(e,["parameters","enhancePrompt"],q),n}function OA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&PA(a,n),n}function BA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["config"]);return a!=null&&LA(a,n),n}function HA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>XA(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],k_(l)),e}function GA(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>fu(c))),f(e,["generatedImages"],a)}const l=d(t,["positivePromptSafetyAttributes"]);return l!=null&&f(e,["positivePromptSafetyAttributes"],U_(l)),e}function qA(t,e){const n={},s=d(t,["numberOfVideos"]);if(e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s),d(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=d(t,["durationSeconds"]);if(e!==void 0&&l!=null&&f(e,["parameters","durationSeconds"],l),d(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=d(t,["aspectRatio"]);e!==void 0&&a!=null&&f(e,["parameters","aspectRatio"],a);const c=d(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=d(t,["personGeneration"]);if(e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h),d(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(t,["negativePrompt"]);e!==void 0&&g!=null&&f(e,["parameters","negativePrompt"],g);const p=d(t,["enhancePrompt"]);if(e!==void 0&&p!=null&&f(e,["parameters","enhancePrompt"],p),d(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(t,["lastFrame"]);e!==void 0&&_!=null&&f(e,["instances[0]","lastFrame"],hu(_));const x=d(t,["referenceImages"]);if(e!==void 0&&x!=null){let E=x;Array.isArray(E)&&(E=E.map(T=>Fw(T))),f(e,["instances[0]","referenceImages"],E)}if(d(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function VA(t,e){const n={},s=d(t,["numberOfVideos"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["outputGcsUri"]);e!==void 0&&l!=null&&f(e,["parameters","storageUri"],l);const a=d(t,["fps"]);e!==void 0&&a!=null&&f(e,["parameters","fps"],a);const c=d(t,["durationSeconds"]);e!==void 0&&c!=null&&f(e,["parameters","durationSeconds"],c);const h=d(t,["seed"]);e!==void 0&&h!=null&&f(e,["parameters","seed"],h);const g=d(t,["aspectRatio"]);e!==void 0&&g!=null&&f(e,["parameters","aspectRatio"],g);const p=d(t,["resolution"]);e!==void 0&&p!=null&&f(e,["parameters","resolution"],p);const _=d(t,["personGeneration"]);e!==void 0&&_!=null&&f(e,["parameters","personGeneration"],_);const x=d(t,["pubsubTopic"]);e!==void 0&&x!=null&&f(e,["parameters","pubsubTopic"],x);const E=d(t,["negativePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","negativePrompt"],E);const T=d(t,["enhancePrompt"]);e!==void 0&&T!=null&&f(e,["parameters","enhancePrompt"],T);const N=d(t,["generateAudio"]);e!==void 0&&N!=null&&f(e,["parameters","generateAudio"],N);const M=d(t,["lastFrame"]);e!==void 0&&M!=null&&f(e,["instances[0]","lastFrame"],Vn(M));const I=d(t,["referenceImages"]);if(e!==void 0&&I!=null){let q=I;Array.isArray(q)&&(q=q.map(J=>zw(J))),f(e,["instances[0]","referenceImages"],q)}const H=d(t,["mask"]);e!==void 0&&H!=null&&f(e,["instances[0]","mask"],Vw(H));const F=d(t,["compressionQuality"]);return e!==void 0&&F!=null&&f(e,["parameters","compressionQuality"],F),n}function FA(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response","generateVideoResponse"]);return c!=null&&f(e,["response"],JA(c)),e}function zA(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],$A(c)),e}function YA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],hu(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],L_(c));const h=d(e,["source"]);h!=null&&KA(h,n);const g=d(e,["config"]);return g!=null&&qA(g,n),n}function jA(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["prompt"]);l!=null&&f(n,["instances[0]","prompt"],l);const a=d(e,["image"]);a!=null&&f(n,["instances[0]","image"],Vn(a));const c=d(e,["video"]);c!=null&&f(n,["instances[0]","video"],O_(c));const h=d(e,["source"]);h!=null&&QA(h,n);const g=d(e,["config"]);return g!=null&&VA(g,n),n}function JA(t){const e={},n=d(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>ZA(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function $A(t){const e={},n=d(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(c=>ew(c))),f(e,["generatedVideos"],a)}const s=d(t,["raiMediaFilteredCount"]);s!=null&&f(e,["raiMediaFilteredCount"],s);const l=d(t,["raiMediaFilteredReasons"]);return l!=null&&f(e,["raiMediaFilteredReasons"],l),e}function KA(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],hu(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],L_(a)),n}function QA(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Vn(l));const a=d(t,["video"]);return e!==void 0&&a!=null&&f(e,["instances[0]","video"],O_(a)),n}function XA(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],aw(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);return l!=null&&f(e,["safetyAttributes"],k_(l)),e}function fu(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["image"],D_(n));const s=d(t,["raiFilteredReason"]);s!=null&&f(e,["raiFilteredReason"],s);const l=d(t,["_self"]);l!=null&&f(e,["safetyAttributes"],U_(l));const a=d(t,["prompt"]);return a!=null&&f(e,["enhancedPrompt"],a),e}function WA(t){const e={},n=d(t,["_self"]);n!=null&&f(e,["mask"],D_(n));const s=d(t,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(e,["labels"],l)}return e}function ZA(t){const e={},n=d(t,["video"]);return n!=null&&f(e,["video"],Gw(n)),e}function ew(t){const e={},n=d(t,["_self"]);return n!=null&&f(e,["video"],qw(n)),e}function tw(t){const e={},n=d(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const s=d(t,["responseJsonSchema"]);s!=null&&f(e,["responseJsonSchema"],s);const l=d(t,["audioTimestamp"]);l!=null&&f(e,["audioTimestamp"],l);const a=d(t,["candidateCount"]);a!=null&&f(e,["candidateCount"],a);const c=d(t,["enableAffectiveDialog"]);c!=null&&f(e,["enableAffectiveDialog"],c);const h=d(t,["frequencyPenalty"]);h!=null&&f(e,["frequencyPenalty"],h);const g=d(t,["logprobs"]);g!=null&&f(e,["logprobs"],g);const p=d(t,["maxOutputTokens"]);p!=null&&f(e,["maxOutputTokens"],p);const _=d(t,["mediaResolution"]);_!=null&&f(e,["mediaResolution"],_);const x=d(t,["presencePenalty"]);x!=null&&f(e,["presencePenalty"],x);const E=d(t,["responseLogprobs"]);E!=null&&f(e,["responseLogprobs"],E);const T=d(t,["responseMimeType"]);T!=null&&f(e,["responseMimeType"],T);const N=d(t,["responseModalities"]);N!=null&&f(e,["responseModalities"],N);const M=d(t,["responseSchema"]);M!=null&&f(e,["responseSchema"],M);const I=d(t,["routingConfig"]);I!=null&&f(e,["routingConfig"],I);const H=d(t,["seed"]);H!=null&&f(e,["seed"],H);const F=d(t,["speechConfig"]);F!=null&&f(e,["speechConfig"],F);const q=d(t,["stopSequences"]);q!=null&&f(e,["stopSequences"],q);const J=d(t,["temperature"]);J!=null&&f(e,["temperature"],J);const se=d(t,["thinkingConfig"]);se!=null&&f(e,["thinkingConfig"],se);const B=d(t,["topK"]);B!=null&&f(e,["topK"],B);const X=d(t,["topP"]);if(X!=null&&f(e,["topP"],X),d(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function nw(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],je(t,s)),n}function iw(t,e){const n={},s=d(e,["model"]);return s!=null&&f(n,["_url","name"],je(t,s)),n}function sw(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function ow(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function lw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);if(s!=null&&f(e,["imageSize"],s),d(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rw(t){const e={},n=d(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const s=d(t,["imageSize"]);s!=null&&f(e,["imageSize"],s);const l=d(t,["personGeneration"]);l!=null&&f(e,["personGeneration"],l);const a=d(t,["outputMimeType"]);a!=null&&f(e,["imageOutputOptions","mimeType"],a);const c=d(t,["outputCompressionQuality"]);return c!=null&&f(e,["imageOutputOptions","compressionQuality"],c),e}function aw(t){const e={},n=d(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],ss(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function D_(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["imageBytes"],ss(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function hu(t){const e={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=d(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],ss(n));const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function Vn(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["imageBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ss(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function uw(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],b_(t,h)),s}function cw(t,e,n){const s={},l=d(e,["pageSize"]);n!==void 0&&l!=null&&f(n,["_query","pageSize"],l);const a=d(e,["pageToken"]);n!==void 0&&a!=null&&f(n,["_query","pageToken"],a);const c=d(e,["filter"]);n!==void 0&&c!=null&&f(n,["_query","filter"],c);const h=d(e,["queryBase"]);return n!==void 0&&h!=null&&f(n,["_url","models_url"],b_(t,h)),s}function dw(t,e){const n={},s=d(e,["config"]);return s!=null&&uw(t,s,n),n}function fw(t,e){const n={},s=d(e,["config"]);return s!=null&&cw(t,s,n),n}function hw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let a=N_(l);Array.isArray(a)&&(a=a.map(c=>hf(c))),f(e,["models"],a)}return e}function pw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["_self"]);if(l!=null){let a=N_(l);Array.isArray(a)&&(a=a.map(c=>pf(c))),f(e,["models"],a)}return e}function mw(t){const e={},n=d(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const s=d(t,["segmentationClasses"]);s!=null&&f(e,["maskClasses"],s);const l=d(t,["maskDilation"]);return l!=null&&f(e,["dilation"],l),e}function hf(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["version"]);a!=null&&f(e,["version"],a);const c=d(t,["_self"]);c!=null&&f(e,["tunedModelInfo"],Mw(c));const h=d(t,["inputTokenLimit"]);h!=null&&f(e,["inputTokenLimit"],h);const g=d(t,["outputTokenLimit"]);g!=null&&f(e,["outputTokenLimit"],g);const p=d(t,["supportedGenerationMethods"]);p!=null&&f(e,["supportedActions"],p);const _=d(t,["temperature"]);_!=null&&f(e,["temperature"],_);const x=d(t,["maxTemperature"]);x!=null&&f(e,["maxTemperature"],x);const E=d(t,["topP"]);E!=null&&f(e,["topP"],E);const T=d(t,["topK"]);T!=null&&f(e,["topK"],T);const N=d(t,["thinking"]);return N!=null&&f(e,["thinking"],N),e}function pf(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["displayName"]);s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);l!=null&&f(e,["description"],l);const a=d(t,["versionId"]);a!=null&&f(e,["version"],a);const c=d(t,["deployedModels"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>wA(E))),f(e,["endpoints"],x)}const h=d(t,["labels"]);h!=null&&f(e,["labels"],h);const g=d(t,["_self"]);g!=null&&f(e,["tunedModelInfo"],Dw(g));const p=d(t,["defaultCheckpointId"]);p!=null&&f(e,["defaultCheckpointId"],p);const _=d(t,["checkpoints"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(E=>E)),f(e,["checkpoints"],x)}return e}function gw(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],RA(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],IA(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],tA(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function yw(t){const e={},n=d(t,["productImage"]);return n!=null&&f(e,["image"],Vn(n)),e}function vw(t,e){const n={},s=d(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const l=d(t,["baseSteps"]);e!==void 0&&l!=null&&f(e,["parameters","baseSteps"],l);const a=d(t,["outputGcsUri"]);e!==void 0&&a!=null&&f(e,["parameters","storageUri"],a);const c=d(t,["seed"]);e!==void 0&&c!=null&&f(e,["parameters","seed"],c);const h=d(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&f(e,["parameters","safetySetting"],h);const g=d(t,["personGeneration"]);e!==void 0&&g!=null&&f(e,["parameters","personGeneration"],g);const p=d(t,["addWatermark"]);e!==void 0&&p!=null&&f(e,["parameters","addWatermark"],p);const _=d(t,["outputMimeType"]);e!==void 0&&_!=null&&f(e,["parameters","outputOptions","mimeType"],_);const x=d(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const E=d(t,["enhancePrompt"]);e!==void 0&&E!=null&&f(e,["parameters","enhancePrompt"],E);const T=d(t,["labels"]);return e!==void 0&&T!=null&&f(e,["labels"],T),n}function _w(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["source"]);l!=null&&Ew(l,n);const a=d(e,["config"]);return a!=null&&vw(a,n),n}function xw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>fu(l))),f(e,["generatedImages"],s)}return e}function Ew(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["personImage"]);e!==void 0&&l!=null&&f(e,["instances[0]","personImage","image"],Vn(l));const a=d(t,["productImages"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>yw(h))),f(e,["instances[0]","productImages"],c)}return n}function Sw(t){const e={},n=d(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Vn(n));const s=d(t,["referenceId"]);s!=null&&f(e,["referenceId"],s);const l=d(t,["referenceType"]);l!=null&&f(e,["referenceType"],l);const a=d(t,["maskImageConfig"]);a!=null&&f(e,["maskImageConfig"],mw(a));const c=d(t,["controlImageConfig"]);c!=null&&f(e,["controlImageConfig"],aA(c));const h=d(t,["styleImageConfig"]);h!=null&&f(e,["styleImageConfig"],h);const g=d(t,["subjectImageConfig"]);return g!=null&&f(e,["subjectImageConfig"],g),e}function k_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function U_(t){const e={},n=d(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const s=d(t,["safetyAttributes","scores"]);s!=null&&f(e,["scores"],s);const l=d(t,["contentType"]);return l!=null&&f(e,["contentType"],l),e}function Cw(t){const e={},n=d(t,["category"]);if(n!=null&&f(e,["category"],n),d(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(t,["threshold"]);return s!=null&&f(e,["threshold"],s),e}function Tw(t){const e={},n=d(t,["image"]);return n!=null&&f(e,["image"],Vn(n)),e}function bw(t,e){const n={},s=d(t,["mode"]);e!==void 0&&s!=null&&f(e,["parameters","mode"],s);const l=d(t,["maxPredictions"]);e!==void 0&&l!=null&&f(e,["parameters","maxPredictions"],l);const a=d(t,["confidenceThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","confidenceThreshold"],a);const c=d(t,["maskDilation"]);e!==void 0&&c!=null&&f(e,["parameters","maskDilation"],c);const h=d(t,["binaryColorThreshold"]);e!==void 0&&h!=null&&f(e,["parameters","binaryColorThreshold"],h);const g=d(t,["labels"]);return e!==void 0&&g!=null&&f(e,["labels"],g),n}function Nw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["source"]);l!=null&&ww(l,n);const a=d(e,["config"]);return a!=null&&bw(a,n),n}function Aw(t){const e={},n=d(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(l=>WA(l))),f(e,["generatedMasks"],s)}return e}function ww(t,e){const n={},s=d(t,["prompt"]);e!==void 0&&s!=null&&f(e,["instances[0]","prompt"],s);const l=d(t,["image"]);e!==void 0&&l!=null&&f(e,["instances[0]","image"],Vn(l));const a=d(t,["scribbleImage"]);return e!==void 0&&a!=null&&f(e,["instances[0]","scribble"],Tw(a)),n}function Rw(t){const e={},n=d(t,["retrievalConfig"]);n!=null&&f(e,["retrievalConfig"],n);const s=d(t,["functionCallingConfig"]);return s!=null&&f(e,["functionCallingConfig"],MA(s)),e}function Iw(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],sw(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],ow(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}function P_(t){const e={},n=d(t,["retrieval"]);n!=null&&f(e,["retrieval"],n);const s=d(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),d(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=d(t,["codeExecution"]);l!=null&&f(e,["codeExecution"],l);const a=d(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const c=d(t,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(E=>DA(E))),f(e,["functionDeclarations"],x)}const h=d(t,["googleMaps"]);h!=null&&f(e,["googleMaps"],h);const g=d(t,["googleSearch"]);g!=null&&f(e,["googleSearch"],g);const p=d(t,["googleSearchRetrieval"]);p!=null&&f(e,["googleSearchRetrieval"],p);const _=d(t,["urlContext"]);return _!=null&&f(e,["urlContext"],_),e}function Mw(t){const e={},n=d(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function Dw(t){const e={},n=d(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const s=d(t,["createTime"]);s!=null&&f(e,["createTime"],s);const l=d(t,["updateTime"]);return l!=null&&f(e,["updateTime"],l),e}function kw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Uw(t,e){const n={},s=d(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const l=d(t,["description"]);e!==void 0&&l!=null&&f(e,["description"],l);const a=d(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&f(e,["defaultCheckpointId"],a),n}function Pw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","name"],je(t,s));const l=d(e,["config"]);return l!=null&&kw(l,n),n}function Lw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["config"]);return l!=null&&Uw(l,n),n}function Ow(t,e){const n={},s=d(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const l=d(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&f(e,["parameters","safetySetting"],l);const a=d(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const c=d(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=d(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const g=d(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&f(e,["parameters","outputOptions","compressionQuality"],g);const p=d(t,["enhanceInputImage"]);e!==void 0&&p!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],p);const _=d(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["numberOfImages"]);e!==void 0&&E!=null&&f(e,["parameters","sampleCount"],E);const T=d(t,["mode"]);return e!==void 0&&T!=null&&f(e,["parameters","mode"],T),n}function Bw(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["_url","model"],je(t,s));const l=d(e,["image"]);l!=null&&f(n,["instances[0]","image"],Vn(l));const a=d(e,["upscaleFactor"]);a!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],a);const c=d(e,["config"]);return c!=null&&Ow(c,n),n}function Hw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>fu(a))),f(e,["generatedImages"],l)}return e}function Gw(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["encodedVideo"]);s!=null&&f(e,["videoBytes"],ss(s));const l=d(t,["encoding"]);return l!=null&&f(e,["mimeType"],l),e}function qw(t){const e={},n=d(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const s=d(t,["bytesBase64Encoded"]);s!=null&&f(e,["videoBytes"],ss(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}function Vw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["_self"],Vn(n));const s=d(t,["maskMode"]);return s!=null&&f(e,["maskMode"],s),e}function Fw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],hu(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function zw(t){const e={},n=d(t,["image"]);n!=null&&f(e,["image"],Vn(n));const s=d(t,["referenceType"]);return s!=null&&f(e,["referenceType"],s),e}function L_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["uri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["encodedVideo"],ss(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["encoding"],l),e}function O_(t){const e={},n=d(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const s=d(t,["videoBytes"]);s!=null&&f(e,["bytesBase64Encoded"],ss(s));const l=d(t,["mimeType"]);return l!=null&&f(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yw(t,e){const n={},s=d(t,["displayName"]);return e!==void 0&&s!=null&&f(e,["displayName"],s),n}function jw(t){const e={},n=d(t,["config"]);return n!=null&&Yw(n,e),e}function Jw(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function $w(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&Jw(s,e),e}function Kw(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function Qw(t,e){const n={},s=d(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["customMetadata"],a)}const l=d(t,["chunkingConfig"]);return e!==void 0&&l!=null&&f(e,["chunkingConfig"],l),n}function Xw(t){const e={},n=d(t,["name"]);n!=null&&f(e,["name"],n);const s=d(t,["metadata"]);s!=null&&f(e,["metadata"],s);const l=d(t,["done"]);l!=null&&f(e,["done"],l);const a=d(t,["error"]);a!=null&&f(e,["error"],a);const c=d(t,["response"]);return c!=null&&f(e,["response"],Zw(c)),e}function Ww(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["fileName"]);s!=null&&f(e,["fileName"],s);const l=d(t,["config"]);return l!=null&&Qw(l,e),e}function Zw(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["parent"]);s!=null&&f(e,["parent"],s);const l=d(t,["documentName"]);return l!=null&&f(e,["documentName"],l),e}function e1(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function t1(t){const e={},n=d(t,["config"]);return n!=null&&e1(n,e),e}function n1(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["fileSearchStores"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["fileSearchStores"],a)}return e}function B_(t,e){const n={},s=d(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["mimeType"],s);const l=d(t,["displayName"]);e!==void 0&&l!=null&&f(e,["displayName"],l);const a=d(t,["customMetadata"]);if(e!==void 0&&a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>g)),f(e,["customMetadata"],h)}const c=d(t,["chunkingConfig"]);return e!==void 0&&c!=null&&f(e,["chunkingConfig"],c),n}function i1(t){const e={},n=d(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const s=d(t,["config"]);return s!=null&&B_(s,e),e}function s1(t){const e={},n=d(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o1="Content-Type",l1="X-Server-Timeout",r1="User-Agent",mf="x-goog-api-client",a1="1.38.0",u1=`google-genai-sdk/${a1}`,c1="v1beta1",d1="v1beta";class f1{constructor(e){var n,s,l;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const h=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!h?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:c1}else{if(!this.clientOptions.apiKey)throw new Xl({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:d1,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,s){const l=[this.getRequestUrlInternal(n)];return s&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===uf.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))l.searchParams.append(c,String(h));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.unaryApiCall(l,a,e.httpMethod)}patchHttpOptions(e,n){const s=JSON.parse(JSON.stringify(e));for(const[l,a]of Object.entries(n))typeof a=="object"?s[l]=Object.assign(Object.assign({},s[l]),a):a!==void 0&&(s[l]=a);return s}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e,n),l=this.constructUrl(e.path,n,s);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,l.toString(),e.abortSignal),this.streamApiCall(l,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,s,l){if(n&&n.timeout||l){const a=new AbortController,c=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const h=setTimeout(()=>a.abort(),n.timeout);h&&typeof h.unref=="function"&&h.unref()}l&&l.addEventListener("abort",()=>{a.abort()}),e.signal=c}return n&&n.extraBody!==null&&h1(e,n.extraBody),e.headers=await this.getHeadersInternal(n,s),e}async unaryApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await av(l),new cf(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,n,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:s})).then(async l=>(await av(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){return Bn(this,arguments,function*(){var s;const l=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),a=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let c="";const h="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield Te(l.read());if(p){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const x=a.decode(_,{stream:!0});try{const N=JSON.parse(x);if("error"in N){const M=JSON.parse(JSON.stringify(N.error)),I=M.status,H=M.code,F=`got status: ${I}. ${JSON.stringify(N)}`;if(H>=400&&H<600)throw new Xl({message:F,status:H})}}catch(N){if(N.name==="ApiError")throw N}c+=x;let E=-1,T=0;for(;;){E=-1,T=0;for(const I of g){const H=c.indexOf(I);H!==-1&&(E===-1||H<E)&&(E=H,T=I.length)}if(E===-1)break;const N=c.substring(0,E);c=c.substring(E+T);const M=N.trim();if(M.startsWith(h)){const I=M.substring(h.length).trim();try{const H=new Response(I,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Te(new cf(H))}catch(H){throw new Error(`exception parsing stream chunk ${I}. ${H}`)}}}}}finally{l.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},n=u1+" "+this.clientOptions.userAgentExtra;return e[r1]=n,e[mf]=n,e[o1]="application/json",e}async getHeadersInternal(e,n){const s=new Headers;if(e&&e.headers){for(const[l,a]of Object.entries(e.headers))s.append(l,a);e.timeout&&e.timeout>0&&s.append(l1,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,n),s}getFileName(e){var n;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(n=s.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),s}async uploadFile(e,n){var s;const l={};n!=null&&(l.mimeType=n.mimeType,l.name=n.name,l.displayName=n.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const a=this.clientOptions.uploader,c=await a.stat(e);l.sizeBytes=String(c.size);const h=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=h;const g={file:l},p=this.getFileName(e),_=ue("upload/v1beta/files",g._url),x=await this.fetchUploadUrl(_,l.sizeBytes,l.mimeType,p,g,n==null?void 0:n.httpOptions);return a.upload(e,x,this)}async uploadFileToFileSearchStore(e,n,s){var l;const a=this.clientOptions.uploader,c=await a.stat(n),h=String(c.size),g=(l=s==null?void 0:s.mimeType)!==null&&l!==void 0?l:c.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),x={};s!=null&&B_(s,x);const E=await this.fetchUploadUrl(p,h,g,_,x,s==null?void 0:s.httpOptions);return a.uploadToFileSearchStore(n,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,s,l,a,c){var h;let g={};c?g=c:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${s}`},l?{"X-Goog-Upload-File-Name":l}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(h=p==null?void 0:p.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function av(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let s;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await t.json():s={error:{message:await t.text(),code:t.status,status:t.statusText}};const l=JSON.stringify(s);throw n>=400&&n<600?new Xl({message:l,status:n}):new Error(l)}}function h1(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(a,c){const h=Object.assign({},a);for(const g in c)if(Object.prototype.hasOwnProperty.call(c,g)){const p=c[g],_=h[g];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?h[g]=s(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),h[g]=p)}return h}const l=s(n,e);t.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p1="mcp_used/unknown";let m1=!1;function H_(t){for(const e of t)if(g1(e)||typeof e=="object"&&"inputSchema"in e)return!0;return m1}function G_(t){var e;const n=(e=t[mf])!==null&&e!==void 0?e:"";t[mf]=(n+` ${p1}`).trimStart()}function g1(t){return t!==null&&typeof t=="object"&&t instanceof Xf}function y1(t){return Bn(this,arguments,function*(n,s=100){let l,a=0;for(;a<s;){const c=yield Te(n.listTools({cursor:l}));for(const h of c.tools)yield yield Te(h),a++;if(!c.nextCursor)break;l=c.nextCursor}})}class Xf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Xf(e,n)}async initialize(){var e,n,s,l;if(this.mcpTools.length>0)return;const a={},c=[];for(const _ of this.mcpClients)try{for(var h=!0,g=(n=void 0,Hn(y1(_))),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const x=l;c.push(x);const E=x.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=_}}catch(x){n={error:x}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}this.mcpTools=c,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),$T(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[s.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const c=await l.callTool({name:s.name,arguments:s.args},void 0,a);n.push({functionResponse:{name:s.name,response:c.isError?{error:c}:c}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function v1(t,e,n){const s=new GT;let l;n.data instanceof Blob?l=JSON.parse(await n.data.text()):l=JSON.parse(n.data),Object.assign(s,l),e(s)}class _1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s}async connect(e){var n,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),c=S1(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),g=`${l}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${h}`;let p=()=>{};const _=new Promise(q=>{p=q}),x=e.callbacks,E=function(){p({})},T=this.apiClient,N={onopen:E,onmessage:q=>{v1(T,x.onmessage,q)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(q){},onclose:(s=x==null?void 0:x.onclose)!==null&&s!==void 0?s:function(q){}},M=this.webSocketFactory.create(g,E1(c),N);M.connect(),await _;const F={setup:{model:je(this.apiClient,e.model)}};return M.send(JSON.stringify(F)),new x1(M,this.apiClient)}}class x1{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=YN(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=zN(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Co.PLAY)}pause(){this.sendPlaybackControl(Co.PAUSE)}stop(){this.sendPlaybackControl(Co.STOP)}resetContext(){this.sendPlaybackControl(Co.RESET_CONTEXT)}close(){this.conn.close()}}function E1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function S1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const C1="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function T1(t,e,n){const s=new HT;let l;n.data instanceof Blob?l=await n.data.text():n.data instanceof ArrayBuffer?l=new TextDecoder().decode(n.data):l=n.data;const a=JSON.parse(l);if(t.isVertexAI()){const c=$N(a);Object.assign(s,c)}else Object.assign(s,a);e(s)}class b1{constructor(e,n,s){this.apiClient=e,this.auth=n,this.webSocketFactory=s,this.music=new _1(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,s,l,a,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const x=this.apiClient.getHeaders();e.config&&e.config.tools&&H_(e.config.tools)&&G_(x);const E=R1(x);if(this.apiClient.isVertexAI()){const oe=this.apiClient.getProject(),de=this.apiClient.getLocation(),ge=this.apiClient.getApiKey(),Se=!!oe&&!!de||!!ge;this.apiClient.getCustomBaseUrl()&&!Se?_=g:(_=`${g}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,_))}else{const oe=this.apiClient.getApiKey();let de="BidiGenerateContent",ge="key";oe!=null&&oe.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),de="BidiGenerateContentConstrained",ge="access_token"),_=`${g}/ws/google.ai.generativelanguage.${p}.GenerativeService.${de}?${ge}=${oe}`}let T=()=>{};const N=new Promise(oe=>{T=oe}),M=e.callbacks,I=function(){var oe;(oe=M==null?void 0:M.onopen)===null||oe===void 0||oe.call(M),T({})},H=this.apiClient,F={onopen:I,onmessage:oe=>{T1(H,M.onmessage,oe)},onerror:(n=M==null?void 0:M.onerror)!==null&&n!==void 0?n:function(oe){},onclose:(s=M==null?void 0:M.onclose)!==null&&s!==void 0?s:function(oe){}},q=this.webSocketFactory.create(_,w1(E),F);q.connect(),await N;let J=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&J.startsWith("publishers/")){const oe=this.apiClient.getProject(),de=this.apiClient.getLocation();oe&&de&&(J=`projects/${oe}/locations/${de}/`+J)}let se={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[qa.AUDIO]}:e.config.responseModalities=[qa.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],X=[];for(const oe of B)if(this.isCallableTool(oe)){const de=oe;X.push(await de.tool())}else X.push(oe);X.length>0&&(e.config.tools=X);const ve={model:J,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?se=FN(this.apiClient,ve):se=VN(this.apiClient,ve),delete se.config,q.send(JSON.stringify(se)),new A1(q,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const N1={turnComplete:!0};class A1{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let s=[];try{s=Mn(n.turns),e.isVertexAI()||(s=s.map(l=>du(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:s,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let s=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?s=n.functionResponses:s=[n.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const a of s){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(C1)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},N1),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:JN(e)}:n={realtimeInput:jN(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function w1(t){const e={};return t.forEach((n,s)=>{e[s]=n}),e}function R1(t){const e=new Headers;for(const[n,s]of Object.entries(t))e.append(n,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uv=10;function cv(t){var e,n,s;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const c of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ao(c)){l=!0;break}if(!l)return!0;const a=(s=t==null?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Ao(t){return"callTool"in t&&typeof t.callTool=="function"}function I1(t){var e,n,s;return(s=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(l=>Ao(l)))!==null&&s!==void 0?s:!1}function dv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((s,l)=>{if(Ao(s))return;const a=s;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(l)}),n}function fv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class M1 extends Si{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var s,l,a,c,h;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!I1(n)||cv(n.config))return await this.generateContentInternal(g);const p=dv(n);if(p.length>0){const M=p.map(I=>`tools[${I}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let _,x;const E=Mn(g.contents),T=(a=(l=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&a!==void 0?a:uv;let N=0;for(;N<T&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const M=_.candidates[0].content,I=[];for(const H of(h=(c=n.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Ao(H)){const q=await H.callTool(_.functionCalls);I.push(...q)}N++,x={role:"user",parts:I},g.contents=Mn(g.contents),g.contents.push(M),g.contents.push(x),fv(g.config)&&(E.push(M),E.push(x))}return fv(g.config)&&(_.automaticFunctionCallingHistory=E),_},this.generateContentStream=async n=>{var s,l,a,c,h;if(this.maybeMoveToResponseJsonSchem(n),cv(n.config)){const x=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(x)}const g=dv(n);if(g.length>0){const x=g.map(E=>`tools[${E}]`).join(", ");throw new Error(`Incompatible tools found at ${x}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.toolConfig)===null||l===void 0?void 0:l.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(h=(c=n==null?void 0:n.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(s=>{var l;let a;const c=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((l=g==null?void 0:g.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:c.push(g);let h;return a?h={generatedImages:c,positivePromptSafetyAttributes:a,sdkHttpResponse:s.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:s.sdkHttpResponse},h}),this.list=async n=>{var s;const c={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((s=c.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Ds(_i.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async n=>{const s={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(s.referenceImages=n.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async n=>{let s={numberOfImages:1,mode:"upscale"};n.config&&(s=Object.assign(Object.assign({},s),n.config));const l={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:s};return await this.upscaleImageInternal(l)},this.generateVideos=async n=>{var s,l,a,c,h,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=n.video)===null||s===void 0)&&s.uri&&(!((l=n.video)===null||l===void 0)&&l.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.uri&&(!((g=(h=n.source)===null||h===void 0?void 0:h.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,s,l;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const c=await Promise.all(a.map(async g=>Ao(g)?await g.tool():g)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&H_(e.config.tools)){const g=(l=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&l!==void 0?l:{};let p=Object.assign({},g);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),G_(p),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return h}async initAfcToolsMap(e){var n,s,l;const a=new Map;for(const c of(s=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&s!==void 0?s:[])if(Ao(c)){const h=c,g=await h.tool();for(const p of(l=g.functionDeclarations)!==null&&l!==void 0?l:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,h)}}return a}async processAfcStream(e){var n,s,l;const a=(l=(s=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:uv;let c=!1,h=0;const g=await this.initAfcToolsMap(e);return(function(p,_,x){return Bn(this,arguments,function*(){for(var E,T,N,M,I,H;h<a;){c&&(h++,c=!1);const se=yield Te(p.processParamsMaybeAddMcpUsage(x)),B=yield Te(p.generateContentStreamInternal(se)),X=[],ve=[];try{for(var F=!0,q=(T=void 0,Hn(B)),J;J=yield Te(q.next()),E=J.done,!E;F=!0){M=J.value,F=!1;const oe=M;if(yield yield Te(oe),oe.candidates&&(!((I=oe.candidates[0])===null||I===void 0)&&I.content)){ve.push(oe.candidates[0].content);for(const de of(H=oe.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(h<a&&de.functionCall){if(!de.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(de.functionCall.name)){const ge=yield Te(_.get(de.functionCall.name).callTool([de.functionCall]));X.push(...ge)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${de.functionCall.name}`)}}}}catch(oe){T={error:oe}}finally{try{!F&&!E&&(N=q.return)&&(yield Te(N.call(q)))}finally{if(T)throw T.error}}if(X.length>0){c=!0;const oe=new Bl;oe.candidates=[{content:{role:"user",parts:X}}],yield yield Te(oe);const de=[];de.push(...ve),de.push({role:"user",parts:X});const ge=Mn(x.contents).concat(de);x.contents=ge}else break}})})(this,g,e)}async generateContentInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ov(this.apiClient,e);return h=ue("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=rv(_),E=new Bl;return Object.assign(E,x),E})}else{const p=sv(this.apiClient,e);return h=ue("{model}:generateContent",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=lv(_),E=new Bl;return Object.assign(E,x),E})}}async generateContentStreamInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ov(this.apiClient,e);return h=ue("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),c.then(function(x){return Bn(this,arguments,function*(){var E,T,N,M;try{for(var I=!0,H=Hn(x),F;F=yield Te(H.next()),E=F.done,!E;I=!0){M=F.value,I=!1;const q=M,J=rv(yield Te(q.json()));J.sdkHttpResponse={headers:q.headers};const se=new Bl;Object.assign(se,J),yield yield Te(se)}}catch(q){T={error:q}}finally{try{!I&&!E&&(N=H.return)&&(yield Te(N.call(H)))}finally{if(T)throw T.error}}})})}else{const p=sv(this.apiClient,e);return h=ue("{model}:streamGenerateContent?alt=sse",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.requestStream({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),c.then(function(x){return Bn(this,arguments,function*(){var E,T,N,M;try{for(var I=!0,H=Hn(x),F;F=yield Te(H.next()),E=F.done,!E;I=!0){M=F.value,I=!1;const q=M,J=lv(yield Te(q.json()));J.sdkHttpResponse={headers:q.headers};const se=new Bl;Object.assign(se,J),yield yield Te(se)}}catch(q){T={error:q}}finally{try{!I&&!E&&(N=H.return)&&(yield Te(N.call(H)))}finally{if(T)throw T.error}}})})}}async embedContent(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=bA(this.apiClient,e);return h=ue("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=AA(_),E=new q0;return Object.assign(E,x),E})}else{const p=TA(this.apiClient,e);return h=ue("{model}:batchEmbedContents",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=NA(_),E=new q0;return Object.assign(E,x),E})}}async generateImagesInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=BA(this.apiClient,e);return h=ue("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=GA(_),E=new V0;return Object.assign(E,x),E})}else{const p=OA(this.apiClient,e);return h=ue("{model}:predict",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=HA(_),E=new V0;return Object.assign(E,x),E})}}async editImageInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=xA(this.apiClient,e);return a=ue("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const p=EA(g),_=new wT;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Bw(this.apiClient,e);return a=ue("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const p=Hw(g),_=new RT;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=_w(this.apiClient,e);return a=ue("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=xw(g),_=new IT;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=Nw(this.apiClient,e);return a=ue("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Aw(g),_=new MT;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=iw(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>pf(_))}else{const p=nw(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>hf(_))}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=fw(this.apiClient,e);return h=ue("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=pw(_),E=new F0;return Object.assign(E,x),E})}else{const p=dw(this.apiClient,e);return h=ue("{models_url}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=hw(_),E=new F0;return Object.assign(E,x),E})}}async update(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=Lw(this.apiClient,e);return h=ue("{model}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>pf(_))}else{const p=Pw(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>hf(_))}}async delete(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=gA(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=vA(_),E=new z0;return Object.assign(E,x),E})}else{const p=mA(this.apiClient,e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=yA(_),E=new z0;return Object.assign(E,x),E})}}async countTokens(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=fA(this.apiClient,e);return h=ue("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=pA(_),E=new Y0;return Object.assign(E,x),E})}else{const p=dA(this.apiClient,e);return h=ue("{model}:countTokens",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=hA(_),E=new Y0;return Object.assign(E,x),E})}}async computeTokens(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=sA(this.apiClient,e);return a=ue("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>{const p=oA(g),_=new DT;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=jA(this.apiClient,e);return h=ue("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c.then(_=>{const x=zA(_),E=new Va;return Object.assign(E,x),E})}else{const p=YA(this.apiClient,e);return h=ue("{model}:predictLongRunning",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c.then(_=>{const x=FA(_),E=new Va;return Object.assign(E,x),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D1 extends Si{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const n=e.operation,s=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=n.name.split("/operations/")[0];let a;s&&"httpOptions"in s&&(a=s.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:l,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:n.name,config:s});return n._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=ST(e);return h=ue("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),c}else{const p=ET(e);return h=ue("{operationName}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),c}}async fetchPredictVideosOperationInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=pT(e);return a=ue("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k1(t){const e={},n=d(t,["data"]);if(n!=null&&f(e,["data"],n),d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function U1(t){const e={},n=d(t,["parts"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(a=>F1(a))),f(e,["parts"],l)}const s=d(t,["role"]);return s!=null&&f(e,["role"],s),e}function P1(t,e,n){const s={},l=d(e,["expireTime"]);n!==void 0&&l!=null&&f(n,["expireTime"],l);const a=d(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&f(n,["newSessionExpireTime"],a);const c=d(e,["uses"]);n!==void 0&&c!=null&&f(n,["uses"],c);const h=d(e,["liveConnectConstraints"]);n!==void 0&&h!=null&&f(n,["bidiGenerateContentSetup"],V1(t,h));const g=d(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&f(n,["fieldMask"],g),s}function L1(t,e){const n={},s=d(e,["config"]);return s!=null&&f(n,["config"],P1(t,s,n)),n}function O1(t){const e={};if(d(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=d(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const s=d(t,["mimeType"]);return s!=null&&f(e,["mimeType"],s),e}function B1(t){const e={},n=d(t,["id"]);n!=null&&f(e,["id"],n);const s=d(t,["args"]);s!=null&&f(e,["args"],s);const l=d(t,["name"]);if(l!=null&&f(e,["name"],l),d(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H1(t){const e={};if(d(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=d(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function G1(t){const e={};if(d(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=d(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function q1(t,e){const n={},s=d(t,["generationConfig"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig"],s);const l=d(t,["responseModalities"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","responseModalities"],l);const a=d(t,["temperature"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","temperature"],a);const c=d(t,["topP"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","topP"],c);const h=d(t,["topK"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","topK"],h);const g=d(t,["maxOutputTokens"]);e!==void 0&&g!=null&&f(e,["setup","generationConfig","maxOutputTokens"],g);const p=d(t,["mediaResolution"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","mediaResolution"],p);const _=d(t,["seed"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","seed"],_);const x=d(t,["speechConfig"]);e!==void 0&&x!=null&&f(e,["setup","generationConfig","speechConfig"],Qf(x));const E=d(t,["thinkingConfig"]);e!==void 0&&E!=null&&f(e,["setup","generationConfig","thinkingConfig"],E);const T=d(t,["enableAffectiveDialog"]);e!==void 0&&T!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],T);const N=d(t,["systemInstruction"]);e!==void 0&&N!=null&&f(e,["setup","systemInstruction"],U1(Yt(N)));const M=d(t,["tools"]);if(e!==void 0&&M!=null){let B=Ho(M);Array.isArray(B)&&(B=B.map(X=>Y1(Bo(X)))),f(e,["setup","tools"],B)}const I=d(t,["sessionResumption"]);e!==void 0&&I!=null&&f(e,["setup","sessionResumption"],z1(I));const H=d(t,["inputAudioTranscription"]);e!==void 0&&H!=null&&f(e,["setup","inputAudioTranscription"],H);const F=d(t,["outputAudioTranscription"]);e!==void 0&&F!=null&&f(e,["setup","outputAudioTranscription"],F);const q=d(t,["realtimeInputConfig"]);e!==void 0&&q!=null&&f(e,["setup","realtimeInputConfig"],q);const J=d(t,["contextWindowCompression"]);e!==void 0&&J!=null&&f(e,["setup","contextWindowCompression"],J);const se=d(t,["proactivity"]);if(e!==void 0&&se!=null&&f(e,["setup","proactivity"],se),d(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function V1(t,e){const n={},s=d(e,["model"]);s!=null&&f(n,["setup","model"],je(t,s));const l=d(e,["config"]);return l!=null&&f(n,["config"],q1(l,n)),n}function F1(t){const e={},n=d(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const s=d(t,["codeExecutionResult"]);s!=null&&f(e,["codeExecutionResult"],s);const l=d(t,["executableCode"]);l!=null&&f(e,["executableCode"],l);const a=d(t,["fileData"]);a!=null&&f(e,["fileData"],O1(a));const c=d(t,["functionCall"]);c!=null&&f(e,["functionCall"],B1(c));const h=d(t,["functionResponse"]);h!=null&&f(e,["functionResponse"],h);const g=d(t,["inlineData"]);g!=null&&f(e,["inlineData"],k1(g));const p=d(t,["text"]);p!=null&&f(e,["text"],p);const _=d(t,["thought"]);_!=null&&f(e,["thought"],_);const x=d(t,["thoughtSignature"]);x!=null&&f(e,["thoughtSignature"],x);const E=d(t,["videoMetadata"]);return E!=null&&f(e,["videoMetadata"],E),e}function z1(t){const e={},n=d(t,["handle"]);if(n!=null&&f(e,["handle"],n),d(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Y1(t){const e={};if(d(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=d(t,["computerUse"]);n!=null&&f(e,["computerUse"],n);const s=d(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const l=d(t,["codeExecution"]);if(l!=null&&f(e,["codeExecution"],l),d(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(t,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["functionDeclarations"],_)}const c=d(t,["googleMaps"]);c!=null&&f(e,["googleMaps"],H1(c));const h=d(t,["googleSearch"]);h!=null&&f(e,["googleSearch"],G1(h));const g=d(t,["googleSearchRetrieval"]);g!=null&&f(e,["googleSearchRetrieval"],g);const p=d(t,["urlContext"]);return p!=null&&f(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j1(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const l=Object.keys(s).map(a=>`${n}.${a}`);e.push(...l)}else e.push(n)}return e.join(",")}function J1(t,e){let n=null;const s=t.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const a=s.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else s!==void 0&&delete t.bidiGenerateContentSetup;const l=t.fieldMask;if(n){const a=j1(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];l.length>0&&(h=l.map(p=>c.includes(p)?`generationConfig.${p}`:p));const g=[];a&&g.push(a),h.length>0&&g.push(...h),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?t.fieldMask=l.join(","):delete t.fieldMask;return t}class $1 extends Si{constructor(e){super(),this.apiClient=e}async create(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=L1(this.apiClient,e);a=ue("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const g=J1(h,e.config);return l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(p=>p.json()),l.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K1(t,e){const n={},s=d(t,["force"]);return e!==void 0&&s!=null&&f(e,["_query","force"],s),n}function Q1(t){const e={},n=d(t,["name"]);n!=null&&f(e,["_url","name"],n);const s=d(t,["config"]);return s!=null&&K1(s,e),e}function X1(t){const e={},n=d(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function W1(t,e){const n={},s=d(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const l=d(t,["pageToken"]);return e!==void 0&&l!=null&&f(e,["_query","pageToken"],l),n}function Z1(t){const e={},n=d(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const s=d(t,["config"]);return s!=null&&W1(s,e),e}function eR(t){const e={},n=d(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const s=d(t,["nextPageToken"]);s!=null&&f(e,["nextPageToken"],s);const l=d(t,["documents"]);if(l!=null){let a=l;Array.isArray(a)&&(a=a.map(c=>c)),f(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tR extends Si{constructor(e){super(),this.apiClient=e,this.list=async n=>new Ds(_i.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:n.parent,config:s.config}),await this.listInternal(n),n)}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=X1(e);return a=ue("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Q1(e);l=ue("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Z1(e);return a=ue("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=eR(g),_=new kT;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nR extends Si{constructor(e,n=new tR(e)){super(),this.apiClient=e,this.documents=n,this.list=async(s={})=>new Ds(_i.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jw(e);return a=ue("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async get(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Kw(e);return a=ue("{name}",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>g)}}async delete(e){var n,s;let l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$w(e);l=ue("{name}",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=t1(e);return a=ue("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=n1(g),_=new UT;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=i1(e);return a=ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=s1(g),_=new PT;return Object.assign(_,p),_})}}async importFile(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Ww(e);return a=ue("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),l.then(g=>{const p=Xw(g),_=new Yf;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let q_=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return q_=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^n()&15>>+s/4).toString(16))};const iR=()=>q_();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gf(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const yf=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dn extends Error{}class Wt extends Dn{constructor(e,n,s,l){super(`${Wt.makeMessage(e,n,s)}`),this.status=e,this.headers=l,this.error=n}static makeMessage(e,n,s){const l=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):s;return e&&l?`${e} ${l}`:e?`${e} status code (no body)`:l||"(no status code or body)"}static generate(e,n,s,l){if(!e||!l)return new pu({message:s,cause:yf(n)});const a=n;return e===400?new F_(e,a,s,l):e===401?new z_(e,a,s,l):e===403?new Y_(e,a,s,l):e===404?new j_(e,a,s,l):e===409?new J_(e,a,s,l):e===422?new $_(e,a,s,l):e===429?new K_(e,a,s,l):e>=500?new Q_(e,a,s,l):new Wt(e,a,s,l)}}class vf extends Wt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class pu extends Wt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class V_ extends pu{constructor({message:e}={}){super({message:e??"Request timed out."})}}class F_ extends Wt{}class z_ extends Wt{}class Y_ extends Wt{}class j_ extends Wt{}class J_ extends Wt{}class $_ extends Wt{}class K_ extends Wt{}class Q_ extends Wt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sR=/^[a-z][a-z0-9+.-]*:/i,oR=t=>sR.test(t);let _f=t=>(_f=Array.isArray,_f(t));const lR=_f;let rR=lR;const hv=rR;function aR(t){if(!t)return!0;for(const e in t)return!1;return!0}function uR(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const cR=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Dn(`${t} must be an integer`);if(e<0)throw new Dn(`${t} must be a positive integer`);return e},dR=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fR=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const So="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const pR=()=>{var t,e,n,s,l;const a=hR();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":So,"X-Stainless-OS":mv(Deno.build.os),"X-Stainless-Arch":pv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":So,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":So,"X-Stainless-OS":mv((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":pv((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const c=mR();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":So,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":So,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function mR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const s=n.exec(navigator.userAgent);if(s){const l=s[1]||0,a=s[2]||0,c=s[3]||0;return{browser:e,version:`${l}.${a}.${c}`}}}return null}const pv=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",mv=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let wa;const gR=()=>wa??(wa=pR());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function X_(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function vR(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return X_({start(){},async pull(n){const{done:s,value:l}=await e.next();s?n.close():n.enqueue(l)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function W_(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function _R(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const s=t.getReader(),l=s.cancel();s.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xR=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z_=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Jd(t,e,n){return Z_(),new File(t,e??"unknown_file",n)}function ER(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const SR=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ex=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",CR=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&ex(t),TR=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function bR(t,e,n){if(Z_(),t=await t,CR(t))return t instanceof File?t:Jd([await t.arrayBuffer()],t.name);if(TR(t)){const l=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Jd(await xf(l),e,n)}const s=await xf(t);if(e||(e=ER(t)),!(n!=null&&n.type)){const l=s.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof l=="string"&&(n=Object.assign(Object.assign({},n),{type:l}))}return Jd(s,e,n)}async function xf(t){var e,n,s,l,a;let c=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)c.push(t);else if(ex(t))c.push(t instanceof Blob?t:await t.arrayBuffer());else if(SR(t))try{for(var h=!0,g=Hn(t),p;p=await g.next(),e=p.done,!e;h=!0){l=p.value,h=!1;const _=l;c.push(...await xf(_))}}catch(_){n={error:_}}finally{try{!h&&!e&&(s=g.return)&&await s.call(g)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${NR(t)}`)}return c}function NR(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tx{constructor(e){this._client=e}}tx._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nx(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const gv=Object.freeze(Object.create(null)),AR=(t=nx)=>(function(n,...s){if(n.length===1)return n[0];let l=!1;const a=[],c=n.reduce((_,x,E)=>{var T,N,M;/[?#]/.test(x)&&(l=!0);const I=s[E];let H=(l?encodeURIComponent:t)(""+I);return E!==s.length&&(I==null||typeof I=="object"&&I.toString===((M=Object.getPrototypeOf((N=Object.getPrototypeOf((T=I.hasOwnProperty)!==null&&T!==void 0?T:gv))!==null&&N!==void 0?N:gv))===null||M===void 0?void 0:M.toString))&&(H=I+"",a.push({start:_.length+x.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(I).slice(8,-1)} is not a valid path parameter`})),_+x+(E===s.length?"":H)},""),h=c.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=g.exec(h))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((_,x)=>_.start-x.start),a.length>0){let _=0;const x=a.reduce((E,T)=>{const N=" ".repeat(T.start-_),M="^".repeat(T.length);return _=T.start+T.length,E+N+M},"");throw new Dn(`Path parameters result in path with invalid segments:
${a.map(E=>E.error).join(`
`)}
${c}
${x}`)}return c}),Ra=AR(nx);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ix extends tx{create(e,n){var s;const{api_version:l=this._client.apiVersion}=e,a=za(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Dn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Dn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ra`/${l}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.delete(Ra`/${l}/interactions/${e}`,s)}cancel(e,n={},s){const{api_version:l=this._client.apiVersion}=n??{};return this._client.post(Ra`/${l}/interactions/${e}/cancel`,s)}get(e,n={},s){var l;const a=n??{},{api_version:c=this._client.apiVersion}=a,h=za(a,["api_version"]);return this._client.get(Ra`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},s),{stream:(l=n==null?void 0:n.stream)!==null&&l!==void 0?l:!1}))}}ix._key=Object.freeze(["interactions"]);class sx extends ix{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(t){let e=0;for(const l of t)e+=l.length;const n=new Uint8Array(e);let s=0;for(const l of t)n.set(l,s),s+=l.length;return n}let Ia;function Wf(t){let e;return(Ia??(e=new globalThis.TextEncoder,Ia=e.encode.bind(e)))(t)}let Ma;function yv(t){let e;return(Ma??(e=new globalThis.TextDecoder,Ma=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mu{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wf(e):e;this.buffer=wR([this.buffer,n]);const s=[];let l;for(;(l=RR(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){s.push(yv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,c=yv(this.buffer.subarray(0,a));s.push(c),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}mu.NEWLINE_CHARS=new Set([`
`,"\r"]);mu.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function RR(t,e){for(let l=e??0;l<t.length;l++){if(t[l]===10)return{preceding:l,index:l+1,carriage:!1};if(t[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function IR(t){for(let s=0;s<t.length-1;s++){if(t[s]===10&&t[s+1]===10||t[s]===13&&t[s+1]===13)return s+2;if(t[s]===13&&t[s+1]===10&&s+3<t.length&&t[s+2]===13&&t[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ya={off:0,error:200,warn:300,info:400,debug:500},vv=(t,e,n)=>{if(t){if(uR(Ya,t))return t;Qt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Ya))}`)}};function zl(){}function Da(t,e,n){return!e||Ya[t]>Ya[n]?zl:e[t].bind(e)}const MR={error:zl,warn:zl,info:zl,debug:zl};let _v=new WeakMap;function Qt(t){var e;const n=t.logger,s=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return MR;const l=_v.get(n);if(l&&l[0]===s)return l[1];const a={error:Da("error",n,s),warn:Da("warn",n,s),info:Da("info",n,s),debug:Da("debug",n,s)};return _v.set(n,[s,a]),a}const Ts=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class To{constructor(e,n,s){this.iterator=e,this.controller=n,this.client=s}static fromSSEResponse(e,n,s){let l=!1;const a=s?Qt(s):console;function c(){return Bn(this,arguments,function*(){var g,p,_,x;if(l)throw new Dn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=Hn(DR(e,n)),M;M=yield Te(N.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;if(!E)if(I.data.startsWith("[DONE]")){E=!0;continue}else try{yield yield Te(JSON.parse(I.data))}catch(H){throw a.error("Could not parse message into JSON:",I.data),a.error("From chunk:",I.raw),H}}}catch(I){p={error:I}}finally{try{!T&&!g&&(_=N.return)&&(yield Te(_.call(N)))}finally{if(p)throw p.error}}E=!0}catch(I){if(gf(I))return yield Te(void 0);throw I}finally{E||n.abort()}})}return new To(c,n,s)}static fromReadableStream(e,n,s){let l=!1;function a(){return Bn(this,arguments,function*(){var g,p,_,x;const E=new mu,T=W_(e);try{for(var N=!0,M=Hn(T),I;I=yield Te(M.next()),g=I.done,!g;N=!0){x=I.value,N=!1;const H=x;for(const F of E.decode(H))yield yield Te(F)}}catch(H){p={error:H}}finally{try{!N&&!g&&(_=M.return)&&(yield Te(_.call(M)))}finally{if(p)throw p.error}}for(const H of E.flush())yield yield Te(H)})}function c(){return Bn(this,arguments,function*(){var g,p,_,x;if(l)throw new Dn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let E=!1;try{try{for(var T=!0,N=Hn(a()),M;M=yield Te(N.next()),g=M.done,!g;T=!0){x=M.value,T=!1;const I=x;E||I&&(yield yield Te(JSON.parse(I)))}}catch(I){p={error:I}}finally{try{!T&&!g&&(_=N.return)&&(yield Te(_.call(N)))}finally{if(p)throw p.error}}E=!0}catch(I){if(gf(I))return yield Te(void 0);throw I}finally{E||n.abort()}})}return new To(c,n,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],s=this.iterator(),l=a=>({next:()=>{if(a.length===0){const c=s.next();e.push(c),n.push(c)}return a.shift()}});return[new To(()=>l(e),this.controller,this.client),new To(()=>l(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return X_({async start(){n=e[Symbol.asyncIterator]()},async pull(s){try{const{value:l,done:a}=await n.next();if(a)return s.close();const c=Wf(JSON.stringify(l)+`
`);s.enqueue(c)}catch(l){s.error(l)}},async cancel(){var s;await((s=n.return)===null||s===void 0?void 0:s.call(n))}})}}function DR(t,e){return Bn(this,arguments,function*(){var s,l,a,c;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Dn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Dn("Attempted to iterate over a response with no body");const h=new UR,g=new mu,p=W_(t.body);try{for(var _=!0,x=Hn(kR(p)),E;E=yield Te(x.next()),s=E.done,!s;_=!0){c=E.value,_=!1;const T=c;for(const N of g.decode(T)){const M=h.decode(N);M&&(yield yield Te(M))}}}catch(T){l={error:T}}finally{try{!_&&!s&&(a=x.return)&&(yield Te(a.call(x)))}finally{if(l)throw l.error}}for(const T of g.flush()){const N=h.decode(T);N&&(yield yield Te(N))}})}function kR(t){return Bn(this,arguments,function*(){var n,s,l,a;let c=new Uint8Array;try{for(var h=!0,g=Hn(t),p;p=yield Te(g.next()),n=p.done,!n;h=!0){a=p.value,h=!1;const _=a;if(_==null)continue;const x=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Wf(_):_;let E=new Uint8Array(c.length+x.length);E.set(c),E.set(x,c.length),c=E;let T;for(;(T=IR(c))!==-1;)yield yield Te(c.slice(0,T)),c=c.slice(T)}}catch(_){s={error:_}}finally{try{!h&&!n&&(l=g.return)&&(yield Te(l.call(g)))}finally{if(s)throw s.error}}c.length>0&&(yield yield Te(c))})}class UR{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,s,l]=PR(e,":");return l.startsWith(" ")&&(l=l.substring(1)),n==="event"?this.event=l:n==="data"&&this.data.push(l),null}}function PR(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function LR(t,e){const{response:n,requestLogID:s,retryOfRequestLogID:l,startTime:a}=e,c=await(async()=>{var h;if(e.options.stream)return Qt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):To.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),p=(h=g==null?void 0:g.split(";")[0])===null||h===void 0?void 0:h.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await n.json():await n.text()})();return Qt(t).debug(`[${s}] response parsed`,Ts({retryOfRequestLogID:l,url:n.url,status:n.status,body:c,durationMs:Date.now()-a})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zf extends Promise{constructor(e,n,s=LR){super(l=>{l(null)}),this.responsePromise=n,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Zf(this.client,this.responsePromise,async(n,s)=>e(await this.parseResponse(n,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ox=Symbol("brand.privateNullableHeaders");function*OR(t){if(!t)return;if(ox in t){const{values:s,nulls:l}=t;yield*s.entries();for(const a of l)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():hv(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let s of n){const l=s[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const a=hv(s[1])?s[1]:[s[1]];let c=!1;for(const h of a)h!==void 0&&(e&&!c&&(c=!0,yield[l,null]),yield[l,h])}}const Hl=t=>{const e=new Headers,n=new Set;for(const s of t){const l=new Set;for(const[a,c]of OR(s)){const h=a.toLowerCase();l.has(h)||(e.delete(a),l.add(h)),c===null?(e.delete(a),n.add(h)):(e.append(a,c),n.delete(h))}}return{[ox]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $d=t=>{var e,n,s,l,a,c;if(typeof globalThis.process<"u")return(s=(n=(e=aT)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(c=(a=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||a===void 0?void 0:a.call(l,t))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lx;class gu{constructor(e){var n,s,l,a,c,h,g,{baseURL:p=$d("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=$d("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:x="v1beta"}=e,E=za(e,["baseURL","apiKey","apiVersion"]);const T=Object.assign(Object.assign({apiKey:_,apiVersion:x},E),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=T.baseURL,this.timeout=(s=T.timeout)!==null&&s!==void 0?s:gu.DEFAULT_TIMEOUT,this.logger=(l=T.logger)!==null&&l!==void 0?l:console;const N="warn";this.logLevel=N,this.logLevel=(c=(a=vv(T.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:vv($d("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=T.fetchOptions,this.maxRetries=(h=T.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(g=T.fetch)!==null&&g!==void 0?g:yR(),this.encoder=xR,this._options=T,this.apiKey=_,this.apiVersion=x,this.clientAdapter=T.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Hl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Hl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Hl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,s])=>typeof s<"u").map(([n,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(n)}=`;throw new Dn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${So}`}defaultIdempotencyKey(){return`stainless-node-retry-${iR()}`}makeStatusError(e,n,s,l){return Wt.generate(e,n,s,l)}buildURL(e,n,s){const l=!this.baseURLOverridden()&&s||this.baseURL,a=oR(e)?new URL(e):new URL(l+(l.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return aR(c)||(n=Object.assign(Object.assign({},c),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:s}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,s){return this.request(Promise.resolve(s).then(l=>Object.assign({method:e,path:n},l)))}request(e,n=null){return new Zf(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,s){var l,a,c;const h=await e,g=(l=h.maxRetries)!==null&&l!==void 0?l:this.maxRetries;n==null&&(n=g),await this.prepareOptions(h);const{req:p,url:_,timeout:x}=await this.buildRequest(h,{retryCount:g-n});await this.prepareRequest(p,{url:_,options:h});const E="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),T=s===void 0?"":`, retryOf: ${s}`,N=Date.now();if(Qt(this).debug(`[${E}] sending request`,Ts({retryOfRequestLogID:s,method:h.method,url:_,options:h,headers:p.headers})),!((a=h.signal)===null||a===void 0)&&a.aborted)throw new vf;const M=new AbortController,I=await this.fetchWithTimeout(_,p,x,M).catch(yf),H=Date.now();if(I instanceof globalThis.Error){const q=`retrying, ${n} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new vf;const J=gf(I)||/timed? ?out/i.test(String(I)+("cause"in I?String(I.cause):""));if(n)return Qt(this).info(`[${E}] connection ${J?"timed out":"failed"} - ${q}`),Qt(this).debug(`[${E}] connection ${J?"timed out":"failed"} (${q})`,Ts({retryOfRequestLogID:s,url:_,durationMs:H-N,message:I.message})),this.retryRequest(h,n,s??E);throw Qt(this).info(`[${E}] connection ${J?"timed out":"failed"} - error; no more retries left`),Qt(this).debug(`[${E}] connection ${J?"timed out":"failed"} (error; no more retries left)`,Ts({retryOfRequestLogID:s,url:_,durationMs:H-N,message:I.message})),J?new V_:new pu({cause:I})}const F=`[${E}${T}] ${p.method} ${_} ${I.ok?"succeeded":"failed"} with status ${I.status} in ${H-N}ms`;if(!I.ok){const q=await this.shouldRetry(I);if(n&&q){const oe=`retrying, ${n} attempts remaining`;return await _R(I.body),Qt(this).info(`${F} - ${oe}`),Qt(this).debug(`[${E}] response error (${oe})`,Ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:H-N})),this.retryRequest(h,n,s??E,I.headers)}const J=q?"error; no more retries left":"error; not retryable";Qt(this).info(`${F} - ${J}`);const se=await I.text().catch(oe=>yf(oe).message),B=dR(se),X=B?void 0:se;throw Qt(this).debug(`[${E}] response error (${J})`,Ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,message:X,durationMs:Date.now()-N})),this.makeStatusError(I.status,B,X,I.headers)}return Qt(this).info(F),Qt(this).debug(`[${E}] response start`,Ts({retryOfRequestLogID:s,url:I.url,status:I.status,headers:I.headers,durationMs:H-N})),{response:I,options:h,controller:M,requestLogID:E,retryOfRequestLogID:s,startTime:N}}async fetchWithTimeout(e,n,s,l){const a=n||{},{signal:c,method:h}=a,g=za(a,["signal","method"]);c&&c.addEventListener("abort",()=>l.abort());const p=setTimeout(()=>l.abort(),s),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,x=Object.assign(Object.assign(Object.assign({signal:l.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);h&&(x.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(p)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,s,l){var a;let c;const h=l==null?void 0:l.get("retry-after-ms");if(h){const p=parseFloat(h);Number.isNaN(p)||(c=p)}const g=l==null?void 0:l.get("retry-after");if(g&&!c){const p=parseFloat(g);Number.isNaN(p)?c=Date.parse(g)-Date.now():c=p*1e3}if(!(c&&0<=c&&c<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(n,p)}return await fR(c),this.makeRequest(e,n-1,s)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,c=Math.min(.5*Math.pow(2,a),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:n=0}={}){var s,l,a;const c=Object.assign({},e),{method:h,path:g,query:p,defaultBaseURL:_}=c,x=this.buildURL(g,p,_);"timeout"in c&&cR("timeout",c.timeout),c.timeout=(s=c.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:E,body:T}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:h,bodyHeaders:E,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&T instanceof globalThis.ReadableStream&&{duplex:"half"}),T&&{body:T}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(a=c.fetchOptions)!==null&&a!==void 0?a:{}),url:x,timeout:c.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:s,retryCount:l}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=Hl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),gR()),this._options.defaultHeaders,s,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Hl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:vR(e)}:this.encoder({body:e,headers:s})}}gu.DEFAULT_TIMEOUT=6e4;class kt extends gu{constructor(){super(...arguments),this.interactions=new sx(this)}}lx=kt;kt.GeminiNextGenAPIClient=lx;kt.GeminiNextGenAPIClientError=Dn;kt.APIError=Wt;kt.APIConnectionError=pu;kt.APIConnectionTimeoutError=V_;kt.APIUserAbortError=vf;kt.NotFoundError=j_;kt.ConflictError=J_;kt.RateLimitError=K_;kt.BadRequestError=F_;kt.AuthenticationError=z_;kt.InternalServerError=Q_;kt.PermissionDeniedError=Y_;kt.UnprocessableEntityError=$_;kt.toFile=bR;kt.Interactions=sx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BR(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function HR(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function GR(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function qR(t,e){const n={},s=d(t,["sdkHttpResponse"]);return s!=null&&f(n,["sdkHttpResponse"],s),n}function VR(t,e,n){const s={};if(d(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=d(t,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&f(e,["displayName"],l),d(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(t,["epochCount"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","epochCount"],a);const c=d(t,["learningRateMultiplier"]);if(c!=null&&f(s,["tuningTask","hyperparameters","learningRateMultiplier"],c),d(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=d(t,["batchSize"]);e!==void 0&&h!=null&&f(e,["tuningTask","hyperparameters","batchSize"],h);const g=d(t,["learningRate"]);if(e!==void 0&&g!=null&&f(e,["tuningTask","hyperparameters","learningRate"],g),d(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function FR(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec"],xv(T))}else if(l==="PREFERENCE_TUNING"){const T=d(t,["validationDataset"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec"],xv(T))}const a=d(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&f(e,["tunedModelDisplayName"],a);const c=d(t,["description"]);e!==void 0&&c!=null&&f(e,["description"],c);let h=d(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],T)}else if(h==="PREFERENCE_TUNING"){const T=d(t,["epochCount"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],T)}let g=d(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],T)}else if(g==="PREFERENCE_TUNING"){const T=d(t,["learningRateMultiplier"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],T)}let p=d(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],T)}else if(p==="PREFERENCE_TUNING"){const T=d(t,["exportLastCheckpointOnly"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],T)}let _=d(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],T)}else if(_==="PREFERENCE_TUNING"){const T=d(t,["adapterSize"]);e!==void 0&&T!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],T)}if(d(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const x=d(t,["labels"]);e!==void 0&&x!=null&&f(e,["labels"],x);const E=d(t,["beta"]);return e!==void 0&&E!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),s}function zR(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&tI(a);const c=d(t,["config"]);return c!=null&&VR(c,n),n}function YR(t,e){const n={},s=d(t,["baseModel"]);s!=null&&f(n,["baseModel"],s);const l=d(t,["preTunedModel"]);l!=null&&f(n,["preTunedModel"],l);const a=d(t,["trainingDataset"]);a!=null&&nI(a,n,e);const c=d(t,["config"]);return c!=null&&FR(c,n,e),n}function jR(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function JR(t,e){const n={},s=d(t,["name"]);return s!=null&&f(n,["_url","name"],s),n}function $R(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function KR(t,e,n){const s={},l=d(t,["pageSize"]);e!==void 0&&l!=null&&f(e,["_query","pageSize"],l);const a=d(t,["pageToken"]);e!==void 0&&a!=null&&f(e,["_query","pageToken"],a);const c=d(t,["filter"]);return e!==void 0&&c!=null&&f(e,["_query","filter"],c),s}function QR(t,e){const n={},s=d(t,["config"]);return s!=null&&$R(s,n),n}function XR(t,e){const n={},s=d(t,["config"]);return s!=null&&KR(s,n),n}function WR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tunedModels"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>rx(h))),f(n,["tuningJobs"],c)}return n}function ZR(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["nextPageToken"]);l!=null&&f(n,["nextPageToken"],l);const a=d(t,["tuningJobs"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>Ef(h))),f(n,["tuningJobs"],c)}return n}function eI(t,e){const n={},s=d(t,["name"]);s!=null&&f(n,["model"],s);const l=d(t,["name"]);return l!=null&&f(n,["endpoint"],l),n}function tI(t,e){const n={};if(d(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(t,["examples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(a=>a)),f(n,["examples","examples"],l)}return n}function nI(t,e,n){const s={};let l=d(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=d(t,["gcsUri"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let a=d(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(a==="PREFERENCE_TUNING"){const c=d(t,["vertexDatasetResource"]);e!==void 0&&c!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(d(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function rx(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],C_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["tuningTask","startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["tuningTask","completeTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const _=d(t,["description"]);_!=null&&f(n,["description"],_);const x=d(t,["baseModel"]);x!=null&&f(n,["baseModel"],x);const E=d(t,["_self"]);return E!=null&&f(n,["tunedModel"],eI(E)),n}function Ef(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["state"]);a!=null&&f(n,["state"],C_(a));const c=d(t,["createTime"]);c!=null&&f(n,["createTime"],c);const h=d(t,["startTime"]);h!=null&&f(n,["startTime"],h);const g=d(t,["endTime"]);g!=null&&f(n,["endTime"],g);const p=d(t,["updateTime"]);p!=null&&f(n,["updateTime"],p);const _=d(t,["error"]);_!=null&&f(n,["error"],_);const x=d(t,["description"]);x!=null&&f(n,["description"],x);const E=d(t,["baseModel"]);E!=null&&f(n,["baseModel"],E);const T=d(t,["tunedModel"]);T!=null&&f(n,["tunedModel"],T);const N=d(t,["preTunedModel"]);N!=null&&f(n,["preTunedModel"],N);const M=d(t,["supervisedTuningSpec"]);M!=null&&f(n,["supervisedTuningSpec"],M);const I=d(t,["preferenceOptimizationSpec"]);I!=null&&f(n,["preferenceOptimizationSpec"],I);const H=d(t,["tuningDataStats"]);H!=null&&f(n,["tuningDataStats"],H);const F=d(t,["encryptionSpec"]);F!=null&&f(n,["encryptionSpec"],F);const q=d(t,["partnerModelTuningSpec"]);q!=null&&f(n,["partnerModelTuningSpec"],q);const J=d(t,["customBaseModel"]);J!=null&&f(n,["customBaseModel"],J);const se=d(t,["experiment"]);se!=null&&f(n,["experiment"],se);const B=d(t,["labels"]);B!=null&&f(n,["labels"],B);const X=d(t,["outputUri"]);X!=null&&f(n,["outputUri"],X);const ve=d(t,["pipelineJob"]);ve!=null&&f(n,["pipelineJob"],ve);const oe=d(t,["serviceAccount"]);oe!=null&&f(n,["serviceAccount"],oe);const de=d(t,["tunedModelDisplayName"]);de!=null&&f(n,["tunedModelDisplayName"],de);const ge=d(t,["veoTuningSpec"]);return ge!=null&&f(n,["veoTuningSpec"],ge),n}function iI(t,e){const n={},s=d(t,["sdkHttpResponse"]);s!=null&&f(n,["sdkHttpResponse"],s);const l=d(t,["name"]);l!=null&&f(n,["name"],l);const a=d(t,["metadata"]);a!=null&&f(n,["metadata"],a);const c=d(t,["done"]);c!=null&&f(n,["done"],c);const h=d(t,["error"]);return h!=null&&f(n,["error"],h),n}function xv(t,e){const n={},s=d(t,["gcsUri"]);s!=null&&f(n,["validationDatasetUri"],s);const l=d(t,["vertexDatasetResource"]);return l!=null&&f(n,["validationDatasetUri"],l),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sI extends Si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ds(_i.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var s;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const l={tunedModelName:n.baseModel};!((s=n.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(l.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:l});return a.baseModel=void 0,await this.tuneInternal(a)}else{const l=Object.assign({},n);return await this.tuneInternal(l)}else{const l=Object.assign({},n),a=await this.tuneMldevInternal(l);let c="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?c=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(c=a.name.split("/operations/")[0]),{name:c,state:af.JOB_STATE_QUEUED}}}}async getInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=JR(e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>Ef(_))}else{const p=jR(e);return h=ue("{name}",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>rx(_))}}async listInternal(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=XR(e);return h=ue("tuningJobs",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=ZR(_),E=new j0;return Object.assign(E,x),E})}else{const p=QR(e);return h=ue("tunedModels",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=WR(_),E=new j0;return Object.assign(E,x),E})}}async cancel(e){var n,s,l,a;let c,h="",g={};if(this.apiClient.isVertexAI()){const p=HR(e);return h=ue("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=qR(_),E=new J0;return Object.assign(E,x),E})}else{const p=BR(e);return h=ue("{name}:cancel",p._url),g=p._query,delete p._url,delete p._query,c=this.apiClient.request({path:h,queryParams:g,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(x=>{const E=x;return E.sdkHttpResponse={headers:_.headers},E})),c.then(_=>{const x=GR(_),E=new J0;return Object.assign(E,x),E})}}async tuneInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI()){const h=YR(e,e);return a=ue("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>Ef(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,s;let l,a="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=zR(e);return a=ue("tunedModels",h._url),c=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:g.headers},_})),l.then(g=>iI(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oI{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lI=1024*1024*8,rI=3,aI=1e3,uI=2,ja="x-goog-upload-status";async function cI(t,e,n){var s;const l=await ax(t,e,n),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function dI(t,e,n){var s;const l=await ax(t,e,n),a=await(l==null?void 0:l.json());if(((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[ja])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=y_(a),h=new jf;return Object.assign(h,c),h}async function ax(t,e,n){var s,l;let a=0,c=0,h=new cf(new Response),g="upload";for(a=t.size;c<a;){const p=Math.min(lI,a-c),_=t.slice(c,c+p);c+p>=a&&(g+=", finalize");let x=0,E=aI;for(;x<rI&&(h=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(c),"Content-Length":String(p)}}}),!(!((s=h==null?void 0:h.headers)===null||s===void 0)&&s[ja]));)x++,await hI(E),E=E*uI;if(c+=p,((l=h==null?void 0:h.headers)===null||l===void 0?void 0:l[ja])!=="active")break;if(a<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function fI(t){return{size:t.size,type:t.type}}function hI(t){return new Promise(e=>setTimeout(e,t))}class pI{async upload(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cI(e,n,s)}async uploadToFileSearchStore(e,n,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dI(e,n,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fI(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mI{create(e,n,s){return new gI(e,n,s)}}class gI{constructor(e,n,s){this.url=e,this.headers=n,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ev="x-goog-api-key";class yI{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Ev)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ev,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vI="gl-node/";class _I{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new kt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const s=fT(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const l=new yI(this.apiKey);this.apiClient=new f1({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:vI+"web",uploader:new pI,downloader:new oI}),this.models=new M1(this.apiClient),this.live=new b1(this.apiClient,l,new mI),this.batches=new qb(this.apiClient),this.chats=new SN(this.models,this.apiClient),this.caches=new _N(this.apiClient),this.files=new DN(this.apiClient),this.operations=new D1(this.apiClient),this.authTokens=new $1(this.apiClient),this.tunings=new sI(this.apiClient),this.fileSearchStores=new nR(this.apiClient)}}const xI=({globalSettings:t,activePool:e})=>{const[n,s]=W.useState(!1),[l,a]=W.useState([]),[c,h]=W.useState(""),[g,p]=W.useState(!1),_=W.useRef(null);W.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[l]);const x=async()=>{if(!c.trim()||g)return;const E=c.trim();a(T=>[...T,{role:"user",text:E}]),h(""),p(!0);try{const T=new _I({apiKey:"PLACEHOLDER_API_KEY"}),N=`
        You are the "Charity Squares Assistant" for a Super Bowl squares contest.
        Current Charity: ${t.charityName}.
        Current Matchup: ${e.settings.teamA} vs ${e.settings.teamB}.
        Cost per square: $${e.settings.costPerBox}.
        Board Name: ${e.name}.
        Rules: Participants pick a square. Once the board is full, axes (0-9) are randomized. 
        Winning square is determined by the last digit of the score for each team at various intervals (usually quarters).
        Keep responses helpful, enthusiastic about charity, and concise.
      `,M=await T.models.generateContent({model:"gemini-3-flash-preview",contents:`${N}

User Question: ${E}`});a(I=>[...I,{role:"ai",text:M.text||"I'm sorry, I couldn't process that."}])}catch{a(N=>[...N,{role:"ai",text:"Error connecting to AI. Please try again later."}])}finally{p(!1)}};return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>s(!n),className:"fixed bottom-8 right-8 w-16 h-16 bg-indigo-600 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 active:scale-95 transition-all z-[100] border-4 border-white animate-bounce-slow",children:y.jsx("i",{className:`fas ${n?"fa-times":"fa-magic"} text-xl`})}),n&&y.jsxs("div",{className:"fixed bottom-28 right-8 w-80 md:w-96 bg-white rounded-[2rem] shadow-2xl z-[100] border border-gray-100 flex flex-col overflow-hidden animate-in slide-in-from-bottom-4 duration-300",children:[y.jsxs("div",{className:"bg-indigo-600 p-6 text-white",children:[y.jsxs("h3",{className:"font-black uppercase tracking-tight flex items-center gap-2",children:[y.jsx("i",{className:"fas fa-robot"}),"Contest Assistant"]}),y.jsx("p",{className:"text-[10px] text-indigo-200 font-bold uppercase tracking-widest mt-1",children:"Ask me anything about the rules!"})]}),y.jsxs("div",{ref:_,className:"flex-grow p-4 h-80 overflow-y-auto space-y-4 scrollbar-hide",children:[l.length===0&&y.jsx("div",{className:"text-center py-10",children:y.jsx("p",{className:"text-gray-400 text-xs italic",children:`"How do I win?" or "What's the charity for?"`})}),l.map((E,T)=>y.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:y.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-xs leading-relaxed ${E.role==="user"?"bg-indigo-100 text-indigo-900 rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:E.text})},T)),g&&y.jsx("div",{className:"flex justify-start",children:y.jsx("div",{className:"bg-gray-100 p-3 rounded-2xl rounded-bl-none",children:y.jsxs("div",{className:"flex gap-1",children:[y.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),y.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"}),y.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.4s]"})]})})})]}),y.jsxs("div",{className:"p-4 border-t border-gray-50 flex gap-2",children:[y.jsx("input",{type:"text",value:c,onChange:E=>h(E.target.value),onKeyDown:E=>E.key==="Enter"&&x(),placeholder:"Type a message...",className:"flex-grow bg-gray-50 border-none rounded-xl px-4 py-2 text-xs focus:ring-2 focus:ring-indigo-500 outline-none"}),y.jsx("button",{onClick:x,className:"w-10 h-10 bg-indigo-600 text-white rounded-xl flex items-center justify-center hover:bg-black transition-colors",children:y.jsx("i",{className:"fas fa-paper-plane text-xs"})})]})]})]})},EI=({state:t})=>{const[e,n]=W.useState(""),[s,l]=W.useState(""),[a,c]=W.useState(null),h=W.useMemo(()=>{if(!s)return null;const x=[],E=s.toLowerCase();if(t.pools.forEach(H=>{const F=(H.participants||[]).find(q=>q.email.toLowerCase()===E||(q.phone||"").replace(/[^\d]/g,"")===E.replace(/[^\d]/g,""));if(F){const q=(H.squares||[]).filter(J=>J.participantId===F.id);if(q.length>0){const J=q.length*H.settings.costPerBox,se=(F.paymentHistory||[]).reduce((B,X)=>B+X.amount,0);x.push({pool:H,participant:F,squares:q,due:J,paid:se})}}}),x.length===0)return null;const T=x.reduce((H,F)=>H+F.squares.length,0),N=x.reduce((H,F)=>H+F.due,0),M=x.reduce((H,F)=>H+F.paid,0),I=Math.max(0,N-M);return{results:x,totalBoxes:T,totalDue:N,totalPaid:M,netBalance:I,alias:x[0].participant.alias}},[s,t.pools]),g=x=>{x.preventDefault(),l(e.trim()),c(null)},p=x=>`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(x)}&margin=10`,_=({amount:x,alias:E})=>{const T=t.globalSettings,N=T.paypalLink||(T.paypalAccount?`https://www.paypal.com/paypalme/${T.paypalAccount}/${x}`:null),M=T.venmoAccount?`https://venmo.com/${T.venmoAccount.replace("@","")}?txn=pay&amount=${x}&note=${encodeURIComponent(`Balance: ${E.toUpperCase()}`)}`:null,I=T.zelleAccount||"";return y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 w-full max-w-2xl mx-auto",children:[N&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsxs("a",{href:N,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#003087] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("i",{className:"fab fa-paypal"})," PayPal"]}),y.jsx("button",{type:"button",onClick:H=>{H.preventDefault(),c(a==="paypal"?null:"paypal")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="paypal"&&y.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:y.jsx("img",{src:p(N),alt:"PayPal QR",className:"w-20 h-20"})})]}),M&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsxs("a",{href:M,target:"_blank",className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#3d95ce] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow hover:brightness-110 transition-all",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("i",{className:"fab fa-vimeo-v"})," Venmo"]}),y.jsx("button",{type:"button",onClick:H=>{H.preventDefault(),c(a==="venmo"?null:"venmo")},className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="venmo"&&y.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:y.jsx("img",{src:p(M),alt:"Venmo QR",className:"w-20 h-20"})})]}),I&&y.jsxs("div",{className:"flex flex-col gap-1",children:[y.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-2 bg-[#6d1ed4] text-white rounded-lg font-black uppercase text-[9px] tracking-widest shadow",children:[y.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(I),alert("Zelle info copied!")},className:"flex items-center gap-1 text-left truncate",children:[y.jsx("i",{className:"fas fa-university"})," Zelle"]}),y.jsx("button",{type:"button",onClick:()=>c(a==="zelle"?null:"zelle"),className:"bg-white/20 px-1.5 py-0.5 rounded text-[7px] hover:bg-white/30 transition-colors",children:"QR"})]}),a==="zelle"&&y.jsx("div",{className:"bg-white p-2 rounded-xl border border-indigo-100 flex flex-col items-center animate-in zoom-in-95 duration-200",children:y.jsx("img",{src:p(I),alt:"Zelle QR",className:"w-20 h-20"})})]})]})};return y.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 pb-8 animate-in fade-in duration-500",children:[y.jsxs("section",{className:"bg-indigo-900 text-white rounded-2xl p-4 md:p-6 shadow-xl relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-5 pointer-events-none",children:y.jsx("i",{className:"fas fa-user-shield text-[60px] rotate-12"})}),y.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-xl font-black uppercase tracking-tight",children:"Status Check"}),y.jsx("p",{className:"text-indigo-300 text-[8px] font-bold uppercase tracking-widest",children:"Verify account balances"})]}),y.jsxs("form",{onSubmit:g,className:"flex gap-2",children:[y.jsx("input",{required:!0,type:"text",value:e,onChange:x=>n(x.target.value),placeholder:"Email or phone...",className:"w-full sm:w-56 px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white font-bold outline-none focus:border-white focus:bg-white/20 transition-all placeholder:text-indigo-400 text-xs"}),y.jsx("button",{type:"submit",className:"bg-white text-indigo-900 px-4 py-2 rounded-lg font-black uppercase text-[9px] tracking-widest shadow-lg hover:bg-indigo-50 active:scale-95 transition-all",children:"Go"})]})]})]}),h?y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-lg overflow-hidden",children:[y.jsxs("div",{className:"grid grid-cols-3 divide-x divide-gray-100",children:[y.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[y.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Squares"}),y.jsx("p",{className:"text-2xl font-black text-indigo-900 leading-none",children:h.totalBoxes})]}),y.jsxs("div",{className:"p-4 flex flex-col items-center text-center",children:[y.jsx("span",{className:"text-[7px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Contributed"}),y.jsxs("p",{className:"text-2xl font-black text-gray-900 leading-none",children:["$",h.totalPaid]})]}),y.jsxs("div",{className:`p-4 flex flex-col items-center text-center transition-all ${h.netBalance>0?"bg-orange-50/30":"bg-green-50/30"}`,children:[y.jsx("span",{className:`text-[7px] font-black uppercase tracking-widest mb-1 ${h.netBalance>0?"text-orange-600":"text-green-600"}`,children:"Balance"}),h.netBalance>0?y.jsxs("p",{className:"text-2xl font-black text-orange-600 leading-none",children:["$",h.netBalance]}):y.jsx("p",{className:"text-xl font-black text-green-600 leading-none uppercase tracking-tighter",children:"PAID"})]})]}),h.netBalance>0&&y.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-gray-50 bg-orange-50/20 animate-in slide-in-from-top-2 duration-300",children:[y.jsx("div",{className:"text-center mb-3",children:y.jsxs("h3",{className:"text-[8px] font-black text-orange-600 uppercase tracking-widest",children:["Settle Outstanding: $",h.netBalance]})}),y.jsx(_,{amount:h.netBalance,alias:h.alias})]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-[9px] font-black text-indigo-900 uppercase tracking-widest px-2",children:"History Breakdown"}),y.jsx("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-sm overflow-hidden",children:y.jsx("div",{className:"divide-y divide-gray-50",children:h.results.map((x,E)=>y.jsxs("div",{className:"px-4 py-3 flex items-center justify-between gap-4 hover:bg-indigo-50/30 transition-colors",children:[y.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[y.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex-shrink-0 flex items-center justify-center text-indigo-600",children:y.jsx("i",{className:"fas fa-football-ball text-[10px]"})}),y.jsxs("div",{className:"truncate",children:[y.jsx("h4",{className:"font-black text-xs text-indigo-900 uppercase truncate",children:x.pool.name}),y.jsxs("p",{className:"text-[7px] font-bold text-gray-400 uppercase",children:[x.squares.length," Box",x.squares.length>1?"es":"","  (",x.squares.map(T=>`#${T.id+1}`).join(", "),")"]})]})]}),y.jsxs("div",{className:"flex-shrink-0 text-right",children:[y.jsxs("p",{className:`text-xs font-black ${x.paid>=x.due?"text-green-600":"text-orange-600"}`,children:["$",x.paid,"/$",x.due]}),y.jsx("span",{className:`text-[6px] font-black uppercase ${x.paid>=x.due?"text-green-500":"text-orange-500"}`,children:x.paid>=x.due?"Paid":"Pending"})]})]},E))})})]})]}):s&&y.jsxs("div",{className:"bg-white border-2 border-dashed border-gray-100 rounded-2xl py-12 text-center animate-in zoom-in-95",children:[y.jsx("i",{className:"fas fa-search-minus text-gray-200 text-2xl mb-2"}),y.jsx("h4",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"No squares found for this email or phone"})]})]})},SI=()=>{};var Sv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=function(t,e){if(!t)throw qo(e)},qo=function(t){return new Error("Firebase Database ("+ux.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},CI=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const l=t[n++];if(l<128)e[s++]=String.fromCharCode(l);else if(l>191&&l<224){const a=t[n++];e[s++]=String.fromCharCode((l&31)<<6|a&63)}else if(l>239&&l<365){const a=t[n++],c=t[n++],h=t[n++],g=((l&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],c=t[n++];e[s++]=String.fromCharCode((l&15)<<12|(a&63)<<6|c&63)}}return e.join("")},eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<t.length;l+=3){const a=t[l],c=l+1<t.length,h=c?t[l+1]:0,g=l+2<t.length,p=g?t[l+2]:0,_=a>>2,x=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,T=p&63;g||(T=64,c||(E=64)),s.push(n[_],n[x],n[E],n[T])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<t.length;){const a=n[t.charAt(l++)],h=l<t.length?n[t.charAt(l)]:0;++l;const p=l<t.length?n[t.charAt(l)]:64;++l;const x=l<t.length?n[t.charAt(l)]:64;if(++l,a==null||h==null||p==null||x==null)throw new TI;const E=a<<2|h>>4;if(s.push(E),p!==64){const T=h<<4&240|p>>2;if(s.push(T),x!==64){const N=p<<6&192|x;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dx=function(t){const e=cx(t);return eh.encodeByteArray(e,!0)},Ja=function(t){return dx(t).replace(/\./g,"")},Sf=function(t){try{return eh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t){return fx(void 0,t)}function fx(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!NI(n)||(t[n]=fx(t[n],e[n]));return t}function NI(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=()=>AI().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof Sv>"u")return;const t=Sv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},II=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sf(t[1]);return e&&JSON.parse(e)},hx=()=>{try{return SI()||wI()||RI()||II()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MI=t=>{var e,n;return(n=(e=hx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},DI=t=>{const e=MI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},px=()=>{var t;return(t=hx())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",l=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ja(JSON.stringify(n)),Ja(JSON.stringify(c)),""].join(".")}const Yl={};function PI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?t.emulator.push(e):t.prod.push(e);return t}function LI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Cv=!1;function OI(t,e){if(typeof window>"u"||typeof document>"u"||!th(window.location.host)||Yl[t]===e||Yl[t]||Cv)return;Yl[t]=e;function n(E){return`__firebase__banner__${E}`}const s="__firebase__banner",a=PI().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Cv=!0,c()},E}function _(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=LI(s),T=n("text"),N=document.getElementById(T)||document.createElement("span"),M=n("learnmore"),I=document.getElementById(M)||document.createElement("a"),H=n("preprendIcon"),F=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const q=E.element;h(q),_(I,M);const J=p();g(F,H),q.append(F,N,I,J),document.body.appendChild(q)}a?(N.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(BI())}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GI(){return ux.NODE_ADMIN===!0}function qI(){try{return typeof indexedDB=="object"}catch{return!1}}function VI(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var a;e(((a=l.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="FirebaseError";class ar extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=FI,Object.setPrototypeOf(this,ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gx.prototype.create)}}class gx{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},l=`${this.service}/${e}`,a=this.errors[e],c=a?zI(a,s):"Error",h=`${this.serviceName}: ${c} (${l}).`;return new ar(l,h,s)}}function zI(t,e){return t.replace(YI,(n,s)=>{const l=e[s];return l!=null?String(l):`<${s}?>`})}const YI=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(t){return JSON.parse(t)}function Dt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=function(t){let e={},n={},s={},l="";try{const a=t.split(".");e=Wl(Sf(a[0])||""),n=Wl(Sf(a[1])||""),l=a[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:l}},jI=function(t){const e=yx(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},JI=function(t){const e=yx(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Do(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Tv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $a(t,e,n){const s={};for(const l in t)Object.prototype.hasOwnProperty.call(t,l)&&(s[l]=e.call(n,t[l],l,t));return s}function Ka(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const l of n){if(!s.includes(l))return!1;const a=t[l],c=e[l];if(bv(a)&&bv(c)){if(!Ka(a,c))return!1}else if(a!==c)return!1}for(const l of s)if(!n.includes(l))return!1;return!0}function bv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let x=0;x<16;x++)s[x]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let x=0;x<16;x++)s[x]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let x=16;x<80;x++){const E=s[x-3]^s[x-8]^s[x-14]^s[x-16];s[x]=(E<<1|E>>>31)&4294967295}let l=this.chain_[0],a=this.chain_[1],c=this.chain_[2],h=this.chain_[3],g=this.chain_[4],p,_;for(let x=0;x<80;x++){x<40?x<20?(p=h^a&(c^h),_=1518500249):(p=a^c^h,_=1859775393):x<60?(p=a&c|h&(a|c),_=2400959708):(p=a^c^h,_=3395469782);const E=(l<<5|l>>>27)+p+g+_+s[x]&4294967295;g=h,h=c,c=(a<<30|a>>>2)&4294967295,a=l,l=E}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let l=0;const a=this.buf_;let c=this.inbuf_;for(;l<n;){if(c===0)for(;l<=s;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<n;)if(a[c]=e.charCodeAt(l),++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}else for(;l<n;)if(a[c]=e[l],++c,++l,c===this.blockSize){this.compress_(a),c=0;break}}this.inbuf_=c,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let l=0;l<5;l++)for(let a=24;a>=0;a-=8)e[s]=this.chain_[l]>>a&255,++s;return e}}function yu(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let l=t.charCodeAt(s);if(l>=55296&&l<=56319){const a=l-55296;s++,ne(s<t.length,"Surrogate pair missing trail surrogate.");const c=t.charCodeAt(s)-56320;l=65536+(a<<10)+c}l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):l<65536?(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},vu=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){return t&&t._delegate?t._delegate:t}class Zl{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new rr;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZI(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:l});s.resolve(a)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);s===h&&c.resolve(l)}return l}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(s)??new Set;l.add(e),this.onInitCallbacks.set(s,l);const a=this.instances.get(s);return a&&e(a,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const l of s)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:WI(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WI(t){return t===bs?void 0:t}function ZI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ot||(ot={}));const tM={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},nM=ot.INFO,iM={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},sM=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),l=iM[e];if(l)console[l](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vx{constructor(e){this.name=e,this._logLevel=nM,this._logHandler=sM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const oM=(t,e)=>e.some(n=>t instanceof n);let Nv,Av;function lM(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rM(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _x=new WeakMap,Cf=new WeakMap,xx=new WeakMap,Kd=new WeakMap,nh=new WeakMap;function aM(t){const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("success",a),t.removeEventListener("error",c)},a=()=>{n(Zi(t.result)),l()},c=()=>{s(t.error),l()};t.addEventListener("success",a),t.addEventListener("error",c)});return e.then(n=>{n instanceof IDBCursor&&_x.set(n,t)}).catch(()=>{}),nh.set(e,t),e}function uM(t){if(Cf.has(t))return;const e=new Promise((n,s)=>{const l=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",c),t.removeEventListener("abort",c)},a=()=>{n(),l()},c=()=>{s(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",a),t.addEventListener("error",c),t.addEventListener("abort",c)});Cf.set(t,e)}let Tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cM(t){Tf=t(Tf)}function dM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Qd(this),e,...n);return xx.set(s,e.sort?e.sort():[e]),Zi(s)}:rM().includes(t)?function(...e){return t.apply(Qd(this),e),Zi(_x.get(this))}:function(...e){return Zi(t.apply(Qd(this),e))}}function fM(t){return typeof t=="function"?dM(t):(t instanceof IDBTransaction&&uM(t),oM(t,lM())?new Proxy(t,Tf):t)}function Zi(t){if(t instanceof IDBRequest)return aM(t);if(Kd.has(t))return Kd.get(t);const e=fM(t);return e!==t&&(Kd.set(t,e),nh.set(e,t)),e}const Qd=t=>nh.get(t);function hM(t,e,{blocked:n,upgrade:s,blocking:l,terminated:a}={}){const c=indexedDB.open(t,e),h=Zi(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Zi(c.result),g.oldVersion,g.newVersion,Zi(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{a&&g.addEventListener("close",()=>a()),l&&g.addEventListener("versionchange",p=>l(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const pM=["get","getKey","getAll","getAllKeys","count"],mM=["put","add","delete","clear"],Xd=new Map;function wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,l=mM.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(l||pM.includes(n)))return;const a=async function(c,...h){const g=this.transaction(c,l?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),l&&g.done]))[0]};return Xd.set(e,a),a}cM(t=>({...t,get:(e,n,s)=>wv(e,n)||t.get(e,n,s),has:(e,n)=>!!wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yM(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function yM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",Rv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi=new vx("@firebase/app"),vM="@firebase/app-compat",_M="@firebase/analytics-compat",xM="@firebase/analytics",EM="@firebase/app-check-compat",SM="@firebase/app-check",CM="@firebase/auth",TM="@firebase/auth-compat",bM="@firebase/database",NM="@firebase/data-connect",AM="@firebase/database-compat",wM="@firebase/functions",RM="@firebase/functions-compat",IM="@firebase/installations",MM="@firebase/installations-compat",DM="@firebase/messaging",kM="@firebase/messaging-compat",UM="@firebase/performance",PM="@firebase/performance-compat",LM="@firebase/remote-config",OM="@firebase/remote-config-compat",BM="@firebase/storage",HM="@firebase/storage-compat",GM="@firebase/firestore",qM="@firebase/ai",VM="@firebase/firestore-compat",FM="firebase",zM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="[DEFAULT]",YM={[bf]:"fire-core",[vM]:"fire-core-compat",[xM]:"fire-analytics",[_M]:"fire-analytics-compat",[SM]:"fire-app-check",[EM]:"fire-app-check-compat",[CM]:"fire-auth",[TM]:"fire-auth-compat",[bM]:"fire-rtdb",[NM]:"fire-data-connect",[AM]:"fire-rtdb-compat",[wM]:"fire-fn",[RM]:"fire-fn-compat",[IM]:"fire-iid",[MM]:"fire-iid-compat",[DM]:"fire-fcm",[kM]:"fire-fcm-compat",[UM]:"fire-perf",[PM]:"fire-perf-compat",[LM]:"fire-rc",[OM]:"fire-rc-compat",[BM]:"fire-gcs",[HM]:"fire-gcs-compat",[GM]:"fire-fst",[VM]:"fire-fst-compat",[qM]:"fire-vertex","fire-js":"fire-js",[FM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Map,jM=new Map,Af=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xa(t){const e=t.name;if(Af.has(e))return xi.debug(`There were multiple attempts to register component ${e}.`),!1;Af.set(e,t);for(const n of Qa.values())Iv(n,t);for(const n of jM.values())Iv(n,t);return!0}function JM(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $M(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new gx("app","Firebase",KM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Zl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=zM;function Ex(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Nf,automaticDataCollectionEnabled:!0,...e},l=s.name;if(typeof l!="string"||!l)throw es.create("bad-app-name",{appName:String(l)});if(n||(n=px()),!n)throw es.create("no-options");const a=Qa.get(l);if(a){if(Ka(n,a.options)&&Ka(s,a.config))return a;throw es.create("duplicate-app",{appName:l})}const c=new eM(l);for(const g of Af.values())c.addComponent(g);const h=new QM(n,s,c);return Qa.set(l,h),h}function WM(t=Nf){const e=Qa.get(t);if(!e&&t===Nf&&px())return Ex();if(!e)throw es.create("no-app",{appName:t});return e}function wo(t,e,n){let s=YM[t]??t;n&&(s+=`-${n}`);const l=s.match(/\s|\//),a=e.match(/\s|\//);if(l||a){const c=[`Unable to register library "${s}" with version "${e}":`];l&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xi.warn(c.join(" "));return}Xa(new Zl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="firebase-heartbeat-database",eD=1,er="firebase-heartbeat-store";let Wd=null;function Sx(){return Wd||(Wd=hM(ZM,eD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(er)}catch(n){console.warn(n)}}}}).catch(t=>{throw es.create("idb-open",{originalErrorMessage:t.message})})),Wd}async function tD(t){try{const n=(await Sx()).transaction(er),s=await n.objectStore(er).get(Cx(t));return await n.done,s}catch(e){if(e instanceof ar)xi.warn(e.message);else{const n=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xi.warn(n.message)}}}async function Mv(t,e){try{const s=(await Sx()).transaction(er,"readwrite");await s.objectStore(er).put(e,Cx(t)),await s.done}catch(n){if(n instanceof ar)xi.warn(n.message);else{const s=es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xi.warn(s.message)}}}function Cx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=1024,iD=30;class sD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lD(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Dv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:l}),this._heartbeatsCache.heartbeats.length>iD){const c=rD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){xi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dv(),{heartbeatsToSend:s,unsentEntries:l}=oD(this._heartbeatsCache.heartbeats),a=Ja(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return xi.warn(n),""}}}function Dv(){return new Date().toISOString().substring(0,10)}function oD(t,e=nD){const n=[];let s=t.slice();for(const l of t){const a=n.find(c=>c.agent===l.agent);if(a){if(a.dates.push(l.date),kv(n)>e){a.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),kv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class lD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qI()?VI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Mv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kv(t){return Ja(JSON.stringify({version:2,heartbeats:t})).length}function rD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){Xa(new Zl("platform-logger",e=>new gM(e),"PRIVATE")),Xa(new Zl("heartbeat",e=>new sD(e),"PRIVATE")),wo(bf,Rv,t),wo(bf,Rv,"esm2020"),wo("fire-js","")}aD("");var uD="firebase",cD="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wo(uD,cD,"app");var Uv={};const Pv="@firebase/database",Lv="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tx="";function dD(t){Tx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Dt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Wl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Qn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new fD(e)}}catch{}return new hD},As=bx("localStorage"),pD=bx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new vx("@firebase/database"),mD=(function(){let t=1;return function(){return t++}})(),Nx=function(t){const e=QI(t),n=new KI;n.update(e);const s=n.digest();return eh.encodeByteArray(s)},cr=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=cr.apply(null,s):typeof s=="object"?e+=Dt(s):e+=s,e+=" "}return e};let jl=null,Ov=!0;const gD=function(t,e){ne(!0,"Can't turn on custom loggers persistently."),Ro.logLevel=ot.VERBOSE,jl=Ro.log.bind(Ro)},Gt=function(...t){if(Ov===!0&&(Ov=!1,jl===null&&pD.get("logging_enabled")===!0&&gD()),jl){const e=cr.apply(null,t);jl(e)}},dr=function(t){return function(...e){Gt(t,...e)}},wf=function(...t){const e="FIREBASE INTERNAL ERROR: "+cr(...t);Ro.error(e)},Ei=function(...t){const e=`FIREBASE FATAL ERROR: ${cr(...t)}`;throw Ro.error(e),new Error(e)},Xt=function(...t){const e="FIREBASE WARNING: "+cr(...t);Ro.warn(e)},yD=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},ih=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},vD=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ko="[MIN_NAME]",ws="[MAX_NAME]",ks=function(t,e){if(t===e)return 0;if(t===ko||e===ws)return-1;if(e===ko||t===ws)return 1;{const n=Bv(t),s=Bv(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},_D=function(t,e){return t===e?0:t<e?-1:1},Gl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Dt(e))},sh=function(t){if(typeof t!="object"||t===null)return Dt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Dt(e[s]),n+=":",n+=sh(t[e[s]]);return n+="}",n},Ax=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let l=0;l<n;l+=e)l+e>n?s.push(t.substring(l,n)):s.push(t.substring(l,l+e));return s};function qt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const wx=function(t){ne(!ih(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let l,a,c,h,g;t===0?(a=0,c=0,l=1/t===-1/0?1:0):(l=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(t)/Math.LN2),s),a=h+s,c=Math.round(t*Math.pow(2,n-h)-Math.pow(2,n))):(a=0,c=Math.round(t/Math.pow(2,1-s-n))));const p=[];for(g=n;g;g-=1)p.push(c%2?1:0),c=Math.floor(c/2);for(g=e;g;g-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(l?1:0),p.reverse();const _=p.join("");let x="";for(g=0;g<64;g+=8){let E=parseInt(_.substr(g,8),2).toString(16);E.length===1&&(E="0"+E),x=x+E}return x.toLowerCase()},xD=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ED=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function SD(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const CD=new RegExp("^-?(0*)\\d{1,10}$"),TD=-2147483648,bD=2147483647,Bv=function(t){if(CD.test(t)){const e=Number(t);if(e>=TD&&e<=bD)return e}return null},Vo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Xt("Exception was thrown by user callback.",n),e},Math.floor(0))}},ND=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jl=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,$M(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Xt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xt(e)}}class Ba{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ba.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="5",Rx="v",Ix="s",Mx="r",Dx="f",kx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ux="ls",Px="p",Rf="ac",Lx="websocket",Ox="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,s,l,a=!1,c="",h=!1,g=!1,p=null){this.secure=n,this.namespace=s,this.webSocketOnly=l,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=As.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&As.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function RD(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Hx(t,e,n){ne(typeof e=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let s;if(e===Lx)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ox)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);RD(t)&&(n.ns=t.namespace);const l=[];return qt(n,(a,c)=>{l.push(a+"="+c)}),s+l.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this.counters_={}}incrementCounter(e,n=1){Qn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return bI(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd={},ef={};function lh(t){const e=t.toString();return Zd[e]||(Zd[e]=new ID),Zd[e]}function MD(t,e){const n=t.toString();return ef[n]||(ef[n]=e()),ef[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<s.length;++l)s[l]&&Vo(()=>{this.onMessage_(s[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="start",kD="close",UD="pLPCommand",PD="pRTLPCB",Gx="id",qx="pw",Vx="ser",LD="cb",OD="seg",BD="ts",HD="d",GD="dframe",Fx=1870,zx=30,qD=Fx-zx,VD=25e3,FD=3e4;class bo{constructor(e,n,s,l,a,c,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dr(e),this.stats_=lh(n),this.urlFn=g=>(this.appCheckToken&&(g[Rf]=this.appCheckToken),Hx(n,Ox,g))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new DD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(FD)),vD(()=>{if(this.isClosed_)return;this.scriptTagHolder=new rh((...a)=>{const[c,h,g,p,_]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,c===Hv)this.id=h,this.password=g;else if(c===kD)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+c)},(...a)=>{const[c,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[Hv]="t",s[Vx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[LD]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Rx]=oh,this.transportSessionId&&(s[Ix]=this.transportSessionId),this.lastSessionId&&(s[Ux]=this.lastSessionId),this.applicationId&&(s[Px]=this.applicationId),this.appCheckToken&&(s[Rf]=this.appCheckToken),typeof location<"u"&&location.hostname&&kx.test(location.hostname)&&(s[Mx]=Dx);const l=this.urlFn(s);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bo.forceAllow_=!0}static forceDisallow(){bo.forceDisallow_=!0}static isAvailable(){return bo.forceAllow_?!0:!bo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!xD()&&!ED()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=dx(n),l=Ax(s,qD);for(let a=0;a<l.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[a]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[GD]="t",s[Gx]=e,s[qx]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Dt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class rh{constructor(e,n,s,l){this.onDisconnect=s,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=mD(),window[UD+this.uniqueCallbackIdentifier]=e,window[PD+this.uniqueCallbackIdentifier]=n,this.myIFrame=rh.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){Gt("frame writing exception"),h.stack&&Gt(h.stack),Gt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Gt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Gx]=this.myID,e[qx]=this.myPW,e[Vx]=this.currentSerial;let n=this.urlFn(e),s="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+zx+s.length<=Fx;){const c=this.pendingSegs.shift();s=s+"&"+OD+l+"="+c.seg+"&"+BD+l+"="+c.ts+"&"+HD+l+"="+c.d,l++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},l=setTimeout(s,Math.floor(VD)),a=()=>{clearTimeout(l),s()};this.addTag(e,a)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const l=s.readyState;(!l||l==="loaded"||l==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=16384,YD=45e3;let Wa=null;typeof MozWebSocket<"u"?Wa=MozWebSocket:typeof WebSocket<"u"&&(Wa=WebSocket);class Ln{constructor(e,n,s,l,a,c,h){this.connId=e,this.applicationId=s,this.appCheckToken=l,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dr(this.connId),this.stats_=lh(n),this.connURL=Ln.connectionURL_(n,c,h,l,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,l,a){const c={};return c[Rx]=oh,typeof location<"u"&&location.hostname&&kx.test(location.hostname)&&(c[Mx]=Dx),n&&(c[Ix]=n),s&&(c[Ux]=s),l&&(c[Rf]=l),a&&(c[Px]=a),Hx(e,Lx,c)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,As.set("previous_websocket_failure",!0);try{let s;GI(),this.mySock=new Wa(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const l=s.message||s.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Ln.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Wa!==null&&!Ln.forceDisallow_}static previouslyFailed(){return As.isInMemoryStorage||As.get("previous_websocket_failure")===!0}markConnectionHealthy(){As.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Wl(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ne(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Dt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=Ax(n,zD);s.length>1&&this.sendString_(String(s.length));for(let l=0;l<s.length;l++)this.sendString_(s[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(YD))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ln.responsesRequiredToBeHealthy=2;Ln.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{static get ALL_TRANSPORTS(){return[bo,Ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Ln&&Ln.isAvailable();let s=n&&!Ln.previouslyFailed();if(e.webSocketOnly&&(n||Xt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ln];else{const l=this.transports_=[];for(const a of tr.ALL_TRANSPORTS)a&&a.isAvailable()&&l.push(a);tr.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}tr.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=6e4,JD=5e3,$D=10*1024,KD=100*1024,tf="t",Gv="d",QD="s",qv="r",XD="e",Vv="o",Fv="a",zv="n",Yv="p",WD="h";class ZD{constructor(e,n,s,l,a,c,h,g,p,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=l,this.authToken_=a,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dr("c:"+this.id+":"),this.transportManager_=new tr(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=Jl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>KD?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>$D?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(tf in e){const n=e[tf];n===Fv?this.upgradeIfSecondaryHealthy_():n===qv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gl("t",e),s=Gl("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Yv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Fv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gl("t",e),s=Gl("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gl(tf,e);if(Gv in e){const s=e[Gv];if(n===WD){const l={...s};this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(n===zv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===QD?this.onConnectionShutdown_(s):n===qv?this.onReset_(s):n===XD?wf("Server Error: "+s):n===Vv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wf("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),oh!==s&&Xt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),Jl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(jD))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(JD))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Yv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(As.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{put(e,n,s,l){}merge(e,n,s,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.allowedEvents_=e,this.listeners_={},ne(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let l=0;l<s.length;l++)s[l].callback.apply(s[l].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const l=this.getInitialEvent(e);l&&n.apply(s,l)}off(e,n,s){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let a=0;a<l.length;a++)if(l[a].callback===n&&(!s||s===l[a].context)){l.splice(a,1);return}}validateEventType_(e){ne(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends jx{static getInstance(){return new Za}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mx()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ne(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=32,Jv=768;class nt{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[s]=this.pieces_[l],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $e(){return new nt("")}function ke(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ns(t){return t.pieces_.length-t.pieceNum_}function lt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new nt(t.pieces_,e)}function ah(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ek(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function nr(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Jx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new nt(e,0)}function mt(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof nt)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let l=0;l<s.length;l++)s[l].length>0&&n.push(s[l])}return new nt(n,0)}function Oe(t){return t.pieceNum_>=t.pieces_.length}function an(t,e){const n=ke(t),s=ke(e);if(n===null)return e;if(n===s)return an(lt(t),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tk(t,e){const n=nr(t,0),s=nr(e,0);for(let l=0;l<n.length&&l<s.length;l++){const a=ks(n[l],s[l]);if(a!==0)return a}return n.length===s.length?0:n.length<s.length?-1:1}function uh(t,e){if(ns(t)!==ns(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function In(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(ns(t)>ns(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class nk{constructor(e,n){this.errorPrefix_=n,this.parts_=nr(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=vu(this.parts_[s]);$x(this)}}function ik(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=vu(e),$x(t)}function sk(t){const e=t.parts_.pop();t.byteLength_-=vu(e),t.parts_.length>0&&(t.byteLength_-=1)}function $x(t){if(t.byteLength_>Jv)throw new Error(t.errorPrefix_+"has a key path longer than "+Jv+" bytes ("+t.byteLength_+").");if(t.parts_.length>jv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+jv+") or object contains a cycle "+Ns(t))}function Ns(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends jx{static getInstance(){return new ch}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ne(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=1e3,ok=300*1e3,$v=30*1e3,lk=1.3,rk=3e4,ak="server_kill",Kv=3;class vi extends Yx{constructor(e,n,s,l,a,c,h,g){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=l,this.onServerInfoUpdate_=a,this.authTokenProvider_=c,this.appCheckTokenProvider_=h,this.authOverride_=g,this.id=vi.nextPersistentConnectionId_++,this.log_=dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ql,this.maxReconnectDelay_=ok,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ch.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Za.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const l=++this.requestNumber_,a={r:l,a:e,b:n};this.log_(Dt(a)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),s&&(this.requestCBHash_[l]=s)}get(e){this.initConnection_();const n=new rr,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:c=>{const h=c.d;c.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),n.promise}listen(e,n,s,l){this.initConnection_();const a=e._queryIdentifier,c=e._path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");const h={onComplete:l,hashFn:n,query:e,tag:s};this.listens.get(c).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),l=n._queryIdentifier;this.log_("Listen on "+s+" for "+l);const a={p:s},c="q";e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(c,a,h=>{const g=h.d,p=h.s;vi.warnOnListenWarnings_(g,n),(this.listens.get(s)&&this.listens.get(s).get(l))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(s,l),e.onComplete&&e.onComplete(p,g))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Qn(e,"w")){const s=Do(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const l='".indexOn": "'+n._queryParams.getIndex().toString()+'"',a=n._path.toString();Xt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||JI(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$v)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=jI(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,l=>{const a=l.s,c=l.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,c))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+l),ne(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,l)&&this.connected_&&this.sendUnlisten_(s,l,e._queryObject,n)}sendUnlisten_(e,n,s,l){this.log_("Unlisten on "+e+" for "+n);const a={p:e},c="n";l&&(a.q=s,a.t=l),this.sendRequest(c,a)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,l){const a={p:n,d:s};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,c=>{l&&setTimeout(()=>{l(c.s,c.d)},Math.floor(0))})}put(e,n,s,l){this.putInternal("p",e,n,s,l)}merge(e,n,s,l){this.putInternal("m",e,n,s,l)}putInternal(e,n,s,l,a){this.initConnection_();const c={p:n,d:s};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:e,request:c,onComplete:l}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,a=>{this.log_(n+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(a.s,a.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const a=s.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Dt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wf("Unrecognized action received from server: "+Dt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>rk&&(this.reconnectDelay_=ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lk)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+vi.nextConnectionId_++,a=this.lastSessionId;let c=!1,h=null;const g=function(){h?h.close():(c=!0,s())},p=function(x){ne(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(x)};this.realtime_={close:g,sendRequest:p};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[x,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);c?Gt("getToken() completed but was canceled"):(Gt("getToken() completed. Creating connection."),this.authToken_=x&&x.accessToken,this.appCheckToken_=E&&E.token,h=new ZD(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,T=>{Xt(T+" ("+this.repoInfo_.toString()+")"),this.interrupt(ak)},a))}catch(x){this.log_("Failed to get token: "+x),c||(this.repoInfo_.nodeAdmin&&Xt(x),g())}}}interrupt(e){Gt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Gt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Tv(this.interruptReasons_)&&(this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(a=>sh(a)).join("$"):s="default";const l=this.removeListen_(e,s);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,n){const s=new nt(e).toString();let l;if(this.listens.has(s)){const a=this.listens.get(s);l=a.get(n),a.delete(n),a.size===0&&this.listens.delete(s)}else l=void 0;return l}onAuthRevoked_(e,n){Gt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Kv&&(this.reconnectDelay_=$v,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Gt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Kv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Tx.replace(/\./g,"-")]=1,mx()?e["framework.cordova"]=1:HI()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Za.getInstance().currentlyOnline();return Tv(this.interruptReasons_)&&e}}vi.nextPersistentConnectionId_=0;vi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ue(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new Ue(ko,e),l=new Ue(ko,n);return this.compare(s,l)!==0}minPost(){return Ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ka;class Kx extends _u{static get __EMPTY_NODE(){return ka}static set __EMPTY_NODE(e){ka=e}compare(e,n){return ks(e.name,n.name)}isDefinedOn(e){throw qo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(ws,ka)}makePost(e,n){return ne(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,ka)}toString(){return".key"}}const Io=new Kx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,s,l,a=null){this.isReverse_=l,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=n?s(e.key,n):1,l&&(c*=-1),c<0)this.isReverse_?e=e.left:e=e.right;else if(c===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class It{constructor(e,n,s,l,a){this.key=e,this.value=n,this.color=s??It.RED,this.left=l??un.EMPTY_NODE,this.right=a??un.EMPTY_NODE}copy(e,n,s,l,a){return new It(e??this.key,n??this.value,s??this.color,l??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let l=this;const a=s(e,l.key);return a<0?l=l.copy(null,null,null,l.left.insert(e,n,s),null):a===0?l=l.copy(null,n,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,n,s)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return un.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,l;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return un.EMPTY_NODE;l=s.right.min_(),s=s.copy(l.key,l.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}It.RED=!0;It.BLACK=!1;class uk{copy(e,n,s,l,a){return this}insert(e,n,s){return new It(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class un{constructor(e,n=un.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new un(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,It.BLACK,null,null))}remove(e){return new un(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,It.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,l=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return l?l.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(l=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ua(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ua(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ua(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ua(this.root_,null,this.comparator_,!0,e)}}un.EMPTY_NODE=new uk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){return ks(t.name,e.name)}function dh(t,e){return ks(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If;function dk(t){If=t}const Qx=function(t){return typeof t=="number"?"number:"+wx(t):"string:"+t},Xx=function(t){if(t.isLeafNode()){const e=t.val();ne(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Qn(e,".sv"),"Priority must be a string or number.")}else ne(t===If||t.isEmpty(),"priority of unexpected type.");ne(t===If||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;class Rt{static set __childrenNodeConstructor(e){Qv=e}static get __childrenNodeConstructor(){return Qv}constructor(e,n=Rt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Xx(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Rt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Oe(e)?this:ke(e)===".priority"?this.priorityNode_:Rt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Rt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=ke(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(ne(s!==".priority"||ns(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Rt.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Qx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=wx(this.value_):e+=this.value_,this.lazyHash_=Nx(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Rt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Rt.__childrenNodeConstructor?-1:(ne(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,l=Rt.VALUE_TYPE_ORDER.indexOf(n),a=Rt.VALUE_TYPE_ORDER.indexOf(s);return ne(l>=0,"Unknown leaf type: "+n),ne(a>=0,"Unknown leaf type: "+s),l===a?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Rt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wx,Zx;function fk(t){Wx=t}function hk(t){Zx=t}class pk extends _u{compare(e,n){const s=e.node.getPriority(),l=n.node.getPriority(),a=s.compareTo(l);return a===0?ks(e.name,n.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(ws,new Rt("[PRIORITY-POST]",Zx))}makePost(e,n){const s=Wx(e);return new Ue(n,new Rt("[PRIORITY-POST]",s))}toString(){return".priority"}}const gt=new pk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=Math.log(2);class gk{constructor(e){const n=a=>parseInt(Math.log(a)/mk,10),s=a=>parseInt(Array(a+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const l=s(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const eu=function(t,e,n,s){t.sort(e);const l=function(g,p){const _=p-g;let x,E;if(_===0)return null;if(_===1)return x=t[g],E=n?n(x):x,new It(E,x.node,It.BLACK,null,null);{const T=parseInt(_/2,10)+g,N=l(g,T),M=l(T+1,p);return x=t[T],E=n?n(x):x,new It(E,x.node,It.BLACK,N,M)}},a=function(g){let p=null,_=null,x=t.length;const E=function(N,M){const I=x-N,H=x;x-=N;const F=l(I+1,H),q=t[I],J=n?n(q):q;T(new It(J,q.node,M,null,F))},T=function(N){p?(p.left=N,p=N):(_=N,p=N)};for(let N=0;N<g.count;++N){const M=g.nextBitIsOne(),I=Math.pow(2,g.count-(N+1));M?E(I,It.BLACK):(E(I,It.BLACK),E(I,It.RED))}return _},c=new gk(t.length),h=a(c);return new un(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf;const Eo={};class yi{static get Default(){return ne(Eo&&gt,"ChildrenNode.ts has not been loaded"),nf=nf||new yi({".priority":Eo},{".priority":gt}),nf}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Do(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof un?n:null}hasIndex(e){return Qn(this.indexSet_,e.toString())}addIndex(e,n){ne(e!==Io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let l=!1;const a=n.getIterator(Ue.Wrap);let c=a.getNext();for(;c;)l=l||e.isDefinedOn(c.node),s.push(c),c=a.getNext();let h;l?h=eu(s,e.getCompare()):h=Eo;const g=e.toString(),p={...this.indexSet_};p[g]=e;const _={...this.indexes_};return _[g]=h,new yi(_,p)}addToIndexes(e,n){const s=$a(this.indexes_,(l,a)=>{const c=Do(this.indexSet_,a);if(ne(c,"Missing index implementation for "+a),l===Eo)if(c.isDefinedOn(e.node)){const h=[],g=n.getIterator(Ue.Wrap);let p=g.getNext();for(;p;)p.name!==e.name&&h.push(p),p=g.getNext();return h.push(e),eu(h,c.getCompare())}else return Eo;else{const h=n.get(e.name);let g=l;return h&&(g=g.remove(new Ue(e.name,h))),g.insert(e,e.node)}});return new yi(s,this.indexSet_)}removeFromIndexes(e,n){const s=$a(this.indexes_,l=>{if(l===Eo)return l;{const a=n.get(e.name);return a?l.remove(new Ue(e.name,a)):l}});return new yi(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl;class Ee{static get EMPTY_NODE(){return Vl||(Vl=new Ee(new un(dh),null,yi.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Xx(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Vl}updatePriority(e){return this.children_.isEmpty()?this:new Ee(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Vl:n}}getChild(e){const n=ke(e);return n===null?this:this.getImmediateChild(n).getChild(lt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ne(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new Ue(e,n);let l,a;n.isEmpty()?(l=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(s,this.children_)):(l=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(s,this.children_));const c=l.isEmpty()?Vl:this.priorityNode_;return new Ee(l,c,a)}}updateChild(e,n){const s=ke(e);if(s===null)return n;{ne(ke(e)!==".priority"||ns(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(s).updateChild(lt(e),n);return this.updateImmediateChild(s,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,l=0,a=!0;if(this.forEachChild(gt,(c,h)=>{n[c]=h.val(e),s++,a&&Ee.INTEGER_REGEXP_.test(c)?l=Math.max(l,Number(c)):a=!1}),!e&&a&&l<2*s){const c=[];for(const h in n)c[h]=n[h];return c}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Qx(this.getPriority().val())+":"),this.forEachChild(gt,(n,s)=>{const l=s.hash();l!==""&&(e+=":"+n+":"+l)}),this.lazyHash_=e===""?"":Nx(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const l=this.resolveIndex_(s);if(l){const a=l.getPredecessorKey(new Ue(e,n));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ue(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ue(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(l=>n(l.name,l.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,Ue.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)<0;)l.getNext(),a=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,Ue.Wrap);let a=l.peek();for(;a!=null&&n.compare(a,e)>0;)l.getNext(),a=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fr?-1:0}withIndex(e){if(e===Io||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ee(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Io||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(gt),l=n.getIterator(gt);let a=s.getNext(),c=l.getNext();for(;a&&c;){if(a.name!==c.name||!a.node.equals(c.node))return!1;a=s.getNext(),c=l.getNext()}return a===null&&c===null}else return!1;else return!1}}resolveIndex_(e){return e===Io?null:this.indexMap_.get(e.toString())}}Ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yk extends Ee{constructor(){super(new un(dh),Ee.EMPTY_NODE,yi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ee.EMPTY_NODE}isEmpty(){return!1}}const fr=new yk;Object.defineProperties(Ue,{MIN:{value:new Ue(ko,Ee.EMPTY_NODE)},MAX:{value:new Ue(ws,fr)}});Kx.__EMPTY_NODE=Ee.EMPTY_NODE;Rt.__childrenNodeConstructor=Ee;dk(fr);hk(fr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=!0;function Mt(t,e=null){if(t===null)return Ee.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ne(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Rt(n,Mt(e))}if(!(t instanceof Array)&&vk){const n=[];let s=!1;if(qt(t,(c,h)=>{if(c.substring(0,1)!=="."){const g=Mt(h);g.isEmpty()||(s=s||!g.getPriority().isEmpty(),n.push(new Ue(c,g)))}}),n.length===0)return Ee.EMPTY_NODE;const a=eu(n,ck,c=>c.name,dh);if(s){const c=eu(n,gt.getCompare());return new Ee(a,Mt(e),new yi({".priority":c},{".priority":gt}))}else return new Ee(a,Mt(e),yi.Default)}else{let n=Ee.EMPTY_NODE;return qt(t,(s,l)=>{if(Qn(t,s)&&s.substring(0,1)!=="."){const a=Mt(l);(a.isLeafNode()||!a.isEmpty())&&(n=n.updateImmediateChild(s,a))}}),n.updatePriority(Mt(e))}}fk(Mt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k extends _u{constructor(e){super(),this.indexPath_=e,ne(!Oe(e)&&ke(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),l=this.extractChild(n.node),a=s.compareTo(l);return a===0?ks(e.name,n.name):a}makePost(e,n){const s=Mt(e),l=Ee.EMPTY_NODE.updateChild(this.indexPath_,s);return new Ue(n,l)}maxPost(){const e=Ee.EMPTY_NODE.updateChild(this.indexPath_,fr);return new Ue(ws,e)}toString(){return nr(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk extends _u{compare(e,n){const s=e.node.compareTo(n.node);return s===0?ks(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,n){const s=Mt(e);return new Ue(n,s)}toString(){return".value"}}const Ek=new xk;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){return{type:"value",snapshotNode:t}}function Uo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ir(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function sr(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Sk(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.index_=e}updateChild(e,n,s,l,a,c){ne(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(l).equals(s.getChild(l))&&h.isEmpty()===s.isEmpty()||(c!=null&&(s.isEmpty()?e.hasChild(n)?c.trackChildChange(ir(n,h)):ne(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(Uo(n,s)):c.trackChildChange(sr(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(gt,(l,a)=>{n.hasChild(l)||s.trackChildChange(ir(l,a))}),n.isLeafNode()||n.forEachChild(gt,(l,a)=>{if(e.hasChild(l)){const c=e.getImmediateChild(l);c.equals(a)||s.trackChildChange(sr(l,a,c))}else s.trackChildChange(Uo(l,a))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ee.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.indexedFilter_=new fh(e.getIndex()),this.index_=e.getIndex(),this.startPost_=or.getStartPost_(e),this.endPost_=or.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,l,a,c){return this.matches(new Ue(n,s))||(s=Ee.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,l,a,c)}updateFullNode(e,n,s){n.isLeafNode()&&(n=Ee.EMPTY_NODE);let l=n.withIndex(this.index_);l=l.updatePriority(Ee.EMPTY_NODE);const a=this;return n.forEachChild(gt,(c,h)=>{a.matches(new Ue(c,h))||(l=l.updateImmediateChild(c,Ee.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new or(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,l,a,c){return this.rangedFilter_.matches(new Ue(n,s))||(s=Ee.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,l,a,c):this.fullLimitUpdateChild_(e,n,s,a,c)}updateFullNode(e,n,s){let l;if(n.isLeafNode()||n.isEmpty())l=Ee.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){l=Ee.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))l=l.updateImmediateChild(h.name,h.node),c++;else break;else continue}}else{l=n.withIndex(this.index_),l=l.updatePriority(Ee.EMPTY_NODE);let a;this.reverse_?a=l.getReverseIterator(this.index_):a=l.getIterator(this.index_);let c=0;for(;a.hasNext();){const h=a.getNext();c<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?c++:l=l.updateImmediateChild(h.name,Ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,l,a){let c;if(this.reverse_){const x=this.index_.getCompare();c=(E,T)=>x(T,E)}else c=this.index_.getCompare();const h=e;ne(h.numChildren()===this.limit_,"");const g=new Ue(n,s),p=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(g);if(h.hasChild(n)){const x=h.getImmediateChild(n);let E=l.getChildAfterChild(this.index_,p,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=l.getChildAfterChild(this.index_,E,this.reverse_);const T=E==null?1:c(E,g);if(_&&!s.isEmpty()&&T>=0)return a!=null&&a.trackChildChange(sr(n,s,x)),h.updateImmediateChild(n,s);{a!=null&&a.trackChildChange(ir(n,x));const M=h.updateImmediateChild(n,Ee.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(Uo(E.name,E.node)),M.updateImmediateChild(E.name,E.node)):M}}else return s.isEmpty()?e:_&&c(p,g)>=0?(a!=null&&(a.trackChildChange(ir(p.name,p.node)),a.trackChildChange(Uo(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(p.name,Ee.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ko}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ws}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===gt}copy(){const e=new hh;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Tk(t){return t.loadsAllData()?new fh(t.getIndex()):t.hasLimit()?new Ck(t):new or(t)}function Xv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===gt?n="$priority":t.index_===Ek?n="$value":t.index_===Io?n="$key":(ne(t.index_ instanceof _k,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Dt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Dt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Dt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Dt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Dt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Wv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==gt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Yx{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ne(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,l){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=l,this.log_=dr("p:rest:"),this.listens_={}}listen(e,n,s,l){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=tu.getListenId_(e,s),h={};this.listens_[c]=h;const g=Xv(e._queryParams);this.restRequest_(a+".json",g,(p,_)=>{let x=_;if(p===404&&(x=null,p=null),p===null&&this.onDataUpdate_(a,x,!1,s),Do(this.listens_,c)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",l(E,null)}})}unlisten(e,n){const s=tu.getListenId_(e,n);delete this.listens_[s]}get(e){const n=Xv(e._queryParams),s=e._path.toString(),l=new rr;return this.restRequest_(s+".json",n,(a,c)=>{let h=c;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(s,h,!1,null),l.resolve(h)):l.reject(new Error(h))}),l.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,a])=>{l&&l.accessToken&&(n.auth=l.accessToken),a&&a.token&&(n.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$I(n);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let g=null;if(h.status>=200&&h.status<300){try{g=Wl(h.responseText)}catch{Xt("Failed to parse JSON response for "+c+": "+h.responseText)}s(null,g)}else h.status!==401&&h.status!==404&&Xt("Got unsuccessful REST response for "+c+" Status: "+h.status),s(h.status);s=null}},h.open("GET",c,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.rootNode_=Ee.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(){return{value:null,children:new Map}}function tE(t,e,n){if(Oe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=ke(e);t.children.has(s)||t.children.set(s,nu());const l=t.children.get(s);e=lt(e),tE(l,e,n)}}function Mf(t,e,n){t.value!==null?n(e,t.value):Nk(t,(s,l)=>{const a=new nt(e.toString()+"/"+s);Mf(l,a,n)})}function Nk(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&qt(this.last_,(s,l)=>{n[s]=n[s]-l}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=10*1e3,wk=30*1e3,Rk=300*1e3;class Ik{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ak(e);const s=Zv+(wk-Zv)*Math.random();Jl(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;qt(e,(l,a)=>{a>0&&Qn(this.statsToReport_,l)&&(n[l]=a,s=!0)}),s&&this.server_.reportStats(n),Jl(this.reportStats_.bind(this),Math.floor(Math.random()*2*Rk))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var On;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(On||(On={}));function ph(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function gh(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=On.ACK_USER_WRITE,this.source=ph()}operationForChild(e){if(Oe(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new nt(e));return new iu($e(),n,this.revert)}}else return ne(ke(this.path)===e,"operationForChild called for unrelated child."),new iu(lt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){this.source=e,this.path=n,this.type=On.LISTEN_COMPLETE}operationForChild(e){return Oe(this.path)?new lr(this.source,$e()):new lr(this.source,lt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=On.OVERWRITE}operationForChild(e){return Oe(this.path)?new Rs(this.source,$e(),this.snap.getImmediateChild(e)):new Rs(this.source,lt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=On.MERGE}operationForChild(e){if(Oe(this.path)){const n=this.children.subtree(new nt(e));return n.isEmpty()?null:n.value?new Rs(this.source,$e(),n.value):new Po(this.source,$e(),n)}else return ne(ke(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Po(this.source,lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Oe(e))return this.isFullyInitialized()&&!this.filtered_;const n=ke(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Dk(t,e,n,s){const l=[],a=[];return e.forEach(c=>{c.type==="child_changed"&&t.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(Sk(c.childName,c.snapshotNode))}),Fl(t,l,"child_removed",e,s,n),Fl(t,l,"child_added",e,s,n),Fl(t,l,"child_moved",a,s,n),Fl(t,l,"child_changed",e,s,n),Fl(t,l,"value",e,s,n),l}function Fl(t,e,n,s,l,a){const c=s.filter(h=>h.type===n);c.sort((h,g)=>Uk(t,h,g)),c.forEach(h=>{const g=kk(t,h,a);l.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(g,t.query_))})})}function kk(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Uk(t,e,n){if(e.childName==null||n.childName==null)throw qo("Should only compare child_ events.");const s=new Ue(e.childName,e.snapshotNode),l=new Ue(n.childName,n.snapshotNode);return t.index_.compare(s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e){return{eventCache:t,serverCache:e}}function $l(t,e,n,s){return xu(new Is(e,n,s),t.serverCache)}function nE(t,e,n,s){return xu(t.eventCache,new Is(e,n,s))}function Df(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ms(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sf;const Pk=()=>(sf||(sf=new un(_D)),sf);class st{static fromObject(e){let n=new st(null);return qt(e,(s,l)=>{n=n.set(new nt(s),l)}),n}constructor(e,n=Pk()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$e(),value:this.value};if(Oe(e))return null;{const s=ke(e),l=this.children.get(s);if(l!==null){const a=l.findRootMostMatchingPathAndValue(lt(e),n);return a!=null?{path:mt(new nt(s),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Oe(e))return this;{const n=ke(e),s=this.children.get(n);return s!==null?s.subtree(lt(e)):new st(null)}}set(e,n){if(Oe(e))return new st(n,this.children);{const s=ke(e),a=(this.children.get(s)||new st(null)).set(lt(e),n),c=this.children.insert(s,a);return new st(this.value,c)}}remove(e){if(Oe(e))return this.children.isEmpty()?new st(null):new st(null,this.children);{const n=ke(e),s=this.children.get(n);if(s){const l=s.remove(lt(e));let a;return l.isEmpty()?a=this.children.remove(n):a=this.children.insert(n,l),this.value===null&&a.isEmpty()?new st(null):new st(this.value,a)}else return this}}get(e){if(Oe(e))return this.value;{const n=ke(e),s=this.children.get(n);return s?s.get(lt(e)):null}}setTree(e,n){if(Oe(e))return n;{const s=ke(e),a=(this.children.get(s)||new st(null)).setTree(lt(e),n);let c;return a.isEmpty()?c=this.children.remove(s):c=this.children.insert(s,a),new st(this.value,c)}}fold(e){return this.fold_($e(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((l,a)=>{s[l]=a.fold_(mt(e,l),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,$e(),n)}findOnPath_(e,n,s){const l=this.value?s(n,this.value):!1;if(l)return l;if(Oe(e))return null;{const a=ke(e),c=this.children.get(a);return c?c.findOnPath_(lt(e),mt(n,a),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$e(),n)}foreachOnPath_(e,n,s){if(Oe(e))return this;{this.value&&s(n,this.value);const l=ke(e),a=this.children.get(l);return a?a.foreachOnPath_(lt(e),mt(n,l),s):new st(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,n){this.children.inorderTraversal((s,l)=>{l.foreach_(mt(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.writeTree_=e}static empty(){return new Gn(new st(null))}}function Kl(t,e,n){if(Oe(e))return new Gn(new st(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const l=s.path;let a=s.value;const c=an(l,e);return a=a.updateChild(c,n),new Gn(t.writeTree_.set(l,a))}else{const l=new st(n),a=t.writeTree_.setTree(e,l);return new Gn(a)}}}function kf(t,e,n){let s=t;return qt(n,(l,a)=>{s=Kl(s,mt(e,l),a)}),s}function e_(t,e){if(Oe(e))return Gn.empty();{const n=t.writeTree_.setTree(e,new st(null));return new Gn(n)}}function Uf(t,e){return Us(t,e)!=null}function Us(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(an(n.path,e)):null}function t_(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(gt,(s,l)=>{e.push(new Ue(s,l))}):t.writeTree_.children.inorderTraversal((s,l)=>{l.value!=null&&e.push(new Ue(s,l.value))}),e}function ts(t,e){if(Oe(e))return t;{const n=Us(t,e);return n!=null?new Gn(new st(n)):new Gn(t.writeTree_.subtree(e))}}function Pf(t){return t.writeTree_.isEmpty()}function Lo(t,e){return iE($e(),t.writeTree_,e)}function iE(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((l,a)=>{l===".priority"?(ne(a.value!==null,"Priority writes must always be leaf nodes"),s=a.value):n=iE(mt(t,l),a,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(mt(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e){return rE(e,t)}function Lk(t,e,n,s,l){ne(s>t.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:l}),l&&(t.visibleWrites=Kl(t.visibleWrites,e,n)),t.lastWriteId=s}function Ok(t,e,n,s){ne(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=kf(t.visibleWrites,e,n),t.lastWriteId=s}function Bk(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function Hk(t,e){const n=t.allWrites.findIndex(h=>h.writeId===e);ne(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let l=s.visible,a=!1,c=t.allWrites.length-1;for(;l&&c>=0;){const h=t.allWrites[c];h.visible&&(c>=n&&Gk(h,s.path)?l=!1:In(s.path,h.path)&&(a=!0)),c--}if(l){if(a)return qk(t),!0;if(s.snap)t.visibleWrites=e_(t.visibleWrites,s.path);else{const h=s.children;qt(h,g=>{t.visibleWrites=e_(t.visibleWrites,mt(s.path,g))})}return!0}else return!1}function Gk(t,e){if(t.snap)return In(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&In(mt(t.path,n),e))return!0;return!1}function qk(t){t.visibleWrites=sE(t.allWrites,Vk,$e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Vk(t){return t.visible}function sE(t,e,n){let s=Gn.empty();for(let l=0;l<t.length;++l){const a=t[l];if(e(a)){const c=a.path;let h;if(a.snap)In(n,c)?(h=an(n,c),s=Kl(s,h,a.snap)):In(c,n)&&(h=an(c,n),s=Kl(s,$e(),a.snap.getChild(h)));else if(a.children){if(In(n,c))h=an(n,c),s=kf(s,h,a.children);else if(In(c,n))if(h=an(c,n),Oe(h))s=kf(s,$e(),a.children);else{const g=Do(a.children,ke(h));if(g){const p=g.getChild(lt(h));s=Kl(s,$e(),p)}}}else throw qo("WriteRecord should have .snap or .children")}}return s}function oE(t,e,n,s,l){if(!s&&!l){const a=Us(t.visibleWrites,e);if(a!=null)return a;{const c=ts(t.visibleWrites,e);if(Pf(c))return n;if(n==null&&!Uf(c,$e()))return null;{const h=n||Ee.EMPTY_NODE;return Lo(c,h)}}}else{const a=ts(t.visibleWrites,e);if(!l&&Pf(a))return n;if(!l&&n==null&&!Uf(a,$e()))return null;{const c=function(p){return(p.visible||l)&&(!s||!~s.indexOf(p.writeId))&&(In(p.path,e)||In(e,p.path))},h=sE(t.allWrites,c,e),g=n||Ee.EMPTY_NODE;return Lo(h,g)}}}function Fk(t,e,n){let s=Ee.EMPTY_NODE;const l=Us(t.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(gt,(a,c)=>{s=s.updateImmediateChild(a,c)}),s;if(n){const a=ts(t.visibleWrites,e);return n.forEachChild(gt,(c,h)=>{const g=Lo(ts(a,new nt(c)),h);s=s.updateImmediateChild(c,g)}),t_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}else{const a=ts(t.visibleWrites,e);return t_(a).forEach(c=>{s=s.updateImmediateChild(c.name,c.node)}),s}}function zk(t,e,n,s,l){ne(s||l,"Either existingEventSnap or existingServerSnap must exist");const a=mt(e,n);if(Uf(t.visibleWrites,a))return null;{const c=ts(t.visibleWrites,a);return Pf(c)?l.getChild(n):Lo(c,l.getChild(n))}}function Yk(t,e,n,s){const l=mt(e,n),a=Us(t.visibleWrites,l);if(a!=null)return a;if(s.isCompleteForChild(n)){const c=ts(t.visibleWrites,l);return Lo(c,s.getNode().getImmediateChild(n))}else return null}function jk(t,e){return Us(t.visibleWrites,e)}function Jk(t,e,n,s,l,a,c){let h;const g=ts(t.visibleWrites,e),p=Us(g,$e());if(p!=null)h=p;else if(n!=null)h=Lo(g,n);else return[];if(h=h.withIndex(c),!h.isEmpty()&&!h.isLeafNode()){const _=[],x=c.getCompare(),E=a?h.getReverseIteratorFrom(s,c):h.getIteratorFrom(s,c);let T=E.getNext();for(;T&&_.length<l;)x(T,s)!==0&&_.push(T),T=E.getNext();return _}else return[]}function $k(){return{visibleWrites:Gn.empty(),allWrites:[],lastWriteId:-1}}function su(t,e,n,s){return oE(t.writeTree,t.treePath,e,n,s)}function vh(t,e){return Fk(t.writeTree,t.treePath,e)}function n_(t,e,n,s){return zk(t.writeTree,t.treePath,e,n,s)}function ou(t,e){return jk(t.writeTree,mt(t.treePath,e))}function Kk(t,e,n,s,l,a){return Jk(t.writeTree,t.treePath,e,n,s,l,a)}function _h(t,e,n){return Yk(t.writeTree,t.treePath,e,n)}function lE(t,e){return rE(mt(t.treePath,e),t.writeTree)}function rE(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(s!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(s);if(l){const a=l.type;if(n==="child_added"&&a==="child_removed")this.changeMap.set(s,sr(s,e.snapshotNode,l.snapshotNode));else if(n==="child_removed"&&a==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&a==="child_changed")this.changeMap.set(s,ir(s,l.oldSnap));else if(n==="child_changed"&&a==="child_added")this.changeMap.set(s,Uo(s,e.snapshotNode));else if(n==="child_changed"&&a==="child_changed")this.changeMap.set(s,sr(s,e.snapshotNode,l.oldSnap));else throw qo("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const aE=new Xk;class xh{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Is(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _h(this.writes_,e,s)}}getChildAfterChild(e,n,s){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ms(this.viewCache_),a=Kk(this.writes_,l,n,1,s,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t){return{filter:t}}function Zk(t,e){ne(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ne(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function e2(t,e,n,s,l){const a=new Qk;let c,h;if(n.type===On.OVERWRITE){const p=n;p.source.fromUser?c=Lf(t,e,p.path,p.snap,s,l,a):(ne(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Oe(p.path),c=lu(t,e,p.path,p.snap,s,l,h,a))}else if(n.type===On.MERGE){const p=n;p.source.fromUser?c=n2(t,e,p.path,p.children,s,l,a):(ne(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),c=Of(t,e,p.path,p.children,s,l,h,a))}else if(n.type===On.ACK_USER_WRITE){const p=n;p.revert?c=o2(t,e,p.path,s,l,a):c=i2(t,e,p.path,p.affectedTree,s,l,a)}else if(n.type===On.LISTEN_COMPLETE)c=s2(t,e,n.path,s,a);else throw qo("Unknown operation type: "+n.type);const g=a.getChanges();return t2(e,c,g),{viewCache:c,changes:g}}function t2(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const l=s.getNode().isLeafNode()||s.getNode().isEmpty(),a=Df(t);(n.length>0||!t.eventCache.isFullyInitialized()||l&&!s.getNode().equals(a)||!s.getNode().getPriority().equals(a.getPriority()))&&n.push(eE(Df(e)))}}function uE(t,e,n,s,l,a){const c=e.eventCache;if(ou(s,n)!=null)return e;{let h,g;if(Oe(n))if(ne(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Ms(e),_=p instanceof Ee?p:Ee.EMPTY_NODE,x=vh(s,_);h=t.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const p=su(s,Ms(e));h=t.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=ke(n);if(p===".priority"){ne(ns(n)===1,"Can't have a priority with additional path components");const _=c.getNode();g=e.serverCache.getNode();const x=n_(s,n,_,g);x!=null?h=t.filter.updatePriority(_,x):h=c.getNode()}else{const _=lt(n);let x;if(c.isCompleteForChild(p)){g=e.serverCache.getNode();const E=n_(s,n,c.getNode(),g);E!=null?x=c.getNode().getImmediateChild(p).updateChild(_,E):x=c.getNode().getImmediateChild(p)}else x=_h(s,p,e.serverCache);x!=null?h=t.filter.updateChild(c.getNode(),p,x,_,l,a):h=c.getNode()}}return $l(e,h,c.isFullyInitialized()||Oe(n),t.filter.filtersNodes())}}function lu(t,e,n,s,l,a,c,h){const g=e.serverCache;let p;const _=c?t.filter:t.filter.getIndexedFilter();if(Oe(n))p=_.updateFullNode(g.getNode(),s,null);else if(_.filtersNodes()&&!g.isFiltered()){const T=g.getNode().updateChild(n,s);p=_.updateFullNode(g.getNode(),T,null)}else{const T=ke(n);if(!g.isCompleteForPath(n)&&ns(n)>1)return e;const N=lt(n),I=g.getNode().getImmediateChild(T).updateChild(N,s);T===".priority"?p=_.updatePriority(g.getNode(),I):p=_.updateChild(g.getNode(),T,I,N,aE,null)}const x=nE(e,p,g.isFullyInitialized()||Oe(n),_.filtersNodes()),E=new xh(l,x,a);return uE(t,x,n,l,E,h)}function Lf(t,e,n,s,l,a,c){const h=e.eventCache;let g,p;const _=new xh(l,e,a);if(Oe(n))p=t.filter.updateFullNode(e.eventCache.getNode(),s,c),g=$l(e,p,!0,t.filter.filtersNodes());else{const x=ke(n);if(x===".priority")p=t.filter.updatePriority(e.eventCache.getNode(),s),g=$l(e,p,h.isFullyInitialized(),h.isFiltered());else{const E=lt(n),T=h.getNode().getImmediateChild(x);let N;if(Oe(E))N=s;else{const M=_.getCompleteChild(x);M!=null?ah(E)===".priority"&&M.getChild(Jx(E)).isEmpty()?N=M:N=M.updateChild(E,s):N=Ee.EMPTY_NODE}if(T.equals(N))g=e;else{const M=t.filter.updateChild(h.getNode(),x,N,E,_,c);g=$l(e,M,h.isFullyInitialized(),t.filter.filtersNodes())}}}return g}function i_(t,e){return t.eventCache.isCompleteForChild(e)}function n2(t,e,n,s,l,a,c){let h=e;return s.foreach((g,p)=>{const _=mt(n,g);i_(e,ke(_))&&(h=Lf(t,h,_,p,l,a,c))}),s.foreach((g,p)=>{const _=mt(n,g);i_(e,ke(_))||(h=Lf(t,h,_,p,l,a,c))}),h}function s_(t,e,n){return n.foreach((s,l)=>{e=e.updateChild(s,l)}),e}function Of(t,e,n,s,l,a,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let g=e,p;Oe(n)?p=s:p=new st(null).setTree(n,s);const _=e.serverCache.getNode();return p.children.inorderTraversal((x,E)=>{if(_.hasChild(x)){const T=e.serverCache.getNode().getImmediateChild(x),N=s_(t,T,E);g=lu(t,g,new nt(x),N,l,a,c,h)}}),p.children.inorderTraversal((x,E)=>{const T=!e.serverCache.isCompleteForChild(x)&&E.value===null;if(!_.hasChild(x)&&!T){const N=e.serverCache.getNode().getImmediateChild(x),M=s_(t,N,E);g=lu(t,g,new nt(x),M,l,a,c,h)}}),g}function i2(t,e,n,s,l,a,c){if(ou(l,n)!=null)return e;const h=e.serverCache.isFiltered(),g=e.serverCache;if(s.value!=null){if(Oe(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return lu(t,e,n,g.getNode().getChild(n),l,a,h,c);if(Oe(n)){let p=new st(null);return g.getNode().forEachChild(Io,(_,x)=>{p=p.set(new nt(_),x)}),Of(t,e,n,p,l,a,h,c)}else return e}else{let p=new st(null);return s.foreach((_,x)=>{const E=mt(n,_);g.isCompleteForPath(E)&&(p=p.set(_,g.getNode().getChild(E)))}),Of(t,e,n,p,l,a,h,c)}}function s2(t,e,n,s,l){const a=e.serverCache,c=nE(e,a.getNode(),a.isFullyInitialized()||Oe(n),a.isFiltered());return uE(t,c,n,s,aE,l)}function o2(t,e,n,s,l,a){let c;if(ou(s,n)!=null)return e;{const h=new xh(s,e,l),g=e.eventCache.getNode();let p;if(Oe(n)||ke(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=su(s,Ms(e));else{const x=e.serverCache.getNode();ne(x instanceof Ee,"serverChildren would be complete if leaf node"),_=vh(s,x)}_=_,p=t.filter.updateFullNode(g,_,a)}else{const _=ke(n);let x=_h(s,_,e.serverCache);x==null&&e.serverCache.isCompleteForChild(_)&&(x=g.getImmediateChild(_)),x!=null?p=t.filter.updateChild(g,_,x,lt(n),h,a):e.eventCache.getNode().hasChild(_)?p=t.filter.updateChild(g,_,Ee.EMPTY_NODE,lt(n),h,a):p=g,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=su(s,Ms(e)),c.isLeafNode()&&(p=t.filter.updateFullNode(p,c,a)))}return c=e.serverCache.isFullyInitialized()||ou(s,$e())!=null,$l(e,p,c,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,l=new fh(s.getIndex()),a=Tk(s);this.processor_=Wk(a);const c=n.serverCache,h=n.eventCache,g=l.updateFullNode(Ee.EMPTY_NODE,c.getNode(),null),p=a.updateFullNode(Ee.EMPTY_NODE,h.getNode(),null),_=new Is(g,c.isFullyInitialized(),l.filtersNodes()),x=new Is(p,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=xu(x,_),this.eventGenerator_=new Mk(this.query_)}get query(){return this.query_}}function r2(t){return t.viewCache_.serverCache.getNode()}function a2(t,e){const n=Ms(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Oe(e)&&!n.getImmediateChild(ke(e)).isEmpty())?n.getChild(e):null}function o_(t){return t.eventRegistrations_.length===0}function u2(t,e){t.eventRegistrations_.push(e)}function l_(t,e,n){const s=[];if(n){ne(e==null,"A cancel should cancel all event registrations.");const l=t.query._path;t.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(n,l);c&&s.push(c)})}if(e){let l=[];for(let a=0;a<t.eventRegistrations_.length;++a){const c=t.eventRegistrations_[a];if(!c.matches(e))l.push(c);else if(e.hasAnyCallback()){l=l.concat(t.eventRegistrations_.slice(a+1));break}}t.eventRegistrations_=l}else t.eventRegistrations_=[];return s}function r_(t,e,n,s){e.type===On.MERGE&&e.source.queryId!==null&&(ne(Ms(t.viewCache_),"We should always have a full cache before handling merges"),ne(Df(t.viewCache_),"Missing event cache, even though we have a server cache"));const l=t.viewCache_,a=e2(t.processor_,l,e,n,s);return Zk(t.processor_,a.viewCache),ne(a.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=a.viewCache,cE(t,a.changes,a.viewCache.eventCache.getNode(),null)}function c2(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(gt,(a,c)=>{s.push(Uo(a,c))}),n.isFullyInitialized()&&s.push(eE(n.getNode())),cE(t,s,n.getNode(),e)}function cE(t,e,n,s){const l=s?[s]:t.eventRegistrations_;return Dk(t.eventGenerator_,e,n,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru;class d2{constructor(){this.views=new Map}}function f2(t){ne(!ru,"__referenceConstructor has already been defined"),ru=t}function h2(){return ne(ru,"Reference.ts has not been loaded"),ru}function p2(t){return t.views.size===0}function Eh(t,e,n,s){const l=e.source.queryId;if(l!==null){const a=t.views.get(l);return ne(a!=null,"SyncTree gave us an op for an invalid query."),r_(a,e,n,s)}else{let a=[];for(const c of t.views.values())a=a.concat(r_(c,e,n,s));return a}}function m2(t,e,n,s,l){const a=e._queryIdentifier,c=t.views.get(a);if(!c){let h=su(n,l?s:null),g=!1;h?g=!0:s instanceof Ee?(h=vh(n,s),g=!1):(h=Ee.EMPTY_NODE,g=!1);const p=xu(new Is(h,g,!1),new Is(s,l,!1));return new l2(e,p)}return c}function g2(t,e,n,s,l,a){const c=m2(t,e,s,l,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,c),u2(c,n),c2(c,n)}function y2(t,e,n,s){const l=e._queryIdentifier,a=[];let c=[];const h=is(t);if(l==="default")for(const[g,p]of t.views.entries())c=c.concat(l_(p,n,s)),o_(p)&&(t.views.delete(g),p.query._queryParams.loadsAllData()||a.push(p.query));else{const g=t.views.get(l);g&&(c=c.concat(l_(g,n,s)),o_(g)&&(t.views.delete(l),g.query._queryParams.loadsAllData()||a.push(g.query)))}return h&&!is(t)&&a.push(new(h2())(e._repo,e._path)),{removed:a,events:c}}function dE(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Mo(t,e){let n=null;for(const s of t.views.values())n=n||a2(s,e);return n}function fE(t,e){if(e._queryParams.loadsAllData())return Eu(t);{const s=e._queryIdentifier;return t.views.get(s)}}function hE(t,e){return fE(t,e)!=null}function is(t){return Eu(t)!=null}function Eu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au;function v2(t){ne(!au,"__referenceConstructor has already been defined"),au=t}function _2(){return ne(au,"Reference.ts has not been loaded"),au}let x2=1;class a_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new st(null),this.pendingWriteTree_=$k(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function pE(t,e,n,s,l){return Lk(t.pendingWriteTree_,e,n,s,l),l?Fo(t,new Rs(ph(),e,n)):[]}function E2(t,e,n,s){Ok(t.pendingWriteTree_,e,n,s);const l=st.fromObject(n);return Fo(t,new Po(ph(),e,l))}function Wi(t,e,n=!1){const s=Bk(t.pendingWriteTree_,e);if(Hk(t.pendingWriteTree_,e)){let a=new st(null);return s.snap!=null?a=a.set($e(),!0):qt(s.children,c=>{a=a.set(new nt(c),!0)}),Fo(t,new iu(s.path,a,n))}else return[]}function Su(t,e,n){return Fo(t,new Rs(mh(),e,n))}function S2(t,e,n){const s=st.fromObject(n);return Fo(t,new Po(mh(),e,s))}function C2(t,e){return Fo(t,new lr(mh(),e))}function T2(t,e,n){const s=Ch(t,n);if(s){const l=Th(s),a=l.path,c=l.queryId,h=an(a,e),g=new lr(gh(c),h);return bh(t,a,g)}else return[]}function Bf(t,e,n,s,l=!1){const a=e._path,c=t.syncPointTree_.get(a);let h=[];if(c&&(e._queryIdentifier==="default"||hE(c,e))){const g=y2(c,e,n,s);p2(c)&&(t.syncPointTree_=t.syncPointTree_.remove(a));const p=g.removed;if(h=g.events,!l){const _=p.findIndex(E=>E._queryParams.loadsAllData())!==-1,x=t.syncPointTree_.findOnPath(a,(E,T)=>is(T));if(_&&!x){const E=t.syncPointTree_.subtree(a);if(!E.isEmpty()){const T=A2(E);for(let N=0;N<T.length;++N){const M=T[N],I=M.query,H=yE(t,M);t.listenProvider_.startListening(Ql(I),uu(t,I),H.hashFn,H.onComplete)}}}!x&&p.length>0&&!s&&(_?t.listenProvider_.stopListening(Ql(e),null):p.forEach(E=>{const T=t.queryToTagMap.get(Cu(E));t.listenProvider_.stopListening(Ql(E),T)}))}w2(t,p)}return h}function b2(t,e,n,s){const l=Ch(t,s);if(l!=null){const a=Th(l),c=a.path,h=a.queryId,g=an(c,e),p=new Rs(gh(h),g,n);return bh(t,c,p)}else return[]}function N2(t,e,n,s){const l=Ch(t,s);if(l){const a=Th(l),c=a.path,h=a.queryId,g=an(c,e),p=st.fromObject(n),_=new Po(gh(h),g,p);return bh(t,c,_)}else return[]}function u_(t,e,n,s=!1){const l=e._path;let a=null,c=!1;t.syncPointTree_.foreachOnPath(l,(E,T)=>{const N=an(E,l);a=a||Mo(T,N),c=c||is(T)});let h=t.syncPointTree_.get(l);h?(c=c||is(h),a=a||Mo(h,$e())):(h=new d2,t.syncPointTree_=t.syncPointTree_.set(l,h));let g;a!=null?g=!0:(g=!1,a=Ee.EMPTY_NODE,t.syncPointTree_.subtree(l).foreachChild((T,N)=>{const M=Mo(N,$e());M&&(a=a.updateImmediateChild(T,M))}));const p=hE(h,e);if(!p&&!e._queryParams.loadsAllData()){const E=Cu(e);ne(!t.queryToTagMap.has(E),"View does not exist, but we have a tag");const T=R2();t.queryToTagMap.set(E,T),t.tagToQueryMap.set(T,E)}const _=yh(t.pendingWriteTree_,l);let x=g2(h,e,n,_,a,g);if(!p&&!c&&!s){const E=fE(h,e);x=x.concat(I2(t,e,E))}return x}function Sh(t,e,n){const l=t.pendingWriteTree_,a=t.syncPointTree_.findOnPath(e,(c,h)=>{const g=an(c,e),p=Mo(h,g);if(p)return p});return oE(l,e,a,n,!0)}function Fo(t,e){return mE(e,t.syncPointTree_,null,yh(t.pendingWriteTree_,$e()))}function mE(t,e,n,s){if(Oe(t.path))return gE(t,e,n,s);{const l=e.get($e());n==null&&l!=null&&(n=Mo(l,$e()));let a=[];const c=ke(t.path),h=t.operationForChild(c),g=e.children.get(c);if(g&&h){const p=n?n.getImmediateChild(c):null,_=lE(s,c);a=a.concat(mE(h,g,p,_))}return l&&(a=a.concat(Eh(l,t,s,n))),a}}function gE(t,e,n,s){const l=e.get($e());n==null&&l!=null&&(n=Mo(l,$e()));let a=[];return e.children.inorderTraversal((c,h)=>{const g=n?n.getImmediateChild(c):null,p=lE(s,c),_=t.operationForChild(c);_&&(a=a.concat(gE(_,h,g,p)))}),l&&(a=a.concat(Eh(l,t,s,n))),a}function yE(t,e){const n=e.query,s=uu(t,n);return{hashFn:()=>(r2(e)||Ee.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return s?T2(t,n._path,s):C2(t,n._path);{const a=SD(l,n);return Bf(t,n,null,a)}}}}function uu(t,e){const n=Cu(e);return t.queryToTagMap.get(n)}function Cu(t){return t._path.toString()+"$"+t._queryIdentifier}function Ch(t,e){return t.tagToQueryMap.get(e)}function Th(t){const e=t.indexOf("$");return ne(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new nt(t.substr(0,e))}}function bh(t,e,n){const s=t.syncPointTree_.get(e);ne(s,"Missing sync point for query tag that we're tracking");const l=yh(t.pendingWriteTree_,e);return Eh(s,n,l,null)}function A2(t){return t.fold((e,n,s)=>{if(n&&is(n))return[Eu(n)];{let l=[];return n&&(l=dE(n)),qt(s,(a,c)=>{l=l.concat(c)}),l}})}function Ql(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(_2())(t._repo,t._path):t}function w2(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const l=Cu(s),a=t.queryToTagMap.get(l);t.queryToTagMap.delete(l),t.tagToQueryMap.delete(a)}}}function R2(){return x2++}function I2(t,e,n){const s=e._path,l=uu(t,e),a=yE(t,n),c=t.listenProvider_.startListening(Ql(e),l,a.hashFn,a.onComplete),h=t.syncPointTree_.subtree(s);if(l)ne(!is(h.value),"If we're adding a query, it shouldn't be shadowed");else{const g=h.fold((p,_,x)=>{if(!Oe(p)&&_&&is(_))return[Eu(_).query];{let E=[];return _&&(E=E.concat(dE(_).map(T=>T.query))),qt(x,(T,N)=>{E=E.concat(N)}),E}});for(let p=0;p<g.length;++p){const _=g[p];t.listenProvider_.stopListening(Ql(_),uu(t,_))}}return c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Nh(n)}node(){return this.node_}}class Ah{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=mt(this.path_,e);return new Ah(this.syncTree_,n)}node(){return Sh(this.syncTree_,this.path_)}}const M2=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},c_=function(t,e,n){if(!t||typeof t!="object")return t;if(ne(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return D2(t[".sv"],e,n);if(typeof t[".sv"]=="object")return k2(t[".sv"],e);ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},D2=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+t)}},k2=function(t,e,n){t.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&ne(!1,"Unexpected increment value: "+s);const l=e.node();if(ne(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return s;const c=l.getValue();return typeof c!="number"?s:c+s},vE=function(t,e,n,s){return wh(e,new Ah(n,t),s)},_E=function(t,e,n){return wh(t,new Nh(e),n)};function wh(t,e,n){const s=t.getPriority().val(),l=c_(s,e.getImmediateChild(".priority"),n);let a;if(t.isLeafNode()){const c=t,h=c_(c.getValue(),e,n);return h!==c.getValue()||l!==c.getPriority().val()?new Rt(h,Mt(l)):t}else{const c=t;return a=c,l!==c.getPriority().val()&&(a=a.updatePriority(new Rt(l))),c.forEachChild(gt,(h,g)=>{const p=wh(g,e.getImmediateChild(h),n);p!==g&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Ih(t,e){let n=e instanceof nt?e:new nt(e),s=t,l=ke(n);for(;l!==null;){const a=Do(s.node.children,l)||{children:{},childCount:0};s=new Rh(l,s,a),n=lt(n),l=ke(n)}return s}function zo(t){return t.node.value}function xE(t,e){t.node.value=e,Hf(t)}function EE(t){return t.node.childCount>0}function U2(t){return zo(t)===void 0&&!EE(t)}function Tu(t,e){qt(t.node.children,(n,s)=>{e(new Rh(n,t,s))})}function SE(t,e,n,s){n&&e(t),Tu(t,l=>{SE(l,e,!0)})}function P2(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function hr(t){return new nt(t.parent===null?t.name:hr(t.parent)+"/"+t.name)}function Hf(t){t.parent!==null&&L2(t.parent,t.name,t)}function L2(t,e,n){const s=U2(n),l=Qn(t.node.children,e);s&&l?(delete t.node.children[e],t.node.childCount--,Hf(t)):!s&&!l&&(t.node.children[e]=n.node,t.node.childCount++,Hf(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=/[\[\].#$\/\u0000-\u001F\u007F]/,B2=/[\[\].#$\u0000-\u001F\u007F]/,of=10*1024*1024,Mh=function(t){return typeof t=="string"&&t.length!==0&&!O2.test(t)},CE=function(t){return typeof t=="string"&&t.length!==0&&!B2.test(t)},H2=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),CE(t)},G2=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!ih(t)||t&&typeof t=="object"&&Qn(t,".sv")},q2=function(t,e,n,s){bu(yu(t,"value"),e,n)},bu=function(t,e,n){const s=n instanceof nt?new nk(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ns(s));if(typeof e=="function")throw new Error(t+"contains a function "+Ns(s)+" with contents = "+e.toString());if(ih(e))throw new Error(t+"contains "+e.toString()+" "+Ns(s));if(typeof e=="string"&&e.length>of/3&&vu(e)>of)throw new Error(t+"contains a string greater than "+of+" utf8 bytes "+Ns(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,a=!1;if(qt(e,(c,h)=>{if(c===".value")l=!0;else if(c!==".priority"&&c!==".sv"&&(a=!0,!Mh(c)))throw new Error(t+" contains an invalid key ("+c+") "+Ns(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ik(s,c),bu(t,h,s),sk(s)}),l&&a)throw new Error(t+' contains ".value" child '+Ns(s)+" in addition to actual children.")}},V2=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const a=nr(s);for(let c=0;c<a.length;c++)if(!(a[c]===".priority"&&c===a.length-1)){if(!Mh(a[c]))throw new Error(t+"contains an invalid key ("+a[c]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tk);let l=null;for(n=0;n<e.length;n++){if(s=e[n],l!==null&&In(l,s))throw new Error(t+"contains a path "+l.toString()+" that is ancestor of another path "+s.toString());l=s}},F2=function(t,e,n,s){const l=yu(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const a=[];qt(e,(c,h)=>{const g=new nt(c);if(bu(l,h,mt(n,g)),ah(g)===".priority"&&!G2(h))throw new Error(l+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),V2(l,a)},TE=function(t,e,n,s){if(!CE(n))throw new Error(yu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},z2=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TE(t,e,n)},Y2=function(t,e){if(ke(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},j2=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Mh(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!H2(n))throw new Error(yu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Nu(t,e){let n=null;for(let s=0;s<e.length;s++){const l=e[s],a=l.getPath();n!==null&&!uh(a,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:a}),n.events.push(l)}n&&t.eventLists_.push(n)}function bE(t,e,n){Nu(t,n),NE(t,s=>uh(s,e))}function qn(t,e,n){Nu(t,n),NE(t,s=>In(s,e)||In(e,s))}function NE(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const l=t.eventLists_[s];if(l){const a=l.path;e(a)?($2(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function $2(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();jl&&Gt("event: "+n.toString()),Vo(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="repo_interrupt",Q2=25;class X2{constructor(e,n,s,l){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new J2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nu(),this.transactionQueueTree_=new Rh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function W2(t,e,n){if(t.stats_=lh(t.repoInfo_),t.forceRestClient_||ND())t.server_=new tu(t.repoInfo_,(s,l,a,c)=>{d_(t,s,l,a,c)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>f_(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Dt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new vi(t.repoInfo_,e,(s,l,a,c)=>{d_(t,s,l,a,c)},s=>{f_(t,s)},s=>{eU(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=MD(t.repoInfo_,()=>new Ik(t.stats_,t.server_)),t.infoData_=new bk,t.infoSyncTree_=new a_({startListening:(s,l,a,c)=>{let h=[];const g=t.infoData_.getNode(s._path);return g.isEmpty()||(h=Su(t.infoSyncTree_,s._path,g),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),Dh(t,"connected",!1),t.serverSyncTree_=new a_({startListening:(s,l,a,c)=>(t.server_.listen(s,a,l,(h,g)=>{const p=c(h,g);qn(t.eventQueue_,s._path,p)}),[]),stopListening:(s,l)=>{t.server_.unlisten(s,l)}})}function Z2(t){const n=t.infoData_.getNode(new nt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Au(t){return M2({timestamp:Z2(t)})}function d_(t,e,n,s,l){t.dataUpdateCount++;const a=new nt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let c=[];if(l)if(s){const g=$a(n,p=>Mt(p));c=N2(t.serverSyncTree_,a,g,l)}else{const g=Mt(n);c=b2(t.serverSyncTree_,a,g,l)}else if(s){const g=$a(n,p=>Mt(p));c=S2(t.serverSyncTree_,a,g)}else{const g=Mt(n);c=Su(t.serverSyncTree_,a,g)}let h=a;c.length>0&&(h=Oo(t,a)),qn(t.eventQueue_,h,c)}function f_(t,e){Dh(t,"connected",e),e===!1&&iU(t)}function eU(t,e){qt(e,(n,s)=>{Dh(t,n,s)})}function Dh(t,e,n){const s=new nt("/.info/"+e),l=Mt(n);t.infoData_.updateSnapshot(s,l);const a=Su(t.infoSyncTree_,s,l);qn(t.eventQueue_,s,a)}function kh(t){return t.nextWriteId_++}function tU(t,e,n,s,l){wu(t,"set",{path:e.toString(),value:n,priority:s});const a=Au(t),c=Mt(n,s),h=Sh(t.serverSyncTree_,e),g=_E(c,h,a),p=kh(t),_=pE(t.serverSyncTree_,e,g,p,!0);Nu(t.eventQueue_,_),t.server_.put(e.toString(),c.val(!0),(E,T)=>{const N=E==="ok";N||Xt("set at "+e+" failed: "+E);const M=Wi(t.serverSyncTree_,p,!N);qn(t.eventQueue_,e,M),Gf(t,l,E,T)});const x=Ph(t,e);Oo(t,x),qn(t.eventQueue_,x,[])}function nU(t,e,n,s){wu(t,"update",{path:e.toString(),value:n});let l=!0;const a=Au(t),c={};if(qt(n,(h,g)=>{l=!1,c[h]=vE(mt(e,h),Mt(g),t.serverSyncTree_,a)}),l)Gt("update() called with empty data.  Don't do anything."),Gf(t,s,"ok",void 0);else{const h=kh(t),g=E2(t.serverSyncTree_,e,c,h);Nu(t.eventQueue_,g),t.server_.merge(e.toString(),n,(p,_)=>{const x=p==="ok";x||Xt("update at "+e+" failed: "+p);const E=Wi(t.serverSyncTree_,h,!x),T=E.length>0?Oo(t,e):e;qn(t.eventQueue_,T,E),Gf(t,s,p,_)}),qt(n,p=>{const _=Ph(t,mt(e,p));Oo(t,_)}),qn(t.eventQueue_,e,[])}}function iU(t){wu(t,"onDisconnectEvents");const e=Au(t),n=nu();Mf(t.onDisconnect_,$e(),(l,a)=>{const c=vE(l,a,t.serverSyncTree_,e);tE(n,l,c)});let s=[];Mf(n,$e(),(l,a)=>{s=s.concat(Su(t.serverSyncTree_,l,a));const c=Ph(t,l);Oo(t,c)}),t.onDisconnect_=nu(),qn(t.eventQueue_,$e(),s)}function sU(t,e,n){let s;ke(e._path)===".info"?s=u_(t.infoSyncTree_,e,n):s=u_(t.serverSyncTree_,e,n),bE(t.eventQueue_,e._path,s)}function oU(t,e,n){let s;ke(e._path)===".info"?s=Bf(t.infoSyncTree_,e,n):s=Bf(t.serverSyncTree_,e,n),bE(t.eventQueue_,e._path,s)}function lU(t){t.persistentConnection_&&t.persistentConnection_.interrupt(K2)}function wu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Gt(n,...e)}function Gf(t,e,n,s){e&&Vo(()=>{if(n==="ok")e(null);else{const l=(n||"error").toUpperCase();let a=l;s&&(a+=": "+s);const c=new Error(a);c.code=l,e(c)}})}function AE(t,e,n){return Sh(t.serverSyncTree_,e,n)||Ee.EMPTY_NODE}function Uh(t,e=t.transactionQueueTree_){if(e||Ru(t,e),zo(e)){const n=RE(t,e);ne(n.length>0,"Sending zero length transaction queue"),n.every(l=>l.status===0)&&rU(t,hr(e),n)}else EE(e)&&Tu(e,n=>{Uh(t,n)})}function rU(t,e,n){const s=n.map(p=>p.currentWriteId),l=AE(t,e,s);let a=l;const c=l.hash();for(let p=0;p<n.length;p++){const _=n[p];ne(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const x=an(e,_.path);a=a.updateChild(x,_.currentOutputSnapshotRaw)}const h=a.val(!0),g=e;t.server_.put(g.toString(),h,p=>{wu(t,"transaction put response",{path:g.toString(),status:p});let _=[];if(p==="ok"){const x=[];for(let E=0;E<n.length;E++)n[E].status=2,_=_.concat(Wi(t.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&x.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();Ru(t,Ih(t.transactionQueueTree_,e)),Uh(t,t.transactionQueueTree_),qn(t.eventQueue_,e,_);for(let E=0;E<x.length;E++)Vo(x[E])}else{if(p==="datastale")for(let x=0;x<n.length;x++)n[x].status===3?n[x].status=4:n[x].status=0;else{Xt("transaction at "+g.toString()+" failed: "+p);for(let x=0;x<n.length;x++)n[x].status=4,n[x].abortReason=p}Oo(t,e)}},c)}function Oo(t,e){const n=wE(t,e),s=hr(n),l=RE(t,n);return aU(t,l,s),s}function aU(t,e,n){if(e.length===0)return;const s=[];let l=[];const c=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const g=e[h],p=an(n,g.path);let _=!1,x;if(ne(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)_=!0,x=g.abortReason,l=l.concat(Wi(t.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=Q2)_=!0,x="maxretry",l=l.concat(Wi(t.serverSyncTree_,g.currentWriteId,!0));else{const E=AE(t,g.path,c);g.currentInputSnapshot=E;const T=e[h].update(E.val());if(T!==void 0){bu("transaction failed: Data returned ",T,g.path);let N=Mt(T);typeof T=="object"&&T!=null&&Qn(T,".priority")||(N=N.updatePriority(E.getPriority()));const I=g.currentWriteId,H=Au(t),F=_E(N,E,H);g.currentOutputSnapshotRaw=N,g.currentOutputSnapshotResolved=F,g.currentWriteId=kh(t),c.splice(c.indexOf(I),1),l=l.concat(pE(t.serverSyncTree_,g.path,F,g.currentWriteId,g.applyLocally)),l=l.concat(Wi(t.serverSyncTree_,I,!0))}else _=!0,x="nodata",l=l.concat(Wi(t.serverSyncTree_,g.currentWriteId,!0))}qn(t.eventQueue_,n,l),l=[],_&&(e[h].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(x==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(x),!1,null))))}Ru(t,t.transactionQueueTree_);for(let h=0;h<s.length;h++)Vo(s[h]);Uh(t,t.transactionQueueTree_)}function wE(t,e){let n,s=t.transactionQueueTree_;for(n=ke(e);n!==null&&zo(s)===void 0;)s=Ih(s,n),e=lt(e),n=ke(e);return s}function RE(t,e){const n=[];return IE(t,e,n),n.sort((s,l)=>s.order-l.order),n}function IE(t,e,n){const s=zo(e);if(s)for(let l=0;l<s.length;l++)n.push(s[l]);Tu(e,l=>{IE(t,l,n)})}function Ru(t,e){const n=zo(e);if(n){let s=0;for(let l=0;l<n.length;l++)n[l].status!==2&&(n[s]=n[l],s++);n.length=s,xE(e,n.length>0?n:void 0)}Tu(e,s=>{Ru(t,s)})}function Ph(t,e){const n=hr(wE(t,e)),s=Ih(t.transactionQueueTree_,e);return P2(s,l=>{lf(t,l)}),lf(t,s),SE(s,l=>{lf(t,l)}),n}function lf(t,e){const n=zo(e);if(n){const s=[];let l=[],a=-1;for(let c=0;c<n.length;c++)n[c].status===3||(n[c].status===1?(ne(a===c-1,"All SENT items should be at beginning of queue."),a=c,n[c].status=3,n[c].abortReason="set"):(ne(n[c].status===0,"Unexpected transaction status in abort"),n[c].unwatcher(),l=l.concat(Wi(t.serverSyncTree_,n[c].currentWriteId,!0)),n[c].onComplete&&s.push(n[c].onComplete.bind(null,new Error("set"),!1,null))));a===-1?xE(e,void 0):n.length=a+1,qn(t.eventQueue_,hr(e),l);for(let c=0;c<s.length;c++)Vo(s[c])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let l=n[s];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function cU(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Xt(`Invalid query segment '${n}' in query '${t}'`)}return e}const h_=function(t,e){const n=dU(t),s=n.namespace;n.domain==="firebase.com"&&Ei(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Ei("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yD();const l=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Bx(n.host,n.secure,s,l,e,"",s!==n.subdomain),path:new nt(n.pathString)}},dU=function(t){let e="",n="",s="",l="",a="",c=!0,h="https",g=443;if(typeof t=="string"){let p=t.indexOf("//");p>=0&&(h=t.substring(0,p-1),t=t.substring(p+2));let _=t.indexOf("/");_===-1&&(_=t.length);let x=t.indexOf("?");x===-1&&(x=t.length),e=t.substring(0,Math.min(_,x)),_<x&&(l=uU(t.substring(_,x)));const E=cU(t.substring(Math.min(t.length,x)));p=e.indexOf(":"),p>=0?(c=h==="https"||h==="wss",g=parseInt(e.substring(p+1),10)):p=e.length;const T=e.slice(0,p);if(T.toLowerCase()==="localhost")n="localhost";else if(T.split(".").length<=2)n=T;else{const N=e.indexOf(".");s=e.substring(0,N).toLowerCase(),n=e.substring(N+1),a=s}"ns"in E&&(a=E.ns)}return{host:e,port:g,domain:n,subdomain:s,secure:c,scheme:h,pathString:l,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e,n,s,l){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Dt(this.snapshot.exportVal())}}class hU{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ne(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,s,l){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=l}get key(){return Oe(this._path)?null:ah(this._path)}get ref(){return new os(this._repo,this._path)}get _queryIdentifier(){const e=Wv(this._queryParams),n=sh(e);return n==="{}"?"default":n}get _queryObject(){return Wv(this._queryParams)}isEqual(e){if(e=ur(e),!(e instanceof Lh))return!1;const n=this._repo===e._repo,s=uh(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return n&&s&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+ek(this._path)}}class os extends Lh{constructor(e,n){super(e,n,new hh,!1)}get parent(){const e=Jx(this._path);return e===null?null:new os(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class cu{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new nt(e),s=qf(this.ref,e);return new cu(this._node.getChild(n),s,gt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,l)=>e(new cu(l,qf(this.ref,s),gt)))}hasChild(e){const n=new nt(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $t(t,e){return t=ur(t),t._checkNotDeleted("ref"),e!==void 0?qf(t._root,e):t._root}function qf(t,e){return t=ur(t),ke(t._path)===null?z2("child","path",e):TE("child","path",e),new os(t._repo,mt(t._path,e))}function Pa(t,e){t=ur(t),Y2("set",t._path),q2("set",e,t._path);const n=new rr;return tU(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Kn(t,e){F2("update",e,t._path);const n=new rr;return nU(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Oh{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new fU("value",this,new cu(e.snapshotNode,new os(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new hU(this,e,n):null}matches(e){return e instanceof Oh?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function mU(t,e,n,s,l){const a=new pU(n,void 0),c=new Oh(a);return sU(t._repo,t,c),()=>oU(t._repo,t,c)}function gU(t,e,n,s){return mU(t,"value",e)}f2(os);v2(os);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU="FIREBASE_DATABASE_EMULATOR_HOST",Vf={};let vU=!1;function _U(t,e,n,s){const l=e.lastIndexOf(":"),a=e.substring(0,l),c=th(a);t.repoInfo_=new Bx(e,c,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function xU(t,e,n,s,l){let a=s||t.options.databaseURL;a===void 0&&(t.options.projectId||Ei("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gt("Using default host for project ",t.options.projectId),a=`${t.options.projectId}-default-rtdb.firebaseio.com`);let c=h_(a,l),h=c.repoInfo,g;typeof process<"u"&&Uv&&(g=Uv[yU]),g?(a=`http://${g}?ns=${h.namespace}`,c=h_(a,l),h=c.repoInfo):c.repoInfo.secure;const p=new wD(t.name,t.options,e);j2("Invalid Firebase Database URL",c),Oe(c.path)||Ei("Database URL must point to the root of a Firebase Database (not including a child path).");const _=SU(h,t,p,new AD(t,n));return new CU(_,t)}function EU(t,e){const n=Vf[e];(!n||n[t.key]!==t)&&Ei(`Database ${e}(${t.repoInfo_}) has already been deleted.`),lU(t),delete n[t.key]}function SU(t,e,n,s){let l=Vf[e.name];l||(l={},Vf[e.name]=l);let a=l[t.toURLString()];return a&&Ei("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new X2(t,vU,n,s),l[t.toURLString()]=a,a}class CU{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(W2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new os(this._repo,$e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(EU(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ei("Cannot call "+e+" on a deleted database.")}}function TU(t=WM(),e){const n=JM(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=DI("database");s&&bU(n,...s)}return n}function bU(t,e,n,s={}){t=ur(t),t._checkNotDeleted("useEmulator");const l=`${e}:${n}`,a=t._repoInternal;if(t._instanceStarted){if(l===t._repoInternal.repoInfo_.host&&Ka(s,a.repoInfo_.emulatorOptions))return;Ei("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let c;if(a.repoInfo_.nodeAdmin)s.mockUserToken&&Ei('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new Ba(Ba.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:UI(s.mockUserToken,t.app.options.projectId);c=new Ba(h)}th(e)&&(kI(e),OI("Database",!0)),_U(a,l,s,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t){dD(XM),Xa(new Zl("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return xU(s,l,a,n)},"PUBLIC").setMultipleInstances(!0)),wo(Pv,Lv,t),wo(Pv,Lv,"esm2020")}vi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};vi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};NU();const AU={apiKey:"AIzaSyCW5DcLgmK4HSVF6BqRDMkz1k3Hjt-JaZ4",authDomain:"st-bernard-kofc-superbowl-grid.firebaseapp.com",projectId:"st-bernard-kofc-superbowl-grid",storageBucket:"st-bernard-kofc-superbowl-grid.appspot.com",messagingSenderId:"619277918232",appId:"1:619277918232:web:4cbdf203d06471d563636d",measurementId:"G-1P3RY5S27M"},wU=Ex(AU),Kt=TU(wU),Ha=()=>Array.from({length:100},(t,e)=>({id:e,row:Math.floor(e/10),col:e%10,participantId:null,alias:"",paidAmount:0,assigned:!1})),Ga={teamA:"NFC",teamB:"AFC",costPerBox:10,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null),isLocked:!1,payouts:{mode:"standard",standardPayoutType:"percent",charityPayoutType:"percent",charityPercent:50,charityFixedAmount:500,standardSplits:{q1:20,half:30,q3:20,final:30},scoreChangeMultiplier:3,scoreChangeAppliesTo:"perBox",scoreChangeInitialRefund:!0}},RU={adminPassword:"admin",charityName:"Super Bowl Charity Contest",zelleAccount:"",paypalAccount:"",venmoAccount:"",otherPaymentInfo:""},p_=(t,e=Ga)=>({id:crypto.randomUUID(),name:t,squares:Ha(),participants:[],scores:[],settings:{...e,isLocked:!1,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)},createdAt:Date.now()}),IU=()=>{const[t,e]=W.useState(null),[n,s]=W.useState(!1),[l,a]=W.useState("grid"),[c,h]=W.useState(null),[g,p]=W.useState([]),[_,x]=W.useState(!1),[E,T]=W.useState(!1),[N,M]=W.useState(""),[I,H]=W.useState(!1),[F,q]=W.useState(!1),[J,se]=W.useState(!1);W.useEffect(()=>{const w=$t(Kt,"state");return gU(w,j=>{const ee=j.val();if(ee){if(ee.pools){const pe=Array.isArray(ee.pools)?ee.pools:Object.values(ee.pools);ee.pools=pe.map(ye=>{var Ve,dt,We;let De=[];Array.isArray(ye.squares)?De=ye.squares:ye.squares&&typeof ye.squares=="object"?De=Array.from({length:100},(Fe,Vt)=>ye.squares[Vt]||Ha()[Vt]):De=Ha();const Re=Fe=>Array.isArray(Fe)?Fe.length===10?Fe:[...Fe,...Array(10-Fe.length).fill(null)]:Fe&&typeof Fe=="object"?Array.from({length:10},(Vt,Ti)=>Fe[Ti]??null):Array(10).fill(null);return{...ye,squares:De,participants:ye.participants||[],scores:ye.scores||[],settings:{...Ga,...ye.settings,rowNumbers:Re((Ve=ye.settings)==null?void 0:Ve.rowNumbers),colNumbers:Re((dt=ye.settings)==null?void 0:dt.colNumbers),payouts:{...Ga.payouts,...(We=ye.settings)==null?void 0:We.payouts}}}})}e(ee)}else{const pe=p_("Super Bowl Contest"),ye={pools:[pe],activePoolId:pe.id,globalSettings:RU};Pa($t(Kt,"state"),ye),e(ye)}s(!0)})},[]);const B=W.useMemo(()=>!t||!t.pools?null:t.pools.find(w=>w.id===t.activePoolId)||t.pools[0],[t==null?void 0:t.activePoolId,t==null?void 0:t.pools]),X=W.useCallback(w=>{if(!t)return;const j=t.pools.findIndex(ee=>ee.id===t.activePoolId);j!==-1&&Kn($t(Kt,`state/pools/${j}`),w)},[t]),ve=W.useCallback(w=>{if(!t)return;const j=t.pools.findIndex(ee=>ee.id===t.activePoolId);j!==-1&&Kn($t(Kt,`state/pools/${j}/settings`),w)},[t]),oe=W.useCallback(w=>{t&&Kn($t(Kt,"state/globalSettings"),w)},[t]),de=W.useCallback((w,j)=>{if(!t||!B)return;const ee=t.pools.findIndex(We=>We.id===t.activePoolId);if(ee===-1)return;const pe=j.find(We=>We.id===w);if(!pe)return;const ye=(pe.paymentHistory||[]).reduce((We,Fe)=>We+Fe.amount,0),De=B.settings.costPerBox||10;let Re=ye;const Ve={};(B.squares||[]).forEach((We,Fe)=>{if(We.participantId===w){const Vt=Math.min(Re,De);Re=Math.max(0,Re-Vt),Ve[`state/pools/${ee}/squares/${Fe}`]={...We,paidAmount:Vt,alias:pe.alias}}});const dt={...Ve,[`state/pools/${ee}/participants`]:j};Kn($t(Kt),dt).catch(We=>console.error("Firebase atomic financial update failed:",We))},[t,B]),ge=W.useCallback((w,j)=>{if(!t||!B)return;const ee=t.pools.findIndex(Re=>Re.id===t.activePoolId);if(ee===-1)return;let pe=(B.participants||[]).find(Re=>Re.alias.toLowerCase()===w.alias.toLowerCase());const ye=[...B.participants||[]];if(!pe)pe={...w,id:crypto.randomUUID(),paymentHistory:[]},ye.push(pe);else{const Re=ye.findIndex(Ve=>Ve.id===pe.id);ye[Re]={...pe,...w}}const De={};De[`state/pools/${ee}/participants`]=ye,j.forEach(Re=>{De[`state/pools/${ee}/squares/${Re}`]={...B.squares[Re]||{},participantId:pe.id,alias:w.alias.toUpperCase(),assigned:!0}}),Kn($t(Kt),De).then(()=>{pe&&de(pe.id,ye)}),p([]),h(null),x(!1)},[t,B,de]),Se=W.useCallback(w=>{var ee;if(!B)return;const j=(B.squares||[])[w];j!=null&&j.assigned?(h(w),x(!0)):(ee=B.settings)!=null&&ee.isLocked||p(pe=>pe.includes(w)?pe.filter(ye=>ye!==w):[...pe,w])},[B]),ie=W.useCallback(w=>{if(!t||!B)return;const j=B.squares[w];if(!j||!j.participantId||!window.confirm(`ARE YOU SURE?

This will remove the claim on Box #${w+1}.`))return;const ee=t.pools.findIndex(Ve=>Ve.id===t.activePoolId);if(ee===-1)return;const pe=j.participantId,ye=B.participants.find(Ve=>Ve.id===pe),De=B.settings.costPerBox||10,Re={};if(Re[`state/pools/${ee}/squares/${w}`]={...j,participantId:null,alias:"",assigned:!1,paidAmount:0},ye){let dt=(ye.paymentHistory||[]).reduce((We,Fe)=>We+Fe.amount,0);B.squares.forEach((We,Fe)=>{if(Fe!==w&&We.participantId===pe){const Vt=Math.min(dt,De);dt=Math.max(0,dt-Vt),Re[`state/pools/${ee}/squares/${Fe}`]={...We,paidAmount:Vt}}})}Kn($t(Kt),Re).then(()=>{console.log(`Unassigned square ${w+1} and redistributed payments.`)}).catch(Ve=>{console.error("Failed to unassign square:",Ve),alert("Error removing name. Please try again.")}),x(!1),h(null)},[t,B]),be=W.useCallback(w=>{if(!t||!B)return;const j=t.pools.findIndex(pe=>pe.id===t.activePoolId),ee={};B.squares.forEach((pe,ye)=>{pe.participantId===w&&(ee[`state/pools/${j}/squares/${ye}`]={...pe,participantId:null,alias:"",assigned:!1,paidAmount:0})}),Kn($t(Kt),ee)},[t,B]),Ge=W.useCallback((w,j,ee,pe)=>{if(!t||!B)return;const ye=B.participants.map(De=>De.id===w?{...De,paymentHistory:[...De.paymentHistory||[],{id:crypto.randomUUID(),amount:j,method:ee,timestamp:Date.now(),note:pe}]}:De);de(w,ye)},[t,B,de]),U=W.useCallback((w,j,ee,pe,ye)=>{if(!t||!B)return;const De=B.participants.map(Re=>Re.id===w?{...Re,paymentHistory:(Re.paymentHistory||[]).map(Ve=>Ve.id===j?{...Ve,amount:ee,method:pe,note:ye}:Ve)}:Re);de(w,De)},[t,B,de]),K=W.useCallback((w,j)=>{if(!t||!B)return;const ee=B.participants.map(pe=>pe.id===w?{...pe,paymentHistory:(pe.paymentHistory||[]).filter(ye=>ye.id!==j)}:pe);de(w,ee)},[t,B,de]),le=W.useCallback((w,j)=>{if(!t||!B)return;const ee=t.pools.findIndex(ye=>ye.id===t.activePoolId),pe=B.participants.findIndex(ye=>ye.id===w);pe!==-1&&Kn($t(Kt,`state/pools/${ee}/participants/${pe}`),j)},[t,B]),Q=W.useCallback(()=>{const w=()=>Array.from({length:10},(j,ee)=>ee).sort(()=>Math.random()-.5);ve({rowNumbers:w(),colNumbers:w()})},[ve]),re=W.useCallback(w=>{if(!B)return;const j=[...B.scores||[],w];X({scores:j})},[B,X]),b=W.useCallback(w=>{if(!B)return;const j=(B.scores||[]).map(ee=>ee.id===w.id?w:ee);X({scores:j})},[B,X]),D=W.useCallback(w=>{if(!B)return;const j=(B.scores||[]).filter(ee=>ee.id!==w);X({scores:j})},[B,X]),z=W.useCallback(()=>{window.confirm("ARE YOU SURE? This will clear all boxes for the active grid.")&&X({squares:Ha(),participants:[],scores:[],settings:{...B.settings,isLocked:!1,rowNumbers:Array(10).fill(null),colNumbers:Array(10).fill(null)}})},[B,X]),te=W.useCallback((w,j)=>{if(!t)return;const ee=p_(w,{...Ga,...j}),pe=[...t.pools,ee];Pa($t(Kt,"state"),{...t,pools:pe,activePoolId:ee.id})},[t]),ae=W.useCallback(w=>{t&&Kn($t(Kt,"state"),{activePoolId:w})},[t]),ce=W.useCallback(w=>{if(!(!t||t.pools.length<=1)&&window.confirm("Permanently delete this contest?")){const j=t.pools.filter(ee=>ee.id!==w);Pa($t(Kt,"state"),{...t,pools:j,activePoolId:j[0].id})}},[t]),fe=W.useCallback(w=>{Pa($t(Kt,"state"),w)},[]),Ae=w=>{w.preventDefault(),N===(t==null?void 0:t.globalSettings.adminPassword)?(T(!0),H(!1)):H(!0)};return!n||!t||!B?y.jsxs("div",{className:"min-h-screen bg-indigo-950 flex flex-col items-center justify-center p-8 text-center",children:[y.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin mb-6"}),y.jsx("h2",{className:"text-white font-black uppercase tracking-widest text-sm",children:"Initializing Charity Grid..."})]}):y.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col font-sans selection:bg-indigo-100",children:[y.jsx("header",{className:"bg-indigo-900 text-white p-6 md:p-8 shadow-2xl sticky top-0 z-50",children:y.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-5 w-full md:w-auto",children:[y.jsx("div",{className:"w-4 h-4 md:w-16 md:h-16 bg-white rounded-2xl flex-shrink-0 flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>a("grid"),children:y.jsx("img",{src:"/charitysuperbowl/logo.png",alt:t.globalSettings.charityName,className:"w-3.5 h-3.5 md:w-14 md:h-14 object-contain",onerror:"this.src='/charitysuperbowl/kofc-logo.svg'"})}),y.jsxs("div",{className:"flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center gap-3",children:y.jsx("select",{value:t.activePoolId,onChange:w=>ae(w.target.value),className:"bg-indigo-800 text-white border-none rounded-xl px-4 py-1.5 font-black uppercase text-sm md:text-xl tracking-tighter outline-none focus:ring-2 focus:ring-indigo-400 max-w-full cursor-pointer hover:bg-indigo-700 transition-colors",children:t.pools.map(w=>y.jsx("option",{value:w.id,children:w.name.toUpperCase()},w.id))})}),y.jsxs("p",{className:"text-[10px] md:text-xs text-indigo-300 font-bold uppercase tracking-widest mt-1 truncate",children:["Benefiting ",t.globalSettings.charityName]})]})]}),y.jsxs("nav",{className:"flex flex-wrap justify-center gap-1 bg-white/10 p-1.5 rounded-2xl backdrop-blur-md",children:[[{id:"grid",icon:"fa-th",label:"Board"},{id:"winners",icon:"fa-trophy",label:"Winners"},{id:"player",icon:"fa-user-check",label:"My Boxes"},{id:"admin",icon:"fa-lock",label:"Admin"}].map(w=>y.jsxs("button",{onClick:()=>a(w.id),className:`px-4 md:px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${l===w.id?"bg-white text-indigo-900 shadow-lg":"hover:bg-white/10 text-white/70"}`,children:[y.jsx("i",{className:`fas ${w.icon} text-[10px]`})," ",y.jsx("span",{className:"hidden sm:inline",children:w.label})]},w.id)),y.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest text-green-400 hover:bg-white/10 flex items-center gap-2",children:[y.jsx("i",{className:"fas fa-share-alt"})," ",y.jsx("span",{className:"hidden sm:inline",children:"Share"})]}),y.jsx("button",{onClick:()=>se(!0),className:"w-10 h-10 rounded-xl text-white/50 hover:text-white flex items-center justify-center",children:y.jsx("i",{className:"fas fa-question-circle"})})]})]})}),y.jsxs("main",{className:"flex-grow max-w-7xl mx-auto w-full p-4 md:p-8",children:[l==="grid"&&y.jsx(nT,{squares:B.squares,pendingSelection:g,settings:{...t.globalSettings,...B.settings},onSquareClick:Se,participants:B.participants,onCheckout:()=>x(!0),onSetPendingSelection:p,activePool:B}),l==="winners"&&y.jsx(g_,{activePool:B,settings:{...t.globalSettings,...B.settings},onAddScore:re,onUpdateScore:b,onDeleteScore:D,isAdmin:!1}),l==="player"&&y.jsx(EI,{state:t}),l==="admin"&&(E?y.jsx(sT,{activePoolId:t.activePoolId,poolSettings:B.settings,globalSettings:t.globalSettings,onUpdatePoolSettings:ve,onUpdateActivePool:X,onUpdateGlobalSettings:oe,onResetGrid:z,onDeletePool:ce,onGenerateNumbers:Q,squares:B.squares,participants:B.participants,onUpdateSquare:(w,j)=>Kn($t(Kt,`state/pools/${t.pools.findIndex(ee=>ee.id===t.activePoolId)}/squares/${w}`),j),onUpdateParticipant:le,onUnassignSquare:ie,onClearUserBoxes:be,onApplyPayment:Ge,onEditPayment:U,onDeletePayment:K,onAddScore:re,onUpdateScore:b,onDeleteScore:D,scores:B.scores,pools:t.pools,onSwitchPool:ae,onCreatePool:te,fullState:t,onImportState:fe}):y.jsxs("div",{className:"max-w-md mx-auto mt-20 p-10 bg-white rounded-[3rem] shadow-2xl text-center border border-indigo-50",children:[y.jsx("div",{className:"w-16 h-16 bg-indigo-50 text-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:y.jsx("i",{className:"fas fa-lock"})}),y.jsx("h2",{className:"text-xl font-black text-indigo-900 uppercase mb-2",children:"Admin Authentication"}),y.jsx("p",{className:"text-[10px] text-gray-400 font-bold uppercase mb-8",children:"Password required for management access"}),y.jsxs("form",{onSubmit:Ae,className:"space-y-4",children:[y.jsx("input",{autoFocus:!0,type:"password",value:N,onChange:w=>M(w.target.value),className:`w-full px-6 py-4 bg-gray-50 rounded-2xl text-center font-black outline-none border-2 transition-all ${I?"border-red-500 bg-red-50":"focus:border-indigo-500 border-transparent"}`,placeholder:""}),I&&y.jsx("p",{className:"text-red-500 text-[10px] font-bold uppercase",children:"Incorrect password"}),y.jsx("button",{type:"submit",className:"w-full py-4 bg-indigo-900 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-black transition-all",children:"Unlock Panel"})]})]}))]}),y.jsxs("footer",{className:"bg-white border-t border-gray-100 p-8 text-center text-gray-400 print:hidden",children:[y.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] mb-2",children:t.globalSettings.charityName}),y.jsxs("p",{className:"text-[9px] font-medium uppercase tracking-widest",children:["Powered by Charity Squares Engine  ",new Date().getFullYear()]})]}),y.jsx(oT,{isOpen:_,onClose:()=>{x(!1),h(null)},onSubmit:ge,onUnassign:ie,onSetPendingSelection:p,selectedSquareIds:c!==null?[c]:g,activePool:B,existingParticipants:B.participants,settings:{...t.globalSettings,...B.settings},isAdmin:E}),y.jsx(lT,{isOpen:F,onClose:()=>q(!1),appState:t}),y.jsx(rT,{isOpen:J,onClose:()=>se(!1)}),y.jsx(xI,{globalSettings:t.globalSettings,activePool:B})]})},ME=document.getElementById("root");if(!ME)throw new Error("Could not find root element to mount to");const MU=tT.createRoot(ME);MU.render(y.jsx(JC.StrictMode,{children:y.jsx(IU,{})}));
